(()=>{var bO=Object.create;var Tl=Object.defineProperty;var EO=Object.getOwnPropertyDescriptor;var OO=Object.getOwnPropertyNames,Ey=Object.getOwnPropertySymbols,xO=Object.getPrototypeOf,xy=Object.prototype.hasOwnProperty,TO=Object.prototype.propertyIsEnumerable;var Ty=Math.pow,Oy=(t,e,r)=>e in t?Tl(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,kl=(t,e)=>{for(var r in e||(e={}))xy.call(e,r)&&Oy(t,r,e[r]);if(Ey)for(var r of Ey(e))TO.call(e,r)&&Oy(t,r,e[r]);return t};var kO=t=>Tl(t,"__esModule",{value:!0});var NO=(t=>typeof require!="undefined"?require:typeof Proxy!="undefined"?new Proxy(t,{get:(e,r)=>(typeof require!="undefined"?require:e)[r]}):t)(function(t){if(typeof require!="undefined")return require.apply(this,arguments);throw new Error('Dynamic require of "'+t+'" is not supported')});var at=(t,e)=>()=>(t&&(e=t(t=0)),e);var Te=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var IO=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of OO(e))!xy.call(t,i)&&(r||i!=="default")&&Tl(t,i,{get:()=>e[i],enumerable:!(n=EO(e,i))||n.enumerable});return t},At=(t,e)=>IO(kO(Tl(t!=null?bO(xO(t)):{},"default",!e&&t&&t.__esModule?{get:()=>t.default,enumerable:!0}:{value:t,enumerable:!0})),t);var re=(t,e,r)=>new Promise((n,i)=>{var o=l=>{try{a(r.next(l))}catch(h){i(h)}},s=l=>{try{a(r.throw(l))}catch(h){i(h)}},a=l=>l.done?n(l.value):Promise.resolve(l.value).then(o,s);a((r=r.apply(t,e)).next())});var Pf=Te((rI,Ny)=>{"use strict";var ky=Object.getOwnPropertySymbols,AO=Object.prototype.hasOwnProperty,RO=Object.prototype.propertyIsEnumerable;function DO(t){if(t==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}function FO(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de",Object.getOwnPropertyNames(t)[0]==="5")return!1;for(var e={},r=0;r<10;r++)e["_"+String.fromCharCode(r)]=r;var n=Object.getOwnPropertyNames(e).map(function(o){return e[o]});if(n.join("")!=="0123456789")return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach(function(o){i[o]=o}),Object.keys(Object.assign({},i)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}Ny.exports=FO()?Object.assign:function(t,e){for(var r,n=DO(t),i,o=1;o<arguments.length;o++){r=Object(arguments[o]);for(var s in r)AO.call(r,s)&&(n[s]=r[s]);if(ky){i=ky(r);for(var a=0;a<i.length;a++)RO.call(r,i[a])&&(n[i[a]]=r[i[a]])}}return n}});var qy=Te(Ue=>{"use strict";var jf=Pf(),Oo=60103,Ry=60106;Ue.Fragment=60107;Ue.StrictMode=60108;Ue.Profiler=60114;var Dy=60109,Fy=60110,Cy=60112;Ue.Suspense=60113;var Ly=60115,Py=60116;typeof Symbol=="function"&&Symbol.for&&(Pr=Symbol.for,Oo=Pr("react.element"),Ry=Pr("react.portal"),Ue.Fragment=Pr("react.fragment"),Ue.StrictMode=Pr("react.strict_mode"),Ue.Profiler=Pr("react.profiler"),Dy=Pr("react.provider"),Fy=Pr("react.context"),Cy=Pr("react.forward_ref"),Ue.Suspense=Pr("react.suspense"),Ly=Pr("react.memo"),Py=Pr("react.lazy"));var Pr,Iy=typeof Symbol=="function"&&Symbol.iterator;function CO(t){return t===null||typeof t!="object"?null:(t=Iy&&t[Iy]||t["@@iterator"],typeof t=="function"?t:null)}function js(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var My={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},jy={};function xo(t,e,r){this.props=t,this.context=e,this.refs=jy,this.updater=r||My}xo.prototype.isReactComponent={};xo.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error(js(85));this.updater.enqueueSetState(this,t,e,"setState")};xo.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Uy(){}Uy.prototype=xo.prototype;function Uf(t,e,r){this.props=t,this.context=e,this.refs=jy,this.updater=r||My}var Bf=Uf.prototype=new Uy;Bf.constructor=Uf;jf(Bf,xo.prototype);Bf.isPureReactComponent=!0;var zf={current:null},By=Object.prototype.hasOwnProperty,zy={key:!0,ref:!0,__self:!0,__source:!0};function Vy(t,e,r){var n,i={},o=null,s=null;if(e!=null)for(n in e.ref!==void 0&&(s=e.ref),e.key!==void 0&&(o=""+e.key),e)By.call(e,n)&&!zy.hasOwnProperty(n)&&(i[n]=e[n]);var a=arguments.length-2;if(a===1)i.children=r;else if(1<a){for(var l=Array(a),h=0;h<a;h++)l[h]=arguments[h+2];i.children=l}if(t&&t.defaultProps)for(n in a=t.defaultProps,a)i[n]===void 0&&(i[n]=a[n]);return{$$typeof:Oo,type:t,key:o,ref:s,props:i,_owner:zf.current}}function LO(t,e){return{$$typeof:Oo,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Vf(t){return typeof t=="object"&&t!==null&&t.$$typeof===Oo}function PO(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var Ay=/\/+/g;function Mf(t,e){return typeof t=="object"&&t!==null&&t.key!=null?PO(""+t.key):e.toString(36)}function Il(t,e,r,n,i){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var s=!1;if(t===null)s=!0;else switch(o){case"string":case"number":s=!0;break;case"object":switch(t.$$typeof){case Oo:case Ry:s=!0}}if(s)return s=t,i=i(s),t=n===""?"."+Mf(s,0):n,Array.isArray(i)?(r="",t!=null&&(r=t.replace(Ay,"$&/")+"/"),Il(i,e,r,"",function(h){return h})):i!=null&&(Vf(i)&&(i=LO(i,r+(!i.key||s&&s.key===i.key?"":(""+i.key).replace(Ay,"$&/")+"/")+t)),e.push(i)),1;if(s=0,n=n===""?".":n+":",Array.isArray(t))for(var a=0;a<t.length;a++){o=t[a];var l=n+Mf(o,a);s+=Il(o,e,r,l,i)}else if(l=CO(t),typeof l=="function")for(t=l.call(t),a=0;!(o=t.next()).done;)o=o.value,l=n+Mf(o,a++),s+=Il(o,e,r,l,i);else if(o==="object")throw e=""+t,Error(js(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e));return s}function Nl(t,e,r){if(t==null)return t;var n=[],i=0;return Il(t,n,"","",function(o){return e.call(r,o,i++)}),n}function MO(t){if(t._status===-1){var e=t._result;e=e(),t._status=0,t._result=e,e.then(function(r){t._status===0&&(r=r.default,t._status=1,t._result=r)},function(r){t._status===0&&(t._status=2,t._result=r)})}if(t._status===1)return t._result;throw t._result}var Wy={current:null};function Nn(){var t=Wy.current;if(t===null)throw Error(js(321));return t}var jO={ReactCurrentDispatcher:Wy,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:zf,IsSomeRendererActing:{current:!1},assign:jf};Ue.Children={map:Nl,forEach:function(t,e,r){Nl(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return Nl(t,function(){e++}),e},toArray:function(t){return Nl(t,function(e){return e})||[]},only:function(t){if(!Vf(t))throw Error(js(143));return t}};Ue.Component=xo;Ue.PureComponent=Uf;Ue.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=jO;Ue.cloneElement=function(t,e,r){if(t==null)throw Error(js(267,t));var n=jf({},t.props),i=t.key,o=t.ref,s=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,s=zf.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)By.call(e,l)&&!zy.hasOwnProperty(l)&&(n[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)n.children=r;else if(1<l){a=Array(l);for(var h=0;h<l;h++)a[h]=arguments[h+2];n.children=a}return{$$typeof:Oo,type:t.type,key:i,ref:o,props:n,_owner:s}};Ue.createContext=function(t,e){return e===void 0&&(e=null),t={$$typeof:Fy,_calculateChangedBits:e,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null},t.Provider={$$typeof:Dy,_context:t},t.Consumer=t};Ue.createElement=Vy;Ue.createFactory=function(t){var e=Vy.bind(null,t);return e.type=t,e};Ue.createRef=function(){return{current:null}};Ue.forwardRef=function(t){return{$$typeof:Cy,render:t}};Ue.isValidElement=Vf;Ue.lazy=function(t){return{$$typeof:Py,_payload:{_status:-1,_result:t},_init:MO}};Ue.memo=function(t,e){return{$$typeof:Ly,type:t,compare:e===void 0?null:e}};Ue.useCallback=function(t,e){return Nn().useCallback(t,e)};Ue.useContext=function(t,e){return Nn().useContext(t,e)};Ue.useDebugValue=function(){};Ue.useEffect=function(t,e){return Nn().useEffect(t,e)};Ue.useImperativeHandle=function(t,e,r){return Nn().useImperativeHandle(t,e,r)};Ue.useLayoutEffect=function(t,e){return Nn().useLayoutEffect(t,e)};Ue.useMemo=function(t,e){return Nn().useMemo(t,e)};Ue.useReducer=function(t,e,r){return Nn().useReducer(t,e,r)};Ue.useRef=function(t){return Nn().useRef(t)};Ue.useState=function(t){return Nn().useState(t)};Ue.version="17.0.2"});var Ce=Te((iI,$y)=>{"use strict";$y.exports=qy()});var Zy=Te(ze=>{"use strict";var ko,zs,Fl,Yf;typeof performance=="object"&&typeof performance.now=="function"?(Hy=performance,ze.unstable_now=function(){return Hy.now()}):(Wf=Date,Jy=Wf.now(),ze.unstable_now=function(){return Wf.now()-Jy});var Hy,Wf,Jy;typeof window>"u"||typeof MessageChannel!="function"?(To=null,qf=null,$f=function(){if(To!==null)try{var t=ze.unstable_now();To(!0,t),To=null}catch(e){throw setTimeout($f,0),e}},ko=function(t){To!==null?setTimeout(ko,0,t):(To=t,setTimeout($f,0))},zs=function(t,e){qf=setTimeout(t,e)},Fl=function(){clearTimeout(qf)},ze.unstable_shouldYield=function(){return!1},Yf=ze.unstable_forceFrameRate=function(){}):(Gy=window.setTimeout,Yy=window.clearTimeout,typeof console<"u"&&(Ky=window.cancelAnimationFrame,typeof window.requestAnimationFrame!="function"&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),typeof Ky!="function"&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")),Us=!1,Bs=null,Al=-1,Hf=5,Jf=0,ze.unstable_shouldYield=function(){return ze.unstable_now()>=Jf},Yf=function(){},ze.unstable_forceFrameRate=function(t){0>t||125<t?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Hf=0<t?Math.floor(1e3/t):5},Gf=new MessageChannel,Rl=Gf.port2,Gf.port1.onmessage=function(){if(Bs!==null){var t=ze.unstable_now();Jf=t+Hf;try{Bs(!0,t)?Rl.postMessage(null):(Us=!1,Bs=null)}catch(e){throw Rl.postMessage(null),e}}else Us=!1},ko=function(t){Bs=t,Us||(Us=!0,Rl.postMessage(null))},zs=function(t,e){Al=Gy(function(){t(ze.unstable_now())},e)},Fl=function(){Yy(Al),Al=-1});var To,qf,$f,Gy,Yy,Ky,Us,Bs,Al,Hf,Jf,Gf,Rl;function Kf(t,e){var r=t.length;t.push(e);e:for(;;){var n=r-1>>>1,i=t[n];if(i!==void 0&&0<Dl(i,e))t[n]=e,t[r]=i,r=n;else break e}}function Kr(t){return t=t[0],t===void 0?null:t}function Cl(t){var e=t[0];if(e!==void 0){var r=t.pop();if(r!==e){t[0]=r;e:for(var n=0,i=t.length;n<i;){var o=2*(n+1)-1,s=t[o],a=o+1,l=t[a];if(s!==void 0&&0>Dl(s,r))l!==void 0&&0>Dl(l,s)?(t[n]=l,t[a]=r,n=a):(t[n]=s,t[o]=r,n=o);else if(l!==void 0&&0>Dl(l,r))t[n]=l,t[a]=r,n=a;else break e}}return e}return null}function Dl(t,e){var r=t.sortIndex-e.sortIndex;return r!==0?r:t.id-e.id}var pn=[],Bn=[],UO=1,Mr=null,Zt=3,Ll=!1,Ri=!1,Vs=!1;function Zf(t){for(var e=Kr(Bn);e!==null;){if(e.callback===null)Cl(Bn);else if(e.startTime<=t)Cl(Bn),e.sortIndex=e.expirationTime,Kf(pn,e);else break;e=Kr(Bn)}}function Xf(t){if(Vs=!1,Zf(t),!Ri)if(Kr(pn)!==null)Ri=!0,ko(Qf);else{var e=Kr(Bn);e!==null&&zs(Xf,e.startTime-t)}}function Qf(t,e){Ri=!1,Vs&&(Vs=!1,Fl()),Ll=!0;var r=Zt;try{for(Zf(e),Mr=Kr(pn);Mr!==null&&(!(Mr.expirationTime>e)||t&&!ze.unstable_shouldYield());){var n=Mr.callback;if(typeof n=="function"){Mr.callback=null,Zt=Mr.priorityLevel;var i=n(Mr.expirationTime<=e);e=ze.unstable_now(),typeof i=="function"?Mr.callback=i:Mr===Kr(pn)&&Cl(pn),Zf(e)}else Cl(pn);Mr=Kr(pn)}if(Mr!==null)var o=!0;else{var s=Kr(Bn);s!==null&&zs(Xf,s.startTime-e),o=!1}return o}finally{Mr=null,Zt=r,Ll=!1}}var BO=Yf;ze.unstable_IdlePriority=5;ze.unstable_ImmediatePriority=1;ze.unstable_LowPriority=4;ze.unstable_NormalPriority=3;ze.unstable_Profiling=null;ze.unstable_UserBlockingPriority=2;ze.unstable_cancelCallback=function(t){t.callback=null};ze.unstable_continueExecution=function(){Ri||Ll||(Ri=!0,ko(Qf))};ze.unstable_getCurrentPriorityLevel=function(){return Zt};ze.unstable_getFirstCallbackNode=function(){return Kr(pn)};ze.unstable_next=function(t){switch(Zt){case 1:case 2:case 3:var e=3;break;default:e=Zt}var r=Zt;Zt=e;try{return t()}finally{Zt=r}};ze.unstable_pauseExecution=function(){};ze.unstable_requestPaint=BO;ze.unstable_runWithPriority=function(t,e){switch(t){case 1:case 2:case 3:case 4:case 5:break;default:t=3}var r=Zt;Zt=t;try{return e()}finally{Zt=r}};ze.unstable_scheduleCallback=function(t,e,r){var n=ze.unstable_now();switch(typeof r=="object"&&r!==null?(r=r.delay,r=typeof r=="number"&&0<r?n+r:n):r=n,t){case 1:var i=-1;break;case 2:i=250;break;case 5:i=1073741823;break;case 4:i=1e4;break;default:i=5e3}return i=r+i,t={id:UO++,callback:e,priorityLevel:t,startTime:r,expirationTime:i,sortIndex:-1},r>n?(t.sortIndex=r,Kf(Bn,t),Kr(pn)===null&&t===Kr(Bn)&&(Vs?Fl():Vs=!0,zs(Xf,r-n))):(t.sortIndex=i,Kf(pn,t),Ri||Ll||(Ri=!0,ko(Qf))),t};ze.unstable_wrapCallback=function(t){var e=Zt;return function(){var r=Zt;Zt=e;try{return t.apply(this,arguments)}finally{Zt=r}}}});var Qy=Te((sI,Xy)=>{"use strict";Xy.exports=Zy()});var Bv=Te(Wr=>{"use strict";var Nu=Ce(),lt=Pf(),Ct=Qy();function me(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!Nu)throw Error(me(227));var h1=new Set,va={};function Vi(t,e){Go(t,e),Go(t+"Capture",e)}function Go(t,e){for(va[t]=e,t=0;t<e.length;t++)h1.add(e[t])}var Cn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),zO=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,em=Object.prototype.hasOwnProperty,tm={},rm={};function VO(t){return em.call(rm,t)?!0:em.call(tm,t)?!1:zO.test(t)?rm[t]=!0:(tm[t]=!0,!1)}function WO(t,e,r,n){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function qO(t,e,r,n){if(e===null||typeof e>"u"||WO(t,e,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function nr(t,e,r,n,i,o,s){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=s}var Ht={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Ht[t]=new nr(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Ht[e]=new nr(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Ht[t]=new nr(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Ht[t]=new nr(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Ht[t]=new nr(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Ht[t]=new nr(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Ht[t]=new nr(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Ht[t]=new nr(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Ht[t]=new nr(t,5,!1,t.toLowerCase(),null,!1,!1)});var ld=/[\-:]([a-z])/g;function ud(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(ld,ud);Ht[e]=new nr(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(ld,ud);Ht[e]=new nr(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(ld,ud);Ht[e]=new nr(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Ht[t]=new nr(t,1,!1,t.toLowerCase(),null,!1,!1)});Ht.xlinkHref=new nr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Ht[t]=new nr(t,1,!1,t.toLowerCase(),null,!0,!0)});function cd(t,e,r,n){var i=Ht.hasOwnProperty(e)?Ht[e]:null,o=i!==null?i.type===0:n?!1:!(!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N");o||(qO(e,r,i,n)&&(r=null),n||i===null?VO(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):i.mustUseProperty?t[i.propertyName]=r===null?i.type===3?!1:"":r:(e=i.attributeName,n=i.attributeNamespace,r===null?t.removeAttribute(e):(i=i.type,r=i===3||i===4&&r===!0?"":""+r,n?t.setAttributeNS(n,e,r):t.setAttribute(e,r))))}var Wi=Nu.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ta=60103,Fi=60106,Vn=60107,fd=60108,sa=60114,hd=60109,dd=60110,Iu=60112,aa=60113,ou=60120,Au=60115,pd=60116,gd=60121,yd=60128,d1=60129,md=60130,bh=60131;typeof Symbol=="function"&&Symbol.for&&(Rt=Symbol.for,ta=Rt("react.element"),Fi=Rt("react.portal"),Vn=Rt("react.fragment"),fd=Rt("react.strict_mode"),sa=Rt("react.profiler"),hd=Rt("react.provider"),dd=Rt("react.context"),Iu=Rt("react.forward_ref"),aa=Rt("react.suspense"),ou=Rt("react.suspense_list"),Au=Rt("react.memo"),pd=Rt("react.lazy"),gd=Rt("react.block"),Rt("react.scope"),yd=Rt("react.opaque.id"),d1=Rt("react.debug_trace_mode"),md=Rt("react.offscreen"),bh=Rt("react.legacy_hidden"));var Rt,nm=typeof Symbol=="function"&&Symbol.iterator;function Ws(t){return t===null||typeof t!="object"?null:(t=nm&&t[nm]||t["@@iterator"],typeof t=="function"?t:null)}var eh;function ra(t){if(eh===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);eh=e&&e[1]||""}return`
`+eh+t}var th=!1;function Pl(t,e){if(!t||th)return"";th=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(l){var n=l}Reflect.construct(t,[],e)}else{try{e.call()}catch(l){n=l}t.call(e.prototype)}else{try{throw Error()}catch(l){n=l}t()}}catch(l){if(l&&n&&typeof l.stack=="string"){for(var i=l.stack.split(`
`),o=n.stack.split(`
`),s=i.length-1,a=o.length-1;1<=s&&0<=a&&i[s]!==o[a];)a--;for(;1<=s&&0<=a;s--,a--)if(i[s]!==o[a]){if(s!==1||a!==1)do if(s--,a--,0>a||i[s]!==o[a])return`
`+i[s].replace(" at new "," at ");while(1<=s&&0<=a);break}}}finally{th=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?ra(t):""}function $O(t){switch(t.tag){case 5:return ra(t.type);case 16:return ra("Lazy");case 13:return ra("Suspense");case 19:return ra("SuspenseList");case 0:case 2:case 15:return t=Pl(t.type,!1),t;case 11:return t=Pl(t.type.render,!1),t;case 22:return t=Pl(t.type._render,!1),t;case 1:return t=Pl(t.type,!0),t;default:return""}}function jo(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Vn:return"Fragment";case Fi:return"Portal";case sa:return"Profiler";case fd:return"StrictMode";case aa:return"Suspense";case ou:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case dd:return(t.displayName||"Context")+".Consumer";case hd:return(t._context.displayName||"Context")+".Provider";case Iu:var e=t.render;return e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case Au:return jo(t.type);case gd:return jo(t._render);case pd:e=t._payload,t=t._init;try{return jo(t(e))}catch{}}return null}function ei(t){switch(typeof t){case"boolean":case"number":case"object":case"string":case"undefined":return t;default:return""}}function p1(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function HO(t){var e=p1(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var i=r.get,o=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(s){n=""+s,o.call(this,s)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(s){n=""+s},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Ml(t){t._valueTracker||(t._valueTracker=HO(t))}function g1(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=p1(t)?t.checked?"true":"false":t.value),t=n,t!==r?(e.setValue(t),!0):!1}function su(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Eh(t,e){var r=e.checked;return lt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function im(t,e){var r=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;r=ei(e.value!=null?e.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function y1(t,e){e=e.checked,e!=null&&cd(t,"checked",e,!1)}function Oh(t,e){y1(t,e);var r=ei(e.value),n=e.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?xh(t,e.type,r):e.hasOwnProperty("defaultValue")&&xh(t,e.type,ei(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function om(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function xh(t,e,r){(e!=="number"||su(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}function JO(t){var e="";return Nu.Children.forEach(t,function(r){r!=null&&(e+=r)}),e}function Th(t,e){return t=lt({children:void 0},e),(e=JO(e.children))&&(t.children=e),t}function Uo(t,e,r,n){if(t=t.options,e){e={};for(var i=0;i<r.length;i++)e["$"+r[i]]=!0;for(r=0;r<t.length;r++)i=e.hasOwnProperty("$"+t[r].value),t[r].selected!==i&&(t[r].selected=i),i&&n&&(t[r].defaultSelected=!0)}else{for(r=""+ei(r),e=null,i=0;i<t.length;i++){if(t[i].value===r){t[i].selected=!0,n&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function kh(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(me(91));return lt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function sm(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(me(92));if(Array.isArray(r)){if(!(1>=r.length))throw Error(me(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:ei(r)}}function m1(t,e){var r=ei(e.value),n=ei(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function am(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}var Nh={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function v1(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ih(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?v1(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var jl,w1=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,n,i){MSApp.execUnsafeLocalFunction(function(){return t(e,r,n,i)})}:t}(function(t,e){if(t.namespaceURI!==Nh.svg||"innerHTML"in t)t.innerHTML=e;else{for(jl=jl||document.createElement("div"),jl.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=jl.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function wa(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var la={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},GO=["Webkit","ms","Moz","O"];Object.keys(la).forEach(function(t){GO.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),la[e]=la[t]})});function _1(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||la.hasOwnProperty(t)&&la[t]?(""+e).trim():e+"px"}function S1(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var n=r.indexOf("--")===0,i=_1(r,e[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,i):t[r]=i}}var YO=lt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ah(t,e){if(e){if(YO[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(me(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(me(60));if(!(typeof e.dangerouslySetInnerHTML=="object"&&"__html"in e.dangerouslySetInnerHTML))throw Error(me(61))}if(e.style!=null&&typeof e.style!="object")throw Error(me(62))}}function Rh(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function vd(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Dh=null,Bo=null,zo=null;function lm(t){if(t=Fa(t)){if(typeof Dh!="function")throw Error(me(280));var e=t.stateNode;e&&(e=Pu(e),Dh(t.stateNode,t.type,e))}}function b1(t){Bo?zo?zo.push(t):zo=[t]:Bo=t}function E1(){if(Bo){var t=Bo,e=zo;if(zo=Bo=null,lm(t),e)for(t=0;t<e.length;t++)lm(e[t])}}function wd(t,e){return t(e)}function O1(t,e,r,n,i){return t(e,r,n,i)}function _d(){}var x1=wd,Ci=!1,rh=!1;function Sd(){(Bo!==null||zo!==null)&&(_d(),E1())}function KO(t,e,r){if(rh)return t(e,r);rh=!0;try{return x1(t,e,r)}finally{rh=!1,Sd()}}function _a(t,e){var r=t.stateNode;if(r===null)return null;var n=Pu(r);if(n===null)return null;r=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(me(231,e,typeof r));return r}var Fh=!1;if(Cn)try{No={},Object.defineProperty(No,"passive",{get:function(){Fh=!0}}),window.addEventListener("test",No,No),window.removeEventListener("test",No,No)}catch{Fh=!1}var No;function ZO(t,e,r,n,i,o,s,a,l){var h=Array.prototype.slice.call(arguments,3);try{e.apply(r,h)}catch(g){this.onError(g)}}var ua=!1,au=null,lu=!1,Ch=null,XO={onError:function(t){ua=!0,au=t}};function QO(t,e,r,n,i,o,s,a,l){ua=!1,au=null,ZO.apply(XO,arguments)}function e4(t,e,r,n,i,o,s,a,l){if(QO.apply(this,arguments),ua){if(ua){var h=au;ua=!1,au=null}else throw Error(me(198));lu||(lu=!0,Ch=h)}}function qi(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,(e.flags&1026)!==0&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function T1(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function um(t){if(qi(t)!==t)throw Error(me(188))}function t4(t){var e=t.alternate;if(!e){if(e=qi(t),e===null)throw Error(me(188));return e!==t?null:t}for(var r=t,n=e;;){var i=r.return;if(i===null)break;var o=i.alternate;if(o===null){if(n=i.return,n!==null){r=n;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===r)return um(i),t;if(o===n)return um(i),e;o=o.sibling}throw Error(me(188))}if(r.return!==n.return)r=i,n=o;else{for(var s=!1,a=i.child;a;){if(a===r){s=!0,r=i,n=o;break}if(a===n){s=!0,n=i,r=o;break}a=a.sibling}if(!s){for(a=o.child;a;){if(a===r){s=!0,r=o,n=i;break}if(a===n){s=!0,n=o,r=i;break}a=a.sibling}if(!s)throw Error(me(189))}}if(r.alternate!==n)throw Error(me(190))}if(r.tag!==3)throw Error(me(188));return r.stateNode.current===r?t:e}function k1(t){if(t=t4(t),!t)return null;for(var e=t;;){if(e.tag===5||e.tag===6)return e;if(e.child)e.child.return=e,e=e.child;else{if(e===t)break;for(;!e.sibling;){if(!e.return||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}}return null}function cm(t,e){for(var r=t.alternate;e!==null;){if(e===t||e===r)return!0;e=e.return}return!1}var N1,bd,I1,A1,Lh=!1,gn=[],Hn=null,Jn=null,Gn=null,Sa=new Map,ba=new Map,qs=[],fm="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ph(t,e,r,n,i){return{blockedOn:t,domEventName:e,eventSystemFlags:r|16,nativeEvent:i,targetContainers:[n]}}function hm(t,e){switch(t){case"focusin":case"focusout":Hn=null;break;case"dragenter":case"dragleave":Jn=null;break;case"mouseover":case"mouseout":Gn=null;break;case"pointerover":case"pointerout":Sa.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ba.delete(e.pointerId)}}function $s(t,e,r,n,i,o){return t===null||t.nativeEvent!==o?(t=Ph(e,r,n,i,o),e!==null&&(e=Fa(e),e!==null&&bd(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function r4(t,e,r,n,i){switch(e){case"focusin":return Hn=$s(Hn,t,e,r,n,i),!0;case"dragenter":return Jn=$s(Jn,t,e,r,n,i),!0;case"mouseover":return Gn=$s(Gn,t,e,r,n,i),!0;case"pointerover":var o=i.pointerId;return Sa.set(o,$s(Sa.get(o)||null,t,e,r,n,i)),!0;case"gotpointercapture":return o=i.pointerId,ba.set(o,$s(ba.get(o)||null,t,e,r,n,i)),!0}return!1}function n4(t){var e=Li(t.target);if(e!==null){var r=qi(e);if(r!==null){if(e=r.tag,e===13){if(e=T1(r),e!==null){t.blockedOn=e,A1(t.lanePriority,function(){Ct.unstable_runWithPriority(t.priority,function(){I1(r)})});return}}else if(e===3&&r.stateNode.hydrate){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Yl(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=Td(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r!==null)return e=Fa(r),e!==null&&bd(e),t.blockedOn=r,!1;e.shift()}return!0}function dm(t,e,r){Yl(t)&&r.delete(e)}function i4(){for(Lh=!1;0<gn.length;){var t=gn[0];if(t.blockedOn!==null){t=Fa(t.blockedOn),t!==null&&N1(t);break}for(var e=t.targetContainers;0<e.length;){var r=Td(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r!==null){t.blockedOn=r;break}e.shift()}t.blockedOn===null&&gn.shift()}Hn!==null&&Yl(Hn)&&(Hn=null),Jn!==null&&Yl(Jn)&&(Jn=null),Gn!==null&&Yl(Gn)&&(Gn=null),Sa.forEach(dm),ba.forEach(dm)}function Hs(t,e){t.blockedOn===e&&(t.blockedOn=null,Lh||(Lh=!0,Ct.unstable_scheduleCallback(Ct.unstable_NormalPriority,i4)))}function R1(t){function e(i){return Hs(i,t)}if(0<gn.length){Hs(gn[0],t);for(var r=1;r<gn.length;r++){var n=gn[r];n.blockedOn===t&&(n.blockedOn=null)}}for(Hn!==null&&Hs(Hn,t),Jn!==null&&Hs(Jn,t),Gn!==null&&Hs(Gn,t),Sa.forEach(e),ba.forEach(e),r=0;r<qs.length;r++)n=qs[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<qs.length&&(r=qs[0],r.blockedOn===null);)n4(r),r.blockedOn===null&&qs.shift()}function Ul(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var Do={animationend:Ul("Animation","AnimationEnd"),animationiteration:Ul("Animation","AnimationIteration"),animationstart:Ul("Animation","AnimationStart"),transitionend:Ul("Transition","TransitionEnd")},nh={},D1={};Cn&&(D1=document.createElement("div").style,"AnimationEvent"in window||(delete Do.animationend.animation,delete Do.animationiteration.animation,delete Do.animationstart.animation),"TransitionEvent"in window||delete Do.transitionend.transition);function Ru(t){if(nh[t])return nh[t];if(!Do[t])return t;var e=Do[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in D1)return nh[t]=e[r];return t}var F1=Ru("animationend"),C1=Ru("animationiteration"),L1=Ru("animationstart"),P1=Ru("transitionend"),M1=new Map,Ed=new Map,o4=["abort","abort",F1,"animationEnd",C1,"animationIteration",L1,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",P1,"transitionEnd","waiting","waiting"];function Od(t,e){for(var r=0;r<t.length;r+=2){var n=t[r],i=t[r+1];i="on"+(i[0].toUpperCase()+i.slice(1)),Ed.set(n,e),M1.set(n,i),Vi(i,[n])}}var s4=Ct.unstable_now;s4();var Qe=8;function Ao(t){if((1&t)!==0)return Qe=15,1;if((2&t)!==0)return Qe=14,2;if((4&t)!==0)return Qe=13,4;var e=24&t;return e!==0?(Qe=12,e):(t&32)!==0?(Qe=11,32):(e=192&t,e!==0?(Qe=10,e):(t&256)!==0?(Qe=9,256):(e=3584&t,e!==0?(Qe=8,e):(t&4096)!==0?(Qe=7,4096):(e=4186112&t,e!==0?(Qe=6,e):(e=62914560&t,e!==0?(Qe=5,e):t&67108864?(Qe=4,67108864):(t&134217728)!==0?(Qe=3,134217728):(e=805306368&t,e!==0?(Qe=2,e):(1073741824&t)!==0?(Qe=1,1073741824):(Qe=8,t))))))}function a4(t){switch(t){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}function l4(t){switch(t){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(me(358,t))}}function Ea(t,e){var r=t.pendingLanes;if(r===0)return Qe=0;var n=0,i=0,o=t.expiredLanes,s=t.suspendedLanes,a=t.pingedLanes;if(o!==0)n=o,i=Qe=15;else if(o=r&134217727,o!==0){var l=o&~s;l!==0?(n=Ao(l),i=Qe):(a&=o,a!==0&&(n=Ao(a),i=Qe))}else o=r&~s,o!==0?(n=Ao(o),i=Qe):a!==0&&(n=Ao(a),i=Qe);if(n===0)return 0;if(n=31-ti(n),n=r&((0>n?0:1<<n)<<1)-1,e!==0&&e!==n&&(e&s)===0){if(Ao(e),i<=Qe)return e;Qe=i}if(e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)r=31-ti(e),i=1<<r,n|=t[r],e&=~i;return n}function j1(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function uu(t,e){switch(t){case 15:return 1;case 14:return 2;case 12:return t=Ro(24&~e),t===0?uu(10,e):t;case 10:return t=Ro(192&~e),t===0?uu(8,e):t;case 8:return t=Ro(3584&~e),t===0&&(t=Ro(4186112&~e),t===0&&(t=512)),t;case 2:return e=Ro(805306368&~e),e===0&&(e=268435456),e}throw Error(me(358,t))}function Ro(t){return t&-t}function ih(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function Du(t,e,r){t.pendingLanes|=e;var n=e-1;t.suspendedLanes&=n,t.pingedLanes&=n,t=t.eventTimes,e=31-ti(e),t[e]=r}var ti=Math.clz32?Math.clz32:f4,u4=Math.log,c4=Math.LN2;function f4(t){return t===0?32:31-(u4(t)/c4|0)|0}var h4=Ct.unstable_UserBlockingPriority,d4=Ct.unstable_runWithPriority,Kl=!0;function p4(t,e,r,n){Ci||_d();var i=xd,o=Ci;Ci=!0;try{O1(i,t,e,r,n)}finally{(Ci=o)||Sd()}}function g4(t,e,r,n){d4(h4,xd.bind(null,t,e,r,n))}function xd(t,e,r,n){if(Kl){var i;if((i=(e&4)===0)&&0<gn.length&&-1<fm.indexOf(t))t=Ph(null,t,e,r,n),gn.push(t);else{var o=Td(t,e,r,n);if(o===null)i&&hm(t,n);else{if(i){if(-1<fm.indexOf(t)){t=Ph(o,t,e,r,n),gn.push(t);return}if(r4(o,t,e,r,n))return;hm(t,n)}Z1(t,e,n,null,r)}}}}function Td(t,e,r,n){var i=vd(n);if(i=Li(i),i!==null){var o=qi(i);if(o===null)i=null;else{var s=o.tag;if(s===13){if(i=T1(o),i!==null)return i;i=null}else if(s===3){if(o.stateNode.hydrate)return o.tag===3?o.stateNode.containerInfo:null;i=null}else o!==i&&(i=null)}}return Z1(t,e,n,i,r),null}var Wn=null,kd=null,Zl=null;function U1(){if(Zl)return Zl;var t,e=kd,r=e.length,n,i="value"in Wn?Wn.value:Wn.textContent,o=i.length;for(t=0;t<r&&e[t]===i[t];t++);var s=r-t;for(n=1;n<=s&&e[r-n]===i[o-n];n++);return Zl=i.slice(t,1<n?1-n:void 0)}function Xl(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Bl(){return!0}function pm(){return!1}function Nr(t){function e(r,n,i,o,s){this._reactName=r,this._targetInst=i,this.type=n,this.nativeEvent=o,this.target=s,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(r=t[a],this[a]=r?r(o):o[a]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?Bl:pm,this.isPropagationStopped=pm,this}return lt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Bl)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Bl)},persist:function(){},isPersistent:Bl}),e}var Xo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Nd=Nr(Xo),Da=lt({},Xo,{view:0,detail:0}),y4=Nr(Da),oh,sh,Js,Fu=lt({},Da,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Id,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Js&&(Js&&t.type==="mousemove"?(oh=t.screenX-Js.screenX,sh=t.screenY-Js.screenY):sh=oh=0,Js=t),oh)},movementY:function(t){return"movementY"in t?t.movementY:sh}}),gm=Nr(Fu),m4=lt({},Fu,{dataTransfer:0}),v4=Nr(m4),w4=lt({},Da,{relatedTarget:0}),ah=Nr(w4),_4=lt({},Xo,{animationName:0,elapsedTime:0,pseudoElement:0}),S4=Nr(_4),b4=lt({},Xo,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),E4=Nr(b4),O4=lt({},Xo,{data:0}),ym=Nr(O4),x4={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},T4={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},k4={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function N4(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=k4[t])?!!e[t]:!1}function Id(){return N4}var I4=lt({},Da,{key:function(t){if(t.key){var e=x4[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Xl(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?T4[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Id,charCode:function(t){return t.type==="keypress"?Xl(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Xl(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),A4=Nr(I4),R4=lt({},Fu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),mm=Nr(R4),D4=lt({},Da,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Id}),F4=Nr(D4),C4=lt({},Xo,{propertyName:0,elapsedTime:0,pseudoElement:0}),L4=Nr(C4),P4=lt({},Fu,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),M4=Nr(P4),j4=[9,13,27,32],Ad=Cn&&"CompositionEvent"in window,ca=null;Cn&&"documentMode"in document&&(ca=document.documentMode);var U4=Cn&&"TextEvent"in window&&!ca,B1=Cn&&(!Ad||ca&&8<ca&&11>=ca),vm=String.fromCharCode(32),wm=!1;function z1(t,e){switch(t){case"keyup":return j4.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function V1(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Fo=!1;function B4(t,e){switch(t){case"compositionend":return V1(e);case"keypress":return e.which!==32?null:(wm=!0,vm);case"textInput":return t=e.data,t===vm&&wm?null:t;default:return null}}function z4(t,e){if(Fo)return t==="compositionend"||!Ad&&z1(t,e)?(t=U1(),Zl=kd=Wn=null,Fo=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return B1&&e.locale!=="ko"?null:e.data;default:return null}}var V4={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function _m(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!V4[t.type]:e==="textarea"}function W1(t,e,r,n){b1(n),e=cu(e,"onChange"),0<e.length&&(r=new Nd("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var fa=null,Oa=null;function W4(t){G1(t,0)}function Cu(t){var e=Lo(t);if(g1(e))return t}function q4(t,e){if(t==="change")return e}var q1=!1;Cn&&(Cn?(Vl="oninput"in document,Vl||(lh=document.createElement("div"),lh.setAttribute("oninput","return;"),Vl=typeof lh.oninput=="function"),zl=Vl):zl=!1,q1=zl&&(!document.documentMode||9<document.documentMode));var zl,Vl,lh;function Sm(){fa&&(fa.detachEvent("onpropertychange",$1),Oa=fa=null)}function $1(t){if(t.propertyName==="value"&&Cu(Oa)){var e=[];if(W1(e,Oa,t,vd(t)),t=W4,Ci)t(e);else{Ci=!0;try{wd(t,e)}finally{Ci=!1,Sd()}}}}function $4(t,e,r){t==="focusin"?(Sm(),fa=e,Oa=r,fa.attachEvent("onpropertychange",$1)):t==="focusout"&&Sm()}function H4(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Cu(Oa)}function J4(t,e){if(t==="click")return Cu(e)}function G4(t,e){if(t==="input"||t==="change")return Cu(e)}function Y4(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var jr=typeof Object.is=="function"?Object.is:Y4,K4=Object.prototype.hasOwnProperty;function xa(t,e){if(jr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++)if(!K4.call(e,r[n])||!jr(t[r[n]],e[r[n]]))return!1;return!0}function bm(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Em(t,e){var r=bm(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=bm(r)}}function H1(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?H1(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Om(){for(var t=window,e=su();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=su(t.document)}return e}function Mh(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}var Z4=Cn&&"documentMode"in document&&11>=document.documentMode,Co=null,jh=null,ha=null,Uh=!1;function xm(t,e,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Uh||Co==null||Co!==su(n)||(n=Co,"selectionStart"in n&&Mh(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),ha&&xa(ha,n)||(ha=n,n=cu(jh,"onSelect"),0<n.length&&(e=new Nd("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=Co)))}Od("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0);Od("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1);Od(o4,2);for(uh="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),Wl=0;Wl<uh.length;Wl++)Ed.set(uh[Wl],0);var uh,Wl;Go("onMouseEnter",["mouseout","mouseover"]);Go("onMouseLeave",["mouseout","mouseover"]);Go("onPointerEnter",["pointerout","pointerover"]);Go("onPointerLeave",["pointerout","pointerover"]);Vi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Vi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Vi("onBeforeInput",["compositionend","keypress","textInput","paste"]);Vi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Vi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Vi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var na="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),J1=new Set("cancel close invalid load scroll toggle".split(" ").concat(na));function Tm(t,e,r){var n=t.type||"unknown-event";t.currentTarget=r,e4(n,e,void 0,t),t.currentTarget=null}function G1(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],i=n.event;n=n.listeners;e:{var o=void 0;if(e)for(var s=n.length-1;0<=s;s--){var a=n[s],l=a.instance,h=a.currentTarget;if(a=a.listener,l!==o&&i.isPropagationStopped())break e;Tm(i,a,h),o=l}else for(s=0;s<n.length;s++){if(a=n[s],l=a.instance,h=a.currentTarget,a=a.listener,l!==o&&i.isPropagationStopped())break e;Tm(i,a,h),o=l}}}if(lu)throw t=Ch,lu=!1,Ch=null,t}function nt(t,e){var r=Q1(e),n=t+"__bubble";r.has(n)||(K1(e,t,2,!1),r.add(n))}var km="_reactListening"+Math.random().toString(36).slice(2);function Y1(t){t[km]||(t[km]=!0,h1.forEach(function(e){J1.has(e)||Nm(e,!1,t,null),Nm(e,!0,t,null)}))}function Nm(t,e,r,n){var i=4<arguments.length&&arguments[4]!==void 0?arguments[4]:0,o=r;if(t==="selectionchange"&&r.nodeType!==9&&(o=r.ownerDocument),n!==null&&!e&&J1.has(t)){if(t!=="scroll")return;i|=2,o=n}var s=Q1(o),a=t+"__"+(e?"capture":"bubble");s.has(a)||(e&&(i|=4),K1(o,t,i,e),s.add(a))}function K1(t,e,r,n){var i=Ed.get(e);switch(i===void 0?2:i){case 0:i=p4;break;case 1:i=g4;break;default:i=xd}r=i.bind(null,e,r,t),i=void 0,!Fh||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),n?i!==void 0?t.addEventListener(e,r,{capture:!0,passive:i}):t.addEventListener(e,r,!0):i!==void 0?t.addEventListener(e,r,{passive:i}):t.addEventListener(e,r,!1)}function Z1(t,e,r,n,i){var o=n;if((e&1)===0&&(e&2)===0&&n!==null)e:for(;;){if(n===null)return;var s=n.tag;if(s===3||s===4){var a=n.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(s===4)for(s=n.return;s!==null;){var l=s.tag;if((l===3||l===4)&&(l=s.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;s=s.return}for(;a!==null;){if(s=Li(a),s===null)return;if(l=s.tag,l===5||l===6){n=o=s;continue e}a=a.parentNode}}n=n.return}KO(function(){var h=o,g=vd(r),m=[];e:{var p=M1.get(t);if(p!==void 0){var w=Nd,b=t;switch(t){case"keypress":if(Xl(r)===0)break e;case"keydown":case"keyup":w=A4;break;case"focusin":b="focus",w=ah;break;case"focusout":b="blur",w=ah;break;case"beforeblur":case"afterblur":w=ah;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":w=gm;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":w=v4;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":w=F4;break;case F1:case C1:case L1:w=S4;break;case P1:w=L4;break;case"scroll":w=y4;break;case"wheel":w=M4;break;case"copy":case"cut":case"paste":w=E4;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":w=mm}var N=(e&4)!==0,O=!N&&t==="scroll",I=N?p!==null?p+"Capture":null:p;N=[];for(var D=h,G;D!==null;){G=D;var q=G.stateNode;if(G.tag===5&&q!==null&&(G=q,I!==null&&(q=_a(D,I),q!=null&&N.push(Ta(D,q,G)))),O)break;D=D.return}0<N.length&&(p=new w(p,b,null,r,g),m.push({event:p,listeners:N}))}}if((e&7)===0){e:{if(p=t==="mouseover"||t==="pointerover",w=t==="mouseout"||t==="pointerout",p&&(e&16)===0&&(b=r.relatedTarget||r.fromElement)&&(Li(b)||b[Qo]))break e;if((w||p)&&(p=g.window===g?g:(p=g.ownerDocument)?p.defaultView||p.parentWindow:window,w?(b=r.relatedTarget||r.toElement,w=h,b=b?Li(b):null,b!==null&&(O=qi(b),b!==O||b.tag!==5&&b.tag!==6)&&(b=null)):(w=null,b=h),w!==b)){if(N=gm,q="onMouseLeave",I="onMouseEnter",D="mouse",(t==="pointerout"||t==="pointerover")&&(N=mm,q="onPointerLeave",I="onPointerEnter",D="pointer"),O=w==null?p:Lo(w),G=b==null?p:Lo(b),p=new N(q,D+"leave",w,r,g),p.target=O,p.relatedTarget=G,q=null,Li(g)===h&&(N=new N(I,D+"enter",b,r,g),N.target=G,N.relatedTarget=O,q=N),O=q,w&&b)t:{for(N=w,I=b,D=0,G=N;G;G=Io(G))D++;for(G=0,q=I;q;q=Io(q))G++;for(;0<D-G;)N=Io(N),D--;for(;0<G-D;)I=Io(I),G--;for(;D--;){if(N===I||I!==null&&N===I.alternate)break t;N=Io(N),I=Io(I)}N=null}else N=null;w!==null&&Im(m,p,w,N,!1),b!==null&&O!==null&&Im(m,O,b,N,!0)}}e:{if(p=h?Lo(h):window,w=p.nodeName&&p.nodeName.toLowerCase(),w==="select"||w==="input"&&p.type==="file")var J=q4;else if(_m(p))if(q1)J=G4;else{J=H4;var C=$4}else(w=p.nodeName)&&w.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(J=J4);if(J&&(J=J(t,h))){W1(m,J,r,g);break e}C&&C(t,p,h),t==="focusout"&&(C=p._wrapperState)&&C.controlled&&p.type==="number"&&xh(p,"number",p.value)}switch(C=h?Lo(h):window,t){case"focusin":(_m(C)||C.contentEditable==="true")&&(Co=C,jh=h,ha=null);break;case"focusout":ha=jh=Co=null;break;case"mousedown":Uh=!0;break;case"contextmenu":case"mouseup":case"dragend":Uh=!1,xm(m,r,g);break;case"selectionchange":if(Z4)break;case"keydown":case"keyup":xm(m,r,g)}var z;if(Ad)e:{switch(t){case"compositionstart":var S="onCompositionStart";break e;case"compositionend":S="onCompositionEnd";break e;case"compositionupdate":S="onCompositionUpdate";break e}S=void 0}else Fo?z1(t,r)&&(S="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(S="onCompositionStart");S&&(B1&&r.locale!=="ko"&&(Fo||S!=="onCompositionStart"?S==="onCompositionEnd"&&Fo&&(z=U1()):(Wn=g,kd="value"in Wn?Wn.value:Wn.textContent,Fo=!0)),C=cu(h,S),0<C.length&&(S=new ym(S,t,null,r,g),m.push({event:S,listeners:C}),z?S.data=z:(z=V1(r),z!==null&&(S.data=z)))),(z=U4?B4(t,r):z4(t,r))&&(h=cu(h,"onBeforeInput"),0<h.length&&(g=new ym("onBeforeInput","beforeinput",null,r,g),m.push({event:g,listeners:h}),g.data=z))}G1(m,e)})}function Ta(t,e,r){return{instance:t,listener:e,currentTarget:r}}function cu(t,e){for(var r=e+"Capture",n=[];t!==null;){var i=t,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=_a(t,r),o!=null&&n.unshift(Ta(t,o,i)),o=_a(t,e),o!=null&&n.push(Ta(t,o,i))),t=t.return}return n}function Io(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Im(t,e,r,n,i){for(var o=e._reactName,s=[];r!==null&&r!==n;){var a=r,l=a.alternate,h=a.stateNode;if(l!==null&&l===n)break;a.tag===5&&h!==null&&(a=h,i?(l=_a(r,o),l!=null&&s.unshift(Ta(r,l,a))):i||(l=_a(r,o),l!=null&&s.push(Ta(r,l,a)))),r=r.return}s.length!==0&&t.push({event:e,listeners:s})}function fu(){}var ch=null,fh=null;function X1(t,e){switch(t){case"button":case"input":case"select":case"textarea":return!!e.autoFocus}return!1}function Bh(t,e){return t==="textarea"||t==="option"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Am=typeof setTimeout=="function"?setTimeout:void 0,X4=typeof clearTimeout=="function"?clearTimeout:void 0;function Rd(t){t.nodeType===1?t.textContent="":t.nodeType===9&&(t=t.body,t!=null&&(t.textContent=""))}function Vo(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break}return t}function Rm(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var hh=0;function Q4(t){return{$$typeof:yd,toString:t,valueOf:t}}var Lu=Math.random().toString(36).slice(2),qn="__reactFiber$"+Lu,hu="__reactProps$"+Lu,Qo="__reactContainer$"+Lu,Dm="__reactEvents$"+Lu;function Li(t){var e=t[qn];if(e)return e;for(var r=t.parentNode;r;){if(e=r[Qo]||r[qn]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=Rm(t);t!==null;){if(r=t[qn])return r;t=Rm(t)}return e}t=r,r=t.parentNode}return null}function Fa(t){return t=t[qn]||t[Qo],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Lo(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(me(33))}function Pu(t){return t[hu]||null}function Q1(t){var e=t[Dm];return e===void 0&&(e=t[Dm]=new Set),e}var zh=[],Po=-1;function oi(t){return{current:t}}function it(t){0>Po||(t.current=zh[Po],zh[Po]=null,Po--)}function yt(t,e){Po++,zh[Po]=t.current,t.current=e}var ri={},tr=oi(ri),dr=oi(!1),Ui=ri;function Yo(t,e){var r=t.type.contextTypes;if(!r)return ri;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in r)i[o]=e[o];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function pr(t){return t=t.childContextTypes,t!=null}function du(){it(dr),it(tr)}function Fm(t,e,r){if(tr.current!==ri)throw Error(me(168));yt(tr,e),yt(dr,r)}function tv(t,e,r){var n=t.stateNode;if(t=e.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var i in n)if(!(i in t))throw Error(me(108,jo(e)||"Unknown",i));return lt({},r,n)}function Ql(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ri,Ui=tr.current,yt(tr,t),yt(dr,dr.current),!0}function Cm(t,e,r){var n=t.stateNode;if(!n)throw Error(me(169));r?(t=tv(t,e,Ui),n.__reactInternalMemoizedMergedChildContext=t,it(dr),it(tr),yt(tr,t)):it(dr),yt(dr,r)}var Dd=null,ji=null,e3=Ct.unstable_runWithPriority,Fd=Ct.unstable_scheduleCallback,Vh=Ct.unstable_cancelCallback,t3=Ct.unstable_shouldYield,Lm=Ct.unstable_requestPaint,Wh=Ct.unstable_now,r3=Ct.unstable_getCurrentPriorityLevel,Mu=Ct.unstable_ImmediatePriority,rv=Ct.unstable_UserBlockingPriority,nv=Ct.unstable_NormalPriority,iv=Ct.unstable_LowPriority,ov=Ct.unstable_IdlePriority,dh={},n3=Lm!==void 0?Lm:function(){},In=null,eu=null,ph=!1,Pm=Wh(),Qt=1e4>Pm?Wh:function(){return Wh()-Pm};function Ko(){switch(r3()){case Mu:return 99;case rv:return 98;case nv:return 97;case iv:return 96;case ov:return 95;default:throw Error(me(332))}}function sv(t){switch(t){case 99:return Mu;case 98:return rv;case 97:return nv;case 96:return iv;case 95:return ov;default:throw Error(me(332))}}function Bi(t,e){return t=sv(t),e3(t,e)}function ka(t,e,r){return t=sv(t),Fd(t,e,r)}function _n(){if(eu!==null){var t=eu;eu=null,Vh(t)}av()}function av(){if(!ph&&In!==null){ph=!0;var t=0;try{var e=In;Bi(99,function(){for(;t<e.length;t++){var r=e[t];do r=r(!0);while(r!==null)}}),In=null}catch(r){throw In!==null&&(In=In.slice(t+1)),Fd(Mu,_n),r}finally{ph=!1}}}var i3=Wi.ReactCurrentBatchConfig;function Zr(t,e){if(t&&t.defaultProps){e=lt({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}var pu=oi(null),gu=null,Mo=null,yu=null;function Cd(){yu=Mo=gu=null}function Ld(t){var e=pu.current;it(pu),t.type._context._currentValue=e}function lv(t,e){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)===e){if(r===null||(r.childLanes&e)===e)break;r.childLanes|=e}else t.childLanes|=e,r!==null&&(r.childLanes|=e);t=t.return}}function Wo(t,e){gu=t,yu=Mo=null,t=t.dependencies,t!==null&&t.firstContext!==null&&((t.lanes&e)!==0&&(Xr=!0),t.firstContext=null)}function zr(t,e){if(yu!==t&&e!==!1&&e!==0)if((typeof e!="number"||e===1073741823)&&(yu=t,e=1073741823),e={context:t,observedBits:e,next:null},Mo===null){if(gu===null)throw Error(me(308));Mo=e,gu.dependencies={lanes:0,firstContext:e,responders:null}}else Mo=Mo.next=e;return t._currentValue}var zn=!1;function Pd(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function uv(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Yn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Kn(t,e){if(t=t.updateQueue,t!==null){t=t.shared;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}}function Mm(t,e){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var i=null,o=null;if(r=r.firstBaseUpdate,r!==null){do{var s={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};o===null?i=o=s:o=o.next=s,r=r.next}while(r!==null);o===null?i=o=e:o=o.next=e}else i=o=e;r={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function Na(t,e,r,n){var i=t.updateQueue;zn=!1;var o=i.firstBaseUpdate,s=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,h=l.next;l.next=null,s===null?o=h:s.next=h,s=l;var g=t.alternate;if(g!==null){g=g.updateQueue;var m=g.lastBaseUpdate;m!==s&&(m===null?g.firstBaseUpdate=h:m.next=h,g.lastBaseUpdate=l)}}if(o!==null){m=i.baseState,s=0,g=h=l=null;do{a=o.lane;var p=o.eventTime;if((n&a)===a){g!==null&&(g=g.next={eventTime:p,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var w=t,b=o;switch(a=e,p=r,b.tag){case 1:if(w=b.payload,typeof w=="function"){m=w.call(p,m,a);break e}m=w;break e;case 3:w.flags=w.flags&-4097|64;case 0:if(w=b.payload,a=typeof w=="function"?w.call(p,m,a):w,a==null)break e;m=lt({},m,a);break e;case 2:zn=!0}}o.callback!==null&&(t.flags|=32,a=i.effects,a===null?i.effects=[o]:a.push(o))}else p={eventTime:p,lane:a,tag:o.tag,payload:o.payload,callback:o.callback,next:null},g===null?(h=g=p,l=m):g=g.next=p,s|=a;if(o=o.next,o===null){if(a=i.shared.pending,a===null)break;o=a.next,a.next=null,i.lastBaseUpdate=a,i.shared.pending=null}}while(1);g===null&&(l=m),i.baseState=l,i.firstBaseUpdate=h,i.lastBaseUpdate=g,La|=s,t.lanes=s,t.memoizedState=m}}function jm(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],i=n.callback;if(i!==null){if(n.callback=null,n=r,typeof i!="function")throw Error(me(191,i));i.call(n)}}}var cv=new Nu.Component().refs;function mu(t,e,r,n){e=t.memoizedState,r=r(n,e),r=r==null?e:lt({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var ju={isMounted:function(t){return(t=t._reactInternals)?qi(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var n=kr(),i=Zn(t),o=Yn(n,i);o.payload=e,r!=null&&(o.callback=r),Kn(t,o),Xn(t,i,n)},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=kr(),i=Zn(t),o=Yn(n,i);o.tag=1,o.payload=e,r!=null&&(o.callback=r),Kn(t,o),Xn(t,i,n)},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=kr(),n=Zn(t),i=Yn(r,n);i.tag=2,e!=null&&(i.callback=e),Kn(t,i),Xn(t,n,r)}};function Um(t,e,r,n,i,o,s){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,o,s):e.prototype&&e.prototype.isPureReactComponent?!xa(r,n)||!xa(i,o):!0}function fv(t,e,r){var n=!1,i=ri,o=e.contextType;return typeof o=="object"&&o!==null?o=zr(o):(i=pr(e)?Ui:tr.current,n=e.contextTypes,o=(n=n!=null)?Yo(t,i):ri),e=new e(r,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=ju,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=o),e}function Bm(t,e,r,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&ju.enqueueReplaceState(e,e.state,null)}function qh(t,e,r,n){var i=t.stateNode;i.props=r,i.state=t.memoizedState,i.refs=cv,Pd(t);var o=e.contextType;typeof o=="object"&&o!==null?i.context=zr(o):(o=pr(e)?Ui:tr.current,i.context=Yo(t,o)),Na(t,r,i,n),i.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(mu(t,e,o,r),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&ju.enqueueReplaceState(i,i.state,null),Na(t,r,i,n),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4)}var ql=Array.isArray;function Gs(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(me(309));var n=r.stateNode}if(!n)throw Error(me(147,t));var i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var s=n.refs;s===cv&&(s=n.refs={}),o===null?delete s[i]:s[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(me(284));if(!r._owner)throw Error(me(290,t))}return t}function $l(t,e){if(t.type!=="textarea")throw Error(me(31,Object.prototype.toString.call(e)==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":e))}function hv(t){function e(O,I){if(t){var D=O.lastEffect;D!==null?(D.nextEffect=I,O.lastEffect=I):O.firstEffect=O.lastEffect=I,I.nextEffect=null,I.flags=8}}function r(O,I){if(!t)return null;for(;I!==null;)e(O,I),I=I.sibling;return null}function n(O,I){for(O=new Map;I!==null;)I.key!==null?O.set(I.key,I):O.set(I.index,I),I=I.sibling;return O}function i(O,I){return O=ii(O,I),O.index=0,O.sibling=null,O}function o(O,I,D){return O.index=D,t?(D=O.alternate,D!==null?(D=D.index,D<I?(O.flags=2,I):D):(O.flags=2,I)):I}function s(O){return t&&O.alternate===null&&(O.flags=2),O}function a(O,I,D,G){return I===null||I.tag!==6?(I=wh(D,O.mode,G),I.return=O,I):(I=i(I,D),I.return=O,I)}function l(O,I,D,G){return I!==null&&I.elementType===D.type?(G=i(I,D.props),G.ref=Gs(O,I,D),G.return=O,G):(G=iu(D.type,D.key,D.props,null,O.mode,G),G.ref=Gs(O,I,D),G.return=O,G)}function h(O,I,D,G){return I===null||I.tag!==4||I.stateNode.containerInfo!==D.containerInfo||I.stateNode.implementation!==D.implementation?(I=_h(D,O.mode,G),I.return=O,I):(I=i(I,D.children||[]),I.return=O,I)}function g(O,I,D,G,q){return I===null||I.tag!==7?(I=Jo(D,O.mode,G,q),I.return=O,I):(I=i(I,D),I.return=O,I)}function m(O,I,D){if(typeof I=="string"||typeof I=="number")return I=wh(""+I,O.mode,D),I.return=O,I;if(typeof I=="object"&&I!==null){switch(I.$$typeof){case ta:return D=iu(I.type,I.key,I.props,null,O.mode,D),D.ref=Gs(O,null,I),D.return=O,D;case Fi:return I=_h(I,O.mode,D),I.return=O,I}if(ql(I)||Ws(I))return I=Jo(I,O.mode,D,null),I.return=O,I;$l(O,I)}return null}function p(O,I,D,G){var q=I!==null?I.key:null;if(typeof D=="string"||typeof D=="number")return q!==null?null:a(O,I,""+D,G);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case ta:return D.key===q?D.type===Vn?g(O,I,D.props.children,G,q):l(O,I,D,G):null;case Fi:return D.key===q?h(O,I,D,G):null}if(ql(D)||Ws(D))return q!==null?null:g(O,I,D,G,null);$l(O,D)}return null}function w(O,I,D,G,q){if(typeof G=="string"||typeof G=="number")return O=O.get(D)||null,a(I,O,""+G,q);if(typeof G=="object"&&G!==null){switch(G.$$typeof){case ta:return O=O.get(G.key===null?D:G.key)||null,G.type===Vn?g(I,O,G.props.children,q,G.key):l(I,O,G,q);case Fi:return O=O.get(G.key===null?D:G.key)||null,h(I,O,G,q)}if(ql(G)||Ws(G))return O=O.get(D)||null,g(I,O,G,q,null);$l(I,G)}return null}function b(O,I,D,G){for(var q=null,J=null,C=I,z=I=0,S=null;C!==null&&z<D.length;z++){C.index>z?(S=C,C=null):S=C.sibling;var W=p(O,C,D[z],G);if(W===null){C===null&&(C=S);break}t&&C&&W.alternate===null&&e(O,C),I=o(W,I,z),J===null?q=W:J.sibling=W,J=W,C=S}if(z===D.length)return r(O,C),q;if(C===null){for(;z<D.length;z++)C=m(O,D[z],G),C!==null&&(I=o(C,I,z),J===null?q=C:J.sibling=C,J=C);return q}for(C=n(O,C);z<D.length;z++)S=w(C,O,z,D[z],G),S!==null&&(t&&S.alternate!==null&&C.delete(S.key===null?z:S.key),I=o(S,I,z),J===null?q=S:J.sibling=S,J=S);return t&&C.forEach(function(te){return e(O,te)}),q}function N(O,I,D,G){var q=Ws(D);if(typeof q!="function")throw Error(me(150));if(D=q.call(D),D==null)throw Error(me(151));for(var J=q=null,C=I,z=I=0,S=null,W=D.next();C!==null&&!W.done;z++,W=D.next()){C.index>z?(S=C,C=null):S=C.sibling;var te=p(O,C,W.value,G);if(te===null){C===null&&(C=S);break}t&&C&&te.alternate===null&&e(O,C),I=o(te,I,z),J===null?q=te:J.sibling=te,J=te,C=S}if(W.done)return r(O,C),q;if(C===null){for(;!W.done;z++,W=D.next())W=m(O,W.value,G),W!==null&&(I=o(W,I,z),J===null?q=W:J.sibling=W,J=W);return q}for(C=n(O,C);!W.done;z++,W=D.next())W=w(C,O,z,W.value,G),W!==null&&(t&&W.alternate!==null&&C.delete(W.key===null?z:W.key),I=o(W,I,z),J===null?q=W:J.sibling=W,J=W);return t&&C.forEach(function(X){return e(O,X)}),q}return function(O,I,D,G){var q=typeof D=="object"&&D!==null&&D.type===Vn&&D.key===null;q&&(D=D.props.children);var J=typeof D=="object"&&D!==null;if(J)switch(D.$$typeof){case ta:e:{for(J=D.key,q=I;q!==null;){if(q.key===J){switch(q.tag){case 7:if(D.type===Vn){r(O,q.sibling),I=i(q,D.props.children),I.return=O,O=I;break e}break;default:if(q.elementType===D.type){r(O,q.sibling),I=i(q,D.props),I.ref=Gs(O,q,D),I.return=O,O=I;break e}}r(O,q);break}else e(O,q);q=q.sibling}D.type===Vn?(I=Jo(D.props.children,O.mode,G,D.key),I.return=O,O=I):(G=iu(D.type,D.key,D.props,null,O.mode,G),G.ref=Gs(O,I,D),G.return=O,O=G)}return s(O);case Fi:e:{for(q=D.key;I!==null;){if(I.key===q)if(I.tag===4&&I.stateNode.containerInfo===D.containerInfo&&I.stateNode.implementation===D.implementation){r(O,I.sibling),I=i(I,D.children||[]),I.return=O,O=I;break e}else{r(O,I);break}else e(O,I);I=I.sibling}I=_h(D,O.mode,G),I.return=O,O=I}return s(O)}if(typeof D=="string"||typeof D=="number")return D=""+D,I!==null&&I.tag===6?(r(O,I.sibling),I=i(I,D),I.return=O,O=I):(r(O,I),I=wh(D,O.mode,G),I.return=O,O=I),s(O);if(ql(D))return b(O,I,D,G);if(Ws(D))return N(O,I,D,G);if(J&&$l(O,D),typeof D>"u"&&!q)switch(O.tag){case 1:case 22:case 0:case 11:case 15:throw Error(me(152,jo(O.type)||"Component"))}return r(O,I)}}var vu=hv(!0),dv=hv(!1),Ca={},vn=oi(Ca),Ia=oi(Ca),Aa=oi(Ca);function Pi(t){if(t===Ca)throw Error(me(174));return t}function $h(t,e){switch(yt(Aa,e),yt(Ia,t),yt(vn,Ca),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Ih(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Ih(e,t)}it(vn),yt(vn,e)}function Zo(){it(vn),it(Ia),it(Aa)}function zm(t){Pi(Aa.current);var e=Pi(vn.current),r=Ih(e,t.type);e!==r&&(yt(Ia,t),yt(vn,r))}function Md(t){Ia.current===t&&(it(vn),it(Ia))}var gt=oi(0);function wu(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if((e.flags&64)!==0)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Rn=null,$n=null,wn=!1;function pv(t,e){var r=Ur(5,null,null,0);r.elementType="DELETED",r.type="DELETED",r.stateNode=e,r.return=t,r.flags=8,t.lastEffect!==null?(t.lastEffect.nextEffect=r,t.lastEffect=r):t.firstEffect=t.lastEffect=r}function Vm(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,!0):!1;case 13:return!1;default:return!1}}function Hh(t){if(wn){var e=$n;if(e){var r=e;if(!Vm(t,e)){if(e=Vo(r.nextSibling),!e||!Vm(t,e)){t.flags=t.flags&-1025|2,wn=!1,Rn=t;return}pv(Rn,r)}Rn=t,$n=Vo(e.firstChild)}else t.flags=t.flags&-1025|2,wn=!1,Rn=t}}function Wm(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Rn=t}function Hl(t){if(t!==Rn)return!1;if(!wn)return Wm(t),wn=!0,!1;var e=t.type;if(t.tag!==5||e!=="head"&&e!=="body"&&!Bh(e,t.memoizedProps))for(e=$n;e;)pv(t,e),e=Vo(e.nextSibling);if(Wm(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(me(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){$n=Vo(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}$n=null}}else $n=Rn?Vo(t.stateNode.nextSibling):null;return!0}function gh(){$n=Rn=null,wn=!1}var qo=[];function jd(){for(var t=0;t<qo.length;t++)qo[t]._workInProgressVersionPrimary=null;qo.length=0}var da=Wi.ReactCurrentDispatcher,Br=Wi.ReactCurrentBatchConfig,Ra=0,xt=null,Xt=null,qt=null,_u=!1,pa=!1;function fr(){throw Error(me(321))}function Ud(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!jr(t[r],e[r]))return!1;return!0}function Bd(t,e,r,n,i,o){if(Ra=o,xt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,da.current=t===null||t.memoizedState===null?s3:a3,t=r(n,i),pa){o=0;do{if(pa=!1,!(25>o))throw Error(me(301));o+=1,qt=Xt=null,e.updateQueue=null,da.current=l3,t=r(n,i)}while(pa)}if(da.current=Ou,e=Xt!==null&&Xt.next!==null,Ra=0,qt=Xt=xt=null,_u=!1,e)throw Error(me(300));return t}function Mi(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return qt===null?xt.memoizedState=qt=t:qt=qt.next=t,qt}function $i(){if(Xt===null){var t=xt.alternate;t=t!==null?t.memoizedState:null}else t=Xt.next;var e=qt===null?xt.memoizedState:qt.next;if(e!==null)qt=e,Xt=t;else{if(t===null)throw Error(me(310));Xt=t,t={memoizedState:Xt.memoizedState,baseState:Xt.baseState,baseQueue:Xt.baseQueue,queue:Xt.queue,next:null},qt===null?xt.memoizedState=qt=t:qt=qt.next=t}return qt}function yn(t,e){return typeof e=="function"?e(t):e}function Ys(t){var e=$i(),r=e.queue;if(r===null)throw Error(me(311));r.lastRenderedReducer=t;var n=Xt,i=n.baseQueue,o=r.pending;if(o!==null){if(i!==null){var s=i.next;i.next=o.next,o.next=s}n.baseQueue=i=o,r.pending=null}if(i!==null){i=i.next,n=n.baseState;var a=s=o=null,l=i;do{var h=l.lane;if((Ra&h)===h)a!==null&&(a=a.next={lane:0,action:l.action,eagerReducer:l.eagerReducer,eagerState:l.eagerState,next:null}),n=l.eagerReducer===t?l.eagerState:t(n,l.action);else{var g={lane:h,action:l.action,eagerReducer:l.eagerReducer,eagerState:l.eagerState,next:null};a===null?(s=a=g,o=n):a=a.next=g,xt.lanes|=h,La|=h}l=l.next}while(l!==null&&l!==i);a===null?o=n:a.next=s,jr(n,e.memoizedState)||(Xr=!0),e.memoizedState=n,e.baseState=o,e.baseQueue=a,r.lastRenderedState=n}return[e.memoizedState,r.dispatch]}function Ks(t){var e=$i(),r=e.queue;if(r===null)throw Error(me(311));r.lastRenderedReducer=t;var n=r.dispatch,i=r.pending,o=e.memoizedState;if(i!==null){r.pending=null;var s=i=i.next;do o=t(o,s.action),s=s.next;while(s!==i);jr(o,e.memoizedState)||(Xr=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),r.lastRenderedState=o}return[o,n]}function qm(t,e,r){var n=e._getVersion;n=n(e._source);var i=e._workInProgressVersionPrimary;if(i!==null?t=i===n:(t=t.mutableReadLanes,(t=(Ra&t)===t)&&(e._workInProgressVersionPrimary=n,qo.push(e))),t)return r(e._source);throw qo.push(e),Error(me(350))}function gv(t,e,r,n){var i=rr;if(i===null)throw Error(me(349));var o=e._getVersion,s=o(e._source),a=da.current,l=a.useState(function(){return qm(i,e,r)}),h=l[1],g=l[0];l=qt;var m=t.memoizedState,p=m.refs,w=p.getSnapshot,b=m.source;m=m.subscribe;var N=xt;return t.memoizedState={refs:p,source:e,subscribe:n},a.useEffect(function(){p.getSnapshot=r,p.setSnapshot=h;var O=o(e._source);if(!jr(s,O)){O=r(e._source),jr(g,O)||(h(O),O=Zn(N),i.mutableReadLanes|=O&i.pendingLanes),O=i.mutableReadLanes,i.entangledLanes|=O;for(var I=i.entanglements,D=O;0<D;){var G=31-ti(D),q=1<<G;I[G]|=O,D&=~q}}},[r,e,n]),a.useEffect(function(){return n(e._source,function(){var O=p.getSnapshot,I=p.setSnapshot;try{I(O(e._source));var D=Zn(N);i.mutableReadLanes|=D&i.pendingLanes}catch(G){I(function(){throw G})}})},[e,n]),jr(w,r)&&jr(b,e)&&jr(m,n)||(t={pending:null,dispatch:null,lastRenderedReducer:yn,lastRenderedState:g},t.dispatch=h=Wd.bind(null,xt,t),l.queue=t,l.baseQueue=null,g=qm(i,e,r),l.memoizedState=l.baseState=g),g}function yv(t,e,r){var n=$i();return gv(n,t,e,r)}function Zs(t){var e=Mi();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t=e.queue={pending:null,dispatch:null,lastRenderedReducer:yn,lastRenderedState:t},t=t.dispatch=Wd.bind(null,xt,t),[e.memoizedState,t]}function Su(t,e,r,n){return t={tag:t,create:e,destroy:r,deps:n,next:null},e=xt.updateQueue,e===null?(e={lastEffect:null},xt.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t)),t}function $m(t){var e=Mi();return t={current:t},e.memoizedState=t}function bu(){return $i().memoizedState}function Jh(t,e,r,n){var i=Mi();xt.flags|=t,i.memoizedState=Su(1|e,r,void 0,n===void 0?null:n)}function zd(t,e,r,n){var i=$i();n=n===void 0?null:n;var o=void 0;if(Xt!==null){var s=Xt.memoizedState;if(o=s.destroy,n!==null&&Ud(n,s.deps)){Su(e,r,o,n);return}}xt.flags|=t,i.memoizedState=Su(1|e,r,o,n)}function Hm(t,e){return Jh(516,4,t,e)}function Eu(t,e){return zd(516,4,t,e)}function mv(t,e){return zd(4,2,t,e)}function vv(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function wv(t,e,r){return r=r!=null?r.concat([t]):null,zd(4,2,vv.bind(null,e,t),r)}function Vd(){}function _v(t,e){var r=$i();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&Ud(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function Sv(t,e){var r=$i();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&Ud(e,n[1])?n[0]:(t=t(),r.memoizedState=[t,e],t)}function o3(t,e){var r=Ko();Bi(98>r?98:r,function(){t(!0)}),Bi(97<r?97:r,function(){var n=Br.transition;Br.transition=1;try{t(!1),e()}finally{Br.transition=n}})}function Wd(t,e,r){var n=kr(),i=Zn(t),o={lane:i,action:r,eagerReducer:null,eagerState:null,next:null},s=e.pending;if(s===null?o.next=o:(o.next=s.next,s.next=o),e.pending=o,s=t.alternate,t===xt||s!==null&&s===xt)pa=_u=!0;else{if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var a=e.lastRenderedState,l=s(a,r);if(o.eagerReducer=s,o.eagerState=l,jr(l,a))return}catch{}finally{}Xn(t,i,n)}}var Ou={readContext:zr,useCallback:fr,useContext:fr,useEffect:fr,useImperativeHandle:fr,useLayoutEffect:fr,useMemo:fr,useReducer:fr,useRef:fr,useState:fr,useDebugValue:fr,useDeferredValue:fr,useTransition:fr,useMutableSource:fr,useOpaqueIdentifier:fr,unstable_isNewReconciler:!1},s3={readContext:zr,useCallback:function(t,e){return Mi().memoizedState=[t,e===void 0?null:e],t},useContext:zr,useEffect:Hm,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,Jh(4,2,vv.bind(null,e,t),r)},useLayoutEffect:function(t,e){return Jh(4,2,t,e)},useMemo:function(t,e){var r=Mi();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var n=Mi();return e=r!==void 0?r(e):e,n.memoizedState=n.baseState=e,t=n.queue={pending:null,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},t=t.dispatch=Wd.bind(null,xt,t),[n.memoizedState,t]},useRef:$m,useState:Zs,useDebugValue:Vd,useDeferredValue:function(t){var e=Zs(t),r=e[0],n=e[1];return Hm(function(){var i=Br.transition;Br.transition=1;try{n(t)}finally{Br.transition=i}},[t]),r},useTransition:function(){var t=Zs(!1),e=t[0];return t=o3.bind(null,t[1]),$m(t),[t,e]},useMutableSource:function(t,e,r){var n=Mi();return n.memoizedState={refs:{getSnapshot:e,setSnapshot:null},source:t,subscribe:r},gv(n,t,e,r)},useOpaqueIdentifier:function(){if(wn){var t=!1,e=Q4(function(){throw t||(t=!0,r("r:"+(hh++).toString(36))),Error(me(355))}),r=Zs(e)[1];return(xt.mode&2)===0&&(xt.flags|=516,Su(5,function(){r("r:"+(hh++).toString(36))},void 0,null)),e}return e="r:"+(hh++).toString(36),Zs(e),e},unstable_isNewReconciler:!1},a3={readContext:zr,useCallback:_v,useContext:zr,useEffect:Eu,useImperativeHandle:wv,useLayoutEffect:mv,useMemo:Sv,useReducer:Ys,useRef:bu,useState:function(){return Ys(yn)},useDebugValue:Vd,useDeferredValue:function(t){var e=Ys(yn),r=e[0],n=e[1];return Eu(function(){var i=Br.transition;Br.transition=1;try{n(t)}finally{Br.transition=i}},[t]),r},useTransition:function(){var t=Ys(yn)[0];return[bu().current,t]},useMutableSource:yv,useOpaqueIdentifier:function(){return Ys(yn)[0]},unstable_isNewReconciler:!1},l3={readContext:zr,useCallback:_v,useContext:zr,useEffect:Eu,useImperativeHandle:wv,useLayoutEffect:mv,useMemo:Sv,useReducer:Ks,useRef:bu,useState:function(){return Ks(yn)},useDebugValue:Vd,useDeferredValue:function(t){var e=Ks(yn),r=e[0],n=e[1];return Eu(function(){var i=Br.transition;Br.transition=1;try{n(t)}finally{Br.transition=i}},[t]),r},useTransition:function(){var t=Ks(yn)[0];return[bu().current,t]},useMutableSource:yv,useOpaqueIdentifier:function(){return Ks(yn)[0]},unstable_isNewReconciler:!1},u3=Wi.ReactCurrentOwner,Xr=!1;function hr(t,e,r,n){e.child=t===null?dv(e,null,r,n):vu(e,t.child,r,n)}function Jm(t,e,r,n,i){r=r.render;var o=e.ref;return Wo(e,i),n=Bd(t,e,r,n,o,i),t!==null&&!Xr?(e.updateQueue=t.updateQueue,e.flags&=-517,t.lanes&=~i,Dn(t,e,i)):(e.flags|=1,hr(t,e,n,i),e.child)}function Gm(t,e,r,n,i,o){if(t===null){var s=r.type;return typeof s=="function"&&!Yd(s)&&s.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=s,bv(t,e,s,n,i,o)):(t=iu(r.type,null,n,e,e.mode,o),t.ref=e.ref,t.return=e,e.child=t)}return s=t.child,(i&o)===0&&(i=s.memoizedProps,r=r.compare,r=r!==null?r:xa,r(i,n)&&t.ref===e.ref)?Dn(t,e,o):(e.flags|=1,t=ii(s,n),t.ref=e.ref,t.return=e,e.child=t)}function bv(t,e,r,n,i,o){if(t!==null&&xa(t.memoizedProps,n)&&t.ref===e.ref)if(Xr=!1,(o&i)!==0)(t.flags&16384)!==0&&(Xr=!0);else return e.lanes=t.lanes,Dn(t,e,o);return Gh(t,e,r,n,o)}function yh(t,e,r){var n=e.pendingProps,i=n.children,o=t!==null?t.memoizedState:null;if(n.mode==="hidden"||n.mode==="unstable-defer-without-hiding")if((e.mode&4)===0)e.memoizedState={baseLanes:0},Gl(e,r);else if((r&1073741824)!==0)e.memoizedState={baseLanes:0},Gl(e,o!==null?o.baseLanes:r);else return t=o!==null?o.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t},Gl(e,t),null;else o!==null?(n=o.baseLanes|r,e.memoizedState=null):n=r,Gl(e,n);return hr(t,e,i,r),e.child}function Ev(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=128)}function Gh(t,e,r,n,i){var o=pr(r)?Ui:tr.current;return o=Yo(e,o),Wo(e,i),r=Bd(t,e,r,n,o,i),t!==null&&!Xr?(e.updateQueue=t.updateQueue,e.flags&=-517,t.lanes&=~i,Dn(t,e,i)):(e.flags|=1,hr(t,e,r,i),e.child)}function Ym(t,e,r,n,i){if(pr(r)){var o=!0;Ql(e)}else o=!1;if(Wo(e,i),e.stateNode===null)t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2),fv(e,r,n),qh(e,r,n,i),n=!0;else if(t===null){var s=e.stateNode,a=e.memoizedProps;s.props=a;var l=s.context,h=r.contextType;typeof h=="object"&&h!==null?h=zr(h):(h=pr(r)?Ui:tr.current,h=Yo(e,h));var g=r.getDerivedStateFromProps,m=typeof g=="function"||typeof s.getSnapshotBeforeUpdate=="function";m||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==n||l!==h)&&Bm(e,s,n,h),zn=!1;var p=e.memoizedState;s.state=p,Na(e,n,s,i),l=e.memoizedState,a!==n||p!==l||dr.current||zn?(typeof g=="function"&&(mu(e,r,g,n),l=e.memoizedState),(a=zn||Um(e,r,a,n,p,l,h))?(m||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(e.flags|=4)):(typeof s.componentDidMount=="function"&&(e.flags|=4),e.memoizedProps=n,e.memoizedState=l),s.props=n,s.state=l,s.context=h,n=a):(typeof s.componentDidMount=="function"&&(e.flags|=4),n=!1)}else{s=e.stateNode,uv(t,e),a=e.memoizedProps,h=e.type===e.elementType?a:Zr(e.type,a),s.props=h,m=e.pendingProps,p=s.context,l=r.contextType,typeof l=="object"&&l!==null?l=zr(l):(l=pr(r)?Ui:tr.current,l=Yo(e,l));var w=r.getDerivedStateFromProps;(g=typeof w=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==m||p!==l)&&Bm(e,s,n,l),zn=!1,p=e.memoizedState,s.state=p,Na(e,n,s,i);var b=e.memoizedState;a!==m||p!==b||dr.current||zn?(typeof w=="function"&&(mu(e,r,w,n),b=e.memoizedState),(h=zn||Um(e,r,h,n,p,b,l))?(g||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(n,b,l),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(n,b,l)),typeof s.componentDidUpdate=="function"&&(e.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(e.flags|=256)):(typeof s.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=256),e.memoizedProps=n,e.memoizedState=b),s.props=n,s.state=b,s.context=l,n=h):(typeof s.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=256),n=!1)}return Yh(t,e,r,n,o,i)}function Yh(t,e,r,n,i,o){Ev(t,e);var s=(e.flags&64)!==0;if(!n&&!s)return i&&Cm(e,r,!1),Dn(t,e,o);n=e.stateNode,u3.current=e;var a=s&&typeof r.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&s?(e.child=vu(e,t.child,null,o),e.child=vu(e,null,a,o)):hr(t,e,a,o),e.memoizedState=n.state,i&&Cm(e,r,!0),e.child}function Km(t){var e=t.stateNode;e.pendingContext?Fm(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Fm(t,e.context,!1),$h(t,e.containerInfo)}var Jl={dehydrated:null,retryLane:0};function Zm(t,e,r){var n=e.pendingProps,i=gt.current,o=!1,s;return(s=(e.flags&64)!==0)||(s=t!==null&&t.memoizedState===null?!1:(i&2)!==0),s?(o=!0,e.flags&=-65):t!==null&&t.memoizedState===null||n.fallback===void 0||n.unstable_avoidThisFallback===!0||(i|=1),yt(gt,i&1),t===null?(n.fallback!==void 0&&Hh(e),t=n.children,i=n.fallback,o?(t=Xm(e,t,i,r),e.child.memoizedState={baseLanes:r},e.memoizedState=Jl,t):typeof n.unstable_expectedLoadTime=="number"?(t=Xm(e,t,i,r),e.child.memoizedState={baseLanes:r},e.memoizedState=Jl,e.lanes=33554432,t):(r=Kd({mode:"visible",children:t},e.mode,r,null),r.return=e,e.child=r)):t.memoizedState!==null?o?(n=e1(t,e,n.children,n.fallback,r),o=e.child,i=t.child.memoizedState,o.memoizedState=i===null?{baseLanes:r}:{baseLanes:i.baseLanes|r},o.childLanes=t.childLanes&~r,e.memoizedState=Jl,n):(r=Qm(t,e,n.children,r),e.memoizedState=null,r):o?(n=e1(t,e,n.children,n.fallback,r),o=e.child,i=t.child.memoizedState,o.memoizedState=i===null?{baseLanes:r}:{baseLanes:i.baseLanes|r},o.childLanes=t.childLanes&~r,e.memoizedState=Jl,n):(r=Qm(t,e,n.children,r),e.memoizedState=null,r)}function Xm(t,e,r,n){var i=t.mode,o=t.child;return e={mode:"hidden",children:e},(i&2)===0&&o!==null?(o.childLanes=0,o.pendingProps=e):o=Kd(e,i,0,null),r=Jo(r,i,n,null),o.return=t,r.return=t,o.sibling=r,t.child=o,r}function Qm(t,e,r,n){var i=t.child;return t=i.sibling,r=ii(i,{mode:"visible",children:r}),(e.mode&2)===0&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(t.nextEffect=null,t.flags=8,e.firstEffect=e.lastEffect=t),e.child=r}function e1(t,e,r,n,i){var o=e.mode,s=t.child;t=s.sibling;var a={mode:"hidden",children:r};return(o&2)===0&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=a,s=r.lastEffect,s!==null?(e.firstEffect=r.firstEffect,e.lastEffect=s,s.nextEffect=null):e.firstEffect=e.lastEffect=null):r=ii(s,a),t!==null?n=ii(t,n):(n=Jo(n,o,i,null),n.flags|=2),n.return=e,r.return=e,r.sibling=n,e.child=r,n}function t1(t,e){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),lv(t.return,e)}function mh(t,e,r,n,i,o){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:i,lastEffect:o}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=n,s.tail=r,s.tailMode=i,s.lastEffect=o)}function r1(t,e,r){var n=e.pendingProps,i=n.revealOrder,o=n.tail;if(hr(t,e,n.children,r),n=gt.current,(n&2)!==0)n=n&1|2,e.flags|=64;else{if(t!==null&&(t.flags&64)!==0)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&t1(t,r);else if(t.tag===19)t1(t,r);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(yt(gt,n),(e.mode&2)===0)e.memoizedState=null;else switch(i){case"forwards":for(r=e.child,i=null;r!==null;)t=r.alternate,t!==null&&wu(t)===null&&(i=r),r=r.sibling;r=i,r===null?(i=e.child,e.child=null):(i=r.sibling,r.sibling=null),mh(e,!1,i,r,o,e.lastEffect);break;case"backwards":for(r=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&wu(t)===null){e.child=i;break}t=i.sibling,i.sibling=r,r=i,i=t}mh(e,!0,r,null,o,e.lastEffect);break;case"together":mh(e,!1,null,null,void 0,e.lastEffect);break;default:e.memoizedState=null}return e.child}function Dn(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),La|=e.lanes,(r&e.childLanes)!==0){if(t!==null&&e.child!==t.child)throw Error(me(153));if(e.child!==null){for(t=e.child,r=ii(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=ii(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}return null}var Ov,Kh,xv,Tv;Ov=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Kh=function(){};xv=function(t,e,r,n){var i=t.memoizedProps;if(i!==n){t=e.stateNode,Pi(vn.current);var o=null;switch(r){case"input":i=Eh(t,i),n=Eh(t,n),o=[];break;case"option":i=Th(t,i),n=Th(t,n),o=[];break;case"select":i=lt({},i,{value:void 0}),n=lt({},n,{value:void 0}),o=[];break;case"textarea":i=kh(t,i),n=kh(t,n),o=[];break;default:typeof i.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=fu)}Ah(r,n);var s;r=null;for(h in i)if(!n.hasOwnProperty(h)&&i.hasOwnProperty(h)&&i[h]!=null)if(h==="style"){var a=i[h];for(s in a)a.hasOwnProperty(s)&&(r||(r={}),r[s]="")}else h!=="dangerouslySetInnerHTML"&&h!=="children"&&h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(va.hasOwnProperty(h)?o||(o=[]):(o=o||[]).push(h,null));for(h in n){var l=n[h];if(a=i!=null?i[h]:void 0,n.hasOwnProperty(h)&&l!==a&&(l!=null||a!=null))if(h==="style")if(a){for(s in a)!a.hasOwnProperty(s)||l&&l.hasOwnProperty(s)||(r||(r={}),r[s]="");for(s in l)l.hasOwnProperty(s)&&a[s]!==l[s]&&(r||(r={}),r[s]=l[s])}else r||(o||(o=[]),o.push(h,r)),r=l;else h==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(o=o||[]).push(h,l)):h==="children"?typeof l!="string"&&typeof l!="number"||(o=o||[]).push(h,""+l):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&(va.hasOwnProperty(h)?(l!=null&&h==="onScroll"&&nt("scroll",t),o||a===l||(o=[])):typeof l=="object"&&l!==null&&l.$$typeof===yd?l.toString():(o=o||[]).push(h,l))}r&&(o=o||[]).push("style",r);var h=o;(e.updateQueue=h)&&(e.flags|=4)}};Tv=function(t,e,r,n){r!==n&&(e.flags|=4)};function Xs(t,e){if(!wn)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function c3(t,e,r){var n=e.pendingProps;switch(e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return pr(e.type)&&du(),null;case 3:return Zo(),it(dr),it(tr),jd(),n=e.stateNode,n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(Hl(e)?e.flags|=4:n.hydrate||(e.flags|=256)),Kh(e),null;case 5:Md(e);var i=Pi(Aa.current);if(r=e.type,t!==null&&e.stateNode!=null)xv(t,e,r,n,i),t.ref!==e.ref&&(e.flags|=128);else{if(!n){if(e.stateNode===null)throw Error(me(166));return null}if(t=Pi(vn.current),Hl(e)){n=e.stateNode,r=e.type;var o=e.memoizedProps;switch(n[qn]=e,n[hu]=o,r){case"dialog":nt("cancel",n),nt("close",n);break;case"iframe":case"object":case"embed":nt("load",n);break;case"video":case"audio":for(t=0;t<na.length;t++)nt(na[t],n);break;case"source":nt("error",n);break;case"img":case"image":case"link":nt("error",n),nt("load",n);break;case"details":nt("toggle",n);break;case"input":im(n,o),nt("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!o.multiple},nt("invalid",n);break;case"textarea":sm(n,o),nt("invalid",n)}Ah(r,o),t=null;for(var s in o)o.hasOwnProperty(s)&&(i=o[s],s==="children"?typeof i=="string"?n.textContent!==i&&(t=["children",i]):typeof i=="number"&&n.textContent!==""+i&&(t=["children",""+i]):va.hasOwnProperty(s)&&i!=null&&s==="onScroll"&&nt("scroll",n));switch(r){case"input":Ml(n),om(n,o,!0);break;case"textarea":Ml(n),am(n);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(n.onclick=fu)}n=t,e.updateQueue=n,n!==null&&(e.flags|=4)}else{switch(s=i.nodeType===9?i:i.ownerDocument,t===Nh.html&&(t=v1(r)),t===Nh.html?r==="script"?(t=s.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=s.createElement(r,{is:n.is}):(t=s.createElement(r),r==="select"&&(s=t,n.multiple?s.multiple=!0:n.size&&(s.size=n.size))):t=s.createElementNS(t,r),t[qn]=e,t[hu]=n,Ov(t,e,!1,!1),e.stateNode=t,s=Rh(r,n),r){case"dialog":nt("cancel",t),nt("close",t),i=n;break;case"iframe":case"object":case"embed":nt("load",t),i=n;break;case"video":case"audio":for(i=0;i<na.length;i++)nt(na[i],t);i=n;break;case"source":nt("error",t),i=n;break;case"img":case"image":case"link":nt("error",t),nt("load",t),i=n;break;case"details":nt("toggle",t),i=n;break;case"input":im(t,n),i=Eh(t,n),nt("invalid",t);break;case"option":i=Th(t,n);break;case"select":t._wrapperState={wasMultiple:!!n.multiple},i=lt({},n,{value:void 0}),nt("invalid",t);break;case"textarea":sm(t,n),i=kh(t,n),nt("invalid",t);break;default:i=n}Ah(r,i);var a=i;for(o in a)if(a.hasOwnProperty(o)){var l=a[o];o==="style"?S1(t,l):o==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&w1(t,l)):o==="children"?typeof l=="string"?(r!=="textarea"||l!=="")&&wa(t,l):typeof l=="number"&&wa(t,""+l):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(va.hasOwnProperty(o)?l!=null&&o==="onScroll"&&nt("scroll",t):l!=null&&cd(t,o,l,s))}switch(r){case"input":Ml(t),om(t,n,!1);break;case"textarea":Ml(t),am(t);break;case"option":n.value!=null&&t.setAttribute("value",""+ei(n.value));break;case"select":t.multiple=!!n.multiple,o=n.value,o!=null?Uo(t,!!n.multiple,o,!1):n.defaultValue!=null&&Uo(t,!!n.multiple,n.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=fu)}X1(r,n)&&(e.flags|=4)}e.ref!==null&&(e.flags|=128)}return null;case 6:if(t&&e.stateNode!=null)Tv(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(me(166));r=Pi(Aa.current),Pi(vn.current),Hl(e)?(n=e.stateNode,r=e.memoizedProps,n[qn]=e,n.nodeValue!==r&&(e.flags|=4)):(n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[qn]=e,e.stateNode=n)}return null;case 13:return it(gt),n=e.memoizedState,(e.flags&64)!==0?(e.lanes=r,e):(n=n!==null,r=!1,t===null?e.memoizedProps.fallback!==void 0&&Hl(e):r=t.memoizedState!==null,n&&!r&&(e.mode&2)!==0&&(t===null&&e.memoizedProps.unstable_avoidThisFallback!==!0||(gt.current&1)!==0?$t===0&&($t=3):(($t===0||$t===3)&&($t=4),rr===null||(La&134217727)===0&&(ts&134217727)===0||$o(rr,er))),(n||r)&&(e.flags|=4),null);case 4:return Zo(),Kh(e),t===null&&Y1(e.stateNode.containerInfo),null;case 10:return Ld(e),null;case 17:return pr(e.type)&&du(),null;case 19:if(it(gt),n=e.memoizedState,n===null)return null;if(o=(e.flags&64)!==0,s=n.rendering,s===null)if(o)Xs(n,!1);else{if($t!==0||t!==null&&(t.flags&64)!==0)for(t=e.child;t!==null;){if(s=wu(t),s!==null){for(e.flags|=64,Xs(n,!1),o=s.updateQueue,o!==null&&(e.updateQueue=o,e.flags|=4),n.lastEffect===null&&(e.firstEffect=null),e.lastEffect=n.lastEffect,n=r,r=e.child;r!==null;)o=r,t=n,o.flags&=2,o.nextEffect=null,o.firstEffect=null,o.lastEffect=null,s=o.alternate,s===null?(o.childLanes=0,o.lanes=t,o.child=null,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,t=s.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return yt(gt,gt.current&1|2),e.child}t=t.sibling}n.tail!==null&&Qt()>rd&&(e.flags|=64,o=!0,Xs(n,!1),e.lanes=33554432)}else{if(!o)if(t=wu(s),t!==null){if(e.flags|=64,o=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),Xs(n,!0),n.tail===null&&n.tailMode==="hidden"&&!s.alternate&&!wn)return e=e.lastEffect=n.lastEffect,e!==null&&(e.nextEffect=null),null}else 2*Qt()-n.renderingStartTime>rd&&r!==1073741824&&(e.flags|=64,o=!0,Xs(n,!1),e.lanes=33554432);n.isBackwards?(s.sibling=e.child,e.child=s):(r=n.last,r!==null?r.sibling=s:e.child=s,n.last=s)}return n.tail!==null?(r=n.tail,n.rendering=r,n.tail=r.sibling,n.lastEffect=e.lastEffect,n.renderingStartTime=Qt(),r.sibling=null,e=gt.current,yt(gt,o?e&1|2:e&1),r):null;case 23:case 24:return Gd(),t!==null&&t.memoizedState!==null!=(e.memoizedState!==null)&&n.mode!=="unstable-defer-without-hiding"&&(e.flags|=4),null}throw Error(me(156,e.tag))}function f3(t){switch(t.tag){case 1:pr(t.type)&&du();var e=t.flags;return e&4096?(t.flags=e&-4097|64,t):null;case 3:if(Zo(),it(dr),it(tr),jd(),e=t.flags,(e&64)!==0)throw Error(me(285));return t.flags=e&-4097|64,t;case 5:return Md(t),null;case 13:return it(gt),e=t.flags,e&4096?(t.flags=e&-4097|64,t):null;case 19:return it(gt),null;case 4:return Zo(),null;case 10:return Ld(t),null;case 23:case 24:return Gd(),null;default:return null}}function qd(t,e){try{var r="",n=e;do r+=$O(n),n=n.return;while(n);var i=r}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:i}}function Zh(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var h3=typeof WeakMap=="function"?WeakMap:Map;function kv(t,e,r){r=Yn(-1,r),r.tag=3,r.payload={element:null};var n=e.value;return r.callback=function(){Tu||(Tu=!0,nd=n),Zh(t,e)},r}function Nv(t,e,r){r=Yn(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var i=e.value;r.payload=function(){return Zh(t,e),n(i)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(r.callback=function(){typeof n!="function"&&(mn===null?mn=new Set([this]):mn.add(this),Zh(t,e));var s=e.stack;this.componentDidCatch(e.value,{componentStack:s!==null?s:""})}),r}var d3=typeof WeakSet=="function"?WeakSet:Set;function n1(t){var e=t.ref;if(e!==null)if(typeof e=="function")try{e(null)}catch(r){Qn(t,r)}else e.current=null}function p3(t,e){switch(e.tag){case 0:case 11:case 15:case 22:return;case 1:if(e.flags&256&&t!==null){var r=t.memoizedProps,n=t.memoizedState;t=e.stateNode,e=t.getSnapshotBeforeUpdate(e.elementType===e.type?r:Zr(e.type,r),n),t.__reactInternalSnapshotBeforeUpdate=e}return;case 3:e.flags&256&&Rd(e.stateNode.containerInfo);return;case 5:case 6:case 4:case 17:return}throw Error(me(163))}function g3(t,e,r){switch(r.tag){case 0:case 11:case 15:case 22:if(e=r.updateQueue,e=e!==null?e.lastEffect:null,e!==null){t=e=e.next;do{if((t.tag&3)===3){var n=t.create;t.destroy=n()}t=t.next}while(t!==e)}if(e=r.updateQueue,e=e!==null?e.lastEffect:null,e!==null){t=e=e.next;do{var i=t;n=i.next,i=i.tag,(i&4)!==0&&(i&1)!==0&&(Mv(r,t),E3(r,t)),t=n}while(t!==e)}return;case 1:t=r.stateNode,r.flags&4&&(e===null?t.componentDidMount():(n=r.elementType===r.type?e.memoizedProps:Zr(r.type,e.memoizedProps),t.componentDidUpdate(n,e.memoizedState,t.__reactInternalSnapshotBeforeUpdate))),e=r.updateQueue,e!==null&&jm(r,e,t);return;case 3:if(e=r.updateQueue,e!==null){if(t=null,r.child!==null)switch(r.child.tag){case 5:t=r.child.stateNode;break;case 1:t=r.child.stateNode}jm(r,e,t)}return;case 5:t=r.stateNode,e===null&&r.flags&4&&X1(r.type,r.memoizedProps)&&t.focus();return;case 6:return;case 4:return;case 12:return;case 13:r.memoizedState===null&&(r=r.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&R1(r))));return;case 19:case 17:case 20:case 21:case 23:case 24:return}throw Error(me(163))}function i1(t,e){for(var r=t;;){if(r.tag===5){var n=r.stateNode;if(e)n=n.style,typeof n.setProperty=="function"?n.setProperty("display","none","important"):n.display="none";else{n=r.stateNode;var i=r.memoizedProps.style;i=i!=null&&i.hasOwnProperty("display")?i.display:null,n.style.display=_1("display",i)}}else if(r.tag===6)r.stateNode.nodeValue=e?"":r.memoizedProps;else if((r.tag!==23&&r.tag!==24||r.memoizedState===null||r===t)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}}function o1(t,e){if(ji&&typeof ji.onCommitFiberUnmount=="function")try{ji.onCommitFiberUnmount(Dd,e)}catch{}switch(e.tag){case 0:case 11:case 14:case 15:case 22:if(t=e.updateQueue,t!==null&&(t=t.lastEffect,t!==null)){var r=t=t.next;do{var n=r,i=n.destroy;if(n=n.tag,i!==void 0)if((n&4)!==0)Mv(e,r);else{n=e;try{i()}catch(o){Qn(n,o)}}r=r.next}while(r!==t)}break;case 1:if(n1(e),t=e.stateNode,typeof t.componentWillUnmount=="function")try{t.props=e.memoizedProps,t.state=e.memoizedState,t.componentWillUnmount()}catch(o){Qn(e,o)}break;case 5:n1(e);break;case 4:Iv(t,e)}}function s1(t){t.alternate=null,t.child=null,t.dependencies=null,t.firstEffect=null,t.lastEffect=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.return=null,t.updateQueue=null}function a1(t){return t.tag===5||t.tag===3||t.tag===4}function l1(t){e:{for(var e=t.return;e!==null;){if(a1(e))break e;e=e.return}throw Error(me(160))}var r=e;switch(e=r.stateNode,r.tag){case 5:var n=!1;break;case 3:e=e.containerInfo,n=!0;break;case 4:e=e.containerInfo,n=!0;break;default:throw Error(me(161))}r.flags&16&&(wa(e,""),r.flags&=-17);e:t:for(r=t;;){for(;r.sibling===null;){if(r.return===null||a1(r.return)){r=null;break e}r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.flags&2||r.child===null||r.tag===4)continue t;r.child.return=r,r=r.child}if(!(r.flags&2)){r=r.stateNode;break e}}n?Xh(t,r,e):Qh(t,r,e)}function Xh(t,e,r){var n=t.tag,i=n===5||n===6;if(i)t=i?t.stateNode:t.stateNode.instance,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=fu));else if(n!==4&&(t=t.child,t!==null))for(Xh(t,e,r),t=t.sibling;t!==null;)Xh(t,e,r),t=t.sibling}function Qh(t,e,r){var n=t.tag,i=n===5||n===6;if(i)t=i?t.stateNode:t.stateNode.instance,e?r.insertBefore(t,e):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(Qh(t,e,r),t=t.sibling;t!==null;)Qh(t,e,r),t=t.sibling}function Iv(t,e){for(var r=e,n=!1,i,o;;){if(!n){n=r.return;e:for(;;){if(n===null)throw Error(me(160));switch(i=n.stateNode,n.tag){case 5:o=!1;break e;case 3:i=i.containerInfo,o=!0;break e;case 4:i=i.containerInfo,o=!0;break e}n=n.return}n=!0}if(r.tag===5||r.tag===6){e:for(var s=t,a=r,l=a;;)if(o1(s,l),l.child!==null&&l.tag!==4)l.child.return=l,l=l.child;else{if(l===a)break e;for(;l.sibling===null;){if(l.return===null||l.return===a)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}o?(s=i,a=r.stateNode,s.nodeType===8?s.parentNode.removeChild(a):s.removeChild(a)):i.removeChild(r.stateNode)}else if(r.tag===4){if(r.child!==null){i=r.stateNode.containerInfo,o=!0,r.child.return=r,r=r.child;continue}}else if(o1(t,r),r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return,r.tag===4&&(n=!1)}r.sibling.return=r.return,r=r.sibling}}function vh(t,e){switch(e.tag){case 0:case 11:case 14:case 15:case 22:var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var n=r=r.next;do(n.tag&3)===3&&(t=n.destroy,n.destroy=void 0,t!==void 0&&t()),n=n.next;while(n!==r)}return;case 1:return;case 5:if(r=e.stateNode,r!=null){n=e.memoizedProps;var i=t!==null?t.memoizedProps:n;t=e.type;var o=e.updateQueue;if(e.updateQueue=null,o!==null){for(r[hu]=n,t==="input"&&n.type==="radio"&&n.name!=null&&y1(r,n),Rh(t,i),e=Rh(t,n),i=0;i<o.length;i+=2){var s=o[i],a=o[i+1];s==="style"?S1(r,a):s==="dangerouslySetInnerHTML"?w1(r,a):s==="children"?wa(r,a):cd(r,s,a,e)}switch(t){case"input":Oh(r,n);break;case"textarea":m1(r,n);break;case"select":t=r._wrapperState.wasMultiple,r._wrapperState.wasMultiple=!!n.multiple,o=n.value,o!=null?Uo(r,!!n.multiple,o,!1):t!==!!n.multiple&&(n.defaultValue!=null?Uo(r,!!n.multiple,n.defaultValue,!0):Uo(r,!!n.multiple,n.multiple?[]:"",!1))}}}return;case 6:if(e.stateNode===null)throw Error(me(162));e.stateNode.nodeValue=e.memoizedProps;return;case 3:r=e.stateNode,r.hydrate&&(r.hydrate=!1,R1(r.containerInfo));return;case 12:return;case 13:e.memoizedState!==null&&(Jd=Qt(),i1(e.child,!0)),u1(e);return;case 19:u1(e);return;case 17:return;case 23:case 24:i1(e,e.memoizedState!==null);return}throw Error(me(163))}function u1(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new d3),e.forEach(function(n){var i=T3.bind(null,t,n);r.has(n)||(r.add(n),n.then(i,i))})}}function y3(t,e){return t!==null&&(t=t.memoizedState,t===null||t.dehydrated!==null)?(e=e.memoizedState,e!==null&&e.dehydrated===null):!1}var m3=Math.ceil,xu=Wi.ReactCurrentDispatcher,$d=Wi.ReactCurrentOwner,Ae=0,rr=null,Dt=null,er=0,zi=0,ed=oi(0),$t=0,Uu=null,es=0,La=0,ts=0,Hd=0,td=null,Jd=0,rd=1/0;function rs(){rd=Qt()+500}var Oe=null,Tu=!1,nd=null,mn=null,ni=!1,ga=null,ia=90,id=[],od=[],Fn=null,ya=0,sd=null,tu=-1,An=0,ru=0,ma=null,nu=!1;function kr(){return(Ae&48)!==0?Qt():tu!==-1?tu:tu=Qt()}function Zn(t){if(t=t.mode,(t&2)===0)return 1;if((t&4)===0)return Ko()===99?1:2;if(An===0&&(An=es),i3.transition!==0){ru!==0&&(ru=td!==null?td.pendingLanes:0),t=An;var e=4186112&~ru;return e&=-e,e===0&&(t=4186112&~t,e=t&-t,e===0&&(e=8192)),e}return t=Ko(),(Ae&4)!==0&&t===98?t=uu(12,An):(t=a4(t),t=uu(t,An)),t}function Xn(t,e,r){if(50<ya)throw ya=0,sd=null,Error(me(185));if(t=Bu(t,e),t===null)return null;Du(t,e,r),t===rr&&(ts|=e,$t===4&&$o(t,er));var n=Ko();e===1?(Ae&8)!==0&&(Ae&48)===0?ad(t):(Vr(t,r),Ae===0&&(rs(),_n())):((Ae&4)===0||n!==98&&n!==99||(Fn===null?Fn=new Set([t]):Fn.add(t)),Vr(t,r)),td=t}function Bu(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}function Vr(t,e){for(var r=t.callbackNode,n=t.suspendedLanes,i=t.pingedLanes,o=t.expirationTimes,s=t.pendingLanes;0<s;){var a=31-ti(s),l=1<<a,h=o[a];if(h===-1){if((l&n)===0||(l&i)!==0){h=e,Ao(l);var g=Qe;o[a]=10<=g?h+250:6<=g?h+5e3:-1}}else h<=e&&(t.expiredLanes|=l);s&=~l}if(n=Ea(t,t===rr?er:0),e=Qe,n===0)r!==null&&(r!==dh&&Vh(r),t.callbackNode=null,t.callbackPriority=0);else{if(r!==null){if(t.callbackPriority===e)return;r!==dh&&Vh(r)}e===15?(r=ad.bind(null,t),In===null?(In=[r],eu=Fd(Mu,av)):In.push(r),r=dh):e===14?r=ka(99,ad.bind(null,t)):(r=l4(e),r=ka(r,Av.bind(null,t))),t.callbackPriority=e,t.callbackNode=r}}function Av(t){if(tu=-1,ru=An=0,(Ae&48)!==0)throw Error(me(327));var e=t.callbackNode;if(si()&&t.callbackNode!==e)return null;var r=Ea(t,t===rr?er:0);if(r===0)return null;var n=r,i=Ae;Ae|=16;var o=Cv();(rr!==t||er!==n)&&(rs(),Ho(t,n));do try{_3();break}catch(a){Fv(t,a)}while(1);if(Cd(),xu.current=o,Ae=i,Dt!==null?n=0:(rr=null,er=0,n=$t),(es&ts)!==0)Ho(t,0);else if(n!==0){if(n===2&&(Ae|=64,t.hydrate&&(t.hydrate=!1,Rd(t.containerInfo)),r=j1(t),r!==0&&(n=oa(t,r))),n===1)throw e=Uu,Ho(t,0),$o(t,r),Vr(t,Qt()),e;switch(t.finishedWork=t.current.alternate,t.finishedLanes=r,n){case 0:case 1:throw Error(me(345));case 2:Di(t);break;case 3:if($o(t,r),(r&62914560)===r&&(n=Jd+500-Qt(),10<n)){if(Ea(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){kr(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Am(Di.bind(null,t),n);break}Di(t);break;case 4:if($o(t,r),(r&4186112)===r)break;for(n=t.eventTimes,i=-1;0<r;){var s=31-ti(r);o=1<<s,s=n[s],s>i&&(i=s),r&=~o}if(r=i,r=Qt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*m3(r/1960))-r,10<r){t.timeoutHandle=Am(Di.bind(null,t),r);break}Di(t);break;case 5:Di(t);break;default:throw Error(me(329))}}return Vr(t,Qt()),t.callbackNode===e?Av.bind(null,t):null}function $o(t,e){for(e&=~Hd,e&=~ts,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-ti(e),n=1<<r;t[r]=-1,e&=~n}}function ad(t){if((Ae&48)!==0)throw Error(me(327));if(si(),t===rr&&(t.expiredLanes&er)!==0){var e=er,r=oa(t,e);(es&ts)!==0&&(e=Ea(t,e),r=oa(t,e))}else e=Ea(t,0),r=oa(t,e);if(t.tag!==0&&r===2&&(Ae|=64,t.hydrate&&(t.hydrate=!1,Rd(t.containerInfo)),e=j1(t),e!==0&&(r=oa(t,e))),r===1)throw r=Uu,Ho(t,0),$o(t,e),Vr(t,Qt()),r;return t.finishedWork=t.current.alternate,t.finishedLanes=e,Di(t),Vr(t,Qt()),null}function v3(){if(Fn!==null){var t=Fn;Fn=null,t.forEach(function(e){e.expiredLanes|=24&e.pendingLanes,Vr(e,Qt())})}_n()}function Rv(t,e){var r=Ae;Ae|=1;try{return t(e)}finally{Ae=r,Ae===0&&(rs(),_n())}}function Dv(t,e){var r=Ae;Ae&=-2,Ae|=8;try{return t(e)}finally{Ae=r,Ae===0&&(rs(),_n())}}function Gl(t,e){yt(ed,zi),zi|=e,es|=e}function Gd(){zi=ed.current,it(ed)}function Ho(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,X4(r)),Dt!==null)for(r=Dt.return;r!==null;){var n=r;switch(n.tag){case 1:n=n.type.childContextTypes,n!=null&&du();break;case 3:Zo(),it(dr),it(tr),jd();break;case 5:Md(n);break;case 4:Zo();break;case 13:it(gt);break;case 19:it(gt);break;case 10:Ld(n);break;case 23:case 24:Gd()}r=r.return}rr=t,Dt=ii(t.current,null),er=zi=es=e,$t=0,Uu=null,Hd=ts=La=0}function Fv(t,e){do{var r=Dt;try{if(Cd(),da.current=Ou,_u){for(var n=xt.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}_u=!1}if(Ra=0,qt=Xt=xt=null,pa=!1,$d.current=null,r===null||r.return===null){$t=1,Uu=e,Dt=null;break}e:{var o=t,s=r.return,a=r,l=e;if(e=er,a.flags|=2048,a.firstEffect=a.lastEffect=null,l!==null&&typeof l=="object"&&typeof l.then=="function"){var h=l;if((a.mode&2)===0){var g=a.alternate;g?(a.updateQueue=g.updateQueue,a.memoizedState=g.memoizedState,a.lanes=g.lanes):(a.updateQueue=null,a.memoizedState=null)}var m=(gt.current&1)!==0,p=s;do{var w;if(w=p.tag===13){var b=p.memoizedState;if(b!==null)w=b.dehydrated!==null;else{var N=p.memoizedProps;w=N.fallback===void 0?!1:N.unstable_avoidThisFallback!==!0?!0:!m}}if(w){var O=p.updateQueue;if(O===null){var I=new Set;I.add(h),p.updateQueue=I}else O.add(h);if((p.mode&2)===0){if(p.flags|=64,a.flags|=16384,a.flags&=-2981,a.tag===1)if(a.alternate===null)a.tag=17;else{var D=Yn(-1,1);D.tag=2,Kn(a,D)}a.lanes|=1;break e}l=void 0,a=e;var G=o.pingCache;if(G===null?(G=o.pingCache=new h3,l=new Set,G.set(h,l)):(l=G.get(h),l===void 0&&(l=new Set,G.set(h,l))),!l.has(a)){l.add(a);var q=x3.bind(null,o,h,a);h.then(q,q)}p.flags|=4096,p.lanes=e;break e}p=p.return}while(p!==null);l=Error((jo(a.type)||"A React component")+` suspended while rendering, but no fallback UI was specified.

Add a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.`)}$t!==5&&($t=2),l=qd(l,a),p=s;do{switch(p.tag){case 3:o=l,p.flags|=4096,e&=-e,p.lanes|=e;var J=kv(p,o,e);Mm(p,J);break e;case 1:o=l;var C=p.type,z=p.stateNode;if((p.flags&64)===0&&(typeof C.getDerivedStateFromError=="function"||z!==null&&typeof z.componentDidCatch=="function"&&(mn===null||!mn.has(z)))){p.flags|=4096,e&=-e,p.lanes|=e;var S=Nv(p,o,e);Mm(p,S);break e}}p=p.return}while(p!==null)}Pv(r)}catch(W){e=W,Dt===r&&r!==null&&(Dt=r=r.return);continue}break}while(1)}function Cv(){var t=xu.current;return xu.current=Ou,t===null?Ou:t}function oa(t,e){var r=Ae;Ae|=16;var n=Cv();rr===t&&er===e||Ho(t,e);do try{w3();break}catch(i){Fv(t,i)}while(1);if(Cd(),Ae=r,xu.current=n,Dt!==null)throw Error(me(261));return rr=null,er=0,$t}function w3(){for(;Dt!==null;)Lv(Dt)}function _3(){for(;Dt!==null&&!t3();)Lv(Dt)}function Lv(t){var e=jv(t.alternate,t,zi);t.memoizedProps=t.pendingProps,e===null?Pv(t):Dt=e,$d.current=null}function Pv(t){var e=t;do{var r=e.alternate;if(t=e.return,(e.flags&2048)===0){if(r=c3(r,e,zi),r!==null){Dt=r;return}if(r=e,r.tag!==24&&r.tag!==23||r.memoizedState===null||(zi&1073741824)!==0||(r.mode&4)===0){for(var n=0,i=r.child;i!==null;)n|=i.lanes|i.childLanes,i=i.sibling;r.childLanes=n}t!==null&&(t.flags&2048)===0&&(t.firstEffect===null&&(t.firstEffect=e.firstEffect),e.lastEffect!==null&&(t.lastEffect!==null&&(t.lastEffect.nextEffect=e.firstEffect),t.lastEffect=e.lastEffect),1<e.flags&&(t.lastEffect!==null?t.lastEffect.nextEffect=e:t.firstEffect=e,t.lastEffect=e))}else{if(r=f3(e),r!==null){r.flags&=2047,Dt=r;return}t!==null&&(t.firstEffect=t.lastEffect=null,t.flags|=2048)}if(e=e.sibling,e!==null){Dt=e;return}Dt=e=t}while(e!==null);$t===0&&($t=5)}function Di(t){var e=Ko();return Bi(99,S3.bind(null,t,e)),null}function S3(t,e){do si();while(ga!==null);if((Ae&48)!==0)throw Error(me(327));var r=t.finishedWork;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(me(177));t.callbackNode=null;var n=r.lanes|r.childLanes,i=n,o=t.pendingLanes&~i;t.pendingLanes=i,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=i,t.mutableReadLanes&=i,t.entangledLanes&=i,i=t.entanglements;for(var s=t.eventTimes,a=t.expirationTimes;0<o;){var l=31-ti(o),h=1<<l;i[l]=0,s[l]=-1,a[l]=-1,o&=~h}if(Fn!==null&&(n&24)===0&&Fn.has(t)&&Fn.delete(t),t===rr&&(Dt=rr=null,er=0),1<r.flags?r.lastEffect!==null?(r.lastEffect.nextEffect=r,n=r.firstEffect):n=r:n=r.firstEffect,n!==null){if(i=Ae,Ae|=32,$d.current=null,ch=Kl,s=Om(),Mh(s)){if("selectionStart"in s)a={start:s.selectionStart,end:s.selectionEnd};else e:if(a=(a=s.ownerDocument)&&a.defaultView||window,(h=a.getSelection&&a.getSelection())&&h.rangeCount!==0){a=h.anchorNode,o=h.anchorOffset,l=h.focusNode,h=h.focusOffset;try{a.nodeType,l.nodeType}catch{a=null;break e}var g=0,m=-1,p=-1,w=0,b=0,N=s,O=null;t:for(;;){for(var I;N!==a||o!==0&&N.nodeType!==3||(m=g+o),N!==l||h!==0&&N.nodeType!==3||(p=g+h),N.nodeType===3&&(g+=N.nodeValue.length),(I=N.firstChild)!==null;)O=N,N=I;for(;;){if(N===s)break t;if(O===a&&++w===o&&(m=g),O===l&&++b===h&&(p=g),(I=N.nextSibling)!==null)break;N=O,O=N.parentNode}N=I}a=m===-1||p===-1?null:{start:m,end:p}}else a=null;a=a||{start:0,end:0}}else a=null;fh={focusedElem:s,selectionRange:a},Kl=!1,ma=null,nu=!1,Oe=n;do try{b3()}catch(W){if(Oe===null)throw Error(me(330));Qn(Oe,W),Oe=Oe.nextEffect}while(Oe!==null);ma=null,Oe=n;do try{for(s=t;Oe!==null;){var D=Oe.flags;if(D&16&&wa(Oe.stateNode,""),D&128){var G=Oe.alternate;if(G!==null){var q=G.ref;q!==null&&(typeof q=="function"?q(null):q.current=null)}}switch(D&1038){case 2:l1(Oe),Oe.flags&=-3;break;case 6:l1(Oe),Oe.flags&=-3,vh(Oe.alternate,Oe);break;case 1024:Oe.flags&=-1025;break;case 1028:Oe.flags&=-1025,vh(Oe.alternate,Oe);break;case 4:vh(Oe.alternate,Oe);break;case 8:a=Oe,Iv(s,a);var J=a.alternate;s1(a),J!==null&&s1(J)}Oe=Oe.nextEffect}}catch(W){if(Oe===null)throw Error(me(330));Qn(Oe,W),Oe=Oe.nextEffect}while(Oe!==null);if(q=fh,G=Om(),D=q.focusedElem,s=q.selectionRange,G!==D&&D&&D.ownerDocument&&H1(D.ownerDocument.documentElement,D)){for(s!==null&&Mh(D)&&(G=s.start,q=s.end,q===void 0&&(q=G),"selectionStart"in D?(D.selectionStart=G,D.selectionEnd=Math.min(q,D.value.length)):(q=(G=D.ownerDocument||document)&&G.defaultView||window,q.getSelection&&(q=q.getSelection(),a=D.textContent.length,J=Math.min(s.start,a),s=s.end===void 0?J:Math.min(s.end,a),!q.extend&&J>s&&(a=s,s=J,J=a),a=Em(D,J),o=Em(D,s),a&&o&&(q.rangeCount!==1||q.anchorNode!==a.node||q.anchorOffset!==a.offset||q.focusNode!==o.node||q.focusOffset!==o.offset)&&(G=G.createRange(),G.setStart(a.node,a.offset),q.removeAllRanges(),J>s?(q.addRange(G),q.extend(o.node,o.offset)):(G.setEnd(o.node,o.offset),q.addRange(G)))))),G=[],q=D;q=q.parentNode;)q.nodeType===1&&G.push({element:q,left:q.scrollLeft,top:q.scrollTop});for(typeof D.focus=="function"&&D.focus(),D=0;D<G.length;D++)q=G[D],q.element.scrollLeft=q.left,q.element.scrollTop=q.top}Kl=!!ch,fh=ch=null,t.current=r,Oe=n;do try{for(D=t;Oe!==null;){var C=Oe.flags;if(C&36&&g3(D,Oe.alternate,Oe),C&128){G=void 0;var z=Oe.ref;if(z!==null){var S=Oe.stateNode;switch(Oe.tag){case 5:G=S;break;default:G=S}typeof z=="function"?z(G):z.current=G}}Oe=Oe.nextEffect}}catch(W){if(Oe===null)throw Error(me(330));Qn(Oe,W),Oe=Oe.nextEffect}while(Oe!==null);Oe=null,n3(),Ae=i}else t.current=r;if(ni)ni=!1,ga=t,ia=e;else for(Oe=n;Oe!==null;)e=Oe.nextEffect,Oe.nextEffect=null,Oe.flags&8&&(C=Oe,C.sibling=null,C.stateNode=null),Oe=e;if(n=t.pendingLanes,n===0&&(mn=null),n===1?t===sd?ya++:(ya=0,sd=t):ya=0,r=r.stateNode,ji&&typeof ji.onCommitFiberRoot=="function")try{ji.onCommitFiberRoot(Dd,r,void 0,(r.current.flags&64)===64)}catch{}if(Vr(t,Qt()),Tu)throw Tu=!1,t=nd,nd=null,t;return(Ae&8)!==0||_n(),null}function b3(){for(;Oe!==null;){var t=Oe.alternate;nu||ma===null||((Oe.flags&8)!==0?cm(Oe,ma)&&(nu=!0):Oe.tag===13&&y3(t,Oe)&&cm(Oe,ma)&&(nu=!0));var e=Oe.flags;(e&256)!==0&&p3(t,Oe),(e&512)===0||ni||(ni=!0,ka(97,function(){return si(),null})),Oe=Oe.nextEffect}}function si(){if(ia!==90){var t=97<ia?97:ia;return ia=90,Bi(t,O3)}return!1}function E3(t,e){id.push(e,t),ni||(ni=!0,ka(97,function(){return si(),null}))}function Mv(t,e){od.push(e,t),ni||(ni=!0,ka(97,function(){return si(),null}))}function O3(){if(ga===null)return!1;var t=ga;if(ga=null,(Ae&48)!==0)throw Error(me(331));var e=Ae;Ae|=32;var r=od;od=[];for(var n=0;n<r.length;n+=2){var i=r[n],o=r[n+1],s=i.destroy;if(i.destroy=void 0,typeof s=="function")try{s()}catch(l){if(o===null)throw Error(me(330));Qn(o,l)}}for(r=id,id=[],n=0;n<r.length;n+=2){i=r[n],o=r[n+1];try{var a=i.create;i.destroy=a()}catch(l){if(o===null)throw Error(me(330));Qn(o,l)}}for(a=t.current.firstEffect;a!==null;)t=a.nextEffect,a.nextEffect=null,a.flags&8&&(a.sibling=null,a.stateNode=null),a=t;return Ae=e,_n(),!0}function c1(t,e,r){e=qd(r,e),e=kv(t,e,1),Kn(t,e),e=kr(),t=Bu(t,1),t!==null&&(Du(t,1,e),Vr(t,e))}function Qn(t,e){if(t.tag===3)c1(t,t,e);else for(var r=t.return;r!==null;){if(r.tag===3){c1(r,t,e);break}else if(r.tag===1){var n=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(mn===null||!mn.has(n))){t=qd(e,t);var i=Nv(r,t,1);if(Kn(r,i),i=kr(),r=Bu(r,1),r!==null)Du(r,1,i),Vr(r,i);else if(typeof n.componentDidCatch=="function"&&(mn===null||!mn.has(n)))try{n.componentDidCatch(e,t)}catch{}break}}r=r.return}}function x3(t,e,r){var n=t.pingCache;n!==null&&n.delete(e),e=kr(),t.pingedLanes|=t.suspendedLanes&r,rr===t&&(er&r)===r&&($t===4||$t===3&&(er&62914560)===er&&500>Qt()-Jd?Ho(t,0):Hd|=r),Vr(t,e)}function T3(t,e){var r=t.stateNode;r!==null&&r.delete(e),e=0,e===0&&(e=t.mode,(e&2)===0?e=1:(e&4)===0?e=Ko()===99?1:2:(An===0&&(An=es),e=Ro(62914560&~An),e===0&&(e=4194304))),r=kr(),t=Bu(t,e),t!==null&&(Du(t,e,r),Vr(t,r))}var jv;jv=function(t,e,r){var n=e.lanes;if(t!==null)if(t.memoizedProps!==e.pendingProps||dr.current)Xr=!0;else if((r&n)!==0)Xr=(t.flags&16384)!==0;else{switch(Xr=!1,e.tag){case 3:Km(e),gh();break;case 5:zm(e);break;case 1:pr(e.type)&&Ql(e);break;case 4:$h(e,e.stateNode.containerInfo);break;case 10:n=e.memoizedProps.value;var i=e.type._context;yt(pu,i._currentValue),i._currentValue=n;break;case 13:if(e.memoizedState!==null)return(r&e.child.childLanes)!==0?Zm(t,e,r):(yt(gt,gt.current&1),e=Dn(t,e,r),e!==null?e.sibling:null);yt(gt,gt.current&1);break;case 19:if(n=(r&e.childLanes)!==0,(t.flags&64)!==0){if(n)return r1(t,e,r);e.flags|=64}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),yt(gt,gt.current),n)break;return null;case 23:case 24:return e.lanes=0,yh(t,e,r)}return Dn(t,e,r)}else Xr=!1;switch(e.lanes=0,e.tag){case 2:if(n=e.type,t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2),t=e.pendingProps,i=Yo(e,tr.current),Wo(e,r),i=Bd(null,e,n,t,i,r),e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0){if(e.tag=1,e.memoizedState=null,e.updateQueue=null,pr(n)){var o=!0;Ql(e)}else o=!1;e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Pd(e);var s=n.getDerivedStateFromProps;typeof s=="function"&&mu(e,n,s,t),i.updater=ju,e.stateNode=i,i._reactInternals=e,qh(e,n,t,r),e=Yh(null,e,n,!0,o,r)}else e.tag=0,hr(null,e,i,r),e=e.child;return e;case 16:i=e.elementType;e:{switch(t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2),t=e.pendingProps,o=i._init,i=o(i._payload),e.type=i,o=e.tag=N3(i),t=Zr(i,t),o){case 0:e=Gh(null,e,i,t,r);break e;case 1:e=Ym(null,e,i,t,r);break e;case 11:e=Jm(null,e,i,t,r);break e;case 14:e=Gm(null,e,i,Zr(i.type,t),n,r);break e}throw Error(me(306,i,""))}return e;case 0:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Zr(n,i),Gh(t,e,n,i,r);case 1:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Zr(n,i),Ym(t,e,n,i,r);case 3:if(Km(e),n=e.updateQueue,t===null||n===null)throw Error(me(282));if(n=e.pendingProps,i=e.memoizedState,i=i!==null?i.element:null,uv(t,e),Na(e,n,null,r),n=e.memoizedState.element,n===i)gh(),e=Dn(t,e,r);else{if(i=e.stateNode,(o=i.hydrate)&&($n=Vo(e.stateNode.containerInfo.firstChild),Rn=e,o=wn=!0),o){if(t=i.mutableSourceEagerHydrationData,t!=null)for(i=0;i<t.length;i+=2)o=t[i],o._workInProgressVersionPrimary=t[i+1],qo.push(o);for(r=dv(e,null,n,r),e.child=r;r;)r.flags=r.flags&-3|1024,r=r.sibling}else hr(t,e,n,r),gh();e=e.child}return e;case 5:return zm(e),t===null&&Hh(e),n=e.type,i=e.pendingProps,o=t!==null?t.memoizedProps:null,s=i.children,Bh(n,i)?s=null:o!==null&&Bh(n,o)&&(e.flags|=16),Ev(t,e),hr(t,e,s,r),e.child;case 6:return t===null&&Hh(e),null;case 13:return Zm(t,e,r);case 4:return $h(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=vu(e,null,n,r):hr(t,e,n,r),e.child;case 11:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Zr(n,i),Jm(t,e,n,i,r);case 7:return hr(t,e,e.pendingProps,r),e.child;case 8:return hr(t,e,e.pendingProps.children,r),e.child;case 12:return hr(t,e,e.pendingProps.children,r),e.child;case 10:e:{n=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value;var a=e.type._context;if(yt(pu,a._currentValue),a._currentValue=o,s!==null)if(a=s.value,o=jr(a,o)?0:(typeof n._calculateChangedBits=="function"?n._calculateChangedBits(a,o):1073741823)|0,o===0){if(s.children===i.children&&!dr.current){e=Dn(t,e,r);break e}}else for(a=e.child,a!==null&&(a.return=e);a!==null;){var l=a.dependencies;if(l!==null){s=a.child;for(var h=l.firstContext;h!==null;){if(h.context===n&&(h.observedBits&o)!==0){a.tag===1&&(h=Yn(-1,r&-r),h.tag=2,Kn(a,h)),a.lanes|=r,h=a.alternate,h!==null&&(h.lanes|=r),lv(a.return,r),l.lanes|=r;break}h=h.next}}else s=a.tag===10&&a.type===e.type?null:a.child;if(s!==null)s.return=a;else for(s=a;s!==null;){if(s===e){s=null;break}if(a=s.sibling,a!==null){a.return=s.return,s=a;break}s=s.return}a=s}hr(t,e,i.children,r),e=e.child}return e;case 9:return i=e.type,o=e.pendingProps,n=o.children,Wo(e,r),i=zr(i,o.unstable_observedBits),n=n(i),e.flags|=1,hr(t,e,n,r),e.child;case 14:return i=e.type,o=Zr(i,e.pendingProps),o=Zr(i.type,o),Gm(t,e,i,o,n,r);case 15:return bv(t,e,e.type,e.pendingProps,n,r);case 17:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Zr(n,i),t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2),e.tag=1,pr(n)?(t=!0,Ql(e)):t=!1,Wo(e,r),fv(e,n,i),qh(e,n,i,r),Yh(null,e,n,!0,t,r);case 19:return r1(t,e,r);case 23:return yh(t,e,r);case 24:return yh(t,e,r)}throw Error(me(156,e.tag))};function k3(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function Ur(t,e,r,n){return new k3(t,e,r,n)}function Yd(t){return t=t.prototype,!(!t||!t.isReactComponent)}function N3(t){if(typeof t=="function")return Yd(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Iu)return 11;if(t===Au)return 14}return 2}function ii(t,e){var r=t.alternate;return r===null?(r=Ur(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.nextEffect=null,r.firstEffect=null,r.lastEffect=null),r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function iu(t,e,r,n,i,o){var s=2;if(n=t,typeof t=="function")Yd(t)&&(s=1);else if(typeof t=="string")s=5;else e:switch(t){case Vn:return Jo(r.children,i,o,e);case d1:s=8,i|=16;break;case fd:s=8,i|=1;break;case sa:return t=Ur(12,r,e,i|8),t.elementType=sa,t.type=sa,t.lanes=o,t;case aa:return t=Ur(13,r,e,i),t.type=aa,t.elementType=aa,t.lanes=o,t;case ou:return t=Ur(19,r,e,i),t.elementType=ou,t.lanes=o,t;case md:return Kd(r,i,o,e);case bh:return t=Ur(24,r,e,i),t.elementType=bh,t.lanes=o,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case hd:s=10;break e;case dd:s=9;break e;case Iu:s=11;break e;case Au:s=14;break e;case pd:s=16,n=null;break e;case gd:s=22;break e}throw Error(me(130,t==null?t:typeof t,""))}return e=Ur(s,r,e,i),e.elementType=t,e.type=n,e.lanes=o,e}function Jo(t,e,r,n){return t=Ur(7,t,n,e),t.lanes=r,t}function Kd(t,e,r,n){return t=Ur(23,t,n,e),t.elementType=md,t.lanes=r,t}function wh(t,e,r){return t=Ur(6,t,null,e),t.lanes=r,t}function _h(t,e,r){return e=Ur(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function I3(t,e,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=r,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=ih(0),this.expirationTimes=ih(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ih(0),this.mutableSourceEagerHydrationData=null}function A3(t,e,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Fi,key:n==null?null:""+n,children:t,containerInfo:e,implementation:r}}function ku(t,e,r,n){var i=e.current,o=kr(),s=Zn(i);e:if(r){r=r._reactInternals;t:{if(qi(r)!==r||r.tag!==1)throw Error(me(170));var a=r;do{switch(a.tag){case 3:a=a.stateNode.context;break t;case 1:if(pr(a.type)){a=a.stateNode.__reactInternalMemoizedMergedChildContext;break t}}a=a.return}while(a!==null);throw Error(me(171))}if(r.tag===1){var l=r.type;if(pr(l)){r=tv(r,l,a);break e}}r=a}else r=ri;return e.context===null?e.context=r:e.pendingContext=r,e=Yn(o,s),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),Kn(i,e),Xn(i,s,o),s}function Sh(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function f1(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function Zd(t,e){f1(t,e),(t=t.alternate)&&f1(t,e)}function R3(){return null}function Xd(t,e,r){var n=r!=null&&r.hydrationOptions!=null&&r.hydrationOptions.mutableSources||null;if(r=new I3(t,e,r!=null&&r.hydrate===!0),e=Ur(3,null,null,e===2?7:e===1?3:0),r.current=e,e.stateNode=r,Pd(e),t[Qo]=r.current,Y1(t.nodeType===8?t.parentNode:t),n)for(t=0;t<n.length;t++){e=n[t];var i=e._getVersion;i=i(e._source),r.mutableSourceEagerHydrationData==null?r.mutableSourceEagerHydrationData=[e,i]:r.mutableSourceEagerHydrationData.push(e,i)}this._internalRoot=r}Xd.prototype.render=function(t){ku(t,this._internalRoot,null,null)};Xd.prototype.unmount=function(){var t=this._internalRoot,e=t.containerInfo;ku(null,t,null,function(){e[Qo]=null})};function Pa(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function D3(t,e){if(e||(e=t?t.nodeType===9?t.documentElement:t.firstChild:null,e=!(!e||e.nodeType!==1||!e.hasAttribute("data-reactroot"))),!e)for(var r;r=t.lastChild;)t.removeChild(r);return new Xd(t,0,e?{hydrate:!0}:void 0)}function zu(t,e,r,n,i){var o=r._reactRootContainer;if(o){var s=o._internalRoot;if(typeof i=="function"){var a=i;i=function(){var h=Sh(s);a.call(h)}}ku(e,s,t,i)}else{if(o=r._reactRootContainer=D3(r,n),s=o._internalRoot,typeof i=="function"){var l=i;i=function(){var h=Sh(s);l.call(h)}}Dv(function(){ku(e,s,t,i)})}return Sh(s)}N1=function(t){if(t.tag===13){var e=kr();Xn(t,4,e),Zd(t,4)}};bd=function(t){if(t.tag===13){var e=kr();Xn(t,67108864,e),Zd(t,67108864)}};I1=function(t){if(t.tag===13){var e=kr(),r=Zn(t);Xn(t,r,e),Zd(t,r)}};A1=function(t,e){return e()};Dh=function(t,e,r){switch(e){case"input":if(Oh(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var i=Pu(n);if(!i)throw Error(me(90));g1(n),Oh(n,i)}}}break;case"textarea":m1(t,r);break;case"select":e=r.value,e!=null&&Uo(t,!!r.multiple,e,!1)}};wd=Rv;O1=function(t,e,r,n,i){var o=Ae;Ae|=4;try{return Bi(98,t.bind(null,e,r,n,i))}finally{Ae=o,Ae===0&&(rs(),_n())}};_d=function(){(Ae&49)===0&&(v3(),si())};x1=function(t,e){var r=Ae;Ae|=2;try{return t(e)}finally{Ae=r,Ae===0&&(rs(),_n())}};function Uv(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Pa(e))throw Error(me(200));return A3(t,e,null,r)}var F3={Events:[Fa,Lo,Pu,b1,E1,si,{current:!1}]},Qs={findFiberByHostInstance:Li,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},C3={bundleType:Qs.bundleType,version:Qs.version,rendererPackageName:Qs.rendererPackageName,rendererConfig:Qs.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Wi.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=k1(t),t===null?null:t.stateNode},findFiberByHostInstance:Qs.findFiberByHostInstance||R3,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&(ea=__REACT_DEVTOOLS_GLOBAL_HOOK__,!ea.isDisabled&&ea.supportsFiber))try{Dd=ea.inject(C3),ji=ea}catch{}var ea;Wr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=F3;Wr.createPortal=Uv;Wr.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(me(188)):Error(me(268,Object.keys(t)));return t=k1(e),t=t===null?null:t.stateNode,t};Wr.flushSync=function(t,e){var r=Ae;if((r&48)!==0)return t(e);Ae|=1;try{if(t)return Bi(99,t.bind(null,e))}finally{Ae=r,_n()}};Wr.hydrate=function(t,e,r){if(!Pa(e))throw Error(me(200));return zu(null,t,e,!0,r)};Wr.render=function(t,e,r){if(!Pa(e))throw Error(me(200));return zu(null,t,e,!1,r)};Wr.unmountComponentAtNode=function(t){if(!Pa(t))throw Error(me(40));return t._reactRootContainer?(Dv(function(){zu(null,null,t,!1,function(){t._reactRootContainer=null,t[Qo]=null})}),!0):!1};Wr.unstable_batchedUpdates=Rv;Wr.unstable_createPortal=function(t,e){return Uv(t,e,2<arguments.length&&arguments[2]!==void 0?arguments[2]:null)};Wr.unstable_renderSubtreeIntoContainer=function(t,e,r,n){if(!Pa(r))throw Error(me(200));if(t==null||t._reactInternals===void 0)throw Error(me(38));return zu(t,e,r,!1,n)};Wr.version="17.0.2"});var Wv=Te((lI,Vv)=>{"use strict";function zv(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(zv)}catch(t){console.error(t)}}zv(),Vv.exports=Bv()});var Ma=Te(Qv=>{var V3={debug:!1,protocol:"http",host:"localhost",port:8080,socket_protocol:"ws",hotreload:5e3,python:void 0,python_node:7001,startpage:"src/index.html",errpage:"src/other/404.html",certpath:"node_server/ssl/cert.pem",keypath:"node_server/ssl/key.pem",dataserver:"http://localhost:4000",realmapp:"buckleup-ilscy",googleclientid:"406817559914-boi30d05dk9jtj55frgi1dg8gkp6rrj9.apps.googleusercontent.com"};Qv.settings=V3});var tw,rw,ew,nw=at(()=>{tw=At(Ma()),ew={log:console.log,gAuth:new Promise(t=>rw=t)};Object.keys(ew).forEach(t=>{window[t]=ew[t]});(function(){if(location.hostname==="localhost"&&location.port!=="4000")return;function e(){gapi.load("auth2",()=>{gapi.auth2.init({client_id:tw.settings.googleclientid,scope:"https://www.googleapis.com/auth/drive"}).then(i=>{rw(()=>i)},i=>{console.log("UNHANDLED"),console.error(i)})})}let r=document.createElement("script");r.type="text/javascript",r.src="https://apis.google.com/js/platform.js",r.onload=e,document.head.appendChild(r)})()});var ow=Te(iw=>{"use strict";Object.defineProperty(iw,"__esModule",{value:!0})});var e0=Te(Ve=>{"use strict";Object.defineProperty(Ve,"__esModule",{value:!0});Ve.arrHas=Ve.arrLast=Ve.arrToBoolDict=Ve.arrToIdxDict=Ve.arrToDict=Ve.arrRemoveValues=Ve.arrReplace=Ve.arrDeepFlatten=Ve.arrFlatten=Ve.arrDivide=Ve.arrGetByIds=Ve.arrRemoveById=Ve.arrGen=void 0;var li=Jt(),W3=(t,e=void 0)=>t<1?[]:Array(t).fill(e);Ve.arrGen=W3;function q3(t,e,r="id"){let n=sw(t,r),i=li.objRemoveKeys(n,e);return li.objVals(i)}Ve.arrRemoveById=q3;function $3(t,e,r="id"){let n=aw(e);return t.filter(i=>n[i[r]])}Ve.arrGetByIds=$3;function H3(t,e){let r=Math.ceil(t.length/e)||0,n=Ve.arrGen(r).map(()=>[]);return t.forEach((i,o)=>n[Math.floor(o/e)].push(i)),n}Ve.arrDivide=H3;function J3(t){return[].concat.apply([],t)}Ve.arrFlatten=J3;var G3=t=>t.reduce((e,r)=>e.concat(li.isType(r,"array")?Ve.arrDeepFlatten(r):r),[]);Ve.arrDeepFlatten=G3;function Y3(t){let e=[...t];return{all:r=>{let n=[];return t.forEach((i,o)=>li.equal(r,i)?n[o]=o:null),{with:i=>n.length?(n.forEach(o=>e[o]=i),e):t}},first:r=>{let n=t.findIndex(i=>li.equal(r,i));return{with:i=>li.nonValue(n)?t:(e[n]=i,e)}}}}Ve.arrReplace=Y3;function K3(t,e){let r=[...t];return e.forEach(n=>r=r.filter(i=>!li.equal(i,n))),r}Ve.arrRemoveValues=K3;function sw(t,e){let r={};return t.forEach(n=>r[n[e]]=n),r}Ve.arrToDict=sw;function Z3(t){let e={};return t.forEach((r,n)=>e[r]=n+""),e}Ve.arrToIdxDict=Z3;function aw(t){let e={};return t.forEach(r=>e[r]=!0),e}Ve.arrToBoolDict=aw;var X3=t=>t[t.length-1];Ve.arrLast=X3;function Q3(t,e,r=!1){let n=r?i=>li.equal(i,e):i=>i===e;return t.findIndex(n)!==-1}Ve.arrHas=Q3});var lw=Te(Vu=>{"use strict";Object.defineProperty(Vu,"__esModule",{value:!0});Vu.clone=void 0;function t0(t){let e,r,n,i,o,s,a;if(typeof t!="object"||t===null)return t;if(t instanceof Date)return new Date(t);if(r=Object.keys(t),n=r.length,Array.isArray(t)){for(s=new Array(n),i=0;i<n;i++)o=r[i],e=t[o],typeof e!="object"||e===null?s[o]=e:e instanceof Date?s[o]=new Date(e):s[o]=t0(e);return s}for(a={},i=0;i<n;i++)o=r[i],e=t[o],Object.hasOwnProperty.call(t,o)!==!1&&(typeof e!="object"||e===null?a[o]=e:e instanceof Date?a[o]=new Date(e):a[o]=t0(e));return a}Vu.clone=t0});var uw=Te(qu=>{"use strict";Object.defineProperty(qu,"__esModule",{value:!0});qu.equal=void 0;function Wu(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){if(t.constructor!==e.constructor)return!1;var r,n,i;if(Array.isArray(t)){if(r=t.length,r!==e.length)return!1;for(n=r;n--!==0;)if(!Wu(t[n],e[n]))return!1;return!0}if(t instanceof Map&&e instanceof Map){if(t.size!==e.size)return!1;for(n of t.entries())if(!e.has(n[0]))return!1;for(n of t.entries())if(!Wu(n[1],e.get(n[0])))return!1;return!0}if(t instanceof Set&&e instanceof Set){if(t.size!==e.size)return!1;for(n of t.entries())if(!e.has(n[0]))return!1;return!0}if(ArrayBuffer.isView(t)&&ArrayBuffer.isView(e)){if(r=t.length,r!=e.length)return!1;for(n=r;n--!==0;)if(t[n]!==e[n])return!1;return!0}if(t.constructor===RegExp)return t.source===e.source&&t.flags===e.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===e.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===e.toString();if(i=Object.keys(t),r=i.length,r!==Object.keys(e).length)return!1;for(n=r;n--!==0;)if(!Object.prototype.hasOwnProperty.call(e,i[n]))return!1;for(n=r;n--!==0;){var o=i[n];if(!(o==="_owner"&&t.$$typeof)&&!Wu(t[o],e[o]))return!1}return!0}return t!==t&&e!==e}qu.equal=Wu});var fw=Te(mt=>{"use strict";Object.defineProperty(mt,"__esModule",{value:!0});mt.promiseOut=mt.debounceTimeOut=mt.randomColorHex=mt.uuid=mt.assertType=mt.type=mt.cloneLog=mt.unsubAll=mt.wait=mt.interval=void 0;var Ln=Jt(),ex=(t,e,r)=>{if(Ln.isType(r,"number")&&r<1)throw Error(`argument "times" can't be less than 1`);let n=0,i=()=>clearInterval(o),o=setInterval(()=>{t(n,i),n++,r&&n>=r&&i()},e);return{stop:i}};mt.interval=ex;var tx=t=>new Promise(e=>setTimeout(()=>e(),t));mt.wait=tx;var cw=(t,e="unsubscribe")=>Ln.isType(t,"object")&&Ln.hasKey(t,e)?t[e]():null;function rx(t,e="unsubscribe"){if(Ln.isType(t,"array"))t.forEach(r=>cw(r,e));else if(Ln.isType(t,"object"))Ln.objMap(t,({val:r})=>cw(r,e));else throw Error('argument "objOrArr" must be of type "object" or "array"')}mt.unsubAll=rx;var nx=t=>console.log(Ln.clone(t));mt.cloneLog=nx;function ix(t){return typeof t=="object"?Array.isArray(t)?"array":t===null?"null":"object":t!==t?"NaN":typeof t}mt.type=ix;function ox(t,e){Ln.isType(e,"array")||(e=[e]);for(let r of e)if(Ln.isType(t,r))return;throw Error(`value needs to be of type ${e.join(" || ")}`)}mt.assertType=ox;var sx=()=>{let t=new Date().getTime(),e=performance&&performance.now&&performance.now()*1e3||0;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,n=>{let i=Math.random()*16;return t>0?(i=(t+i)%16|0,t=Math.floor(t/16)):(i=(e+i)%16|0,e=Math.floor(e/16)),(n==="x"?i:i&3|8).toString(16)})};mt.uuid=sx;var ax=()=>"#"+((1<<24)*Math.random()|0).toString(16);mt.randomColorHex=ax;function lx(){let t=null;return(e,r)=>{t&&clearTimeout(t),e!=="cancel"&&(t=setTimeout(e,r||0))}}mt.debounceTimeOut=lx;function ux(){let t,e=new Promise(r=>t=r);return{resolve:t,promise:e}}mt.promiseOut=ux});var hw=Te($u=>{"use strict";Object.defineProperty($u,"__esModule",{value:!0});$u.iterate=void 0;var r0=e0();function cx(t,e,r){let n=(i,o=!1)=>{let s=[];for(let a=0;a<t;a++)if(!e)s.push(i({x:a}));else for(let l=0;l<e;l++)if(!r)s.push(i({x:a,y:l}));else for(let h=0;h<r;h++)s.push(i({x:a,y:l,z:h}));return o?r&&e?r0.arrDivide(s,e*r).map(l=>r0.arrDivide(l,r)):e?r0.arrDivide(s,e):s:s};return{for:i=>{n(i)},map:i=>n(i),nestedMap:i=>n(i,!0)}}$u.iterate=cx});var pw=Te(Ir=>{"use strict";Object.defineProperty(Ir,"__esModule",{value:!0});Ir.newNumFromRange=Ir.numberWithCommas=Ir.decPlace=Ir.average=Ir.rand=void 0;var dw=Jt(),fx=(t,e)=>Math.floor(Math.random()*(e+1-t))+t;Ir.rand=fx;var hx=t=>t.reduce((e=0,r=0)=>e+r,0)/t.length;Ir.average=hx;var dx=(t,e)=>parseFloat(t.toFixed(e));Ir.decPlace=dx;var px=t=>t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",");Ir.numberWithCommas=px;function gx(t,e,r){let n,i=0,o=dw.isType(t,"array")?dw.arrToBoolDict(t):{[t]:!0};do if(n=Ir.rand(e,r),i++,i>1e6)throw console.error("Check for infinite loops"),new Error("Looped 1 million times");while(o[n]);return n}Ir.newNumFromRange=gx});var gw=Te(ft=>{"use strict";Object.defineProperty(ft,"__esModule",{value:!0});ft.objPromiseAll=ft.objSortKeys=ft.objResolve=ft.objExtract=ft.objKeyVals=ft.objVals=ft.objKeys=ft.objRemoveKeys=ft.objFilter=ft.objMap=void 0;function yx(t,e){let r={};for(let n in t)r[n]=e({key:n,val:t[n]});return r}ft.objMap=yx;function mx(t,e){let r=Object.assign({},t);for(let n in t)e({key:n,val:t[n]})||delete r[n];return r}ft.objFilter=mx;function vx(t,e){let r=Object.assign({},t);return e.forEach(n=>delete r[n]),r}ft.objRemoveKeys=vx;function Hu(t){if(Object.keys)return Object.keys(t);let e=[];for(let r in t)e.push(r);return e}ft.objKeys=Hu;var wx=t=>Object.values?Object.values(t):Hu(t).map(e=>t[e]);ft.objVals=wx;var _x=t=>Hu(t).map(e=>({key:e,val:t[e]}));ft.objKeyVals=_x;function Sx(t,e){let r={};return e.forEach(n=>r[n]=t[n]),r}ft.objExtract=Sx;var bx=(t,e)=>e.split(".").reduce((r,n)=>r[n],t);ft.objResolve=bx;var Ex=(t,e)=>{let r={};return Hu(t).sort(e).map(i=>r[i]=t[i]),r};ft.objSortKeys=Ex;function Ox(t){let e=ft.objKeyVals(t),r=e.length,n={},i=0;return new Promise(o=>e.forEach(({key:s,val:a})=>a.then(l=>{n[s]=l,i++,r===i&&o(n)})))}ft.objPromiseAll=Ox});var yw=Te(ui=>{"use strict";Object.defineProperty(ui,"__esModule",{value:!0});ui.minAppend=ui.strRemove=ui.strIncludes=void 0;var xx=(t,e)=>t.indexOf(e)!==-1;ui.strIncludes=xx;var Tx=(t,e)=>t.replace(new RegExp(e,"g"),"");ui.strRemove=Tx;var kx=(t,e,r="0")=>(r.repeat(e-1)+t).slice(-e);ui.minAppend=kx});var vw=Te(vt=>{"use strict";Object.defineProperty(vt,"__esModule",{value:!0});vt.isValidEmail=vt.nonValue=vt.nullOrEmpty=vt.isType=vt.hasKeys=vt.hasKey=vt.equalAny=void 0;var Nx=Jt(),mw=Jt(),Ix=(t,e)=>!!e.find(r=>Nx.equal(t,r));vt.equalAny=Ix;var Ax=(t,e)=>vt.isType(t,"object")&&t.hasOwnProperty(e);vt.hasKey=Ax;function Rx(t,e){if(!vt.isType(t,"object"))return!1;for(let r of e)if(!t.hasOwnProperty(r))return!1;return!0}vt.hasKeys=Rx;var Dx=(t,e)=>mw.type(t)===e;vt.isType=Dx;function Fx(t){return vt.nonValue(t)?!0:vt.isType(t,"string")||vt.isType(t,"array")?!t.length:vt.isType(t,"object")?!mw.objVals(t).length:!1}vt.nullOrEmpty=Fx;var Cx=t=>t==null;vt.nonValue=Cx;var Lx=t=>/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(t);vt.isValidEmail=Lx});var ww=Te(_e=>{"use strict";Object.defineProperty(_e,"__esModule",{value:!0});_e.yearStartEnd=_e.monthStartEnd=_e.weekStartEnd=_e.getDayStartEnd=_e.wks=_e.weeks=_e.dys=_e.days=_e.hrs=_e.hours=_e.min=_e.minutes=_e.sec=_e.seconds=_e.msTimeObj=_e.msToTime=_e.msToWks=_e.msToDys=_e.msToHrs=_e.msToMin=_e.msToSec=_e.dateTimeToString=_e.weekTuple=_e.msTime=void 0;var Ju=Jt();_e.msTime={s:1e3,m:6e4,h:36e5,d:864e5,w:6048e5};_e.weekTuple=["sun","mon","tue","wed","thu","fri","sat"];function Px(t=new Date){let e=("0"+t.getHours()).slice(-2),r=("0"+t.getMinutes()).slice(-2),n=("0"+t.getSeconds()).slice(-2),i=("00"+t.getMilliseconds()).slice(-3);return`${e}:${r}:${n}:${i}`}_e.dateTimeToString=Px;var Mx=t=>t/_e.msTime.s;_e.msToSec=Mx;var jx=t=>t/_e.msTime.m;_e.msToMin=jx;var Ux=t=>t/_e.msTime.h;_e.msToHrs=Ux;var Bx=t=>t/_e.msTime.d;_e.msToDys=Bx;var zx=t=>t/_e.msTime.w;_e.msToWks=zx;function Vx(t,e=!1){let r=t%1e3,n=Math.floor(t/1e3),i=Math.floor(n/60);n=n%60;let o=Math.floor(i/60);i=i%60;let s=Math.floor(o/24);o=o%24;let a=("00"+s).slice(-3),l=("0"+o).slice(-2),h=("0"+i).slice(-2),g=("0"+n).slice(-2),m=("00"+r).slice(-3);return e?{d:s,h:o,m:i,s:n,ms:r}:`${s?a+":":""}${l}:${h}:${g}:${m}`}_e.msToTime=Vx;function Wx(t,e=!1){let r=t%1e3,n=Math.floor(t/1e3),i=Math.floor(n/60);n=n%60;let o=Math.floor(i/60);i=i%60;let s=Math.floor(o/24);return o=o%24,e?{d:s,h:o,m:i,s:n,ms:r}:{d:("00"+s).slice(-3),h:("0"+o).slice(-2),m:("0"+i).slice(-2),s:("0"+n).slice(-2),ms:("00"+r).slice(-3)}}_e.msTimeObj=Wx;var qx=t=>t*_e.msTime.s;_e.seconds=qx;_e.sec=_e.seconds;var $x=t=>t*_e.msTime.m;_e.minutes=$x;_e.min=_e.minutes;var Hx=t=>t*_e.msTime.h;_e.hours=Hx;_e.hrs=_e.hours;var Jx=t=>t*_e.msTime.d;_e.days=Jx;_e.dys=_e.days;var Gx=t=>t*_e.msTime.w;_e.weeks=Gx;_e.wks=_e.weeks;function Yx(t,e="local"){Ju.isType(t,"number")&&(t=new Date(t));let r=t.getFullYear(),n=t.getMonth(),i=t.getDate(),o=new Date(r,n,i),s=new Date(r,n,i,23,59,59,999);if(e==="unix"){let a=_e.min(o.getTimezoneOffset());o=new Date(o.getTime()+a),s=new Date(s.getTime()+a)}return{start:o,end:s}}_e.getDayStartEnd=Yx;function Kx(t,e="sun",r="local"){Ju.isType(t,"number")&&(t=new Date(t));let i=t.getDay()*-1+(e==="mon"?1:0),o=6+i,s=new Date(t.getTime()+_e.days(i)),a=new Date(t.getTime()+_e.days(o)),l=new Date(s.getFullYear(),s.getMonth(),s.getDate()),h=new Date(a.getFullYear(),a.getMonth(),a.getDate(),23,59,59,999);if(r==="unix"){let g=_e.min(l.getTimezoneOffset());l=new Date(l.getTime()+g),h=new Date(h.getTime()+g)}return{start:l,end:h}}_e.weekStartEnd=Kx;function Zx(t,e="local"){Ju.isType(t,"number")&&(t=new Date(t));let r=t.getFullYear(),n=t.getMonth(),i=new Date(r,n,1),o=new Date(r,n,0,23,59,59,999);if(e==="unix"){let s=_e.min(i.getTimezoneOffset());i=new Date(i.getTime()+s),o=new Date(o.getTime()+s)}return{start:i,end:o}}_e.monthStartEnd=Zx;function Xx(t,e="local"){Ju.isType(t,"number")&&(t=new Date(t));let r=t.getFullYear(),n=new Date(r,0,1),i=new Date(r,12,0,23,59,59,999);if(e==="unix"){let o=_e.min(n.getTimezoneOffset());n=new Date(n.getTime()+o),i=new Date(i.getTime()+o)}return{start:n,end:i}}_e.yearStartEnd=Xx});var Jt=Te(Gt=>{"use strict";var Qx=Gt&&Gt.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),en=Gt&&Gt.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&Qx(e,t,r)};Object.defineProperty(Gt,"__esModule",{value:!0});en(ow(),Gt);en(e0(),Gt);en(lw(),Gt);en(uw(),Gt);en(fw(),Gt);en(hw(),Gt);en(pw(),Gt);en(gw(),Gt);en(yw(),Gt);en(vw(),Gt);en(ww(),Gt)});var _w,Sw,bw,Ew=at(()=>{_w=class{constructor(e=!1,r=!1){this.debug=e,this.listeners=[],this.synchronous=r,this.syncInterval="FRAMERATE",this.syncAnim=void 0,r===!0&&this.startSync()}addListener(e=null,r,n=void 0,i=void 0,o=void 0,s=this.debug,a=!0){if(r===void 0){console.error("You must assign an object");return}var l=e;l==null&&(l=Math.floor(Math.random()*1e5)),this.synchronous===!0&&(a=!1);var h={key:l,listener:new Sw(r,n,i,o,s,a)};this.listeners.push(h)}getListener(e){return this.listeners.find((n,i)=>{if(n.key===e)return!0})}hasKey(e){var r=!1;return this.listeners.forEach((n,i)=>{if(n.key===e)return r=!0,!0}),r}getKeyIndices(e){var r=[];return this.listeners.find((n,i)=>{n.key===e&&r.push(i)}),r}onchange(e=null,r=null){if(e==null)this.listeners.forEach((i,o)=>{i.listener.onchange=r});else var n=this.listeners.find((i,o)=>{i.name===e&&(i.listener.onchange=r)})}addFunc=(e=null,r=null,n=!0)=>{var i=null;if(r!==null)if(e==null)this.listeners.forEach((s,a)=>{i=s.listener.addFunc(r),s.listener.running==!1&&n==!0&&s.listener.start()});else var o=this.listeners.find((s,a)=>{s.key===e&&(i=s.listener.addFunc(r),s.listener.running==!1&&n==!0&&s.listener.start())});return i};getFuncs=(e=void 0)=>{if(e){var r=this.listeners.find((n,i)=>{if(n.key===e)return!0});return r.onchangeFuncs}else return};removeFuncs=(e=null,r=null,n=!1)=>{if(e==null)this.listeners.forEach((o,s)=>{o.listener.removeFuncs(r)});else var i=this.listeners.find((o,s)=>{o.key===e&&(o.listener.removeFuncs(r),(o.listener.onchangeFuncs.length===0||n===!0)&&o.listener.stop())})};stop(e=null){if(this.synchronous&&this.stopSync(),e==null)this.listeners.forEach((n,i)=>{n.listener.stop()});else var r=this.listeners.find((n,i)=>{n.name===e&&n.listener.stop()})}start(e=null){if(this.synchronous&&this.stopSync(),e==null)this.listeners.forEach((n,i)=>{n.listener.start()});else var r=this.listeners.find((n,i)=>{n.name===e&&n.listener.start()})}startSync(){if(this.synchronous===!1){this.synchronous=!0,this.stop();let e=()=>{this.synchronous===!0&&(this.listeners.forEach(r=>{r.listener.check()}),this.syncInterval==="FRAMERATE"?this.syncAnim=requestAnimationFrame(e):typeof this.syncInterval=="number"&&setTimeout(e,this.syncInterval))};e()}}stopSync(){this.synchronous=!1,this.syncAnim&&cancelAnimationFrame(this.syncAnim)}remove(e=null){if(e==null)this.listeners.forEach(i=>{i.listener.stop()}),this.listeners.splice(0,this.listeners.length);else{var r=[],n=this.listeners.forEach((i,o)=>{i.key===e&&r.push(o)});r.reverse().forEach(i=>{this.listeners[i].listener.stop(),this.listeners.splice(i,1)})}}},Sw=class{constructor(e,r="__ANY__",n=this.onchange,i="FRAMERATE",o=!1,s=!0){this.debug=o,this.onchange=n,this.onchangeFuncs=[],this.object=e,this.propName=r,this.propOld=void 0,this.setListenerRef(r),this.running=s,this.funcs=0,this.interval,i<10?(this.interval=10,console.log("Min recommended interval set: 10ms")):this.interval=i,s===!0&&(typeof window>"u"?setTimeout(()=>{this.check()},60):this.checker=requestAnimationFrame(this.check))}onchange=e=>{console.log(this.propName," changed from: ",this.propOld," to: ",this.object[this.propName])};addFunc=(e=null)=>{let r=0;return e!==null&&(this.onchangeFuncs.push({idx:this.funcs,onchange:e}),r=this.funcs,this.funcs++),r};removeFuncs(e=null){let r=0;e===null?this.onchangeFuncs=[]:this.onchangeFuncs.find((n,i)=>{if(n.idx===e)return r=i,!0})!==void 0&&this.onchangeFuncs.splice(r,1)}onchangeMulti=e=>{[...this.onchangeFuncs].forEach((n,i)=>{this.debug===!0&&console.log(n.onchange),n.onchange(e)})};setListenerRef=e=>{e==="__ANY__"||e===null||e===void 0?this.propOld=JSON.stringifyFast(this.object):Array.isArray(this.object[e])?this.propOld=JSON.stringifyFast(this.object[e].slice(this.object[e].length-20)):typeof this.object[e]=="object"?this.propOld=JSON.stringifyFast(this.object[e]):typeof this.object[e]=="function"?this.propOld=this.object[e].toString():this.propOld=this.object[e],this.debug===!0&&console.log("propname",e,", new assignment: ",this.propOld)};check=()=>{let e=!1;if(this.propName==="__ANY__"||this.propName===null||this.propName===void 0)this.propOld!==JSON.stringifyFast(this.object)&&(this.debug===!0&&console.log("onchange: ",this.onchange),this.onchange(this.object),this.onchangeFuncs.length>0&&this.onchangeMulti(this.object),this.setListenerRef(this.propName),e=!0);else if(Array.isArray(this.object[this.propName]))this.propOld!==JSON.stringifyFast(this.object[this.propName].slice(this.object[this.propName].length-20))&&(this.debug===!0&&console.log("onchange: ",this.onchange),this.onchange(this.object[this.propName]),this.onchangeFuncs.length>0&&this.onchangeMulti(this.object[this.propName]),this.setListenerRef(this.propName),e=!0);else if(typeof this.object[this.propName]=="object"){let r=JSON.stringifyFast(this.object[this.propName]);this.propOld!==r&&(this.debug===!0&&console.log("onchange: ",this.onchange),this.onchange(this.object[this.propName]),this.onchangeFuncs.length>0&&this.onchangeMulti(this.object[this.propName]),this.setListenerRef(this.propName),e=!0)}else typeof this.object[this.propName]=="function"?this.propOld!==this.object[this.propName].toString()&&(this.debug===!0&&console.log("onchange: ",this.onchange),this.onchange(this.object[this.propName].toString()),this.onchangeFuncs.length>0&&this.onchangeMulti(this.object[this.propName].toString()),this.setListenerRef(this.propName),e=!0):this.object[this.propName]!==this.propOld&&(this.debug===!0&&console.log("onchange: ",this.onchange),this.onchange(this.object[this.propName]),this.onchangeFuncs.length>0&&this.onchangeMulti(this.object[this.propName]),this.setListenerRef(this.propName),e=!0);return this.running===!0&&(this.debug===!0&&console.log("checking",this.object,this.propName),this.interval==="FRAMERATE"?typeof window>"u"?setTimeout(()=>{this.check()},16):this.checker=requestAnimationFrame(this.check):setTimeout(()=>{this.check()},this.interval)),e};start(){this.running=!0,typeof window>"u"?setTimeout(()=>{this.check()},16):this.checker=requestAnimationFrame(this.check)}stop(){this.running=!1,cancelAnimationFrame(this.checker)}};JSON.stringifyFast===void 0&&(JSON.stringifyFast=function(){let t=new Map,e=[],r=["this"];function n(){t.clear(),e.length=0,r.length=1}function i(s,a){var l=e.length-1;if(e[l]){var h=e[l];if(typeof h=="object")if(h[s]===a||l===0)r.push(s),e.push(a.pushed);else for(;l-->=0;){if(h=e[l],typeof h=="object"&&h[s]===a){l+=2,e.length=l,r.length=l,--l,e[l]=a,r[l]=s;break}l--}}}function o(s,a){let l;if(a!=null)if(typeof a=="object"){let h=a.constructor.name;s&&h==="Object"&&i(s,a);let g=t.get(a);if(g)return"[Circular Reference]"+g;if(t.set(a,r.join(".")),h==="Array")a.length>20?l=a.slice(a.length-20):l=a;else if(h.includes("Set"))l=Array.from(a);else if(h!=="Object"&&h!=="Number"&&h!=="String"&&h!=="Boolean")l="instanceof_"+h;else if(h==="Object"){let m={};for(let p in a)if(a[p]==null)m[p]=a[p];else if(Array.isArray(a[p]))a[p].length>20?m[p]=a[p].slice(a[p].length-20):m[p]=a[p];else if(a[p].constructor.name==="Object"){m[p]={};for(let w in a[p])if(Array.isArray(a[p][w]))a[p][w].length>20?m[p][w]=a[p][w].slice(a[p][w].length-20):m[p][w]=a[p][w];else if(a[p][w]!=null){let b=a[p][w].constructor.name;b.includes("Set")?m[p][w]=Array.from(a[p][w]):b!=="Number"&&b!=="String"&&b!=="Boolean"?m[p][w]="instanceof_"+b:m[p][w]=a[p][w]}else m[p][w]=a[p][w]}else{let w=a[p].constructor.name;w.includes("Set")?m[p]=Array.from(a[p]):w!=="Number"&&w!=="String"&&w!=="Boolean"?m[p]="instanceof_"+w:m[p]=a[p]}l=m}else l=a}else l=a;return l}return function(a,l){e.push(a);let h=JSON.stringify(a,o,l);return n(),h}}());JSON.stringifyWithCircularRefs===void 0&&(JSON.stringifyWithCircularRefs=function(){let t=new Map,e=[],r=["this"];function n(){t.clear(),e.length=0,r.length=1}function i(s,a){var l=e.length-1,h=e[l];if(h[s]===a||l===0)r.push(s),e.push(a);else for(;l-->=0;)if(h=e[l],h[s]===a){l+=2,e.length=l,r.length=l,--l,e[l]=a,r[l]=s;break}}function o(s,a){if(a!=null&&typeof a=="object"){s&&i(s,a);let l=t.get(a);if(l)return"[Circular Reference]"+l;t.set(a,r.join("."))}return a}return function(a,l){try{return e.push(a),JSON.stringify(a,o,l)}finally{n()}}}());bw=_w});var n0,Ow=at(()=>{Ew();n0=class{constructor(e={},r="FRAMERATE",n=!0){this.data=e,this.interval=r,this.pushToState={},this.pushRecord={pushed:[]},this.pushCallbacks={},this.triggers={},this.prev={},this.listener=new bw,this.defaultStartListenerEventLoop=n}subscribe(e,r,n=this.defaultStartListenerEventLoop){if(e&&e!=="state")if(this.data[e]===void 0)this.addToState(e,null,r,n);else return this.addSecondaryKeyResponse(e,r,void 0,n);else return this.addSecondaryKeyResponse(e,r,void 0,n)}subscribeOnce(e=void 0,r=n=>{}){let n,i=o=>{r(o),this.unsubscribe(e,n)};n=this.subscribe(e,i)}unsubscribe(e,r=null){r!==null?this.removeSecondaryKeyResponse(e,r,!0):console.error("Specify a subcription function index")}unsubscribeAll(e){this.unsubscribeAllSequential(e),this.unsubscribeAllTriggers(e),this.clearAllKeyResponses(e),this.data[e]&&delete this.data[e],this.listener.hasKey("pushToState")&&this.setSequentialState({stateRemoved:e})}setInterval(e="FRAMERATE"){this.interval=e,this.listener.listeners.forEach((r,n)=>{r.interval=this.interval})}updateState(e,r){this.data[e]==null?this.addToState(e,r):this.data[e]=r}setupSynchronousUpdates=()=>{if(!this.listener.hasKey("pushToState")){let e=()=>{if(Object.keys(this.pushToState).length>0){Object.assign(this.data,this.pushToState);for(let r of Object.getOwnPropertyNames(this.pushToState))delete this.pushToState[r]}};this.listener.addListener("pushToState",this.pushToState,"__ANY__",e,this.interval),this.addToState("pushRecord",this.pushRecord,r=>{let n=r.pushed.length;for(let i=0;i<n;i++){let o=r.pushed[i];this.pushCallbacks.state&&this.pushCallbacks.state.forEach(s=>{s.onchange(o)});for(let s in o)this.pushCallbacks[s]&&this.pushCallbacks[s].forEach(a=>{typeof a=="object"&&a.onchange(o[s])})}this.pushRecord.pushed.splice(0,n)})}};addToState(e,r,n=null,i=this.defaultStartListenerEventLoop,o=!1){if(!this.listener.hasKey("pushToState")&&this.defaultStartListenerEventLoop&&this.setupSynchronousUpdates(),this.data[e]=r,this.setSequentialState({stateAdded:e}),n!==null)return this.addSecondaryKeyResponse(e,n,o,i)}get(e){return this.data[e]}getState(){return JSON.parse(JSON.stringifyFast(this.data))}setState(e={},r=!1){if(!this.listener.hasKey("pushToState")&&this.defaultStartListenerEventLoop&&(this.setupSynchronousUpdates(),this.pushRecord.pushed.push(JSON.parse(JSON.stringifyWithCircularRefs(e)))),e.stateUpdateTimeStamp=Date.now(),r){for(let n in e)if(n in this.pushToState){if(Array.isArray(this.pushToState[n])&&Array.isArray(e[n]))e[n]=this.pushToState[n].push(...e[n]);else if(typeof this.pushToState[n]=="object"&&typeof e[n]=="object"){for(let i in e[n])if(this.pushToState[n][i]){if(Array.isArray(this.pushToState[n][i])&&Array.isArray(e[n][i]))e[n][i]=this.pushToState[n][i].push(...e[n][i]);else if(typeof this.pushToState[n][i]=="object"&&typeof e[n][i]=="object"){for(let o in e[n][i])if(this.pushToState[n][i][o])Array.isArray(this.pushToState[n][i][o])&&Array.isArray(e[n][i][o])&&(e[n][i][o]=this.pushToState[n][i][o].push(...e[n][i][o]));else if(typeof this.pushToState[n][i][o]=="object"&&typeof e[n][i][o]=="object")for(let s in e[n][i][o])this.pushToState[n][i][o][s]&&Array.isArray(this.pushToState[n][i][o][s])&&Array.isArray(e[n][i][o][s])&&(e[n][i][o][s]=this.pushToState[n][i][o][s].push(...e[n][i][o][s]))}}}}}if(Object.assign(this.pushToState,e),Object.keys(this.triggers).length>0){this.triggers.state&&this.triggers.state.forEach(n=>{n.onchange(this.data)});for(let n of Object.getOwnPropertyNames(this.triggers))n in this.pushToState&&(this.data[n]=this.pushToState[n],delete this.pushToState[n],this.triggers[n].forEach(i=>{i.onchange(this.data[n])}))}return this.pushToState}subscribeTrigger(e=void 0,r=n=>{}){if(e){this.triggers[e]||(this.triggers[e]=[]);let n=this.triggers[e].length;return this.triggers[e].push({idx:n,onchange:r}),this.triggers[e].length-1}else return}subscribeTriggerOnce(e=void 0,r=n=>{}){let n,i=o=>{r(o),this.unsubscribeTrigger(e,n)};n=this.subscribeTrigger(e,i)}unsubscribeTrigger(e=void 0,r=0){let n,i=this.triggers[e];i&&i.find(s=>{if(s.idx===r)return!0})&&i.splice(n,1)}unsubscribeAllTriggers(e){e&&this.triggers[e]&&delete this.triggers[e]}setSequentialState(e={}){this.listener.hasKey("pushToState")||this.setupSynchronousUpdates(),e.stateUpdateTimeStamp=Date.now(),this.pushRecord.pushed.push(JSON.parse(JSON.stringify(e)))}subscribeSequential(e=void 0,r=void 0){if(e)if(this.data[e]===void 0&&e!=="state"&&this.addToState(e,null,void 0),this.pushCallbacks[e]||(this.pushCallbacks[e]=[]),r){let n=this.pushCallbacks[e].length;return this.pushCallbacks[e].push({idx:n,onchange:r}),this.pushCallbacks[e].length-1}else return;else return}subscribeSequentialOnce(e=void 0,r=n=>{}){let n,i=o=>{r(o),this.unsubscribeSequential(e,n)};n=this.subscribeSequential(e,i)}unsubscribeSequential(e=void 0,r=0){e&&this.pushCallbacks[e]&&this.pushCallbacks[e].find((n,i)=>{if(n.idx===r)return this.pushCallbacks[e].splice(i,1),!0})}unsubscribeAllSequential(e){e&&this.pushCallbacks[e]&&this.pushCallbacks[e]&&delete this.pushCallbacks[e]}setPrimaryKeyResponse(e=null,r=null,n=!1,i=this.defaultStartListenerEventLoop){if(r!==null)if(this.listener.hasKey(e))this.listener.onchange(e,r);else if(e!=null&&e!=="state")this.listener.addListener(e,this.data,e,r,this.data.stateUpdateInterval,n,i);else{if(!this.listener.hasKey("state")){let o=()=>{this.prev=Object.assign({},this.data)};this.listener.addListener("state",this.data,"__ANY__",o,this.interval)}return this.listener.addFunc("state",r)}}addSecondaryKeyResponse=(e=null,r=null,n=!1,i=this.defaultStartListenerEventLoop)=>{if(r!=null){if(this.listener.hasKey(e))return this.listener.addFunc(e,r);if(e!=null&&e!=="state")return this.listener.addListener(e,this.data,e,()=>{},this.data.stateUpdateInterval,n,i),this.listener.addFunc(e,r);if(!this.listener.hasKey("state")){let o=()=>{this.prev=Object.assign({},this.data)};this.listener.addListener("state",this.data,"__ANY__",o,this.interval)}return this.listener.addFunc("state",r)}};removeSecondaryKeyResponse(e=null,r=null,n=!0){e!==null?this.listener.hasKey(e)?this.listener.removeFuncs(e,r,n):console.error("key does not exist"):console.error("provide key")}clearAllKeyResponses(e=null){e===null?this.listener.remove(null):this.listener.hasKey(e)&&this.listener.remove(e)}getKeySubCallbacks(e){return this.listener.getFuncs(e)}removeState=this.unsubscribeAll;runSynchronousListeners(){this.defaultStartListenerEventLoop=!1,this.listener.startSync()}stop(e=null){this.listener.stop(e)}};JSON.stringifyFast===void 0&&(JSON.stringifyFast=function(){let t=new Map,e=[],r=["this"];function n(){t.clear(),e.length=0,r.length=1}function i(s,a){var l=e.length-1;if(e[l]){var h=e[l];if(typeof h=="object")if(h[s]===a||l===0)r.push(s),e.push(a.pushed);else for(;l-->=0;){if(h=e[l],typeof h=="object"&&h[s]===a){l+=2,e.length=l,r.length=l,--l,e[l]=a,r[l]=s;break}l++}}}function o(s,a){let l;if(a!=null)if(typeof a=="object"){let h=a.constructor.name;s&&h==="Object"&&i(s,a);let g=t.get(a);if(g)return"[Circular Reference]"+g;if(t.set(a,r.join(".")),h==="Array")a.length>20?l=a.slice(a.length-20):l=a;else if(h.includes("Set"))l=Array.from(a);else if(h!=="Object"&&h!=="Number"&&h!=="String"&&h!=="Boolean")l="instanceof_"+h;else if(h==="Object"){let m={};for(let p in a)if(a[p]==null)m[p]=a[p];else if(Array.isArray(a[p]))a[p].length>20?m[p]=a[p].slice(a[p].length-20):m[p]=a[p];else if(a[p].constructor.name==="Object"){m[p]={};for(let w in a[p])if(Array.isArray(a[p][w]))a[p][w].length>20?m[p][w]=a[p][w].slice(a[p][w].length-20):m[p][w]=a[p][w];else if(a[p][w]!=null){let b=a[p][w].constructor.name;b.includes("Set")?m[p][w]=Array.from(a[p][w]):b!=="Number"&&b!=="String"&&b!=="Boolean"?m[p][w]="instanceof_"+b:m[p][w]=a[p][w]}else m[p][w]=a[p][w]}else{let w=a[p].constructor.name;w.includes("Set")?m[p]=Array.from(a[p]):w!=="Number"&&w!=="String"&&w!=="Boolean"?m[p]="instanceof_"+w:m[p]=a[p]}l=m}else l=a}else l=a;return l}return function(a,l){e.push(a);let h=JSON.stringify(a,o,l);return n(),h}}());JSON.stringifyWithCircularRefs===void 0&&(JSON.stringifyWithCircularRefs=function(){let t=new Map,e=[],r=["this"];function n(){t.clear(),e.length=0,r.length=1}function i(s,a){var l=e.length-1,h=e[l];if(typeof h=="object")if(h[s]===a||l===0)r.push(s),e.push(a.pushed);else for(;l-->=0;){if(h=e[l],typeof h=="object"&&h[s]===a){l+=2,e.length=l,r.length=l,--l,e[l]=a,r[l]=s;break}l--}}function o(s,a){if(a!=null&&typeof a=="object"){s&&i(s,a);let l=t.get(a);if(l)return"[Circular Reference]"+l;t.set(a,r.join("."))}return a}return function(a,l){try{return e.push(a),JSON.stringify(a,o,l)}finally{n()}}}())});async function Tw(t="sessionName",e="data",r=0,n=5120,i=o=>{}){return t!=""?new Promise(async o=>{Ge.open("/"+e+"/"+t,"r",(s,a)=>{if(s)throw s;Ge.read(a,n,r,"utf-8",(l,h,g)=>{if(l)throw l;if(g!==0){let m=h.toString();Ge.close(a,()=>{i(m,t),o(m)})}else o(void 0)})})}):void console.error("Path name is not defined")}function a0(t=e=>{}){window.gapi.client.drive.files.list({q:"name='Brainsatplay_Data' and mimeType='application/vnd.google-apps.folder'"}).then(e=>{e.result.files.length===0&&this.createDriveFolder(),t&&t(e.result)})}function Iw(t=e=>{}){a0(e=>{window.gapi.client.drive.files.list({q:`'${e.files[0].id}' in parents`,pageSize:10,fields:"nextPageToken, files(id, name)"}).then(r=>{var n=r.result.files;n&&n.length>0&&t(n)})})}function l0(t){return!!t.match(l0.regex)}var ja,xw,UI,Ua,Gu,Ge,i0,o0,kw,Nw,is,s0,Hi,BI,zI,Rw,Dw,Fw,eT,Aw,VI,Cw=at(()=>{ja=class{constructor(e=this.onOpen,r=null,n=null){this.onOpen=e,this.notes=[{idx:0,text:"comment"}],r!==null&&document.getElementById(r).addEventListener("click",this.saveCSV),n!==null&&document.getElementById(n).addEventListener("click",this.openCSV)}processArraysForCSV(e=["1|2|3","3|2|1"],r="|",n="a,b,c",i=!1){let o=n+`
`,s=0;return e.forEach((a,l)=>{e[l]==="string"&&r!==","?o+=a.split(r).join(","):csvData+=a.join(","),i===!0&&this.notes[s].idx===l&&(a+=this.notes[s].text,s++),a.indexOf(`
`)<0&&(o+=`
`)}),o}static saveCSV(e=`a,b,c
1,2,3
3,2,1
`,r=new Date().toISOString()){var n=document.createElement("a");n.href="data:text/csv;charset=utf-8,"+encodeURI(e),n.target="_blank",n.download=r!==""?r+".csv":Date().toISOString()+".csv",n.click()}static openCSV(e=",",r=(n,i,o)=>o){var n=document.createElement("input");n.accept=".csv",n.type="file",n.onchange=i=>{var o=i.target.files[0],s=new FileReader;s.onload=a=>{var l=a.target.result.split(`
`);let h=[];var g=[];l.pop(),l.forEach((m,p)=>{if(p==0)h=m.split(e);else{var w=m.split(e);g.push(w)}}),r(g,h,n.value),n.value=""},s.readAsText(o)},n.click()}static openCSVRaw(e=(r,n)=>n){var r=document.createElement("input");r.accept=".csv",r.type="file",r.onchange=n=>{var i=n.target.files[0],o=new FileReader;o.onload=s=>{var a=s.target.result;e(a,r.value),r.value=""},o.readAsText(i)},r.click()}onOpen(e=[],r=[]){console.log("CSV Opened!",r,e)}},UI=Object.freeze({__proto__:null,CSV:ja,parseCSVData:(t,e,r,n=!0,i=(o,s,a)=>{let l={filename:a,head:s},h=s;typeof s=="string"&&(h=s.split(","));for(let g=0;g<o.length;g++){let m=o[g].split(",");for(let p=0;p<m.length;p++)l[h[p]]||l[h[p]],l[h[p]]=m[p]}return l})=>{let o=t.split(`
`);return o.shift(),n===!1&&o.pop(),i(o,e,r)},processDataForCSV:(t={})=>{let e="";typeof t.data[0]!="object"||Array.isArray(t.data[0])||(t.data[0].x?e="x,":t.data[0].timestamp&&(e="timestamp,localtime,"));let r=0,n={};t.data.forEach((s,a)=>{if(Array.isArray(s))for(let l=0;l<s.length;l++)n[l]||(n[l]=""),Array.isArray(s[l])?(l===0&&(e[r]+=t.header[r]+new Array(s[l].length-1).fill("").join(",")),n[l]+=s[l].join(",")+",",r+=s[l].length):(l===0&&(e[r]+=t.header[r]+","),n[l]+=s[l]+",",r++);else if(typeof s=="object"){let l;s.x?l=s.x:s.timestamp&&(l=s.timestamp);for(let h=0;h<l.length;h++){n[l[h]]||(n[l[h]]=l[h]+","),s.timestamp&&(n[l[h]]+=toISOLocal(s.timestamp[h])+",");for(let g in s)g!=="x"&&(n[l[h]]||(n[l[h]]=""),Array.isArray(s[g][h])?(h===0&&(e[r]+=t.header[r]+Array(s[g][h].length-1).fill("").join(",")),n[l[h]]+=s[g][h].join(",")+",",r+=s[g][h].length):(h===0&&(e[r]+=t.header[r]+","),n[l[h]]+=s[g][h]+",",r++))}}}),e.splice(e.length-1,1),e+=`
`;let i="";for(let s in n)n[s].splice(n[s].length-1,1),i+=n[s]+`
`;let o={filename:t.filename,header:e,body:i};return t.save&&ja.saveCSV(e+i,t.filename),t.write&&fs.exists(t.filename,s=>{s?appendFile(t.filename,i,t.dir):appendFile(t.filename,e+i,t.dir)}),o}}),Ua=(typeof globalThis<"u"||typeof window<"u"||(typeof global<"u"?global:typeof self<"u"),{exports:{}});xw=function(){return function(t){var e={};function r(n){if(e[n])return e[n].exports;var i=e[n]={exports:{},id:n,loaded:!1};return t[n].call(i.exports,i,i.exports,r),i.loaded=!0,i.exports}return r.m=t,r.c=e,r.p="",r(0)}([function(t,e,r){(function(n,i,o,s){Object.defineProperty(e,"__esModule",{value:!0});var a,l=r(2),h=r(9);(function(f){f[f.EPERM=1]="EPERM",f[f.ENOENT=2]="ENOENT",f[f.EIO=5]="EIO",f[f.EBADF=9]="EBADF",f[f.EACCES=13]="EACCES",f[f.EBUSY=16]="EBUSY",f[f.EEXIST=17]="EEXIST",f[f.ENOTDIR=20]="ENOTDIR",f[f.EISDIR=21]="EISDIR",f[f.EINVAL=22]="EINVAL",f[f.EFBIG=27]="EFBIG",f[f.ENOSPC=28]="ENOSPC",f[f.EROFS=30]="EROFS",f[f.ENOTEMPTY=39]="ENOTEMPTY",f[f.ENOTSUP=95]="ENOTSUP"})(a||(a={}));var g={};g[a.EPERM]="Operation not permitted.",g[a.ENOENT]="No such file or directory.",g[a.EIO]="Input/output error.",g[a.EBADF]="Bad file descriptor.",g[a.EACCES]="Permission denied.",g[a.EBUSY]="Resource busy or locked.",g[a.EEXIST]="File exists.",g[a.ENOTDIR]="File is not a directory.",g[a.EISDIR]="File is a directory.",g[a.EINVAL]="Invalid argument.",g[a.EFBIG]="File is too big.",g[a.ENOSPC]="No space left on disk.",g[a.EROFS]="Cannot modify a read-only file system.",g[a.ENOTEMPTY]="Directory is not empty.",g[a.ENOTSUP]="Operation is not supported.";var m,p=function(f){function c(u,d,y){d===void 0&&(d=g[u]),f.call(this,d),this.syscall="",this.errno=u,this.code=a[u],this.path=y,this.stack=new f().stack,this.message="Error: "+this.code+": "+d+(this.path?", '"+this.path+"'":"")}return f&&(c.__proto__=f),c.prototype=Object.create(f&&f.prototype),c.prototype.constructor=c,c.fromJSON=function(u){var d=new c(0);return d.errno=u.errno,d.code=u.code,d.path=u.path,d.stack=u.stack,d.message=u.message,d},c.fromBuffer=function(u,d){return d===void 0&&(d=0),c.fromJSON(JSON.parse(u.toString("utf8",d+4,d+4+u.readUInt32LE(d))))},c.FileError=function(u,d){return new c(u,g[u],d)},c.ENOENT=function(u){return this.FileError(a.ENOENT,u)},c.EEXIST=function(u){return this.FileError(a.EEXIST,u)},c.EISDIR=function(u){return this.FileError(a.EISDIR,u)},c.ENOTDIR=function(u){return this.FileError(a.ENOTDIR,u)},c.EPERM=function(u){return this.FileError(a.EPERM,u)},c.ENOTEMPTY=function(u){return this.FileError(a.ENOTEMPTY,u)},c.prototype.toString=function(){return this.message},c.prototype.toJSON=function(){return{errno:this.errno,code:this.code,path:this.path,stack:this.stack,message:this.message}},c.prototype.writeToBuffer=function(u,d){u===void 0&&(u=n.alloc(this.bufferSize())),d===void 0&&(d=0);var y=u.write(JSON.stringify(this.toJSON()),d+4);return u.writeUInt32LE(y,d),u},c.prototype.bufferSize=function(){return 4+n.byteLength(JSON.stringify(this.toJSON()))},c}(Error),w=Object.freeze({get ErrorCode(){return a},ErrorStrings:g,ApiError:p});(function(f){f[f.NOP=0]="NOP",f[f.THROW_EXCEPTION=1]="THROW_EXCEPTION",f[f.TRUNCATE_FILE=2]="TRUNCATE_FILE",f[f.CREATE_FILE=3]="CREATE_FILE"})(m||(m={}));var b,N=function f(c){if(this.flagStr=c,f.validFlagStrs.indexOf(c)<0)throw new p(a.EINVAL,"Invalid flag: "+c)};N.getFileFlag=function(f){return N.flagCache.hasOwnProperty(f)?N.flagCache[f]:N.flagCache[f]=new N(f)},N.prototype.getFlagString=function(){return this.flagStr},N.prototype.isReadable=function(){return this.flagStr.indexOf("r")!==-1||this.flagStr.indexOf("+")!==-1},N.prototype.isWriteable=function(){return this.flagStr.indexOf("w")!==-1||this.flagStr.indexOf("a")!==-1||this.flagStr.indexOf("+")!==-1},N.prototype.isTruncating=function(){return this.flagStr.indexOf("w")!==-1},N.prototype.isAppendable=function(){return this.flagStr.indexOf("a")!==-1},N.prototype.isSynchronous=function(){return this.flagStr.indexOf("s")!==-1},N.prototype.isExclusive=function(){return this.flagStr.indexOf("x")!==-1},N.prototype.pathExistsAction=function(){return this.isExclusive()?m.THROW_EXCEPTION:this.isTruncating()?m.TRUNCATE_FILE:m.NOP},N.prototype.pathNotExistsAction=function(){return(this.isWriteable()||this.isAppendable())&&this.flagStr!=="r+"?m.CREATE_FILE:m.THROW_EXCEPTION},N.flagCache={},N.validFlagStrs=["r","r+","rs","rs+","w","wx","w+","wx+","a","ax","a+","ax+"],function(f){f[f.FILE=32768]="FILE",f[f.DIRECTORY=16384]="DIRECTORY",f[f.SYMLINK=40960]="SYMLINK"}(b||(b={}));var O=function(f,c,u,d,y,v){if(d===void 0&&(d=new Date),y===void 0&&(y=new Date),v===void 0&&(v=new Date),this.size=c,this.atime=d,this.mtime=y,this.ctime=v,this.dev=0,this.ino=0,this.rdev=0,this.nlink=1,this.blksize=4096,this.uid=0,this.gid=0,this.birthtime=new Date(0),this.fileData=null,u)this.mode=u;else switch(f){case b.FILE:this.mode=420;break;case b.DIRECTORY:default:this.mode=511}this.blocks=Math.ceil(c/512),this.mode<4096&&(this.mode|=f)};O.fromBuffer=function(f){var c=f.readUInt32LE(0),u=f.readUInt32LE(4),d=f.readDoubleLE(8),y=f.readDoubleLE(16),v=f.readDoubleLE(24);return new O(61440&u,c,4095&u,new Date(d),new Date(y),new Date(v))},O.prototype.toBuffer=function(){var f=n.alloc(32);return f.writeUInt32LE(this.size,0),f.writeUInt32LE(this.mode,4),f.writeDoubleLE(this.atime.getTime(),8),f.writeDoubleLE(this.mtime.getTime(),16),f.writeDoubleLE(this.ctime.getTime(),24),f},O.prototype.clone=function(){return new O(61440&this.mode,this.size,4095&this.mode,this.atime,this.mtime,this.ctime)},O.prototype.isFile=function(){return(61440&this.mode)===b.FILE},O.prototype.isDirectory=function(){return(61440&this.mode)===b.DIRECTORY},O.prototype.isSymbolicLink=function(){return(61440&this.mode)===b.SYMLINK},O.prototype.chmod=function(f){this.mode=61440&this.mode|f},O.prototype.isSocket=function(){return!1},O.prototype.isBlockDevice=function(){return!1},O.prototype.isCharacterDevice=function(){return!1},O.prototype.isFIFO=function(){return!1};var I=function(f,c){return f};function D(f){if(f)return f;throw new p(a.EIO,"Initialize BrowserFS with a file system using BrowserFS.initialize(filesystem)")}function G(f,c){switch(typeof f){case"number":return f;case"string":var u=parseInt(f,8);return isNaN(u)?c:u;default:return c}}function q(f){if(f instanceof Date)return f;if(typeof f=="number")return new Date(1e3*f);throw new p(a.EINVAL,"Invalid time.")}function J(f){if(f.indexOf("\0")>=0)throw new p(a.EINVAL,"Path must be a string without null bytes.");if(f==="")throw new p(a.EINVAL,"Path must not be empty.");return h.resolve(f)}function C(f,c,u,d){switch(typeof f){case"object":return{encoding:f.encoding!==void 0?f.encoding:c,flag:f.flag!==void 0?f.flag:u,mode:G(f.mode,d)};case"string":return{encoding:f,flag:u,mode:d};default:return{encoding:c,flag:u,mode:d}}}function z(){}var S=function(){this.F_OK=0,this.R_OK=4,this.W_OK=2,this.X_OK=1,this.root=null,this.fdMap={},this.nextFd=100};S.prototype.initialize=function(f){if(!f.constructor.isAvailable())throw new p(a.EINVAL,"Tried to instantiate BrowserFS with an unavailable file system.");return this.root=f},S.prototype._toUnixTimestamp=function(f){if(typeof f=="number")return f;if(f instanceof Date)return f.getTime()/1e3;throw new Error("Cannot parse time: "+f)},S.prototype.getRootFS=function(){return this.root?this.root:null},S.prototype.rename=function(f,c,u){u===void 0&&(u=z);var d=I(u,1);try{D(this.root).rename(J(f),J(c),d)}catch(y){d(y)}},S.prototype.renameSync=function(f,c){D(this.root).renameSync(J(f),J(c))},S.prototype.exists=function(f,c){c===void 0&&(c=z);var u=I(c,1);try{return D(this.root).exists(J(f),u)}catch{return u(!1)}},S.prototype.existsSync=function(f){try{return D(this.root).existsSync(J(f))}catch{return!1}},S.prototype.stat=function(f,c){c===void 0&&(c=z);var u=I(c,2);try{return D(this.root).stat(J(f),!1,u)}catch(d){return u(d)}},S.prototype.statSync=function(f){return D(this.root).statSync(J(f),!1)},S.prototype.lstat=function(f,c){c===void 0&&(c=z);var u=I(c,2);try{return D(this.root).stat(J(f),!0,u)}catch(d){return u(d)}},S.prototype.lstatSync=function(f){return D(this.root).statSync(J(f),!0)},S.prototype.truncate=function(f,c,u){c===void 0&&(c=0),u===void 0&&(u=z);var d=0;typeof c=="function"?u=c:typeof c=="number"&&(d=c);var y=I(u,1);try{if(d<0)throw new p(a.EINVAL);return D(this.root).truncate(J(f),d,y)}catch(v){return y(v)}},S.prototype.truncateSync=function(f,c){if(c===void 0&&(c=0),c<0)throw new p(a.EINVAL);return D(this.root).truncateSync(J(f),c)},S.prototype.unlink=function(f,c){c===void 0&&(c=z);var u=I(c,1);try{return D(this.root).unlink(J(f),u)}catch(d){return u(d)}},S.prototype.unlinkSync=function(f){return D(this.root).unlinkSync(J(f))},S.prototype.open=function(f,c,u,d){var y=this;d===void 0&&(d=z);var v=G(u,420),_=I(d=typeof u=="function"?u:d,2);try{D(this.root).open(J(f),N.getFileFlag(c),v,function(A,P){P?_(A,y.getFdForFile(P)):_(A)})}catch(A){_(A)}},S.prototype.openSync=function(f,c,u){return u===void 0&&(u=420),this.getFdForFile(D(this.root).openSync(J(f),N.getFileFlag(c),G(u,420)))},S.prototype.readFile=function(f,c,u){c===void 0&&(c={}),u===void 0&&(u=z);var d=C(c,null,"r",null),y=I(u=typeof c=="function"?c:u,2);try{var v=N.getFileFlag(d.flag);return v.isReadable()?D(this.root).readFile(J(f),d.encoding,v,y):y(new p(a.EINVAL,"Flag passed to readFile must allow for reading."))}catch(_){return y(_)}},S.prototype.readFileSync=function(f,c){c===void 0&&(c={});var u=C(c,null,"r",null),d=N.getFileFlag(u.flag);if(!d.isReadable())throw new p(a.EINVAL,"Flag passed to readFile must allow for reading.");return D(this.root).readFileSync(J(f),u.encoding,d)},S.prototype.writeFile=function(f,c,u,d){u===void 0&&(u={}),d===void 0&&(d=z);var y=C(u,"utf8","w",420),v=I(d=typeof u=="function"?u:d,1);try{var _=N.getFileFlag(y.flag);return _.isWriteable()?D(this.root).writeFile(J(f),c,y.encoding,_,y.mode,v):v(new p(a.EINVAL,"Flag passed to writeFile must allow for writing."))}catch(A){return v(A)}},S.prototype.writeFileSync=function(f,c,u){var d=C(u,"utf8","w",420),y=N.getFileFlag(d.flag);if(!y.isWriteable())throw new p(a.EINVAL,"Flag passed to writeFile must allow for writing.");return D(this.root).writeFileSync(J(f),c,d.encoding,y,d.mode)},S.prototype.appendFile=function(f,c,u,d){d===void 0&&(d=z);var y=C(u,"utf8","a",420),v=I(d=typeof u=="function"?u:d,1);try{var _=N.getFileFlag(y.flag);if(!_.isAppendable())return v(new p(a.EINVAL,"Flag passed to appendFile must allow for appending."));D(this.root).appendFile(J(f),c,y.encoding,_,y.mode,v)}catch(A){v(A)}},S.prototype.appendFileSync=function(f,c,u){var d=C(u,"utf8","a",420),y=N.getFileFlag(d.flag);if(!y.isAppendable())throw new p(a.EINVAL,"Flag passed to appendFile must allow for appending.");return D(this.root).appendFileSync(J(f),c,d.encoding,y,d.mode)},S.prototype.fstat=function(f,c){c===void 0&&(c=z);var u=I(c,2);try{this.fd2file(f).stat(u)}catch(d){u(d)}},S.prototype.fstatSync=function(f){return this.fd2file(f).statSync()},S.prototype.close=function(f,c){var u=this;c===void 0&&(c=z);var d=I(c,1);try{this.fd2file(f).close(function(y){y||u.closeFd(f),d(y)})}catch(y){d(y)}},S.prototype.closeSync=function(f){this.fd2file(f).closeSync(),this.closeFd(f)},S.prototype.ftruncate=function(f,c,u){u===void 0&&(u=z);var d=typeof c=="number"?c:0,y=I(u=typeof c=="function"?c:u,1);try{var v=this.fd2file(f);if(d<0)throw new p(a.EINVAL);v.truncate(d,y)}catch(_){y(_)}},S.prototype.ftruncateSync=function(f,c){c===void 0&&(c=0);var u=this.fd2file(f);if(c<0)throw new p(a.EINVAL);u.truncateSync(c)},S.prototype.fsync=function(f,c){c===void 0&&(c=z);var u=I(c,1);try{this.fd2file(f).sync(u)}catch(d){u(d)}},S.prototype.fsyncSync=function(f){this.fd2file(f).syncSync()},S.prototype.fdatasync=function(f,c){c===void 0&&(c=z);var u=I(c,1);try{this.fd2file(f).datasync(u)}catch(d){u(d)}},S.prototype.fdatasyncSync=function(f){this.fd2file(f).datasyncSync()},S.prototype.write=function(f,c,u,d,y,v){v===void 0&&(v=z);var _,A,P,$=null;if(typeof c=="string"){var Q="utf8";switch(typeof u){case"function":v=u;break;case"number":$=u,Q=typeof d=="string"?d:"utf8",v=typeof y=="function"?y:v;break;default:return(v=typeof d=="function"?d:typeof y=="function"?y:v)(new p(a.EINVAL,"Invalid arguments."))}A=0,P=(_=n.from(c,Q)).length}else _=c,A=u,P=d,$=typeof y=="number"?y:null,v=typeof y=="function"?y:v;var fe=I(v,3);try{var pe=this.fd2file(f);$==null&&($=pe.getPos()),pe.write(_,A,P,$,fe)}catch(ve){fe(ve)}},S.prototype.writeSync=function(f,c,u,d,y){var v,_,A,P=0;if(typeof c=="string"){A=typeof u=="number"?u:null;var $=typeof d=="string"?d:"utf8";P=0,_=(v=n.from(c,$)).length}else v=c,P=u,_=d,A=typeof y=="number"?y:null;var Q=this.fd2file(f);return A==null&&(A=Q.getPos()),Q.writeSync(v,P,_,A)},S.prototype.read=function(f,c,u,d,y,v){var _,A,P,$,Q;if(v===void 0&&(v=z),typeof c=="number"){P=c,_=u;var fe=d;v=typeof y=="function"?y:v,A=0,$=n.alloc(P),Q=I(function(ve,we,ke){if(ve)return v(ve);v(ve,ke.toString(fe),we)},3)}else $=c,A=u,P=d,_=y,Q=I(v,3);try{var pe=this.fd2file(f);_==null&&(_=pe.getPos()),pe.read($,A,P,_,Q)}catch(ve){Q(ve)}},S.prototype.readSync=function(f,c,u,d,y){var v,_,A,P,$=!1,Q="utf8";typeof c=="number"?(A=c,P=u,Q=d,_=0,v=n.alloc(A),$=!0):(v=c,_=u,A=d,P=y);var fe=this.fd2file(f);P==null&&(P=fe.getPos());var pe=fe.readSync(v,_,A,P);return $?[v.toString(Q),pe]:pe},S.prototype.fchown=function(f,c,u,d){d===void 0&&(d=z);var y=I(d,1);try{this.fd2file(f).chown(c,u,y)}catch(v){y(v)}},S.prototype.fchownSync=function(f,c,u){this.fd2file(f).chownSync(c,u)},S.prototype.fchmod=function(f,c,u){var d=I(u,1);try{var y=typeof c=="string"?parseInt(c,8):c;this.fd2file(f).chmod(y,d)}catch(v){d(v)}},S.prototype.fchmodSync=function(f,c){var u=typeof c=="string"?parseInt(c,8):c;this.fd2file(f).chmodSync(u)},S.prototype.futimes=function(f,c,u,d){d===void 0&&(d=z);var y=I(d,1);try{var v=this.fd2file(f);typeof c=="number"&&(c=new Date(1e3*c)),typeof u=="number"&&(u=new Date(1e3*u)),v.utimes(c,u,y)}catch(_){y(_)}},S.prototype.futimesSync=function(f,c,u){this.fd2file(f).utimesSync(q(c),q(u))},S.prototype.rmdir=function(f,c){c===void 0&&(c=z);var u=I(c,1);try{f=J(f),D(this.root).rmdir(f,u)}catch(d){u(d)}},S.prototype.rmdirSync=function(f){return f=J(f),D(this.root).rmdirSync(f)},S.prototype.mkdir=function(f,c,u){u===void 0&&(u=z),typeof c=="function"&&(u=c,c=511);var d=I(u,1);try{f=J(f),D(this.root).mkdir(f,c,d)}catch(y){d(y)}},S.prototype.mkdirSync=function(f,c){D(this.root).mkdirSync(J(f),G(c,511))},S.prototype.readdir=function(f,c){c===void 0&&(c=z);var u=I(c,2);try{f=J(f),D(this.root).readdir(f,u)}catch(d){u(d)}},S.prototype.readdirSync=function(f){return f=J(f),D(this.root).readdirSync(f)},S.prototype.link=function(f,c,u){u===void 0&&(u=z);var d=I(u,1);try{f=J(f),c=J(c),D(this.root).link(f,c,d)}catch(y){d(y)}},S.prototype.linkSync=function(f,c){return f=J(f),c=J(c),D(this.root).linkSync(f,c)},S.prototype.symlink=function(f,c,u,d){d===void 0&&(d=z);var y=typeof u=="string"?u:"file",v=I(d=typeof u=="function"?u:d,1);try{if(y!=="file"&&y!=="dir")return v(new p(a.EINVAL,"Invalid type: "+y));f=J(f),c=J(c),D(this.root).symlink(f,c,y,v)}catch(_){v(_)}},S.prototype.symlinkSync=function(f,c,u){if(u){if(u!=="file"&&u!=="dir")throw new p(a.EINVAL,"Invalid type: "+u)}else u="file";return f=J(f),c=J(c),D(this.root).symlinkSync(f,c,u)},S.prototype.readlink=function(f,c){c===void 0&&(c=z);var u=I(c,2);try{f=J(f),D(this.root).readlink(f,u)}catch(d){u(d)}},S.prototype.readlinkSync=function(f){return f=J(f),D(this.root).readlinkSync(f)},S.prototype.chown=function(f,c,u,d){d===void 0&&(d=z);var y=I(d,1);try{f=J(f),D(this.root).chown(f,!1,c,u,y)}catch(v){y(v)}},S.prototype.chownSync=function(f,c,u){f=J(f),D(this.root).chownSync(f,!1,c,u)},S.prototype.lchown=function(f,c,u,d){d===void 0&&(d=z);var y=I(d,1);try{f=J(f),D(this.root).chown(f,!0,c,u,y)}catch(v){y(v)}},S.prototype.lchownSync=function(f,c,u){f=J(f),D(this.root).chownSync(f,!0,c,u)},S.prototype.chmod=function(f,c,u){u===void 0&&(u=z);var d=I(u,1);try{var y=G(c,-1);if(y<0)throw new p(a.EINVAL,"Invalid mode.");D(this.root).chmod(J(f),!1,y,d)}catch(v){d(v)}},S.prototype.chmodSync=function(f,c){var u=G(c,-1);if(u<0)throw new p(a.EINVAL,"Invalid mode.");f=J(f),D(this.root).chmodSync(f,!1,u)},S.prototype.lchmod=function(f,c,u){u===void 0&&(u=z);var d=I(u,1);try{var y=G(c,-1);if(y<0)throw new p(a.EINVAL,"Invalid mode.");D(this.root).chmod(J(f),!0,y,d)}catch(v){d(v)}},S.prototype.lchmodSync=function(f,c){var u=G(c,-1);if(u<1)throw new p(a.EINVAL,"Invalid mode.");D(this.root).chmodSync(J(f),!0,u)},S.prototype.utimes=function(f,c,u,d){d===void 0&&(d=z);var y=I(d,1);try{D(this.root).utimes(J(f),q(c),q(u),y)}catch(v){y(v)}},S.prototype.utimesSync=function(f,c,u){D(this.root).utimesSync(J(f),q(c),q(u))},S.prototype.realpath=function(f,c,u){u===void 0&&(u=z);var d=typeof c=="object"?c:{},y=I(u=typeof c=="function"?c:z,2);try{f=J(f),D(this.root).realpath(f,d,y)}catch(v){y(v)}},S.prototype.realpathSync=function(f,c){return c===void 0&&(c={}),f=J(f),D(this.root).realpathSync(f,c)},S.prototype.watchFile=function(f,c,u){throw new p(a.ENOTSUP)},S.prototype.unwatchFile=function(f,c){throw new p(a.ENOTSUP)},S.prototype.watch=function(f,c,u){throw new p(a.ENOTSUP)},S.prototype.access=function(f,c,u){throw new p(a.ENOTSUP)},S.prototype.accessSync=function(f,c){throw new p(a.ENOTSUP)},S.prototype.createReadStream=function(f,c){throw new p(a.ENOTSUP)},S.prototype.createWriteStream=function(f,c){throw new p(a.ENOTSUP)},S.prototype.wrapCallbacks=function(f){I=f},S.prototype.getFdForFile=function(f){var c=this.nextFd++;return this.fdMap[c]=f,c},S.prototype.fd2file=function(f){var c=this.fdMap[f];if(c)return c;throw new p(a.EBADF,"Invalid file descriptor.")},S.prototype.closeFd=function(f){delete this.fdMap[f]},S.Stats=O;var W=new S,te={},X=S.prototype;function ue(f,c,u,d,y){return f<c||u<c?f>u?u+1:f+1:d===y?c:c+1}function ae(f,c){if(f===c)return 0;if(f.length>c.length){var u=f;f=c,c=u}for(var d=f.length,y=c.length;d>0&&f.charCodeAt(d-1)===c.charCodeAt(y-1);)d--,y--;for(var v=0;v<d&&f.charCodeAt(v)===c.charCodeAt(v);)v++;if(y-=v,(d-=v)==0||y===1)return y;for(var _,A,P,$,Q,fe=new Array(d<<1),pe=0;pe<d;)fe[d+pe]=f.charCodeAt(v+pe),fe[pe]=++pe;for(_=0;_+3<y;)for(var ve=c.charCodeAt(v+(A=_)),we=c.charCodeAt(v+(P=_+1)),ke=c.charCodeAt(v+($=_+2)),Be=c.charCodeAt(v+(Q=_+3)),Ot=_+=4,Yr=0;Yr<d;){var Tr=fe[d+Yr],Eo=fe[Yr];A=ue(Eo,A,P,ve,Tr),P=ue(A,P,$,we,Tr),$=ue(P,$,Q,ke,Tr),Ot=ue($,Q,Ot,Be,Tr),fe[Yr++]=Ot,Q=$,$=P,P=A,A=Eo}for(var cr=0;_<y;){var Cf=c.charCodeAt(v+(A=_));cr=++_;for(var Ii=0;Ii<d;Ii++){var Ai=fe[Ii];fe[Ii]=cr=Ai<A||cr<A?Ai>cr?cr+1:Ai+1:Cf===fe[d+Ii]?A:A+1,A=Ai}}return cr}function ye(f,c,u){f&&console.warn("["+c+"] Direct file system constructor usage is deprecated for this file system, and will be removed in the next major version. Please use the '"+c+".Create("+JSON.stringify(u)+", callback)' method instead. See https://github.com/jvilk/BrowserFS/issues/176 for more details.")}Object.keys(X).forEach(function(f){typeof W[f]=="function"?te[f]=function(){return W[f].apply(W,arguments)}:te[f]=W[f]}),te.changeFSModule=function(f){W=f},te.getFSModule=function(){return W},te.FS=S;var M=typeof navigator<"u"&&!(!/(msie) ([\w.]+)/.exec(navigator.userAgent.toLowerCase())&&navigator.userAgent.indexOf("Trident")===-1),F=typeof window>"u";function ie(){throw new Error("BFS has reached an impossible code path; please file a bug.")}function B(f,c,u){u.existsSync(f)||(B(h.dirname(f),c,u),u.mkdirSync(f,c))}function V(f){var c=Y(f),u=c.byteOffset,d=c.byteLength;return u===0&&d===c.buffer.byteLength?c.buffer:c.buffer.slice(u,u+d)}function Y(f){return f instanceof Uint8Array?f:new Uint8Array(f)}function ce(f){return f instanceof n?f:f instanceof Uint8Array?oe(f):n.from(f)}function oe(f){return f instanceof n?f:f.byteOffset===0&&f.byteLength===f.buffer.byteLength?ne(f.buffer):n.from(f.buffer,f.byteOffset,f.byteLength)}function ne(f){return n.from(f)}function se(f,c,u){if(c===void 0&&(c=0),u===void 0&&(u=f.length),c<0||u<0||u>f.length||c>u)throw new TypeError("Invalid slice bounds on buffer of length "+f.length+": ["+c+", "+u+"]");if(f.length===0)return be();var d=Y(f),y=f[0],v=(y+1)%255;return f[0]=v,d[0]===v?(d[0]=y,oe(d.slice(c,u))):(f[0]=y,oe(d.subarray(c,u)))}var ge=null;function be(){return ge||(ge=n.alloc(0))}function Ie(f,c){n.isBuffer(f)?c():c(new p(a.EINVAL,"option must be a Buffer."))}function T(f,c,u){var d=f.Options,y=f.Name,v=0,_=!1,A=!1;function P(pe){_||(pe&&(_=!0,u(pe)),--v==0&&A&&u())}var $=function(pe){if(d.hasOwnProperty(pe)){var ve=d[pe],we=c[pe];if(we==null){if(!ve.optional){var ke=Object.keys(c).filter(function(Be){return!(Be in d)}).map(function(Be){return{str:Be,distance:ae(pe,Be)}}).filter(function(Be){return Be.distance<5}).sort(function(Be,Ot){return Be.distance-Ot.distance});return _?{}:(_=!0,{v:u(new p(a.EINVAL,"["+y+"] Required option '"+pe+"' not provided."+(ke.length>0?" You provided unrecognized option '"+ke[0].str+"'; perhaps you meant to type '"+pe+"'.":"")+`
Option description: `+ve.description))})}}else{if(!(Array.isArray(ve.type)?ve.type.indexOf(typeof we)!==-1:typeof we===ve.type))return _?{}:(_=!0,{v:u(new p(a.EINVAL,"["+y+"] Value provided for option "+pe+" is not the proper type. Expected "+(Array.isArray(ve.type)?"one of {"+ve.type.join(", ")+"}":ve.type)+", but received "+typeof we+`
Option description: `+ve.description))});ve.validator&&(v++,ve.validator(we,P))}}};for(var Q in d){var fe=$(Q);if(fe)return fe.v}A=!0,v!==0||_||u()}var R=Object.freeze({deprecationMessage:ye,isIE:M,isWebWorker:F,fail:ie,mkdirpSync:B,buffer2ArrayBuffer:V,buffer2Uint8array:Y,arrayish2Buffer:ce,uint8Array2Buffer:oe,arrayBuffer2Buffer:ne,copyingSlice:se,emptyBuffer:be,bufferValidator:Ie,checkOptions:T}),j=function(f){this.fs=f,this.nodefs=f.getNodeFS(),this.FS=f.getFS(),this.PATH=f.getPATH(),this.ERRNO_CODES=f.getERRNO_CODES()};j.prototype.open=function(f){var c=this.fs.realPath(f.node),u=this.FS;try{u.isFile(f.node.mode)&&(f.nfd=this.nodefs.openSync(c,this.fs.flagsToPermissionString(f.flags)))}catch(d){throw d.code?new u.ErrnoError(this.ERRNO_CODES[d.code]):d}},j.prototype.close=function(f){var c=this.FS;try{c.isFile(f.node.mode)&&f.nfd&&this.nodefs.closeSync(f.nfd)}catch(u){throw u.code?new c.ErrnoError(this.ERRNO_CODES[u.code]):u}},j.prototype.read=function(f,c,u,d,y){try{return this.nodefs.readSync(f.nfd,oe(c),u,d,y)}catch(v){throw new this.FS.ErrnoError(this.ERRNO_CODES[v.code])}},j.prototype.write=function(f,c,u,d,y){try{return this.nodefs.writeSync(f.nfd,oe(c),u,d,y)}catch(v){throw new this.FS.ErrnoError(this.ERRNO_CODES[v.code])}},j.prototype.llseek=function(f,c,u){var d=c;if(u===1)d+=f.position;else if(u===2&&this.FS.isFile(f.node.mode))try{d+=this.nodefs.fstatSync(f.nfd).size}catch(y){throw new this.FS.ErrnoError(this.ERRNO_CODES[y.code])}if(d<0)throw new this.FS.ErrnoError(this.ERRNO_CODES.EINVAL);return f.position=d,d};var H=function(f){this.fs=f,this.nodefs=f.getNodeFS(),this.FS=f.getFS(),this.PATH=f.getPATH(),this.ERRNO_CODES=f.getERRNO_CODES()};H.prototype.getattr=function(f){var c,u=this.fs.realPath(f);try{c=this.nodefs.lstatSync(u)}catch(d){throw d.code?new this.FS.ErrnoError(this.ERRNO_CODES[d.code]):d}return{dev:c.dev,ino:c.ino,mode:c.mode,nlink:c.nlink,uid:c.uid,gid:c.gid,rdev:c.rdev,size:c.size,atime:c.atime,mtime:c.mtime,ctime:c.ctime,blksize:c.blksize,blocks:c.blocks}},H.prototype.setattr=function(f,c){var u=this.fs.realPath(f);try{if(c.mode!==void 0&&(this.nodefs.chmodSync(u,c.mode),f.mode=c.mode),c.timestamp!==void 0){var d=new Date(c.timestamp);this.nodefs.utimesSync(u,d,d)}}catch(y){if(!y.code)throw y;if(y.code!=="ENOTSUP")throw new this.FS.ErrnoError(this.ERRNO_CODES[y.code])}if(c.size!==void 0)try{this.nodefs.truncateSync(u,c.size)}catch(y){throw y.code?new this.FS.ErrnoError(this.ERRNO_CODES[y.code]):y}},H.prototype.lookup=function(f,c){var u=this.PATH.join2(this.fs.realPath(f),c),d=this.fs.getMode(u);return this.fs.createNode(f,c,d)},H.prototype.mknod=function(f,c,u,d){var y=this.fs.createNode(f,c,u,d),v=this.fs.realPath(y);try{this.FS.isDir(y.mode)?this.nodefs.mkdirSync(v,y.mode):this.nodefs.writeFileSync(v,"",{mode:y.mode})}catch(_){throw _.code?new this.FS.ErrnoError(this.ERRNO_CODES[_.code]):_}return y},H.prototype.rename=function(f,c,u){var d=this.fs.realPath(f),y=this.PATH.join2(this.fs.realPath(c),u);try{this.nodefs.renameSync(d,y),f.name=u,f.parent=c}catch(v){throw v.code?new this.FS.ErrnoError(this.ERRNO_CODES[v.code]):v}},H.prototype.unlink=function(f,c){var u=this.PATH.join2(this.fs.realPath(f),c);try{this.nodefs.unlinkSync(u)}catch(d){throw d.code?new this.FS.ErrnoError(this.ERRNO_CODES[d.code]):d}},H.prototype.rmdir=function(f,c){var u=this.PATH.join2(this.fs.realPath(f),c);try{this.nodefs.rmdirSync(u)}catch(d){throw d.code?new this.FS.ErrnoError(this.ERRNO_CODES[d.code]):d}},H.prototype.readdir=function(f){var c=this.fs.realPath(f);try{var u=this.nodefs.readdirSync(c);return u.push(".",".."),u}catch(d){throw d.code?new this.FS.ErrnoError(this.ERRNO_CODES[d.code]):d}},H.prototype.symlink=function(f,c,u){var d=this.PATH.join2(this.fs.realPath(f),c);try{this.nodefs.symlinkSync(u,d)}catch(y){throw y.code?new this.FS.ErrnoError(this.ERRNO_CODES[y.code]):y}},H.prototype.readlink=function(f){var c=this.fs.realPath(f);try{return this.nodefs.readlinkSync(c)}catch(u){throw u.code?new this.FS.ErrnoError(this.ERRNO_CODES[u.code]):u}};var Z=function(f,c,u,d){f===void 0&&(f=self.FS),c===void 0&&(c=self.PATH),u===void 0&&(u=self.ERRNO_CODES),d===void 0&&(d=te),this.flagsToPermissionStringMap={0:"r",1:"r+",2:"r+",64:"r",65:"r+",66:"r+",129:"rx+",193:"rx+",514:"w+",577:"w",578:"w+",705:"wx",706:"wx+",1024:"a",1025:"a",1026:"a+",1089:"a",1090:"a+",1153:"ax",1154:"ax+",1217:"ax",1218:"ax+",4096:"rs",4098:"rs+"},this.nodefs=d,this.FS=f,this.PATH=c,this.ERRNO_CODES=u,this.node_ops=new H(this),this.stream_ops=new j(this)};Z.prototype.mount=function(f){return this.createNode(null,"/",this.getMode(f.opts.root),0)},Z.prototype.createNode=function(f,c,u,d){var y=this.FS;if(!y.isDir(u)&&!y.isFile(u)&&!y.isLink(u))throw new y.ErrnoError(this.ERRNO_CODES.EINVAL);var v=y.createNode(f,c,u);return v.node_ops=this.node_ops,v.stream_ops=this.stream_ops,v},Z.prototype.getMode=function(f){var c;try{c=this.nodefs.lstatSync(f)}catch(u){throw u.code?new this.FS.ErrnoError(this.ERRNO_CODES[u.code]):u}return c.mode},Z.prototype.realPath=function(f){for(var c=[];f.parent!==f;)c.push(f.name),f=f.parent;return c.push(f.mount.opts.root),c.reverse(),this.PATH.join.apply(null,c)},Z.prototype.flagsToPermissionString=function(f){var c=typeof f=="string"?parseInt(f,10):f;return(c&=8191)in this.flagsToPermissionStringMap?this.flagsToPermissionStringMap[c]:f},Z.prototype.getNodeFS=function(){return this.nodefs},Z.prototype.getFS=function(){return this.FS},Z.prototype.getPATH=function(){return this.PATH},Z.prototype.getERRNO_CODES=function(){return this.ERRNO_CODES};var K=function(){};K.prototype.supportsLinks=function(){return!1},K.prototype.diskSpace=function(f,c){c(0,0)},K.prototype.openFile=function(f,c,u){throw new p(a.ENOTSUP)},K.prototype.createFile=function(f,c,u,d){throw new p(a.ENOTSUP)},K.prototype.open=function(f,c,u,d){var y=this;this.stat(f,!1,function(v,_){if(v)switch(c.pathNotExistsAction()){case m.CREATE_FILE:return y.stat(h.dirname(f),!1,function(A,P){A?d(A):P&&!P.isDirectory()?d(p.ENOTDIR(h.dirname(f))):y.createFile(f,c,u,d)});case m.THROW_EXCEPTION:return d(p.ENOENT(f));default:return d(new p(a.EINVAL,"Invalid FileFlag object."))}else{if(_&&_.isDirectory())return d(p.EISDIR(f));switch(c.pathExistsAction()){case m.THROW_EXCEPTION:return d(p.EEXIST(f));case m.TRUNCATE_FILE:return y.openFile(f,c,function(A,P){A?d(A):P?P.truncate(0,function(){P.sync(function(){d(null,P)})}):ie()});case m.NOP:return y.openFile(f,c,d);default:return d(new p(a.EINVAL,"Invalid FileFlag object."))}}})},K.prototype.rename=function(f,c,u){u(new p(a.ENOTSUP))},K.prototype.renameSync=function(f,c){throw new p(a.ENOTSUP)},K.prototype.stat=function(f,c,u){u(new p(a.ENOTSUP))},K.prototype.statSync=function(f,c){throw new p(a.ENOTSUP)},K.prototype.openFileSync=function(f,c,u){throw new p(a.ENOTSUP)},K.prototype.createFileSync=function(f,c,u){throw new p(a.ENOTSUP)},K.prototype.openSync=function(f,c,u){var d;try{d=this.statSync(f,!1)}catch{switch(c.pathNotExistsAction()){case m.CREATE_FILE:if(!this.statSync(h.dirname(f),!1).isDirectory())throw p.ENOTDIR(h.dirname(f));return this.createFileSync(f,c,u);case m.THROW_EXCEPTION:throw p.ENOENT(f);default:throw new p(a.EINVAL,"Invalid FileFlag object.")}}if(d.isDirectory())throw p.EISDIR(f);switch(c.pathExistsAction()){case m.THROW_EXCEPTION:throw p.EEXIST(f);case m.TRUNCATE_FILE:return this.unlinkSync(f),this.createFileSync(f,c,d.mode);case m.NOP:return this.openFileSync(f,c,u);default:throw new p(a.EINVAL,"Invalid FileFlag object.")}},K.prototype.unlink=function(f,c){c(new p(a.ENOTSUP))},K.prototype.unlinkSync=function(f){throw new p(a.ENOTSUP)},K.prototype.rmdir=function(f,c){c(new p(a.ENOTSUP))},K.prototype.rmdirSync=function(f){throw new p(a.ENOTSUP)},K.prototype.mkdir=function(f,c,u){u(new p(a.ENOTSUP))},K.prototype.mkdirSync=function(f,c){throw new p(a.ENOTSUP)},K.prototype.readdir=function(f,c){c(new p(a.ENOTSUP))},K.prototype.readdirSync=function(f){throw new p(a.ENOTSUP)},K.prototype.exists=function(f,c){this.stat(f,null,function(u){c(!u)})},K.prototype.existsSync=function(f){try{return this.statSync(f,!0),!0}catch{return!1}},K.prototype.realpath=function(f,c,u){if(this.supportsLinks())for(var d=f.split(h.sep),y=0;y<d.length;y++){var v=d.slice(0,y+1);d[y]=h.join.apply(null,v)}else this.exists(f,function(_){_?u(null,f):u(p.ENOENT(f))})},K.prototype.realpathSync=function(f,c){if(this.supportsLinks()){for(var u=f.split(h.sep),d=0;d<u.length;d++){var y=u.slice(0,d+1);u[d]=h.join.apply(h,y)}return u.join(h.sep)}if(this.existsSync(f))return f;throw p.ENOENT(f)},K.prototype.truncate=function(f,c,u){this.open(f,N.getFileFlag("r+"),420,function(d,y){if(d)return u(d);y.truncate(c,function(v){y.close(function(_){u(v||_)})})})},K.prototype.truncateSync=function(f,c){var u=this.openSync(f,N.getFileFlag("r+"),420);try{u.truncateSync(c)}catch(d){throw d}finally{u.closeSync()}},K.prototype.readFile=function(f,c,u,d){var y=d;this.open(f,u,420,function(v,_){if(v)return d(v);d=function(A,P){_.close(function($){return A||(A=$),y(A,P)})},_.stat(function(A,P){if(A)return d(A);var $=n.alloc(P.size);_.read($,0,P.size,0,function(Q){if(Q)return d(Q);if(c===null)return d(Q,$);try{d(null,$.toString(c))}catch(fe){d(fe)}})})})},K.prototype.readFileSync=function(f,c,u){var d=this.openSync(f,u,420);try{var y=d.statSync(),v=n.alloc(y.size);return d.readSync(v,0,y.size,0),d.closeSync(),c===null?v:v.toString(c)}finally{d.closeSync()}},K.prototype.writeFile=function(f,c,u,d,y,v){var _=v;this.open(f,d,420,function(A,P){if(A)return v(A);v=function($){P.close(function(Q){_($||Q)})};try{typeof c=="string"&&(c=n.from(c,u))}catch($){return v($)}P.write(c,0,c.length,0,v)})},K.prototype.writeFileSync=function(f,c,u,d,y){var v=this.openSync(f,d,y);try{typeof c=="string"&&(c=n.from(c,u)),v.writeSync(c,0,c.length,0)}finally{v.closeSync()}},K.prototype.appendFile=function(f,c,u,d,y,v){var _=v;this.open(f,d,y,function(A,P){if(A)return v(A);v=function($){P.close(function(Q){_($||Q)})},typeof c=="string"&&(c=n.from(c,u)),P.write(c,0,c.length,null,v)})},K.prototype.appendFileSync=function(f,c,u,d,y){var v=this.openSync(f,d,y);try{typeof c=="string"&&(c=n.from(c,u)),v.writeSync(c,0,c.length,null)}finally{v.closeSync()}},K.prototype.chmod=function(f,c,u,d){d(new p(a.ENOTSUP))},K.prototype.chmodSync=function(f,c,u){throw new p(a.ENOTSUP)},K.prototype.chown=function(f,c,u,d,y){y(new p(a.ENOTSUP))},K.prototype.chownSync=function(f,c,u,d){throw new p(a.ENOTSUP)},K.prototype.utimes=function(f,c,u,d){d(new p(a.ENOTSUP))},K.prototype.utimesSync=function(f,c,u){throw new p(a.ENOTSUP)},K.prototype.link=function(f,c,u){u(new p(a.ENOTSUP))},K.prototype.linkSync=function(f,c){throw new p(a.ENOTSUP)},K.prototype.symlink=function(f,c,u,d){d(new p(a.ENOTSUP))},K.prototype.symlinkSync=function(f,c,u){throw new p(a.ENOTSUP)},K.prototype.readlink=function(f,c){c(new p(a.ENOTSUP))},K.prototype.readlinkSync=function(f){throw new p(a.ENOTSUP)};var Se=function(f){function c(){f.apply(this,arguments)}return f&&(c.__proto__=f),c.prototype=Object.create(f&&f.prototype),c.prototype.constructor=c,c.prototype.supportsSynch=function(){return!0},c.prototype.rename=function(u,d,y){try{this.renameSync(u,d),y()}catch(v){y(v)}},c.prototype.stat=function(u,d,y){try{y(null,this.statSync(u,d))}catch(v){y(v)}},c.prototype.open=function(u,d,y,v){try{v(null,this.openSync(u,d,y))}catch(_){v(_)}},c.prototype.unlink=function(u,d){try{this.unlinkSync(u),d()}catch(y){d(y)}},c.prototype.rmdir=function(u,d){try{this.rmdirSync(u),d()}catch(y){d(y)}},c.prototype.mkdir=function(u,d,y){try{this.mkdirSync(u,d),y()}catch(v){y(v)}},c.prototype.readdir=function(u,d){try{d(null,this.readdirSync(u))}catch(y){d(y)}},c.prototype.chmod=function(u,d,y,v){try{this.chmodSync(u,d,y),v()}catch(_){v(_)}},c.prototype.chown=function(u,d,y,v,_){try{this.chownSync(u,d,y,v),_()}catch(A){_(A)}},c.prototype.utimes=function(u,d,y,v){try{this.utimesSync(u,d,y),v()}catch(_){v(_)}},c.prototype.link=function(u,d,y){try{this.linkSync(u,d),y()}catch(v){y(v)}},c.prototype.symlink=function(u,d,y,v){try{this.symlinkSync(u,d,y),v()}catch(_){v(_)}},c.prototype.readlink=function(u,d){try{d(null,this.readlinkSync(u))}catch(y){d(y)}},c}(K),L=function(){};L.prototype.sync=function(f){f(new p(a.ENOTSUP))},L.prototype.syncSync=function(){throw new p(a.ENOTSUP)},L.prototype.datasync=function(f){this.sync(f)},L.prototype.datasyncSync=function(){return this.syncSync()},L.prototype.chown=function(f,c,u){u(new p(a.ENOTSUP))},L.prototype.chownSync=function(f,c){throw new p(a.ENOTSUP)},L.prototype.chmod=function(f,c){c(new p(a.ENOTSUP))},L.prototype.chmodSync=function(f){throw new p(a.ENOTSUP)},L.prototype.utimes=function(f,c,u){u(new p(a.ENOTSUP))},L.prototype.utimesSync=function(f,c){throw new p(a.ENOTSUP)};var E=function(f){function c(u,d,y,v,_){if(f.call(this),this._pos=0,this._dirty=!1,this._fs=u,this._path=d,this._flag=y,this._stat=v,this._buffer=_||be(),this._stat.size!==this._buffer.length&&this._flag.isReadable())throw new Error("Invalid buffer: Buffer is "+this._buffer.length+" long, yet Stats object specifies that file is "+this._stat.size+" long.")}return f&&(c.__proto__=f),c.prototype=Object.create(f&&f.prototype),c.prototype.constructor=c,c.prototype.getBuffer=function(){return this._buffer},c.prototype.getStats=function(){return this._stat},c.prototype.getFlag=function(){return this._flag},c.prototype.getPath=function(){return this._path},c.prototype.getPos=function(){return this._flag.isAppendable()?this._stat.size:this._pos},c.prototype.advancePos=function(u){return this._pos+=u},c.prototype.setPos=function(u){return this._pos=u},c.prototype.sync=function(u){try{this.syncSync(),u()}catch(d){u(d)}},c.prototype.syncSync=function(){throw new p(a.ENOTSUP)},c.prototype.close=function(u){try{this.closeSync(),u()}catch(d){u(d)}},c.prototype.closeSync=function(){throw new p(a.ENOTSUP)},c.prototype.stat=function(u){try{u(null,this._stat.clone())}catch(d){u(d)}},c.prototype.statSync=function(){return this._stat.clone()},c.prototype.truncate=function(u,d){try{this.truncateSync(u),this._flag.isSynchronous()&&!te.getRootFS().supportsSynch()&&this.sync(d),d()}catch(y){return d(y)}},c.prototype.truncateSync=function(u){if(this._dirty=!0,!this._flag.isWriteable())throw new p(a.EPERM,"File not opened with a writeable mode.");if(this._stat.mtime=new Date,u>this._buffer.length){var d=n.alloc(u-this._buffer.length,0);return this.writeSync(d,0,d.length,this._buffer.length),void(this._flag.isSynchronous()&&te.getRootFS().supportsSynch()&&this.syncSync())}this._stat.size=u;var y=n.alloc(u);this._buffer.copy(y,0,0,u),this._buffer=y,this._flag.isSynchronous()&&te.getRootFS().supportsSynch()&&this.syncSync()},c.prototype.write=function(u,d,y,v,_){try{_(null,this.writeSync(u,d,y,v),u)}catch(A){_(A)}},c.prototype.writeSync=function(u,d,y,v){if(this._dirty=!0,v==null&&(v=this.getPos()),!this._flag.isWriteable())throw new p(a.EPERM,"File not opened with a writeable mode.");var _=v+y;if(_>this._stat.size&&(this._stat.size=_,_>this._buffer.length)){var A=n.alloc(_);this._buffer.copy(A),this._buffer=A}var P=u.copy(this._buffer,v,d,d+y);return this._stat.mtime=new Date,this._flag.isSynchronous()?(this.syncSync(),P):(this.setPos(v+P),P)},c.prototype.read=function(u,d,y,v,_){try{_(null,this.readSync(u,d,y,v),u)}catch(A){_(A)}},c.prototype.readSync=function(u,d,y,v){if(!this._flag.isReadable())throw new p(a.EPERM,"File not opened with a readable mode.");v==null&&(v=this.getPos()),v+y>this._stat.size&&(y=this._stat.size-v);var _=this._buffer.copy(u,d,v,v+y);return this._stat.atime=new Date,this._pos=v+y,_},c.prototype.chmod=function(u,d){try{this.chmodSync(u),d()}catch(y){d(y)}},c.prototype.chmodSync=function(u){if(!this._fs.supportsProps())throw new p(a.ENOTSUP);this._dirty=!0,this._stat.chmod(u),this.syncSync()},c.prototype.isDirty=function(){return this._dirty},c.prototype.resetDirty=function(){this._dirty=!1},c}(L),k=function(f){function c(u,d,y,v,_){f.call(this,u,d,y,v,_)}return f&&(c.__proto__=f),c.prototype=Object.create(f&&f.prototype),c.prototype.constructor=c,c.prototype.sync=function(u){u()},c.prototype.syncSync=function(){},c.prototype.close=function(u){u()},c.prototype.closeSync=function(){},c}(E),U=function(f){function c(u,d,y,v,_){f.call(this,u,d,y,v,_)}return f&&(c.__proto__=f),c.prototype=Object.create(f&&f.prototype),c.prototype.constructor=c,c.prototype.syncSync=function(){this.isDirty()&&(this._fs._syncSync(this),this.resetDirty())},c.prototype.closeSync=function(){this.syncSync()},c}(E),ee=function(f){function c(u,d,y){if(y===void 0&&(y=!0),f.call(this),this._queue=[],this._queueRunning=!1,this._isInitialized=!1,this._initializeCallbacks=[],this._sync=u,this._async=d,!u.supportsSynch())throw new Error("The first argument to AsyncMirror needs to be a synchronous file system.");ye(y,c.Name,{sync:"sync file system instance",async:"async file system instance"})}return f&&(c.__proto__=f),c.prototype=Object.create(f&&f.prototype),c.prototype.constructor=c,c.Create=function(u,d){try{var y=new c(u.sync,u.async,!1);y.initialize(function(v){v?d(v):d(null,y)},!1)}catch(v){d(v)}},c.isAvailable=function(){return!0},c.prototype.getName=function(){return c.Name},c.prototype._syncSync=function(u){this._sync.writeFileSync(u.getPath(),u.getBuffer(),null,N.getFileFlag("w"),u.getStats().mode),this.enqueueOp({apiMethod:"writeFile",arguments:[u.getPath(),u.getBuffer(),null,u.getFlag(),u.getStats().mode]})},c.prototype.initialize=function(u,d){var y=this;d===void 0&&(d=!0),d&&console.warn("[AsyncMirror] AsyncMirror.initialize() is deprecated and will be removed in the next major version. Please use 'AsyncMirror.Create({ sync: (sync file system instance), async: (async file system instance)}, cb)' to create and initialize AsyncMirror instances.");var v=this._initializeCallbacks;if(this._isInitialized)u();else if(v.push(u)===1){var _=function(P,$,Q){P!=="/"&&y._sync.mkdirSync(P,$),y._async.readdir(P,function(fe,pe){var ve=0;fe?Q(fe):function we(ke){ke?Q(ke):ve<pe.length?(A(h.join(P,pe[ve]),we),ve++):Q()}()})},A=function(P,$){y._async.stat(P,!1,function(Q,fe){Q?$(Q):fe.isDirectory()?_(P,fe.mode,$):function(pe,ve,we){y._async.readFile(pe,null,N.getFileFlag("r"),function(ke,Be){if(ke)we(ke);else try{y._sync.writeFileSync(pe,Be,null,N.getFileFlag("w"),ve)}catch(Ot){ke=Ot}finally{we(ke)}})}(P,fe.mode,$)})};_("/",0,function(P){y._isInitialized=!P,y._initializeCallbacks=[],v.forEach(function($){return $(P)})})}},c.prototype.isReadOnly=function(){return!1},c.prototype.supportsSynch=function(){return!0},c.prototype.supportsLinks=function(){return!1},c.prototype.supportsProps=function(){return this._sync.supportsProps()&&this._async.supportsProps()},c.prototype.renameSync=function(u,d){this.checkInitialized(),this._sync.renameSync(u,d),this.enqueueOp({apiMethod:"rename",arguments:[u,d]})},c.prototype.statSync=function(u,d){return this.checkInitialized(),this._sync.statSync(u,d)},c.prototype.openSync=function(u,d,y){return this.checkInitialized(),this._sync.openSync(u,d,y).closeSync(),new U(this,u,d,this._sync.statSync(u,!1),this._sync.readFileSync(u,null,N.getFileFlag("r")))},c.prototype.unlinkSync=function(u){this.checkInitialized(),this._sync.unlinkSync(u),this.enqueueOp({apiMethod:"unlink",arguments:[u]})},c.prototype.rmdirSync=function(u){this.checkInitialized(),this._sync.rmdirSync(u),this.enqueueOp({apiMethod:"rmdir",arguments:[u]})},c.prototype.mkdirSync=function(u,d){this.checkInitialized(),this._sync.mkdirSync(u,d),this.enqueueOp({apiMethod:"mkdir",arguments:[u,d]})},c.prototype.readdirSync=function(u){return this.checkInitialized(),this._sync.readdirSync(u)},c.prototype.existsSync=function(u){return this.checkInitialized(),this._sync.existsSync(u)},c.prototype.chmodSync=function(u,d,y){this.checkInitialized(),this._sync.chmodSync(u,d,y),this.enqueueOp({apiMethod:"chmod",arguments:[u,d,y]})},c.prototype.chownSync=function(u,d,y,v){this.checkInitialized(),this._sync.chownSync(u,d,y,v),this.enqueueOp({apiMethod:"chown",arguments:[u,d,y,v]})},c.prototype.utimesSync=function(u,d,y){this.checkInitialized(),this._sync.utimesSync(u,d,y),this.enqueueOp({apiMethod:"utimes",arguments:[u,d,y]})},c.prototype.checkInitialized=function(){if(!this._isInitialized)throw new p(a.EPERM,"AsyncMirrorFS is not initialized. Please initialize AsyncMirrorFS using its initialize() method before using it.")},c.prototype.enqueueOp=function(u){var d=this;if(this._queue.push(u),!this._queueRunning){this._queueRunning=!0;var y=function(v){if(v&&console.error("WARNING: File system has desynchronized. Received following error: "+v+`
$`),d._queue.length>0){var _=d._queue.shift(),A=_.arguments;A.push(y),d._async[_.apiMethod].apply(d._async,A)}else d._queueRunning=!1};y()}},c}(Se);function he(f,c,u){switch(u.length){case 0:return f.call(c);case 1:return f.call(c,u[0]);case 2:return f.call(c,u[0],u[1]);case 3:return f.call(c,u[0],u[1],u[2])}return f.apply(c,u)}ee.Name="AsyncMirror",ee.Options={sync:{type:"object",description:"The synchronous file system to mirror the asynchronous file system to."},async:{type:"object",description:"The asynchronous file system to mirror."}};var de=Math.max;function Fe(f){return f}function Re(f,c){return function(u,d,y){return d=de(d===void 0?u.length-1:d,0),function(){for(var v=arguments,_=-1,A=de(v.length-d,0),P=Array(A);++_<A;)P[_]=v[d+_];_=-1;for(var $=Array(d+1);++_<d;)$[_]=v[_];return $[d]=y(P),he(u,this,$)}}(f,c,Fe)}var Je=function(f){return Re(function(c){var u=c.pop();f.call(this,c,u)})};function It(f){return Re(function(c,u){var d=Je(function(y,v){var _=this;return f(c,function(A,P){A.apply(_,y.concat(P))},v)});return u.length?d.apply(this,u):d})}var et=typeof i=="object"&&i&&i.Object===Object&&i,go=typeof self=="object"&&self&&self.Object===Object&&self,Os=et||go||Function("return this")(),Si=Os.Symbol,rg=Object.prototype,FE=rg.hasOwnProperty,CE=rg.toString,xs=Si?Si.toStringTag:void 0,LE=Object.prototype.toString,ng=Si?Si.toStringTag:void 0;function gf(f){return f==null?f===void 0?"[object Undefined]":"[object Null]":ng&&ng in Object(f)?function(c){var u=FE.call(c,xs),d=c[xs];try{c[xs]=void 0;var y=!0}catch{}var v=CE.call(c);return y&&(u?c[xs]=d:delete c[xs]),v}(f):function(c){return LE.call(c)}(f)}function ig(f){return typeof f=="number"&&f>-1&&f%1==0&&f<=9007199254740991}function yf(f){return f!=null&&ig(f.length)&&!function(c){if(!function(d){var y=typeof d;return d!=null&&(y=="object"||y=="function")}(c))return!1;var u=gf(c);return u=="[object Function]"||u=="[object GeneratorFunction]"||u=="[object AsyncFunction]"||u=="[object Proxy]"}(f)}var og={};function Ts(){}function mf(f){return function(){if(f!==null){var c=f;f=null,c.apply(this,arguments)}}}var vf=typeof Symbol=="function"&&Symbol.iterator;function wf(f){return f!=null&&typeof f=="object"}function sg(f){return wf(f)&&gf(f)=="[object Arguments]"}var ag=Object.prototype,PE=ag.hasOwnProperty,ME=ag.propertyIsEnumerable,jE=sg(function(){return arguments}())?sg:function(f){return wf(f)&&PE.call(f,"callee")&&!ME.call(f,"callee")},UE=Array.isArray,lg=typeof e=="object"&&e&&!e.nodeType&&e,ug=lg&&typeof o=="object"&&o&&!o.nodeType&&o,cg=ug&&ug.exports===lg?Os.Buffer:void 0,BE=(cg?cg.isBuffer:void 0)||function(){return!1},zE=/^(?:0|[1-9]\d*)$/;function VE(f,c){return!!(c=c??9007199254740991)&&(typeof f=="number"||zE.test(f))&&f>-1&&f%1==0&&f<c}var tt={};tt["[object Float32Array]"]=tt["[object Float64Array]"]=tt["[object Int8Array]"]=tt["[object Int16Array]"]=tt["[object Int32Array]"]=tt["[object Uint8Array]"]=tt["[object Uint8ClampedArray]"]=tt["[object Uint16Array]"]=tt["[object Uint32Array]"]=!0,tt["[object Arguments]"]=tt["[object Array]"]=tt["[object ArrayBuffer]"]=tt["[object Boolean]"]=tt["[object DataView]"]=tt["[object Date]"]=tt["[object Error]"]=tt["[object Function]"]=tt["[object Map]"]=tt["[object Number]"]=tt["[object Object]"]=tt["[object RegExp]"]=tt["[object Set]"]=tt["[object String]"]=tt["[object WeakMap]"]=!1;var fg,hg=typeof e=="object"&&e&&!e.nodeType&&e,dg=hg&&typeof o=="object"&&o&&!o.nodeType&&o,_f=dg&&dg.exports===hg&&et.process,pg=function(){try{return _f&&_f.binding&&_f.binding("util")}catch{}}(),gg=pg&&pg.isTypedArray,WE=gg?(fg=gg,function(f){return fg(f)}):function(f){return wf(f)&&ig(f.length)&&!!tt[gf(f)]},qE=Object.prototype.hasOwnProperty;function $E(f,c){var u=UE(f),d=!u&&jE(f),y=!u&&!d&&BE(f),v=!u&&!d&&!y&&WE(f),_=u||d||y||v,A=_?function(Q,fe){for(var pe=-1,ve=Array(Q);++pe<Q;)ve[pe]=fe(pe);return ve}(f.length,String):[],P=A.length;for(var $ in f)!c&&!qE.call(f,$)||_&&($=="length"||y&&($=="offset"||$=="parent")||v&&($=="buffer"||$=="byteLength"||$=="byteOffset")||VE($,P))||A.push($);return A}var HE=Object.prototype,JE=function(f,c){return function(u){return f(c(u))}}(Object.keys,Object),GE=Object.prototype.hasOwnProperty;function YE(f){if(u=(c=f)&&c.constructor,c!==(typeof u=="function"&&u.prototype||HE))return JE(f);var c,u,d=[];for(var y in Object(f))GE.call(f,y)&&y!="constructor"&&d.push(y);return d}function KE(f){var c,u=yf(c=f)?$E(c):YE(c),d=-1,y=u.length;return function(){var v=u[++d];return d<y?{value:f[v],key:v}:null}}function ZE(f){if(yf(f))return function(u){var d=-1,y=u.length;return function(){return++d<y?{value:u[d],key:d}:null}}(f);var c=function(u){return vf&&u[vf]&&u[vf]()}(f);return c?function(u){var d=-1;return function(){var y=u.next();return y.done?null:(d++,{value:y.value,key:d})}}(c):KE(f)}function yg(f){return function(){if(f===null)throw new Error("Callback was already called.");var c=f;f=null,c.apply(this,arguments)}}function mg(f){return function(c,u,d){if(d=mf(d||Ts),f<=0||!c)return d(null);var y=ZE(c),v=!1,_=0;function A($,Q){if(_-=1,$)v=!0,d($);else{if(Q===og||v&&_<=0)return v=!0,d(null);P()}}function P(){for(;_<f&&!v;){var $=y();if($===null)return v=!0,void(_<=0&&d(null));_+=1,u($.value,$.key,yg(A))}}P()}}function vg(f,c,u,d){mg(c)(f,u,d)}function Sf(f,c){return function(u,d,y){return f(u,c,d,y)}}function XE(f,c,u){u=mf(u||Ts);var d=0,y=0,v=f.length;function _(A,P){A?u(A):++y!==v&&P!==og||u(null)}for(v===0&&u(null);d<v;d++)c(f[d],d,yg(_))}var wg,QE=Sf(vg,1/0),_g=function(f,c,u){(yf(f)?XE:QE)(f,c,u)};function Sg(f,c,u,d){d=d||Ts;var y=[],v=0;f(c=c||[],function(_,A,P){var $=v++;u(_,function(Q,fe){y[$]=fe,P(Q)})},function(_){d(_,y)})}It((wg=Sg,function(f,c,u){return wg(_g,f,c,u)}));var eO=function(f){return function(c,u,d,y){return f(mg(u),c,d,y)}}(Sg);It(Sf(eO,1)),Re(function(f,c){return Re(function(u){return f.apply(null,c.concat(u))})});var bg=typeof setImmediate=="function"&&setImmediate,Eg=typeof s=="object"&&typeof s.nextTick=="function";function Og(f){setTimeout(f,0)}function xg(f){return Re(function(c,u){f(function(){c.apply(null,u)})})}xg(bg?setImmediate:Eg?s.nextTick:Og);var br,tO=Sf(vg,1),rO=Re(function(f){return Re(function(c){var u,d,y,v,_=this,A=c[c.length-1];typeof A=="function"?c.pop():A=Ts,u=f,d=c,y=function(P,$,Q){$.apply(_,P.concat(Re(function(fe,pe){Q(fe,pe)})))},v=mf((v=function(P,$){A.apply(_,[P].concat($))})||Ts),tO(u,function(P,$,Q){y(d,P,function(fe,pe){d=pe,Q(fe)})},function(P){v(P,d)})})});function Tg(f){return Re(function(c,u){c.apply(null,u.concat(Re(function(d,y){typeof console=="object"&&(d?console.error&&console.error(d):console[f]&&function(v,_){for(var A=-1,P=v==null?0:v.length;++A<P&&_(v[A],A,v)!==!1;);}(y,function(v){console[f](v)}))})))})}function kg(f,c,u){_g(f,function(d){return function(y,v,_){return d(y,_)}}(c),u)}Re(function(f){return rO.apply(null,f.reverse())}),Re(function(f){var c=[null].concat(f);return Je(function(u,d){return d.apply(this,c)})}),Tg("dir"),Tg("log"),xg(Eg?s.nextTick:bg?setImmediate:Og);var Wt=function(f){this._cache={},this._client=f};Wt.prototype.readdir=function(f,c){var u=this,d=this.getCachedDirInfo(f);this._wrap(function(y){d!==null&&d.contents?u._client.readdir(f,{contentHash:d.stat.contentHash},y):u._client.readdir(f,y)},function(y,v,_,A){y?y.status===Dropbox.ApiError.NO_CONTENT&&d!==null?c(null,d.contents.slice(0)):c(y):(u.updateCachedDirInfo(f,_,v.slice(0)),A.forEach(function(P){u.updateCachedInfo(h.join(f,P.name),P)}),c(null,v))})},Wt.prototype.remove=function(f,c){var u=this;this._wrap(function(d){u._client.remove(f,d)},function(d,y){d||u.updateCachedInfo(f,y),c(d)})},Wt.prototype.move=function(f,c,u){var d=this;this._wrap(function(y){d._client.move(f,c,y)},function(y,v){y||(d.deleteCachedInfo(f),d.updateCachedInfo(c,v)),u(y)})},Wt.prototype.stat=function(f,c){var u=this;this._wrap(function(d){u._client.stat(f,d)},function(d,y){d||u.updateCachedInfo(f,y),c(d,y)})},Wt.prototype.readFile=function(f,c){var u=this,d=this.getCachedFileInfo(f);d!==null&&d.contents!==null?this.stat(f,function(y,v){y?c(y):v.contentHash===d.stat.contentHash?c(y,d.contents.slice(0),d.stat):u.readFile(f,c)}):this._wrap(function(y){u._client.readFile(f,{arrayBuffer:!0},y)},function(y,v,_){y||u.updateCachedInfo(f,_,v.slice(0)),c(y,v,_)})},Wt.prototype.writeFile=function(f,c,u){var d=this;this._wrap(function(y){d._client.writeFile(f,c,y)},function(y,v){y||d.updateCachedInfo(f,v,c.slice(0)),u(y,v)})},Wt.prototype.mkdir=function(f,c){var u=this;this._wrap(function(d){u._client.mkdir(f,d)},function(d,y){d||u.updateCachedInfo(f,y,[]),c(d)})},Wt.prototype._wrap=function(f,c){var u=0,d=function(y){var v=2;if(y&&3>++u)switch(y.status){case Dropbox.ApiError.SERVER_ERROR:case Dropbox.ApiError.NETWORK_ERROR:case Dropbox.ApiError.RATE_LIMITED:setTimeout(function(){f(d)},1e3*v);break;default:c.apply(null,arguments)}else c.apply(null,arguments)};f(d)},Wt.prototype.getCachedInfo=function(f){return this._cache[f.toLowerCase()]},Wt.prototype.putCachedInfo=function(f,c){this._cache[f.toLowerCase()]=c},Wt.prototype.deleteCachedInfo=function(f){delete this._cache[f.toLowerCase()]},Wt.prototype.getCachedDirInfo=function(f){var c,u=this.getCachedInfo(f);return(c=u)&&c.stat.isFolder?u:null},Wt.prototype.getCachedFileInfo=function(f){var c,u=this.getCachedInfo(f);return(c=u)&&c.stat.isFile?u:null},Wt.prototype.updateCachedDirInfo=function(f,c,u){u===void 0&&(u=null);var d=this.getCachedInfo(f);c.contentHash===null||d!==void 0&&d.stat.contentHash===c.contentHash||this.putCachedInfo(f,{stat:c,contents:u})},Wt.prototype.updateCachedFileInfo=function(f,c,u){u===void 0&&(u=null);var d=this.getCachedInfo(f);c.versionTag===null||d!==void 0&&d.stat.versionTag===c.versionTag||this.putCachedInfo(f,{stat:c,contents:u})},Wt.prototype.updateCachedInfo=function(f,c,u){var d;u===void 0&&(u=null),c.isFile&&((d=u)==null||typeof d=="object"&&typeof d.byteLength=="number")?this.updateCachedFileInfo(f,c,u):c.isFolder&&Array.isArray(u)&&this.updateCachedDirInfo(f,c,u)};var nO=function(f){function c(u,d,y,v,_){f.call(this,u,d,y,v,_)}return f&&(c.__proto__=f),c.prototype=Object.create(f&&f.prototype),c.prototype.constructor=c,c.prototype.sync=function(u){var d=this;if(this.isDirty()){var y=V(this.getBuffer());this._fs._writeFileStrict(this.getPath(),y,function(v){v||d.resetDirty(),u(v)})}else u()},c.prototype.close=function(u){this.sync(u)},c}(E),hl=function(f){function c(u,d){d===void 0&&(d=!0),f.call(this),this._client=new Wt(u),ye(d,c.Name,{client:"authenticated dropbox client instance"}),br||((br={})[Dropbox.ApiError.NETWORK_ERROR]=a.EIO,br[Dropbox.ApiError.INVALID_PARAM]=a.EINVAL,br[Dropbox.ApiError.INVALID_TOKEN]=a.EPERM,br[Dropbox.ApiError.OAUTH_ERROR]=a.EPERM,br[Dropbox.ApiError.NOT_FOUND]=a.ENOENT,br[Dropbox.ApiError.INVALID_METHOD]=a.EINVAL,br[Dropbox.ApiError.NOT_ACCEPTABLE]=a.EINVAL,br[Dropbox.ApiError.CONFLICT]=a.EINVAL,br[Dropbox.ApiError.RATE_LIMITED]=a.EBUSY,br[Dropbox.ApiError.SERVER_ERROR]=a.EBUSY,br[Dropbox.ApiError.OVER_QUOTA]=a.ENOSPC)}return f&&(c.__proto__=f),c.prototype=Object.create(f&&f.prototype),c.prototype.constructor=c,c.Create=function(u,d){d(null,new c(u.client,!1))},c.isAvailable=function(){return typeof Dropbox<"u"},c.prototype.getName=function(){return c.Name},c.prototype.isReadOnly=function(){return!1},c.prototype.supportsSymlinks=function(){return!1},c.prototype.supportsProps=function(){return!1},c.prototype.supportsSynch=function(){return!1},c.prototype.empty=function(u){var d=this;this._client.readdir("/",function(y,v){y?u(d.convert(y,"/")):kg(v,function(_,A){var P=h.join("/",_);d._client.remove(P,function($){A($?d.convert($,P):null)})},function(_){_?u(_):u()})})},c.prototype.rename=function(u,d,y){var v=this;this._client.move(u,d,function(_){_?v._client.stat(d,function(A,P){if(A||P.isFolder){var $=_.response.error.indexOf(u)>-1?u:d;y(v.convert(_,$))}else v._client.remove(d,function(Q){Q?y(v.convert(Q,d)):v.rename(u,d,y)})}):y()})},c.prototype.stat=function(u,d,y){var v=this;this._client.stat(u,function(_,A){if(_)y(v.convert(_,u));else{if(!A||!A.isRemoved){var P=new O(v._statType(A),A.size);return y(null,P)}y(p.FileError(a.ENOENT,u))}})},c.prototype.open=function(u,d,y,v){var _=this;this._client.readFile(u,function(A,P,$){if(!A){var Q;Q=P===null?be():ne(P);var fe=_._makeFile(u,d,$,Q);return v(null,fe)}if(!d.isReadable()){if(A.status===Dropbox.ApiError.NOT_FOUND){var pe=new ArrayBuffer(0);return _._writeFileStrict(u,pe,function(ve,we){if(ve)v(ve);else{var ke=_._makeFile(u,d,we,ne(pe));v(null,ke)}})}return v(_.convert(A,u))}v(_.convert(A,u))})},c.prototype._writeFileStrict=function(u,d,y){var v=this,_=h.dirname(u);this.stat(_,!1,function(A,P){A?y(p.FileError(a.ENOENT,_)):v._client.writeFile(u,d,function($,Q){$?y(v.convert($,u)):y(null,Q)})})},c.prototype._statType=function(u){return u.isFile?b.FILE:b.DIRECTORY},c.prototype._makeFile=function(u,d,y,v){var _=this._statType(y),A=new O(_,y.size);return new nO(this,u,d,A,v)},c.prototype._remove=function(u,d,y){var v=this;this._client.stat(u,function(_,A){_?d(v.convert(_,u)):A.isFile&&!y?d(p.FileError(a.ENOTDIR,u)):!A.isFile&&y?d(p.FileError(a.EISDIR,u)):v._client.remove(u,function(P){d(P?v.convert(P,u):null)})})},c.prototype.unlink=function(u,d){this._remove(u,d,!0)},c.prototype.rmdir=function(u,d){this._remove(u,d,!1)},c.prototype.mkdir=function(u,d,y){var v=this,_=h.dirname(u);this._client.stat(_,function(A,P){A?y(v.convert(A,_)):v._client.mkdir(u,function($){y($?p.FileError(a.EEXIST,u):null)})})},c.prototype.readdir=function(u,d){var y=this;this._client.readdir(u,function(v,_){return v?d(y.convert(v)):d(null,_)})},c.prototype.convert=function(u,d){d===void 0&&(d=null);var y=br[u.status];return y===void 0&&(y=a.EIO),d?p.FileError(y,d):new p(y)},c}(K);function ct(f,c){c===void 0&&(c="");for(var u=f.errno,d=f.node,y=[];d&&(y.unshift(d.name),d!==d.parent);)d=d.parent;return new p(u,g[u],y.length>0?"/"+y.join("/"):c)}hl.Name="Dropbox",hl.Options={client:{type:"object",description:"An *authenticated* Dropbox client. Must be from the 0.10 JS SDK.",validator:function(f,c){f.isAuthenticated&&f.isAuthenticated()?c():c(new p(a.EINVAL,"'client' option must be an authenticated Dropbox client from the v0.10 JS SDK."))}}};var iO=function(f){function c(u,d,y,v){f.call(this),this._fs=u,this._FS=d,this._path=y,this._stream=v}return f&&(c.__proto__=f),c.prototype=Object.create(f&&f.prototype),c.prototype.constructor=c,c.prototype.getPos=function(){},c.prototype.close=function(u){var d=null;try{this.closeSync()}catch(y){d=y}finally{u(d)}},c.prototype.closeSync=function(){try{this._FS.close(this._stream)}catch(u){throw ct(u,this._path)}},c.prototype.stat=function(u){try{u(null,this.statSync())}catch(d){u(d)}},c.prototype.statSync=function(){try{return this._fs.statSync(this._path,!1)}catch(u){throw ct(u,this._path)}},c.prototype.truncate=function(u,d){var y=null;try{this.truncateSync(u)}catch(v){y=v}finally{d(y)}},c.prototype.truncateSync=function(u){try{this._FS.ftruncate(this._stream.fd,u)}catch(d){throw ct(d,this._path)}},c.prototype.write=function(u,d,y,v,_){try{_(null,this.writeSync(u,d,y,v),u)}catch(A){_(A)}},c.prototype.writeSync=function(u,d,y,v){try{var _=Y(u),A=v===null?void 0:v;return this._FS.write(this._stream,_,d,y,A)}catch(P){throw ct(P,this._path)}},c.prototype.read=function(u,d,y,v,_){try{_(null,this.readSync(u,d,y,v),u)}catch(A){_(A)}},c.prototype.readSync=function(u,d,y,v){try{var _=Y(u),A=v===null?void 0:v;return this._FS.read(this._stream,_,d,y,A)}catch(P){throw ct(P,this._path)}},c.prototype.sync=function(u){u()},c.prototype.syncSync=function(){},c.prototype.chown=function(u,d,y){var v=null;try{this.chownSync(u,d)}catch(_){v=_}finally{y(v)}},c.prototype.chownSync=function(u,d){try{this._FS.fchown(this._stream.fd,u,d)}catch(y){throw ct(y,this._path)}},c.prototype.chmod=function(u,d){var y=null;try{this.chmodSync(u)}catch(v){y=v}finally{d(y)}},c.prototype.chmodSync=function(u){try{this._FS.fchmod(this._stream.fd,u)}catch(d){throw ct(d,this._path)}},c.prototype.utimes=function(u,d,y){var v=null;try{this.utimesSync(u,d)}catch(_){v=_}finally{y(v)}},c.prototype.utimesSync=function(u,d){this._fs.utimesSync(this._path,u,d)},c}(L),dl=function(f){function c(u){f.call(this),this._FS=u}return f&&(c.__proto__=f),c.prototype=Object.create(f&&f.prototype),c.prototype.constructor=c,c.Create=function(u,d){d(null,new c(u.FS))},c.isAvailable=function(){return!0},c.prototype.getName=function(){return this._FS.DB_NAME()},c.prototype.isReadOnly=function(){return!1},c.prototype.supportsLinks=function(){return!0},c.prototype.supportsProps=function(){return!0},c.prototype.supportsSynch=function(){return!0},c.prototype.renameSync=function(u,d){try{this._FS.rename(u,d)}catch(y){throw y.errno===a.ENOENT?ct(y,this.existsSync(u)?d:u):ct(y)}},c.prototype.statSync=function(u,d){try{var y=d?this._FS.lstat(u):this._FS.stat(u),v=this.modeToFileType(y.mode);return new O(v,y.size,y.mode,y.atime,y.mtime,y.ctime)}catch(_){throw ct(_,u)}},c.prototype.openSync=function(u,d,y){try{var v=this._FS.open(u,d.getFlagString(),y);if(this._FS.isDir(v.node.mode))throw this._FS.close(v),p.EISDIR(u);return new iO(this,this._FS,u,v)}catch(_){throw ct(_,u)}},c.prototype.unlinkSync=function(u){try{this._FS.unlink(u)}catch(d){throw ct(d,u)}},c.prototype.rmdirSync=function(u){try{this._FS.rmdir(u)}catch(d){throw ct(d,u)}},c.prototype.mkdirSync=function(u,d){try{this._FS.mkdir(u,d)}catch(y){throw ct(y,u)}},c.prototype.readdirSync=function(u){try{return this._FS.readdir(u).filter(function(d){return d!=="."&&d!==".."})}catch(d){throw ct(d,u)}},c.prototype.truncateSync=function(u,d){try{this._FS.truncate(u,d)}catch(y){throw ct(y,u)}},c.prototype.readFileSync=function(u,d,y){try{var v=oe(this._FS.readFile(u,{flags:y.getFlagString()}));return d?v.toString(d):v}catch(_){throw ct(_,u)}},c.prototype.writeFileSync=function(u,d,y,v,_){try{y&&(d=n.from(d,y));var A=Y(d);this._FS.writeFile(u,A,{flags:v.getFlagString(),encoding:"binary"}),this._FS.chmod(u,_)}catch(P){throw ct(P,u)}},c.prototype.chmodSync=function(u,d,y){try{d?this._FS.lchmod(u,y):this._FS.chmod(u,y)}catch(v){throw ct(v,u)}},c.prototype.chownSync=function(u,d,y,v){try{d?this._FS.lchown(u,y,v):this._FS.chown(u,y,v)}catch(_){throw ct(_,u)}},c.prototype.symlinkSync=function(u,d,y){try{this._FS.symlink(u,d)}catch(v){throw ct(v)}},c.prototype.readlinkSync=function(u){try{return this._FS.readlink(u)}catch(d){throw ct(d,u)}},c.prototype.utimesSync=function(u,d,y){try{this._FS.utime(u,d.getTime(),y.getTime())}catch(v){throw ct(v,u)}},c.prototype.modeToFileType=function(u){if(this._FS.isDir(u))return b.DIRECTORY;if(this._FS.isFile(u))return b.FILE;if(this._FS.isLink(u))return b.SYMLINK;throw p.EPERM("Invalid mode: "+u)},c}(Se);dl.Name="EmscriptenFileSystem",dl.Options={FS:{type:"object",description:"The Emscripten file system to use (the `FS` variable)"}};var yo=function(f){function c(u,d){f.call(this),this._folder=u,this._wrapped=d}return f&&(c.__proto__=f),c.prototype=Object.create(f&&f.prototype),c.prototype.constructor=c,c.Create=function(u,d){d(null,new c(u.folder,u.wrapped))},c.isAvailable=function(){return!0},c.prototype.initialize=function(u){var d=this;this._wrapped.exists(this._folder,function(y){y?u():d._wrapped.isReadOnly()?u(p.ENOENT(d._folder)):d._wrapped.mkdir(d._folder,511,u)})},c.prototype.getName=function(){return this._wrapped.getName()},c.prototype.isReadOnly=function(){return this._wrapped.isReadOnly()},c.prototype.supportsProps=function(){return this._wrapped.supportsProps()},c.prototype.supportsSynch=function(){return this._wrapped.supportsSynch()},c.prototype.supportsLinks=function(){return!1},c}(K);function Ng(f,c){if(c!==null&&typeof c=="object"){var u=c,d=u.path;d&&(d="/"+h.relative(f,d),u.message=u.message.replace(u.path,d),u.path=d)}return c}function oO(f,c){return typeof c=="function"?function(u){arguments.length>0&&(arguments[0]=Ng(f,u)),c.apply(null,arguments)}:c}function Ig(f,c,u){return f.slice(f.length-4)!=="Sync"?function(){return arguments.length>0&&(c&&(arguments[0]=h.join(this._folder,arguments[0])),u&&(arguments[1]=h.join(this._folder,arguments[1])),arguments[arguments.length-1]=oO(this._folder,arguments[arguments.length-1])),this._wrapped[f].apply(this._wrapped,arguments)}:function(){try{return c&&(arguments[0]=h.join(this._folder,arguments[0])),u&&(arguments[1]=h.join(this._folder,arguments[1])),this._wrapped[f].apply(this._wrapped,arguments)}catch(d){throw Ng(this._folder,d)}}}yo.Name="FolderAdapter",yo.Options={folder:{type:"string",description:"The folder to use as the root directory"},wrapped:{type:"object",description:"The file system to wrap"}},["diskSpace","stat","statSync","open","openSync","unlink","unlinkSync","rmdir","rmdirSync","mkdir","mkdirSync","readdir","readdirSync","exists","existsSync","realpath","realpathSync","truncate","truncateSync","readFile","readFileSync","writeFile","writeFileSync","appendFile","appendFileSync","chmod","chmodSync","chown","chownSync","utimes","utimesSync","readlink","readlinkSync"].forEach(function(f){yo.prototype[f]=Ig(f,!0,!1)}),["rename","renameSync","link","linkSync","symlink","symlinkSync"].forEach(function(f){yo.prototype[f]=Ig(f,!0,!0)});var bt=typeof window<"u"?window:typeof self<"u"?self:i,bf=bt.webkitRequestFileSystem||bt.requestFileSystem||null;function fn(f,c,u){switch(f.name){case"PathExistsError":return p.EEXIST(c);case"QuotaExceededError":return p.FileError(a.ENOSPC,c);case"NotFoundError":return p.ENOENT(c);case"SecurityError":return p.FileError(a.EACCES,c);case"InvalidModificationError":return p.FileError(a.EPERM,c);case"TypeMismatchError":return p.FileError(u?a.ENOTDIR:a.EISDIR,c);default:return p.FileError(a.EINVAL,c)}}var sO=function(f){function c(u,d,y,v,_,A){f.call(this,u,y,v,_,A),this._entry=d}return f&&(c.__proto__=f),c.prototype=Object.create(f&&f.prototype),c.prototype.constructor=c,c.prototype.sync=function(u){var d=this;if(!this.isDirty())return u();this._entry.createWriter(function(y){var v=d.getBuffer(),_=new Blob([V(v)]),A=_.size;y.onwriteend=function(P){y.onwriteend=null,y.onerror=null,y.truncate(A),d.resetDirty(),u()},y.onerror=function(P){u(fn(P,d.getPath(),!1))},y.write(_)})},c.prototype.close=function(u){this.sync(u)},c}(E),pl=function(f){function c(u,d,y){u===void 0&&(u=5),d===void 0&&(d=bt.PERSISTENT),y===void 0&&(y=!0),f.call(this),this.size=1048576*u,this.type=d,ye(y,c.Name,{size:u,type:d})}return f&&(c.__proto__=f),c.prototype=Object.create(f&&f.prototype),c.prototype.constructor=c,c.Create=function(u,d){var y=new c(u.size,u.type,!1);y.allocate(function(v){return v?d(v):d(null,y)},!1)},c.isAvailable=function(){return!!bf},c.prototype.getName=function(){return c.Name},c.prototype.isReadOnly=function(){return!1},c.prototype.supportsSymlinks=function(){return!1},c.prototype.supportsProps=function(){return!1},c.prototype.supportsSynch=function(){return!1},c.prototype.allocate=function(u,d){var y=this;u===void 0&&(u=function(){}),d===void 0&&(d=!0),d&&console.warn("[HTML5FS] HTML5FS.allocate() is deprecated and will be removed in the next major release. Please use 'HTML5FS.Create({type: "+this.type+", size: "+this.size+"}, cb)' to create and allocate HTML5FS instances.");var v=function(A){y.fs=A,u()},_=function(A){u(fn(A,"/",!0))};this.type===bt.PERSISTENT?function(A,P,$,Q){if(navigator.webkitPersistentStorage!==void 0)switch(A){case bt.PERSISTENT:navigator.webkitPersistentStorage.requestQuota(P,$,Q);break;case bt.TEMPORARY:navigator.webkitTemporaryStorage.requestQuota(P,$,Q);break;default:Q(new TypeError("Invalid storage type: "+A))}else bt.webkitStorageInfo.requestQuota(A,P,$,Q)}(this.type,this.size,function(A){bf(y.type,A,v,_)},_):bf(this.type,this.size,v,_)},c.prototype.empty=function(u){this._readdir("/",function(d,y){d?(console.error("Failed to empty FS"),u(d)):kg(y,function(v,_){var A=function(){_()},P=function($){_(fn($,v.fullPath,!v.isDirectory))};(function($){return $.isDirectory})(v)?v.removeRecursively(A,P):v.remove(A,P)},function(v){d?(console.error("Failed to empty FS"),u(d)):u()})})},c.prototype.rename=function(u,d,y){var v=this,_=2,A=0,P=this.fs.root,$=u,Q=function(pe){--_<=0&&y(fn(pe,$,!1))},fe=function(pe){return++A==2?y(new p(a.EINVAL,"Something was identified as both a file and a directory. This should never happen.")):u===d?y():($=h.dirname(d),void P.getDirectory($,{},function(ve){$=h.basename(d),pe.moveTo(ve,$,function(we){y()},function(we){pe.isDirectory?($=d,v.unlink(d,function(ke){ke?Q(we):v.rename(u,d,y)})):Q(we)})},Q))};P.getFile(u,{},fe,Q),P.getDirectory(u,{},fe,Q)},c.prototype.stat=function(u,d,y){var v=this,_={create:!1},A=function($){var Q=new O(b.DIRECTORY,4096);y(null,Q)},P=function($){y(fn($,u,!1))};this.fs.root.getFile(u,_,function($){$.file(function(Q){var fe=new O(b.FILE,Q.size);y(null,fe)},P)},function(){v.fs.root.getDirectory(u,_,A,P)})},c.prototype.open=function(u,d,y,v){var _=this,A=function(P){P.name==="InvalidModificationError"&&d.isExclusive()?v(p.EEXIST(u)):v(fn(P,u,!1))};this.fs.root.getFile(u,{create:d.pathNotExistsAction()===m.CREATE_FILE,exclusive:d.isExclusive()},function(P){P.file(function($){var Q=new FileReader;Q.onloadend=function(fe){var pe=_._makeFile(u,P,d,$,Q.result);v(null,pe)},Q.onerror=function(fe){A(Q.error)},Q.readAsArrayBuffer($)},A)},A)},c.prototype.unlink=function(u,d){this._remove(u,d,!0)},c.prototype.rmdir=function(u,d){var y=this;this.readdir(u,function(v,_){v?d(v):_.length>0?d(p.ENOTEMPTY(u)):y._remove(u,d,!1)})},c.prototype.mkdir=function(u,d,y){this.fs.root.getDirectory(u,{create:!0,exclusive:!0},function(v){y()},function(v){y(fn(v,u,!0))})},c.prototype.readdir=function(u,d){this._readdir(u,function(y,v){if(!v)return d(y);for(var _=[],A=0,P=v;A<P.length;A+=1){var $=P[A];_.push($.name)}d(null,_)})},c.prototype._makeFile=function(u,d,y,v,_){_===void 0&&(_=new ArrayBuffer(0));var A=new O(b.FILE,v.size),P=ne(_);return new sO(this,d,u,y,A,P)},c.prototype._readdir=function(u,d){var y=function(v){d(fn(v,u,!0))};this.fs.root.getDirectory(u,{create:!1},function(v){var _=v.createReader(),A=[],P=function(){_.readEntries(function($){$.length?(A=A.concat(function(Q){return Array.prototype.slice.call(Q||[],0)}($)),P()):d(null,A)},y)};P()},y)},c.prototype._remove=function(u,d,y){var v=function(P){P.remove(function(){d()},function($){d(fn($,u,!y))})},_=function(P){d(fn(P,u,!y))},A={create:!1};y?this.fs.root.getFile(u,A,v,_):this.fs.root.getDirectory(u,A,v,_)},c}(K);pl.Name="HTML5FS",pl.Options={size:{type:"number",optional:!0,description:"Storage quota to request, in megabytes. Allocated value may be less. Defaults to 5."},type:{type:"number",optional:!0,description:"window.PERSISTENT or window.TEMPORARY. Defaults to PERSISTENT."}};var ar=function(f,c,u,d,y,v){this.id=f,this.size=c,this.mode=u,this.atime=d,this.mtime=y,this.ctime=v};ar.fromBuffer=function(f){if(f===void 0)throw new Error("NO");return new ar(f.toString("ascii",30),f.readUInt32LE(0),f.readUInt16LE(4),f.readDoubleLE(6),f.readDoubleLE(14),f.readDoubleLE(22))},ar.prototype.toStats=function(){return new O((61440&this.mode)===b.DIRECTORY?b.DIRECTORY:b.FILE,this.size,this.mode,new Date(this.atime),new Date(this.mtime),new Date(this.ctime))},ar.prototype.getSize=function(){return 30+this.id.length},ar.prototype.toBuffer=function(f){return f===void 0&&(f=n.alloc(this.getSize())),f.writeUInt32LE(this.size,0),f.writeUInt16LE(this.mode,4),f.writeDoubleLE(this.atime,6),f.writeDoubleLE(this.mtime,14),f.writeDoubleLE(this.ctime,22),f.write(this.id,30,this.id.length,"ascii"),f},ar.prototype.update=function(f){var c=!1;this.size!==f.size&&(this.size=f.size,c=!0),this.mode!==f.mode&&(this.mode=f.mode,c=!0);var u=f.atime.getTime();this.atime!==u&&(this.atime=u,c=!0);var d=f.mtime.getTime();this.mtime!==d&&(this.mtime=d,c=!0);var y=f.ctime.getTime();return this.ctime!==y&&(this.ctime=y,c=!0),c},ar.prototype.isFile=function(){return(61440&this.mode)===b.FILE},ar.prototype.isDirectory=function(){return(61440&this.mode)===b.DIRECTORY};var jn="/",Ag=null;function Rg(){return Ag||(Ag=n.from("{}"))}function gl(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(f){var c=16*Math.random()|0;return(f==="x"?c:3&c|8).toString(16)})}function Er(f,c){return!f||(c(f),!1)}function Nt(f,c,u){return!f||(c.abort(function(){u(f)}),!1)}var xn=function(f){this.store=f,this.originalData={},this.modifiedKeys=[]};xn.prototype.get=function(f){var c=this.store.get(f);return this.stashOldValue(f,c),c},xn.prototype.put=function(f,c,u){return this.markModified(f),this.store.put(f,c,u)},xn.prototype.del=function(f){this.markModified(f),this.store.del(f)},xn.prototype.commit=function(){},xn.prototype.abort=function(){for(var f=this,c=0,u=f.modifiedKeys;c<u.length;c+=1){var d=u[c],y=f.originalData[d];y?f.store.put(d,y,!0):f.store.del(d)}},xn.prototype.stashOldValue=function(f,c){this.originalData.hasOwnProperty(f)||(this.originalData[f]=c)},xn.prototype.markModified=function(f){this.modifiedKeys.indexOf(f)===-1&&(this.modifiedKeys.push(f),this.originalData.hasOwnProperty(f)||(this.originalData[f]=this.store.get(f)))};var Dg=function(f){function c(u,d,y,v,_){f.call(this,u,d,y,v,_)}return f&&(c.__proto__=f),c.prototype=Object.create(f&&f.prototype),c.prototype.constructor=c,c.prototype.syncSync=function(){this.isDirty()&&(this._fs._syncSync(this.getPath(),this.getBuffer(),this.getStats()),this.resetDirty())},c.prototype.closeSync=function(){this.syncSync()},c}(E),Fg=function(f){function c(u){f.call(this),this.store=u.store,this.makeRootDirectory()}return f&&(c.__proto__=f),c.prototype=Object.create(f&&f.prototype),c.prototype.constructor=c,c.isAvailable=function(){return!0},c.prototype.getName=function(){return this.store.name()},c.prototype.isReadOnly=function(){return!1},c.prototype.supportsSymlinks=function(){return!1},c.prototype.supportsProps=function(){return!1},c.prototype.supportsSynch=function(){return!0},c.prototype.empty=function(){this.store.clear(),this.makeRootDirectory()},c.prototype.renameSync=function(u,d){var y=this.store.beginTransaction("readwrite"),v=h.dirname(u),_=h.basename(u),A=h.dirname(d),P=h.basename(d),$=this.findINode(y,v),Q=this.getDirListing(y,v,$);if(!Q[_])throw p.ENOENT(u);var fe,pe,ve=Q[_];if(delete Q[_],(A+"/").indexOf(u+"/")===0)throw new p(a.EBUSY,v);if(A===v?(fe=$,pe=Q):(fe=this.findINode(y,A),pe=this.getDirListing(y,A,fe)),pe[P]){var we=this.getINode(y,d,pe[P]);if(!we.isFile())throw p.EPERM(d);try{y.del(we.id),y.del(pe[P])}catch(ke){throw y.abort(),ke}}pe[P]=ve;try{y.put($.id,n.from(JSON.stringify(Q)),!0),y.put(fe.id,n.from(JSON.stringify(pe)),!0)}catch(ke){throw y.abort(),ke}y.commit()},c.prototype.statSync=function(u,d){return this.findINode(this.store.beginTransaction("readonly"),u).toStats()},c.prototype.createFileSync=function(u,d,y){var v=this.store.beginTransaction("readwrite"),_=be(),A=this.commitNewFile(v,u,b.FILE,y,_);return new Dg(this,u,d,A.toStats(),_)},c.prototype.openFileSync=function(u,d){var y=this.store.beginTransaction("readonly"),v=this.findINode(y,u),_=y.get(v.id);if(_===void 0)throw p.ENOENT(u);return new Dg(this,u,d,v.toStats(),_)},c.prototype.unlinkSync=function(u){this.removeEntry(u,!1)},c.prototype.rmdirSync=function(u){if(this.readdirSync(u).length>0)throw p.ENOTEMPTY(u);this.removeEntry(u,!0)},c.prototype.mkdirSync=function(u,d){var y=this.store.beginTransaction("readwrite"),v=n.from("{}");this.commitNewFile(y,u,b.DIRECTORY,d,v)},c.prototype.readdirSync=function(u){var d=this.store.beginTransaction("readonly");return Object.keys(this.getDirListing(d,u,this.findINode(d,u)))},c.prototype._syncSync=function(u,d,y){var v=this.store.beginTransaction("readwrite"),_=this._findINode(v,h.dirname(u),h.basename(u)),A=this.getINode(v,u,_),P=A.update(y);try{v.put(A.id,d,!0),P&&v.put(_,A.toBuffer(),!0)}catch($){throw v.abort(),$}v.commit()},c.prototype.makeRootDirectory=function(){var u=this.store.beginTransaction("readwrite");if(u.get(jn)===void 0){var d=new Date().getTime(),y=new ar(gl(),4096,511|b.DIRECTORY,d,d,d);u.put(y.id,Rg(),!1),u.put(jn,y.toBuffer(),!1),u.commit()}},c.prototype._findINode=function(u,d,y){var v=this,_=function(A){var P=v.getDirListing(u,d,A);if(P[y])return P[y];throw p.ENOENT(h.resolve(d,y))};return d==="/"?y===""?jn:_(this.getINode(u,d,jn)):_(this.getINode(u,d+h.sep+y,this._findINode(u,h.dirname(d),h.basename(d))))},c.prototype.findINode=function(u,d){return this.getINode(u,d,this._findINode(u,h.dirname(d),h.basename(d)))},c.prototype.getINode=function(u,d,y){var v=u.get(y);if(v===void 0)throw p.ENOENT(d);return ar.fromBuffer(v)},c.prototype.getDirListing=function(u,d,y){if(!y.isDirectory())throw p.ENOTDIR(d);var v=u.get(y.id);if(v===void 0)throw p.ENOENT(d);return JSON.parse(v.toString())},c.prototype.addNewNode=function(u,d){for(var y;;)try{return y=gl(),u.put(y,d,!1),y}catch{}throw new p(a.EIO,"Unable to commit data to key-value store.")},c.prototype.commitNewFile=function(u,d,y,v,_){var A,P=h.dirname(d),$=h.basename(d),Q=this.findINode(u,P),fe=this.getDirListing(u,P,Q),pe=new Date().getTime();if(d==="/"||fe[$])throw p.EEXIST(d);try{var ve=this.addNewNode(u,_);A=new ar(ve,_.length,v|y,pe,pe,pe);var we=this.addNewNode(u,A.toBuffer());fe[$]=we,u.put(Q.id,n.from(JSON.stringify(fe)),!0)}catch(ke){throw u.abort(),ke}return u.commit(),A},c.prototype.removeEntry=function(u,d){var y=this.store.beginTransaction("readwrite"),v=h.dirname(u),_=this.findINode(y,v),A=this.getDirListing(y,v,_),P=h.basename(u);if(!A[P])throw p.ENOENT(u);var $=A[P];delete A[P];var Q=this.getINode(y,u,$);if(!d&&Q.isDirectory())throw p.EISDIR(u);if(d&&!Q.isDirectory())throw p.ENOTDIR(u);try{y.del(Q.id),y.del($),y.put(_.id,n.from(JSON.stringify(A)),!0)}catch(fe){throw y.abort(),fe}y.commit()},c}(Se),Cg=function(f){function c(u,d,y,v,_){f.call(this,u,d,y,v,_)}return f&&(c.__proto__=f),c.prototype=Object.create(f&&f.prototype),c.prototype.constructor=c,c.prototype.sync=function(u){var d=this;this.isDirty()?this._fs._sync(this.getPath(),this.getBuffer(),this.getStats(),function(y){y||d.resetDirty(),u(y)}):u()},c.prototype.close=function(u){this.sync(u)},c}(E),aO=function(f){function c(){f.apply(this,arguments)}return f&&(c.__proto__=f),c.prototype=Object.create(f&&f.prototype),c.prototype.constructor=c,c.isAvailable=function(){return!0},c.prototype.init=function(u,d){this.store=u,this.makeRootDirectory(d)},c.prototype.getName=function(){return this.store.name()},c.prototype.isReadOnly=function(){return!1},c.prototype.supportsSymlinks=function(){return!1},c.prototype.supportsProps=function(){return!1},c.prototype.supportsSynch=function(){return!1},c.prototype.empty=function(u){var d=this;this.store.clear(function(y){Er(y,u)&&d.makeRootDirectory(u)})},c.prototype.rename=function(u,d,y){var v=this,_=this.store.beginTransaction("readwrite"),A=h.dirname(u),P=h.basename(u),$=h.dirname(d),Q=h.basename(d),fe={},pe={},ve=!1;if(($+"/").indexOf(u+"/")===0)return y(new p(a.EBUSY,A));var we=function(ke){v.findINodeAndDirListing(_,ke,function(Be,Ot,Yr){Be?ve||(ve=!0,_.abort(function(){y(Be)})):(fe[ke]=Ot,pe[ke]=Yr,function(){if(!ve&&pe.hasOwnProperty(A)&&pe.hasOwnProperty($)){var Tr=pe[A],Eo=fe[A],cr=pe[$],Cf=fe[$];if(Tr[P]){var Ii=Tr[P];delete Tr[P];var Ai=function(){cr[Q]=Ii,_.put(Eo.id,n.from(JSON.stringify(Tr)),!0,function(Lf){Nt(Lf,_,y)&&(A===$?_.commit(y):_.put(Cf.id,n.from(JSON.stringify(cr)),!0,function(xl){Nt(xl,_,y)&&_.commit(y)}))})};cr[Q]?v.getINode(_,d,cr[Q],function(Lf,xl){Nt(Lf,_,y)&&(xl.isFile()?_.del(xl.id,function(by){Nt(by,_,y)&&_.del(cr[Q],function(SO){Nt(SO,_,y)&&Ai()})}):_.abort(function(by){y(p.EPERM(d))}))}):Ai()}else y(p.ENOENT(u))}}())})};we(A),A!==$&&we($)},c.prototype.stat=function(u,d,y){var v=this.store.beginTransaction("readonly");this.findINode(v,u,function(_,A){Er(_,y)&&y(null,A.toStats())})},c.prototype.createFile=function(u,d,y,v){var _=this,A=this.store.beginTransaction("readwrite"),P=be();this.commitNewFile(A,u,b.FILE,y,P,function($,Q){Er($,v)&&v(null,new Cg(_,u,d,Q.toStats(),P))})},c.prototype.openFile=function(u,d,y){var v=this,_=this.store.beginTransaction("readonly");this.findINode(_,u,function(A,P){Er(A,y)&&_.get(P.id,function($,Q){Er($,y)&&(Q===void 0?y(p.ENOENT(u)):y(null,new Cg(v,u,d,P.toStats(),Q)))})})},c.prototype.unlink=function(u,d){this.removeEntry(u,!1,d)},c.prototype.rmdir=function(u,d){var y=this;this.readdir(u,function(v,_){v?d(v):_.length>0?d(p.ENOTEMPTY(u)):y.removeEntry(u,!0,d)})},c.prototype.mkdir=function(u,d,y){var v=this.store.beginTransaction("readwrite"),_=n.from("{}");this.commitNewFile(v,u,b.DIRECTORY,d,_,y)},c.prototype.readdir=function(u,d){var y=this,v=this.store.beginTransaction("readonly");this.findINode(v,u,function(_,A){Er(_,d)&&y.getDirListing(v,u,A,function(P,$){Er(P,d)&&d(null,Object.keys($))})})},c.prototype._sync=function(u,d,y,v){var _=this,A=this.store.beginTransaction("readwrite");this._findINode(A,h.dirname(u),h.basename(u),function(P,$){Nt(P,A,v)&&_.getINode(A,u,$,function(Q,fe){if(Nt(Q,A,v)){var pe=fe.update(y);A.put(fe.id,d,!0,function(ve){Nt(ve,A,v)&&(pe?A.put($,fe.toBuffer(),!0,function(we){Nt(we,A,v)&&A.commit(v)}):A.commit(v))})}})})},c.prototype.makeRootDirectory=function(u){var d=this.store.beginTransaction("readwrite");d.get(jn,function(y,v){if(y||v===void 0){var _=new Date().getTime(),A=new ar(gl(),4096,511|b.DIRECTORY,_,_,_);d.put(A.id,Rg(),!1,function(P){Nt(P,d,u)&&d.put(jn,A.toBuffer(),!1,function($){$?d.abort(function(){u($)}):d.commit(u)})})}else d.commit(u)})},c.prototype._findINode=function(u,d,y,v){var _=this,A=function(P,$,Q){P?v(P):Q[y]?v(null,Q[y]):v(p.ENOENT(h.resolve(d,y)))};d==="/"?y===""?v(null,jn):this.getINode(u,d,jn,function(P,$){Er(P,v)&&_.getDirListing(u,d,$,function(Q,fe){A(Q,0,fe)})}):this.findINodeAndDirListing(u,d,A)},c.prototype.findINode=function(u,d,y){var v=this;this._findINode(u,h.dirname(d),h.basename(d),function(_,A){Er(_,y)&&v.getINode(u,d,A,y)})},c.prototype.getINode=function(u,d,y,v){u.get(y,function(_,A){Er(_,v)&&(A===void 0?v(p.ENOENT(d)):v(null,ar.fromBuffer(A)))})},c.prototype.getDirListing=function(u,d,y,v){y.isDirectory()?u.get(y.id,function(_,A){if(Er(_,v))try{v(null,JSON.parse(A.toString()))}catch{v(p.ENOENT(d))}}):v(p.ENOTDIR(d))},c.prototype.findINodeAndDirListing=function(u,d,y){var v=this;this.findINode(u,d,function(_,A){Er(_,y)&&v.getDirListing(u,d,A,function(P,$){Er(P,y)&&y(null,A,$)})})},c.prototype.addNewNode=function(u,d,y){var v,_=0,A=function(){++_==5?y(new p(a.EIO,"Unable to commit data to key-value store.")):(v=gl(),u.put(v,d,!1,function(P,$){P||!$?A():y(null,v)}))};A()},c.prototype.commitNewFile=function(u,d,y,v,_,A){var P=this,$=h.dirname(d),Q=h.basename(d),fe=new Date().getTime();if(d==="/")return A(p.EEXIST(d));this.findINodeAndDirListing(u,$,function(pe,ve,we){Nt(pe,u,A)&&(we[Q]?u.abort(function(){A(p.EEXIST(d))}):P.addNewNode(u,_,function(ke,Be){if(Nt(ke,u,A)){var Ot=new ar(Be,_.length,v|y,fe,fe,fe);P.addNewNode(u,Ot.toBuffer(),function(Yr,Tr){Nt(Yr,u,A)&&(we[Q]=Tr,u.put(ve.id,n.from(JSON.stringify(we)),!0,function(Eo){Nt(Eo,u,A)&&u.commit(function(cr){Nt(cr,u,A)&&A(null,Ot)})}))})}}))})},c.prototype.removeEntry=function(u,d,y){var v=this,_=this.store.beginTransaction("readwrite"),A=h.dirname(u),P=h.basename(u);this.findINodeAndDirListing(_,A,function($,Q,fe){if(Nt($,_,y))if(fe[P]){var pe=fe[P];delete fe[P],v.getINode(_,u,pe,function(ve,we){Nt(ve,_,y)&&(!d&&we.isDirectory()?_.abort(function(){y(p.EISDIR(u))}):d&&!we.isDirectory()?_.abort(function(){y(p.ENOTDIR(u))}):_.del(we.id,function(ke){Nt(ke,_,y)&&_.del(pe,function(Be){Nt(Be,_,y)&&_.put(Q.id,n.from(JSON.stringify(fe)),!0,function(Ot){Nt(Ot,_,y)&&_.commit(y)})})}))})}else _.abort(function(){y(p.ENOENT(u))})})},c}(K),bi=function(){this.store={}};bi.prototype.name=function(){return mo.Name},bi.prototype.clear=function(){this.store={}},bi.prototype.beginTransaction=function(f){return new xn(this)},bi.prototype.get=function(f){return this.store[f]},bi.prototype.put=function(f,c,u){return!(!u&&this.store.hasOwnProperty(f)||(this.store[f]=c,0))},bi.prototype.del=function(f){delete this.store[f]};var mo=function(f){function c(){f.call(this,{store:new bi})}return f&&(c.__proto__=f),c.prototype=Object.create(f&&f.prototype),c.prototype.constructor=c,c.Create=function(u,d){d(null,new c)},c}(Fg);mo.Name="InMemory",mo.Options={};var Ef=bt.indexedDB||bt.mozIndexedDB||bt.webkitIndexedDB||bt.msIndexedDB;function ks(f,c){switch(c===void 0&&(c=f.toString()),f.name){case"NotFoundError":return new p(a.ENOENT,c);case"QuotaExceededError":return new p(a.ENOSPC,c);default:return new p(a.EIO,c)}}function Ns(f,c,u){return c===void 0&&(c=a.EIO),u===void 0&&(u=null),function(d){d.preventDefault(),f(new p(c,u!==null?u:void 0))}}var Of=function(f,c){this.tx=f,this.store=c};Of.prototype.get=function(f,c){try{var u=this.store.get(f);u.onerror=Ns(c),u.onsuccess=function(d){var y=d.target.result;c(null,y===void 0?y:ne(y))}}catch(d){c(ks(d))}};var lO=function(f){function c(u,d){f.call(this,u,d)}return f&&(c.__proto__=f),c.prototype=Object.create(f&&f.prototype),c.prototype.constructor=c,c.prototype.put=function(u,d,y,v){try{var _,A=V(d);(_=y?this.store.put(A,u):this.store.add(A,u)).onerror=Ns(v),_.onsuccess=function(P){v(null,!0)}}catch(P){v(ks(P))}},c.prototype.del=function(u,d){try{var y=this.store.delete(u);y.onerror=Ns(d),y.onsuccess=function(v){d()}}catch(v){d(ks(v))}},c.prototype.commit=function(u){setTimeout(u,0)},c.prototype.abort=function(u){var d=null;try{this.tx.abort()}catch(y){d=ks(y)}finally{u(d)}},c}(Of),yl=function(f,c){var u=this;c===void 0&&(c="browserfs"),this.storeName=c;var d=Ef.open(this.storeName,1);d.onupgradeneeded=function(y){var v=y.target.result;v.objectStoreNames.contains(u.storeName)&&v.deleteObjectStore(u.storeName),v.createObjectStore(u.storeName)},d.onsuccess=function(y){u.db=y.target.result,f(null,u)},d.onerror=Ns(f,a.EACCES)};yl.prototype.name=function(){return Is.Name+" - "+this.storeName},yl.prototype.clear=function(f){try{var c=this.db.transaction(this.storeName,"readwrite").objectStore(this.storeName).clear();c.onsuccess=function(u){setTimeout(f,0)},c.onerror=Ns(f)}catch(u){f(ks(u))}},yl.prototype.beginTransaction=function(f){f===void 0&&(f="readonly");var c=this.db.transaction(this.storeName,f),u=c.objectStore(this.storeName);if(f==="readwrite")return new lO(c,u);if(f==="readonly")return new Of(c,u);throw new p(a.EINVAL,"Invalid transaction type.")};var Is=function(f){function c(u,d,y){var v=this;y===void 0&&(y=!0),f.call(this),this.store=new yl(function(_){_?u(_):v.init(v.store,function(A){u(A,v)})},d),ye(y,c.Name,{storeName:d})}return f&&(c.__proto__=f),c.prototype=Object.create(f&&f.prototype),c.prototype.constructor=c,c.Create=function(u,d){new c(d,u.storeName,!1)},c.isAvailable=function(){try{return Ef!==void 0&&Ef.open("__browserfs_test__")!==null}catch{return!1}},c}(aO);Is.Name="IndexedDB",Is.Options={storeName:{type:"string",optional:!0,description:"The name of this file system. You can have multiple IndexedDB file systems operating at once, but each must have a different name."}};var As,xf=!1;try{bt.localStorage.setItem("__test__",String.fromCharCode(55296)),xf=bt.localStorage.getItem("__test__")===String.fromCharCode(55296)}catch{xf=!1}As=xf?"binary_string":"binary_string_ie",n.isEncoding(As)||(As="base64");var Ei=function(){};Ei.prototype.name=function(){return Rs.Name},Ei.prototype.clear=function(){bt.localStorage.clear()},Ei.prototype.beginTransaction=function(f){return new xn(this)},Ei.prototype.get=function(f){try{var c=bt.localStorage.getItem(f);if(c!==null)return n.from(c,As)}catch{}},Ei.prototype.put=function(f,c,u){try{return!(!u&&bt.localStorage.getItem(f)!==null||(bt.localStorage.setItem(f,c.toString(As)),0))}catch{throw new p(a.ENOSPC,"LocalStorage is full.")}},Ei.prototype.del=function(f){try{bt.localStorage.removeItem(f)}catch(c){throw new p(a.EIO,"Unable to delete key "+f+": "+c)}};var Rs=function(f){function c(){f.call(this,{store:new Ei})}return f&&(c.__proto__=f),c.prototype=Object.create(f&&f.prototype),c.prototype.constructor=c,c.Create=function(u,d){d(null,new c)},c.isAvailable=function(){return bt.localStorage!==void 0},c}(Fg);Rs.Name="LocalStorage",Rs.Options={};var vo=function(f){function c(){f.call(this),this.mountList=[],this.mntMap={},this.rootFs=new mo}return f&&(c.__proto__=f),c.prototype=Object.create(f&&f.prototype),c.prototype.constructor=c,c.Create=function(u,d){var y=new c;Object.keys(u).forEach(function(v){y.mount(v,u[v])}),d(null,y)},c.isAvailable=function(){return!0},c.prototype.mount=function(u,d){if(u[0]!=="/"&&(u="/"+u),u=h.resolve(u),this.mntMap[u])throw new p(a.EINVAL,"Mount point "+u+" is already taken.");B(u,511,this.rootFs),this.mntMap[u]=d,this.mountList.push(u),this.mountList=this.mountList.sort(function(y,v){return v.length-y.length})},c.prototype.umount=function(u){if(u[0]!=="/"&&(u="/"+u),u=h.resolve(u),!this.mntMap[u])throw new p(a.EINVAL,"Mount point "+u+" is already unmounted.");for(delete this.mntMap[u],this.mountList.splice(this.mountList.indexOf(u),1);u!=="/"&&this.rootFs.readdirSync(u).length===0;)this.rootFs.rmdirSync(u),u=h.dirname(u)},c.prototype._getFs=function(u){for(var d=this.mountList,y=d.length,v=0;v<y;v++){var _=d[v];if(_.length<=u.length&&u.indexOf(_)===0)return(u=u.substr(_.length>1?_.length:0))===""&&(u="/"),{fs:this.mntMap[_],path:u}}return{fs:this.rootFs,path:u}},c.prototype.getName=function(){return c.Name},c.prototype.diskSpace=function(u,d){d(0,0)},c.prototype.isReadOnly=function(){return!1},c.prototype.supportsLinks=function(){return!1},c.prototype.supportsProps=function(){return!1},c.prototype.supportsSynch=function(){return!0},c.prototype.standardizeError=function(u,d,y){var v=u.message.indexOf(d);return v!==-1&&(u.message=u.message.substr(0,v)+y+u.message.substr(v+d.length),u.path=y),u},c.prototype.rename=function(u,d,y){var v=this,_=this._getFs(u),A=this._getFs(d);return _.fs===A.fs?_.fs.rename(_.path,A.path,function(P){P&&v.standardizeError(v.standardizeError(P,_.path,u),A.path,d),y(P)}):te.readFile(u,function(P,$){if(P)return y(P);te.writeFile(d,$,function(Q){if(Q)return y(Q);te.unlink(u,y)})})},c.prototype.renameSync=function(u,d){var y=this._getFs(u),v=this._getFs(d);if(y.fs===v.fs)try{return y.fs.renameSync(y.path,v.path)}catch(A){throw this.standardizeError(this.standardizeError(A,y.path,u),v.path,d),A}var _=te.readFileSync(u);return te.writeFileSync(d,_),te.unlinkSync(u)},c.prototype.readdirSync=function(u){var d=this._getFs(u),y=null;if(d.fs!==this.rootFs)try{y=this.rootFs.readdirSync(u)}catch{}try{var v=d.fs.readdirSync(d.path);return y===null?v:v.concat(y.filter(function(_){return v.indexOf(_)===-1}))}catch(_){if(y===null)throw this.standardizeError(_,d.path,u);return y}},c.prototype.readdir=function(u,d){var y=this,v=this._getFs(u);v.fs.readdir(v.path,function(_,A){if(v.fs!==y.rootFs)try{var P=y.rootFs.readdirSync(u);A=A?A.concat(P.filter(function($){return A.indexOf($)===-1})):P}catch{if(_)return d(y.standardizeError(_,v.path,u))}else if(_)return d(y.standardizeError(_,v.path,u));d(null,A)})},c.prototype.rmdirSync=function(u){var d=this._getFs(u);if(this._containsMountPt(u))throw p.ENOTEMPTY(u);try{d.fs.rmdirSync(d.path)}catch(y){throw this.standardizeError(y,d.path,u)}},c.prototype.rmdir=function(u,d){var y=this,v=this._getFs(u);this._containsMountPt(u)?d(p.ENOTEMPTY(u)):v.fs.rmdir(v.path,function(_){d(_?y.standardizeError(_,v.path,u):null)})},c.prototype._containsMountPt=function(u){for(var d=this.mountList,y=d.length,v=0;v<y;v++){var _=d[v];if(_.length>=u.length&&_.slice(0,u.length)===u)return!0}return!1},c}(K);function Lg(f,c,u){return c?function(){for(var d=[],y=arguments.length;y--;)d[y]=arguments[y];var v=d[0],_=this._getFs(v);d[0]=_.path;try{return _.fs[f].apply(_.fs,d)}catch(A){throw this.standardizeError(A,_.path,v),A}}:function(){for(var d=this,y=[],v=arguments.length;v--;)y[v]=arguments[v];var _=y[0],A=this._getFs(_);if(y[0]=A.path,typeof y[y.length-1]=="function"){var P=y[y.length-1];y[y.length-1]=function(){for(var $=[],Q=arguments.length;Q--;)$[Q]=arguments[Q];$.length>0&&$[0]instanceof p&&d.standardizeError($[0],A.path,_),P.apply(null,$)}}return A.fs[f].apply(A.fs,y)}}vo.Name="MountableFileSystem",vo.Options={};for(var Ds,Pg=[["exists","unlink","readlink"],["stat","mkdir","realpath","truncate"],["open","readFile","chmod","utimes"],["chown"],["writeFile","appendFile"]],Tf=0;Tf<Pg.length;Tf++)for(var kf=0,Mg=Pg[Tf];kf<Mg.length;kf+=1){var ml=Mg[kf];vo.prototype[ml]=Lg(ml,!1),vo.prototype[ml+"Sync"]=Lg(ml+"Sync",!0)}if(typeof setImmediate<"u")Ds=setImmediate;else{var Cr=bt,wo=[],jg="zero-timeout-message";if(function(){if(Cr.importScripts!==void 0||!Cr.postMessage)return!1;var f=!0,c=Cr.onmessage;return Cr.onmessage=function(){f=!1},Cr.postMessage("","*"),Cr.onmessage=c,f}()){Ds=function(f){wo.push(f),Cr.postMessage(jg,"*")};var Ug=function(f){if(f.source===self&&f.data===jg&&(f.stopPropagation?f.stopPropagation():f.cancelBubble=!0,wo.length>0))return wo.shift()()};Cr.addEventListener?Cr.addEventListener("message",Ug,!0):Cr.attachEvent("onmessage",Ug)}else if(Cr.MessageChannel){var Bg=new Cr.MessageChannel;Bg.port1.onmessage=function(f){if(wo.length>0)return wo.shift()()},Ds=function(f){wo.push(f),Bg.port2.postMessage("")}}else Ds=function(f){return setTimeout(f,0)}}var Nf=Ds,Fs=function(){this._locked=!1,this._waiters=[]};Fs.prototype.lock=function(f){this._locked?this._waiters.push(f):(this._locked=!0,f())},Fs.prototype.unlock=function(){if(!this._locked)throw new Error("unlock of a non-locked mutex");var f=this._waiters.shift();f?Nf(f):this._locked=!1},Fs.prototype.tryLock=function(){return!this._locked&&(this._locked=!0,!0)},Fs.prototype.isLocked=function(){return this._locked};var Ne=function(f){this._fs=f,this._mu=new Fs};Ne.prototype.getName=function(){return"LockedFS<"+this._fs.getName()+">"},Ne.prototype.getFSUnlocked=function(){return this._fs},Ne.prototype.initialize=function(f){this._fs.initialize(f)},Ne.prototype.diskSpace=function(f,c){this._fs.diskSpace(f,c)},Ne.prototype.isReadOnly=function(){return this._fs.isReadOnly()},Ne.prototype.supportsLinks=function(){return this._fs.supportsLinks()},Ne.prototype.supportsProps=function(){return this._fs.supportsProps()},Ne.prototype.supportsSynch=function(){return this._fs.supportsSynch()},Ne.prototype.rename=function(f,c,u){var d=this;this._mu.lock(function(){d._fs.rename(f,c,function(y){d._mu.unlock(),u(y)})})},Ne.prototype.renameSync=function(f,c){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.renameSync(f,c)},Ne.prototype.stat=function(f,c,u){var d=this;this._mu.lock(function(){d._fs.stat(f,c,function(y,v){d._mu.unlock(),u(y,v)})})},Ne.prototype.statSync=function(f,c){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.statSync(f,c)},Ne.prototype.open=function(f,c,u,d){var y=this;this._mu.lock(function(){y._fs.open(f,c,u,function(v,_){y._mu.unlock(),d(v,_)})})},Ne.prototype.openSync=function(f,c,u){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.openSync(f,c,u)},Ne.prototype.unlink=function(f,c){var u=this;this._mu.lock(function(){u._fs.unlink(f,function(d){u._mu.unlock(),c(d)})})},Ne.prototype.unlinkSync=function(f){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.unlinkSync(f)},Ne.prototype.rmdir=function(f,c){var u=this;this._mu.lock(function(){u._fs.rmdir(f,function(d){u._mu.unlock(),c(d)})})},Ne.prototype.rmdirSync=function(f){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.rmdirSync(f)},Ne.prototype.mkdir=function(f,c,u){var d=this;this._mu.lock(function(){d._fs.mkdir(f,c,function(y){d._mu.unlock(),u(y)})})},Ne.prototype.mkdirSync=function(f,c){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.mkdirSync(f,c)},Ne.prototype.readdir=function(f,c){var u=this;this._mu.lock(function(){u._fs.readdir(f,function(d,y){u._mu.unlock(),c(d,y)})})},Ne.prototype.readdirSync=function(f){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.readdirSync(f)},Ne.prototype.exists=function(f,c){var u=this;this._mu.lock(function(){u._fs.exists(f,function(d){u._mu.unlock(),c(d)})})},Ne.prototype.existsSync=function(f){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.existsSync(f)},Ne.prototype.realpath=function(f,c,u){var d=this;this._mu.lock(function(){d._fs.realpath(f,c,function(y,v){d._mu.unlock(),u(y,v)})})},Ne.prototype.realpathSync=function(f,c){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.realpathSync(f,c)},Ne.prototype.truncate=function(f,c,u){var d=this;this._mu.lock(function(){d._fs.truncate(f,c,function(y){d._mu.unlock(),u(y)})})},Ne.prototype.truncateSync=function(f,c){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.truncateSync(f,c)},Ne.prototype.readFile=function(f,c,u,d){var y=this;this._mu.lock(function(){y._fs.readFile(f,c,u,function(v,_){y._mu.unlock(),d(v,_)})})},Ne.prototype.readFileSync=function(f,c,u){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.readFileSync(f,c,u)},Ne.prototype.writeFile=function(f,c,u,d,y,v){var _=this;this._mu.lock(function(){_._fs.writeFile(f,c,u,d,y,function(A){_._mu.unlock(),v(A)})})},Ne.prototype.writeFileSync=function(f,c,u,d,y){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.writeFileSync(f,c,u,d,y)},Ne.prototype.appendFile=function(f,c,u,d,y,v){var _=this;this._mu.lock(function(){_._fs.appendFile(f,c,u,d,y,function(A){_._mu.unlock(),v(A)})})},Ne.prototype.appendFileSync=function(f,c,u,d,y){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.appendFileSync(f,c,u,d,y)},Ne.prototype.chmod=function(f,c,u,d){var y=this;this._mu.lock(function(){y._fs.chmod(f,c,u,function(v){y._mu.unlock(),d(v)})})},Ne.prototype.chmodSync=function(f,c,u){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.chmodSync(f,c,u)},Ne.prototype.chown=function(f,c,u,d,y){var v=this;this._mu.lock(function(){v._fs.chown(f,c,u,d,function(_){v._mu.unlock(),y(_)})})},Ne.prototype.chownSync=function(f,c,u,d){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.chownSync(f,c,u,d)},Ne.prototype.utimes=function(f,c,u,d){var y=this;this._mu.lock(function(){y._fs.utimes(f,c,u,function(v){y._mu.unlock(),d(v)})})},Ne.prototype.utimesSync=function(f,c,u){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.utimesSync(f,c,u)},Ne.prototype.link=function(f,c,u){var d=this;this._mu.lock(function(){d._fs.link(f,c,function(y){d._mu.unlock(),u(y)})})},Ne.prototype.linkSync=function(f,c){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.linkSync(f,c)},Ne.prototype.symlink=function(f,c,u,d){var y=this;this._mu.lock(function(){y._fs.symlink(f,c,u,function(v){y._mu.unlock(),d(v)})})},Ne.prototype.symlinkSync=function(f,c,u){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.symlinkSync(f,c,u)},Ne.prototype.readlink=function(f,c){var u=this;this._mu.lock(function(){u._fs.readlink(f,function(d,y){u._mu.unlock(),c(d,y)})})},Ne.prototype.readlinkSync=function(f){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.readlinkSync(f)};var Tn="/.deletedFiles.log";function zg(f){return 146|f}function Or(f){return N.getFileFlag(f)}var st,Vg=function(f){function c(u,d,y,v,_){f.call(this,u,d,y,v,_)}return f&&(c.__proto__=f),c.prototype=Object.create(f&&f.prototype),c.prototype.constructor=c,c.prototype.sync=function(u){var d=this;this.isDirty()?this._fs._syncAsync(this,function(y){d.resetDirty(),u(y)}):u(null)},c.prototype.syncSync=function(){this.isDirty()&&(this._fs._syncSync(this),this.resetDirty())},c.prototype.close=function(u){this.sync(u)},c.prototype.closeSync=function(){this.syncSync()},c}(E),Wg=function(f){function c(u,d){if(f.call(this),this._isInitialized=!1,this._initializeCallbacks=[],this._deletedFiles={},this._deleteLog="",this._deleteLogUpdatePending=!1,this._deleteLogUpdateNeeded=!1,this._deleteLogError=null,this._writable=u,this._readable=d,this._writable.isReadOnly())throw new p(a.EINVAL,"Writable file system must be writable.")}return f&&(c.__proto__=f),c.prototype=Object.create(f&&f.prototype),c.prototype.constructor=c,c.isAvailable=function(){return!0},c.prototype.getOverlayedFileSystems=function(){return{readable:this._readable,writable:this._writable}},c.prototype._syncAsync=function(u,d){var y=this;this.createParentDirectoriesAsync(u.getPath(),function(v){if(v)return d(v);y._writable.writeFile(u.getPath(),u.getBuffer(),null,Or("w"),u.getStats().mode,d)})},c.prototype._syncSync=function(u){this.createParentDirectories(u.getPath()),this._writable.writeFileSync(u.getPath(),u.getBuffer(),null,Or("w"),u.getStats().mode)},c.prototype.getName=function(){return Cs.Name},c.prototype.initialize=function(u){var d=this,y=this._initializeCallbacks,v=function(_){d._isInitialized=!_,d._initializeCallbacks=[],y.forEach(function(A){return A(_)})};if(this._isInitialized)return u();y.push(u),y.length===1&&this._writable.readFile(Tn,"utf8",Or("r"),function(_,A){if(_){if(_.errno!==a.ENOENT)return v(_)}else d._deleteLog=A;d._reparseDeletionLog(),v()})},c.prototype.isReadOnly=function(){return!1},c.prototype.supportsSynch=function(){return this._readable.supportsSynch()&&this._writable.supportsSynch()},c.prototype.supportsLinks=function(){return!1},c.prototype.supportsProps=function(){return this._readable.supportsProps()&&this._writable.supportsProps()},c.prototype.getDeletionLog=function(){return this._deleteLog},c.prototype.restoreDeletionLog=function(u){this._deleteLog=u,this._reparseDeletionLog(),this.updateLog("")},c.prototype.rename=function(u,d,y){var v=this;if(this.checkInitAsync(y)&&!this.checkPathAsync(u,y)&&!this.checkPathAsync(d,y))return u===Tn||d===Tn?y(p.EPERM("Cannot rename deletion log.")):u===d?y():void this.stat(u,!1,function(_,A){return _?y(_):v.stat(d,!1,function(P,$){var Q=v;function fe(ve){var we=ve.shift();if(!we)return y();var ke=h.resolve(u,we),Be=h.resolve(d,we);Q.rename(ke,Be,function(Ot){if(Ot)return y(Ot);fe(ve)})}var pe=511;if(A.isDirectory()){if(P)return P.errno!==a.ENOENT?y(P):v._writable.exists(u,function(ve){if(ve)return v._writable.rename(u,d,y);v._writable.mkdir(d,pe,function(we){if(we)return y(we);v._readable.readdir(u,function(ke,Be){if(ke)return y();fe(Be)})})});if(pe=$.mode,!$.isDirectory())return y(p.ENOTDIR(d));v.readdir(d,function(ve,we){if(we&&we.length)return y(p.ENOTEMPTY(d));v._readable.readdir(u,function(ke,Be){if(ke)return y();fe(Be)})})}if($&&$.isDirectory())return y(p.EISDIR(d));v.readFile(u,null,Or("r"),function(ve,we){return ve?y(ve):v.writeFile(d,we,null,Or("w"),A.mode,function(ke){return ke?y(ke):v.unlink(u,y)})})})})},c.prototype.renameSync=function(u,d){var y=this;if(this.checkInitialized(),this.checkPath(u),this.checkPath(d),u===Tn||d===Tn)throw p.EPERM("Cannot rename deletion log.");var v=this.statSync(u,!1);if(v.isDirectory()){if(u===d)return;var _=511;if(this.existsSync(d)){var A=this.statSync(d,!1);if(_=A.mode,!A.isDirectory())throw p.ENOTDIR(d);if(this.readdirSync(d).length>0)throw p.ENOTEMPTY(d)}this._writable.existsSync(u)?this._writable.renameSync(u,d):this._writable.existsSync(d)||this._writable.mkdirSync(d,_),this._readable.existsSync(u)&&this._readable.readdirSync(u).forEach(function(P){y.renameSync(h.resolve(u,P),h.resolve(d,P))})}else{if(this.existsSync(d)&&this.statSync(d,!1).isDirectory())throw p.EISDIR(d);this.writeFileSync(d,this.readFileSync(u,null,Or("r")),null,Or("w"),v.mode)}u!==d&&this.existsSync(u)&&this.unlinkSync(u)},c.prototype.stat=function(u,d,y){var v=this;this.checkInitAsync(y)&&this._writable.stat(u,d,function(_,A){_&&_.errno===a.ENOENT?(v._deletedFiles[u]&&y(p.ENOENT(u)),v._readable.stat(u,d,function(P,$){$&&(($=$.clone()).mode=zg($.mode)),y(P,$)})):y(_,A)})},c.prototype.statSync=function(u,d){this.checkInitialized();try{return this._writable.statSync(u,d)}catch{if(this._deletedFiles[u])throw p.ENOENT(u);var y=this._readable.statSync(u,d).clone();return y.mode=zg(y.mode),y}},c.prototype.open=function(u,d,y,v){var _=this;this.checkInitAsync(v)&&!this.checkPathAsync(u,v)&&this.stat(u,!1,function(A,P){if(!P)return d.pathNotExistsAction()===m.CREATE_FILE?_.createParentDirectoriesAsync(u,function($){return $?v($):_._writable.open(u,d,y,v)}):v(p.ENOENT(u));switch(d.pathExistsAction()){case m.TRUNCATE_FILE:return _.createParentDirectoriesAsync(u,function($){if($)return v($);_._writable.open(u,d,y,v)});case m.NOP:return _._writable.exists(u,function($){$?_._writable.open(u,d,y,v):((P=P.clone()).mode=y,_._readable.readFile(u,null,Or("r"),function(Q,fe){if(Q)return v(Q);P.size===-1&&(P.size=fe.length);var pe=new Vg(_,u,d,P,fe);v(null,pe)}))});default:return v(p.EEXIST(u))}})},c.prototype.openSync=function(u,d,y){if(this.checkInitialized(),this.checkPath(u),u===Tn)throw p.EPERM("Cannot open deletion log.");if(!this.existsSync(u)){if(d.pathNotExistsAction()===m.CREATE_FILE)return this.createParentDirectories(u),this._writable.openSync(u,d,y);throw p.ENOENT(u)}switch(d.pathExistsAction()){case m.TRUNCATE_FILE:return this.createParentDirectories(u),this._writable.openSync(u,d,y);case m.NOP:if(this._writable.existsSync(u))return this._writable.openSync(u,d,y);var v=this._readable.readFileSync(u,null,Or("r")),_=this._readable.statSync(u,!1).clone();return _.mode=y,new Vg(this,u,d,_,v);default:throw p.EEXIST(u)}},c.prototype.unlink=function(u,d){var y=this;this.checkInitAsync(d)&&!this.checkPathAsync(u,d)&&this.exists(u,function(v){if(!v)return d(p.ENOENT(u));y._writable.exists(u,function(_){if(_)return y._writable.unlink(u,function(A){if(A)return d(A);y.exists(u,function(P){P&&y.deletePath(u),d(null)})});y.deletePath(u),d(null)})})},c.prototype.unlinkSync=function(u){if(this.checkInitialized(),this.checkPath(u),!this.existsSync(u))throw p.ENOENT(u);this._writable.existsSync(u)&&this._writable.unlinkSync(u),this.existsSync(u)&&this.deletePath(u)},c.prototype.rmdir=function(u,d){var y=this;if(this.checkInitAsync(d)){var v=function(){y.readdir(u,function(_,A){return _?d(_):A.length?d(p.ENOTEMPTY(u)):(y.deletePath(u),void d(null))})};this.exists(u,function(_){if(!_)return d(p.ENOENT(u));y._writable.exists(u,function(A){A?y._writable.rmdir(u,function(P){if(P)return d(P);y._readable.exists(u,function($){$?v():d()})}):v()})})}},c.prototype.rmdirSync=function(u){if(this.checkInitialized(),!this.existsSync(u))throw p.ENOENT(u);if(this._writable.existsSync(u)&&this._writable.rmdirSync(u),this.existsSync(u)){if(this.readdirSync(u).length>0)throw p.ENOTEMPTY(u);this.deletePath(u)}},c.prototype.mkdir=function(u,d,y){var v=this;this.checkInitAsync(y)&&this.exists(u,function(_){if(_)return y(p.EEXIST(u));v.createParentDirectoriesAsync(u,function(A){if(A)return y(A);v._writable.mkdir(u,d,y)})})},c.prototype.mkdirSync=function(u,d){if(this.checkInitialized(),this.existsSync(u))throw p.EEXIST(u);this.createParentDirectories(u),this._writable.mkdirSync(u,d)},c.prototype.readdir=function(u,d){var y=this;this.checkInitAsync(d)&&this.stat(u,!1,function(v,_){return v?d(v):_.isDirectory()?void y._writable.readdir(u,function(A,P){if(A&&A.code!=="ENOENT")return d(A);!A&&P||(P=[]),y._readable.readdir(u,function($,Q){!$&&Q||(Q=[]);var fe={},pe=P.concat(Q.filter(function(ve){return!y._deletedFiles[u+"/"+ve]})).filter(function(ve){var we=!fe[ve];return fe[ve]=!0,we});d(null,pe)})}):d(p.ENOTDIR(u))})},c.prototype.readdirSync=function(u){var d=this;if(this.checkInitialized(),!this.statSync(u,!1).isDirectory())throw p.ENOTDIR(u);var y=[];try{y=y.concat(this._writable.readdirSync(u))}catch{}try{y=y.concat(this._readable.readdirSync(u).filter(function(_){return!d._deletedFiles[u+"/"+_]}))}catch{}var v={};return y.filter(function(_){var A=!v[_];return v[_]=!0,A})},c.prototype.exists=function(u,d){var y=this;this.checkInitialized(),this._writable.exists(u,function(v){if(v)return d(!0);y._readable.exists(u,function(_){d(_&&y._deletedFiles[u]!==!0)})})},c.prototype.existsSync=function(u){return this.checkInitialized(),this._writable.existsSync(u)||this._readable.existsSync(u)&&this._deletedFiles[u]!==!0},c.prototype.chmod=function(u,d,y,v){var _=this;this.checkInitAsync(v)&&this.operateOnWritableAsync(u,function(A){if(A)return v(A);_._writable.chmod(u,d,y,v)})},c.prototype.chmodSync=function(u,d,y){var v=this;this.checkInitialized(),this.operateOnWritable(u,function(){v._writable.chmodSync(u,d,y)})},c.prototype.chown=function(u,d,y,v,_){var A=this;this.checkInitAsync(_)&&this.operateOnWritableAsync(u,function(P){if(P)return _(P);A._writable.chown(u,d,y,v,_)})},c.prototype.chownSync=function(u,d,y,v){var _=this;this.checkInitialized(),this.operateOnWritable(u,function(){_._writable.chownSync(u,d,y,v)})},c.prototype.utimes=function(u,d,y,v){var _=this;this.checkInitAsync(v)&&this.operateOnWritableAsync(u,function(A){if(A)return v(A);_._writable.utimes(u,d,y,v)})},c.prototype.utimesSync=function(u,d,y){var v=this;this.checkInitialized(),this.operateOnWritable(u,function(){v._writable.utimesSync(u,d,y)})},c.prototype.deletePath=function(u){this._deletedFiles[u]=!0,this.updateLog("d"+u+`
`)},c.prototype.updateLog=function(u){var d=this;this._deleteLog+=u,this._deleteLogUpdatePending?this._deleteLogUpdateNeeded=!0:(this._deleteLogUpdatePending=!0,this._writable.writeFile(Tn,this._deleteLog,"utf8",N.getFileFlag("w"),420,function(y){d._deleteLogUpdatePending=!1,y?d._deleteLogError=y:d._deleteLogUpdateNeeded&&(d._deleteLogUpdateNeeded=!1,d.updateLog(""))}))},c.prototype._reparseDeletionLog=function(){var u=this;this._deletedFiles={},this._deleteLog.split(`
`).forEach(function(d){u._deletedFiles[d.slice(1)]=d.slice(0,1)==="d"})},c.prototype.checkInitialized=function(){if(!this._isInitialized)throw new p(a.EPERM,"OverlayFS is not initialized. Please initialize OverlayFS using its initialize() method before using it.");if(this._deleteLogError!==null){var u=this._deleteLogError;throw this._deleteLogError=null,u}},c.prototype.checkInitAsync=function(u){if(!this._isInitialized)return u(new p(a.EPERM,"OverlayFS is not initialized. Please initialize OverlayFS using its initialize() method before using it.")),!1;if(this._deleteLogError!==null){var d=this._deleteLogError;return this._deleteLogError=null,u(d),!1}return!0},c.prototype.checkPath=function(u){if(u===Tn)throw p.EPERM(u)},c.prototype.checkPathAsync=function(u,d){return u===Tn&&(d(p.EPERM(u)),!0)},c.prototype.createParentDirectoriesAsync=function(u,d){var y=h.dirname(u),v=[],_=this;function A(){if(!v.length)return d();var P=v.pop();_._readable.stat(P,!1,function($,Q){if(!Q)return d();_._writable.mkdir(P,Q.mode,function(fe){if(fe)return d(fe);A()})})}this._writable.stat(y,!1,function P($,Q){$?(v.push(y),y=h.dirname(y),_._writable.stat(y,!1,P)):A()})},c.prototype.createParentDirectories=function(u){for(var d=this,y=h.dirname(u),v=[];!this._writable.existsSync(y);)v.push(y),y=h.dirname(y);(v=v.reverse()).forEach(function(_){d._writable.mkdirSync(_,d.statSync(_,!1).mode)})},c.prototype.operateOnWritable=function(u,d){if(!this.existsSync(u))throw p.ENOENT(u);this._writable.existsSync(u)||this.copyToWritable(u),d()},c.prototype.operateOnWritableAsync=function(u,d){var y=this;this.exists(u,function(v){if(!v)return d(p.ENOENT(u));y._writable.exists(u,function(_){if(!_)return y.copyToWritableAsync(u,d);d()})})},c.prototype.copyToWritable=function(u){var d=this.statSync(u,!1);d.isDirectory()?this._writable.mkdirSync(u,d.mode):this.writeFileSync(u,this._readable.readFileSync(u,null,Or("r")),null,Or("w"),this.statSync(u,!1).mode)},c.prototype.copyToWritableAsync=function(u,d){var y=this;this.stat(u,!1,function(v,_){return v?d(v):_.isDirectory()?y._writable.mkdir(u,_.mode,d):void y._readable.readFile(u,null,Or("r"),function(A,P){if(A)return d(A);y.writeFile(u,P,null,Or("w"),_.mode,d)})})},c}(K),Cs=function(f){function c(u,d,y){y===void 0&&(y=!0),f.call(this,new Wg(u,d)),ye(y,c.Name,{readable:"readable file system",writable:"writable file system"})}return f&&(c.__proto__=f),c.prototype=Object.create(f&&f.prototype),c.prototype.constructor=c,c.Create=function(u,d){try{var y=new c(u.writable,u.readable,!1);y.initialize(function(v){d(v,y)},!1)}catch(v){d(v)}},c.isAvailable=function(){return Wg.isAvailable()},c.prototype.initialize=function(u,d){d===void 0&&(d=!0),d&&console.warn("[OverlayFS] OverlayFS.initialize() is deprecated and will be removed in the next major release. Please use 'OverlayFS.Create({readable: readable file system instance, writable: writable file system instance}, cb)' to create and initialize OverlayFS instances."),f.prototype.initialize.call(this,u)},c.prototype.getOverlayedFileSystems=function(){return f.prototype.getFSUnlocked.call(this).getOverlayedFileSystems()},c.prototype.unwrap=function(){return f.prototype.getFSUnlocked.call(this)},c}(Ne);Cs.Name="OverlayFS",Cs.Options={writable:{type:"object",description:"The file system to write modified files to."},readable:{type:"object",description:"The file system that initially populates this file system."}},function(f){f[f.CB=0]="CB",f[f.FD=1]="FD",f[f.API_ERROR=2]="API_ERROR",f[f.STATS=3]="STATS",f[f.PROBE=4]="PROBE",f[f.FILEFLAG=5]="FILEFLAG",f[f.BUFFER=6]="BUFFER",f[f.ERROR=7]="ERROR"}(st||(st={}));var If=function(){this._callbacks={},this._nextId=0};If.prototype.toRemoteArg=function(f){var c=this._nextId++;return this._callbacks[c]=f,{type:st.CB,id:c}},If.prototype.toLocalArg=function(f){var c=this._callbacks[f];return delete this._callbacks[f],c};var vl=function(){this._fileDescriptors={},this._nextId=0};function wl(f){return{type:st.API_ERROR,errorData:Oi(f.writeToBuffer())}}function qg(f){return p.fromBuffer(xi(f.errorData))}function $g(f){return{type:st.ERROR,name:f.name,message:f.message,stack:f.stack}}function Hg(f){var c=bt[f.name];typeof c!="function"&&(c=Error);var u=new c(f.message);return u.stack=f.stack,u}function Jg(f){return{type:st.STATS,statsData:Oi(f.toBuffer())}}function Gg(f){return O.fromBuffer(xi(f.statsData))}function Yg(f){return{type:st.FILEFLAG,flagStr:f.getFlagString()}}function Kg(f){return N.getFileFlag(f.flagStr)}function Oi(f){return V(f)}function xi(f){return ne(f)}function Zg(f){return{type:st.BUFFER,data:Oi(f)}}function Xg(f){return xi(f.data)}vl.prototype.toRemoteArg=function(f,c,u,d){var y,v,_=this._nextId++;this._fileDescriptors[_]=f,f.stat(function(A,P){A?d(A):(v=Oi(P.toBuffer()),u.isReadable()?f.read(n.alloc(P.size),0,P.size,0,function($,Q,fe){$?d($):(y=Oi(fe),d(null,{type:st.FD,id:_,data:y,stat:v,path:c,flag:u.getFlagString()}))}):d(null,{type:st.FD,id:_,data:new ArrayBuffer(0),stat:v,path:c,flag:u.getFlagString()}))})},vl.prototype.applyFdAPIRequest=function(f,c){var u=this,d=f.args[0];this._applyFdChanges(d,function(y,v){y?c(y):v[f.method](function(_){f.method==="close"&&delete u._fileDescriptors[d.id],c(_)})})},vl.prototype._applyFdChanges=function(f,c){var u=this._fileDescriptors[f.id],d=xi(f.data),y=O.fromBuffer(xi(f.stat)),v=N.getFileFlag(f.flag);v.isWriteable()?u.write(d,0,d.length,v.isAppendable()?u.getPos():0,function(_){function A(){u.stat(function(P,$){P?c(P):$.mode!==y.mode?u.chmod(y.mode,function(Q){c(Q,u)}):c(P,u)})}_?c(_):v.isAppendable()?A():u.truncate(d.length,function(){A()})}):c(null,u)};var Qg=function(f){function c(u,d,y,v,_,A){f.call(this,u,d,y,v,A),this._remoteFdId=_}return f&&(c.__proto__=f),c.prototype=Object.create(f&&f.prototype),c.prototype.constructor=c,c.prototype.getRemoteFdId=function(){return this._remoteFdId},c.prototype.toRemoteArg=function(){return{type:st.FD,id:this._remoteFdId,data:Oi(this.getBuffer()),stat:Oi(this.getStats().toBuffer()),path:this.getPath(),flag:this.getFlag().getFlagString()}},c.prototype.sync=function(u){this._syncClose("sync",u)},c.prototype.close=function(u){this._syncClose("close",u)},c.prototype._syncClose=function(u,d){var y=this;this.isDirty()?this._fs.syncClose(u,this,function(v){v||y.resetDirty(),d(v)}):d()},c}(E),_l=function(f){function c(u,d){var y=this;d===void 0&&(d=!0),f.call(this),this._callbackConverter=new If,this._isInitialized=!1,this._isReadOnly=!1,this._supportLinks=!1,this._supportProps=!1,this._worker=u,ye(d,c.Name,{worker:"Web Worker instance"}),this._worker.addEventListener("message",function(v){var _,A=v.data;if((_=A)&&typeof _=="object"&&_.hasOwnProperty("browserfsMessage")&&_.browserfsMessage){var P,$=A.args,Q=new Array($.length);for(P=0;P<Q.length;P++)Q[P]=y._argRemote2Local($[P]);y._callbackConverter.toLocalArg(A.cbId).apply(null,Q)}})}return f&&(c.__proto__=f),c.prototype=Object.create(f&&f.prototype),c.prototype.constructor=c,c.Create=function(u,d){var y=new c(u.worker,!1);y.initialize(function(){d(null,y)})},c.isAvailable=function(){return typeof importScripts<"u"||typeof Worker<"u"},c.attachRemoteListener=function(u){var d=new vl;function y(_,A,P){typeof _=="object"?_ instanceof O?P(null,Jg(_)):_ instanceof p?P(null,wl(_)):_ instanceof L?P(null,d.toRemoteArg(_,A[0],A[1],P)):_ instanceof N?P(null,Yg(_)):_ instanceof n?P(null,Zg(_)):_ instanceof Error?P(null,$g(_)):P(null,_):P(null,_)}function v(_,A){if(!_)return _;if(typeof _=="object"){if(typeof _.type!="number")return _;var P=_;switch(P.type){case st.CB:var $=_.id;return function(){var Q,fe,pe=arguments,ve=new Array(arguments.length),we=arguments.length;function ke(Be){we>0&&(we=-1,fe={browserfsMessage:!0,cbId:$,args:[wl(Be)]},u.postMessage(fe))}for(Q=0;Q<arguments.length;Q++)(function(Be,Ot){y(Ot,A,function(Yr,Tr){ve[Be]=Tr,Yr?ke(Yr):--we==0&&(fe={browserfsMessage:!0,cbId:$,args:ve},u.postMessage(fe))})})(Q,pe[Q]);arguments.length===0&&(fe={browserfsMessage:!0,cbId:$,args:ve},u.postMessage(fe))};case st.API_ERROR:return qg(P);case st.STATS:return Gg(P);case st.FILEFLAG:return Kg(P);case st.BUFFER:return Xg(P);case st.ERROR:return Hg(P);default:return _}}return _}u.addEventListener("message",function(_){var A,P,$=_.data;if((P=$)&&typeof P=="object"&&P.hasOwnProperty("browserfsMessage")&&P.browserfsMessage){var Q=$.args,fe=new Array(Q.length);switch($.method){case"close":case"sync":A=Q[1],d.applyFdAPIRequest($,function(we){var ke={browserfsMessage:!0,cbId:A.id,args:we?[wl(we)]:[]};u.postMessage(ke)});break;case"probe":(function(){var we=te.getRootFS(),ke=Q[1],Be={type:st.PROBE,isReadOnly:we.isReadOnly(),supportsLinks:we.supportsLinks(),supportsProps:we.supportsProps()},Ot={browserfsMessage:!0,cbId:ke.id,args:[Be]};u.postMessage(Ot)})();break;default:for(var pe=0;pe<Q.length;pe++)fe[pe]=v(Q[pe],fe);var ve=te.getRootFS();ve[$.method].apply(ve,fe)}}})},c.prototype.getName=function(){return c.Name},c.prototype.initialize=function(u){var d=this;if(this._isInitialized)u();else{var y={browserfsMessage:!0,method:"probe",args:[this._argLocal2Remote(be()),this._callbackConverter.toRemoteArg(function(v){d._isInitialized=!0,d._isReadOnly=v.isReadOnly,d._supportLinks=v.supportsLinks,d._supportProps=v.supportsProps,u()})]};this._worker.postMessage(y)}},c.prototype.isReadOnly=function(){return this._isReadOnly},c.prototype.supportsSynch=function(){return!1},c.prototype.supportsLinks=function(){return this._supportLinks},c.prototype.supportsProps=function(){return this._supportProps},c.prototype.rename=function(u,d,y){this._rpc("rename",arguments)},c.prototype.stat=function(u,d,y){this._rpc("stat",arguments)},c.prototype.open=function(u,d,y,v){this._rpc("open",arguments)},c.prototype.unlink=function(u,d){this._rpc("unlink",arguments)},c.prototype.rmdir=function(u,d){this._rpc("rmdir",arguments)},c.prototype.mkdir=function(u,d,y){this._rpc("mkdir",arguments)},c.prototype.readdir=function(u,d){this._rpc("readdir",arguments)},c.prototype.exists=function(u,d){this._rpc("exists",arguments)},c.prototype.realpath=function(u,d,y){this._rpc("realpath",arguments)},c.prototype.truncate=function(u,d,y){this._rpc("truncate",arguments)},c.prototype.readFile=function(u,d,y,v){this._rpc("readFile",arguments)},c.prototype.writeFile=function(u,d,y,v,_,A){this._rpc("writeFile",arguments)},c.prototype.appendFile=function(u,d,y,v,_,A){this._rpc("appendFile",arguments)},c.prototype.chmod=function(u,d,y,v){this._rpc("chmod",arguments)},c.prototype.chown=function(u,d,y,v,_){this._rpc("chown",arguments)},c.prototype.utimes=function(u,d,y,v){this._rpc("utimes",arguments)},c.prototype.link=function(u,d,y){this._rpc("link",arguments)},c.prototype.symlink=function(u,d,y,v){this._rpc("symlink",arguments)},c.prototype.readlink=function(u,d){this._rpc("readlink",arguments)},c.prototype.syncClose=function(u,d,y){this._worker.postMessage({browserfsMessage:!0,method:u,args:[d.toRemoteArg(),this._callbackConverter.toRemoteArg(y)]})},c.prototype._argRemote2Local=function(u){if(!u)return u;if(typeof u=="object"){if(typeof u.type!="number")return u;var d=u;switch(d.type){case st.API_ERROR:return qg(d);case st.FD:var y=d;return new Qg(this,y.path,N.getFileFlag(y.flag),O.fromBuffer(xi(y.stat)),y.id,xi(y.data));case st.STATS:return Gg(d);case st.FILEFLAG:return Kg(d);case st.BUFFER:return Xg(d);case st.ERROR:return Hg(d);default:return u}}return u},c.prototype._rpc=function(u,d){for(var y=new Array(d.length),v=0;v<d.length;v++)y[v]=this._argLocal2Remote(d[v]);var _={browserfsMessage:!0,method:u,args:y};this._worker.postMessage(_)},c.prototype._argLocal2Remote=function(u){if(!u)return u;switch(typeof u){case"object":return u instanceof O?Jg(u):u instanceof p?wl(u):u instanceof Qg?u.toRemoteArg():u instanceof N?Yg(u):u instanceof n?Zg(u):u instanceof Error?$g(u):"Unknown argument";case"function":return this._callbackConverter.toRemoteArg(u);default:return u}},c}(K);function ey(f,c,u){var d=new XMLHttpRequest;d.open("HEAD",c,f),d.onreadystatechange=function(y){if(d.readyState===4){if(d.status!==200)return u(new p(d.status,"XHR HEAD error."));try{return u(null,parseInt(d.getResponseHeader("Content-Length")||"-1",10))}catch{return u(new p(a.EIO,"XHR HEAD error: Could not read content-length."))}}},d.send()}_l.Name="WorkerFS",_l.Options={worker:{type:"object",description:"The target worker that you want to connect to, or the current worker if in a worker context.",validator:function(f,c){f.postMessage?c():c(new p(a.EINVAL,"option must be a Web Worker instance."))}}};var ty=function(f,c,u){var d=new XMLHttpRequest;d.open("GET",f,!0);var y=!0;switch(c){case"buffer":d.responseType="arraybuffer";break;case"json":try{d.responseType="json",y=d.responseType==="json"}catch{y=!1}break;default:return u(new p(a.EINVAL,"Invalid download type: "+c))}d.onreadystatechange=function(v){if(d.readyState===4){if(d.status!==200)return u(new p(d.status,"XHR error."));switch(c){case"buffer":return u(null,d.response?n.from(d.response):be());case"json":return u(null,y?d.response:JSON.parse(d.responseText))}}},d.send()},uO=M&&typeof Blob<"u"?function(f,c){var u,d,y=new XMLHttpRequest;switch(y.open("GET",f,!1),c){case"buffer":y.responseType="arraybuffer";break;case"json":break;default:throw new p(a.EINVAL,"Invalid download type: "+c)}if(y.onreadystatechange=function(v){if(y.readyState===4)if(y.status===200)switch(c){case"buffer":u=n.from(y.response);break;case"json":u=JSON.parse(y.response)}else d=new p(y.status,"XHR error.")},y.send(),d)throw d;return u}:function(f,c){var u=new XMLHttpRequest;u.open("GET",f,!1);var d=null,y=null;if(u.overrideMimeType("text/plain; charset=x-user-defined"),u.onreadystatechange=function(v){if(u.readyState===4){if(u.status!==200)return void(y=new p(u.status,"XHR error."));switch(c){case"buffer":var _=u.responseText;d=n.alloc(_.length);for(var A=0;A<_.length;A++)d[A]=_.charCodeAt(A);return;case"json":return void(d=JSON.parse(u.responseText))}}},u.send(),y)throw y;return d},Lr=function(){this._index={},this.addPath("/",new lr)};Lr.fromListing=function(f){var c=new Lr,u=new lr;c._index["/"]=u;for(var d=[["",f,u]];d.length>0;){var y=void 0,v=d.pop(),_=v[0],A=v[1],P=v[2];for(var $ in A)if(A.hasOwnProperty($)){var Q=A[$],fe=_+"/"+$;Q?(c._index[fe]=y=new lr,d.push([fe,Q,y])):y=new _o(new O(b.FILE,-1,365)),P&&(P._ls[$]=y)}}return c},Lr.prototype.fileIterator=function(f){var c=this;for(var u in c._index)if(c._index.hasOwnProperty(u))for(var d=c._index[u],y=0,v=d.getListing();y<v.length;y+=1){var _=v[y],A=d.getItem(_);kn(A)&&f(A.getData())}},Lr.prototype.addPath=function(f,c){if(!c)throw new Error("Inode must be specified");if(f[0]!=="/")throw new Error("Path must be absolute, got: "+f);if(this._index.hasOwnProperty(f))return this._index[f]===c;var u=this._split_path(f),d=u[0],y=u[1],v=this._index[d];return!(v===void 0&&f!=="/"&&(v=new lr,!this.addPath(d,v))||f!=="/"&&!v.addItem(y,c)||(Un(c)&&(this._index[f]=c),0))},Lr.prototype.addPathFast=function(f,c){var u=f.lastIndexOf("/"),d=u===0?"/":f.substring(0,u),y=f.substring(u+1),v=this._index[d];return v===void 0&&(v=new lr,this.addPathFast(d,v)),!!v.addItem(y,c)&&(c.isDir()&&(this._index[f]=c),!0)},Lr.prototype.removePath=function(f){var c=this._split_path(f),u=c[0],d=c[1],y=this._index[u];if(y===void 0)return null;var v=y.remItem(d);if(v===null)return null;if(Un(v)){for(var _=0,A=v.getListing();_<A.length;_+=1){var P=A[_];this.removePath(f+"/"+P)}f!=="/"&&delete this._index[f]}return v},Lr.prototype.ls=function(f){var c=this._index[f];return c===void 0?null:c.getListing()},Lr.prototype.getInode=function(f){var c=this._split_path(f),u=c[0],d=c[1],y=this._index[u];return y===void 0?null:u===f?y:y.getItem(d)},Lr.prototype._split_path=function(f){var c=h.dirname(f);return[c,f.substr(c.length+(c==="/"?0:1))]};var _o=function(f){this.data=f};_o.prototype.isFile=function(){return!0},_o.prototype.isDir=function(){return!1},_o.prototype.getData=function(){return this.data},_o.prototype.setData=function(f){this.data=f};var lr=function(f){f===void 0&&(f=null),this.data=f,this._ls={}};function kn(f){return!!f&&f.isFile()}function Un(f){return!!f&&f.isDir()}lr.prototype.isFile=function(){return!1},lr.prototype.isDir=function(){return!0},lr.prototype.getData=function(){return this.data},lr.prototype.getStats=function(){return new O(b.DIRECTORY,4096,365)},lr.prototype.getListing=function(){return Object.keys(this._ls)},lr.prototype.getItem=function(f){var c=this._ls[f];return c||null},lr.prototype.addItem=function(f,c){return!(f in this._ls)&&(this._ls[f]=c,!0)},lr.prototype.remItem=function(f){var c=this._ls[f];return c===void 0?null:(delete this._ls[f],c)};var Sl=function(f){function c(u,d,y){d===void 0&&(d=""),y===void 0&&(y=!0),f.call(this),u||(u="index.json"),d.length>0&&d.charAt(d.length-1)!=="/"&&(d+="/"),this.prefixUrl=d;var v=null;if(typeof u=="string"){if(!(v=this._requestFileSync(u,"json")))throw new Error("Unable to find listing at URL: ${listingUrlOrObj}")}else v=u;ye(y,c.Name,{index:typeof u=="string"?u:"file index as an object",baseUrl:d}),this._index=Lr.fromListing(v)}return f&&(c.__proto__=f),c.prototype=Object.create(f&&f.prototype),c.prototype.constructor=c,c.Create=function(u,d){u.index===void 0&&(u.index="index.json"),typeof u.index=="string"?c.FromURL(u.index,d,u.baseUrl,!1):d(null,new c(u.index,u.baseUrl,!1))},c.isAvailable=function(){return typeof XMLHttpRequest<"u"&&XMLHttpRequest!==null},c.FromURL=function(u,d,y,v){y===void 0&&(y=u.slice(0,u.lastIndexOf("/")+1)),v===void 0&&(v=!0),v&&console.warn(`[XmlHttpRequest] XmlHttpRequest.FromURL() is deprecated and will be removed in the next major release. Please use 'XmlHttpRequest.Create({ index: "`+u+'", baseUrl: "'+y+`" }, cb)' instead.`),ty(u,"json",function(_,A){_?d(_):d(null,new c(A,y,!1))})},c.prototype.empty=function(){this._index.fileIterator(function(u){u.fileData=null})},c.prototype.getName=function(){return c.Name},c.prototype.diskSpace=function(u,d){d(0,0)},c.prototype.isReadOnly=function(){return!0},c.prototype.supportsLinks=function(){return!1},c.prototype.supportsProps=function(){return!1},c.prototype.supportsSynch=function(){return!0},c.prototype.preloadFile=function(u,d){var y=this._index.getInode(u);if(!kn(y))throw p.EISDIR(u);if(y===null)throw p.ENOENT(u);var v=y.getData();v.size=d.length,v.fileData=d},c.prototype.stat=function(u,d,y){var v,_=this._index.getInode(u);if(_===null)return y(p.ENOENT(u));kn(_)?(v=_.getData()).size<0?this._requestFileSizeAsync(u,function(A,P){if(A)return y(A);v.size=P,y(null,v.clone())}):y(null,v.clone()):Un(_)?(v=_.getStats(),y(null,v)):y(p.FileError(a.EINVAL,u))},c.prototype.statSync=function(u,d){var y,v=this._index.getInode(u);if(v===null)throw p.ENOENT(u);if(kn(v))(y=v.getData()).size<0&&(y.size=this._requestFileSizeSync(u));else{if(!Un(v))throw p.FileError(a.EINVAL,u);y=v.getStats()}return y},c.prototype.open=function(u,d,y,v){if(d.isWriteable())return v(new p(a.EPERM,u));var _=this,A=this._index.getInode(u);if(A===null)return v(p.ENOENT(u));if(!kn(A))return v(p.EISDIR(u));var P=A.getData();switch(d.pathExistsAction()){case m.THROW_EXCEPTION:case m.TRUNCATE_FILE:return v(p.EEXIST(u));case m.NOP:if(P.fileData)return v(null,new k(_,u,d,P.clone(),P.fileData));this._requestFileAsync(u,"buffer",function($,Q){return $?v($):(P.size=Q.length,P.fileData=Q,v(null,new k(_,u,d,P.clone(),Q)))});break;default:return v(new p(a.EINVAL,"Invalid FileMode object."))}},c.prototype.openSync=function(u,d,y){if(d.isWriteable())throw new p(a.EPERM,u);var v=this._index.getInode(u);if(v===null)throw p.ENOENT(u);if(!kn(v))throw p.EISDIR(u);var _=v.getData();switch(d.pathExistsAction()){case m.THROW_EXCEPTION:case m.TRUNCATE_FILE:throw p.EEXIST(u);case m.NOP:if(_.fileData)return new k(this,u,d,_.clone(),_.fileData);var A=this._requestFileSync(u,"buffer");return _.size=A.length,_.fileData=A,new k(this,u,d,_.clone(),A);default:throw new p(a.EINVAL,"Invalid FileMode object.")}},c.prototype.readdir=function(u,d){try{d(null,this.readdirSync(u))}catch(y){d(y)}},c.prototype.readdirSync=function(u){var d=this._index.getInode(u);if(d===null)throw p.ENOENT(u);if(Un(d))return d.getListing();throw p.ENOTDIR(u)},c.prototype.readFile=function(u,d,y,v){var _=v;this.open(u,y,420,function(A,P){if(A)return v(A);v=function(Q,fe){P.close(function(pe){return Q||(Q=pe),_(Q,fe)})};var $=P.getBuffer();d===null?v(A,se($)):function(Q,fe,pe){try{pe(null,Q.toString(fe))}catch(ve){pe(ve)}}($,d,v)})},c.prototype.readFileSync=function(u,d,y){var v=this.openSync(u,y,420);try{var _=v.getBuffer();return d===null?se(_):_.toString(d)}finally{v.closeSync()}},c.prototype.getXhrPath=function(u){return u.charAt(0)==="/"&&(u=u.slice(1)),this.prefixUrl+u},c.prototype._requestFileAsync=function(u,d,y){ty(this.getXhrPath(u),d,y)},c.prototype._requestFileSync=function(u,d){return uO(this.getXhrPath(u),d)},c.prototype._requestFileSizeAsync=function(u,d){(function(y,v){ey(!0,y,v)})(this.getXhrPath(u),d)},c.prototype._requestFileSizeSync=function(u){return d=this.getXhrPath(u),y=-1,ey(!1,d,function(v,_){if(v)throw v;y=_}),y;var d,y},c}(K);Sl.Name="XmlHttpRequest",Sl.Options={index:{type:["string","object"],optional:!0,description:"URL to a file index as a JSON file or the file index object itself, generated with the make_xhrfs_index script. Defaults to `index.json`."},baseUrl:{type:"string",optional:!0,description:"Used as the URL prefix for fetched files. Default: Fetch files relative to the index."}};var Ti=function(){};Ti.str2byte=function(f,c){for(var u=f.length>c.length?c.length:f.length,d=0;d<u;d++){var y=f.charCodeAt(d);if(y>127){var v=Ti.extendedChars.indexOf(f.charAt(d));v>-1&&(y=v+128)}c[y]=d}return u},Ti.byte2str=function(f){for(var c=new Array(f.length),u=0;u<f.length;u++){var d=f[u];c[u]=d>127?Ti.extendedChars[d-128]:String.fromCharCode(d)}return c.join("")},Ti.byteLength=function(f){return f.length},Ti.extendedChars=["\xC7","\xFC","\xE9","\xE2","\xE4","\xE0","\xE5","\xE7","\xEA","\xEB","\xE8","\xEF","\xEE","\xEC","\xC4","\xC5","\xC9","\xE6","\xC6","\xF4","\xF6","\xF2","\xFB","\xF9","\xFF","\xD6","\xDC","\xF8","\xA3","\xD8","\xD7","\u0192","\xE1","\xED","\xF3","\xFA","\xF1","\xD1","\xAA","\xBA","\xBF","\xAE","\xAC","\xBD","\xBC","\xA1","\xAB","\xBB","_","_","_","\xA6","\xA6","\xC1","\xC2","\xC0","\xA9","\xA6","\xA6","+","+","\xA2","\xA5","+","+","-","-","+","-","+","\xE3","\xC3","+","+","-","-","\xA6","-","+","\xA4","\xF0","\xD0","\xCA","\xCB","\xC8","i","\xCD","\xCE","\xCF","+","+","_","_","\xA6","\xCC","_","\xD3","\xDF","\xD4","\xD2","\xF5","\xD5","\xB5","\xFE","\xDE","\xDA","\xDB","\xD9","\xFD","\xDD","\xAF","\xB4","\xAD","\xB1","_","\xBE","\xB6","\xA7","\xF7","\xB8","\xB0","\xA8","\xB7","\xB9","\xB3","\xB2","_"," "];var ry,So,cO=r(31).inflateRaw,ny={};function iy(f,c){return new Date(1980+(c>>9),(c>>5&15)-1,31&c,f>>11,f>>5&63,31&f)}function bl(f,c,u,d){return d===0?"":c?f.toString("utf8",u,u+d):Ti.byte2str(f.slice(u,u+d))}(function(f){f[f.MSDOS=0]="MSDOS",f[f.AMIGA=1]="AMIGA",f[f.OPENVMS=2]="OPENVMS",f[f.UNIX=3]="UNIX",f[f.VM_CMS=4]="VM_CMS",f[f.ATARI_ST=5]="ATARI_ST",f[f.OS2_HPFS=6]="OS2_HPFS",f[f.MAC=7]="MAC",f[f.Z_SYSTEM=8]="Z_SYSTEM",f[f.CP_M=9]="CP_M",f[f.NTFS=10]="NTFS",f[f.MVS=11]="MVS",f[f.VSE=12]="VSE",f[f.ACORN_RISC=13]="ACORN_RISC",f[f.VFAT=14]="VFAT",f[f.ALT_MVS=15]="ALT_MVS",f[f.BEOS=16]="BEOS",f[f.TANDEM=17]="TANDEM",f[f.OS_400=18]="OS_400",f[f.OSX=19]="OSX"})(ry||(ry={})),function(f){f[f.STORED=0]="STORED",f[f.SHRUNK=1]="SHRUNK",f[f.REDUCED_1=2]="REDUCED_1",f[f.REDUCED_2=3]="REDUCED_2",f[f.REDUCED_3=4]="REDUCED_3",f[f.REDUCED_4=5]="REDUCED_4",f[f.IMPLODE=6]="IMPLODE",f[f.DEFLATE=8]="DEFLATE",f[f.DEFLATE64=9]="DEFLATE64",f[f.TERSE_OLD=10]="TERSE_OLD",f[f.BZIP2=12]="BZIP2",f[f.LZMA=14]="LZMA",f[f.TERSE_NEW=18]="TERSE_NEW",f[f.LZ77=19]="LZ77",f[f.WAVPACK=97]="WAVPACK",f[f.PPMD=98]="PPMD"}(So||(So={}));var xr=function(f){if(this.data=f,f.readUInt32LE(0)!==67324752)throw new p(a.EINVAL,"Invalid Zip file: Local file header has invalid signature: "+this.data.readUInt32LE(0))};xr.prototype.versionNeeded=function(){return this.data.readUInt16LE(4)},xr.prototype.flags=function(){return this.data.readUInt16LE(6)},xr.prototype.compressionMethod=function(){return this.data.readUInt16LE(8)},xr.prototype.lastModFileTime=function(){return iy(this.data.readUInt16LE(10),this.data.readUInt16LE(12))},xr.prototype.rawLastModFileTime=function(){return this.data.readUInt32LE(10)},xr.prototype.crc32=function(){return this.data.readUInt32LE(14)},xr.prototype.fileNameLength=function(){return this.data.readUInt16LE(26)},xr.prototype.extraFieldLength=function(){return this.data.readUInt16LE(28)},xr.prototype.fileName=function(){return bl(this.data,this.useUTF8(),30,this.fileNameLength())},xr.prototype.extraField=function(){var f=30+this.fileNameLength();return this.data.slice(f,f+this.extraFieldLength())},xr.prototype.totalSize=function(){return 30+this.fileNameLength()+this.extraFieldLength()},xr.prototype.useUTF8=function(){return(2048&this.flags())==2048};var Ls=function(f,c,u){this.header=f,this.record=c,this.data=u};Ls.prototype.decompress=function(){var f=this.header.compressionMethod(),c=ny[f];if(c)return c(this.data,this.record.compressedSize(),this.record.uncompressedSize(),this.record.flag());var u=So[f];throw u||(u="Unknown: "+f),new p(a.EINVAL,"Invalid compression method on file '"+this.header.fileName()+"': "+u)},Ls.prototype.getHeader=function(){return this.header},Ls.prototype.getRecord=function(){return this.record},Ls.prototype.getRawData=function(){return this.data};var je=function(f,c){if(this.zipData=f,this.data=c,this.data.readUInt32LE(0)!==33639248)throw new p(a.EINVAL,"Invalid Zip file: Central directory record has invalid signature: "+this.data.readUInt32LE(0));this._filename=this.produceFilename()};je.prototype.versionMadeBy=function(){return this.data.readUInt16LE(4)},je.prototype.versionNeeded=function(){return this.data.readUInt16LE(6)},je.prototype.flag=function(){return this.data.readUInt16LE(8)},je.prototype.compressionMethod=function(){return this.data.readUInt16LE(10)},je.prototype.lastModFileTime=function(){return iy(this.data.readUInt16LE(12),this.data.readUInt16LE(14))},je.prototype.rawLastModFileTime=function(){return this.data.readUInt32LE(12)},je.prototype.crc32=function(){return this.data.readUInt32LE(16)},je.prototype.compressedSize=function(){return this.data.readUInt32LE(20)},je.prototype.uncompressedSize=function(){return this.data.readUInt32LE(24)},je.prototype.fileNameLength=function(){return this.data.readUInt16LE(28)},je.prototype.extraFieldLength=function(){return this.data.readUInt16LE(30)},je.prototype.fileCommentLength=function(){return this.data.readUInt16LE(32)},je.prototype.diskNumberStart=function(){return this.data.readUInt16LE(34)},je.prototype.internalAttributes=function(){return this.data.readUInt16LE(36)},je.prototype.externalAttributes=function(){return this.data.readUInt32LE(38)},je.prototype.headerRelativeOffset=function(){return this.data.readUInt32LE(42)},je.prototype.produceFilename=function(){return bl(this.data,this.useUTF8(),46,this.fileNameLength()).replace(/\\/g,"/")},je.prototype.fileName=function(){return this._filename},je.prototype.rawFileName=function(){return this.data.slice(46,46+this.fileNameLength())},je.prototype.extraField=function(){var f=44+this.fileNameLength();return this.data.slice(f,f+this.extraFieldLength())},je.prototype.fileComment=function(){var f=46+this.fileNameLength()+this.extraFieldLength();return bl(this.data,this.useUTF8(),f,this.fileCommentLength())},je.prototype.rawFileComment=function(){var f=46+this.fileNameLength()+this.extraFieldLength();return this.data.slice(f,f+this.fileCommentLength())},je.prototype.totalSize=function(){return 46+this.fileNameLength()+this.extraFieldLength()+this.fileCommentLength()},je.prototype.isDirectory=function(){var f=this.fileName();return!!(16&this.externalAttributes())||f.charAt(f.length-1)==="/"},je.prototype.isFile=function(){return!this.isDirectory()},je.prototype.useUTF8=function(){return(2048&this.flag())==2048},je.prototype.isEncrypted=function(){return(1&this.flag())==1},je.prototype.getFileData=function(){var f=this.headerRelativeOffset(),c=new xr(this.zipData.slice(f));return new Ls(c,this,this.zipData.slice(f+c.totalSize()))},je.prototype.getData=function(){return this.getFileData().decompress()},je.prototype.getRawData=function(){return this.getFileData().getRawData()},je.prototype.getStats=function(){return new O(b.FILE,this.uncompressedSize(),365,new Date,this.lastModFileTime())};var hn=function(f){if(this.data=f,this.data.readUInt32LE(0)!==101010256)throw new p(a.EINVAL,"Invalid Zip file: End of central directory record has invalid signature: "+this.data.readUInt32LE(0))};hn.prototype.diskNumber=function(){return this.data.readUInt16LE(4)},hn.prototype.cdDiskNumber=function(){return this.data.readUInt16LE(6)},hn.prototype.cdDiskEntryCount=function(){return this.data.readUInt16LE(8)},hn.prototype.cdTotalEntryCount=function(){return this.data.readUInt16LE(10)},hn.prototype.cdSize=function(){return this.data.readUInt32LE(12)},hn.prototype.cdOffset=function(){return this.data.readUInt32LE(16)},hn.prototype.cdZipCommentLength=function(){return this.data.readUInt16LE(20)},hn.prototype.cdZipComment=function(){return bl(this.data,!0,22,this.cdZipCommentLength())},hn.prototype.rawCdZipComment=function(){return this.data.slice(22,22+this.cdZipCommentLength())};var oy=function(f,c,u,d){this.index=f,this.directoryEntries=c,this.eocd=u,this.data=d},ki=function(f){function c(u,d,y){d===void 0&&(d=""),y===void 0&&(y=!0),f.call(this),this.name=d,this._index=new Lr,this._directoryEntries=[],this._eocd=null,ye(y,c.Name,{zipData:"zip data as a Buffer",name:d}),u instanceof oy?(this._index=u.index,this._directoryEntries=u.directoryEntries,this._eocd=u.eocd,this.data=u.data):(this.data=u,this.populateIndex())}return f&&(c.__proto__=f),c.prototype=Object.create(f&&f.prototype),c.prototype.constructor=c,c.Create=function(u,d){try{c.computeIndex(u.zipData,function(y){var v=new c(y,u.name,!1);d(null,v)},!1)}catch(y){d(y)}},c.isAvailable=function(){return!0},c.RegisterDecompressionMethod=function(u,d){ny[u]=d},c.computeIndex=function(u,d,y){y===void 0&&(y=!0),y&&console.warn("[ZipFS] ZipFS.computeIndex is now deprecated, and will be removed in the next major release. Please update your code to use 'ZipFS.Create({ zipData: zip file as a Buffer}, cb)' instead.");var v=new Lr,_=c.getEOCD(u);if(_.diskNumber()!==_.cdDiskNumber())throw new p(a.EINVAL,"ZipFS does not support spanned zip files.");var A=_.cdOffset();if(A===4294967295)throw new p(a.EINVAL,"ZipFS does not support Zip64.");var P=A+_.cdSize();c.computeIndexResponsive(u,v,A,P,d,[],_)},c.getEOCD=function(u){for(var d=Math.min(65557,u.length-1),y=22;y<d;y++)if(u.readUInt32LE(u.length-y)===101010256)return new hn(u.slice(u.length-y));throw new p(a.EINVAL,"Invalid ZIP file: Could not locate End of Central Directory signature.")},c.addToIndex=function(u,d){var y=u.fileName();if(y.charAt(0)==="/")throw new Error("WHY IS THIS ABSOLUTE");y.charAt(y.length-1)==="/"&&(y=y.substr(0,y.length-1)),u.isDirectory()?d.addPathFast("/"+y,new lr(u)):d.addPathFast("/"+y,new _o(u))},c.computeIndexResponsive=function(u,d,y,v,_,A,P){if(y<v){for(var $=0;$++<200&&y<v;){var Q=new je(u,u.slice(y));c.addToIndex(Q,d),y+=Q.totalSize(),A.push(Q)}Nf(function(){c.computeIndexResponsive(u,d,y,v,_,A,P)})}else _(new oy(d,A,P,u))},c.prototype.getName=function(){return c.Name+(this.name!==""?" "+this.name:"")},c.prototype.getCentralDirectoryEntry=function(u){var d=this._index.getInode(u);if(d===null)throw p.ENOENT(u);if(kn(d)||Un(d))return d.getData();throw p.EPERM("Invalid inode: "+d)},c.prototype.getCentralDirectoryEntryAt=function(u){var d=this._directoryEntries[u];if(!d)throw new RangeError("Invalid directory index: "+u+".");return d},c.prototype.getNumberOfCentralDirectoryEntries=function(){return this._directoryEntries.length},c.prototype.getEndOfCentralDirectory=function(){return this._eocd},c.prototype.diskSpace=function(u,d){d(this.data.length,0)},c.prototype.isReadOnly=function(){return!0},c.prototype.supportsLinks=function(){return!1},c.prototype.supportsProps=function(){return!1},c.prototype.supportsSynch=function(){return!0},c.prototype.statSync=function(u,d){var y,v=this._index.getInode(u);if(v===null)throw p.ENOENT(u);if(kn(v))y=v.getData().getStats();else{if(!Un(v))throw new p(a.EINVAL,"Invalid inode.");y=v.getStats()}return y},c.prototype.openSync=function(u,d,y){if(d.isWriteable())throw new p(a.EPERM,u);var v=this._index.getInode(u);if(!v)throw p.ENOENT(u);if(!kn(v))throw p.EISDIR(u);var _=v.getData(),A=_.getStats();switch(d.pathExistsAction()){case m.THROW_EXCEPTION:case m.TRUNCATE_FILE:throw p.EEXIST(u);case m.NOP:return new k(this,u,d,A,_.getData());default:throw new p(a.EINVAL,"Invalid FileMode object.")}},c.prototype.readdirSync=function(u){var d=this._index.getInode(u);if(d){if(Un(d))return d.getListing();throw p.ENOTDIR(u)}throw p.ENOENT(u)},c.prototype.readFileSync=function(u,d,y){var v=this.openSync(u,y,420);try{var _=v.getBuffer();return d===null?se(_):_.toString(d)}finally{v.closeSync()}},c.prototype.populateIndex=function(){var u=this,d=this._eocd=c.getEOCD(this.data);if(d.diskNumber()!==d.cdDiskNumber())throw new p(a.EINVAL,"ZipFS does not support spanned zip files.");var y=d.cdOffset();if(y===4294967295)throw new p(a.EINVAL,"ZipFS does not support Zip64.");for(var v=y+d.cdSize();y<v;){var _=new je(u.data,u.data.slice(y));y+=_.totalSize(),c.addToIndex(_,u._index),u._directoryEntries.push(_)}},c}(Se);function ur(f,c,u){return f.toString("ascii",c,c+u).trim()}function Af(f,c,u){if(u===1)return String.fromCharCode(f[c]);for(var d=Math.floor(u/2),y=new Array(d),v=0;v<d;v++){var _=c+(v<<1);y[v]=String.fromCharCode(f[_+1]|f[_]<<8)}return y.join("")}function dn(f,c){var u=parseInt(ur(f,c,4),10),d=parseInt(ur(f,c+4,2),10),y=parseInt(ur(f,c+6,2),10),v=parseInt(ur(f,c+8,2),10),_=parseInt(ur(f,c+10,2),10),A=parseInt(ur(f,c+12,2),10),P=parseInt(ur(f,c+14,2),10);return new Date(u,d,y,v,_,A,100*P)}function Ni(f,c){var u=f[c],d=f[c+1],y=f[c+2],v=f[c+3],_=f[c+4],A=f[c+5];return new Date(u,d-1,y,v,_,A)}function fO(f,c){var u=f.slice(c),d=new Et(u);switch(d.signatureWord()){case 17221:return new cy(u);case 20548:return new pO(u);case 21328:return new fy(u);case 21332:return new hy(u);case 17746:return new dy(u);case 17747:return new gO(u);case 20568:return new gy(u);case 20558:return new yO(u);case 21324:return new Rf(u);case 20045:return new yy(u);case 17228:return new Df(u);case 20556:return new mO(u);case 21061:return new my(u);case 21574:return new vy(u);case 21318:return new vO(u);case 21074:return new py(u);default:return d}}function sy(f,c,u,d){u-=4;for(var y=new Array;c<u;){var v=fO(f,c),_=v.length();if(_===0)return y;if(c+=_,v instanceof hy)break;v instanceof cy?y=y.concat(v.getEntries(d)):y.push(v)}return y}ki.Name="ZipFS",ki.Options={zipData:{type:"object",description:"The zip file as a Buffer object.",validator:Ie},name:{type:"string",optional:!0,description:"The name of the zip file (optional)."}},ki.CompressionMethod=So,ki.RegisterDecompressionMethod(So.DEFLATE,function(f,c,u){return ce(cO(f.slice(0,c),{chunkSize:u}))}),ki.RegisterDecompressionMethod(So.STORED,function(f,c,u){return se(f,0,u)});var bo=function(f){this._data=f};bo.prototype.type=function(){return this._data[0]},bo.prototype.standardIdentifier=function(){return ur(this._data,1,5)},bo.prototype.version=function(){return this._data[6]},bo.prototype.data=function(){return this._data.slice(7,2048)};var ay=function(f){function c(u){f.call(this,u),this._root=null}return f&&(c.__proto__=f),c.prototype=Object.create(f&&f.prototype),c.prototype.constructor=c,c.prototype.systemIdentifier=function(){return this._getString32(8)},c.prototype.volumeIdentifier=function(){return this._getString32(40)},c.prototype.volumeSpaceSize=function(){return this._data.readUInt32LE(80)},c.prototype.volumeSetSize=function(){return this._data.readUInt16LE(120)},c.prototype.volumeSequenceNumber=function(){return this._data.readUInt16LE(124)},c.prototype.logicalBlockSize=function(){return this._data.readUInt16LE(128)},c.prototype.pathTableSize=function(){return this._data.readUInt32LE(132)},c.prototype.locationOfTypeLPathTable=function(){return this._data.readUInt32LE(140)},c.prototype.locationOfOptionalTypeLPathTable=function(){return this._data.readUInt32LE(144)},c.prototype.locationOfTypeMPathTable=function(){return this._data.readUInt32BE(148)},c.prototype.locationOfOptionalTypeMPathTable=function(){return this._data.readUInt32BE(152)},c.prototype.rootDirectoryEntry=function(u){return this._root===null&&(this._root=this._constructRootDirectoryRecord(this._data.slice(156)),this._root.rootCheckForRockRidge(u)),this._root},c.prototype.volumeSetIdentifier=function(){return this._getString(190,128)},c.prototype.publisherIdentifier=function(){return this._getString(318,128)},c.prototype.dataPreparerIdentifier=function(){return this._getString(446,128)},c.prototype.applicationIdentifier=function(){return this._getString(574,128)},c.prototype.copyrightFileIdentifier=function(){return this._getString(702,38)},c.prototype.abstractFileIdentifier=function(){return this._getString(740,36)},c.prototype.bibliographicFileIdentifier=function(){return this._getString(776,37)},c.prototype.volumeCreationDate=function(){return dn(this._data,813)},c.prototype.volumeModificationDate=function(){return dn(this._data,830)},c.prototype.volumeExpirationDate=function(){return dn(this._data,847)},c.prototype.volumeEffectiveDate=function(){return dn(this._data,864)},c.prototype.fileStructureVersion=function(){return this._data[881]},c.prototype.applicationUsed=function(){return this._data.slice(883,1395)},c.prototype.reserved=function(){return this._data.slice(1395,2048)},c.prototype._getString32=function(u){return this._getString(u,32)},c}(bo),hO=function(f){function c(u){if(f.call(this,u),this.type()!==1)throw new p(a.EIO,"Invalid primary volume descriptor.")}return f&&(c.__proto__=f),c.prototype=Object.create(f&&f.prototype),c.prototype.constructor=c,c.prototype.name=function(){return"ISO9660"},c.prototype._constructRootDirectoryRecord=function(u){return new ly(u,-1)},c.prototype._getString=function(u,d){return this._getString(u,d)},c}(ay),dO=function(f){function c(u){if(f.call(this,u),this.type()!==2)throw new p(a.EIO,"Invalid supplementary volume descriptor.");var d=this.escapeSequence(),y=d[2];if(d[0]!==37||d[1]!==47||y!==64&&y!==67&&y!==69)throw new p(a.EIO,"Unrecognized escape sequence for SupplementaryVolumeDescriptor: "+d.toString())}return f&&(c.__proto__=f),c.prototype=Object.create(f&&f.prototype),c.prototype.constructor=c,c.prototype.name=function(){return"Joliet"},c.prototype.escapeSequence=function(){return this._data.slice(88,120)},c.prototype._constructRootDirectoryRecord=function(u){return new uy(u,-1)},c.prototype._getString=function(u,d){return Af(this._data,u,d)},c}(ay),rt=function(f,c){this._suEntries=null,this._fileOrDir=null,this._data=f,this._rockRidgeOffset=c};rt.prototype.hasRockRidge=function(){return this._rockRidgeOffset>-1},rt.prototype.getRockRidgeOffset=function(){return this._rockRidgeOffset},rt.prototype.rootCheckForRockRidge=function(f){var c=this.getDirectory(f);this._rockRidgeOffset=c.getDotEntry(f)._getRockRidgeOffset(f),this._rockRidgeOffset>-1&&(this._fileOrDir=null)},rt.prototype.length=function(){return this._data[0]},rt.prototype.extendedAttributeRecordLength=function(){return this._data[1]},rt.prototype.lba=function(){return 2048*this._data.readUInt32LE(2)},rt.prototype.dataLength=function(){return this._data.readUInt32LE(10)},rt.prototype.recordingDate=function(){return Ni(this._data,18)},rt.prototype.fileFlags=function(){return this._data[25]},rt.prototype.fileUnitSize=function(){return this._data[26]},rt.prototype.interleaveGapSize=function(){return this._data[27]},rt.prototype.volumeSequenceNumber=function(){return this._data.readUInt16LE(28)},rt.prototype.identifier=function(){return this._getString(33,this._data[32])},rt.prototype.fileName=function(f){if(this.hasRockRidge()){var c=this._rockRidgeFilename(f);if(c!==null)return c}var u=this.identifier();if(this.isDirectory(f))return u;var d=u.indexOf(";");return d===-1?u:u[d-1]==="."?u.slice(0,d-1):u.slice(0,d)},rt.prototype.isDirectory=function(f){var c=!!(2&this.fileFlags());return!c&&this.hasRockRidge()&&(c=this.getSUEntries(f).filter(function(u){return u instanceof Df}).length>0),c},rt.prototype.isSymlink=function(f){return this.hasRockRidge()&&this.getSUEntries(f).filter(function(c){return c instanceof Rf}).length>0},rt.prototype.getSymlinkPath=function(f){for(var c="",u=this.getSUEntries(f),d=this._getGetString(),y=0,v=u;y<v.length;y+=1){var _=v[y];if(_ instanceof Rf){for(var A=0,P=_.componentRecords();A<P.length;A+=1){var $=P[A],Q=$.flags();2&Q?c+="./":4&Q?c+="../":8&Q?c+="/":(c+=$.content(d),1&Q||(c+="/"))}if(!_.continueFlag())break}}return c.length>1&&c[c.length-1]==="/"?c.slice(0,c.length-1):c},rt.prototype.getFile=function(f){if(this.isDirectory(f))throw new Error("Tried to get a File from a directory.");return this._fileOrDir===null&&(this._fileOrDir=f.slice(this.lba(),this.lba()+this.dataLength())),this._fileOrDir},rt.prototype.getDirectory=function(f){if(!this.isDirectory(f))throw new Error("Tried to get a Directory from a file.");return this._fileOrDir===null&&(this._fileOrDir=this._constructDirectory(f)),this._fileOrDir},rt.prototype.getSUEntries=function(f){return this._suEntries||this._constructSUEntries(f),this._suEntries},rt.prototype._rockRidgeFilename=function(f){var c=this.getSUEntries(f).filter(function(A){return A instanceof yy});if(c.length===0||6&c[0].flags())return null;for(var u="",d=this._getGetString(),y=0,v=c;y<v.length;y+=1){var _=v[y];if(u+=_.name(d),!(1&_.flags()))break}return u},rt.prototype._constructSUEntries=function(f){var c=33+this._data[32];c%2==1&&c++,c+=this._rockRidgeOffset,this._suEntries=sy(this._data,c,this.length(),f)},rt.prototype._getRockRidgeOffset=function(f){this._rockRidgeOffset=0;var c=this.getSUEntries(f);if(c.length>0){var u=c[0];if(u instanceof fy&&u.checkBytesPass())for(var d=1;d<c.length;d++){var y=c[d];if(y instanceof py||y instanceof dy&&y.extensionIdentifier()==="IEEE_P1282")return u.bytesSkipped()}}return this._rockRidgeOffset=-1,-1};var ly=function(f){function c(u,d){f.call(this,u,d)}return f&&(c.__proto__=f),c.prototype=Object.create(f&&f.prototype),c.prototype.constructor=c,c.prototype._getString=function(u,d){return ur(this._data,u,d)},c.prototype._constructDirectory=function(u){return new wO(this,u)},c.prototype._getGetString=function(){return ur},c}(rt),uy=function(f){function c(u,d){f.call(this,u,d)}return f&&(c.__proto__=f),c.prototype=Object.create(f&&f.prototype),c.prototype.constructor=c,c.prototype._getString=function(u,d){return Af(this._data,u,d)},c.prototype._constructDirectory=function(u){return new _O(this,u)},c.prototype._getGetString=function(){return Af},c}(rt),Et=function(f){this._data=f};Et.prototype.signatureWord=function(){return this._data.readUInt16BE(0)},Et.prototype.signatureWordString=function(){return ur(this._data,0,2)},Et.prototype.length=function(){return this._data[2]},Et.prototype.suVersion=function(){return this._data[3]};var cy=function(f){function c(u){f.call(this,u),this._entries=null}return f&&(c.__proto__=f),c.prototype=Object.create(f&&f.prototype),c.prototype.constructor=c,c.prototype.continuationLba=function(){return this._data.readUInt32LE(4)},c.prototype.continuationLbaOffset=function(){return this._data.readUInt32LE(12)},c.prototype.continuationLength=function(){return this._data.readUInt32LE(20)},c.prototype.getEntries=function(u){if(!this._entries){var d=2048*this.continuationLba()+this.continuationLbaOffset();this._entries=sy(u,d,this.continuationLength(),u)}return this._entries},c}(Et),pO=function(f){function c(u){f.call(this,u)}return f&&(c.__proto__=f),c.prototype=Object.create(f&&f.prototype),c.prototype.constructor=c,c}(Et),fy=function(f){function c(u){f.call(this,u)}return f&&(c.__proto__=f),c.prototype=Object.create(f&&f.prototype),c.prototype.constructor=c,c.prototype.checkBytesPass=function(){return this._data[4]===190&&this._data[5]===239},c.prototype.bytesSkipped=function(){return this._data[6]},c}(Et),hy=function(f){function c(u){f.call(this,u)}return f&&(c.__proto__=f),c.prototype=Object.create(f&&f.prototype),c.prototype.constructor=c,c}(Et),dy=function(f){function c(u){f.call(this,u)}return f&&(c.__proto__=f),c.prototype=Object.create(f&&f.prototype),c.prototype.constructor=c,c.prototype.identifierLength=function(){return this._data[4]},c.prototype.descriptorLength=function(){return this._data[5]},c.prototype.sourceLength=function(){return this._data[6]},c.prototype.extensionVersion=function(){return this._data[7]},c.prototype.extensionIdentifier=function(){return ur(this._data,8,this.identifierLength())},c.prototype.extensionDescriptor=function(){return ur(this._data,8+this.identifierLength(),this.descriptorLength())},c.prototype.extensionSource=function(){return ur(this._data,8+this.identifierLength()+this.descriptorLength(),this.sourceLength())},c}(Et),gO=function(f){function c(u){f.call(this,u)}return f&&(c.__proto__=f),c.prototype=Object.create(f&&f.prototype),c.prototype.constructor=c,c.prototype.extensionSequence=function(){return this._data[4]},c}(Et),py=function(f){function c(u){f.call(this,u)}return f&&(c.__proto__=f),c.prototype=Object.create(f&&f.prototype),c.prototype.constructor=c,c}(Et),gy=function(f){function c(u){f.call(this,u)}return f&&(c.__proto__=f),c.prototype=Object.create(f&&f.prototype),c.prototype.constructor=c,c.prototype.mode=function(){return this._data.readUInt32LE(4)},c.prototype.fileLinks=function(){return this._data.readUInt32LE(12)},c.prototype.uid=function(){return this._data.readUInt32LE(20)},c.prototype.gid=function(){return this._data.readUInt32LE(28)},c.prototype.inode=function(){return this._data.readUInt32LE(36)},c}(Et),yO=function(f){function c(u){f.call(this,u)}return f&&(c.__proto__=f),c.prototype=Object.create(f&&f.prototype),c.prototype.constructor=c,c.prototype.devTHigh=function(){return this._data.readUInt32LE(4)},c.prototype.devTLow=function(){return this._data.readUInt32LE(12)},c}(Et),Rf=function(f){function c(u){f.call(this,u)}return f&&(c.__proto__=f),c.prototype=Object.create(f&&f.prototype),c.prototype.constructor=c,c.prototype.flags=function(){return this._data[4]},c.prototype.continueFlag=function(){return 1&this.flags()},c.prototype.componentRecords=function(){for(var u=new Array,d=5;d<this.length();){var y=new Ps(this._data.slice(d));u.push(y),d+=y.length()}return u},c}(Et),Ps=function(f){this._data=f};Ps.prototype.flags=function(){return this._data[0]},Ps.prototype.length=function(){return 2+this.componentLength()},Ps.prototype.componentLength=function(){return this._data[1]},Ps.prototype.content=function(f){return f(this._data,2,this.componentLength())};var yy=function(f){function c(u){f.call(this,u)}return f&&(c.__proto__=f),c.prototype=Object.create(f&&f.prototype),c.prototype.constructor=c,c.prototype.flags=function(){return this._data[4]},c.prototype.name=function(u){return u(this._data,5,this.length()-5)},c}(Et),Df=function(f){function c(u){f.call(this,u)}return f&&(c.__proto__=f),c.prototype=Object.create(f&&f.prototype),c.prototype.constructor=c,c.prototype.childDirectoryLba=function(){return this._data.readUInt32LE(4)},c}(Et),mO=function(f){function c(u){f.call(this,u)}return f&&(c.__proto__=f),c.prototype=Object.create(f&&f.prototype),c.prototype.constructor=c,c.prototype.parentDirectoryLba=function(){return this._data.readUInt32LE(4)},c}(Et),my=function(f){function c(u){f.call(this,u)}return f&&(c.__proto__=f),c.prototype=Object.create(f&&f.prototype),c.prototype.constructor=c,c}(Et),vy=function(f){function c(u){f.call(this,u)}return f&&(c.__proto__=f),c.prototype=Object.create(f&&f.prototype),c.prototype.constructor=c,c.prototype.flags=function(){return this._data[4]},c.prototype.creation=function(){return 1&this.flags()?this._longFormDates()?dn(this._data,5):Ni(this._data,5):null},c.prototype.modify=function(){if(2&this.flags()){var u=1&this.flags()?1:0;return this._longFormDates?dn(this._data,5+17*u):Ni(this._data,5+7*u)}return null},c.prototype.access=function(){if(4&this.flags()){var u=1&this.flags()?1:0;return u+=2&this.flags()?1:0,this._longFormDates?dn(this._data,5+17*u):Ni(this._data,5+7*u)}return null},c.prototype.backup=function(){if(16&this.flags()){var u=1&this.flags()?1:0;return u+=2&this.flags()?1:0,u+=4&this.flags()?1:0,this._longFormDates?dn(this._data,5+17*u):Ni(this._data,5+7*u)}return null},c.prototype.expiration=function(){if(32&this.flags()){var u=1&this.flags()?1:0;return u+=2&this.flags()?1:0,u+=4&this.flags()?1:0,u+=16&this.flags()?1:0,this._longFormDates?dn(this._data,5+17*u):Ni(this._data,5+7*u)}return null},c.prototype.effective=function(){if(64&this.flags()){var u=1&this.flags()?1:0;return u+=2&this.flags()?1:0,u+=4&this.flags()?1:0,u+=16&this.flags()?1:0,u+=32&this.flags()?1:0,this._longFormDates?dn(this._data,5+17*u):Ni(this._data,5+7*u)}return null},c.prototype._longFormDates=function(){return!!this.flags()},c}(Et),vO=function(f){function c(u){f.call(this,u)}return f&&(c.__proto__=f),c.prototype=Object.create(f&&f.prototype),c.prototype.constructor=c,c.prototype.virtualSizeHigh=function(){return this._data.readUInt32LE(4)},c.prototype.virtualSizeLow=function(){return this._data.readUInt32LE(12)},c.prototype.tableDepth=function(){return this._data[20]},c}(Et),Ms=function(f,c){var u=this;this._fileList=[],this._fileMap={},this._record=f;var d=f.lba(),y=d+f.dataLength();for(2&f.fileFlags()||(d=2048*f.getSUEntries(c).filter(function(A){return A instanceof Df})[0].childDirectoryLba(),y=1/0);d<y;)if(c[d]!==0){var v=u._constructDirectoryRecord(c.slice(d)),_=v.fileName(c);_!=="\0"&&_!==""?v.hasRockRidge()&&v.getSUEntries(c).filter(function(A){return A instanceof my}).length!==0||(u._fileMap[_]=v,u._fileList.push(_)):y===1/0&&(y=d+v.dataLength()),d+=v.length()}else d++};Ms.prototype.getRecord=function(f){return this._fileMap[f]},Ms.prototype.getFileList=function(){return this._fileList},Ms.prototype.getDotEntry=function(f){return this._constructDirectoryRecord(f.slice(this._record.lba()))};var wO=function(f){function c(u,d){f.call(this,u,d)}return f&&(c.__proto__=f),c.prototype=Object.create(f&&f.prototype),c.prototype.constructor=c,c.prototype._constructDirectoryRecord=function(u){return new ly(u,this._record.getRockRidgeOffset())},c}(Ms),_O=function(f){function c(u,d){f.call(this,u,d)}return f&&(c.__proto__=f),c.prototype=Object.create(f&&f.prototype),c.prototype.constructor=c,c.prototype._constructDirectoryRecord=function(u){return new uy(u,this._record.getRockRidgeOffset())},c}(Ms),El=function(f){function c(u,d,y){var v=this;d===void 0&&(d=""),y===void 0&&(y=!0),f.call(this),this._data=u,ye(y,c.Name,{data:"ISO data as a Buffer",name:d});for(var _=!1,A=32768,P=new Array;!_;){var $=u.slice(A);switch(new bo($).type()){case 1:P.push(new hO($));break;case 2:P.push(new dO($));break;case 255:_=!0}A+=2048}if(P.length===0)throw new p(a.EIO,"Unable to find a suitable volume descriptor.");P.forEach(function(Q){v._pvd&&v._pvd.type()===2||(v._pvd=Q)}),this._root=this._pvd.rootDirectoryEntry(u),this._name=d}return f&&(c.__proto__=f),c.prototype=Object.create(f&&f.prototype),c.prototype.constructor=c,c.Create=function(u,d){var y,v;try{y=new c(u.data,u.name,!1)}catch(_){_=_}finally{d(void 0,y)}},c.isAvailable=function(){return!0},c.prototype.getName=function(){var u="IsoFS"+this._name+(this._pvd?"-"+this._pvd.name():"");return this._root&&this._root.hasRockRidge()&&(u+="-RockRidge"),u},c.prototype.diskSpace=function(u,d){d(this._data.length,0)},c.prototype.isReadOnly=function(){return!0},c.prototype.supportsLinks=function(){return!1},c.prototype.supportsProps=function(){return!1},c.prototype.supportsSynch=function(){return!0},c.prototype.statSync=function(u,d){var y=this._getDirectoryRecord(u);if(y===null)throw p.ENOENT(u);return this._getStats(u,y)},c.prototype.openSync=function(u,d,y){if(d.isWriteable())throw new p(a.EPERM,u);var v=this._getDirectoryRecord(u);if(!v)throw p.ENOENT(u);if(v.isSymlink(this._data))return this.openSync(h.resolve(u,v.getSymlinkPath(this._data)),d,y);if(v.isDirectory(this._data))throw p.EISDIR(u);var _=v.getFile(this._data),A=this._getStats(u,v);switch(d.pathExistsAction()){case m.THROW_EXCEPTION:case m.TRUNCATE_FILE:throw p.EEXIST(u);case m.NOP:return new k(this,u,d,A,_);default:throw new p(a.EINVAL,"Invalid FileMode object.")}},c.prototype.readdirSync=function(u){var d=this._getDirectoryRecord(u);if(d){if(d.isDirectory(this._data))return d.getDirectory(this._data).getFileList().slice(0);throw p.ENOTDIR(u)}throw p.ENOENT(u)},c.prototype.readFileSync=function(u,d,y){var v=this.openSync(u,y,420);try{var _=v.getBuffer();return d===null?se(_):_.toString(d)}finally{v.closeSync()}},c.prototype._getDirectoryRecord=function(u){if(u==="/")return this._root;for(var d=u.split("/").slice(1),y=this._root,v=0,_=d;v<_.length;v+=1){var A=_[v];if(!y.isDirectory(this._data)||!(y=y.getDirectory(this._data).getRecord(A)))return null}return y},c.prototype._getStats=function(u,d){if(d.isSymlink(this._data)){var y=h.resolve(u,d.getSymlinkPath(this._data)),v=this._getDirectoryRecord(y);return v?this._getStats(y,v):null}var _=d.dataLength(),A=365,P=d.recordingDate(),$=P,Q=P,fe=P;if(d.hasRockRidge())for(var pe=0,ve=d.getSUEntries(this._data);pe<ve.length;pe+=1){var we=ve[pe];if(we instanceof gy)A=we.mode();else if(we instanceof vy){var ke=we.flags();4&ke&&($=we.access()),2&ke&&(Q=we.modify()),1&ke&&(fe=we.creation())}}return A&=365,new O(d.isDirectory(this._data)?b.DIRECTORY:b.FILE,_,A,$,Q,fe)},c}(Se);El.Name="IsoFS",El.Options={data:{type:"object",description:"The ISO file in a buffer",validator:Ie}},[ee,hl,dl,yo,pl,mo,Is,El,Rs,vo,Cs,_l,Sl,ki].forEach(function(f){var c=f.Create;f.Create=function(u,d){var y=typeof u=="function",v=y?u:d,_=y?{}:u;T(f,_,function(A){A?v(A):c.call(f,_,v)})}});var wy,Ol={AsyncMirror:ee,Dropbox:hl,Emscripten:dl,FolderAdapter:yo,HTML5FS:pl,InMemory:mo,IndexedDB:Is,IsoFS:El,LocalStorage:Rs,MountableFileSystem:vo,OverlayFS:Cs,WorkerFS:_l,XmlHttpRequest:Sl,ZipFS:ki};function _y(f){switch(f){case"fs":return te;case"path":return h;case"buffer":return l;case"process":return s;case"bfs_utils":return R;default:return Ol[f]}}function Sy(f){return te.initialize(f)}function Ff(f,c){var u=f.fs;if(!u)return c(new p(a.EPERM,'Missing "fs" property on configuration object.'));var d=f.options,y=0,v=!1;function _(){if(!v){v=!0;var P=Ol[u];P?P.Create(d,c):c(new p(a.EPERM,"File system "+u+" is not available in BrowserFS."))}}if(d!==null&&typeof d=="object"){var A=!1;Object.keys(d).filter(function(P){return P!=="fs"}).forEach(function(P){var $=d[P];$!==null&&typeof $=="object"&&$.fs&&(y++,Ff($,function(Q,fe){if(y--,Q){if(v)return;v=!0,c(Q)}else d[P]=fe,y===0&&A&&_()}))}),A=!0}y===0&&_()}s.initializeTTYs&&s.initializeTTYs(),"ab".substr(-1)!=="b"&&(String.prototype.substr=(wy=String.prototype.substr,function(f,c){return f<0&&(f=this.length+f),wy.call(this,f,c)})),typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&(Uint8Array.prototype.slice||(Uint8Array.prototype.slice=function(f,c){return f===void 0&&(f=0),c===void 0&&(c=this.length),f<0&&(f=this.length+f)<0&&(f=0),c<0&&(c=this.length+c)<0&&(c=0),c<f&&(c=f),new Uint8Array(this.buffer,this.byteOffset+f,c-f)})),e.install=function(f){f.Buffer=n,f.process=s;var c=f.require?f.require:null;f.require=function(u){var d=_y(u);return d||c.apply(null,Array.prototype.slice.call(arguments,0))}},e.registerFileSystem=function(f,c){Ol[f]=c},e.BFSRequire=_y,e.initialize=Sy,e.configure=function(f,c){Ff(f,function(u,d){d?(Sy(d),c()):c(u)})},e.getFileSystem=Ff,e.EmscriptenFS=Z,e.FileSystem=Ol,e.Errors=w,e.setImmediate=Nf}).call(e,r(1),function(){return this}(),r(5)(t),r(6))},function(t,e,r){t.exports=r(2).Buffer},function(t,e,r){(function(l){var i=r(3),o=r(4);e.Buffer=l,e.SlowBuffer=function(T){return+T!=T&&(T=0),l.alloc(+T)},e.INSPECT_MAX_BYTES=50;var s=2147483647;function a(T){if(T>s)throw new RangeError("Invalid typed array length");var R=new Uint8Array(T);return R.__proto__=l.prototype,R}function l(T,R,j){if(typeof T=="number"){if(typeof R=="string")throw new Error("If encoding is specified then the first argument must be a string");return m(T)}return h(T,R,j)}function h(T,R,j){if(typeof T=="number")throw new TypeError('"value" argument must not be a number');return ge(T)?function(H,Z,K){if(Z<0||H.byteLength<Z)throw new RangeError("'offset' is out of bounds");if(H.byteLength<Z+(K||0))throw new RangeError("'length' is out of bounds");var Se;return(Se=Z===void 0&&K===void 0?new Uint8Array(H):K===void 0?new Uint8Array(H,Z):new Uint8Array(H,Z,K)).__proto__=l.prototype,Se}(T,R,j):typeof T=="string"?function(H,Z){if(typeof Z=="string"&&Z!==""||(Z="utf8"),!l.isEncoding(Z))throw new TypeError('"encoding" must be a valid string encoding');var K=0|b(H,Z),Se=a(K),L=Se.write(H,Z);return L!==K&&(Se=Se.slice(0,L)),Se}(T,R):function(H){if(l.isBuffer(H)){var Z=0|w(H.length),K=a(Z);return K.length===0||H.copy(K,0,0,Z),K}if(H){if(be(H)||"length"in H)return typeof H.length!="number"||Ie(H.length)?a(0):p(H);if(H.type==="Buffer"&&Array.isArray(H.data))return p(H.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(T)}function g(T){if(typeof T!="number")throw new TypeError('"size" argument must be a number');if(T<0)throw new RangeError('"size" argument must not be negative')}function m(T){return g(T),a(T<0?0:0|w(T))}function p(T){for(var R=T.length<0?0:0|w(T.length),j=a(R),H=0;H<R;H+=1)j[H]=255&T[H];return j}function w(T){if(T>=s)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s.toString(16)+" bytes");return 0|T}function b(T,R){if(l.isBuffer(T))return T.length;if(be(T)||ge(T))return T.byteLength;typeof T!="string"&&(T=""+T);var j=T.length;if(j===0)return 0;for(var H=!1;;)switch(R){case"ascii":case"latin1":case"binary":return j;case"utf8":case"utf-8":case void 0:return oe(T).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*j;case"hex":return j>>>1;case"base64":return ne(T).length;default:if(H)return oe(T).length;R=(""+R).toLowerCase(),H=!0}}function N(T,R,j){var H=!1;if((R===void 0||R<0)&&(R=0),R>this.length||((j===void 0||j>this.length)&&(j=this.length),j<=0)||(j>>>=0)<=(R>>>=0))return"";for(T||(T="utf8");;)switch(T){case"hex":return ye(this,R,j);case"utf8":case"utf-8":return te(this,R,j);case"ascii":return ue(this,R,j);case"latin1":case"binary":return ae(this,R,j);case"base64":return W(this,R,j);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return M(this,R,j);default:if(H)throw new TypeError("Unknown encoding: "+T);T=(T+"").toLowerCase(),H=!0}}function O(T,R,j){var H=T[R];T[R]=T[j],T[j]=H}function I(T,R,j,H,Z){if(T.length===0)return-1;if(typeof j=="string"?(H=j,j=0):j>2147483647?j=2147483647:j<-2147483648&&(j=-2147483648),Ie(j=+j)&&(j=Z?0:T.length-1),j<0&&(j=T.length+j),j>=T.length){if(Z)return-1;j=T.length-1}else if(j<0){if(!Z)return-1;j=0}if(typeof R=="string"&&(R=l.from(R,H)),l.isBuffer(R))return R.length===0?-1:D(T,R,j,H,Z);if(typeof R=="number")return R&=255,typeof Uint8Array.prototype.indexOf=="function"?Z?Uint8Array.prototype.indexOf.call(T,R,j):Uint8Array.prototype.lastIndexOf.call(T,R,j):D(T,[R],j,H,Z);throw new TypeError("val must be string, number or Buffer")}function D(T,R,j,H,Z){var K,Se=1,L=T.length,E=R.length;if(H!==void 0&&((H=String(H).toLowerCase())==="ucs2"||H==="ucs-2"||H==="utf16le"||H==="utf-16le")){if(T.length<2||R.length<2)return-1;Se=2,L/=2,E/=2,j/=2}function k(de,Fe){return Se===1?de[Fe]:de.readUInt16BE(Fe*Se)}if(Z){var U=-1;for(K=j;K<L;K++)if(k(T,K)===k(R,U===-1?0:K-U)){if(U===-1&&(U=K),K-U+1===E)return U*Se}else U!==-1&&(K-=K-U),U=-1}else for(j+E>L&&(j=L-E),K=j;K>=0;K--){for(var ee=!0,he=0;he<E;he++)if(k(T,K+he)!==k(R,he)){ee=!1;break}if(ee)return K}return-1}function G(T,R,j,H){j=Number(j)||0;var Z=T.length-j;H?(H=Number(H))>Z&&(H=Z):H=Z;var K=R.length;if(K%2!=0)throw new TypeError("Invalid hex string");H>K/2&&(H=K/2);for(var Se=0;Se<H;++Se){var L=parseInt(R.substr(2*Se,2),16);if(Ie(L))return Se;T[j+Se]=L}return Se}function q(T,R,j,H){return se(oe(R,T.length-j),T,j,H)}function J(T,R,j,H){return se(function(Z){for(var K=[],Se=0;Se<Z.length;++Se)K.push(255&Z.charCodeAt(Se));return K}(R),T,j,H)}function C(T,R,j,H){return J(T,R,j,H)}function z(T,R,j,H){return se(ne(R),T,j,H)}function S(T,R,j,H){return se(function(Z,K){for(var Se,L,E,k=[],U=0;U<Z.length&&!((K-=2)<0);++U)L=(Se=Z.charCodeAt(U))>>8,E=Se%256,k.push(E),k.push(L);return k}(R,T.length-j),T,j,H)}function W(T,R,j){return R===0&&j===T.length?i.fromByteArray(T):i.fromByteArray(T.slice(R,j))}function te(T,R,j){j=Math.min(T.length,j);for(var H=[],Z=R;Z<j;){var K,Se,L,E,k=T[Z],U=null,ee=k>239?4:k>223?3:k>191?2:1;if(Z+ee<=j)switch(ee){case 1:k<128&&(U=k);break;case 2:(192&(K=T[Z+1]))==128&&(E=(31&k)<<6|63&K)>127&&(U=E);break;case 3:K=T[Z+1],Se=T[Z+2],(192&K)==128&&(192&Se)==128&&(E=(15&k)<<12|(63&K)<<6|63&Se)>2047&&(E<55296||E>57343)&&(U=E);break;case 4:K=T[Z+1],Se=T[Z+2],L=T[Z+3],(192&K)==128&&(192&Se)==128&&(192&L)==128&&(E=(15&k)<<18|(63&K)<<12|(63&Se)<<6|63&L)>65535&&E<1114112&&(U=E)}U===null?(U=65533,ee=1):U>65535&&(U-=65536,H.push(U>>>10&1023|55296),U=56320|1023&U),H.push(U),Z+=ee}return function(he){var de=he.length;if(de<=X)return String.fromCharCode.apply(String,he);for(var Fe="",Re=0;Re<de;)Fe+=String.fromCharCode.apply(String,he.slice(Re,Re+=X));return Fe}(H)}e.kMaxLength=s,l.TYPED_ARRAY_SUPPORT=function(){try{var T=new Uint8Array(1);return T.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},T.foo()===42}catch{return!1}}(),l.TYPED_ARRAY_SUPPORT||typeof console>"u"||typeof console.error!="function"||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),typeof Symbol<"u"&&Symbol.species&&l[Symbol.species]===l&&Object.defineProperty(l,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),l.poolSize=8192,l.from=function(T,R,j){return h(T,R,j)},l.prototype.__proto__=Uint8Array.prototype,l.__proto__=Uint8Array,l.alloc=function(T,R,j){return function(H,Z,K){return g(H),H<=0?a(H):Z!==void 0?typeof K=="string"?a(H).fill(Z,K):a(H).fill(Z):a(H)}(T,R,j)},l.allocUnsafe=function(T){return m(T)},l.allocUnsafeSlow=function(T){return m(T)},l.isBuffer=function(T){return T!=null&&T._isBuffer===!0},l.compare=function(T,R){if(!l.isBuffer(T)||!l.isBuffer(R))throw new TypeError("Arguments must be Buffers");if(T===R)return 0;for(var j=T.length,H=R.length,Z=0,K=Math.min(j,H);Z<K;++Z)if(T[Z]!==R[Z]){j=T[Z],H=R[Z];break}return j<H?-1:H<j?1:0},l.isEncoding=function(T){switch(String(T).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(T,R){if(!Array.isArray(T))throw new TypeError('"list" argument must be an Array of Buffers');if(T.length===0)return l.alloc(0);var j;if(R===void 0)for(R=0,j=0;j<T.length;++j)R+=T[j].length;var H=l.allocUnsafe(R),Z=0;for(j=0;j<T.length;++j){var K=T[j];if(!l.isBuffer(K))throw new TypeError('"list" argument must be an Array of Buffers');K.copy(H,Z),Z+=K.length}return H},l.byteLength=b,l.prototype._isBuffer=!0,l.prototype.swap16=function(){var T=this.length;if(T%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var R=0;R<T;R+=2)O(this,R,R+1);return this},l.prototype.swap32=function(){var T=this.length;if(T%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var R=0;R<T;R+=4)O(this,R,R+3),O(this,R+1,R+2);return this},l.prototype.swap64=function(){var T=this.length;if(T%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var R=0;R<T;R+=8)O(this,R,R+7),O(this,R+1,R+6),O(this,R+2,R+5),O(this,R+3,R+4);return this},l.prototype.toString=function(){var T=this.length;return T===0?"":arguments.length===0?te(this,0,T):N.apply(this,arguments)},l.prototype.equals=function(T){if(!l.isBuffer(T))throw new TypeError("Argument must be a Buffer");return this===T||l.compare(this,T)===0},l.prototype.inspect=function(){var T="",R=e.INSPECT_MAX_BYTES;return this.length>0&&(T=this.toString("hex",0,R).match(/.{2}/g).join(" "),this.length>R&&(T+=" ... ")),"<Buffer "+T+">"},l.prototype.compare=function(T,R,j,H,Z){if(!l.isBuffer(T))throw new TypeError("Argument must be a Buffer");if(R===void 0&&(R=0),j===void 0&&(j=T?T.length:0),H===void 0&&(H=0),Z===void 0&&(Z=this.length),R<0||j>T.length||H<0||Z>this.length)throw new RangeError("out of range index");if(H>=Z&&R>=j)return 0;if(H>=Z)return-1;if(R>=j)return 1;if(this===T)return 0;for(var K=(Z>>>=0)-(H>>>=0),Se=(j>>>=0)-(R>>>=0),L=Math.min(K,Se),E=this.slice(H,Z),k=T.slice(R,j),U=0;U<L;++U)if(E[U]!==k[U]){K=E[U],Se=k[U];break}return K<Se?-1:Se<K?1:0},l.prototype.includes=function(T,R,j){return this.indexOf(T,R,j)!==-1},l.prototype.indexOf=function(T,R,j){return I(this,T,R,j,!0)},l.prototype.lastIndexOf=function(T,R,j){return I(this,T,R,j,!1)},l.prototype.write=function(T,R,j,H){if(R===void 0)H="utf8",j=this.length,R=0;else if(j===void 0&&typeof R=="string")H=R,j=this.length,R=0;else{if(!isFinite(R))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");R>>>=0,isFinite(j)?(j>>>=0,H===void 0&&(H="utf8")):(H=j,j=void 0)}var Z=this.length-R;if((j===void 0||j>Z)&&(j=Z),T.length>0&&(j<0||R<0)||R>this.length)throw new RangeError("Attempt to write outside buffer bounds");H||(H="utf8");for(var K=!1;;)switch(H){case"hex":return G(this,T,R,j);case"utf8":case"utf-8":return q(this,T,R,j);case"ascii":return J(this,T,R,j);case"latin1":case"binary":return C(this,T,R,j);case"base64":return z(this,T,R,j);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return S(this,T,R,j);default:if(K)throw new TypeError("Unknown encoding: "+H);H=(""+H).toLowerCase(),K=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var X=4096;function ue(T,R,j){var H="";j=Math.min(T.length,j);for(var Z=R;Z<j;++Z)H+=String.fromCharCode(127&T[Z]);return H}function ae(T,R,j){var H="";j=Math.min(T.length,j);for(var Z=R;Z<j;++Z)H+=String.fromCharCode(T[Z]);return H}function ye(T,R,j){var H,Z=T.length;(!R||R<0)&&(R=0),(!j||j<0||j>Z)&&(j=Z);for(var K="",Se=R;Se<j;++Se)K+=(H=T[Se])<16?"0"+H.toString(16):H.toString(16);return K}function M(T,R,j){for(var H=T.slice(R,j),Z="",K=0;K<H.length;K+=2)Z+=String.fromCharCode(H[K]+256*H[K+1]);return Z}function F(T,R,j){if(T%1!=0||T<0)throw new RangeError("offset is not uint");if(T+R>j)throw new RangeError("Trying to access beyond buffer length")}function ie(T,R,j,H,Z,K){if(!l.isBuffer(T))throw new TypeError('"buffer" argument must be a Buffer instance');if(R>Z||R<K)throw new RangeError('"value" argument is out of bounds');if(j+H>T.length)throw new RangeError("Index out of range")}function B(T,R,j,H,Z,K){if(j+H>T.length)throw new RangeError("Index out of range");if(j<0)throw new RangeError("Index out of range")}function V(T,R,j,H,Z){return R=+R,j>>>=0,Z||B(T,0,j,4),o.write(T,R,j,H,23,4),j+4}function Y(T,R,j,H,Z){return R=+R,j>>>=0,Z||B(T,0,j,8),o.write(T,R,j,H,52,8),j+8}l.prototype.slice=function(T,R){var j=this.length;(T=~~T)<0?(T+=j)<0&&(T=0):T>j&&(T=j),(R=R===void 0?j:~~R)<0?(R+=j)<0&&(R=0):R>j&&(R=j),R<T&&(R=T);var H=this.subarray(T,R);return H.__proto__=l.prototype,H},l.prototype.readUIntLE=function(T,R,j){T>>>=0,R>>>=0,j||F(T,R,this.length);for(var H=this[T],Z=1,K=0;++K<R&&(Z*=256);)H+=this[T+K]*Z;return H},l.prototype.readUIntBE=function(T,R,j){T>>>=0,R>>>=0,j||F(T,R,this.length);for(var H=this[T+--R],Z=1;R>0&&(Z*=256);)H+=this[T+--R]*Z;return H},l.prototype.readUInt8=function(T,R){return T>>>=0,R||F(T,1,this.length),this[T]},l.prototype.readUInt16LE=function(T,R){return T>>>=0,R||F(T,2,this.length),this[T]|this[T+1]<<8},l.prototype.readUInt16BE=function(T,R){return T>>>=0,R||F(T,2,this.length),this[T]<<8|this[T+1]},l.prototype.readUInt32LE=function(T,R){return T>>>=0,R||F(T,4,this.length),(this[T]|this[T+1]<<8|this[T+2]<<16)+16777216*this[T+3]},l.prototype.readUInt32BE=function(T,R){return T>>>=0,R||F(T,4,this.length),16777216*this[T]+(this[T+1]<<16|this[T+2]<<8|this[T+3])},l.prototype.readIntLE=function(T,R,j){T>>>=0,R>>>=0,j||F(T,R,this.length);for(var H=this[T],Z=1,K=0;++K<R&&(Z*=256);)H+=this[T+K]*Z;return H>=(Z*=128)&&(H-=Math.pow(2,8*R)),H},l.prototype.readIntBE=function(T,R,j){T>>>=0,R>>>=0,j||F(T,R,this.length);for(var H=R,Z=1,K=this[T+--H];H>0&&(Z*=256);)K+=this[T+--H]*Z;return K>=(Z*=128)&&(K-=Math.pow(2,8*R)),K},l.prototype.readInt8=function(T,R){return T>>>=0,R||F(T,1,this.length),128&this[T]?-1*(255-this[T]+1):this[T]},l.prototype.readInt16LE=function(T,R){T>>>=0,R||F(T,2,this.length);var j=this[T]|this[T+1]<<8;return 32768&j?4294901760|j:j},l.prototype.readInt16BE=function(T,R){T>>>=0,R||F(T,2,this.length);var j=this[T+1]|this[T]<<8;return 32768&j?4294901760|j:j},l.prototype.readInt32LE=function(T,R){return T>>>=0,R||F(T,4,this.length),this[T]|this[T+1]<<8|this[T+2]<<16|this[T+3]<<24},l.prototype.readInt32BE=function(T,R){return T>>>=0,R||F(T,4,this.length),this[T]<<24|this[T+1]<<16|this[T+2]<<8|this[T+3]},l.prototype.readFloatLE=function(T,R){return T>>>=0,R||F(T,4,this.length),o.read(this,T,!0,23,4)},l.prototype.readFloatBE=function(T,R){return T>>>=0,R||F(T,4,this.length),o.read(this,T,!1,23,4)},l.prototype.readDoubleLE=function(T,R){return T>>>=0,R||F(T,8,this.length),o.read(this,T,!0,52,8)},l.prototype.readDoubleBE=function(T,R){return T>>>=0,R||F(T,8,this.length),o.read(this,T,!1,52,8)},l.prototype.writeUIntLE=function(T,R,j,H){T=+T,R>>>=0,j>>>=0,H||ie(this,T,R,j,Math.pow(2,8*j)-1,0);var Z=1,K=0;for(this[R]=255&T;++K<j&&(Z*=256);)this[R+K]=T/Z&255;return R+j},l.prototype.writeUIntBE=function(T,R,j,H){T=+T,R>>>=0,j>>>=0,H||ie(this,T,R,j,Math.pow(2,8*j)-1,0);var Z=j-1,K=1;for(this[R+Z]=255&T;--Z>=0&&(K*=256);)this[R+Z]=T/K&255;return R+j},l.prototype.writeUInt8=function(T,R,j){return T=+T,R>>>=0,j||ie(this,T,R,1,255,0),this[R]=255&T,R+1},l.prototype.writeUInt16LE=function(T,R,j){return T=+T,R>>>=0,j||ie(this,T,R,2,65535,0),this[R]=255&T,this[R+1]=T>>>8,R+2},l.prototype.writeUInt16BE=function(T,R,j){return T=+T,R>>>=0,j||ie(this,T,R,2,65535,0),this[R]=T>>>8,this[R+1]=255&T,R+2},l.prototype.writeUInt32LE=function(T,R,j){return T=+T,R>>>=0,j||ie(this,T,R,4,4294967295,0),this[R+3]=T>>>24,this[R+2]=T>>>16,this[R+1]=T>>>8,this[R]=255&T,R+4},l.prototype.writeUInt32BE=function(T,R,j){return T=+T,R>>>=0,j||ie(this,T,R,4,4294967295,0),this[R]=T>>>24,this[R+1]=T>>>16,this[R+2]=T>>>8,this[R+3]=255&T,R+4},l.prototype.writeIntLE=function(T,R,j,H){if(T=+T,R>>>=0,!H){var Z=Math.pow(2,8*j-1);ie(this,T,R,j,Z-1,-Z)}var K=0,Se=1,L=0;for(this[R]=255&T;++K<j&&(Se*=256);)T<0&&L===0&&this[R+K-1]!==0&&(L=1),this[R+K]=(T/Se>>0)-L&255;return R+j},l.prototype.writeIntBE=function(T,R,j,H){if(T=+T,R>>>=0,!H){var Z=Math.pow(2,8*j-1);ie(this,T,R,j,Z-1,-Z)}var K=j-1,Se=1,L=0;for(this[R+K]=255&T;--K>=0&&(Se*=256);)T<0&&L===0&&this[R+K+1]!==0&&(L=1),this[R+K]=(T/Se>>0)-L&255;return R+j},l.prototype.writeInt8=function(T,R,j){return T=+T,R>>>=0,j||ie(this,T,R,1,127,-128),T<0&&(T=255+T+1),this[R]=255&T,R+1},l.prototype.writeInt16LE=function(T,R,j){return T=+T,R>>>=0,j||ie(this,T,R,2,32767,-32768),this[R]=255&T,this[R+1]=T>>>8,R+2},l.prototype.writeInt16BE=function(T,R,j){return T=+T,R>>>=0,j||ie(this,T,R,2,32767,-32768),this[R]=T>>>8,this[R+1]=255&T,R+2},l.prototype.writeInt32LE=function(T,R,j){return T=+T,R>>>=0,j||ie(this,T,R,4,2147483647,-2147483648),this[R]=255&T,this[R+1]=T>>>8,this[R+2]=T>>>16,this[R+3]=T>>>24,R+4},l.prototype.writeInt32BE=function(T,R,j){return T=+T,R>>>=0,j||ie(this,T,R,4,2147483647,-2147483648),T<0&&(T=4294967295+T+1),this[R]=T>>>24,this[R+1]=T>>>16,this[R+2]=T>>>8,this[R+3]=255&T,R+4},l.prototype.writeFloatLE=function(T,R,j){return V(this,T,R,!0,j)},l.prototype.writeFloatBE=function(T,R,j){return V(this,T,R,!1,j)},l.prototype.writeDoubleLE=function(T,R,j){return Y(this,T,R,!0,j)},l.prototype.writeDoubleBE=function(T,R,j){return Y(this,T,R,!1,j)},l.prototype.copy=function(T,R,j,H){if(j||(j=0),H||H===0||(H=this.length),R>=T.length&&(R=T.length),R||(R=0),H>0&&H<j&&(H=j),H===j||T.length===0||this.length===0)return 0;if(R<0)throw new RangeError("targetStart out of bounds");if(j<0||j>=this.length)throw new RangeError("sourceStart out of bounds");if(H<0)throw new RangeError("sourceEnd out of bounds");H>this.length&&(H=this.length),T.length-R<H-j&&(H=T.length-R+j);var Z,K=H-j;if(this===T&&j<R&&R<H)for(Z=K-1;Z>=0;--Z)T[Z+R]=this[Z+j];else if(K<1e3)for(Z=0;Z<K;++Z)T[Z+R]=this[Z+j];else Uint8Array.prototype.set.call(T,this.subarray(j,j+K),R);return K},l.prototype.fill=function(T,R,j,H){if(typeof T=="string"){if(typeof R=="string"?(H=R,R=0,j=this.length):typeof j=="string"&&(H=j,j=this.length),T.length===1){var Z=T.charCodeAt(0);Z<256&&(T=Z)}if(H!==void 0&&typeof H!="string")throw new TypeError("encoding must be a string");if(typeof H=="string"&&!l.isEncoding(H))throw new TypeError("Unknown encoding: "+H)}else typeof T=="number"&&(T&=255);if(R<0||this.length<R||this.length<j)throw new RangeError("Out of range index");if(j<=R)return this;var K;if(R>>>=0,j=j===void 0?this.length:j>>>0,T||(T=0),typeof T=="number")for(K=R;K<j;++K)this[K]=T;else{var Se=l.isBuffer(T)?T:new l(T,H),L=Se.length;for(K=0;K<j-R;++K)this[K+R]=Se[K%L]}return this};var ce=/[^+/0-9A-Za-z-_]/g;function oe(T,R){var j;R=R||1/0;for(var H=T.length,Z=null,K=[],Se=0;Se<H;++Se){if((j=T.charCodeAt(Se))>55295&&j<57344){if(!Z){if(j>56319){(R-=3)>-1&&K.push(239,191,189);continue}if(Se+1===H){(R-=3)>-1&&K.push(239,191,189);continue}Z=j;continue}if(j<56320){(R-=3)>-1&&K.push(239,191,189),Z=j;continue}j=65536+(Z-55296<<10|j-56320)}else Z&&(R-=3)>-1&&K.push(239,191,189);if(Z=null,j<128){if((R-=1)<0)break;K.push(j)}else if(j<2048){if((R-=2)<0)break;K.push(j>>6|192,63&j|128)}else if(j<65536){if((R-=3)<0)break;K.push(j>>12|224,j>>6&63|128,63&j|128)}else{if(!(j<1114112))throw new Error("Invalid code point");if((R-=4)<0)break;K.push(j>>18|240,j>>12&63|128,j>>6&63|128,63&j|128)}}return K}function ne(T){return i.toByteArray(function(R){if((R=R.trim().replace(ce,"")).length<2)return"";for(;R.length%4!=0;)R+="=";return R}(T))}function se(T,R,j,H){for(var Z=0;Z<H&&!(Z+j>=R.length||Z>=T.length);++Z)R[Z+j]=T[Z];return Z}function ge(T){return T instanceof ArrayBuffer||T!=null&&T.constructor!=null&&T.constructor.name==="ArrayBuffer"&&typeof T.byteLength=="number"}function be(T){return typeof ArrayBuffer.isView=="function"&&ArrayBuffer.isView(T)}function Ie(T){return T!=T}}).call(e,r(1))},function(t,e){e.byteLength=function(g){return 3*g.length/4-l(g)},e.toByteArray=function(g){var m,p,w,b,N,O,I=g.length;N=l(g),O=new i(3*I/4-N),w=N>0?I-4:I;var D=0;for(m=0,p=0;m<w;m+=4,p+=3)b=n[g.charCodeAt(m)]<<18|n[g.charCodeAt(m+1)]<<12|n[g.charCodeAt(m+2)]<<6|n[g.charCodeAt(m+3)],O[D++]=b>>16&255,O[D++]=b>>8&255,O[D++]=255&b;return N===2?(b=n[g.charCodeAt(m)]<<2|n[g.charCodeAt(m+1)]>>4,O[D++]=255&b):N===1&&(b=n[g.charCodeAt(m)]<<10|n[g.charCodeAt(m+1)]<<4|n[g.charCodeAt(m+2)]>>2,O[D++]=b>>8&255,O[D++]=255&b),O},e.fromByteArray=function(g){for(var m,p=g.length,w=p%3,b="",N=[],O=16383,I=0,D=p-w;I<D;I+=O)N.push(h(g,I,I+O>D?D:I+O));return w===1?(m=g[p-1],b+=r[m>>2],b+=r[m<<4&63],b+="=="):w===2&&(m=(g[p-2]<<8)+g[p-1],b+=r[m>>10],b+=r[m>>4&63],b+=r[m<<2&63],b+="="),N.push(b),N.join("")};for(var r=[],n=[],i=typeof Uint8Array<"u"?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,a=o.length;s<a;++s)r[s]=o[s],n[o.charCodeAt(s)]=s;function l(g){var m=g.length;if(m%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return g[m-2]==="="?2:g[m-1]==="="?1:0}function h(g,m,p){for(var w,b,N=[],O=m;O<p;O+=3)w=(g[O]<<16)+(g[O+1]<<8)+g[O+2],N.push(r[(b=w)>>18&63]+r[b>>12&63]+r[b>>6&63]+r[63&b]);return N.join("")}n["-".charCodeAt(0)]=62,n["_".charCodeAt(0)]=63},function(t,e){e.read=function(r,n,i,o,s){var a,l,h=8*s-o-1,g=(1<<h)-1,m=g>>1,p=-7,w=i?s-1:0,b=i?-1:1,N=r[n+w];for(w+=b,a=N&(1<<-p)-1,N>>=-p,p+=h;p>0;a=256*a+r[n+w],w+=b,p-=8);for(l=a&(1<<-p)-1,a>>=-p,p+=o;p>0;l=256*l+r[n+w],w+=b,p-=8);if(a===0)a=1-m;else{if(a===g)return l?NaN:1/0*(N?-1:1);l+=Math.pow(2,o),a-=m}return(N?-1:1)*l*Math.pow(2,a-o)},e.write=function(r,n,i,o,s,a){var l,h,g,m=8*a-s-1,p=(1<<m)-1,w=p>>1,b=s===23?Math.pow(2,-24)-Math.pow(2,-77):0,N=o?0:a-1,O=o?1:-1,I=n<0||n===0&&1/n<0?1:0;for(n=Math.abs(n),isNaN(n)||n===1/0?(h=isNaN(n)?1:0,l=p):(l=Math.floor(Math.log(n)/Math.LN2),n*(g=Math.pow(2,-l))<1&&(l--,g*=2),(n+=l+w>=1?b/g:b*Math.pow(2,1-w))*g>=2&&(l++,g/=2),l+w>=p?(h=0,l=p):l+w>=1?(h=(n*g-1)*Math.pow(2,s),l+=w):(h=n*Math.pow(2,w-1)*Math.pow(2,s),l=0));s>=8;r[i+N]=255&h,N+=O,h/=256,s-=8);for(l=l<<s|h,m+=s;m>0;r[i+N]=255&l,N+=O,l/=256,m-=8);r[i+N-O]|=128*I}},function(t,e){t.exports=function(r){return r.webpackPolyfill||(r.deprecate=function(){},r.paths=[],r.children=[],r.webpackPolyfill=1),r}},function(t,e,r){var n=new(r(7)),i={};function o(a){i[a]||(typeof n[a]=="function"?i[a]=function(){return n[a].apply(n,arguments)}:i[a]=n[a])}for(var s in n)o(s);i.initializeTTYs=function(){n.stdin===null&&(n.initializeTTYs(),i.stdin=n.stdin,i.stdout=n.stdout,i.stderr=n.stderr)},n.nextTick(function(){i.initializeTTYs()}),t.exports=i},function(t,e,r){(function(n){var i=this&&this.__extends||function(g,m){for(var p in m)m.hasOwnProperty(p)&&(g[p]=m[p]);function w(){this.constructor=g}g.prototype=m===null?Object.create(m):(w.prototype=m.prototype,new w)},o=r(8),s=null,a=function(){function g(m,p){this.fun=m,this.array=p}return g.prototype.run=function(){this.fun.apply(null,this.array)},g}(),l=function(){function g(){this._queue=[],this._draining=!1,this._currentQueue=null,this._queueIndex=-1}return g.prototype.push=function(m){var p=this;this._queue.push(m)!==1||this._draining||setTimeout(function(){return p._drainQueue()},0)},g.prototype._cleanUpNextTick=function(){this._draining=!1,this._currentQueue&&this._currentQueue.length?this._queue=this._currentQueue.concat(this._queue):this._queueIndex=-1,this._queue.length&&this._drainQueue()},g.prototype._drainQueue=function(){var m=this;if(!this._draining){var p=setTimeout(function(){return m._cleanUpNextTick()});this._draining=!0;for(var w=this._queue.length;w;){for(this._currentQueue=this._queue,this._queue=[];++this._queueIndex<w;)this._currentQueue&&this._currentQueue[this._queueIndex].run();this._queueIndex=-1,w=this._queue.length}this._currentQueue=null,this._draining=!1,clearTimeout(p)}},g}(),h=function(g){function m(){g.apply(this,arguments),this.startTime=Date.now(),this._cwd="/",this.platform="browser",this.argv=[],this.execArgv=[],this.stdout=null,this.stderr=null,this.stdin=null,this.domain=null,this._queue=new l,this.execPath=n,this.env={},this.exitCode=0,this._gid=1,this._uid=1,this.version="v5.0",this.versions={http_parser:"0.0",node:"5.0",v8:"0.0",uv:"0.0",zlib:"0.0",ares:"0.0",icu:"0.0",modules:"0",openssl:"0.0"},this.config={target_defaults:{cflags:[],default_configuration:"Release",defines:[],include_dirs:[],libraries:[]},variables:{clang:0,host_arch:"x32",node_install_npm:!1,node_install_waf:!1,node_prefix:"",node_shared_cares:!1,node_shared_http_parser:!1,node_shared_libuv:!1,node_shared_zlib:!1,node_shared_v8:!1,node_use_dtrace:!1,node_use_etw:!1,node_use_openssl:!1,node_shared_openssl:!1,strict_aliasing:!1,target_arch:"x32",v8_use_snapshot:!1,v8_no_strict_aliasing:0,visibility:""}},this.pid=1e3*Math.random()|0,this.title="node",this.arch="x32",this._mask=18,this.connected=void 0}return i(m,g),m.prototype.chdir=function(p){s===null&&(s=r(9)),this._cwd=s.resolve(p)},m.prototype.cwd=function(){return this._cwd},m.prototype.uptime=function(){return(Date.now()-this.startTime)/1e3|0},m.prototype.nextTick=function(p){for(var w=[],b=1;b<arguments.length;b++)w[b-1]=arguments[b];this._queue.push(new a(p,w))},m.prototype.abort=function(){this.emit("abort")},m.prototype.exit=function(p){this.exitCode=p,this.emit("exit",[p])},m.prototype.getgid=function(){return this._gid},m.prototype.setgid=function(p){this._gid=typeof p=="number"?p:1},m.prototype.getuid=function(){return this._uid},m.prototype.setuid=function(p){this._uid=typeof p=="number"?p:1},m.prototype.kill=function(p,w){this.emit("kill",[p,w])},m.prototype.memoryUsage=function(){return{rss:0,heapTotal:0,heapUsed:0}},m.prototype.umask=function(p){p===void 0&&(p=this._mask);var w=this._mask;return this._mask=p,this.emit("umask",[p]),w},m.prototype.hrtime=function(){var p,w=(p=typeof performance<"u"?performance.now():Date.now?Date.now():new Date().getTime())/1e3|0;return[w,p=1e6*(p-=1e3*w)|0]},m.prototype.initializeTTYs=function(){if(this.stdout===null){var p=r(10);this.stdout=new p,this.stderr=new p,this.stdin=new p}},m.prototype.disconnect=function(){},m}(o.EventEmitter);t.exports=h}).call(e,"/")},function(t,e){function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function n(s){return typeof s=="function"}function i(s){return typeof s=="object"&&s!==null}function o(s){return s===void 0}t.exports=r,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(s){if(typeof s!="number"||s<0||isNaN(s))throw TypeError("n must be a positive number");return this._maxListeners=s,this},r.prototype.emit=function(s){var a,l,h,g,m,p;if(this._events||(this._events={}),s==="error"&&(!this._events.error||i(this._events.error)&&!this._events.error.length)){if((a=arguments[1])instanceof Error)throw a;var w=new Error('Uncaught, unspecified "error" event. ('+a+")");throw w.context=a,w}if(o(l=this._events[s]))return!1;if(n(l))switch(arguments.length){case 1:l.call(this);break;case 2:l.call(this,arguments[1]);break;case 3:l.call(this,arguments[1],arguments[2]);break;default:g=Array.prototype.slice.call(arguments,1),l.apply(this,g)}else if(i(l))for(g=Array.prototype.slice.call(arguments,1),h=(p=l.slice()).length,m=0;m<h;m++)p[m].apply(this,g);return!0},r.prototype.addListener=function(s,a){var l;if(!n(a))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",s,n(a.listener)?a.listener:a),this._events[s]?i(this._events[s])?this._events[s].push(a):this._events[s]=[this._events[s],a]:this._events[s]=a,i(this._events[s])&&!this._events[s].warned&&(l=o(this._maxListeners)?r.defaultMaxListeners:this._maxListeners)&&l>0&&this._events[s].length>l&&(this._events[s].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[s].length),typeof console.trace=="function"&&console.trace()),this},r.prototype.on=r.prototype.addListener,r.prototype.once=function(s,a){if(!n(a))throw TypeError("listener must be a function");var l=!1;function h(){this.removeListener(s,h),l||(l=!0,a.apply(this,arguments))}return h.listener=a,this.on(s,h),this},r.prototype.removeListener=function(s,a){var l,h,g,m;if(!n(a))throw TypeError("listener must be a function");if(!this._events||!this._events[s])return this;if(g=(l=this._events[s]).length,h=-1,l===a||n(l.listener)&&l.listener===a)delete this._events[s],this._events.removeListener&&this.emit("removeListener",s,a);else if(i(l)){for(m=g;m-- >0;)if(l[m]===a||l[m].listener&&l[m].listener===a){h=m;break}if(h<0)return this;l.length===1?(l.length=0,delete this._events[s]):l.splice(h,1),this._events.removeListener&&this.emit("removeListener",s,a)}return this},r.prototype.removeAllListeners=function(s){var a,l;if(!this._events)return this;if(!this._events.removeListener)return arguments.length===0?this._events={}:this._events[s]&&delete this._events[s],this;if(arguments.length===0){for(a in this._events)a!=="removeListener"&&this.removeAllListeners(a);return this.removeAllListeners("removeListener"),this._events={},this}if(n(l=this._events[s]))this.removeListener(s,l);else if(l)for(;l.length;)this.removeListener(s,l[l.length-1]);return delete this._events[s],this},r.prototype.listeners=function(s){return this._events&&this._events[s]?n(this._events[s])?[this._events[s]]:this._events[s].slice():[]},r.prototype.listenerCount=function(s){if(this._events){var a=this._events[s];if(n(a))return 1;if(a)return a.length}return 0},r.listenerCount=function(s,a){return s.listenerCount(a)}},function(t,e,r){(function(n){var i=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,o=function(){function s(){}return s.normalize=function(a){a===""&&(a=".");for(var l=a.charAt(0)===s.sep,h=(a=s._removeDuplicateSeps(a)).split(s.sep),g=[],m=0;m<h.length;m++){var p=h[m];p!=="."&&(p===".."&&(l||!l&&g.length>0&&g[0]!=="..")?g.pop():g.push(p))}return!l&&g.length<2&&(g.length===1?g[0]===""&&g.unshift("."):g.push(".")),a=g.join(s.sep),l&&a.charAt(0)!==s.sep&&(a=s.sep+a),a},s.join=function(){for(var a=[],l=0;l<arguments.length;l++)a[l-0]=arguments[l];for(var h=[],g=0;g<a.length;g++){var m=a[g];if(typeof m!="string")throw new TypeError("Invalid argument type to path.join: "+typeof m);m!==""&&h.push(m)}return s.normalize(h.join(s.sep))},s.resolve=function(){for(var a=[],l=0;l<arguments.length;l++)a[l-0]=arguments[l];for(var h=[],g=0;g<a.length;g++){var m=a[g];if(typeof m!="string")throw new TypeError("Invalid argument type to path.join: "+typeof m);m!==""&&(m.charAt(0)===s.sep&&(h=[]),h.push(m))}var p=s.normalize(h.join(s.sep));if(p.length>1&&p.charAt(p.length-1)===s.sep)return p.substr(0,p.length-1);if(p.charAt(0)!==s.sep){p.charAt(0)!=="."||p.length!==1&&p.charAt(1)!==s.sep||(p=p.length===1?"":p.substr(2));var w=n.cwd();p=p!==""?this.normalize(w+(w!=="/"?s.sep:"")+p):w}return p},s.relative=function(a,l){var h;a=s.resolve(a),l=s.resolve(l);var g=a.split(s.sep),m=l.split(s.sep);m.shift(),g.shift();var p=0,w=[];for(h=0;h<g.length;h++)if(g[h]!==m[h]){p=g.length-h;break}w=m.slice(h),g.length===1&&g[0]===""&&(p=0),p>g.length&&(p=g.length);var b="";for(h=0;h<p;h++)b+="../";return(b+=w.join(s.sep)).length>1&&b.charAt(b.length-1)===s.sep&&(b=b.substr(0,b.length-1)),b},s.dirname=function(a){var l=(a=s._removeDuplicateSeps(a)).charAt(0)===s.sep,h=a.split(s.sep);return h.pop()===""&&h.length>0&&h.pop(),h.length>1||h.length===1&&!l?h.join(s.sep):l?s.sep:"."},s.basename=function(a,l){if(l===void 0&&(l=""),a==="")return a;var h=(a=s.normalize(a)).split(s.sep),g=h[h.length-1];return g===""&&h.length>1?h[h.length-2]:l.length>0&&g.substr(g.length-l.length)===l?g.substr(0,g.length-l.length):g},s.extname=function(a){var l=(a=s.normalize(a)).split(s.sep);if((a=l.pop())===""&&l.length>0&&(a=l.pop()),a==="..")return"";var h=a.lastIndexOf(".");return h===-1||h===0?"":a.substr(h)},s.isAbsolute=function(a){return a.length>0&&a.charAt(0)===s.sep},s._makeLong=function(a){return a},s.parse=function(a){var l=function(h){var g=i.exec(h);return g.shift(),g}(a);return{root:l[0],dir:l[0]+l[1].slice(0,-1),base:l[2],ext:l[3],name:l[2].slice(0,l[2].length-l[3].length)}},s.format=function(a){if(a===null||typeof a!="object")throw new TypeError("Parameter 'pathObject' must be an object, not "+typeof a);if(typeof(a.root||"")!="string")throw new TypeError("'pathObject.root' must be a string or undefined, not "+typeof a.root);return(a.dir?a.dir+s.sep:"")+(a.base||"")},s._removeDuplicateSeps=function(a){return a=a.replace(this._replaceRegex,this.sep)},s.sep="/",s._replaceRegex=new RegExp("//+","g"),s.delimiter=":",s.posix=s,s.win32=s,s}();t.exports=o}).call(e,r(6))},function(t,e,r){(function(n){var i=this&&this.__extends||function(s,a){for(var l in a)a.hasOwnProperty(l)&&(s[l]=a[l]);function h(){this.constructor=s}s.prototype=a===null?Object.create(a):(h.prototype=a.prototype,new h)},o=function(s){function a(){s.call(this),this.isRaw=!1,this.columns=80,this.rows=120,this.isTTY=!0,this._bufferedWrites=[],this._waitingForWrites=!1}return i(a,s),a.prototype.setRawMode=function(l){this.isRaw!==l&&(this.isRaw=l,this.emit("modeChange"))},a.prototype.changeColumns=function(l){l!==this.columns&&(this.columns=l,this.emit("resize"))},a.prototype.changeRows=function(l){l!==this.rows&&(this.rows=l,this.emit("resize"))},a.isatty=function(l){return l&&l instanceof a},a.prototype._write=function(l,h,g){var m;try{var p;p=typeof l=="string"?new n(l,h):l,this._bufferedWrites.push(p),this._waitingForWrites&&this._read(1024)}catch(w){m=w}finally{g(m)}},a.prototype._read=function(l){if(this._bufferedWrites.length===0)this._waitingForWrites=!0;else for(;this._bufferedWrites.length>0&&(this._waitingForWrites=this.push(this._bufferedWrites.shift()),this._waitingForWrites););},a}(r(11).Duplex);t.exports=o}).call(e,r(1))},function(t,e,r){t.exports=i;var n=r(8).EventEmitter;function i(){n.call(this)}r(12)(i,n),i.Readable=r(13),i.Writable=r(27),i.Duplex=r(28),i.Transform=r(29),i.PassThrough=r(30),i.Stream=i,i.prototype.pipe=function(o,s){var a=this;function l(N){o.writable&&o.write(N)===!1&&a.pause&&a.pause()}function h(){a.readable&&a.resume&&a.resume()}a.on("data",l),o.on("drain",h),o._isStdio||s&&s.end===!1||(a.on("end",m),a.on("close",p));var g=!1;function m(){g||(g=!0,o.end())}function p(){g||(g=!0,typeof o.destroy=="function"&&o.destroy())}function w(N){if(b(),n.listenerCount(this,"error")===0)throw N}function b(){a.removeListener("data",l),o.removeListener("drain",h),a.removeListener("end",m),a.removeListener("close",p),a.removeListener("error",w),o.removeListener("error",w),a.removeListener("end",b),a.removeListener("close",b),o.removeListener("close",b)}return a.on("error",w),o.on("error",w),a.on("end",b),a.on("close",b),o.on("close",b),o.emit("pipe",a),o}},function(t,e){typeof Object.create=="function"?t.exports=function(r,n){r.super_=n,r.prototype=Object.create(n.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(r,n){r.super_=n;var i=function(){};i.prototype=n.prototype,r.prototype=new i,r.prototype.constructor=r}},function(t,e,r){(function(n){var i=function(){try{return r(11)}catch{}}();(e=t.exports=r(14)).Stream=i||e,e.Readable=e,e.Writable=r(22),e.Duplex=r(21),e.Transform=r(25),e.PassThrough=r(26),!n.browser&&n.env.READABLE_STREAM==="disable"&&i&&(t.exports=i)}).call(e,r(6))},function(t,e,r){(function(n){t.exports=I;var i,o=r(15),s=r(16);I.ReadableState=O,r(8).EventEmitter;var a,l=function(M,F){return M.listeners(F).length};(function(){try{a=r(11)}catch{}finally{a||(a=r(8).EventEmitter)}})();var h=r(2).Buffer,g=r(17),m=r(18);m.inherits=r(12);var p=r(19),w=void 0;w=p&&p.debuglog?p.debuglog("stream"):function(){};var b,N=r(20);function O(M,F){i=i||r(21),M=M||{},this.objectMode=!!M.objectMode,F instanceof i&&(this.objectMode=this.objectMode||!!M.readableObjectMode);var ie=M.highWaterMark,B=this.objectMode?16:16384;this.highWaterMark=ie||ie===0?ie:B,this.highWaterMark=~~this.highWaterMark,this.buffer=new N,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.defaultEncoding=M.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,M.encoding&&(b||(b=r(24).StringDecoder),this.decoder=new b(M.encoding),this.encoding=M.encoding)}function I(M){if(i=i||r(21),!(this instanceof I))return new I(M);this._readableState=new O(M,this),this.readable=!0,M&&typeof M.read=="function"&&(this._read=M.read),a.call(this)}function D(M,F,ie,B,V){var Y=function(se,ge){var be=null;return h.isBuffer(ge)||typeof ge=="string"||ge==null||se.objectMode||(be=new TypeError("Invalid non-string/buffer chunk")),be}(F,ie);if(Y)M.emit("error",Y);else if(ie===null)F.reading=!1,function(se,ge){if(!ge.ended){if(ge.decoder){var be=ge.decoder.end();be&&be.length&&(ge.buffer.push(be),ge.length+=ge.objectMode?1:be.length)}ge.ended=!0,J(se)}}(M,F);else if(F.objectMode||ie&&ie.length>0)if(F.ended&&!V){var ce=new Error("stream.push() after EOF");M.emit("error",ce)}else if(F.endEmitted&&V){var oe=new Error("stream.unshift() after end event");M.emit("error",oe)}else{var ne;!F.decoder||V||B||(ie=F.decoder.write(ie),ne=!F.objectMode&&ie.length===0),V||(F.reading=!1),ne||(F.flowing&&F.length===0&&!F.sync?(M.emit("data",ie),M.read(0)):(F.length+=F.objectMode?1:ie.length,V?F.buffer.unshift(ie):F.buffer.push(ie),F.needReadable&&J(M))),function(se,ge){ge.readingMore||(ge.readingMore=!0,o(z,se,ge))}(M,F)}else V||(F.reading=!1);return function(se){return!se.ended&&(se.needReadable||se.length<se.highWaterMark||se.length===0)}(F)}m.inherits(I,a),I.prototype.push=function(M,F){var ie=this._readableState;return ie.objectMode||typeof M!="string"||(F=F||ie.defaultEncoding)!==ie.encoding&&(M=g.from(M,F),F=""),D(this,ie,M,F,!1)},I.prototype.unshift=function(M){return D(this,this._readableState,M,"",!0)},I.prototype.isPaused=function(){return this._readableState.flowing===!1},I.prototype.setEncoding=function(M){return b||(b=r(24).StringDecoder),this._readableState.decoder=new b(M),this._readableState.encoding=M,this};var G=8388608;function q(M,F){return M<=0||F.length===0&&F.ended?0:F.objectMode?1:M!=M?F.flowing&&F.length?F.buffer.head.data.length:F.length:(M>F.highWaterMark&&(F.highWaterMark=function(ie){return ie>=G?ie=G:(ie--,ie|=ie>>>1,ie|=ie>>>2,ie|=ie>>>4,ie|=ie>>>8,ie|=ie>>>16,ie++),ie}(M)),M<=F.length?M:F.ended?F.length:(F.needReadable=!0,0))}function J(M){var F=M._readableState;F.needReadable=!1,F.emittedReadable||(w("emitReadable",F.flowing),F.emittedReadable=!0,F.sync?o(C,M):C(M))}function C(M){w("emit readable"),M.emit("readable"),te(M)}function z(M,F){for(var ie=F.length;!F.reading&&!F.flowing&&!F.ended&&F.length<F.highWaterMark&&(w("maybeReadMore read 0"),M.read(0),ie!==F.length);)ie=F.length;F.readingMore=!1}function S(M){w("readable nexttick read 0"),M.read(0)}function W(M,F){F.reading||(w("resume read 0"),M.read(0)),F.resumeScheduled=!1,F.awaitDrain=0,M.emit("resume"),te(M),F.flowing&&!F.reading&&M.read(0)}function te(M){var F=M._readableState;for(w("flow",F.flowing);F.flowing&&M.read()!==null;);}function X(M,F){return F.length===0?null:(F.objectMode?ie=F.buffer.shift():!M||M>=F.length?(ie=F.decoder?F.buffer.join(""):F.buffer.length===1?F.buffer.head.data:F.buffer.concat(F.length),F.buffer.clear()):ie=function(B,V,Y){var ce;return B<V.head.data.length?(ce=V.head.data.slice(0,B),V.head.data=V.head.data.slice(B)):ce=B===V.head.data.length?V.shift():Y?function(oe,ne){var se=ne.head,ge=1,be=se.data;for(oe-=be.length;se=se.next;){var Ie=se.data,T=oe>Ie.length?Ie.length:oe;if(T===Ie.length?be+=Ie:be+=Ie.slice(0,oe),(oe-=T)==0){T===Ie.length?(++ge,se.next?ne.head=se.next:ne.head=ne.tail=null):(ne.head=se,se.data=Ie.slice(T));break}++ge}return ne.length-=ge,be}(B,V):function(oe,ne){var se=g.allocUnsafe(oe),ge=ne.head,be=1;for(ge.data.copy(se),oe-=ge.data.length;ge=ge.next;){var Ie=ge.data,T=oe>Ie.length?Ie.length:oe;if(Ie.copy(se,se.length-oe,0,T),(oe-=T)==0){T===Ie.length?(++be,ge.next?ne.head=ge.next:ne.head=ne.tail=null):(ne.head=ge,ge.data=Ie.slice(T));break}++be}return ne.length-=be,se}(B,V),ce}(M,F.buffer,F.decoder),ie);var ie}function ue(M){var F=M._readableState;if(F.length>0)throw new Error('"endReadable()" called on non-empty stream');F.endEmitted||(F.ended=!0,o(ae,F,M))}function ae(M,F){M.endEmitted||M.length!==0||(M.endEmitted=!0,F.readable=!1,F.emit("end"))}function ye(M,F){for(var ie=0,B=M.length;ie<B;ie++)if(M[ie]===F)return ie;return-1}I.prototype.read=function(M){w("read",M),M=parseInt(M,10);var F=this._readableState,ie=M;if(M!==0&&(F.emittedReadable=!1),M===0&&F.needReadable&&(F.length>=F.highWaterMark||F.ended))return w("read: emitReadable",F.length,F.ended),F.length===0&&F.ended?ue(this):J(this),null;if((M=q(M,F))===0&&F.ended)return F.length===0&&ue(this),null;var B,V=F.needReadable;return w("need readable",V),(F.length===0||F.length-M<F.highWaterMark)&&w("length less than watermark",V=!0),F.ended||F.reading?w("reading or ended",V=!1):V&&(w("do read"),F.reading=!0,F.sync=!0,F.length===0&&(F.needReadable=!0),this._read(F.highWaterMark),F.sync=!1,F.reading||(M=q(ie,F))),(B=M>0?X(M,F):null)===null?(F.needReadable=!0,M=0):F.length-=M,F.length===0&&(F.ended||(F.needReadable=!0),ie!==M&&F.ended&&ue(this)),B!==null&&this.emit("data",B),B},I.prototype._read=function(M){this.emit("error",new Error("_read() is not implemented"))},I.prototype.pipe=function(M,F){var ie=this,B=this._readableState;switch(B.pipesCount){case 0:B.pipes=M;break;case 1:B.pipes=[B.pipes,M];break;default:B.pipes.push(M)}B.pipesCount+=1,w("pipe count=%d opts=%j",B.pipesCount,F);var V=F&&F.end===!1||M===n.stdout||M===n.stderr?se:ce;function Y(H){w("onunpipe"),H===ie&&se()}function ce(){w("onend"),M.end()}B.endEmitted?o(V):ie.once("end",V),M.on("unpipe",Y);var oe=function(H){return function(){var Z=H._readableState;w("pipeOnDrain",Z.awaitDrain),Z.awaitDrain&&Z.awaitDrain--,Z.awaitDrain===0&&l(H,"data")&&(Z.flowing=!0,te(H))}}(ie);M.on("drain",oe);var ne=!1;function se(){w("cleanup"),M.removeListener("close",T),M.removeListener("finish",R),M.removeListener("drain",oe),M.removeListener("error",Ie),M.removeListener("unpipe",Y),ie.removeListener("end",ce),ie.removeListener("end",se),ie.removeListener("data",be),ne=!0,!B.awaitDrain||M._writableState&&!M._writableState.needDrain||oe()}var ge=!1;function be(H){w("ondata"),ge=!1,M.write(H)!==!1||ge||((B.pipesCount===1&&B.pipes===M||B.pipesCount>1&&ye(B.pipes,M)!==-1)&&!ne&&(w("false write response, pause",ie._readableState.awaitDrain),ie._readableState.awaitDrain++,ge=!0),ie.pause())}function Ie(H){w("onerror",H),j(),M.removeListener("error",Ie),l(M,"error")===0&&M.emit("error",H)}function T(){M.removeListener("finish",R),j()}function R(){w("onfinish"),M.removeListener("close",T),j()}function j(){w("unpipe"),ie.unpipe(M)}return ie.on("data",be),function(H,Z,K){if(typeof H.prependListener=="function")return H.prependListener(Z,K);H._events&&H._events[Z]?s(H._events[Z])?H._events[Z].unshift(K):H._events[Z]=[K,H._events[Z]]:H.on(Z,K)}(M,"error",Ie),M.once("close",T),M.once("finish",R),M.emit("pipe",ie),B.flowing||(w("pipe resume"),ie.resume()),M},I.prototype.unpipe=function(M){var F=this._readableState;if(F.pipesCount===0)return this;if(F.pipesCount===1)return M&&M!==F.pipes||(M||(M=F.pipes),F.pipes=null,F.pipesCount=0,F.flowing=!1,M&&M.emit("unpipe",this)),this;if(!M){var ie=F.pipes,B=F.pipesCount;F.pipes=null,F.pipesCount=0,F.flowing=!1;for(var V=0;V<B;V++)ie[V].emit("unpipe",this);return this}var Y=ye(F.pipes,M);return Y===-1||(F.pipes.splice(Y,1),F.pipesCount-=1,F.pipesCount===1&&(F.pipes=F.pipes[0]),M.emit("unpipe",this)),this},I.prototype.on=function(M,F){var ie=a.prototype.on.call(this,M,F);if(M==="data")this._readableState.flowing!==!1&&this.resume();else if(M==="readable"){var B=this._readableState;B.endEmitted||B.readableListening||(B.readableListening=B.needReadable=!0,B.emittedReadable=!1,B.reading?B.length&&J(this):o(S,this))}return ie},I.prototype.addListener=I.prototype.on,I.prototype.resume=function(){var M=this._readableState;return M.flowing||(w("resume"),M.flowing=!0,function(F,ie){ie.resumeScheduled||(ie.resumeScheduled=!0,o(W,F,ie))}(this,M)),this},I.prototype.pause=function(){return w("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(w("pause"),this._readableState.flowing=!1,this.emit("pause")),this},I.prototype.wrap=function(M){var F=this._readableState,ie=!1,B=this;for(var V in M.on("end",function(){if(w("wrapped end"),F.decoder&&!F.ended){var Y=F.decoder.end();Y&&Y.length&&B.push(Y)}B.push(null)}),M.on("data",function(Y){w("wrapped data"),F.decoder&&(Y=F.decoder.write(Y)),F.objectMode&&Y==null||(F.objectMode||Y&&Y.length)&&(B.push(Y)||(ie=!0,M.pause()))}),M)this[V]===void 0&&typeof M[V]=="function"&&(this[V]=function(Y){return function(){return M[Y].apply(M,arguments)}}(V));return function(Y,ce){for(var oe=0,ne=Y.length;oe<ne;oe++)ce(Y[oe],oe)}(["error","close","destroy","pause","resume"],function(Y){M.on(Y,B.emit.bind(B,Y))}),B._read=function(Y){w("wrapped _read",Y),ie&&(ie=!1,M.resume())},B},I._fromList=X}).call(e,r(6))},function(t,e,r){(function(n){!n.version||n.version.indexOf("v0.")===0||n.version.indexOf("v1.")===0&&n.version.indexOf("v1.8.")!==0?t.exports=function(i,o,s,a){if(typeof i!="function")throw new TypeError('"callback" argument must be a function');var l,h,g=arguments.length;switch(g){case 0:case 1:return n.nextTick(i);case 2:return n.nextTick(function(){i.call(null,o)});case 3:return n.nextTick(function(){i.call(null,o,s)});case 4:return n.nextTick(function(){i.call(null,o,s,a)});default:for(l=new Array(g-1),h=0;h<l.length;)l[h++]=arguments[h];return n.nextTick(function(){i.apply(null,l)})}}:t.exports=n.nextTick}).call(e,r(6))},function(t,e){var r={}.toString;t.exports=Array.isArray||function(n){return r.call(n)=="[object Array]"}},function(t,e,r){(function(n){var i=r(2),o=i.Buffer,s=i.SlowBuffer,a=i.kMaxLength||2147483647;e.alloc=function(l,h,g){if(typeof o.alloc=="function")return o.alloc(l,h,g);if(typeof g=="number")throw new TypeError("encoding must not be number");if(typeof l!="number")throw new TypeError("size must be a number");if(l>a)throw new RangeError("size is too large");var m=g,p=h;p===void 0&&(m=void 0,p=0);var w=new o(l);if(typeof p=="string")for(var b=new o(p,m),N=b.length,O=-1;++O<l;)w[O]=b[O%N];else w.fill(p);return w},e.allocUnsafe=function(l){if(typeof o.allocUnsafe=="function")return o.allocUnsafe(l);if(typeof l!="number")throw new TypeError("size must be a number");if(l>a)throw new RangeError("size is too large");return new o(l)},e.from=function(l,h,g){if(typeof o.from=="function"&&(!n.Uint8Array||Uint8Array.from!==o.from))return o.from(l,h,g);if(typeof l=="number")throw new TypeError('"value" argument must not be a number');if(typeof l=="string")return new o(l,h);if(typeof ArrayBuffer<"u"&&l instanceof ArrayBuffer){var m=h;if(arguments.length===1)return new o(l);m===void 0&&(m=0);var p=g;if(p===void 0&&(p=l.byteLength-m),m>=l.byteLength)throw new RangeError("'offset' is out of bounds");if(p>l.byteLength-m)throw new RangeError("'length' is out of bounds");return new o(l.slice(m,m+p))}if(o.isBuffer(l)){var w=new o(l.length);return l.copy(w,0,0,l.length),w}if(l){if(Array.isArray(l)||typeof ArrayBuffer<"u"&&l.buffer instanceof ArrayBuffer||"length"in l)return new o(l);if(l.type==="Buffer"&&Array.isArray(l.data))return new o(l.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")},e.allocUnsafeSlow=function(l){if(typeof o.allocUnsafeSlow=="function")return o.allocUnsafeSlow(l);if(typeof l!="number")throw new TypeError("size must be a number");if(l>=a)throw new RangeError("size is too large");return new s(l)}}).call(e,function(){return this}())},function(t,e,r){(function(n){function i(o){return Object.prototype.toString.call(o)}e.isArray=function(o){return Array.isArray?Array.isArray(o):i(o)==="[object Array]"},e.isBoolean=function(o){return typeof o=="boolean"},e.isNull=function(o){return o===null},e.isNullOrUndefined=function(o){return o==null},e.isNumber=function(o){return typeof o=="number"},e.isString=function(o){return typeof o=="string"},e.isSymbol=function(o){return typeof o=="symbol"},e.isUndefined=function(o){return o===void 0},e.isRegExp=function(o){return i(o)==="[object RegExp]"},e.isObject=function(o){return typeof o=="object"&&o!==null},e.isDate=function(o){return i(o)==="[object Date]"},e.isError=function(o){return i(o)==="[object Error]"||o instanceof Error},e.isFunction=function(o){return typeof o=="function"},e.isPrimitive=function(o){return o===null||typeof o=="boolean"||typeof o=="number"||typeof o=="string"||typeof o=="symbol"||o===void 0},e.isBuffer=n.isBuffer}).call(e,r(1))},function(t,e){},function(t,e,r){r(2).Buffer;var n=r(17);function i(){this.head=null,this.tail=null,this.length=0}t.exports=i,i.prototype.push=function(o){var s={data:o,next:null};this.length>0?this.tail.next=s:this.head=s,this.tail=s,++this.length},i.prototype.unshift=function(o){var s={data:o,next:this.head};this.length===0&&(this.tail=s),this.head=s,++this.length},i.prototype.shift=function(){if(this.length!==0){var o=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,o}},i.prototype.clear=function(){this.head=this.tail=null,this.length=0},i.prototype.join=function(o){if(this.length===0)return"";for(var s=this.head,a=""+s.data;s=s.next;)a+=o+s.data;return a},i.prototype.concat=function(o){if(this.length===0)return n.alloc(0);if(this.length===1)return this.head.data;for(var s=n.allocUnsafe(o>>>0),a=this.head,l=0;a;)a.data.copy(s,l),l+=a.data.length,a=a.next;return s}},function(t,e,r){var n=Object.keys||function(b){var N=[];for(var O in b)N.push(O);return N};t.exports=m;var i=r(15),o=r(18);o.inherits=r(12);var s=r(14),a=r(22);o.inherits(m,s);for(var l=n(a.prototype),h=0;h<l.length;h++){var g=l[h];m.prototype[g]||(m.prototype[g]=a.prototype[g])}function m(b){if(!(this instanceof m))return new m(b);s.call(this,b),a.call(this,b),b&&b.readable===!1&&(this.readable=!1),b&&b.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,b&&b.allowHalfOpen===!1&&(this.allowHalfOpen=!1),this.once("end",p)}function p(){this.allowHalfOpen||this._writableState.ended||i(w,this)}function w(b){b.end()}},function(t,e,r){(function(n){t.exports=O;var i,o=r(15),s=!n.browser&&["v0.10","v0.9."].indexOf(n.version.slice(0,5))>-1?setImmediate:o;O.WritableState=N;var a=r(18);a.inherits=r(12);var l,h={deprecate:r(23)};(function(){try{l=r(11)}catch{}finally{l||(l=r(8).EventEmitter)}})();var g,m=r(2).Buffer,p=r(17);function w(){}function b(S,W,te){this.chunk=S,this.encoding=W,this.callback=te,this.next=null}function N(S,W){i=i||r(21),S=S||{},this.objectMode=!!S.objectMode,W instanceof i&&(this.objectMode=this.objectMode||!!S.writableObjectMode);var te=S.highWaterMark,X=this.objectMode?16:16384;this.highWaterMark=te||te===0?te:X,this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var ue=S.decodeStrings===!1;this.decodeStrings=!ue,this.defaultEncoding=S.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(ae){(function(ye,M){var F=ye._writableState,ie=F.sync,B=F.writecb;if(function(Y){Y.writing=!1,Y.writecb=null,Y.length-=Y.writelen,Y.writelen=0}(F),M)(function(Y,ce,oe,ne,se){--ce.pendingcb,oe?o(se,ne):se(ne),Y._writableState.errorEmitted=!0,Y.emit("error",ne)})(ye,F,ie,M,B);else{var V=q(F);V||F.corked||F.bufferProcessing||!F.bufferedRequest||G(ye,F),ie?s(D,ye,F,V,B):D(ye,F,V,B)}})(W,ae)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new z(this)}function O(S){if(i=i||r(21),!(g.call(O,this)||this instanceof i))return new O(S);this._writableState=new N(S,this),this.writable=!0,S&&(typeof S.write=="function"&&(this._write=S.write),typeof S.writev=="function"&&(this._writev=S.writev)),l.call(this)}function I(S,W,te,X,ue,ae,ye){W.writelen=X,W.writecb=ye,W.writing=!0,W.sync=!0,te?S._writev(ue,W.onwrite):S._write(ue,ae,W.onwrite),W.sync=!1}function D(S,W,te,X){te||function(ue,ae){ae.length===0&&ae.needDrain&&(ae.needDrain=!1,ue.emit("drain"))}(S,W),W.pendingcb--,X(),C(S,W)}function G(S,W){W.bufferProcessing=!0;var te=W.bufferedRequest;if(S._writev&&te&&te.next){var X=W.bufferedRequestCount,ue=new Array(X),ae=W.corkedRequestsFree;ae.entry=te;for(var ye=0;te;)ue[ye]=te,te=te.next,ye+=1;I(S,W,!0,W.length,ue,"",ae.finish),W.pendingcb++,W.lastBufferedRequest=null,ae.next?(W.corkedRequestsFree=ae.next,ae.next=null):W.corkedRequestsFree=new z(W)}else{for(;te;){var M=te.chunk,F=te.encoding,ie=te.callback;if(I(S,W,!1,W.objectMode?1:M.length,M,F,ie),te=te.next,W.writing)break}te===null&&(W.lastBufferedRequest=null)}W.bufferedRequestCount=0,W.bufferedRequest=te,W.bufferProcessing=!1}function q(S){return S.ending&&S.length===0&&S.bufferedRequest===null&&!S.finished&&!S.writing}function J(S,W){W.prefinished||(W.prefinished=!0,S.emit("prefinish"))}function C(S,W){var te=q(W);return te&&(W.pendingcb===0?(J(S,W),W.finished=!0,S.emit("finish")):J(S,W)),te}function z(S){var W=this;this.next=null,this.entry=null,this.finish=function(te){var X=W.entry;for(W.entry=null;X;){var ue=X.callback;S.pendingcb--,ue(te),X=X.next}S.corkedRequestsFree?S.corkedRequestsFree.next=W:S.corkedRequestsFree=W}}a.inherits(O,l),N.prototype.getBuffer=function(){for(var S=this.bufferedRequest,W=[];S;)W.push(S),S=S.next;return W},function(){try{Object.defineProperty(N.prototype,"buffer",{get:h.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.")})}catch{}}(),typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(g=Function.prototype[Symbol.hasInstance],Object.defineProperty(O,Symbol.hasInstance,{value:function(S){return!!g.call(this,S)||S&&S._writableState instanceof N}})):g=function(S){return S instanceof this},O.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},O.prototype.write=function(S,W,te){var X=this._writableState,ue=!1,ae=m.isBuffer(S);return typeof W=="function"&&(te=W,W=null),ae?W="buffer":W||(W=X.defaultEncoding),typeof te!="function"&&(te=w),X.ended?function(ye,M){var F=new Error("write after end");ye.emit("error",F),o(M,F)}(this,te):(ae||function(ye,M,F,ie){var B=!0,V=!1;return F===null?V=new TypeError("May not write null values to stream"):typeof F=="string"||F===void 0||M.objectMode||(V=new TypeError("Invalid non-string/buffer chunk")),V&&(ye.emit("error",V),o(ie,V),B=!1),B}(this,X,S,te))&&(X.pendingcb++,ue=function(ye,M,F,ie,B,V){F||(ie=function(ne,se,ge){return ne.objectMode||ne.decodeStrings===!1||typeof se!="string"||(se=p.from(se,ge)),se}(M,ie,B),m.isBuffer(ie)&&(B="buffer"));var Y=M.objectMode?1:ie.length;M.length+=Y;var ce=M.length<M.highWaterMark;if(ce||(M.needDrain=!0),M.writing||M.corked){var oe=M.lastBufferedRequest;M.lastBufferedRequest=new b(ie,B,V),oe?oe.next=M.lastBufferedRequest:M.bufferedRequest=M.lastBufferedRequest,M.bufferedRequestCount+=1}else I(ye,M,!1,Y,ie,B,V);return ce}(this,X,ae,S,W,te)),ue},O.prototype.cork=function(){this._writableState.corked++},O.prototype.uncork=function(){var S=this._writableState;S.corked&&(S.corked--,S.writing||S.corked||S.finished||S.bufferProcessing||!S.bufferedRequest||G(this,S))},O.prototype.setDefaultEncoding=function(S){if(typeof S=="string"&&(S=S.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((S+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+S);return this._writableState.defaultEncoding=S,this},O.prototype._write=function(S,W,te){te(new Error("_write() is not implemented"))},O.prototype._writev=null,O.prototype.end=function(S,W,te){var X=this._writableState;typeof S=="function"?(te=S,S=null,W=null):typeof W=="function"&&(te=W,W=null),S!=null&&this.write(S,W),X.corked&&(X.corked=1,this.uncork()),X.ending||X.finished||function(ue,ae,ye){ae.ending=!0,C(ue,ae),ye&&(ae.finished?o(ye):ue.once("finish",ye)),ae.ended=!0,ue.writable=!1}(this,X,te)}}).call(e,r(6))},function(t,e){(function(r){function n(i){try{if(!r.localStorage)return!1}catch{return!1}var o=r.localStorage[i];return o!=null&&String(o).toLowerCase()==="true"}t.exports=function(i,o){if(n("noDeprecation"))return i;var s=!1;return function(){if(!s){if(n("throwDeprecation"))throw new Error(o);n("traceDeprecation")?console.trace(o):console.warn(o),s=!0}return i.apply(this,arguments)}}}).call(e,function(){return this}())},function(t,e,r){var n=r(2).Buffer,i=n.isEncoding||function(h){switch(h&&h.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}},o=e.StringDecoder=function(h){switch(this.encoding=(h||"utf8").toLowerCase().replace(/[-_]/,""),function(g){if(g&&!i(g))throw new Error("Unknown encoding: "+g)}(h),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=a;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=l;break;default:return void(this.write=s)}this.charBuffer=new n(6),this.charReceived=0,this.charLength=0};function s(h){return h.toString(this.encoding)}function a(h){this.charReceived=h.length%2,this.charLength=this.charReceived?2:0}function l(h){this.charReceived=h.length%3,this.charLength=this.charReceived?3:0}o.prototype.write=function(h){for(var g="";this.charLength;){var m=h.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:h.length;if(h.copy(this.charBuffer,this.charReceived,0,m),this.charReceived+=m,this.charReceived<this.charLength)return"";if(h=h.slice(m,h.length),!((p=(g=this.charBuffer.slice(0,this.charLength).toString(this.encoding)).charCodeAt(g.length-1))>=55296&&p<=56319)){if(this.charReceived=this.charLength=0,h.length===0)return g;break}this.charLength+=this.surrogateSize,g=""}this.detectIncompleteChar(h);var p,w=h.length;if(this.charLength&&(h.copy(this.charBuffer,0,h.length-this.charReceived,w),w-=this.charReceived),w=(g+=h.toString(this.encoding,0,w)).length-1,(p=g.charCodeAt(w))>=55296&&p<=56319){var b=this.surrogateSize;return this.charLength+=b,this.charReceived+=b,this.charBuffer.copy(this.charBuffer,b,0,b),h.copy(this.charBuffer,0,0,b),g.substring(0,w)}return g},o.prototype.detectIncompleteChar=function(h){for(var g=h.length>=3?3:h.length;g>0;g--){var m=h[h.length-g];if(g==1&&m>>5==6){this.charLength=2;break}if(g<=2&&m>>4==14){this.charLength=3;break}if(g<=3&&m>>3==30){this.charLength=4;break}}this.charReceived=g},o.prototype.end=function(h){var g="";if(h&&h.length&&(g=this.write(h)),this.charReceived){var m=this.charReceived,p=this.charBuffer,w=this.encoding;g+=p.slice(0,m).toString(w)}return g}},function(t,e,r){t.exports=s;var n=r(21),i=r(18);function o(l){this.afterTransform=function(h,g){return function(m,p,w){var b=m._transformState;b.transforming=!1;var N=b.writecb;if(!N)return m.emit("error",new Error("no writecb in Transform class"));b.writechunk=null,b.writecb=null,w!=null&&m.push(w),N(p);var O=m._readableState;O.reading=!1,(O.needReadable||O.length<O.highWaterMark)&&m._read(O.highWaterMark)}(l,h,g)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null,this.writeencoding=null}function s(l){if(!(this instanceof s))return new s(l);n.call(this,l),this._transformState=new o(this);var h=this;this._readableState.needReadable=!0,this._readableState.sync=!1,l&&(typeof l.transform=="function"&&(this._transform=l.transform),typeof l.flush=="function"&&(this._flush=l.flush)),this.once("prefinish",function(){typeof this._flush=="function"?this._flush(function(g,m){a(h,g,m)}):a(h)})}function a(l,h,g){if(h)return l.emit("error",h);g!=null&&l.push(g);var m=l._writableState,p=l._transformState;if(m.length)throw new Error("Calling transform done when ws.length != 0");if(p.transforming)throw new Error("Calling transform done when still transforming");return l.push(null)}i.inherits=r(12),i.inherits(s,n),s.prototype.push=function(l,h){return this._transformState.needTransform=!1,n.prototype.push.call(this,l,h)},s.prototype._transform=function(l,h,g){throw new Error("_transform() is not implemented")},s.prototype._write=function(l,h,g){var m=this._transformState;if(m.writecb=g,m.writechunk=l,m.writeencoding=h,!m.transforming){var p=this._readableState;(m.needTransform||p.needReadable||p.length<p.highWaterMark)&&this._read(p.highWaterMark)}},s.prototype._read=function(l){var h=this._transformState;h.writechunk!==null&&h.writecb&&!h.transforming?(h.transforming=!0,this._transform(h.writechunk,h.writeencoding,h.afterTransform)):h.needTransform=!0}},function(t,e,r){t.exports=o;var n=r(25),i=r(18);function o(s){if(!(this instanceof o))return new o(s);n.call(this,s)}i.inherits=r(12),i.inherits(o,n),o.prototype._transform=function(s,a,l){l(null,s)}},function(t,e,r){t.exports=r(22)},function(t,e,r){t.exports=r(21)},function(t,e,r){t.exports=r(25)},function(t,e,r){t.exports=r(26)},function(t,e,r){var n=r(32),i=r(33),o=r(38),s=r(39),a=r(40),l=r(41),h=r(42),g=Object.prototype.toString;function m(w){if(!(this instanceof m))return new m(w);this.options=i.assign({chunkSize:16384,windowBits:0,to:""},w||{});var b=this.options;b.raw&&b.windowBits>=0&&b.windowBits<16&&(b.windowBits=-b.windowBits,b.windowBits===0&&(b.windowBits=-15)),!(b.windowBits>=0&&b.windowBits<16)||w&&w.windowBits||(b.windowBits+=32),b.windowBits>15&&b.windowBits<48&&(15&b.windowBits)==0&&(b.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new l,this.strm.avail_out=0;var N=n.inflateInit2(this.strm,b.windowBits);if(N!==s.Z_OK)throw new Error(a[N]);this.header=new h,n.inflateGetHeader(this.strm,this.header)}function p(w,b){var N=new m(b);if(N.push(w,!0),N.err)throw N.msg||a[N.err];return N.result}m.prototype.push=function(w,b){var N,O,I,D,G,q,J=this.strm,C=this.options.chunkSize,z=this.options.dictionary,S=!1;if(this.ended)return!1;O=b===~~b?b:b===!0?s.Z_FINISH:s.Z_NO_FLUSH,typeof w=="string"?J.input=o.binstring2buf(w):g.call(w)==="[object ArrayBuffer]"?J.input=new Uint8Array(w):J.input=w,J.next_in=0,J.avail_in=J.input.length;do{if(J.avail_out===0&&(J.output=new i.Buf8(C),J.next_out=0,J.avail_out=C),(N=n.inflate(J,s.Z_NO_FLUSH))===s.Z_NEED_DICT&&z&&(q=typeof z=="string"?o.string2buf(z):g.call(z)==="[object ArrayBuffer]"?new Uint8Array(z):z,N=n.inflateSetDictionary(this.strm,q)),N===s.Z_BUF_ERROR&&S===!0&&(N=s.Z_OK,S=!1),N!==s.Z_STREAM_END&&N!==s.Z_OK)return this.onEnd(N),this.ended=!0,!1;J.next_out&&(J.avail_out!==0&&N!==s.Z_STREAM_END&&(J.avail_in!==0||O!==s.Z_FINISH&&O!==s.Z_SYNC_FLUSH)||(this.options.to==="string"?(I=o.utf8border(J.output,J.next_out),D=J.next_out-I,G=o.buf2string(J.output,I),J.next_out=D,J.avail_out=C-D,D&&i.arraySet(J.output,J.output,I,D,0),this.onData(G)):this.onData(i.shrinkBuf(J.output,J.next_out)))),J.avail_in===0&&J.avail_out===0&&(S=!0)}while((J.avail_in>0||J.avail_out===0)&&N!==s.Z_STREAM_END);return N===s.Z_STREAM_END&&(O=s.Z_FINISH),O===s.Z_FINISH?(N=n.inflateEnd(this.strm),this.onEnd(N),this.ended=!0,N===s.Z_OK):O!==s.Z_SYNC_FLUSH||(this.onEnd(s.Z_OK),J.avail_out=0,!0)},m.prototype.onData=function(w){this.chunks.push(w)},m.prototype.onEnd=function(w){w===s.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=w,this.msg=this.strm.msg},e.Inflate=m,e.inflate=p,e.inflateRaw=function(w,b){return(b=b||{}).raw=!0,p(w,b)},e.ungzip=p},function(t,e,r){var n=r(33),i=r(34),o=r(35),s=r(36),a=r(37),l=-2,h=12,g=30;function m(C){return(C>>>24&255)+(C>>>8&65280)+((65280&C)<<8)+((255&C)<<24)}function p(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new n.Buf16(320),this.work=new n.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function w(C){var z;return C&&C.state?(z=C.state,C.total_in=C.total_out=z.total=0,C.msg="",z.wrap&&(C.adler=1&z.wrap),z.mode=1,z.last=0,z.havedict=0,z.dmax=32768,z.head=null,z.hold=0,z.bits=0,z.lencode=z.lendyn=new n.Buf32(852),z.distcode=z.distdyn=new n.Buf32(592),z.sane=1,z.back=-1,0):l}function b(C){var z;return C&&C.state?((z=C.state).wsize=0,z.whave=0,z.wnext=0,w(C)):l}function N(C,z){var S,W;return C&&C.state?(W=C.state,z<0?(S=0,z=-z):(S=1+(z>>4),z<48&&(z&=15)),z&&(z<8||z>15)?l:(W.window!==null&&W.wbits!==z&&(W.window=null),W.wrap=S,W.wbits=z,b(C))):l}function O(C,z){var S,W;return C?(W=new p,C.state=W,W.window=null,(S=N(C,z))!==0&&(C.state=null),S):l}var I,D,G=!0;function q(C){if(G){var z;for(I=new n.Buf32(512),D=new n.Buf32(32),z=0;z<144;)C.lens[z++]=8;for(;z<256;)C.lens[z++]=9;for(;z<280;)C.lens[z++]=7;for(;z<288;)C.lens[z++]=8;for(a(1,C.lens,0,288,I,0,C.work,{bits:9}),z=0;z<32;)C.lens[z++]=5;a(2,C.lens,0,32,D,0,C.work,{bits:5}),G=!1}C.lencode=I,C.lenbits=9,C.distcode=D,C.distbits=5}function J(C,z,S,W){var te,X=C.state;return X.window===null&&(X.wsize=1<<X.wbits,X.wnext=0,X.whave=0,X.window=new n.Buf8(X.wsize)),W>=X.wsize?(n.arraySet(X.window,z,S-X.wsize,X.wsize,0),X.wnext=0,X.whave=X.wsize):((te=X.wsize-X.wnext)>W&&(te=W),n.arraySet(X.window,z,S-W,te,X.wnext),(W-=te)?(n.arraySet(X.window,z,S-W,W,0),X.wnext=W,X.whave=X.wsize):(X.wnext+=te,X.wnext===X.wsize&&(X.wnext=0),X.whave<X.wsize&&(X.whave+=te))),0}e.inflateReset=b,e.inflateReset2=N,e.inflateResetKeep=w,e.inflateInit=function(C){return O(C,15)},e.inflateInit2=O,e.inflate=function(C,z){var S,W,te,X,ue,ae,ye,M,F,ie,B,V,Y,ce,oe,ne,se,ge,be,Ie,T,R,j,H,Z=0,K=new n.Buf8(4),Se=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!C||!C.state||!C.output||!C.input&&C.avail_in!==0)return l;(S=C.state).mode===h&&(S.mode=13),ue=C.next_out,te=C.output,ye=C.avail_out,X=C.next_in,W=C.input,ae=C.avail_in,M=S.hold,F=S.bits,ie=ae,B=ye,R=0;e:for(;;)switch(S.mode){case 1:if(S.wrap===0){S.mode=13;break}for(;F<16;){if(ae===0)break e;ae--,M+=W[X++]<<F,F+=8}if(2&S.wrap&&M===35615){S.check=0,K[0]=255&M,K[1]=M>>>8&255,S.check=o(S.check,K,2,0),M=0,F=0,S.mode=2;break}if(S.flags=0,S.head&&(S.head.done=!1),!(1&S.wrap)||(((255&M)<<8)+(M>>8))%31){C.msg="incorrect header check",S.mode=g;break}if((15&M)!=8){C.msg="unknown compression method",S.mode=g;break}if(F-=4,T=8+(15&(M>>>=4)),S.wbits===0)S.wbits=T;else if(T>S.wbits){C.msg="invalid window size",S.mode=g;break}S.dmax=1<<T,C.adler=S.check=1,S.mode=512&M?10:h,M=0,F=0;break;case 2:for(;F<16;){if(ae===0)break e;ae--,M+=W[X++]<<F,F+=8}if(S.flags=M,(255&S.flags)!=8){C.msg="unknown compression method",S.mode=g;break}if(57344&S.flags){C.msg="unknown header flags set",S.mode=g;break}S.head&&(S.head.text=M>>8&1),512&S.flags&&(K[0]=255&M,K[1]=M>>>8&255,S.check=o(S.check,K,2,0)),M=0,F=0,S.mode=3;case 3:for(;F<32;){if(ae===0)break e;ae--,M+=W[X++]<<F,F+=8}S.head&&(S.head.time=M),512&S.flags&&(K[0]=255&M,K[1]=M>>>8&255,K[2]=M>>>16&255,K[3]=M>>>24&255,S.check=o(S.check,K,4,0)),M=0,F=0,S.mode=4;case 4:for(;F<16;){if(ae===0)break e;ae--,M+=W[X++]<<F,F+=8}S.head&&(S.head.xflags=255&M,S.head.os=M>>8),512&S.flags&&(K[0]=255&M,K[1]=M>>>8&255,S.check=o(S.check,K,2,0)),M=0,F=0,S.mode=5;case 5:if(1024&S.flags){for(;F<16;){if(ae===0)break e;ae--,M+=W[X++]<<F,F+=8}S.length=M,S.head&&(S.head.extra_len=M),512&S.flags&&(K[0]=255&M,K[1]=M>>>8&255,S.check=o(S.check,K,2,0)),M=0,F=0}else S.head&&(S.head.extra=null);S.mode=6;case 6:if(1024&S.flags&&((V=S.length)>ae&&(V=ae),V&&(S.head&&(T=S.head.extra_len-S.length,S.head.extra||(S.head.extra=new Array(S.head.extra_len)),n.arraySet(S.head.extra,W,X,V,T)),512&S.flags&&(S.check=o(S.check,W,V,X)),ae-=V,X+=V,S.length-=V),S.length))break e;S.length=0,S.mode=7;case 7:if(2048&S.flags){if(ae===0)break e;V=0;do T=W[X+V++],S.head&&T&&S.length<65536&&(S.head.name+=String.fromCharCode(T));while(T&&V<ae);if(512&S.flags&&(S.check=o(S.check,W,V,X)),ae-=V,X+=V,T)break e}else S.head&&(S.head.name=null);S.length=0,S.mode=8;case 8:if(4096&S.flags){if(ae===0)break e;V=0;do T=W[X+V++],S.head&&T&&S.length<65536&&(S.head.comment+=String.fromCharCode(T));while(T&&V<ae);if(512&S.flags&&(S.check=o(S.check,W,V,X)),ae-=V,X+=V,T)break e}else S.head&&(S.head.comment=null);S.mode=9;case 9:if(512&S.flags){for(;F<16;){if(ae===0)break e;ae--,M+=W[X++]<<F,F+=8}if(M!==(65535&S.check)){C.msg="header crc mismatch",S.mode=g;break}M=0,F=0}S.head&&(S.head.hcrc=S.flags>>9&1,S.head.done=!0),C.adler=S.check=0,S.mode=h;break;case 10:for(;F<32;){if(ae===0)break e;ae--,M+=W[X++]<<F,F+=8}C.adler=S.check=m(M),M=0,F=0,S.mode=11;case 11:if(S.havedict===0)return C.next_out=ue,C.avail_out=ye,C.next_in=X,C.avail_in=ae,S.hold=M,S.bits=F,2;C.adler=S.check=1,S.mode=h;case h:if(z===5||z===6)break e;case 13:if(S.last){M>>>=7&F,F-=7&F,S.mode=27;break}for(;F<3;){if(ae===0)break e;ae--,M+=W[X++]<<F,F+=8}switch(S.last=1&M,F-=1,3&(M>>>=1)){case 0:S.mode=14;break;case 1:if(q(S),S.mode=20,z===6){M>>>=2,F-=2;break e}break;case 2:S.mode=17;break;case 3:C.msg="invalid block type",S.mode=g}M>>>=2,F-=2;break;case 14:for(M>>>=7&F,F-=7&F;F<32;){if(ae===0)break e;ae--,M+=W[X++]<<F,F+=8}if((65535&M)!=(M>>>16^65535)){C.msg="invalid stored block lengths",S.mode=g;break}if(S.length=65535&M,M=0,F=0,S.mode=15,z===6)break e;case 15:S.mode=16;case 16:if(V=S.length){if(V>ae&&(V=ae),V>ye&&(V=ye),V===0)break e;n.arraySet(te,W,X,V,ue),ae-=V,X+=V,ye-=V,ue+=V,S.length-=V;break}S.mode=h;break;case 17:for(;F<14;){if(ae===0)break e;ae--,M+=W[X++]<<F,F+=8}if(S.nlen=257+(31&M),M>>>=5,F-=5,S.ndist=1+(31&M),M>>>=5,F-=5,S.ncode=4+(15&M),M>>>=4,F-=4,S.nlen>286||S.ndist>30){C.msg="too many length or distance symbols",S.mode=g;break}S.have=0,S.mode=18;case 18:for(;S.have<S.ncode;){for(;F<3;){if(ae===0)break e;ae--,M+=W[X++]<<F,F+=8}S.lens[Se[S.have++]]=7&M,M>>>=3,F-=3}for(;S.have<19;)S.lens[Se[S.have++]]=0;if(S.lencode=S.lendyn,S.lenbits=7,j={bits:S.lenbits},R=a(0,S.lens,0,19,S.lencode,0,S.work,j),S.lenbits=j.bits,R){C.msg="invalid code lengths set",S.mode=g;break}S.have=0,S.mode=19;case 19:for(;S.have<S.nlen+S.ndist;){for(;ne=(Z=S.lencode[M&(1<<S.lenbits)-1])>>>16&255,se=65535&Z,!((oe=Z>>>24)<=F);){if(ae===0)break e;ae--,M+=W[X++]<<F,F+=8}if(se<16)M>>>=oe,F-=oe,S.lens[S.have++]=se;else{if(se===16){for(H=oe+2;F<H;){if(ae===0)break e;ae--,M+=W[X++]<<F,F+=8}if(M>>>=oe,F-=oe,S.have===0){C.msg="invalid bit length repeat",S.mode=g;break}T=S.lens[S.have-1],V=3+(3&M),M>>>=2,F-=2}else if(se===17){for(H=oe+3;F<H;){if(ae===0)break e;ae--,M+=W[X++]<<F,F+=8}F-=oe,T=0,V=3+(7&(M>>>=oe)),M>>>=3,F-=3}else{for(H=oe+7;F<H;){if(ae===0)break e;ae--,M+=W[X++]<<F,F+=8}F-=oe,T=0,V=11+(127&(M>>>=oe)),M>>>=7,F-=7}if(S.have+V>S.nlen+S.ndist){C.msg="invalid bit length repeat",S.mode=g;break}for(;V--;)S.lens[S.have++]=T}}if(S.mode===g)break;if(S.lens[256]===0){C.msg="invalid code -- missing end-of-block",S.mode=g;break}if(S.lenbits=9,j={bits:S.lenbits},R=a(1,S.lens,0,S.nlen,S.lencode,0,S.work,j),S.lenbits=j.bits,R){C.msg="invalid literal/lengths set",S.mode=g;break}if(S.distbits=6,S.distcode=S.distdyn,j={bits:S.distbits},R=a(2,S.lens,S.nlen,S.ndist,S.distcode,0,S.work,j),S.distbits=j.bits,R){C.msg="invalid distances set",S.mode=g;break}if(S.mode=20,z===6)break e;case 20:S.mode=21;case 21:if(ae>=6&&ye>=258){C.next_out=ue,C.avail_out=ye,C.next_in=X,C.avail_in=ae,S.hold=M,S.bits=F,s(C,B),ue=C.next_out,te=C.output,ye=C.avail_out,X=C.next_in,W=C.input,ae=C.avail_in,M=S.hold,F=S.bits,S.mode===h&&(S.back=-1);break}for(S.back=0;ne=(Z=S.lencode[M&(1<<S.lenbits)-1])>>>16&255,se=65535&Z,!((oe=Z>>>24)<=F);){if(ae===0)break e;ae--,M+=W[X++]<<F,F+=8}if(ne&&(240&ne)==0){for(ge=oe,be=ne,Ie=se;ne=(Z=S.lencode[Ie+((M&(1<<ge+be)-1)>>ge)])>>>16&255,se=65535&Z,!(ge+(oe=Z>>>24)<=F);){if(ae===0)break e;ae--,M+=W[X++]<<F,F+=8}M>>>=ge,F-=ge,S.back+=ge}if(M>>>=oe,F-=oe,S.back+=oe,S.length=se,ne===0){S.mode=26;break}if(32&ne){S.back=-1,S.mode=h;break}if(64&ne){C.msg="invalid literal/length code",S.mode=g;break}S.extra=15&ne,S.mode=22;case 22:if(S.extra){for(H=S.extra;F<H;){if(ae===0)break e;ae--,M+=W[X++]<<F,F+=8}S.length+=M&(1<<S.extra)-1,M>>>=S.extra,F-=S.extra,S.back+=S.extra}S.was=S.length,S.mode=23;case 23:for(;ne=(Z=S.distcode[M&(1<<S.distbits)-1])>>>16&255,se=65535&Z,!((oe=Z>>>24)<=F);){if(ae===0)break e;ae--,M+=W[X++]<<F,F+=8}if((240&ne)==0){for(ge=oe,be=ne,Ie=se;ne=(Z=S.distcode[Ie+((M&(1<<ge+be)-1)>>ge)])>>>16&255,se=65535&Z,!(ge+(oe=Z>>>24)<=F);){if(ae===0)break e;ae--,M+=W[X++]<<F,F+=8}M>>>=ge,F-=ge,S.back+=ge}if(M>>>=oe,F-=oe,S.back+=oe,64&ne){C.msg="invalid distance code",S.mode=g;break}S.offset=se,S.extra=15&ne,S.mode=24;case 24:if(S.extra){for(H=S.extra;F<H;){if(ae===0)break e;ae--,M+=W[X++]<<F,F+=8}S.offset+=M&(1<<S.extra)-1,M>>>=S.extra,F-=S.extra,S.back+=S.extra}if(S.offset>S.dmax){C.msg="invalid distance too far back",S.mode=g;break}S.mode=25;case 25:if(ye===0)break e;if(V=B-ye,S.offset>V){if((V=S.offset-V)>S.whave&&S.sane){C.msg="invalid distance too far back",S.mode=g;break}V>S.wnext?(V-=S.wnext,Y=S.wsize-V):Y=S.wnext-V,V>S.length&&(V=S.length),ce=S.window}else ce=te,Y=ue-S.offset,V=S.length;V>ye&&(V=ye),ye-=V,S.length-=V;do te[ue++]=ce[Y++];while(--V);S.length===0&&(S.mode=21);break;case 26:if(ye===0)break e;te[ue++]=S.length,ye--,S.mode=21;break;case 27:if(S.wrap){for(;F<32;){if(ae===0)break e;ae--,M|=W[X++]<<F,F+=8}if(B-=ye,C.total_out+=B,S.total+=B,B&&(C.adler=S.check=S.flags?o(S.check,te,B,ue-B):i(S.check,te,B,ue-B)),B=ye,(S.flags?M:m(M))!==S.check){C.msg="incorrect data check",S.mode=g;break}M=0,F=0}S.mode=28;case 28:if(S.wrap&&S.flags){for(;F<32;){if(ae===0)break e;ae--,M+=W[X++]<<F,F+=8}if(M!==(4294967295&S.total)){C.msg="incorrect length check",S.mode=g;break}M=0,F=0}S.mode=29;case 29:R=1;break e;case g:R=-3;break e;case 31:return-4;default:return l}return C.next_out=ue,C.avail_out=ye,C.next_in=X,C.avail_in=ae,S.hold=M,S.bits=F,(S.wsize||B!==C.avail_out&&S.mode<g&&(S.mode<27||z!==4))&&J(C,C.output,C.next_out,B-C.avail_out),ie-=C.avail_in,B-=C.avail_out,C.total_in+=ie,C.total_out+=B,S.total+=B,S.wrap&&B&&(C.adler=S.check=S.flags?o(S.check,te,B,C.next_out-B):i(S.check,te,B,C.next_out-B)),C.data_type=S.bits+(S.last?64:0)+(S.mode===h?128:0)+(S.mode===20||S.mode===15?256:0),(ie===0&&B===0||z===4)&&R===0&&(R=-5),R},e.inflateEnd=function(C){if(!C||!C.state)return l;var z=C.state;return z.window&&(z.window=null),C.state=null,0},e.inflateGetHeader=function(C,z){var S;return C&&C.state?(2&(S=C.state).wrap)==0?l:(S.head=z,z.done=!1,0):l},e.inflateSetDictionary=function(C,z){var S,W=z.length;return C&&C.state?(S=C.state).wrap!==0&&S.mode!==11?l:S.mode===11&&i(1,z,W,0)!==S.check?-3:J(C,z,W,W)?(S.mode=31,-4):(S.havedict=1,0):l},e.inflateInfo="pako inflate (from Nodeca project)"},function(t,e){var r=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";e.assign=function(o){for(var s=Array.prototype.slice.call(arguments,1);s.length;){var a=s.shift();if(a){if(typeof a!="object")throw new TypeError(a+"must be non-object");for(var l in a)a.hasOwnProperty(l)&&(o[l]=a[l])}}return o},e.shrinkBuf=function(o,s){return o.length===s?o:o.subarray?o.subarray(0,s):(o.length=s,o)};var n={arraySet:function(o,s,a,l,h){if(s.subarray&&o.subarray)o.set(s.subarray(a,a+l),h);else for(var g=0;g<l;g++)o[h+g]=s[a+g]},flattenChunks:function(o){var s,a,l,h,g,m;for(l=0,s=0,a=o.length;s<a;s++)l+=o[s].length;for(m=new Uint8Array(l),h=0,s=0,a=o.length;s<a;s++)g=o[s],m.set(g,h),h+=g.length;return m}},i={arraySet:function(o,s,a,l,h){for(var g=0;g<l;g++)o[h+g]=s[a+g]},flattenChunks:function(o){return[].concat.apply([],o)}};e.setTyped=function(o){o?(e.Buf8=Uint8Array,e.Buf16=Uint16Array,e.Buf32=Int32Array,e.assign(e,n)):(e.Buf8=Array,e.Buf16=Array,e.Buf32=Array,e.assign(e,i))},e.setTyped(r)},function(t,e){t.exports=function(r,n,i,o){for(var s=65535&r|0,a=r>>>16&65535|0,l=0;i!==0;){i-=l=i>2e3?2e3:i;do a=a+(s=s+n[o++]|0)|0;while(--l);s%=65521,a%=65521}return s|a<<16|0}},function(t,e){var r=function(){for(var n,i=[],o=0;o<256;o++){n=o;for(var s=0;s<8;s++)n=1&n?3988292384^n>>>1:n>>>1;i[o]=n}return i}();t.exports=function(n,i,o,s){var a=r,l=s+o;n^=-1;for(var h=s;h<l;h++)n=n>>>8^a[255&(n^i[h])];return-1^n}},function(t,e){t.exports=function(r,n){var i,o,s,a,l,h,g,m,p,w,b,N,O,I,D,G,q,J,C,z,S,W,te,X,ue;i=r.state,o=r.next_in,X=r.input,s=o+(r.avail_in-5),a=r.next_out,ue=r.output,l=a-(n-r.avail_out),h=a+(r.avail_out-257),g=i.dmax,m=i.wsize,p=i.whave,w=i.wnext,b=i.window,N=i.hold,O=i.bits,I=i.lencode,D=i.distcode,G=(1<<i.lenbits)-1,q=(1<<i.distbits)-1;e:do{O<15&&(N+=X[o++]<<O,O+=8,N+=X[o++]<<O,O+=8),J=I[N&G];t:for(;;){if(N>>>=C=J>>>24,O-=C,(C=J>>>16&255)==0)ue[a++]=65535&J;else{if(!(16&C)){if((64&C)==0){J=I[(65535&J)+(N&(1<<C)-1)];continue t}if(32&C){i.mode=12;break e}r.msg="invalid literal/length code",i.mode=30;break e}z=65535&J,(C&=15)&&(O<C&&(N+=X[o++]<<O,O+=8),z+=N&(1<<C)-1,N>>>=C,O-=C),O<15&&(N+=X[o++]<<O,O+=8,N+=X[o++]<<O,O+=8),J=D[N&q];r:for(;;){if(N>>>=C=J>>>24,O-=C,!(16&(C=J>>>16&255))){if((64&C)==0){J=D[(65535&J)+(N&(1<<C)-1)];continue r}r.msg="invalid distance code",i.mode=30;break e}if(S=65535&J,O<(C&=15)&&(N+=X[o++]<<O,(O+=8)<C&&(N+=X[o++]<<O,O+=8)),(S+=N&(1<<C)-1)>g){r.msg="invalid distance too far back",i.mode=30;break e}if(N>>>=C,O-=C,S>(C=a-l)){if((C=S-C)>p&&i.sane){r.msg="invalid distance too far back",i.mode=30;break e}if(W=0,te=b,w===0){if(W+=m-C,C<z){z-=C;do ue[a++]=b[W++];while(--C);W=a-S,te=ue}}else if(w<C){if(W+=m+w-C,(C-=w)<z){z-=C;do ue[a++]=b[W++];while(--C);if(W=0,w<z){z-=C=w;do ue[a++]=b[W++];while(--C);W=a-S,te=ue}}}else if(W+=w-C,C<z){z-=C;do ue[a++]=b[W++];while(--C);W=a-S,te=ue}for(;z>2;)ue[a++]=te[W++],ue[a++]=te[W++],ue[a++]=te[W++],z-=3;z&&(ue[a++]=te[W++],z>1&&(ue[a++]=te[W++]))}else{W=a-S;do ue[a++]=ue[W++],ue[a++]=ue[W++],ue[a++]=ue[W++],z-=3;while(z>2);z&&(ue[a++]=ue[W++],z>1&&(ue[a++]=ue[W++]))}break}}break}}while(o<s&&a<h);o-=z=O>>3,N&=(1<<(O-=z<<3))-1,r.next_in=o,r.next_out=a,r.avail_in=o<s?s-o+5:5-(o-s),r.avail_out=a<h?h-a+257:257-(a-h),i.hold=N,i.bits=O}},function(t,e,r){var n=r(33),i=15,o=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],s=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],a=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],l=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];t.exports=function(h,g,m,p,w,b,N,O){var I,D,G,q,J,C,z,S,W,te=O.bits,X=0,ue=0,ae=0,ye=0,M=0,F=0,ie=0,B=0,V=0,Y=0,ce=null,oe=0,ne=new n.Buf16(16),se=new n.Buf16(16),ge=null,be=0;for(X=0;X<=i;X++)ne[X]=0;for(ue=0;ue<p;ue++)ne[g[m+ue]]++;for(M=te,ye=i;ye>=1&&ne[ye]===0;ye--);if(M>ye&&(M=ye),ye===0)return w[b++]=20971520,w[b++]=20971520,O.bits=1,0;for(ae=1;ae<ye&&ne[ae]===0;ae++);for(M<ae&&(M=ae),B=1,X=1;X<=i;X++)if(B<<=1,(B-=ne[X])<0)return-1;if(B>0&&(h===0||ye!==1))return-1;for(se[1]=0,X=1;X<i;X++)se[X+1]=se[X]+ne[X];for(ue=0;ue<p;ue++)g[m+ue]!==0&&(N[se[g[m+ue]]++]=ue);if(h===0?(ce=ge=N,C=19):h===1?(ce=o,oe-=257,ge=s,be-=257,C=256):(ce=a,ge=l,C=-1),Y=0,ue=0,X=ae,J=b,F=M,ie=0,G=-1,q=(V=1<<M)-1,h===1&&V>852||h===2&&V>592)return 1;for(;;){z=X-ie,N[ue]<C?(S=0,W=N[ue]):N[ue]>C?(S=ge[be+N[ue]],W=ce[oe+N[ue]]):(S=96,W=0),I=1<<X-ie,ae=D=1<<F;do w[J+(Y>>ie)+(D-=I)]=z<<24|S<<16|W|0;while(D!==0);for(I=1<<X-1;Y&I;)I>>=1;if(I!==0?(Y&=I-1,Y+=I):Y=0,ue++,--ne[X]==0){if(X===ye)break;X=g[m+N[ue]]}if(X>M&&(Y&q)!==G){for(ie===0&&(ie=M),J+=ae,B=1<<(F=X-ie);F+ie<ye&&!((B-=ne[F+ie])<=0);)F++,B<<=1;if(V+=1<<F,h===1&&V>852||h===2&&V>592)return 1;w[G=Y&q]=M<<24|F<<16|J-b|0}}return Y!==0&&(w[J+Y]=X-ie<<24|64<<16|0),O.bits=M,0}},function(t,e,r){var n=r(33),i=!0,o=!0;try{String.fromCharCode.apply(null,[0])}catch{i=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{o=!1}for(var s=new n.Buf8(256),a=0;a<256;a++)s[a]=a>=252?6:a>=248?5:a>=240?4:a>=224?3:a>=192?2:1;function l(h,g){if(g<65537&&(h.subarray&&o||!h.subarray&&i))return String.fromCharCode.apply(null,n.shrinkBuf(h,g));for(var m="",p=0;p<g;p++)m+=String.fromCharCode(h[p]);return m}s[254]=s[254]=1,e.string2buf=function(h){var g,m,p,w,b,N=h.length,O=0;for(w=0;w<N;w++)(64512&(m=h.charCodeAt(w)))==55296&&w+1<N&&(64512&(p=h.charCodeAt(w+1)))==56320&&(m=65536+(m-55296<<10)+(p-56320),w++),O+=m<128?1:m<2048?2:m<65536?3:4;for(g=new n.Buf8(O),b=0,w=0;b<O;w++)(64512&(m=h.charCodeAt(w)))==55296&&w+1<N&&(64512&(p=h.charCodeAt(w+1)))==56320&&(m=65536+(m-55296<<10)+(p-56320),w++),m<128?g[b++]=m:m<2048?(g[b++]=192|m>>>6,g[b++]=128|63&m):m<65536?(g[b++]=224|m>>>12,g[b++]=128|m>>>6&63,g[b++]=128|63&m):(g[b++]=240|m>>>18,g[b++]=128|m>>>12&63,g[b++]=128|m>>>6&63,g[b++]=128|63&m);return g},e.buf2binstring=function(h){return l(h,h.length)},e.binstring2buf=function(h){for(var g=new n.Buf8(h.length),m=0,p=g.length;m<p;m++)g[m]=h.charCodeAt(m);return g},e.buf2string=function(h,g){var m,p,w,b,N=g||h.length,O=new Array(2*N);for(p=0,m=0;m<N;)if((w=h[m++])<128)O[p++]=w;else if((b=s[w])>4)O[p++]=65533,m+=b-1;else{for(w&=b===2?31:b===3?15:7;b>1&&m<N;)w=w<<6|63&h[m++],b--;b>1?O[p++]=65533:w<65536?O[p++]=w:(w-=65536,O[p++]=55296|w>>10&1023,O[p++]=56320|1023&w)}return l(O,p)},e.utf8border=function(h,g){var m;for((g=g||h.length)>h.length&&(g=h.length),m=g-1;m>=0&&(192&h[m])==128;)m--;return m<0||m===0?g:m+s[h[m]]>g?m:g}},function(t,e){t.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},function(t,e){t.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},function(t,e){t.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},function(t,e){t.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}}])},Ua.exports=xw();Gu=!1,Ge=Ua.exports.BFSRequire("fs");Ua.exports.BFSRequire("buffer").Buffer;i0=async(t=["data","projects","extensions","settings","plugins"],e=()=>{},r=()=>{})=>!!Gu||new Promise(n=>{Ge.getRootFS(),Ua.exports.FileSystem.IndexedDB.Create({},(i,o)=>{if(i)throw i;if(!o)throw r(),new Error("Error creating BrowserFS");Ua.exports.initialize(o);let s=[];t.forEach(async a=>{s.push(s0(Ge,a))}),Promise.all(s).then(a=>{e(),Gu=!0,n(!0)})})});o0=async(t,e="data",r=n=>{console.log(n)})=>new Promise(n=>{Ge.stat("/"+e+"/"+t,(i,o)=>{if(i)throw i;let s=o.size;r(s),n(s)})}),kw=async(t="",e="data",r=(n,i)=>{console.log(n,i)})=>new Promise(n=>{Ge.open("/"+e+"/"+t,"r",(i,o)=>{if(i)throw i;Ge.read(o,65535,0,"utf-8",(s,a,l)=>{if(s)throw s;if(l!==0){let h=a.toString().split(`
`)[0];Ge.close(o,()=>{r(h,t),n(h)})}else n(void 0)})})}),Nw=async(t="data",e=n=>{},r)=>new Promise(n=>{Ge.readdir("/"+t,(i,o)=>{if(i)throw i;o&&(console.log("files",o),e(o)),n(o)})}),is={},s0=async(t,e)=>new Promise(r=>{is[e]==="exists"||is[e]==="created"?r():t.exists(`/${e}`,n=>{n?(is[e]="exists",console.log(`/${e} exists!`),r()):is[e]==="creating"?(console.log(e+" is still being created."),r()):(console.log("creating "+e),is[e]="creating",t.mkdir(e,i=>{if(i)throw i;is[e]="created",setTimeout(r,500)}))})}),Hi=Object.freeze({__proto__:null,fs:Ge,initFS:i0,exists:async(t="",e="data")=>new Promise(r=>{Ge.exists("/"+e+"/"+t,function(n){r(n)})}),readFile:async(t="sessionName",e="data")=>(Gu||await i0(),new Promise(r=>{Ge.readFile("/"+e+"/"+t,function(n,i){r(i)})})),readFileChunk:Tw,getFilenames:(t=r=>{},e="/data")=>new Promise(r=>{Ge.readdir(e,(n,i)=>{if(n)throw n;i?(console.log("files",i),t(i),r(i)):r(void 0)})}),writeFile:async(t,e,r="data",n=i=>{})=>new Promise(i=>{Ge.writeFile("/"+r+"/"+t,e,o=>{if(o)throw o;n(e),i(!0)})}),appendFile:async(t,e,r="data",n=i=>{})=>new Promise(i=>{Ge.appendFile("/"+r+"/"+t,e,o=>{if(o)throw o;n(e),i(!0)})}),deleteFile:(t="sessionName",e="data",r=Nw)=>new Promise(n=>{t!=""?Ge.unlink("/"+e+"/"+t,i=>{i&&console.error(i),r(),n(!0)}):(console.error("Path name is not defined"),n(!1))}),readFileAsText:async(t="sessionName.csv",e="data",r="end",n=0,i=(o,s)=>{})=>new Promise(async o=>{let s=await o0(t,e);(r==="end"||typeof r=="number"&&r>s)&&(r=s),Ge.open("/"+e+"/"+t,"r",(a,l)=>{if(a)throw a;Ge.read(l,r,n,"utf-8",(h,g,m)=>{if(h)throw h;if(m!==0){let p=g.toString();Ge.close(l,()=>{i(p,t),o(p)})}else o(void 0)})})}),getFileSize:o0,getCSVHeader:kw,listFiles:Nw,writeToCSVFromDB:async(t="sessionName",e="data",r=10)=>new Promise(n=>{t!=""?Ge.stat("/"+e+"/"+t,(i,o)=>{if(i)throw i;let s=o.size;console.log(s),Ge.open(e+"/"+t,"r",(a,l)=>{if(a)throw a;let h=1024*r*1024,g=h;s<h&&(g=s,Ge.read(l,g,0,"utf-8",(m,p,w)=>{if(m)throw m;w!==0&&ja.saveCSV(p.toString(),t),Ge.close(l),n(!0)}))})}):(console.error("File name is not defined."),n(!1))}),readCSVChunkFromDB:async function(t,e="data",r=0,n="end"){let i=await kw(t);if(!i)return;i=i.split(",");let o=[],s=[],a={};i.forEach(m=>{m?(s.push(m),o.push(1)):o[o.length-1]++});let l=await o0(t,e);n==="end"?n=l:n>l&&(r=l-(n-r),n=l);let h=await Tw(t,e,r,n),g=0;return h.forEach((m,p)=>{let w=m.split(",");for(;g<w.length-1;){let b=o[0];b===1?(a[s[0]].push(w[g]),g++):(a[s[0]].push(w[g].slice(g,b)),g+=b)}}),a},saveToFS:async(t,e="sessionName",r="data")=>(Gu||await i0(),new Promise(async n=>{await s0(Ge,r),Ge.writeFile("/"+r+"/"+e,t,i=>{if(i)throw i;n(t)})})),dirExists:s0});BI=Object.freeze({__proto__:null,checkFolder:a0,createDriveFolder:function(t="Brainsatplay_Data"){let e=new Object;e.name=t,e.mimeType="application/vnd.google-apps.folder",window.gapi.client.drive.files.create({resource:e}).then(r=>{console.log(r.result)})},backupToDrive:(t,e="/data")=>{window.gapi.auth2.getAuthInstance().isSignedIn.get()?Ge.readFile(e+"/"+t,(r,n)=>{if(r)throw r;let i=new Blob([n.toString()],{type:"text/csv"});a0(o=>{let s={name:t+".csv",mimeType:"application/vnd.google-apps.spreadsheet",parents:[o.files[0].id]},a=window.gapi.auth.getToken().access_token;var l=new FormData;l.append("metadata",new Blob([JSON.stringify(s)],{type:"application/json"})),l.append("file",i);var h=new XMLHttpRequest;h.open("post","https://www.googleapis.com/upload/drive/v3/files?uploadType=multipart&fields=id"),h.setRequestHeader("Authorization","Bearer "+a),h.responseType="json",h.onload=()=>{console.log("Uploaded file id: ",h.response.id),Iw()},h.send(l)})}):alert("Sign in with Google first!")},listDriveFiles:Iw});l0.regex=/^\s*data:([a-z]+\/[a-z]+(;[a-z\-]+\=[a-z\-]+)?)?(;base64)?,[a-z0-9\!\$\&\'\,\(\)\*\+\,\;\=\-\.\_\~\:\@\/\?\%\s]*\s*$/i;zI=Object.freeze({__proto__:null,dataURLtoBlob:function(t){if(l0(t)){for(var e=t.split(","),r=e[0].match(/:(.*?);/)[1],n=atob(e[1]),i=n.length,o=new Uint8Array(i);i--;)o[i]=n.charCodeAt(i);return new Blob([o],{type:r})}},blobToDataURL:function(t,e){var r=new FileReader;r.onload=function(n){e(n.target.result)},r.readAsDataURL(t)},dataToBlob:async function(t,e="text/plain",r=256e3){let n={filename,data:new Blob([t],{filetype:e})};if(Object.assign(n,props),n.data.size>r){let i=n.data.size,o=0,s=0,a=[];for(;o<i;){let l,h=o+r;if(h>i&&(h=i),l=e==="text/plain"?await n.data.slice(o,h).text():await n.data.slice(o,h).arrayBuffer(),l){let g={filename,data:new Blob([l],{type:e}),chunk:s,start:o,end:h};Object.assign(g,props),a.push(g)}o+=r,s++}return a}return n}});typeof minimongo<"u"&&(Rw=Dw());Dw=t=>{try{t=new minimongo.IndexedDb}catch{try{t=new minimongo.LocalStorageDb}catch{try{t=new minimongo.MemoryDb}catch{console.error("No DB created!")}}}return t},Fw=async(t,e)=>{let r=t[e].find(),n=[];return await r.count()>0&&await Promise.all(r.map(async i=>{i.chunk!==void 0?i.chunk===0&&n.push(i.filename):n.push(i.filename)})),n},eT=Fw,Aw=async(t,e,r)=>{let n,i=t[e].find({filename:r});if(await i.count()>0){let o={};await Promise.all(i.map(async a=>{let l=await a.data.text();a.chunk!==void 0?o[a.chunk]=l:o[0]=l}));let s=Object.keys(o).length;for(let a=0;a<s;a++)n+=o[a]}return n},VI=Object.freeze({__proto__:null,get db(){return Rw},localDB:Dw,remoteDB:(t,e,r,n,i,o)=>new minimongo.RemoteDb(e,r,n,i,o),connectDB:(t,e,r,n,i,o)=>{let s=new minimongo.RemoteDb(e,r,n,i,o);return t=new minimongo.HybridDb(t,s)},readData:async(t,e="",r={})=>{if(e)return t[e]||t.addCollection(e),await t[e].findOne(r)},writeData:async(t,e,r={},n=o=>{},i=o=>{})=>{if(e)return t[e]||t.addCollection(e),await t[e].upsert(r,n,i)},readFile:async(t,e,r="")=>{if(!t[e])return;let n,i={filename:r},o=t[e].find(i);return await o.count()>0&&(n=[],await Promise.all(o.map(async s=>{n.push(s)}))),n},readFileChunk:async(t,e,r="",n,i,o,s=h=>{},a=h=>{},l)=>{if(!t[e])return;let h={filename:r};return n&&(h.chunk=n),i&&(h.start=i),o&&(h.end=o),n||i&&o?await t[e].findOne(h,l,s,a):void 0},writeFile:async(t,e,r="",n,i=h=>{},o=h=>{},s={},a="text/plain",l=256e3)=>{let h=t[e].find({filename:r});await h.count()>0&&await Promise.all(h.map(async m=>{t[e].remove(m._id)}));let g={filename:r,data:new Blob([n],{filetype:a})};if(Object.assign(g,s),g.data.size>l){let m=g.data.size,p=0,w=0;for(;p<m;){let b,N=p+l;if(N>m&&(N=m),b=a==="text/plain"?await g.data.slice(p,N).text():await g.data.slice(p,N).arrayBuffer(),b){let O={filename:r,data:new Blob([b],{type:a}),chunk:w,start:p,end:N};Object.assign(O,s),t[e].upsert(O,i,o)}p+=l,w++}}else t[e].upsert(g,i,o)},appendFile:async(t,e,r="",n,i=h=>{},o=h=>{},s={},a="text/plain",l=256e3)=>{let h=t[e].find({filename:r}),g=await h.count(),m=0,p={filename:r,data:new Blob([n],{filetype:a})};if(Object.assign(p,s),g>0)if(await Promise.all(h.map(async w=>{m+=w.size})),p.data.size>l){let w=m,b=g;for(;w<p.data.size+m;){let N,O=w+l;if(O>m&&(O=m),N=a==="text/plain"?await p.data.slice(w,O).text():await p.data.slice(w,O).arrayBuffer(),N){let I={filename:r,data:new Blob([N],{type:a}),chunk:b,start:w,end:O,size:O-w};Object.assign(I,s),t[e].upsert(I,i,o)}w+=l,b++}}else p.chunk=g,p.start=m,p.end=m+p.data.size,t[e].upsert(p,i,o);else t[e].upsert(p,i,o)},getFilenames:Fw,listFiles:eT,getFileSize:async(t,e,r)=>{let n=t[e].find({filename:r}),i=await n.count(),o=0;return i>0&&await Promise.all(n.map(async s=>{o+=s.size})),o},deleteFile:async(t,e,r)=>await t[e].remove(r),writeToCSVFromDB:async(t,e,r)=>{let n=await Aw(e,r);ja.saveCSV(n,r)},getCSVHeader:async(t,e,r)=>{let n,i=t[e].find({filename:r});return await i.count()>0&&await Promise.all(i.map(async o=>{if(o.chunk!==void 0&&o.chunk===0){let s=await o.data.text();n=s.substring(0,s.indexOf(`
`))}})),n},readFileAsText:Aw})});function tT(t="state.json",e=qr){e.subscribe("state",r=>{Hi.writeFile(t,JSON.stringify(r),"data")})}function os(n){return re(this,arguments,function*(t,e="state.json",r=qr){yield Hi.initFS(["data"]),yield Hi.dirExists(Hi.fs,"data");let i=yield new Promise(s=>{Hi.fs.exists("/data/"+e,a=>{s(a)})}),o;if(i){o=yield Hi.readFileAsText("state.json","data");try{let s=JSON.parse(o);typeof s=="object"&&(s.loggedInId&&s.loggedInId===(t==null?void 0:t._id)||!s.loggedInId)&&r.setState(s)}catch(s){console.error(s)}}return tT(e,r),o})}var qr,Ba=at(()=>{Ow();Cw();qr=new n0({route:"/",isLoggedIn:!1,appInitialized:!1,loggedInId:void 0})});function rT(t,e){return e={exports:{}},t(e,e.exports),e.exports}function Yw(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");r===-1&&(r=e);var n=r===e?0:4-r%4;return[r,n]}function aT(t){var e=Yw(t),r=e[0],n=e[1];return(r+n)*3/4-n}function lT(t,e,r){return(e+r)*3/4-r}function uT(t){var e,r=Yw(t),n=r[0],i=r[1],o=new sT(lT(t,n,i)),s=0,a=i>0?n-4:n,l;for(l=0;l<a;l+=4)e=Hr[t.charCodeAt(l)]<<18|Hr[t.charCodeAt(l+1)]<<12|Hr[t.charCodeAt(l+2)]<<6|Hr[t.charCodeAt(l+3)],o[s++]=e>>16&255,o[s++]=e>>8&255,o[s++]=e&255;return i===2&&(e=Hr[t.charCodeAt(l)]<<2|Hr[t.charCodeAt(l+1)]>>4,o[s++]=e&255),i===1&&(e=Hr[t.charCodeAt(l)]<<10|Hr[t.charCodeAt(l+1)]<<4|Hr[t.charCodeAt(l+2)]>>2,o[s++]=e>>8&255,o[s++]=e&255),o}function cT(t){return Sn[t>>18&63]+Sn[t>>12&63]+Sn[t>>6&63]+Sn[t&63]}function fT(t,e,r){for(var n,i=[],o=e;o<r;o+=3)n=(t[o]<<16&16711680)+(t[o+1]<<8&65280)+(t[o+2]&255),i.push(cT(n));return i.join("")}function hT(t){for(var e,r=t.length,n=r%3,i=[],o=16383,s=0,a=r-n;s<a;s+=o)i.push(fT(t,s,s+o>a?a:s+o));return n===1?(e=t[r-1],i.push(Sn[e>>2]+Sn[e<<4&63]+"==")):n===2&&(e=(t[r-2]<<8)+t[r-1],i.push(Sn[e>>10]+Sn[e>>4&63]+Sn[e<<2&63]+"=")),i.join("")}function m0(t,e){g0(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}function Yu(t){return t&&t.Math==Math&&t}function Kw(){return Yu(typeof globalThis=="object"&&globalThis)||Yu(typeof window=="object"&&window)||Yu(typeof self=="object"&&self)||Yu(typeof global=="object"&&global)||Function("return this")()}function gT(){var t=Kw();return typeof t.navigator=="object"&&t.navigator.product==="ReactNative"}function vT(t){return["[object ArrayBuffer]","[object SharedArrayBuffer]"].includes(Object.prototype.toString.call(t))}function v0(t){return Object.prototype.toString.call(t)==="[object Uint8Array]"}function wT(t){return Object.prototype.toString.call(t)==="[object RegExp]"}function _T(t){return qa(t)&&Object.prototype.toString.call(t)==="[object Date]"}function qa(t){return typeof t=="object"&&t!==null}function Xu(t,e){var r=!1;function n(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];return r||(console.warn(e),r=!0),t.apply(this,i)}return n}function Ku(t){if(ArrayBuffer.isView(t))return We.from(t.buffer,t.byteOffset,t.byteLength);if(vT(t))return We.from(t);throw new wt("Must use either Buffer or TypedArray")}function bT(t){return qa(t)&&t.$id!=null&&typeof t.$ref=="string"&&(t.$db==null||typeof t.$db=="string")}function $w(t){return!isNaN(parseInt(t,10))}function DT(t){var e=xe.fromNumber(1e9),r=xe.fromNumber(0);if(!t.parts[0]&&!t.parts[1]&&!t.parts[2]&&!t.parts[3])return{quotient:t,rem:r};for(var n=0;n<=3;n++)r=r.shiftLeft(32),r=r.add(new xe(t.parts[n],0)),t.parts[n]=r.div(e).low,r=r.modulo(e);return{quotient:t,rem:r}}function FT(t,e){if(!t&&!e)return{high:xe.fromNumber(0),low:xe.fromNumber(0)};var r=t.shiftRightUnsigned(32),n=new xe(t.getLowBits(),0),i=e.shiftRightUnsigned(32),o=new xe(e.getLowBits(),0),s=r.multiply(i),a=r.multiply(o),l=n.multiply(i),h=n.multiply(o);return s=s.add(a.shiftRightUnsigned(32)),a=new xe(a.getLowBits(),0).add(l).add(h.shiftRightUnsigned(32)),s=s.add(a.shiftRightUnsigned(32)),h=a.shiftLeft(32).add(new xe(h.getLowBits(),0)),{high:s,low:h}}function CT(t,e){var r=t.high>>>0,n=e.high>>>0;if(r<n)return!0;if(r===n){var i=t.low>>>0,o=e.low>>>0;if(i<o)return!0}return!1}function as(t,e){throw new wt('"'+t+'" is not a valid Decimal128 string - '+e)}function PT(t){return t.split("").sort().join("")}function jT(t){return qa(t)&&Reflect.has(t,"_bsontype")&&typeof t._bsontype=="string"}function s_(t,e){if(e===void 0&&(e={}),typeof t=="number"){if(e.relaxed||e.legacy)return t;if(Math.floor(t)===t){if(t>=n_&&t<=r_)return new tc(t);if(t>=o_&&t<=i_)return xe.fromNumber(t)}return new ec(t)}if(t==null||typeof t!="object")return t;if(t.$undefined)return null;for(var r=Object.keys(t).filter(function(m){return m.startsWith("$")&&t[m]!=null}),n=0;n<r.length;n++){var i=UT[r[n]];if(i)return i.fromExtendedJSON(t,e)}if(t.$date!=null){var o=t.$date,s=new Date;return e.legacy?typeof o=="number"?s.setTime(o):typeof o=="string"&&s.setTime(Date.parse(o)):typeof o=="string"?s.setTime(Date.parse(o)):xe.isLong(o)?s.setTime(o.toNumber()):typeof o=="number"&&e.relaxed&&s.setTime(o),s}if(t.$code!=null){var a=Object.assign({},t);return t.$scope&&(a.$scope=s_(t.$scope)),Qu.fromExtendedJSON(t)}if(bT(t)||t.$dbPointer){var l=t.$ref?t:t.$dbPointer;if(l instanceof Va)return l;var h=Object.keys(l).filter(function(m){return m.startsWith("$")}),g=!0;if(h.forEach(function(m){["$ref","$id","$db"].indexOf(m)===-1&&(g=!1)}),g)return Va.fromExtendedJSON(l)}return t}function BT(t,e){return t.map(function(r,n){e.seenObjects.push({propertyName:"index "+n,obj:null});try{return ci(r,e)}finally{e.seenObjects.pop()}})}function Hw(t){var e=t.toISOString();return t.getUTCMilliseconds()!==0?e:e.slice(0,-5)+"Z"}function ci(t,e){if((typeof t=="object"||typeof t=="function")&&t!==null){var r=e.seenObjects.findIndex(function(I){return I.obj===t});if(r!==-1){var n=e.seenObjects.map(function(I){return I.propertyName}),i=n.slice(0,r).map(function(I){return I+" -> "}).join(""),o=n[r],s=" -> "+n.slice(r+1,n.length-1).map(function(I){return I+" -> "}).join(""),a=n[n.length-1],l=" ".repeat(i.length+o.length/2),h="-".repeat(s.length+(o.length+a.length)/2-1);throw new wt(`Converting circular structure to EJSON:
`+("    "+i+o+s+a+`
`)+("    "+l+"\\"+h+"/"))}e.seenObjects[e.seenObjects.length-1].obj=t}if(Array.isArray(t))return BT(t,e);if(t===void 0)return null;if(t instanceof Date||_T(t)){var g=t.getTime(),m=g>-1&&g<2534023188e5;return e.legacy?e.relaxed&&m?{$date:t.getTime()}:{$date:Hw(t)}:e.relaxed&&m?{$date:Hw(t)}:{$date:{$numberLong:t.getTime().toString()}}}if(typeof t=="number"&&(!e.relaxed||!isFinite(t))){if(Math.floor(t)===t){var p=t>=n_&&t<=r_,w=t>=o_&&t<=i_;if(p)return{$numberInt:t.toString()};if(w)return{$numberLong:t.toString()}}return{$numberDouble:t.toString()}}if(t instanceof RegExp||wT(t)){var b=t.flags;if(b===void 0){var N=t.toString().match(/[gimuy]*$/);N&&(b=N[0])}var O=new Wa(t.source,b);return O.toExtendedJSON(e)}return t!=null&&typeof t=="object"?VT(t,e):t}function VT(t,e){if(t==null||typeof t!="object")throw new Yi("not an object instance");var r=t._bsontype;if(typeof r>"u"){var n={};for(var i in t){e.seenObjects.push({propertyName:i,obj:null});try{n[i]=ci(t[i],e)}finally{e.seenObjects.pop()}}return n}else if(jT(t)){var o=t;if(typeof o.toExtendedJSON!="function"){var s=zT[t._bsontype];if(!s)throw new wt("Unrecognized or invalid _bsontype: "+t._bsontype);o=s(o)}return r==="Code"&&o.scope?o=new Qu(o.code,ci(o.scope,e)):r==="DBRef"&&o.oid&&(o=new Va(ci(o.collection,e),ci(o.oid,e),ci(o.db,e),ci(o.fields,e))),o.toExtendedJSON(e)}else throw new Yi("_bsontype must be a string, but was: "+typeof r)}var nT,iT,oT,Sn,Hr,sT,u0,Ji,Lw,c0,dT,pT,ss,Zu,We,g0,Yi,wt,yT,mT,Zw,ST,Xw,y0,Pw,f0,h0,Qw,Ki,Qu,Va,$r,Mw,ET,us,e_,jw,Uw,Bw,xe,OT,xT,TT,za,d0,zw,kT,p0,Vw,Ww,NT,IT,qw,AT,RT,w0,ec,tc,_0,S0,LT,Gi,ls,gr,Wa,b0,MT,t_,r_,n_,i_,o_,UT,zT,fi,Jw,Gw,JI,GI,WT,qT,YI,KI,$T,ZI,E0=at(()=>{nT=aT,iT=uT,oT=hT,Sn=[],Hr=[],sT=typeof Uint8Array<"u"?Uint8Array:Array,u0="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(Ji=0,Lw=u0.length;Ji<Lw;++Ji)Sn[Ji]=u0[Ji],Hr[u0.charCodeAt(Ji)]=Ji;Hr["-".charCodeAt(0)]=62;Hr["_".charCodeAt(0)]=63;c0={byteLength:nT,toByteArray:iT,fromByteArray:oT};dT=function(e,r,n,i,o){var s,a,l=o*8-i-1,h=(1<<l)-1,g=h>>1,m=-7,p=n?o-1:0,w=n?-1:1,b=e[r+p];for(p+=w,s=b&(1<<-m)-1,b>>=-m,m+=l;m>0;s=s*256+e[r+p],p+=w,m-=8);for(a=s&(1<<-m)-1,s>>=-m,m+=i;m>0;a=a*256+e[r+p],p+=w,m-=8);if(s===0)s=1-g;else{if(s===h)return a?NaN:(b?-1:1)*(1/0);a=a+Math.pow(2,i),s=s-g}return(b?-1:1)*a*Math.pow(2,s-i)},pT=function(e,r,n,i,o,s){var a,l,h,g=s*8-o-1,m=(1<<g)-1,p=m>>1,w=o===23?Math.pow(2,-24)-Math.pow(2,-77):0,b=i?0:s-1,N=i?1:-1,O=r<0||r===0&&1/r<0?1:0;for(r=Math.abs(r),isNaN(r)||r===1/0?(l=isNaN(r)?1:0,a=m):(a=Math.floor(Math.log(r)/Math.LN2),r*(h=Math.pow(2,-a))<1&&(a--,h*=2),a+p>=1?r+=w/h:r+=w*Math.pow(2,1-p),r*h>=2&&(a++,h/=2),a+p>=m?(l=0,a=m):a+p>=1?(l=(r*h-1)*Math.pow(2,o),a=a+p):(l=r*Math.pow(2,p-1)*Math.pow(2,o),a=0));o>=8;e[n+b]=l&255,b+=N,l/=256,o-=8);for(a=a<<o|l,g+=o;g>0;e[n+b]=a&255,b+=N,a/=256,g-=8);e[n+b-N]|=O*128},ss={read:dT,write:pT},Zu=rT(function(t,e){var r=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=s,e.SlowBuffer=I,e.INSPECT_MAX_BYTES=50;var n=2147483647;e.kMaxLength=n,s.TYPED_ARRAY_SUPPORT=i(),!s.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function i(){try{var L=new Uint8Array(1),E={foo:function(){return 42}};return Object.setPrototypeOf(E,Uint8Array.prototype),Object.setPrototypeOf(L,E),L.foo()===42}catch{return!1}}Object.defineProperty(s.prototype,"parent",{enumerable:!0,get:function(){if(!!s.isBuffer(this))return this.buffer}}),Object.defineProperty(s.prototype,"offset",{enumerable:!0,get:function(){if(!!s.isBuffer(this))return this.byteOffset}});function o(L){if(L>n)throw new RangeError('The value "'+L+'" is invalid for option "size"');var E=new Uint8Array(L);return Object.setPrototypeOf(E,s.prototype),E}function s(L,E,k){if(typeof L=="number"){if(typeof E=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return g(L)}return a(L,E,k)}s.poolSize=8192;function a(L,E,k){if(typeof L=="string")return m(L,E);if(ArrayBuffer.isView(L))return w(L);if(L==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+babelHelpers.typeof(L));if(Z(L,ArrayBuffer)||L&&Z(L.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Z(L,SharedArrayBuffer)||L&&Z(L.buffer,SharedArrayBuffer)))return b(L,E,k);if(typeof L=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var U=L.valueOf&&L.valueOf();if(U!=null&&U!==L)return s.from(U,E,k);var ee=N(L);if(ee)return ee;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof L[Symbol.toPrimitive]=="function")return s.from(L[Symbol.toPrimitive]("string"),E,k);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+babelHelpers.typeof(L))}s.from=function(L,E,k){return a(L,E,k)},Object.setPrototypeOf(s.prototype,Uint8Array.prototype),Object.setPrototypeOf(s,Uint8Array);function l(L){if(typeof L!="number")throw new TypeError('"size" argument must be of type number');if(L<0)throw new RangeError('The value "'+L+'" is invalid for option "size"')}function h(L,E,k){return l(L),L<=0?o(L):E!==void 0?typeof k=="string"?o(L).fill(E,k):o(L).fill(E):o(L)}s.alloc=function(L,E,k){return h(L,E,k)};function g(L){return l(L),o(L<0?0:O(L)|0)}s.allocUnsafe=function(L){return g(L)},s.allocUnsafeSlow=function(L){return g(L)};function m(L,E){if((typeof E!="string"||E==="")&&(E="utf8"),!s.isEncoding(E))throw new TypeError("Unknown encoding: "+E);var k=D(L,E)|0,U=o(k),ee=U.write(L,E);return ee!==k&&(U=U.slice(0,ee)),U}function p(L){for(var E=L.length<0?0:O(L.length)|0,k=o(E),U=0;U<E;U+=1)k[U]=L[U]&255;return k}function w(L){if(Z(L,Uint8Array)){var E=new Uint8Array(L);return b(E.buffer,E.byteOffset,E.byteLength)}return p(L)}function b(L,E,k){if(E<0||L.byteLength<E)throw new RangeError('"offset" is outside of buffer bounds');if(L.byteLength<E+(k||0))throw new RangeError('"length" is outside of buffer bounds');var U;return E===void 0&&k===void 0?U=new Uint8Array(L):k===void 0?U=new Uint8Array(L,E):U=new Uint8Array(L,E,k),Object.setPrototypeOf(U,s.prototype),U}function N(L){if(s.isBuffer(L)){var E=O(L.length)|0,k=o(E);return k.length===0||L.copy(k,0,0,E),k}if(L.length!==void 0)return typeof L.length!="number"||K(L.length)?o(0):p(L);if(L.type==="Buffer"&&Array.isArray(L.data))return p(L.data)}function O(L){if(L>=n)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+n.toString(16)+" bytes");return L|0}function I(L){return+L!=L&&(L=0),s.alloc(+L)}s.isBuffer=function(E){return E!=null&&E._isBuffer===!0&&E!==s.prototype},s.compare=function(E,k){if(Z(E,Uint8Array)&&(E=s.from(E,E.offset,E.byteLength)),Z(k,Uint8Array)&&(k=s.from(k,k.offset,k.byteLength)),!s.isBuffer(E)||!s.isBuffer(k))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(E===k)return 0;for(var U=E.length,ee=k.length,he=0,de=Math.min(U,ee);he<de;++he)if(E[he]!==k[he]){U=E[he],ee=k[he];break}return U<ee?-1:ee<U?1:0},s.isEncoding=function(E){switch(String(E).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},s.concat=function(E,k){if(!Array.isArray(E))throw new TypeError('"list" argument must be an Array of Buffers');if(E.length===0)return s.alloc(0);var U;if(k===void 0)for(k=0,U=0;U<E.length;++U)k+=E[U].length;var ee=s.allocUnsafe(k),he=0;for(U=0;U<E.length;++U){var de=E[U];if(Z(de,Uint8Array))he+de.length>ee.length?s.from(de).copy(ee,he):Uint8Array.prototype.set.call(ee,de,he);else if(s.isBuffer(de))de.copy(ee,he);else throw new TypeError('"list" argument must be an Array of Buffers');he+=de.length}return ee};function D(L,E){if(s.isBuffer(L))return L.length;if(ArrayBuffer.isView(L)||Z(L,ArrayBuffer))return L.byteLength;if(typeof L!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+babelHelpers.typeof(L));var k=L.length,U=arguments.length>2&&arguments[2]===!0;if(!U&&k===0)return 0;for(var ee=!1;;)switch(E){case"ascii":case"latin1":case"binary":return k;case"utf8":case"utf-8":return Ie(L).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return k*2;case"hex":return k>>>1;case"base64":return j(L).length;default:if(ee)return U?-1:Ie(L).length;E=(""+E).toLowerCase(),ee=!0}}s.byteLength=D;function G(L,E,k){var U=!1;if((E===void 0||E<0)&&(E=0),E>this.length||((k===void 0||k>this.length)&&(k=this.length),k<=0)||(k>>>=0,E>>>=0,k<=E))return"";for(L||(L="utf8");;)switch(L){case"hex":return B(this,E,k);case"utf8":case"utf-8":return ae(this,E,k);case"ascii":return F(this,E,k);case"latin1":case"binary":return ie(this,E,k);case"base64":return ue(this,E,k);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return V(this,E,k);default:if(U)throw new TypeError("Unknown encoding: "+L);L=(L+"").toLowerCase(),U=!0}}s.prototype._isBuffer=!0;function q(L,E,k){var U=L[E];L[E]=L[k],L[k]=U}s.prototype.swap16=function(){var E=this.length;if(E%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var k=0;k<E;k+=2)q(this,k,k+1);return this},s.prototype.swap32=function(){var E=this.length;if(E%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var k=0;k<E;k+=4)q(this,k,k+3),q(this,k+1,k+2);return this},s.prototype.swap64=function(){var E=this.length;if(E%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var k=0;k<E;k+=8)q(this,k,k+7),q(this,k+1,k+6),q(this,k+2,k+5),q(this,k+3,k+4);return this},s.prototype.toString=function(){var E=this.length;return E===0?"":arguments.length===0?ae(this,0,E):G.apply(this,arguments)},s.prototype.toLocaleString=s.prototype.toString,s.prototype.equals=function(E){if(!s.isBuffer(E))throw new TypeError("Argument must be a Buffer");return this===E?!0:s.compare(this,E)===0},s.prototype.inspect=function(){var E="",k=e.INSPECT_MAX_BYTES;return E=this.toString("hex",0,k).replace(/(.{2})/g,"$1 ").trim(),this.length>k&&(E+=" ... "),"<Buffer "+E+">"},r&&(s.prototype[r]=s.prototype.inspect),s.prototype.compare=function(E,k,U,ee,he){if(Z(E,Uint8Array)&&(E=s.from(E,E.offset,E.byteLength)),!s.isBuffer(E))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+babelHelpers.typeof(E));if(k===void 0&&(k=0),U===void 0&&(U=E?E.length:0),ee===void 0&&(ee=0),he===void 0&&(he=this.length),k<0||U>E.length||ee<0||he>this.length)throw new RangeError("out of range index");if(ee>=he&&k>=U)return 0;if(ee>=he)return-1;if(k>=U)return 1;if(k>>>=0,U>>>=0,ee>>>=0,he>>>=0,this===E)return 0;for(var de=he-ee,Fe=U-k,Re=Math.min(de,Fe),Je=this.slice(ee,he),It=E.slice(k,U),et=0;et<Re;++et)if(Je[et]!==It[et]){de=Je[et],Fe=It[et];break}return de<Fe?-1:Fe<de?1:0};function J(L,E,k,U,ee){if(L.length===0)return-1;if(typeof k=="string"?(U=k,k=0):k>2147483647?k=2147483647:k<-2147483648&&(k=-2147483648),k=+k,K(k)&&(k=ee?0:L.length-1),k<0&&(k=L.length+k),k>=L.length){if(ee)return-1;k=L.length-1}else if(k<0)if(ee)k=0;else return-1;if(typeof E=="string"&&(E=s.from(E,U)),s.isBuffer(E))return E.length===0?-1:C(L,E,k,U,ee);if(typeof E=="number")return E=E&255,typeof Uint8Array.prototype.indexOf=="function"?ee?Uint8Array.prototype.indexOf.call(L,E,k):Uint8Array.prototype.lastIndexOf.call(L,E,k):C(L,[E],k,U,ee);throw new TypeError("val must be string, number or Buffer")}function C(L,E,k,U,ee){var he=1,de=L.length,Fe=E.length;if(U!==void 0&&(U=String(U).toLowerCase(),U==="ucs2"||U==="ucs-2"||U==="utf16le"||U==="utf-16le")){if(L.length<2||E.length<2)return-1;he=2,de/=2,Fe/=2,k/=2}function Re(Os,Si){return he===1?Os[Si]:Os.readUInt16BE(Si*he)}var Je;if(ee){var It=-1;for(Je=k;Je<de;Je++)if(Re(L,Je)===Re(E,It===-1?0:Je-It)){if(It===-1&&(It=Je),Je-It+1===Fe)return It*he}else It!==-1&&(Je-=Je-It),It=-1}else for(k+Fe>de&&(k=de-Fe),Je=k;Je>=0;Je--){for(var et=!0,go=0;go<Fe;go++)if(Re(L,Je+go)!==Re(E,go)){et=!1;break}if(et)return Je}return-1}s.prototype.includes=function(E,k,U){return this.indexOf(E,k,U)!==-1},s.prototype.indexOf=function(E,k,U){return J(this,E,k,U,!0)},s.prototype.lastIndexOf=function(E,k,U){return J(this,E,k,U,!1)};function z(L,E,k,U){k=Number(k)||0;var ee=L.length-k;U?(U=Number(U),U>ee&&(U=ee)):U=ee;var he=E.length;U>he/2&&(U=he/2);for(var de=0;de<U;++de){var Fe=parseInt(E.substr(de*2,2),16);if(K(Fe))return de;L[k+de]=Fe}return de}function S(L,E,k,U){return H(Ie(E,L.length-k),L,k,U)}function W(L,E,k,U){return H(T(E),L,k,U)}function te(L,E,k,U){return H(j(E),L,k,U)}function X(L,E,k,U){return H(R(E,L.length-k),L,k,U)}s.prototype.write=function(E,k,U,ee){if(k===void 0)ee="utf8",U=this.length,k=0;else if(U===void 0&&typeof k=="string")ee=k,U=this.length,k=0;else if(isFinite(k))k=k>>>0,isFinite(U)?(U=U>>>0,ee===void 0&&(ee="utf8")):(ee=U,U=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var he=this.length-k;if((U===void 0||U>he)&&(U=he),E.length>0&&(U<0||k<0)||k>this.length)throw new RangeError("Attempt to write outside buffer bounds");ee||(ee="utf8");for(var de=!1;;)switch(ee){case"hex":return z(this,E,k,U);case"utf8":case"utf-8":return S(this,E,k,U);case"ascii":case"latin1":case"binary":return W(this,E,k,U);case"base64":return te(this,E,k,U);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return X(this,E,k,U);default:if(de)throw new TypeError("Unknown encoding: "+ee);ee=(""+ee).toLowerCase(),de=!0}},s.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function ue(L,E,k){return E===0&&k===L.length?c0.fromByteArray(L):c0.fromByteArray(L.slice(E,k))}function ae(L,E,k){k=Math.min(L.length,k);for(var U=[],ee=E;ee<k;){var he=L[ee],de=null,Fe=he>239?4:he>223?3:he>191?2:1;if(ee+Fe<=k){var Re,Je,It,et;switch(Fe){case 1:he<128&&(de=he);break;case 2:Re=L[ee+1],(Re&192)===128&&(et=(he&31)<<6|Re&63,et>127&&(de=et));break;case 3:Re=L[ee+1],Je=L[ee+2],(Re&192)===128&&(Je&192)===128&&(et=(he&15)<<12|(Re&63)<<6|Je&63,et>2047&&(et<55296||et>57343)&&(de=et));break;case 4:Re=L[ee+1],Je=L[ee+2],It=L[ee+3],(Re&192)===128&&(Je&192)===128&&(It&192)===128&&(et=(he&15)<<18|(Re&63)<<12|(Je&63)<<6|It&63,et>65535&&et<1114112&&(de=et))}}de===null?(de=65533,Fe=1):de>65535&&(de-=65536,U.push(de>>>10&1023|55296),de=56320|de&1023),U.push(de),ee+=Fe}return M(U)}var ye=4096;function M(L){var E=L.length;if(E<=ye)return String.fromCharCode.apply(String,L);for(var k="",U=0;U<E;)k+=String.fromCharCode.apply(String,L.slice(U,U+=ye));return k}function F(L,E,k){var U="";k=Math.min(L.length,k);for(var ee=E;ee<k;++ee)U+=String.fromCharCode(L[ee]&127);return U}function ie(L,E,k){var U="";k=Math.min(L.length,k);for(var ee=E;ee<k;++ee)U+=String.fromCharCode(L[ee]);return U}function B(L,E,k){var U=L.length;(!E||E<0)&&(E=0),(!k||k<0||k>U)&&(k=U);for(var ee="",he=E;he<k;++he)ee+=Se[L[he]];return ee}function V(L,E,k){for(var U=L.slice(E,k),ee="",he=0;he<U.length-1;he+=2)ee+=String.fromCharCode(U[he]+U[he+1]*256);return ee}s.prototype.slice=function(E,k){var U=this.length;E=~~E,k=k===void 0?U:~~k,E<0?(E+=U,E<0&&(E=0)):E>U&&(E=U),k<0?(k+=U,k<0&&(k=0)):k>U&&(k=U),k<E&&(k=E);var ee=this.subarray(E,k);return Object.setPrototypeOf(ee,s.prototype),ee};function Y(L,E,k){if(L%1!==0||L<0)throw new RangeError("offset is not uint");if(L+E>k)throw new RangeError("Trying to access beyond buffer length")}s.prototype.readUintLE=s.prototype.readUIntLE=function(E,k,U){E=E>>>0,k=k>>>0,U||Y(E,k,this.length);for(var ee=this[E],he=1,de=0;++de<k&&(he*=256);)ee+=this[E+de]*he;return ee},s.prototype.readUintBE=s.prototype.readUIntBE=function(E,k,U){E=E>>>0,k=k>>>0,U||Y(E,k,this.length);for(var ee=this[E+--k],he=1;k>0&&(he*=256);)ee+=this[E+--k]*he;return ee},s.prototype.readUint8=s.prototype.readUInt8=function(E,k){return E=E>>>0,k||Y(E,1,this.length),this[E]},s.prototype.readUint16LE=s.prototype.readUInt16LE=function(E,k){return E=E>>>0,k||Y(E,2,this.length),this[E]|this[E+1]<<8},s.prototype.readUint16BE=s.prototype.readUInt16BE=function(E,k){return E=E>>>0,k||Y(E,2,this.length),this[E]<<8|this[E+1]},s.prototype.readUint32LE=s.prototype.readUInt32LE=function(E,k){return E=E>>>0,k||Y(E,4,this.length),(this[E]|this[E+1]<<8|this[E+2]<<16)+this[E+3]*16777216},s.prototype.readUint32BE=s.prototype.readUInt32BE=function(E,k){return E=E>>>0,k||Y(E,4,this.length),this[E]*16777216+(this[E+1]<<16|this[E+2]<<8|this[E+3])},s.prototype.readIntLE=function(E,k,U){E=E>>>0,k=k>>>0,U||Y(E,k,this.length);for(var ee=this[E],he=1,de=0;++de<k&&(he*=256);)ee+=this[E+de]*he;return he*=128,ee>=he&&(ee-=Math.pow(2,8*k)),ee},s.prototype.readIntBE=function(E,k,U){E=E>>>0,k=k>>>0,U||Y(E,k,this.length);for(var ee=k,he=1,de=this[E+--ee];ee>0&&(he*=256);)de+=this[E+--ee]*he;return he*=128,de>=he&&(de-=Math.pow(2,8*k)),de},s.prototype.readInt8=function(E,k){return E=E>>>0,k||Y(E,1,this.length),this[E]&128?(255-this[E]+1)*-1:this[E]},s.prototype.readInt16LE=function(E,k){E=E>>>0,k||Y(E,2,this.length);var U=this[E]|this[E+1]<<8;return U&32768?U|4294901760:U},s.prototype.readInt16BE=function(E,k){E=E>>>0,k||Y(E,2,this.length);var U=this[E+1]|this[E]<<8;return U&32768?U|4294901760:U},s.prototype.readInt32LE=function(E,k){return E=E>>>0,k||Y(E,4,this.length),this[E]|this[E+1]<<8|this[E+2]<<16|this[E+3]<<24},s.prototype.readInt32BE=function(E,k){return E=E>>>0,k||Y(E,4,this.length),this[E]<<24|this[E+1]<<16|this[E+2]<<8|this[E+3]},s.prototype.readFloatLE=function(E,k){return E=E>>>0,k||Y(E,4,this.length),ss.read(this,E,!0,23,4)},s.prototype.readFloatBE=function(E,k){return E=E>>>0,k||Y(E,4,this.length),ss.read(this,E,!1,23,4)},s.prototype.readDoubleLE=function(E,k){return E=E>>>0,k||Y(E,8,this.length),ss.read(this,E,!0,52,8)},s.prototype.readDoubleBE=function(E,k){return E=E>>>0,k||Y(E,8,this.length),ss.read(this,E,!1,52,8)};function ce(L,E,k,U,ee,he){if(!s.isBuffer(L))throw new TypeError('"buffer" argument must be a Buffer instance');if(E>ee||E<he)throw new RangeError('"value" argument is out of bounds');if(k+U>L.length)throw new RangeError("Index out of range")}s.prototype.writeUintLE=s.prototype.writeUIntLE=function(E,k,U,ee){if(E=+E,k=k>>>0,U=U>>>0,!ee){var he=Math.pow(2,8*U)-1;ce(this,E,k,U,he,0)}var de=1,Fe=0;for(this[k]=E&255;++Fe<U&&(de*=256);)this[k+Fe]=E/de&255;return k+U},s.prototype.writeUintBE=s.prototype.writeUIntBE=function(E,k,U,ee){if(E=+E,k=k>>>0,U=U>>>0,!ee){var he=Math.pow(2,8*U)-1;ce(this,E,k,U,he,0)}var de=U-1,Fe=1;for(this[k+de]=E&255;--de>=0&&(Fe*=256);)this[k+de]=E/Fe&255;return k+U},s.prototype.writeUint8=s.prototype.writeUInt8=function(E,k,U){return E=+E,k=k>>>0,U||ce(this,E,k,1,255,0),this[k]=E&255,k+1},s.prototype.writeUint16LE=s.prototype.writeUInt16LE=function(E,k,U){return E=+E,k=k>>>0,U||ce(this,E,k,2,65535,0),this[k]=E&255,this[k+1]=E>>>8,k+2},s.prototype.writeUint16BE=s.prototype.writeUInt16BE=function(E,k,U){return E=+E,k=k>>>0,U||ce(this,E,k,2,65535,0),this[k]=E>>>8,this[k+1]=E&255,k+2},s.prototype.writeUint32LE=s.prototype.writeUInt32LE=function(E,k,U){return E=+E,k=k>>>0,U||ce(this,E,k,4,4294967295,0),this[k+3]=E>>>24,this[k+2]=E>>>16,this[k+1]=E>>>8,this[k]=E&255,k+4},s.prototype.writeUint32BE=s.prototype.writeUInt32BE=function(E,k,U){return E=+E,k=k>>>0,U||ce(this,E,k,4,4294967295,0),this[k]=E>>>24,this[k+1]=E>>>16,this[k+2]=E>>>8,this[k+3]=E&255,k+4},s.prototype.writeIntLE=function(E,k,U,ee){if(E=+E,k=k>>>0,!ee){var he=Math.pow(2,8*U-1);ce(this,E,k,U,he-1,-he)}var de=0,Fe=1,Re=0;for(this[k]=E&255;++de<U&&(Fe*=256);)E<0&&Re===0&&this[k+de-1]!==0&&(Re=1),this[k+de]=(E/Fe>>0)-Re&255;return k+U},s.prototype.writeIntBE=function(E,k,U,ee){if(E=+E,k=k>>>0,!ee){var he=Math.pow(2,8*U-1);ce(this,E,k,U,he-1,-he)}var de=U-1,Fe=1,Re=0;for(this[k+de]=E&255;--de>=0&&(Fe*=256);)E<0&&Re===0&&this[k+de+1]!==0&&(Re=1),this[k+de]=(E/Fe>>0)-Re&255;return k+U},s.prototype.writeInt8=function(E,k,U){return E=+E,k=k>>>0,U||ce(this,E,k,1,127,-128),E<0&&(E=255+E+1),this[k]=E&255,k+1},s.prototype.writeInt16LE=function(E,k,U){return E=+E,k=k>>>0,U||ce(this,E,k,2,32767,-32768),this[k]=E&255,this[k+1]=E>>>8,k+2},s.prototype.writeInt16BE=function(E,k,U){return E=+E,k=k>>>0,U||ce(this,E,k,2,32767,-32768),this[k]=E>>>8,this[k+1]=E&255,k+2},s.prototype.writeInt32LE=function(E,k,U){return E=+E,k=k>>>0,U||ce(this,E,k,4,2147483647,-2147483648),this[k]=E&255,this[k+1]=E>>>8,this[k+2]=E>>>16,this[k+3]=E>>>24,k+4},s.prototype.writeInt32BE=function(E,k,U){return E=+E,k=k>>>0,U||ce(this,E,k,4,2147483647,-2147483648),E<0&&(E=4294967295+E+1),this[k]=E>>>24,this[k+1]=E>>>16,this[k+2]=E>>>8,this[k+3]=E&255,k+4};function oe(L,E,k,U,ee,he){if(k+U>L.length)throw new RangeError("Index out of range");if(k<0)throw new RangeError("Index out of range")}function ne(L,E,k,U,ee){return E=+E,k=k>>>0,ee||oe(L,E,k,4),ss.write(L,E,k,U,23,4),k+4}s.prototype.writeFloatLE=function(E,k,U){return ne(this,E,k,!0,U)},s.prototype.writeFloatBE=function(E,k,U){return ne(this,E,k,!1,U)};function se(L,E,k,U,ee){return E=+E,k=k>>>0,ee||oe(L,E,k,8),ss.write(L,E,k,U,52,8),k+8}s.prototype.writeDoubleLE=function(E,k,U){return se(this,E,k,!0,U)},s.prototype.writeDoubleBE=function(E,k,U){return se(this,E,k,!1,U)},s.prototype.copy=function(E,k,U,ee){if(!s.isBuffer(E))throw new TypeError("argument should be a Buffer");if(U||(U=0),!ee&&ee!==0&&(ee=this.length),k>=E.length&&(k=E.length),k||(k=0),ee>0&&ee<U&&(ee=U),ee===U||E.length===0||this.length===0)return 0;if(k<0)throw new RangeError("targetStart out of bounds");if(U<0||U>=this.length)throw new RangeError("Index out of range");if(ee<0)throw new RangeError("sourceEnd out of bounds");ee>this.length&&(ee=this.length),E.length-k<ee-U&&(ee=E.length-k+U);var he=ee-U;return this===E&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(k,U,ee):Uint8Array.prototype.set.call(E,this.subarray(U,ee),k),he},s.prototype.fill=function(E,k,U,ee){if(typeof E=="string"){if(typeof k=="string"?(ee=k,k=0,U=this.length):typeof U=="string"&&(ee=U,U=this.length),ee!==void 0&&typeof ee!="string")throw new TypeError("encoding must be a string");if(typeof ee=="string"&&!s.isEncoding(ee))throw new TypeError("Unknown encoding: "+ee);if(E.length===1){var he=E.charCodeAt(0);(ee==="utf8"&&he<128||ee==="latin1")&&(E=he)}}else typeof E=="number"?E=E&255:typeof E=="boolean"&&(E=Number(E));if(k<0||this.length<k||this.length<U)throw new RangeError("Out of range index");if(U<=k)return this;k=k>>>0,U=U===void 0?this.length:U>>>0,E||(E=0);var de;if(typeof E=="number")for(de=k;de<U;++de)this[de]=E;else{var Fe=s.isBuffer(E)?E:s.from(E,ee),Re=Fe.length;if(Re===0)throw new TypeError('The value "'+E+'" is invalid for argument "value"');for(de=0;de<U-k;++de)this[de+k]=Fe[de%Re]}return this};var ge=/[^+/0-9A-Za-z-_]/g;function be(L){if(L=L.split("=")[0],L=L.trim().replace(ge,""),L.length<2)return"";for(;L.length%4!==0;)L=L+"=";return L}function Ie(L,E){E=E||1/0;for(var k,U=L.length,ee=null,he=[],de=0;de<U;++de){if(k=L.charCodeAt(de),k>55295&&k<57344){if(!ee){if(k>56319){(E-=3)>-1&&he.push(239,191,189);continue}else if(de+1===U){(E-=3)>-1&&he.push(239,191,189);continue}ee=k;continue}if(k<56320){(E-=3)>-1&&he.push(239,191,189),ee=k;continue}k=(ee-55296<<10|k-56320)+65536}else ee&&(E-=3)>-1&&he.push(239,191,189);if(ee=null,k<128){if((E-=1)<0)break;he.push(k)}else if(k<2048){if((E-=2)<0)break;he.push(k>>6|192,k&63|128)}else if(k<65536){if((E-=3)<0)break;he.push(k>>12|224,k>>6&63|128,k&63|128)}else if(k<1114112){if((E-=4)<0)break;he.push(k>>18|240,k>>12&63|128,k>>6&63|128,k&63|128)}else throw new Error("Invalid code point")}return he}function T(L){for(var E=[],k=0;k<L.length;++k)E.push(L.charCodeAt(k)&255);return E}function R(L,E){for(var k,U,ee,he=[],de=0;de<L.length&&!((E-=2)<0);++de)k=L.charCodeAt(de),U=k>>8,ee=k%256,he.push(ee),he.push(U);return he}function j(L){return c0.toByteArray(be(L))}function H(L,E,k,U){for(var ee=0;ee<U&&!(ee+k>=E.length||ee>=L.length);++ee)E[ee+k]=L[ee];return ee}function Z(L,E){return L instanceof E||L!=null&&L.constructor!=null&&L.constructor.name!=null&&L.constructor.name===E.name}function K(L){return L!==L}var Se=function(){for(var L="0123456789abcdef",E=new Array(256),k=0;k<16;++k)for(var U=k*16,ee=0;ee<16;++ee)E[U+ee]=L[k]+L[ee];return E}()}),We=Zu.Buffer;Zu.SlowBuffer;Zu.INSPECT_MAX_BYTES;Zu.kMaxLength;g0=function(e,r){return g0=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},g0(e,r)};Yi=function(t){m0(e,t);function e(r){var n=t.call(this,r)||this;return Object.setPrototypeOf(n,e.prototype),n}return Object.defineProperty(e.prototype,"name",{get:function(){return"BSONError"},enumerable:!1,configurable:!0}),e}(Error),wt=function(t){m0(e,t);function e(r){var n=t.call(this,r)||this;return Object.setPrototypeOf(n,e.prototype),n}return Object.defineProperty(e.prototype,"name",{get:function(){return"BSONTypeError"},enumerable:!1,configurable:!0}),e}(TypeError);yT=function(e){var r=gT()?"BSON: For React Native please polyfill crypto.getRandomValues, e.g. using: https://www.npmjs.com/package/react-native-get-random-values.":"BSON: No cryptographic implementation for random bytes present, falling back to a less secure implementation.";console.warn(r);for(var n=We.alloc(e),i=0;i<e;++i)n[i]=Math.floor(Math.random()*256);return n},mT=function(){if(typeof window<"u"){var t=window.crypto||window.msCrypto;if(t&&t.getRandomValues)return function(r){return t.getRandomValues(We.alloc(r))}}if(typeof global<"u"&&global.crypto&&global.crypto.getRandomValues)return function(r){return global.crypto.getRandomValues(We.alloc(r))};var e;try{e=NO("crypto").randomBytes}catch{}return e||yT},Zw=mT();ST=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-4[0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|[0-9a-f]{12}4[0-9a-f]{3}[89ab][0-9a-f]{15})$/i,Xw=function(t){return typeof t=="string"&&ST.test(t)},y0=function(t){if(!Xw(t))throw new wt('UUID string representations must be a 32 or 36 character hex string (dashes excluded/included). Format: "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx" or "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx".');var e=t.replace(/-/g,"");return We.from(e,"hex")},Pw=function(t,e){return e===void 0&&(e=!0),e?t.toString("hex",0,4)+"-"+t.toString("hex",4,6)+"-"+t.toString("hex",6,8)+"-"+t.toString("hex",8,10)+"-"+t.toString("hex",10,16):t.toString("hex")},f0=16,h0=Symbol("id"),Qw=function(){function t(e){if(typeof e>"u")this.id=t.generate();else if(e instanceof t)this[h0]=We.from(e.id),this.__id=e.__id;else if(ArrayBuffer.isView(e)&&e.byteLength===f0)this.id=Ku(e);else if(typeof e=="string")this.id=y0(e);else throw new wt("Argument passed in UUID constructor must be a UUID, a 16 byte Buffer or a 32/36 character hex string (dashes excluded/included, format: xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx).")}return Object.defineProperty(t.prototype,"id",{get:function(){return this[h0]},set:function(e){this[h0]=e,t.cacheHexString&&(this.__id=Pw(e))},enumerable:!1,configurable:!0}),t.prototype.toHexString=function(e){if(e===void 0&&(e=!0),t.cacheHexString&&this.__id)return this.__id;var r=Pw(this.id,e);return t.cacheHexString&&(this.__id=r),r},t.prototype.toString=function(e){return e?this.id.toString(e):this.toHexString()},t.prototype.toJSON=function(){return this.toHexString()},t.prototype.equals=function(e){if(!e)return!1;if(e instanceof t)return e.id.equals(this.id);try{return new t(e).id.equals(this.id)}catch{return!1}},t.prototype.toBinary=function(){return new Ki(this.id,Ki.SUBTYPE_UUID)},t.generate=function(){var e=Zw(f0);return e[6]=e[6]&15|64,e[8]=e[8]&63|128,We.from(e)},t.isValid=function(e){if(!e)return!1;if(e instanceof t)return!0;if(typeof e=="string")return Xw(e);if(v0(e)){if(e.length!==f0)return!1;try{return parseInt(e[6].toString(16)[0],10)===Ki.SUBTYPE_UUID}catch{return!1}}return!1},t.createFromHexString=function(e){var r=y0(e);return new t(r)},t.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},t.prototype.inspect=function(){return'new UUID("'+this.toHexString()+'")'},t}();Object.defineProperty(Qw.prototype,"_bsontype",{value:"UUID"});Ki=function(){function t(e,r){if(!(this instanceof t))return new t(e,r);if(e!=null&&typeof e!="string"&&!ArrayBuffer.isView(e)&&!(e instanceof ArrayBuffer)&&!Array.isArray(e))throw new wt("Binary can only be constructed from string, Buffer, TypedArray, or Array<number>");this.sub_type=r??t.BSON_BINARY_SUBTYPE_DEFAULT,e==null?(this.buffer=We.alloc(t.BUFFER_SIZE),this.position=0):(typeof e=="string"?this.buffer=We.from(e,"binary"):Array.isArray(e)?this.buffer=We.from(e):this.buffer=Ku(e),this.position=this.buffer.byteLength)}return t.prototype.put=function(e){if(typeof e=="string"&&e.length!==1)throw new wt("only accepts single character String");if(typeof e!="number"&&e.length!==1)throw new wt("only accepts single character Uint8Array or Array");var r;if(typeof e=="string"?r=e.charCodeAt(0):typeof e=="number"?r=e:r=e[0],r<0||r>255)throw new wt("only accepts number in a valid unsigned byte range 0-255");if(this.buffer.length>this.position)this.buffer[this.position++]=r;else{var n=We.alloc(t.BUFFER_SIZE+this.buffer.length);this.buffer.copy(n,0,0,this.buffer.length),this.buffer=n,this.buffer[this.position++]=r}},t.prototype.write=function(e,r){if(r=typeof r=="number"?r:this.position,this.buffer.length<r+e.length){var n=We.alloc(this.buffer.length+e.length);this.buffer.copy(n,0,0,this.buffer.length),this.buffer=n}ArrayBuffer.isView(e)?(this.buffer.set(Ku(e),r),this.position=r+e.byteLength>this.position?r+e.length:this.position):typeof e=="string"&&(this.buffer.write(e,r,e.length,"binary"),this.position=r+e.length>this.position?r+e.length:this.position)},t.prototype.read=function(e,r){return r=r&&r>0?r:this.position,this.buffer.slice(e,e+r)},t.prototype.value=function(e){return e=!!e,e&&this.buffer.length===this.position?this.buffer:e?this.buffer.slice(0,this.position):this.buffer.toString("binary",0,this.position)},t.prototype.length=function(){return this.position},t.prototype.toJSON=function(){return this.buffer.toString("base64")},t.prototype.toString=function(e){return this.buffer.toString(e)},t.prototype.toExtendedJSON=function(e){e=e||{};var r=this.buffer.toString("base64"),n=Number(this.sub_type).toString(16);return e.legacy?{$binary:r,$type:n.length===1?"0"+n:n}:{$binary:{base64:r,subType:n.length===1?"0"+n:n}}},t.prototype.toUUID=function(){if(this.sub_type===t.SUBTYPE_UUID)return new Qw(this.buffer.slice(0,this.position));throw new Yi('Binary sub_type "'+this.sub_type+'" is not supported for converting to UUID. Only "'+t.SUBTYPE_UUID+'" is currently supported.')},t.fromExtendedJSON=function(e,r){r=r||{};var n,i;if("$binary"in e?r.legacy&&typeof e.$binary=="string"&&"$type"in e?(i=e.$type?parseInt(e.$type,16):0,n=We.from(e.$binary,"base64")):typeof e.$binary!="string"&&(i=e.$binary.subType?parseInt(e.$binary.subType,16):0,n=We.from(e.$binary.base64,"base64")):"$uuid"in e&&(i=4,n=y0(e.$uuid)),!n)throw new wt("Unexpected Binary Extended JSON format "+JSON.stringify(e));return new t(n,i)},t.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},t.prototype.inspect=function(){var e=this.value(!0);return'new Binary(Buffer.from("'+e.toString("hex")+'", "hex"), '+this.sub_type+")"},t.BSON_BINARY_SUBTYPE_DEFAULT=0,t.BUFFER_SIZE=256,t.SUBTYPE_DEFAULT=0,t.SUBTYPE_FUNCTION=1,t.SUBTYPE_BYTE_ARRAY=2,t.SUBTYPE_UUID_OLD=3,t.SUBTYPE_UUID=4,t.SUBTYPE_MD5=5,t.SUBTYPE_ENCRYPTED=6,t.SUBTYPE_COLUMN=7,t.SUBTYPE_USER_DEFINED=128,t}();Object.defineProperty(Ki.prototype,"_bsontype",{value:"Binary"});Qu=function(){function t(e,r){if(!(this instanceof t))return new t(e,r);this.code=e,this.scope=r}return t.prototype.toJSON=function(){return{code:this.code,scope:this.scope}},t.prototype.toExtendedJSON=function(){return this.scope?{$code:this.code,$scope:this.scope}:{$code:this.code}},t.fromExtendedJSON=function(e){return new t(e.$code,e.$scope)},t.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},t.prototype.inspect=function(){var e=this.toJSON();return'new Code("'+e.code+'"'+(e.scope?", "+JSON.stringify(e.scope):"")+")"},t}();Object.defineProperty(Qu.prototype,"_bsontype",{value:"Code"});Va=function(){function t(e,r,n,i){if(!(this instanceof t))return new t(e,r,n,i);var o=e.split(".");o.length===2&&(n=o.shift(),e=o.shift()),this.collection=e,this.oid=r,this.db=n,this.fields=i||{}}return Object.defineProperty(t.prototype,"namespace",{get:function(){return this.collection},set:function(e){this.collection=e},enumerable:!1,configurable:!0}),t.prototype.toJSON=function(){var e=Object.assign({$ref:this.collection,$id:this.oid},this.fields);return this.db!=null&&(e.$db=this.db),e},t.prototype.toExtendedJSON=function(e){e=e||{};var r={$ref:this.collection,$id:this.oid};return e.legacy||(this.db&&(r.$db=this.db),r=Object.assign(r,this.fields)),r},t.fromExtendedJSON=function(e){var r=Object.assign({},e);return delete r.$ref,delete r.$id,delete r.$db,new t(e.$ref,e.$id,e.$db,r)},t.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},t.prototype.inspect=function(){var e=this.oid===void 0||this.oid.toString===void 0?this.oid:this.oid.toString();return'new DBRef("'+this.namespace+'", new ObjectId("'+e+'")'+(this.db?', "'+this.db+'"':"")+")"},t}();Object.defineProperty(Va.prototype,"_bsontype",{value:"DBRef"});$r=void 0;try{$r=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}Mw=1<<16,ET=1<<24,us=Mw*Mw,e_=us*us,jw=e_/2,Uw={},Bw={},xe=function(){function t(e,r,n){if(e===void 0&&(e=0),!(this instanceof t))return new t(e,r,n);typeof e=="bigint"?Object.assign(this,t.fromBigInt(e,!!r)):typeof e=="string"?Object.assign(this,t.fromString(e,!!r)):(this.low=e|0,this.high=r|0,this.unsigned=!!n),Object.defineProperty(this,"__isLong__",{value:!0,configurable:!1,writable:!1,enumerable:!1})}return t.fromBits=function(e,r,n){return new t(e,r,n)},t.fromInt=function(e,r){var n,i,o;return r?(e>>>=0,(o=0<=e&&e<256)&&(i=Bw[e],i)?i:(n=t.fromBits(e,(e|0)<0?-1:0,!0),o&&(Bw[e]=n),n)):(e|=0,(o=-128<=e&&e<128)&&(i=Uw[e],i)?i:(n=t.fromBits(e,e<0?-1:0,!1),o&&(Uw[e]=n),n))},t.fromNumber=function(e,r){if(isNaN(e))return r?t.UZERO:t.ZERO;if(r){if(e<0)return t.UZERO;if(e>=e_)return t.MAX_UNSIGNED_VALUE}else{if(e<=-jw)return t.MIN_VALUE;if(e+1>=jw)return t.MAX_VALUE}return e<0?t.fromNumber(-e,r).neg():t.fromBits(e%us|0,e/us|0,r)},t.fromBigInt=function(e,r){return t.fromString(e.toString(),r)},t.fromString=function(e,r,n){if(e.length===0)throw Error("empty string");if(e==="NaN"||e==="Infinity"||e==="+Infinity"||e==="-Infinity")return t.ZERO;if(typeof r=="number"?(n=r,r=!1):r=!!r,n=n||10,n<2||36<n)throw RangeError("radix");var i;if((i=e.indexOf("-"))>0)throw Error("interior hyphen");if(i===0)return t.fromString(e.substring(1),r,n).neg();for(var o=t.fromNumber(Math.pow(n,8)),s=t.ZERO,a=0;a<e.length;a+=8){var l=Math.min(8,e.length-a),h=parseInt(e.substring(a,a+l),n);if(l<8){var g=t.fromNumber(Math.pow(n,l));s=s.mul(g).add(t.fromNumber(h))}else s=s.mul(o),s=s.add(t.fromNumber(h))}return s.unsigned=r,s},t.fromBytes=function(e,r,n){return n?t.fromBytesLE(e,r):t.fromBytesBE(e,r)},t.fromBytesLE=function(e,r){return new t(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,r)},t.fromBytesBE=function(e,r){return new t(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],r)},t.isLong=function(e){return qa(e)&&e.__isLong__===!0},t.fromValue=function(e,r){return typeof e=="number"?t.fromNumber(e,r):typeof e=="string"?t.fromString(e,r):t.fromBits(e.low,e.high,typeof r=="boolean"?r:e.unsigned)},t.prototype.add=function(e){t.isLong(e)||(e=t.fromValue(e));var r=this.high>>>16,n=this.high&65535,i=this.low>>>16,o=this.low&65535,s=e.high>>>16,a=e.high&65535,l=e.low>>>16,h=e.low&65535,g=0,m=0,p=0,w=0;return w+=o+h,p+=w>>>16,w&=65535,p+=i+l,m+=p>>>16,p&=65535,m+=n+a,g+=m>>>16,m&=65535,g+=r+s,g&=65535,t.fromBits(p<<16|w,g<<16|m,this.unsigned)},t.prototype.and=function(e){return t.isLong(e)||(e=t.fromValue(e)),t.fromBits(this.low&e.low,this.high&e.high,this.unsigned)},t.prototype.compare=function(e){if(t.isLong(e)||(e=t.fromValue(e)),this.eq(e))return 0;var r=this.isNegative(),n=e.isNegative();return r&&!n?-1:!r&&n?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},t.prototype.comp=function(e){return this.compare(e)},t.prototype.divide=function(e){if(t.isLong(e)||(e=t.fromValue(e)),e.isZero())throw Error("division by zero");if($r){if(!this.unsigned&&this.high===-2147483648&&e.low===-1&&e.high===-1)return this;var r=(this.unsigned?$r.div_u:$r.div_s)(this.low,this.high,e.low,e.high);return t.fromBits(r,$r.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?t.UZERO:t.ZERO;var n,i,o;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return t.UZERO;if(e.gt(this.shru(1)))return t.UONE;o=t.UZERO}else{if(this.eq(t.MIN_VALUE)){if(e.eq(t.ONE)||e.eq(t.NEG_ONE))return t.MIN_VALUE;if(e.eq(t.MIN_VALUE))return t.ONE;var s=this.shr(1);return n=s.div(e).shl(1),n.eq(t.ZERO)?e.isNegative()?t.ONE:t.NEG_ONE:(i=this.sub(e.mul(n)),o=n.add(i.div(e)),o)}else if(e.eq(t.MIN_VALUE))return this.unsigned?t.UZERO:t.ZERO;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();o=t.ZERO}for(i=this;i.gte(e);){n=Math.max(1,Math.floor(i.toNumber()/e.toNumber()));for(var a=Math.ceil(Math.log(n)/Math.LN2),l=a<=48?1:Math.pow(2,a-48),h=t.fromNumber(n),g=h.mul(e);g.isNegative()||g.gt(i);)n-=l,h=t.fromNumber(n,this.unsigned),g=h.mul(e);h.isZero()&&(h=t.ONE),o=o.add(h),i=i.sub(g)}return o},t.prototype.div=function(e){return this.divide(e)},t.prototype.equals=function(e){return t.isLong(e)||(e=t.fromValue(e)),this.unsigned!==e.unsigned&&this.high>>>31===1&&e.high>>>31===1?!1:this.high===e.high&&this.low===e.low},t.prototype.eq=function(e){return this.equals(e)},t.prototype.getHighBits=function(){return this.high},t.prototype.getHighBitsUnsigned=function(){return this.high>>>0},t.prototype.getLowBits=function(){return this.low},t.prototype.getLowBitsUnsigned=function(){return this.low>>>0},t.prototype.getNumBitsAbs=function(){if(this.isNegative())return this.eq(t.MIN_VALUE)?64:this.neg().getNumBitsAbs();var e=this.high!==0?this.high:this.low,r;for(r=31;r>0&&(e&1<<r)===0;r--);return this.high!==0?r+33:r+1},t.prototype.greaterThan=function(e){return this.comp(e)>0},t.prototype.gt=function(e){return this.greaterThan(e)},t.prototype.greaterThanOrEqual=function(e){return this.comp(e)>=0},t.prototype.gte=function(e){return this.greaterThanOrEqual(e)},t.prototype.ge=function(e){return this.greaterThanOrEqual(e)},t.prototype.isEven=function(){return(this.low&1)===0},t.prototype.isNegative=function(){return!this.unsigned&&this.high<0},t.prototype.isOdd=function(){return(this.low&1)===1},t.prototype.isPositive=function(){return this.unsigned||this.high>=0},t.prototype.isZero=function(){return this.high===0&&this.low===0},t.prototype.lessThan=function(e){return this.comp(e)<0},t.prototype.lt=function(e){return this.lessThan(e)},t.prototype.lessThanOrEqual=function(e){return this.comp(e)<=0},t.prototype.lte=function(e){return this.lessThanOrEqual(e)},t.prototype.modulo=function(e){if(t.isLong(e)||(e=t.fromValue(e)),$r){var r=(this.unsigned?$r.rem_u:$r.rem_s)(this.low,this.high,e.low,e.high);return t.fromBits(r,$r.get_high(),this.unsigned)}return this.sub(this.div(e).mul(e))},t.prototype.mod=function(e){return this.modulo(e)},t.prototype.rem=function(e){return this.modulo(e)},t.prototype.multiply=function(e){if(this.isZero())return t.ZERO;if(t.isLong(e)||(e=t.fromValue(e)),$r){var r=$r.mul(this.low,this.high,e.low,e.high);return t.fromBits(r,$r.get_high(),this.unsigned)}if(e.isZero())return t.ZERO;if(this.eq(t.MIN_VALUE))return e.isOdd()?t.MIN_VALUE:t.ZERO;if(e.eq(t.MIN_VALUE))return this.isOdd()?t.MIN_VALUE:t.ZERO;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(t.TWO_PWR_24)&&e.lt(t.TWO_PWR_24))return t.fromNumber(this.toNumber()*e.toNumber(),this.unsigned);var n=this.high>>>16,i=this.high&65535,o=this.low>>>16,s=this.low&65535,a=e.high>>>16,l=e.high&65535,h=e.low>>>16,g=e.low&65535,m=0,p=0,w=0,b=0;return b+=s*g,w+=b>>>16,b&=65535,w+=o*g,p+=w>>>16,w&=65535,w+=s*h,p+=w>>>16,w&=65535,p+=i*g,m+=p>>>16,p&=65535,p+=o*h,m+=p>>>16,p&=65535,p+=s*l,m+=p>>>16,p&=65535,m+=n*g+i*h+o*l+s*a,m&=65535,t.fromBits(w<<16|b,m<<16|p,this.unsigned)},t.prototype.mul=function(e){return this.multiply(e)},t.prototype.negate=function(){return!this.unsigned&&this.eq(t.MIN_VALUE)?t.MIN_VALUE:this.not().add(t.ONE)},t.prototype.neg=function(){return this.negate()},t.prototype.not=function(){return t.fromBits(~this.low,~this.high,this.unsigned)},t.prototype.notEquals=function(e){return!this.equals(e)},t.prototype.neq=function(e){return this.notEquals(e)},t.prototype.ne=function(e){return this.notEquals(e)},t.prototype.or=function(e){return t.isLong(e)||(e=t.fromValue(e)),t.fromBits(this.low|e.low,this.high|e.high,this.unsigned)},t.prototype.shiftLeft=function(e){return t.isLong(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?t.fromBits(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):t.fromBits(0,this.low<<e-32,this.unsigned)},t.prototype.shl=function(e){return this.shiftLeft(e)},t.prototype.shiftRight=function(e){return t.isLong(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?t.fromBits(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):t.fromBits(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},t.prototype.shr=function(e){return this.shiftRight(e)},t.prototype.shiftRightUnsigned=function(e){if(t.isLong(e)&&(e=e.toInt()),e&=63,e===0)return this;var r=this.high;if(e<32){var n=this.low;return t.fromBits(n>>>e|r<<32-e,r>>>e,this.unsigned)}else return e===32?t.fromBits(r,0,this.unsigned):t.fromBits(r>>>e-32,0,this.unsigned)},t.prototype.shr_u=function(e){return this.shiftRightUnsigned(e)},t.prototype.shru=function(e){return this.shiftRightUnsigned(e)},t.prototype.subtract=function(e){return t.isLong(e)||(e=t.fromValue(e)),this.add(e.neg())},t.prototype.sub=function(e){return this.subtract(e)},t.prototype.toInt=function(){return this.unsigned?this.low>>>0:this.low},t.prototype.toNumber=function(){return this.unsigned?(this.high>>>0)*us+(this.low>>>0):this.high*us+(this.low>>>0)},t.prototype.toBigInt=function(){return BigInt(this.toString())},t.prototype.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},t.prototype.toBytesLE=function(){var e=this.high,r=this.low;return[r&255,r>>>8&255,r>>>16&255,r>>>24,e&255,e>>>8&255,e>>>16&255,e>>>24]},t.prototype.toBytesBE=function(){var e=this.high,r=this.low;return[e>>>24,e>>>16&255,e>>>8&255,e&255,r>>>24,r>>>16&255,r>>>8&255,r&255]},t.prototype.toSigned=function(){return this.unsigned?t.fromBits(this.low,this.high,!1):this},t.prototype.toString=function(e){if(e=e||10,e<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(t.MIN_VALUE)){var r=t.fromNumber(e),n=this.div(r),i=n.mul(r).sub(this);return n.toString(e)+i.toInt().toString(e)}else return"-"+this.neg().toString(e);for(var o=t.fromNumber(Math.pow(e,6),this.unsigned),s=this,a="";;){var l=s.div(o),h=s.sub(l.mul(o)).toInt()>>>0,g=h.toString(e);if(s=l,s.isZero())return g+a;for(;g.length<6;)g="0"+g;a=""+g+a}},t.prototype.toUnsigned=function(){return this.unsigned?this:t.fromBits(this.low,this.high,!0)},t.prototype.xor=function(e){return t.isLong(e)||(e=t.fromValue(e)),t.fromBits(this.low^e.low,this.high^e.high,this.unsigned)},t.prototype.eqz=function(){return this.isZero()},t.prototype.le=function(e){return this.lessThanOrEqual(e)},t.prototype.toExtendedJSON=function(e){return e&&e.relaxed?this.toNumber():{$numberLong:this.toString()}},t.fromExtendedJSON=function(e,r){var n=t.fromString(e.$numberLong);return r&&r.relaxed?n.toNumber():n},t.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},t.prototype.inspect=function(){return'new Long("'+this.toString()+'"'+(this.unsigned?", true":"")+")"},t.TWO_PWR_24=t.fromInt(ET),t.MAX_UNSIGNED_VALUE=t.fromBits(-1,-1,!0),t.ZERO=t.fromInt(0),t.UZERO=t.fromInt(0,!0),t.ONE=t.fromInt(1),t.UONE=t.fromInt(1,!0),t.NEG_ONE=t.fromInt(-1),t.MAX_VALUE=t.fromBits(-1,2147483647,!1),t.MIN_VALUE=t.fromBits(0,-2147483648,!1),t}();Object.defineProperty(xe.prototype,"__isLong__",{value:!0});Object.defineProperty(xe.prototype,"_bsontype",{value:"Long"});OT=/^(\+|-)?(\d+|(\d*\.\d*))?(E|e)?([-+])?(\d+)?$/,xT=/^(\+|-)?(Infinity|inf)$/i,TT=/^(\+|-)?NaN$/i,za=6111,d0=-6176,zw=6176,kT=34,p0=[124,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].reverse(),Vw=[248,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].reverse(),Ww=[120,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].reverse(),NT=/^([-+])?(\d+)?$/,IT=31,qw=16383,AT=30,RT=31;w0=function(){function t(e){if(!(this instanceof t))return new t(e);if(typeof e=="string")this.bytes=t.fromString(e).bytes;else if(v0(e)){if(e.byteLength!==16)throw new wt("Decimal128 must take a Buffer of 16 bytes");this.bytes=e}else throw new wt("Decimal128 must take a Buffer or string")}return t.fromString=function(e){var r=!1,n=!1,i=!1,o=0,s=0,a=0,l=0,h=0,g=[0],m=0,p=0,w=0,b=0,N=0,O=0,I=new xe(0,0),D=new xe(0,0),G=0,q=0;if(e.length>=7e3)throw new wt(""+e+" not a valid Decimal128 string");var J=e.match(OT),C=e.match(xT),z=e.match(TT);if(!J&&!C&&!z||e.length===0)throw new wt(""+e+" not a valid Decimal128 string");if(J){var S=J[2],W=J[4],te=J[5],X=J[6];W&&X===void 0&&as(e,"missing exponent power"),W&&S===void 0&&as(e,"missing exponent base"),W===void 0&&(te||X)&&as(e,"missing e before exponent")}if((e[q]==="+"||e[q]==="-")&&(r=e[q++]==="-"),!$w(e[q])&&e[q]!=="."){if(e[q]==="i"||e[q]==="I")return new t(We.from(r?Vw:Ww));if(e[q]==="N")return new t(We.from(p0))}for(;$w(e[q])||e[q]===".";){if(e[q]==="."){n&&as(e,"contains multiple periods"),n=!0,q=q+1;continue}m<34&&(e[q]!=="0"||i)&&(i||(h=s),i=!0,g[p++]=parseInt(e[q],10),m=m+1),i&&(a=a+1),n&&(l=l+1),s=s+1,q=q+1}if(n&&!s)throw new wt(""+e+" not a valid Decimal128 string");if(e[q]==="e"||e[q]==="E"){var ue=e.substr(++q).match(NT);if(!ue||!ue[2])return new t(We.from(p0));N=parseInt(ue[0],10),q=q+ue[0].length}if(e[q])return new t(We.from(p0));if(w=0,!m)w=0,b=0,g[0]=0,a=1,m=1,o=0;else if(b=m-1,o=a,o!==1)for(;g[h+o-1]===0;)o=o-1;for(N<=l&&l-N>1<<14?N=d0:N=N-l;N>za;){if(b=b+1,b-w>kT){var ae=g.join("");if(ae.match(/^0+$/)){N=za;break}as(e,"overflow")}N=N-1}for(;N<d0||m<a;){if(b===0&&o<m){N=d0,o=0;break}if(m<a?a=a-1:b=b-1,N<za)N=N+1;else{var ae=g.join("");if(ae.match(/^0+$/)){N=za;break}as(e,"overflow")}}if(b-w+1<o){var ye=s;n&&(h=h+1,ye=ye+1),r&&(h=h+1,ye=ye+1);var M=parseInt(e[h+b+1],10),F=0;if(M>=5&&(F=1,M===5)){for(F=g[b]%2===1?1:0,O=h+b+2;O<ye;O++)if(parseInt(e[O],10)){F=1;break}}if(F){for(var ie=b;ie>=0;ie--)if(++g[ie]>9&&(g[ie]=0,ie===0))if(N<za)N=N+1,g[ie]=1;else return new t(We.from(r?Vw:Ww))}}if(I=xe.fromNumber(0),D=xe.fromNumber(0),o===0)I=xe.fromNumber(0),D=xe.fromNumber(0);else if(b-w<17){var ie=w;for(D=xe.fromNumber(g[ie++]),I=new xe(0,0);ie<=b;ie++)D=D.multiply(xe.fromNumber(10)),D=D.add(xe.fromNumber(g[ie]))}else{var ie=w;for(I=xe.fromNumber(g[ie++]);ie<=b-17;ie++)I=I.multiply(xe.fromNumber(10)),I=I.add(xe.fromNumber(g[ie]));for(D=xe.fromNumber(g[ie++]);ie<=b;ie++)D=D.multiply(xe.fromNumber(10)),D=D.add(xe.fromNumber(g[ie]))}var B=FT(I,xe.fromString("100000000000000000"));B.low=B.low.add(D),CT(B.low,D)&&(B.high=B.high.add(xe.fromNumber(1))),G=N+zw;var V={low:xe.fromNumber(0),high:xe.fromNumber(0)};B.high.shiftRightUnsigned(49).and(xe.fromNumber(1)).equals(xe.fromNumber(1))?(V.high=V.high.or(xe.fromNumber(3).shiftLeft(61)),V.high=V.high.or(xe.fromNumber(G).and(xe.fromNumber(16383).shiftLeft(47))),V.high=V.high.or(B.high.and(xe.fromNumber(140737488355327)))):(V.high=V.high.or(xe.fromNumber(G&16383).shiftLeft(49)),V.high=V.high.or(B.high.and(xe.fromNumber(562949953421311)))),V.low=B.low,r&&(V.high=V.high.or(xe.fromString("9223372036854775808")));var Y=We.alloc(16);return q=0,Y[q++]=V.low.low&255,Y[q++]=V.low.low>>8&255,Y[q++]=V.low.low>>16&255,Y[q++]=V.low.low>>24&255,Y[q++]=V.low.high&255,Y[q++]=V.low.high>>8&255,Y[q++]=V.low.high>>16&255,Y[q++]=V.low.high>>24&255,Y[q++]=V.high.low&255,Y[q++]=V.high.low>>8&255,Y[q++]=V.high.low>>16&255,Y[q++]=V.high.low>>24&255,Y[q++]=V.high.high&255,Y[q++]=V.high.high>>8&255,Y[q++]=V.high.high>>16&255,Y[q++]=V.high.high>>24&255,new t(Y)},t.prototype.toString=function(){for(var e,r=0,n=new Array(36),i=0;i<n.length;i++)n[i]=0;var o=0,s=!1,a,l={parts:[0,0,0,0]},h,g,m=[];o=0;var p=this.bytes,w=p[o++]|p[o++]<<8|p[o++]<<16|p[o++]<<24,b=p[o++]|p[o++]<<8|p[o++]<<16|p[o++]<<24,N=p[o++]|p[o++]<<8|p[o++]<<16|p[o++]<<24,O=p[o++]|p[o++]<<8|p[o++]<<16|p[o++]<<24;o=0;var I={low:new xe(w,b),high:new xe(N,O)};I.high.lessThan(xe.ZERO)&&m.push("-");var D=O>>26&IT;if(D>>3===3){if(D===AT)return m.join("")+"Infinity";if(D===RT)return"NaN";e=O>>15&qw,a=8+(O>>14&1)}else a=O>>14&7,e=O>>17&qw;var G=e-zw;if(l.parts[0]=(O&16383)+((a&15)<<14),l.parts[1]=N,l.parts[2]=b,l.parts[3]=w,l.parts[0]===0&&l.parts[1]===0&&l.parts[2]===0&&l.parts[3]===0)s=!0;else for(g=3;g>=0;g--){var q=0,J=DT(l);if(l=J.quotient,q=J.rem.low,!!q)for(h=8;h>=0;h--)n[g*9+h]=q%10,q=Math.floor(q/10)}if(s)r=1,n[o]=0;else for(r=36;!n[o];)r=r-1,o=o+1;var C=r-1+G;if(C>=34||C<=-7||G>0){if(r>34)return m.push(""+0),G>0?m.push("E+"+G):G<0&&m.push("E"+G),m.join("");m.push(""+n[o++]),r=r-1,r&&m.push(".");for(var i=0;i<r;i++)m.push(""+n[o++]);m.push("E"),C>0?m.push("+"+C):m.push(""+C)}else if(G>=0)for(var i=0;i<r;i++)m.push(""+n[o++]);else{var z=r+G;if(z>0)for(var i=0;i<z;i++)m.push(""+n[o++]);else m.push("0");for(m.push(".");z++<0;)m.push("0");for(var i=0;i<r-Math.max(z-1,0);i++)m.push(""+n[o++])}return m.join("")},t.prototype.toJSON=function(){return{$numberDecimal:this.toString()}},t.prototype.toExtendedJSON=function(){return{$numberDecimal:this.toString()}},t.fromExtendedJSON=function(e){return t.fromString(e.$numberDecimal)},t.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},t.prototype.inspect=function(){return'new Decimal128("'+this.toString()+'")'},t}();Object.defineProperty(w0.prototype,"_bsontype",{value:"Decimal128"});ec=function(){function t(e){if(!(this instanceof t))return new t(e);e instanceof Number&&(e=e.valueOf()),this.value=+e}return t.prototype.valueOf=function(){return this.value},t.prototype.toJSON=function(){return this.value},t.prototype.toString=function(e){return this.value.toString(e)},t.prototype.toExtendedJSON=function(e){if(e&&(e.legacy||e.relaxed&&isFinite(this.value)))return this.value;if(Object.is(Math.sign(this.value),-0))return{$numberDouble:"-"+this.value.toFixed(1)};var r;return Number.isInteger(this.value)?(r=this.value.toFixed(1),r.length>=13&&(r=this.value.toExponential(13).toUpperCase())):r=this.value.toString(),{$numberDouble:r}},t.fromExtendedJSON=function(e,r){var n=parseFloat(e.$numberDouble);return r&&r.relaxed?n:new t(n)},t.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},t.prototype.inspect=function(){var e=this.toExtendedJSON();return"new Double("+e.$numberDouble+")"},t}();Object.defineProperty(ec.prototype,"_bsontype",{value:"Double"});tc=function(){function t(e){if(!(this instanceof t))return new t(e);e instanceof Number&&(e=e.valueOf()),this.value=+e|0}return t.prototype.valueOf=function(){return this.value},t.prototype.toString=function(e){return this.value.toString(e)},t.prototype.toJSON=function(){return this.value},t.prototype.toExtendedJSON=function(e){return e&&(e.relaxed||e.legacy)?this.value:{$numberInt:this.value.toString()}},t.fromExtendedJSON=function(e,r){return r&&r.relaxed?parseInt(e.$numberInt,10):new t(e.$numberInt)},t.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},t.prototype.inspect=function(){return"new Int32("+this.valueOf()+")"},t}();Object.defineProperty(tc.prototype,"_bsontype",{value:"Int32"});_0=function(){function t(){if(!(this instanceof t))return new t}return t.prototype.toExtendedJSON=function(){return{$maxKey:1}},t.fromExtendedJSON=function(){return new t},t.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},t.prototype.inspect=function(){return"new MaxKey()"},t}();Object.defineProperty(_0.prototype,"_bsontype",{value:"MaxKey"});S0=function(){function t(){if(!(this instanceof t))return new t}return t.prototype.toExtendedJSON=function(){return{$minKey:1}},t.fromExtendedJSON=function(){return new t},t.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},t.prototype.inspect=function(){return"new MinKey()"},t}();Object.defineProperty(S0.prototype,"_bsontype",{value:"MinKey"});LT=new RegExp("^[0-9a-fA-F]{24}$"),Gi=null,ls=Symbol("id"),gr=function(){function t(e){if(!(this instanceof t))return new t(e);var r;if(typeof e=="object"&&e&&"id"in e){if(typeof e.id!="string"&&!ArrayBuffer.isView(e.id))throw new wt("Argument passed in must have an id that is of type string or Buffer");"toHexString"in e&&typeof e.toHexString=="function"?r=We.from(e.toHexString(),"hex"):r=e.id}else r=e;if(r==null||typeof r=="number")this[ls]=t.generate(typeof r=="number"?r:void 0);else if(ArrayBuffer.isView(r)&&r.byteLength===12)this[ls]=Ku(r);else if(typeof r=="string")if(r.length===12){var n=We.from(r);if(n.byteLength===12)this[ls]=n;else throw new wt("Argument passed in must be a string of 12 bytes")}else if(r.length===24&&LT.test(r))this[ls]=We.from(r,"hex");else throw new wt("Argument passed in must be a string of 12 bytes or a string of 24 hex characters");else throw new wt("Argument passed in does not match the accepted types");t.cacheHexString&&(this.__id=this.id.toString("hex"))}return Object.defineProperty(t.prototype,"id",{get:function(){return this[ls]},set:function(e){this[ls]=e,t.cacheHexString&&(this.__id=e.toString("hex"))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"generationTime",{get:function(){return this.id.readInt32BE(0)},set:function(e){this.id.writeUInt32BE(e,0)},enumerable:!1,configurable:!0}),t.prototype.toHexString=function(){if(t.cacheHexString&&this.__id)return this.__id;var e=this.id.toString("hex");return t.cacheHexString&&!this.__id&&(this.__id=e),e},t.getInc=function(){return t.index=(t.index+1)%16777215},t.generate=function(e){typeof e!="number"&&(e=Math.floor(Date.now()/1e3));var r=t.getInc(),n=We.alloc(12);return n.writeUInt32BE(e,0),Gi===null&&(Gi=Zw(5)),n[4]=Gi[0],n[5]=Gi[1],n[6]=Gi[2],n[7]=Gi[3],n[8]=Gi[4],n[11]=r&255,n[10]=r>>8&255,n[9]=r>>16&255,n},t.prototype.toString=function(e){return e?this.id.toString(e):this.toHexString()},t.prototype.toJSON=function(){return this.toHexString()},t.prototype.equals=function(e){return e==null?!1:e instanceof t?this.toString()===e.toString():typeof e=="string"&&t.isValid(e)&&e.length===12&&v0(this.id)?e===We.prototype.toString.call(this.id,"latin1"):typeof e=="string"&&t.isValid(e)&&e.length===24?e.toLowerCase()===this.toHexString():typeof e=="string"&&t.isValid(e)&&e.length===12?We.from(e).equals(this.id):typeof e=="object"&&"toHexString"in e&&typeof e.toHexString=="function"?e.toHexString()===this.toHexString():!1},t.prototype.getTimestamp=function(){var e=new Date,r=this.id.readUInt32BE(0);return e.setTime(Math.floor(r)*1e3),e},t.createPk=function(){return new t},t.createFromTime=function(e){var r=We.from([0,0,0,0,0,0,0,0,0,0,0,0]);return r.writeUInt32BE(e,0),new t(r)},t.createFromHexString=function(e){if(typeof e>"u"||e!=null&&e.length!==24)throw new wt("Argument passed in must be a single String of 12 bytes or a string of 24 hex characters");return new t(We.from(e,"hex"))},t.isValid=function(e){if(e==null)return!1;try{return new t(e),!0}catch{return!1}},t.prototype.toExtendedJSON=function(){return this.toHexString?{$oid:this.toHexString()}:{$oid:this.toString("hex")}},t.fromExtendedJSON=function(e){return new t(e.$oid)},t.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},t.prototype.inspect=function(){return'new ObjectId("'+this.toHexString()+'")'},t.index=Math.floor(Math.random()*16777215),t}();Object.defineProperty(gr.prototype,"generate",{value:Xu(function(t){return gr.generate(t)},"Please use the static `ObjectId.generate(time)` instead")});Object.defineProperty(gr.prototype,"getInc",{value:Xu(function(){return gr.getInc()},"Please use the static `ObjectId.getInc()` instead")});Object.defineProperty(gr.prototype,"get_inc",{value:Xu(function(){return gr.getInc()},"Please use the static `ObjectId.getInc()` instead")});Object.defineProperty(gr,"get_inc",{value:Xu(function(){return gr.getInc()},"Please use the static `ObjectId.getInc()` instead")});Object.defineProperty(gr.prototype,"_bsontype",{value:"ObjectID"});Wa=function(){function t(e,r){if(!(this instanceof t))return new t(e,r);if(this.pattern=e,this.options=PT(r??""),this.pattern.indexOf("\0")!==-1)throw new Yi("BSON Regex patterns cannot contain null bytes, found: "+JSON.stringify(this.pattern));if(this.options.indexOf("\0")!==-1)throw new Yi("BSON Regex options cannot contain null bytes, found: "+JSON.stringify(this.options));for(var n=0;n<this.options.length;n++)if(!(this.options[n]==="i"||this.options[n]==="m"||this.options[n]==="x"||this.options[n]==="l"||this.options[n]==="s"||this.options[n]==="u"))throw new Yi("The regular expression option ["+this.options[n]+"] is not supported")}return t.parseOptions=function(e){return e?e.split("").sort().join(""):""},t.prototype.toExtendedJSON=function(e){return e=e||{},e.legacy?{$regex:this.pattern,$options:this.options}:{$regularExpression:{pattern:this.pattern,options:this.options}}},t.fromExtendedJSON=function(e){if("$regex"in e)if(typeof e.$regex!="string"){if(e.$regex._bsontype==="BSONRegExp")return e}else return new t(e.$regex,t.parseOptions(e.$options));if("$regularExpression"in e)return new t(e.$regularExpression.pattern,t.parseOptions(e.$regularExpression.options));throw new wt("Unexpected BSONRegExp EJSON object form: "+JSON.stringify(e))},t}();Object.defineProperty(Wa.prototype,"_bsontype",{value:"BSONRegExp"});b0=function(){function t(e){if(!(this instanceof t))return new t(e);this.value=e}return t.prototype.valueOf=function(){return this.value},t.prototype.toString=function(){return this.value},t.prototype.inspect=function(){return'new BSONSymbol("'+this.value+'")'},t.prototype.toJSON=function(){return this.value},t.prototype.toExtendedJSON=function(){return{$symbol:this.value}},t.fromExtendedJSON=function(e){return new t(e.$symbol)},t.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},t}();Object.defineProperty(b0.prototype,"_bsontype",{value:"Symbol"});MT=xe,t_=function(t){m0(e,t);function e(r,n){var i=this;return i instanceof e?(xe.isLong(r)?i=t.call(this,r.low,r.high,!0)||this:qa(r)&&typeof r.t<"u"&&typeof r.i<"u"?i=t.call(this,r.i,r.t,!0)||this:i=t.call(this,r,n,!0)||this,Object.defineProperty(i,"_bsontype",{value:"Timestamp",writable:!1,configurable:!1,enumerable:!1}),i):new e(r,n)}return e.prototype.toJSON=function(){return{$timestamp:this.toString()}},e.fromInt=function(r){return new e(xe.fromInt(r,!0))},e.fromNumber=function(r){return new e(xe.fromNumber(r,!0))},e.fromBits=function(r,n){return new e(r,n)},e.fromString=function(r,n){return new e(xe.fromString(r,!0,n))},e.prototype.toExtendedJSON=function(){return{$timestamp:{t:this.high>>>0,i:this.low>>>0}}},e.fromExtendedJSON=function(r){return new e(r.$timestamp)},e.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},e.prototype.inspect=function(){return"new Timestamp({ t: "+this.getHighBits()+", i: "+this.getLowBits()+" })"},e.MAX_VALUE=xe.MAX_UNSIGNED_VALUE,e}(MT);r_=2147483647,n_=-2147483648,i_=9223372036854776e3,o_=-9223372036854776e3,UT={$oid:gr,$binary:Ki,$uuid:Ki,$symbol:b0,$numberInt:tc,$numberDecimal:w0,$numberDouble:ec,$numberLong:xe,$minKey:S0,$maxKey:_0,$regex:Wa,$regularExpression:Wa,$timestamp:t_};zT={Binary:function(t){return new Ki(t.value(),t.sub_type)},Code:function(t){return new Qu(t.code,t.scope)},DBRef:function(t){return new Va(t.collection||t.namespace,t.oid,t.db,t.fields)},Decimal128:function(t){return new w0(t.bytes)},Double:function(t){return new ec(t.value)},Int32:function(t){return new tc(t.value)},Long:function(t){return xe.fromBits(t.low!=null?t.low:t.low_,t.low!=null?t.high:t.high_,t.low!=null?t.unsigned:t.unsigned_)},MaxKey:function(){return new _0},MinKey:function(){return new S0},ObjectID:function(t){return new gr(t)},ObjectId:function(t){return new gr(t)},BSONRegExp:function(t){return new Wa(t.pattern,t.options)},Symbol:function(t){return new b0(t.value)},Timestamp:function(t){return t_.fromBits(t.low,t.high)}};(function(t){function e(o,s){var a=Object.assign({},{relaxed:!0,legacy:!1},s);return typeof a.relaxed=="boolean"&&(a.strict=!a.relaxed),typeof a.strict=="boolean"&&(a.relaxed=!a.strict),JSON.parse(o,function(l,h){if(l.indexOf("\0")!==-1)throw new Yi("BSON Document field names cannot contain null bytes, found: "+JSON.stringify(l));return s_(h,a)})}t.parse=e;function r(o,s,a,l){a!=null&&typeof a=="object"&&(l=a,a=0),s!=null&&typeof s=="object"&&!Array.isArray(s)&&(l=s,s=void 0,a=0);var h=Object.assign({relaxed:!0,legacy:!1},l,{seenObjects:[{propertyName:"(root)",obj:null}]}),g=ci(o,h);return JSON.stringify(g,s,a)}t.stringify=r;function n(o,s){return s=s||{},JSON.parse(r(o,s))}t.serialize=n;function i(o,s){return s=s||{},e(JSON.stringify(o),s)}t.deserialize=i})(fi||(fi={}));Gw=Kw();Gw.Map?Jw=Gw.Map:Jw=function(){function t(e){e===void 0&&(e=[]),this._keys=[],this._values={};for(var r=0;r<e.length;r++)if(e[r]!=null){var n=e[r],i=n[0],o=n[1];this._keys.push(i),this._values[i]={v:o,i:this._keys.length-1}}}return t.prototype.clear=function(){this._keys=[],this._values={}},t.prototype.delete=function(e){var r=this._values[e];return r==null?!1:(delete this._values[e],this._keys.splice(r.i,1),!0)},t.prototype.entries=function(){var e=this,r=0;return{next:function(){var n=e._keys[r++];return{value:n!==void 0?[n,e._values[n].v]:void 0,done:n===void 0}}}},t.prototype.forEach=function(e,r){r=r||this;for(var n=0;n<this._keys.length;n++){var i=this._keys[n];e.call(r,this._values[i].v,i,r)}},t.prototype.get=function(e){return this._values[e]?this._values[e].v:void 0},t.prototype.has=function(e){return this._values[e]!=null},t.prototype.keys=function(){var e=this,r=0;return{next:function(){var n=e._keys[r++];return{value:n!==void 0?n:void 0,done:n===void 0}}}},t.prototype.set=function(e,r){return this._values[e]?(this._values[e].v=r,this):(this._keys.push(e),this._values[e]={v:r,i:this._keys.length-1},this)},t.prototype.values=function(){var e=this,r=0;return{next:function(){var n=e._keys[r++];return{value:n!==void 0?e._values[n].v:void 0,done:n===void 0}}}},Object.defineProperty(t.prototype,"size",{get:function(){return this._keys.length},enumerable:!1,configurable:!0}),t}();JI=Math.pow(2,63)-1,GI=-Math.pow(2,63),WT=Math.pow(2,53),qT=-Math.pow(2,53),YI=xe.fromNumber(WT),KI=xe.fromNumber(qT),$T=1024*1024*17,ZI=We.alloc($T)});function t5(t){return t?c_(t):typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new ZT:typeof navigator<"u"?c_(navigator.userAgent):i5()}function r5(t){return t!==""&&e5.reduce(function(e,r){var n=r[0],i=r[1];if(e)return e;var o=i.exec(t);return!!o&&[n,o]},!1)}function c_(t){var e=r5(t);if(!e)return null;var r=e[0],n=e[1];if(r==="searchbot")return new KT;var i=n[1]&&n[1].split(".").join("_").split("_").slice(0,3);i?i.length<l_&&(i=a_(a_([],i,!0),o5(l_-i.length),!0)):i=[];var o=i.join("."),s=n5(t),a=QT.exec(t);return a&&a[1]?new YT(r,o,s,a[1]):new JT(r,o,s)}function n5(t){for(var e=0,r=u_.length;e<r;e++){var n=u_[e],i=n[0],o=n[1],s=o.exec(t);if(s)return i}return null}function i5(){var t=typeof process<"u"&&process.version;return t?new GT(process.version.slice(1)):null}function o5(t){for(var e=[],r=0;r<t;r++)e.push("0");return e}function L_(t){return fi.serialize(t,v5)}function P_(t){return Array.isArray(t)?t.map(e=>fi.deserialize(e)):fi.deserialize(t)}function R0(t){return Object.fromEntries(Object.entries(t).filter(e=>typeof e[1]<"u"))}function w5(t,e){let r="";for(let n=0;n<t;n++)r+=e[Math.floor(Math.random()*e.length)];return r}function U_(t,e=!0){let r=R0(t);return(e&&Object.keys(r).length>0?"?":"")+Object.entries(r).map(([i,o])=>`${i}=${encodeURIComponent(o)}`).join("&")}function _5(t){let e=t[0]==="?"?t.substr(1):t;return Object.fromEntries(e.split("&").filter(r=>r.length>0).map(r=>r.split("=")).map(([r,n])=>[r,decodeURIComponent(n)]))}function b5(t){for(let e of t)if(typeof e=="object"&&e)for(let[r,n]of Object.entries(e))n===void 0&&delete e[r];return t}function E5(t){return b5(t).map(r=>typeof r=="object"?L_(r):r)}function T5(){return{path:"/api/client/v2.0",app(t){return{path:this.path+`/app/${t}`,location(){return{path:this.path+"/location"}},authProvider(e){return{path:this.path+`/auth/providers/${e}`,login(){return{path:this.path+"/login"}}}},emailPasswordAuth(e){return{...this.authProvider(e),register(){return{path:this.path+"/register"}},confirm(){return{path:this.path+"/confirm"}},confirmSend(){return{path:this.path+"/confirm/send"}},confirmCall(){return{path:this.path+"/confirm/call"}},reset(){return{path:this.path+"/reset"}},resetSend(){return{path:this.path+"/reset/send"}},resetCall(){return{path:this.path+"/reset/call"}}}},functionsCall(){return{path:this.path+"/functions/call"}}}},auth(){return{path:this.path+"/auth",apiKeys(){return{path:this.path+"/api_keys",key(t){return{path:this.path+`/${t}`,enable(){return{path:this.path+"/enable"}},disable(){return{path:this.path+"/disable"}}}}}},profile(){return{path:this.path+"/profile"}},session(){return{path:this.path+"/session"}},delete(){return{path:this.path+"/delete"}}}}}}function k5(t){D0=t}function Ha(){if(D0)return D0;throw new Error("Cannot get environment before it's set")}function N5(t,e,r,n){return new q_(t,e,r,n)}function I5(t,e,r){return{collection:N5.bind(null,t,e,r)}}function A5(t,e="mongo-db"){return{db:I5.bind(null,t,e)}}function L5(t){if(typeof t!="object"||t===null)throw new Error("Expected a non-null object");if(Symbol.asyncIterator in t)return t;if("getReader"in t){let e=t;return{[Symbol.asyncIterator](){let r=e.getReader();return{next(){return r.read()},async return(){return await r.cancel(),{done:!0,value:null}}}}}}else throw new Error("Expected an AsyncIterable or a ReadableStream")}function U5(t){return typeof globalThis.open=="function"?globalThis.open(t):(console.log(`Please open ${t}`),null)}function K_(t=globalThis.location,e=Y_.defaultStorage){try{let r=t.hash.substr(1);hi.handleRedirect(r,e)}catch(r){console.warn(r)}}var a_,JT,GT,YT,KT,ZT,XT,QT,l_,e5,u_,rn,b_,s5,a5,l5,ds,f_,h_,u5,$a,rc,c5,Kt,d_,E_,O_,x_,C0,N0,nc,f5,h5,T_,p_,hs,g_,d5,p5,k_,N_,L0,I_,A_,g5,R_,I0,y5,D_,F_,C_,m5,oc,v5,A0,tn,y_,P0,Gr,M_,O0,x0,T0,k0,j_,S5,Ga,B_,O5,x5,Zi,z_,Jr,V_,D0,ic,ir,W_,q_,R5,Xi,m_,F0,Yt,v_,w_,$_,D5,F5,C5,hi,__,H_,Ja,Qi,P5,S_,J_,M5,bn,G_,cs,j5,Y_,Z_=at(()=>{E0();E0();a_=function(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,o;n<i;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))},JT=function(){function t(e,r,n){this.name=e,this.version=r,this.os=n,this.type="browser"}return t}(),GT=function(){function t(e){this.version=e,this.type="node",this.name="node",this.os=process.platform}return t}(),YT=function(){function t(e,r,n,i){this.name=e,this.version=r,this.os=n,this.bot=i,this.type="bot-device"}return t}(),KT=function(){function t(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return t}(),ZT=function(){function t(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return t}(),XT=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,QT=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,l_=3,e5=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",XT]],u_=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];rn=class{constructor(){if(!rn.fetch)throw new Error("DefaultNetworkTransport.fetch must be set before it's used");if(!rn.AbortController)throw new Error("DefaultNetworkTransport.AbortController must be set before it's used")}fetchWithCallbacks(e,r){this.fetch(e).then(async n=>{let i=await n.text(),o={};return n.headers.forEach((s,a)=>{o[a]=s}),{statusCode:n.status,headers:o,body:i}}).then(n=>r.onSuccess(n)).catch(n=>r.onError(n))}async fetch(e){let{timeoutMs:r,url:n,...i}=e,{signal:o,cancelTimeout:s}=this.createTimeoutSignal(r);try{return await rn.fetch(n,{...rn.extraFetchOptions,signal:o,...i})}finally{s()}}createTimeoutSignal(e){if(typeof e=="number"){let r=new rn.AbortController,n=setTimeout(()=>{r.abort()},e);return{signal:r.signal,cancelTimeout:()=>{clearTimeout(n)}}}else return{signal:void 0,cancelTimeout:()=>{}}}};rn.DEFAULT_HEADERS={"Content-Type":"application/json"};rn.fetch=globalThis.fetch.bind(globalThis);rn.AbortController=globalThis.AbortController;b_="3.7.2",s5=b_,a5=typeof atob=="function",l5=typeof btoa=="function",ds=typeof Buffer=="function",f_=typeof TextDecoder=="function"?new TextDecoder:void 0,h_=typeof TextEncoder=="function"?new TextEncoder:void 0,u5="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",$a=Array.prototype.slice.call(u5),rc=(t=>{let e={};return t.forEach((r,n)=>e[r]=n),e})($a),c5=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,Kt=String.fromCharCode.bind(String),d_=typeof Uint8Array.from=="function"?Uint8Array.from.bind(Uint8Array):(t,e=r=>r)=>new Uint8Array(Array.prototype.slice.call(t,0).map(e)),E_=t=>t.replace(/=/g,"").replace(/[+\/]/g,e=>e=="+"?"-":"_"),O_=t=>t.replace(/[^A-Za-z0-9\+\/]/g,""),x_=t=>{let e,r,n,i,o="",s=t.length%3;for(let a=0;a<t.length;){if((r=t.charCodeAt(a++))>255||(n=t.charCodeAt(a++))>255||(i=t.charCodeAt(a++))>255)throw new TypeError("invalid character found");e=r<<16|n<<8|i,o+=$a[e>>18&63]+$a[e>>12&63]+$a[e>>6&63]+$a[e&63]}return s?o.slice(0,s-3)+"===".substring(s):o},C0=l5?t=>btoa(t):ds?t=>Buffer.from(t,"binary").toString("base64"):x_,N0=ds?t=>Buffer.from(t).toString("base64"):t=>{let r=[];for(let n=0,i=t.length;n<i;n+=4096)r.push(Kt.apply(null,t.subarray(n,n+4096)));return C0(r.join(""))},nc=(t,e=!1)=>e?E_(N0(t)):N0(t),f5=t=>{if(t.length<2){var e=t.charCodeAt(0);return e<128?t:e<2048?Kt(192|e>>>6)+Kt(128|e&63):Kt(224|e>>>12&15)+Kt(128|e>>>6&63)+Kt(128|e&63)}else{var e=65536+(t.charCodeAt(0)-55296)*1024+(t.charCodeAt(1)-56320);return Kt(240|e>>>18&7)+Kt(128|e>>>12&63)+Kt(128|e>>>6&63)+Kt(128|e&63)}},h5=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,T_=t=>t.replace(h5,f5),p_=ds?t=>Buffer.from(t,"utf8").toString("base64"):h_?t=>N0(h_.encode(t)):t=>C0(T_(t)),hs=(t,e=!1)=>e?E_(p_(t)):p_(t),g_=t=>hs(t,!0),d5=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,p5=t=>{switch(t.length){case 4:var e=(7&t.charCodeAt(0))<<18|(63&t.charCodeAt(1))<<12|(63&t.charCodeAt(2))<<6|63&t.charCodeAt(3),r=e-65536;return Kt((r>>>10)+55296)+Kt((r&1023)+56320);case 3:return Kt((15&t.charCodeAt(0))<<12|(63&t.charCodeAt(1))<<6|63&t.charCodeAt(2));default:return Kt((31&t.charCodeAt(0))<<6|63&t.charCodeAt(1))}},k_=t=>t.replace(d5,p5),N_=t=>{if(t=t.replace(/\s+/g,""),!c5.test(t))throw new TypeError("malformed base64.");t+="==".slice(2-(t.length&3));let e,r="",n,i;for(let o=0;o<t.length;)e=rc[t.charAt(o++)]<<18|rc[t.charAt(o++)]<<12|(n=rc[t.charAt(o++)])<<6|(i=rc[t.charAt(o++)]),r+=n===64?Kt(e>>16&255):i===64?Kt(e>>16&255,e>>8&255):Kt(e>>16&255,e>>8&255,e&255);return r},L0=a5?t=>atob(O_(t)):ds?t=>Buffer.from(t,"base64").toString("binary"):N_,I_=ds?t=>d_(Buffer.from(t,"base64")):t=>d_(L0(t),e=>e.charCodeAt(0)),A_=t=>I_(R_(t)),g5=ds?t=>Buffer.from(t,"base64").toString("utf8"):f_?t=>f_.decode(I_(t)):t=>k_(L0(t)),R_=t=>O_(t.replace(/[-_]/g,e=>e=="-"?"+":"/")),I0=t=>g5(R_(t)),y5=t=>{if(typeof t!="string")return!1;let e=t.replace(/\s+/g,"").replace(/={0,2}$/,"");return!/[^\s0-9a-zA-Z\+/]/.test(e)||!/[^\s0-9a-zA-Z\-_]/.test(e)},D_=t=>({value:t,enumerable:!1,writable:!0,configurable:!0}),F_=function(){let t=(e,r)=>Object.defineProperty(String.prototype,e,D_(r));t("fromBase64",function(){return I0(this)}),t("toBase64",function(e){return hs(this,e)}),t("toBase64URI",function(){return hs(this,!0)}),t("toBase64URL",function(){return hs(this,!0)}),t("toUint8Array",function(){return A_(this)})},C_=function(){let t=(e,r)=>Object.defineProperty(Uint8Array.prototype,e,D_(r));t("toBase64",function(e){return nc(this,e)}),t("toBase64URI",function(){return nc(this,!0)}),t("toBase64URL",function(){return nc(this,!0)})},m5=()=>{F_(),C_()},oc={version:b_,VERSION:s5,atob:L0,atobPolyfill:N_,btoa:C0,btoaPolyfill:x_,fromBase64:I0,toBase64:hs,encode:hs,encodeURI:g_,encodeURL:g_,utob:T_,btou:k_,decode:I0,isValid:y5,fromUint8Array:nc,toUint8Array:A_,extendString:F_,extendUint8Array:C_,extendBuiltins:m5},v5={relaxed:!1};(function(t){t.Normal="normal",t.Server="server"})(A0||(A0={}));(function(t){t.NAME="name",t.EMAIL="email",t.PICTURE="picture",t.FIRST_NAME="first_name",t.LAST_NAME="last_name",t.GENDER="gender",t.BIRTHDAY="birthday",t.MIN_AGE="min_age",t.MAX_AGE="max_age"})(tn||(tn={}));y_={[tn.NAME]:"name",[tn.EMAIL]:"email",[tn.PICTURE]:"pictureUrl",[tn.FIRST_NAME]:"firstName",[tn.LAST_NAME]:"lastName",[tn.GENDER]:"gender",[tn.BIRTHDAY]:"birthday",[tn.MIN_AGE]:"minAge",[tn.MAX_AGE]:"maxAge"},P0=class{constructor(e){if(this.type=A0.Normal,this.identities=[],typeof e=="object"&&e!==null){let{type:r,identities:n,data:i}=e;if(typeof r=="string")this.type=r;else throw new Error("Expected 'type' in the response body");if(Array.isArray(n))this.identities=n.map(o=>{let{id:s,provider_type:a}=o;return{id:s,providerType:a}});else throw new Error("Expected 'identities' in the response body");if(typeof i=="object"&&i!==null){let o=Object.fromEntries(Object.entries(i).map(([s,a])=>s in y_?[y_[s],a]:[s,a]));this.data=P_(o)}else throw new Error("Expected 'data' in the response body")}else this.data={}}},Gr=class{constructor(e,r){this.storage=e,this.keyPart=r}get(e){return this.storage.get(this.keyPart+Gr.PART_SEPARATOR+e)}set(e,r){return this.storage.set(this.keyPart+Gr.PART_SEPARATOR+e,r)}remove(e){return this.storage.remove(this.keyPart+Gr.PART_SEPARATOR+e)}prefix(e){return new Gr(this,e)}clear(e=""){return this.storage.clear(this.keyPart+Gr.PART_SEPARATOR+e)}addListener(e){return this.storage.addListener(e)}removeListener(e){return this.storage.addListener(e)}};Gr.PART_SEPARATOR=":";M_=class{constructor(){this.storage={},this.listeners=new Set}get(e){return e in this.storage?this.storage[e]:null}set(e,r){this.storage[e]=r,this.fireListeners()}remove(e){delete this.storage[e],this.fireListeners()}prefix(e){return new Gr(this,e)}clear(e){for(let r of Object.keys(this.storage))(!e||r.startsWith(e))&&delete this.storage[r];this.fireListeners()}addListener(e){this.listeners.add(e)}removeListener(e){this.listeners.delete(e)}fireListeners(){this.listeners.forEach(e=>e())}},O0="accessToken",x0="refreshToken",T0="profile",k0="providerType",j_=class extends Gr{constructor(e,r){super(e,`user(${r})`)}get accessToken(){return this.get(O0)}set accessToken(e){e===null?this.remove(O0):this.set(O0,e)}get refreshToken(){return this.get(x0)}set refreshToken(e){e===null?this.remove(x0):this.set(x0,e)}get profile(){let e=this.get(T0);if(e){let r=new P0;return Object.assign(r,JSON.parse(e)),r}}set profile(e){e?this.set(T0,JSON.stringify(e)):this.remove(T0)}get providerType(){let e=this.get(k0);if(e)return e}set providerType(e){e?this.set(k0,e):this.remove(k0)}};S5=["inspect","callFunction","callFunctionStreaming",...Object.getOwnPropertyNames(Object.prototype)];Ga=class{constructor(e,r={}){this.fetcher=e,this.serviceName=r.serviceName,this.argsTransformation=r.argsTransformation||E5}static create(e,r={}){let n=new Ga(e,r);return new Proxy(n,{get(i,o,s){if(typeof o=="string"&&S5.indexOf(o)===-1)return i.callFunction.bind(i,o);{let a=Reflect.get(i,o,s);return typeof a=="function"?a.bind(i):a}}})}async callFunction(e,...r){let n={name:e,arguments:this.argsTransformation?this.argsTransformation(r):r};this.serviceName&&(n.service=this.serviceName);let i=this.fetcher.appRoute;return this.fetcher.fetchJSON({method:"POST",path:i.functionsCall().path,body:n})}callFunctionStreaming(e,...r){let n={name:e,arguments:this.argsTransformation?this.argsTransformation(r):r};this.serviceName&&(n.service=this.serviceName);let i=this.fetcher.appRoute,o=U_({baas_request:oc.encode(JSON.stringify(n))});return this.fetcher.fetchStream({method:"GET",path:i.functionsCall().path+o})}},B_=!1,O5=t=>{B_=t},x5=(t,e)=>{!B_||console.warn(`Deprecation warning from Realm: ${t} is deprecated and will be removed in a future major release. Consider switching to ${e}.`)},Zi=(t,e,r,n)=>{if(typeof t[0]!="object"){let i=n?", ...args":"";x5(`${e}(${r.join(", ")}${i})`,`${e}({ ${r.join(", ")} }${i})`);let o=r.reduce((a,l,h)=>({...a,[l]:t[h]}),{}),s=n?t.slice(r.length):void 0;return{argsObject:o,restArgs:s}}return{argsObject:t[0],restArgs:n?t.slice(1):void 0}};O5(typeof __DEV__<"u"&&__DEV__);z_=class{constructor(e,r="local-userpass"){this.fetcher=e,this.providerName=r}async registerUser(...e){let{argsObject:r}=Zi(e,"registerUser",["email","password"]),n=this.fetcher.appRoute;await this.fetcher.fetchJSON({method:"POST",path:n.emailPasswordAuth(this.providerName).register().path,body:r})}async confirmUser(...e){let{argsObject:r}=Zi(e,"confirmUser",["token","tokenId"]),n=this.fetcher.appRoute;await this.fetcher.fetchJSON({method:"POST",path:n.emailPasswordAuth(this.providerName).confirm().path,body:r})}async resendConfirmationEmail(...e){let{argsObject:r}=Zi(e,"resendConfirmationEmail",["email"]),n=this.fetcher.appRoute;await this.fetcher.fetchJSON({method:"POST",path:n.emailPasswordAuth(this.providerName).confirmSend().path,body:r})}async retryCustomConfirmation(...e){let{argsObject:r}=Zi(e,"retryCustomConfirmation",["email"]),n=this.fetcher.appRoute;await this.fetcher.fetchJSON({method:"POST",path:n.emailPasswordAuth(this.providerName).confirmCall().path,body:r})}async resetPassword(...e){let{argsObject:r}=Zi(e,"resetPassword",["token","tokenId","password"]),n=this.fetcher.appRoute;await this.fetcher.fetchJSON({method:"POST",path:n.emailPasswordAuth(this.providerName).reset().path,body:r})}async sendResetPasswordEmail(...e){let{argsObject:r}=Zi(e,"sendResetPasswordEmail",["email"]),n=this.fetcher.appRoute;await this.fetcher.fetchJSON({method:"POST",path:n.emailPasswordAuth(this.providerName).resetSend().path,body:r})}async callResetPasswordFunction(...e){let{argsObject:r,restArgs:n}=Zi(e,"callResetPasswordFunction",["email","password"],!0),i=this.fetcher.appRoute;await this.fetcher.fetchJSON({method:"POST",path:i.emailPasswordAuth(this.providerName).resetCall().path,body:{...r,arguments:n}})}};Jr={api:T5},V_=class{constructor(e){this.fetcher=e}create(e){return this.fetcher.fetchJSON({method:"POST",body:{name:e},path:Jr.api().auth().apiKeys().path,tokenType:"refresh"})}fetch(e){return this.fetcher.fetchJSON({method:"GET",path:Jr.api().auth().apiKeys().key(e).path,tokenType:"refresh"})}fetchAll(){return this.fetcher.fetchJSON({method:"GET",tokenType:"refresh",path:Jr.api().auth().apiKeys().path})}async delete(e){await this.fetcher.fetchJSON({method:"DELETE",path:Jr.api().auth().apiKeys().key(e).path,tokenType:"refresh"})}async enable(e){await this.fetcher.fetchJSON({method:"PUT",path:Jr.api().auth().apiKeys().key(e).enable().path,tokenType:"refresh"})}async disable(e){await this.fetcher.fetchJSON({method:"PUT",path:Jr.api().auth().apiKeys().key(e).disable().path,tokenType:"refresh"})}},D0=null;ic=class extends Error{constructor({message:e,code:r}){super(e);this.name="WatchError",this.code=r}};(function(t){t.NEED_DATA="NEED_DATA",t.HAVE_EVENT="HAVE_EVENT",t.HAVE_ERROR="HAVE_ERROR"})(ir||(ir={}));W_=class{constructor(){this._state=ir.NEED_DATA,this._error=null,this._textDecoder=new(Ha()).TextDecoder,this._buffer="",this._bufferOffset=0,this._eventType="",this._dataBuffer=""}feedBuffer(e){this.assertState(ir.NEED_DATA),this._buffer+=this._textDecoder.decode(e,{stream:!0}),this.advanceBufferState()}feedLine(e){if(this.assertState(ir.NEED_DATA),e.endsWith(`
`)&&(e=e.substr(0,e.length-1)),e.endsWith("\r")&&(e=e.substr(0,e.length-1)),e.length===0){if(this._dataBuffer.length===0){this._eventType="";return}this._dataBuffer.endsWith(`
`)&&(this._dataBuffer=this._dataBuffer.substr(0,this._dataBuffer.length-1)),this.feedSse({data:this._dataBuffer,eventType:this._eventType}),this._dataBuffer="",this._eventType=""}if(e[0]===":")return;let r=e.indexOf(":"),n=e.substr(0,r),i=r===-1?"":e.substr(r+1);i.startsWith(" ")&&(i=i.substr(1)),n==="event"?this._eventType=i:n==="data"&&(this._dataBuffer+=i,this._dataBuffer+=`
`)}feedSse(e){this.assertState(ir.NEED_DATA);let r=e.data.indexOf("%");if(r!==-1){let n="",i=0;for(let o=r;o!==-1;o=e.data.indexOf("%",i)){n+=e.data.substr(i,o-i);let s=e.data.substr(o,3);s==="%25"?n+="%":s==="%0A"?n+=`
`:s==="%0D"?n+="\r":n+=s,i=o+s.length}n+=e.data.substr(i),e.data=n}if(!e.eventType||e.eventType==="message"){try{let n=fi.parse(e.data);if(typeof n=="object"){this._nextEvent=n,this._state=ir.HAVE_EVENT;return}}catch{}this._state=ir.HAVE_ERROR,this._error=new ic({message:"server returned malformed event: "+e.data,code:"bad bson parse"})}else if(e.eventType==="error"){this._state=ir.HAVE_ERROR,this._error=new ic({message:e.data,code:"unknown"});try{let{error_code:n,error:i}=fi.parse(e.data);if(typeof n!="string"||typeof i!="string")return;this._error=new ic({message:i,code:n})}catch{return}}}get state(){return this._state}nextEvent(){this.assertState(ir.HAVE_EVENT);let e=this._nextEvent;return this._state=ir.NEED_DATA,this.advanceBufferState(),e}get error(){return this._error}advanceBufferState(){for(this.assertState(ir.NEED_DATA);this.state===ir.NEED_DATA;){if(this._bufferOffset===this._buffer.length){this._buffer="",this._bufferOffset=0;return}let e=this._buffer.indexOf(`
`,this._bufferOffset);if(e===-1){this._bufferOffset!==0&&(this._buffer=this._buffer.substr(this._bufferOffset,this._buffer.length-this._bufferOffset),this._bufferOffset=0);return}this.feedLine(this._buffer.substr(this._bufferOffset,e-this._bufferOffset)),this._bufferOffset=e+1}}assertState(e){if(this._state!==e)throw Error(`Expected WatchStream to be in state ${e}, but in state ${this._state}`)}},q_=class{constructor(e,r,n,i){this.functions=Ga.create(e,{serviceName:r}),this.databaseName=n,this.collectionName=i,this.serviceName=r,this.fetcher=e}find(e={},r={}){return this.functions.find({database:this.databaseName,collection:this.collectionName,query:e,project:r.projection,sort:r.sort,limit:r.limit})}findOne(e={},r={}){return this.functions.findOne({database:this.databaseName,collection:this.collectionName,query:e,project:r.projection,sort:r.sort})}findOneAndUpdate(e={},r,n={}){return this.functions.findOneAndUpdate({database:this.databaseName,collection:this.collectionName,filter:e,update:r,sort:n.sort,projection:n.projection,upsert:n.upsert,returnNewDocument:n.returnNewDocument})}findOneAndReplace(e={},r,n={}){return this.functions.findOneAndReplace({database:this.databaseName,collection:this.collectionName,filter:e,update:r,sort:n.sort,projection:n.projection,upsert:n.upsert,returnNewDocument:n.returnNewDocument})}findOneAndDelete(e={},r={}){return this.functions.findOneAndReplace({database:this.databaseName,collection:this.collectionName,filter:e,sort:r.sort,projection:r.projection})}aggregate(e){return this.functions.aggregate({database:this.databaseName,collection:this.collectionName,pipeline:e})}count(e={},r={}){return this.functions.count({database:this.databaseName,collection:this.collectionName,query:e,limit:r.limit})}insertOne(e){return this.functions.insertOne({database:this.databaseName,collection:this.collectionName,document:e})}insertMany(e){return this.functions.insertMany({database:this.databaseName,collection:this.collectionName,documents:e})}deleteOne(e={}){return this.functions.deleteOne({database:this.databaseName,collection:this.collectionName,query:e})}deleteMany(e={}){return this.functions.deleteMany({database:this.databaseName,collection:this.collectionName,query:e})}updateOne(e,r,n={}){return this.functions.updateOne({database:this.databaseName,collection:this.collectionName,query:e,update:r,upsert:n.upsert,arrayFilters:n.arrayFilters})}updateMany(e,r,n={}){return this.functions.updateMany({database:this.databaseName,collection:this.collectionName,query:e,update:r,upsert:n.upsert,arrayFilters:n.arrayFilters})}async*watch({ids:e,filter:r}={}){let n=await this.functions.callFunctionStreaming("watch",{database:this.databaseName,collection:this.collectionName,ids:e,filter:r}),i=new W_;for await(let o of n)if(!!o){for(i.feedBuffer(o);i.state==ir.HAVE_EVENT;)yield i.nextEvent();if(i.state==ir.HAVE_ERROR)throw i.error}}};R5="000000000000000000000000";(function(t){t.Active="active",t.LoggedOut="logged-out",t.Removed="removed"})(Xi||(Xi={}));(function(t){t.Normal="normal",t.Server="server"})(m_||(m_={}));F0=class{constructor(e){if(this.app=e.app,this.id=e.id,this.storage=new j_(this.app.storage,this.id),"accessToken"in e&&"refreshToken"in e&&"providerType"in e)this._accessToken=e.accessToken,this._refreshToken=e.refreshToken,this.providerType=e.providerType,this.storage.accessToken=e.accessToken,this.storage.refreshToken=e.refreshToken,this.storage.providerType=e.providerType;else{this._accessToken=this.storage.accessToken,this._refreshToken=this.storage.refreshToken;let r=this.storage.providerType;if(this._profile=this.storage.profile,r)this.providerType=r;else throw new Error("Storage is missing a provider type")}this.fetcher=this.app.fetcher.clone({userContext:{currentUser:this}}),this.apiKeys=new V_(this.fetcher),this.functions=Ga.create(this.fetcher)}get accessToken(){return this._accessToken}set accessToken(e){this._accessToken=e,this.storage.accessToken=e}get refreshToken(){return this._refreshToken}set refreshToken(e){this._refreshToken=e,this.storage.refreshToken=e}get state(){return this.id in this.app.allUsers?this.refreshToken===null?Xi.LoggedOut:Xi.Active:Xi.Removed}get isLoggedIn(){return this.state===Xi.Active}get customData(){if(this.accessToken)return this.decodeAccessToken().userData;throw new Error("Cannot read custom data without an access token")}get profile(){if(this._profile)return this._profile.data;throw new Error("A profile was never fetched for this user")}get identities(){if(this._profile)return this._profile.identities;throw new Error("A profile was never fetched for this user")}get deviceId(){if(this.accessToken){let e=this.accessToken.split(".")[1];if(e){let n=JSON.parse(oc.decode(e)).baas_device_id;if(typeof n=="string"&&n!==R5)return n}}return null}async refreshProfile(){let e=await this.fetcher.fetchJSON({method:"GET",path:Jr.api().auth().profile().path});this._profile=new P0(e),this.storage.profile=this._profile}async logOut(){try{this._refreshToken!==null&&await this.fetcher.fetchJSON({method:"DELETE",path:Jr.api().auth().session().path,tokenType:"refresh"})}catch(e){if(!(e instanceof Error)||!e.message.includes("failed to find refresh token"))throw e}finally{this.accessToken=null,this.refreshToken=null}}async linkCredentials(e){let r=await this.app.authenticator.authenticate(e,this);if(this.id!==r.userId){let n=`got user id ${r.userId} expected ${this.id}`;throw new Error(`Link response ment for another user (${n})`)}this.accessToken=r.accessToken,await this.refreshProfile()}async refreshAccessToken(){let e=await this.fetcher.fetchJSON({method:"POST",path:Jr.api().auth().session().path,tokenType:"refresh"}),{access_token:r}=e;if(typeof r=="string")this.accessToken=r;else throw new Error("Expected an 'access_token' in the response")}async refreshCustomData(){return await this.refreshAccessToken(),this.customData}callFunction(e,...r){return this.functions.callFunction(e,...r)}toJSON(){return{id:this.id,accessToken:this.accessToken,refreshToken:this.refreshToken,profile:this._profile,state:this.state,customData:this.customData}}push(){throw new Error("Not yet implemented")}mongoClient(e){return A5(this.fetcher,e)}decodeAccessToken(){if(this.accessToken){let e=this.accessToken.split(".");if(e.length!==3)throw new Error("Expected an access token with three parts");let r=e[1],n=oc.decode(r),i=JSON.parse(n),{exp:o,iat:s,sub:a,user_data:l={}}=i;if(typeof o!="number")throw new Error("Failed to decode access token 'exp'");if(typeof s!="number")throw new Error("Failed to decode access token 'iat'");return{expires:o,issuedAt:s,subject:a,userData:l}}else throw new Error("Missing an access token")}},Yt=class{constructor(e,r,n){this.providerName=e,this.providerType=r,this.payload=n}static anonymous(){return new Yt("anon-user","anon-user",{})}static userApiKey(e){return new Yt("api-key","api-key",{key:e})}static serverApiKey(e){return new Yt("api-key","api-key",{key:e})}static apiKey(e){return new Yt("api-key","api-key",{key:e})}static emailPassword(e,r){return new Yt("local-userpass","local-userpass",{username:e,password:r})}static function(e){return new Yt("custom-function","custom-function",e)}static jwt(e){return new Yt("custom-token","custom-token",{token:e})}static google(e){return new Yt("oauth2-google","oauth2-google",Yt.derivePayload(e))}static derivePayload(e){if(typeof e=="string"){if(e.includes("://"))return this.derivePayload({redirectUrl:e});if(e.startsWith("4/"))return this.derivePayload({authCode:e});if(e.startsWith("ey"))return this.derivePayload({idToken:e});throw new Error(`Unexpected payload: ${e}`)}else if(Object.keys(e).length===1){if("authCode"in e||"redirectUrl"in e)return e;if("idToken"in e)return{id_token:e.idToken};throw new Error("Unexpected payload: "+JSON.stringify(e))}else throw new Error("Expected only one property in payload, got "+JSON.stringify(e))}static facebook(e){return new Yt("oauth2-facebook","oauth2-facebook",e.includes("://")?{redirectUrl:e}:{accessToken:e})}static apple(e){return new Yt("oauth2-apple","oauth2-apple",e.includes("://")?{redirectUrl:e}:{id_token:e})}},v_="userIds",w_="deviceId",$_=class extends Gr{constructor(e,r){super(e,`app(${r})`)}getUserIds(){let e=this.get(v_),r=e?JSON.parse(e):[];if(Array.isArray(r))return[...new Set(r)];throw new Error("Expected the user ids to be an array")}setUserIds(e,r){if(r){let n=this.getUserIds();for(let i of n)e.indexOf(i)===-1&&e.push(i)}this.set(v_,JSON.stringify(e))}removeUserId(e){let n=this.getUserIds().filter(i=>i!==e);this.setUserIds(n,!1)}getDeviceId(){return this.get(w_)}setDeviceId(e){this.set(w_,e)}},D5="abcdefghijklmnopqrstuvwxyz",F5=100,C5={_stitch_client_app_id:"appId",_baas_client_app_id:"appId",_stitch_ua:"userAuth",_baas_ua:"userAuth",_stitch_link:"link",_baas_link:"link",_stitch_error:"error",_baas_error:"error",_stitch_state:"state",_baas_state:"state"},hi=class{constructor(e,r=Ha().openWindow){this.storage=e.prefix("oauth2"),this.openWindow=r}static parseRedirectLocation(e){let r=_5(e),n={};for(let[i,o]of Object.entries(C5)){let s=r[i];s&&(n[o]=s)}return n}static handleRedirect(e,r=Ha().defaultStorage){let n=hi.parseRedirectLocation(e),{state:i,error:o}=n;if(typeof i=="string"){let s=r.prefix("oauth2");hi.getStateStorage(s,i).set("result",JSON.stringify(n))}else throw o?new Error(`Failed to handle OAuth 2.0 redirect: ${o}`):new Error("Failed to handle OAuth 2.0 redirect.")}static decodeAuthInfo(e){let r=(e||"").split("$");if(r.length===4){let[n,i,o,s]=r;return{accessToken:n,refreshToken:i,userId:o,deviceId:s}}else throw new Error("Failed to decode 'authInfo' into ids and tokens")}static getStateStorage(e,r){return e.prefix(`state(${r})`)}openWindowAndWaitForRedirect(e,r){let n=hi.getStateStorage(this.storage,r);return new Promise((i,o)=>{let s=null,a,l=()=>{let h=n.get("result");if(h){let g=JSON.parse(h);n.removeListener(l),n.clear();try{s&&(clearInterval(a),s.close())}catch(m){console.warn(`Failed closing redirect window: ${m}`)}finally{i(g)}}};n.addListener(l),s=this.openWindow(e),a=setInterval(()=>{if(!s)clearInterval(a);else if(s.closed){clearInterval(a),n.removeListener(l);let h=new Error("Window closed");o(h)}},F5)})}generateState(){return w5(12,D5)}},__="x-baas-location",H_=class{constructor(e,r,n){this.fetcher=e,this.oauth2=new hi(r),this.getDeviceInformation=n}async authenticate(e,r){let n=this.getDeviceInformation(),i=typeof r=="object";if(e.providerType.startsWith("oauth2")&&typeof e.payload.redirectUrl=="string"){let o=this.oauth2.generateState(),s=await this.getLogInUrl(e,i,{state:o,redirect:e.payload.redirectUrl,providerRedirectHeader:i?!0:void 0,device:i?void 0:n.encode()});if(i){let l=(await this.fetcher.fetch({method:"GET",url:s,tokenType:i?"access":"none",user:r,mode:"cors",credentials:"include"})).headers.get(__);if(l)return this.openWindowAndWaitForAuthResponse(l,o);throw new Error(`Missing ${__} header`)}else return this.openWindowAndWaitForAuthResponse(s,o)}else{let o=await this.getLogInUrl(e,i),s=await this.fetcher.fetchJSON({method:"POST",url:o,body:{...e.payload,options:{device:n.toJSON()}},tokenType:i?"access":"none",user:r}),{user_id:a,access_token:l,refresh_token:h=null,device_id:g}=s;if(typeof a!="string")throw new Error("Expected a user id in the response");if(typeof l!="string")throw new Error("Expected an access token in the response");if(typeof h!="string"&&h!==null)throw new Error("Expected refresh token to be a string or null");if(typeof g!="string")throw new Error("Expected device id to be a string");return{userId:a,accessToken:l,refreshToken:h,deviceId:g}}}async getLogInUrl(e,r=!1,n={}){let o=this.fetcher.appRoute.authProvider(e.providerName).login(),s=U_({link:r?"true":void 0,...n});return await this.fetcher.locationUrl+o.path+s}async openWindowAndWaitForAuthResponse(e,r){let n=await this.oauth2.openWindowAndWaitForRedirect(e,r);return hi.decodeAuthInfo(n.userAuth)}},Ja=class extends Error{constructor(e,r,n,i,o,s,a){let l=i?`status ${n} ${i}`:`status ${n}`;typeof o=="string"?super(`Request failed (${e} ${r}): ${o} (${l})`):super(`Request failed (${e} ${r}): (${l})`),this.method=e,this.url=r,this.statusText=i,this.statusCode=n,this.error=o,this.errorCode=s,this.link=a}static async fromRequestAndResponse(e,r){var n;let{url:i,method:o}=e,{status:s,statusText:a}=r;if((n=r.headers.get("content-type"))===null||n===void 0?void 0:n.startsWith("application/json")){let l=await r.json();if(typeof l=="object"&&l){let{error:h,error_code:g,link:m}=l;return new Ja(o,i,s,a,typeof h=="string"?h:void 0,typeof g=="string"?g:void 0,typeof m=="string"?m:void 0)}}return new Ja(o,i,s,a)}};Qi=class{constructor({appId:e,transport:r,userContext:n,locationUrlContext:i}){this.appId=e,this.transport=r,this.userContext=n,this.locationUrlContext=i}static buildAuthorizationHeader(e,r){if(!e||r==="none")return{};if(r==="access")return{Authorization:`Bearer ${e.accessToken}`};if(r==="refresh")return{Authorization:`Bearer ${e.refreshToken}`};throw new Error(`Unexpected token type (${r})`)}static buildBody(e){if(e){if(typeof e=="object"&&e!==null)return JSON.stringify(L_(e));if(typeof e=="string")return e;throw console.log("body is",e),new Error("Unexpected type of body")}else return}static buildJsonHeader(e){return e&&e.length>0?{"Content-Type":"application/json"}:{}}clone(e){return new Qi({appId:this.appId,transport:this.transport,userContext:this.userContext,locationUrlContext:this.locationUrlContext,...e})}async fetch(e){let{path:r,url:n,tokenType:i="access",user:o=this.userContext.currentUser,...s}=e;if(typeof r=="string"&&typeof n=="string")throw new Error("Use of 'url' and 'path' mutually exclusive");if(typeof r=="string"){let a=await this.locationUrlContext.locationUrl+r;return this.fetch({...e,path:void 0,url:a})}else if(typeof n=="string"){let a=await this.transport.fetch({...s,url:n,headers:{...Qi.buildAuthorizationHeader(o,i),...e.headers}});if(a.ok)return a;if(o&&a.status===401&&i==="access")return await o.refreshAccessToken(),this.fetch({...e,user:o});throw o&&a.status===401&&i==="refresh"&&(o.accessToken=null,o.refreshToken=null),await Ja.fromRequestAndResponse(e,a)}else throw new Error("Expected either 'url' or 'path'")}async fetchJSON(e){let{body:r}=e,n=Qi.buildBody(r),i=Qi.buildJsonHeader(n),o=await this.fetch({...e,body:n,headers:{Accept:"application/json",...i,...e.headers}}),s=o.headers.get("content-type");if(s==null?void 0:s.startsWith("application/json")){let a=await o.json();return P_(a)}else{if(s===null)return null;throw new Error(`Expected JSON response, got "${s}"`)}}async fetchStream(e){let{body:r}=await this.fetch({...e,headers:{Accept:"text/event-stream",...e.headers}});return L5(r)}get appRoute(){return Jr.api().app(this.appId)}get locationUrl(){return this.locationUrlContext.locationUrl}},P5="deviceId";(function(t){t.DEVICE_ID="deviceId",t.APP_ID="appId",t.APP_VERSION="appVersion",t.PLATFORM="platform",t.PLATFORM_VERSION="platformVersion",t.SDK_VERSION="sdkVersion"})(S_||(S_={}));J_=class{constructor({appId:e,appVersion:r,deviceId:n}){this.sdkVersion="1.7.0";let i=Ha();this.platform=i.platform,this.platformVersion=i.platformVersion,this.appId=e,this.appVersion=r,this.deviceId=n}encode(){let e=R0(this);return oc.encode(JSON.stringify(e))}toJSON(){return R0(this)}},M5="https://realm.mongodb.com",bn=class{constructor(e){this.users=[],this._locationUrl=null;let r=typeof e=="string"?{id:e}:e;if(typeof r=="object"&&typeof r.id=="string")this.id=r.id;else throw new Error("Missing a MongoDB Realm app-id");this.baseUrl=r.baseUrl||M5,r.skipLocationRequest&&(this._locationUrl=Promise.resolve(this.baseUrl)),this.localApp=r.app;let{storage:n,transport:i=new rn}=r;this.fetcher=new Qi({appId:this.id,userContext:this,locationUrlContext:this,transport:i}),this.emailPasswordAuth=new z_(this.fetcher);let o=n||Ha().defaultStorage;this.storage=new $_(o,this.id),this.authenticator=new H_(this.fetcher,o,()=>this.deviceInformation);try{this.hydrate()}catch(s){this.storage.clear(),console.warn("Realm app hydration failed:",s instanceof Error?s.message:s)}}static getApp(e){if(e in bn.appCache)return bn.appCache[e];{let r=new bn(e);return bn.appCache[e]=r,r}}switchUser(e){let r=this.users.findIndex(i=>i===e);if(r===-1)throw new Error("The user was never logged into this app");let[n]=this.users.splice(r,1);this.users.unshift(n)}async logIn(e,r=!0){let n=await this.authenticator.authenticate(e),i=this.createOrUpdateUser(n,e.providerType);this.switchUser(i),r&&await i.refreshProfile(),this.storage.setUserIds(this.users.map(s=>s.id),!0);let o=n.deviceId;return o&&o!=="000000000000000000000000"&&this.storage.set(P5,o),i}async removeUser(e){let r=this.users.findIndex(n=>n===e);if(r===-1)throw new Error("The user was never logged into this app");this.users.splice(r,1),await e.logOut(),this.storage.remove(`user(${e.id}):profile`),this.storage.removeUserId(e.id)}async deleteUser(e){await this.fetcher.fetchJSON({method:"DELETE",path:Jr.api().auth().delete().path}),await this.removeUser(e)}get currentUser(){let e=this.users.filter(r=>r.state===Xi.Active);return e.length===0?null:e[0]}get allUsers(){return Object.fromEntries(this.users.map(e=>[e.id,e]))}get locationUrl(){if(!this._locationUrl){let e=Jr.api().app(this.id).location().path;this._locationUrl=this.fetcher.fetchJSON({method:"GET",url:this.baseUrl+e,tokenType:"none"}).then(r=>{if(typeof r!="object")throw new Error("Expected response body be an object");return r}).then(({hostname:r})=>{if(typeof r!="string")throw new Error("Expected response to contain a 'hostname'");return r}).catch(r=>{throw this._locationUrl=null,r})}return this._locationUrl}get deviceInformation(){let e=this.storage.getDeviceId(),r=typeof e=="string"&&e!=="000000000000000000000000"?new gr(e):void 0;return new J_({appId:this.localApp?this.localApp.name:void 0,appVersion:this.localApp?this.localApp.version:void 0,deviceId:r})}createOrUpdateUser(e,r){let n=this.users.find(i=>i.id===e.userId);if(n)return n.accessToken=e.accessToken,n.refreshToken=e.refreshToken,n;{if(!e.refreshToken)throw new Error("No refresh token in response from server");let i=new F0({app:this,id:e.userId,accessToken:e.accessToken,refreshToken:e.refreshToken,providerType:r});return this.users.unshift(i),i}}hydrate(){let e=this.storage.getUserIds();this.users=e.map(r=>new F0({app:this,id:r}))}};bn.appCache={};bn.Credentials=Yt;G_=class{constructor(){if(typeof globalThis.localStorage=="object")this.global=globalThis;else throw new Error("Cannot use LocalStorage without a global localStorage object")}get(e){return this.global.localStorage.getItem(e)}set(e,r){return this.global.localStorage.setItem(e,r)}remove(e){return this.global.localStorage.removeItem(e)}prefix(e){return new Gr(this,e)}clear(e){let r=[];for(let n=0;n<this.global.localStorage.length;n++){let i=this.global.localStorage.key(n);i&&(!e||i.startsWith(e))&&r.push(i)}for(let n of r)this.global.localStorage.removeItem(n)}addListener(e){return this.global.addEventListener("storage",e)}removeListener(e){return this.global.removeEventListener("storage",e)}},cs=t5(),j5="localStorage"in globalThis?G_:M_;Y_={defaultStorage:new j5().prefix("realm-web"),openWindow:U5,platform:(cs==null?void 0:cs.name)||"web",platformVersion:(cs==null?void 0:cs.version)||"0.0.0",TextDecoder};k5(Y_)});function Lt(t="struct",e={},r={_id:""},n={structType:"struct",_id:""}){function i(s=""){return`${s+Math.floor(Math.random()+Math.random()*Math.random()*1e16)}`}let o={_id:i(t+"defaultId"),structType:t,ownerId:r?._id,timestamp:Date.now(),parent:{structType:n?.structType,_id:n?._id}};return o.ownerId||delete o.ownerId,o?.parent?._id||delete o.parent,Object.keys(e).length>0&&Object.assign(o,e),o}function sc(t,e={}){if(!eo[t.tag]&&t.position&&(eo[t.tag]=[t.position.x,t.position.y,t.position.z]),eo[t.tag]){let r={channel:"",position:{x:eo[t.tag][0],y:eo[t.tag][1],z:eo[t.tag][2]}};return Object.assign(e,r)}else return Object.assign(e,t)}function z5(t=[],e=!0){let r=[];for(let n of t){let i=di(n);r.push(i)}return e&&r.push(...j0({channelDicts:t})),r}function ac(t=[],e={}){let r={scp:[],delta:[],theta:[],alpha1:[],alpha2:[],beta:[],lowgamma:[],highgamma:[]};return t.forEach(n=>r[n]=[]),Object.assign(e,r)}function di(t="",e={},r={_id:""},n={structType:"struct",_id:""}){let i=ac(),o={tag:t,position:{x:0,y:0,z:0},count:0,times:[],raw:[],filtered:[],fftCount:0,fftTimes:[],ffts:[],slices:JSON.parse(JSON.stringify(i)),means:JSON.parse(JSON.stringify(i)),startTime:Date.now()},s=Lt("eeg",o,r,n);return t&&sc(o,s),Object.assign(s,e)}function M0(t={0:di("FP1"),1:di("FP2")},e={},r={_id:""},n={structType:"struct",_id:""}){let i=ac(),o={tag:t[0]?.tag+"::"+t[1]?.tag,x0:t[0]?.position?.x,y0:t[0]?.position?.y,z0:t[0]?.position?.z,x1:t[1]?.position?.x,y1:t[1]?.position?.y,z1:t[1]?.position?.z,fftCount:0,fftTimes:[],ffts:[],slices:JSON.parse(JSON.stringify(i)),means:JSON.parse(JSON.stringify(i)),startTime:Date.now()},s=Lt("coherence",o,r,n);return Object.assign(s,e)}function j0(t={channelDicts:[{ch:0,tag:"FP1",analyze:!1},{ch:1,tag:"FP2",analyze:!1}],taggedOnly:!0},e={},r={_id:""},n={structType:"struct",_id:""}){for(var i=[],o=1,s=0,a=0;a<t.channelDicts.length*(t.channelDicts.length+1)/2-t.channelDicts.length;a++){if(t.taggedOnly===!1||t.taggedOnly===!0&&t.channelDicts[s].tag!==null&&t.channelDicts[s+o].tag!==null&&t.channelDicts[s].tag!=="other"&&t.channelDicts[s+o].tag!=="other"&&t.channelDicts[s].analyze===!0&&t.channelDicts[s+o].analyze===!0){var l=di(t.channelDicts[s].tag),h=di(t.channelDicts[s+o].tag);i.push(M0({0:l,1:h},{},r,n))}o++,o+s===t.channelDicts.length&&(s++,o=1)}return i}function U0(t="",e={},r={_id:""},n={structType:"struct",_id:""}){let i={tag:t,position:{x:0,y:0,z:0},count:0,times:[],red:[],ir:[],ir2:[],ambient:[],ratio:[],temp:[],beat_detect:{beats:[],breaths:[],rir:[],rir2:[],drir_dt:[],localmins:[],localmaxs:[],val_dists:[],peak_dists:[],localmins2:[],localmaxs2:[],val_dists2:[],peak_dists2:[]},startTime:Date.now()},o=Lt("fnirs",i,r,n);return t&&sc(i,o),Object.assign(o,e)}function eS(t="",e={},r={_id:""},n={structType:"struct",_id:""}){let i={tag:t,Ax:[],Ay:[],Az:[],Gx:[],Gy:[],Gz:[],startTime:Date.now()},o=Lt("imu",i,r,n);return t&&sc(i,o),Object.assign(o,e)}function tS(t="",e={},r={_id:""},n={structType:"struct",_id:""}){let i={tag:t,count:0,times:[],x:[],y:[],smax:[],smay:[],startTime:Date.now()},o=Lt("eyetracker",i,r,n);return Object.assign(o,e)}function B0(t="",e={},r={_id:""},n={structType:"struct",_id:""}){let i={tag:t,count:0,times:[],raw:[],filtered:[],bpm:[],hrv:[],startTime:Date.now()},o=Lt("ecg",i,r,n);return Object.assign(o,e)}function rS(t="",e={},r={_id:""},n={structType:"struct",_id:""}){}function nS(t="",e={},r={_id:""},n={structType:"struct",_id:""}){let i=U0(t,r,n,e);return i.structType="ppg",i}function iS(t="",e={},r={_id:""},n={structType:"struct",_id:""}){let i=B0(t,r,n,e);return i.structType="hrv",i}function oS(t="",e={},r={_id:""},n={structType:"struct",_id:""}){let i=di(t,r,n,e);return i.structType="emg",i}function sS(t="",e={},r={_id:""},n={structType:"struct",_id:""}){let i=Lt("profile",{tag:t,name:"",username:"",firstName:"",lastName:"",email:"",sex:"",birthday:"",type:"",userRoles:[],id:""},r,n);return Object.assign(i,e)}function aS(t="",e={},r={_id:""},n={structType:"struct",_id:""}){let i={tag:t,authorizedId:"",authorizedName:"",authorizerId:"",authorizerName:"",authorizations:new Array,structs:new Array,excluded:new Array,groups:new Array,status:"PENDING",expires:!1,associatedAuthId:""},o=Lt("authorization",i,r,n);return Object.assign(o,e)}function lS(t="",e={},r={_id:""},n={structType:"struct",_id:""}){let i={tag:t,name:"",details:"",admins:new Array,peers:new Array,clients:new Array,users:new Array},o=Lt("group",i,r,n);return Object.assign(o,e)}function uS(t="",e={},r={_id:""},n={structType:"struct",_id:""}){let i={tag:t,title:"",author:"",expires:!1,type:"",data:new Array},o=Lt("dataInstance",i,r,n);return Object.assign(o,e)}function cS(t="",e={},r={_id:""},n={structType:"struct",_id:""}){let i={tag:t,event:"",author:"",startTime:"",endTime:"",grade:0,notes:"",attachments:new Array,users:new Array},o=Lt("event",i,r,n);return Object.assign(o,e)}function fS(t="",e={},r={_id:""},n={structType:"struct",_id:""}){let i={tag:t,message:"",topic:"",author:"",attachments:new Array,comments:new Array,replies:new Array,users:new Array,audioChatActive:!1,videoChatActive:!1},o=Lt("chatroom",i,r,n);return Object.assign(o,e)}function hS(t="",e={},r={_id:""},n={structType:"struct",_id:""}){let i={tag:t,author:"",replyTo:"",message:"",rating:0,replies:new Array,users:new Array,attachments:new Array},o=Lt("comment",i,r,n);return Object.assign(o,e)}function dS(t="",e={},r={_id:""},n={structType:"struct",_id:""}){let i=Lt("notification",{tag:t,note:"",parentUserId:""},r,n);return Object.assign(i,e)}function pS(t="",e={},r={_id:""},n={structType:"struct",_id:""}){let i={tag:t,title:"",author:"",attachments:new Array,dates:new Array},o=Lt("schedule",i,r,n);return Object.assign(o,e)}function gS(t="",e={},r={_id:""},n={structType:"struct",_id:""}){let i={tag:t,timeSet:"",notes:"",recurs:"NEVER",attachments:new Array},o=Lt("date",i,r,n);return Object.assign(o,e)}function X5(t=[],e={scp:[.1,1],delta:[1,4],theta:[4,8],alpha1:[8,12],alpha2:[12,16],beta:[16,30],lowgamma:[30,45],highgamma:[45,100]}){let r={};return t.forEach((n,i)=>{for(let o in e)r[o]||(r[o]=[[],[]]),n>=e[o][0]&&n<=e[o][1]&&(r[o][0].push(n),r[o][1].push(i))}),r}function tk(t,e,r){let n=(e-t)/r,i=[],o=0;for(;o<e;)i.push(o),o+=n;return i}var X_,B5,Q_,qe,Pn,eo,V5,W5,to,Le,q5,$5,H5,J5,G5,Y5,K5,Z5,Q5,ek,yS,mS=at(()=>{X_=Object.defineProperty,B5=(t,e,r)=>e in t?X_(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Q_=(t,e)=>{for(var r in e)X_(t,r,{get:e[r],enumerable:!0})},qe=(t,e,r)=>(B5(t,typeof e!="symbol"?e+"":e,r),r),Pn={};Q_(Pn,{AuthorizationStruct:()=>aS,ChatroomStruct:()=>fS,CoherenceMap:()=>j0,CoherenceStruct:()=>M0,CommentStruct:()=>hS,DataStruct:()=>uS,DateStruct:()=>gS,ECGStruct:()=>B0,EDAStruct:()=>rS,EEGCoordinates:()=>z5,EEGStruct:()=>di,EMGStruct:()=>oS,EventStruct:()=>cS,EyeTrackerStruct:()=>tS,FNIRSStruct:()=>U0,FrequencyBandsStruct:()=>ac,GroupStruct:()=>lS,HRVStruct:()=>iS,IMUStruct:()=>eS,NotificationStruct:()=>dS,PPGStruct:()=>nS,ProfileStruct:()=>sS,ScheduleStruct:()=>pS,Struct:()=>Lt,eegCoordinates:()=>eo,setCoordinate:()=>sc,structRegistry:()=>V5});eo={FP1:[-21.2,66.9,12.1],FPZ:[1.4,65.1,11.3],FP2:[24.3,66.3,12.5],AF7:[-41.7,52.8,11.3],AF3:[-32.7,48.4,32.8],AFZ:[1.8,54.8,37.9],AF4:[35.1,50.1,31.1],AF8:[43.9,52.7,9.3],F5:[-51.4,26.7,24.7],F3:[-39.7,25.3,44.7],F1:[-22.1,26.8,54.9],FZ:[0,26.8,60.6],F2:[23.6,28.2,55.6],F4:[41.9,27.5,43.9],F6:[52.9,28.7,25.2],F7:[-52.1,28.6,3.8],F8:[53.2,28.4,3.1],FC5:[-59.1,3,26.1],FC3:[-45.5,2.4,51.3],FC1:[-24.7,.3,66.4],FCZ:[1,1,72.8],FC2:[26.1,3.2,66],FC4:[47.5,4.6,49.7],FC6:[60.5,4.9,25.5],FT9:[-53.8,-2.1,-29.1],FT7:[-59.2,3.4,-2.1],FT8:[60.2,4.7,-2.8],FT10:[55,-3.6,-31],T7:[-65.8,-17.8,-2.9],T5:[-61.5,-65.3,1.1],T3:[-70.2,-21.3,-10.7],T4:[71.9,-25.2,-8.2],T6:[59.3,-67.6,3.8],T8:[67.4,-18.5,-3.4],C5:[-63.6,-18.9,25.8],C3:[-49.1,-20.7,53.2],C1:[-25.1,-22.5,70.1],CZ:[.8,-21.9,77.4],C2:[26.7,-20.9,69.5],C4:[50.3,-18.8,53],C6:[65.2,-18,26.4],CP5:[-61.8,-46.2,22.5],CP3:[-46.9,-47.7,49.7],CP1:[-24,-49.1,66.1],CPZ:[.7,-47.9,72.6],CP2:[25.8,-47.1,66],CP4:[49.5,-45.5,50.7],CP6:[62.9,-44.6,24.4],TP9:[-73.6,-46.7,-4],TP7:[-63.6,-44.7,-4],TP8:[64.6,-45.4,-3.7],TP10:[74.6,-47.4,-3.7],P9:[-50.8,-51.3,-37.7],P7:[-55.9,-64.8,0],P5:[-52.7,-67.1,19.9],P3:[-41.4,-67.8,42.4],P1:[-21.6,-71.3,52.6],PZ:[.7,-69.3,56.9],P2:[24.4,-69.9,53.5],P4:[44.2,-65.8,42.7],P6:[54.4,-65.3,20.2],P8:[56.4,-64.4,.1],P10:[51,-53.9,-36.5],PO7:[-44,-81.7,1.6],PO3:[-33.3,-84.3,26.5],POZ:[0,-87.9,33.5],PO4:[35.2,-82.6,26.1],PO8:[43.3,-82,.7],O1:[-25.8,-93.3,7.7],OZ:[.3,-97.1,8.7],O2:[25,-95.2,6.2]};V5={Struct:Lt,EEGStruct:di,FNIRSStruct:U0,CoherenceStruct:M0,CoherenceMap:j0,FrequencyBandsStruct:ac,IMUStruct:eS,EyeTrackerStruct:tS,ECGStruct:B0,EDAStruct:rS,PPGStruct:nS,HRVStruct:iS,EMGStruct:oS,ProfileStruct:sS,AuthorizationStruct:aS,GroupStruct:lS,DataStruct:uS,EventStruct:cS,ChatroomStruct:fS,CommentStruct:hS,NotificationStruct:dS,ScheduleStruct:pS,DateStruct:gS},W5={};Q_(W5,{bandpassWindow:()=>tk,get40HzGamma:()=>Y5,getAlphaBetaRatio:()=>J5,getAlphaRatio:()=>$5,getAlphaThetaRatio:()=>G5,getCoherenceScore:()=>q5,getHEGRatioScore:()=>Z5,getLowGammaScore:()=>K5,getThetaBetaRatio:()=>H5,mapCoherenceData:()=>ek,mapFFTData:()=>Q5,splitFrequencyBands:()=>X5});to=class{constructor(){}static genSineWave(t=20,e=1,r=1,n=512,i=0,o=1){for(var s=[],a=[],l=1/n,h=0;h<r;h+=l){var g=Math.sin(2*Math.PI*t*h)*e;g+=Math.sin(2*Math.PI*i*h)*o,s.push(g),a.push(h)}return[a,s]}static getSineAmplitude(t=20,e=1,r=0,n=0){return Math.sin(this.TWO_PI*t*r+n)*e}static mean(t){var e=t.reduce((r,n)=>n+=r);return e/t.length}static mode(t){return t.sort((e,r)=>t.filter(n=>n===e).length-t.filter(n=>n===r).length).pop()}static std(t,e=void 0){let r=e;e||(r=this.mean(t));let n=0;for(let i=0;i<t.length;i++){let o=t[i]-r;n+=o*o}return Math.sqrt(n/t.length)}static relError(t=[],e=[],r=!0){if(t.length!==e.length)throw new Error("Input arrays of same length!");let n=t.length,i=[];for(let o=0;o<n;o++){let s=(t[o]-e[o])/t[o];r&&(s=Math.abs(s)),i.push(s)}return i}static informationEntropy(t=[]){let e=[],r=t.length;for(let n=0;n<r;n++){let i=t[n]*Math.log(t[n]);isNaN(i)&&(i=0),e.push(i)}return e}static zscore(t){let e=this.mean(t),r=this.std(t,e),n=[];for(let i=0;i<t.length;i++)n.push((t[i]-e)/r);return n}static variance(t){var e=this.mean(t);return t.reduce((r,n)=>r+(n-e)**2,0)/t.length}static dot(t,e){for(var r=0,n=0;n<t.length;n++)r+=t[n]*e[n];return r}static cross3D(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}static magnitude(t){var e=0;return t.forEach(r=>{e+=r*r}),Math.sqrt(e)}static distance(t,e){var r=0;return t.forEach((n,i)=>{r+=(e[i]-n)*(e[i]-n)}),Math.sqrt(r)}static normalize(t){var e=0;e=this.magnitude(t);var r=[];return t.forEach((n,i)=>{r.push(n*e)}),r}static quadraticFormula(t,e,r){let n=Math.sqrt(e*e-4*t*r);if(!isNaN(n))return["complex","complex"];let i=1/(2*t);if(n===0)return[e*i];let o=-e;return[(o+n)*i,(o-n)*i]}static newtonsMethod(t=o=>Math.pow(o,5)+o*o-o-.2,e=0,r=1,n=.01,i=10){let o=[];for(let s=0;s<i;s++){let a=Math.random()*(r-e),l=t(a),h=t(a+n),g=(h-l)/n,m=a+n;for(;Math.abs(g)>n;){let b=-l/O,N=m+b;l=h,h=t(N);let O=(h-l)/(N-m)}let p,w=o.find((b,N)=>{if(Math.abs(xn1-b)<n)return p=N,!0});w?o[p]=(xn1+w)*.5:o.push(xn1)}return o}static makeVec(t,e){var r=[];return t.forEach((n,i)=>{r.push(e[i]-n)}),r}static transpose(t){return t[0].map((e,r)=>t.map(n=>n[r]))}static matmul(t,e){for(var r=t.length,n=t[0].length,i=e.length,o=e[0].length,s=new Array(r),a=0;a<r;++a){s[a]=new Array(o);for(var l=0;l<o;++l){s[a][l]=0;for(var h=0;h<n;++h)s[a][l]+=t[a][h]*e[h][l]}}return s}static matscale(t,e){let r=[];for(var n=0;n<t.length;n++){r[n]=[];for(let i=0;i<t[0].length;i++)r[n][i]=t[n][i]*e}return r}static matadd(t,e){let r=[];for(let i=0;i<t.length;i++){r[i]=[];for(var n=0;n<t[0].length;n++)r[i][n]=t[i][n]+e[i][n]}return r}static matsub(t,e){let r=[];for(let i=0;i<t.length;i++){r[i]=[];for(var n=0;n<t[0].length;n++)r[i][n]=t[i][n]-e[i][n]}return r}static histogram(t=[],e=1,r=void 0){let n=[...t];n.sort(function(l,h){return l-h});let i=Math.min(...n);if(typeof r=="number"){let l=Math.max(...n);e=Math.abs((l-i)/(r-1))}let o=i,s=[],a=[];for(let l=0;l<n.length;l++){let h=e*o;if(n[l]>i+h){o++,h+=e;let g=i+h+h*.5;s.push(g),a.push(0)}a[a.length-1]++}return[s,a]}static normalDistribution(t=[],e=!0,r=1e-4){let n=this.mean(t),i=this.variance(t),o=t.length,s=[],a=1/(this.TWO_PI*i),l=1/i,h=0;for(let g=0;g<o;g++){let m=Math.exp(-.5*Math.pow((t[g]-n)*l,2))*a;m<r&&(m=0),s.push(m),h+=m}if(e){let g=1/h;s=s.map(m=>m*g)}return s}static expectedValue(t=[],e=this.normalDistribution(t)){return t.reduce((r,n,i)=>r+n*e[i])}static originMoment(t=[],e=this.normalDistribution(t),r=1){return t.reduce((n,i,o)=>n+Math.pow(i,r)*e[o])}static centralMoment(t=[],e=this.normalDistribution(t),r=1){let n=this.mean(t);return t.reduce((i,o,s)=>i+Math.pow(o-n,r)*e[s]/t.length)}static linearDiscriminantAnalysis(t=[],e=[]){let r=this.mean(t),n=this.mean(e),i=this.cov1d(t,e),o=this.normalDistribution(t),s=[];for(let a=0;a<t.length;a++)s.push(x[a]*i*n-.5*r*i*n+Math.log10(o[a]));return s}static conv1D(t=[],e=[1/3,1/3,1/3],r=Math.floor(e.length*.5)){let n=[],i=1/e.length;if(r>0){let a=new Array(r).fill(0);t=[...a,...t,...a]}let o=Math.floor(e.length*.5),s=t.length-e.length+o;for(let a=o;a<s;a++){let l=0;for(let h=0;h<e.length;h++)l+=t[a-o]*e[h];n.push(l*i)}return n}static conv2D(t=[[],[],[]],e=[[],[],[]],r=0){let n=new Array(t.length-Math.ceil(e.length*.5)).fill([]),i,o=to.transpose(o);if(r>0){let N=new Array(r).fill(0);i=to.transpose(t);for(let O=0;O<i.length;O++)i[O]=[...N,...i[O],...N];t=to.transpose(i);for(let O=0;O<t.length;O++)t[O]=[...N,...t[O],...N]}let s=Math.floor(e[0].length*.5),a=Math.floor(o[0].length*.5),l=t[0].length-e[0].length+s,h=i[0].length-o[0].length+a,g=1/(e[0].length*o[0].length),m=l*h,p=s,w,b=a;for(;p<m;){let N=0;w=p%t[0].length,w===0&&b++;for(let O=0;O<e[0].length;O++){for(let I=0;I<o[0].length;O++)N+=t[b-a+I][w-s+O]*e[I][O];n[b].push(N*g)}p++}return n}static cov2d(t){var e=this.transpose(t),r=[],n=[],i=[];t.forEach((b,N)=>{n.push(this.mean(b))}),e.forEach((b,N)=>{i.push(this.mean(b))}),t.forEach((b,N)=>{r.push([]);for(var O=0;O<b.length;O++)r[N].push((t[N][O]-n[N])*(t[N][O]-i[O])/(b.length-1))});for(var o=this.transpose(r),s=r.length,a=r[0].length,l=o.length,h=o[0].length,g=new Array(s),m=0;m<s;++m){g[m]=new Array(h);for(var p=0;p<h;++p){g[m][p]=0;for(var w=0;w<a;++w)g[m][p]+=r[m][w]*o[w][p]/(t[0].length-1)}}return g}static cov1d(t=[],e=[]){return this.cov2d([t,e])}static cov3d(t=[],e=[],r=[]){return[[this.cov1d(t,t),this.cov1d(t,e),this.cov1d(t,r)],[this.cov1d(e,t),this.cov1d(e,e),this.cov1d(e,r)],[this.cov1d(r,t),this.cov1d(r,e),this.cov1d(r,r)]]}static covNd(t=[]){let e=[];t.forEach((r,n)=>{e.push([]),t.forEach((i,o)=>{e[n].push(this.cov1d(r,i))})})}static eigens2x2(t=[[1,2],[3,4]]){let e=t[0][0]*t[1][1]-t[0][1]*t[1][0],r=(t[0][0]+t[1][1])*.5,n=Math.sqrt(r*r-e),i=r+n,o=r-n;return[i,o]}static eigenvectors2x2(t=[[1,2],[3,4]],e=[1,2]){let r=[-t[0][1],t[0][0]-e[0]];r[0]===0&&r[1]===0&&(r[0]=t[1][1]-e[0],r[1]=-t[1][0]);let n=[-t[0][1],t[0][0]-e[1]];return n[0]===0&&n[1]===0&&(n[0]=t[1][1]-e[1],n[1]=-t[1][0]),[r,n]}static fastpca2d(t,e){let r=this.cov1d(t,e),n=this.eigens2x2(r);n[1]>n[0]&&n.reverse();let i=this.eigenvectors2x2(r,n);return console.log(n,i),[n,i]}static crosscorrelation(t,e){var r=[...e,...Array(e.length).fill(0)],n=this.mean(t),i=this.mean(e),o=t.reduce((m,p)=>m+=Math.pow(p-n,2));o=Math.sqrt(o);var s=e.reduce((m,p)=>m+=Math.pow(p-n,2));s=Math.sqrt(s);for(var a=1/(o*s),l=new Array(t.length).fill(0),h=0;h<t.length;h++){var g=t.reduce((m,p,w)=>m+=(p-n)*(r[h+w]-i));l[h]=g*a}return l}static autocorrelation(t){var e=[...t,...Array(t.length).fill(0)],r=this.mean(t),n=t.reduce((l,h)=>l+=Math.pow(h-r,2));n=Math.sqrt(n);for(var i=1/(n*n),o=new Array(t.length).fill(0),s=0;s<t.length;s++){var a=t.reduce((l,h,g)=>l+=(h-r)*(e[s+g]-r));o[s]=a*i}return o}static correlograms(t=[[],[]]){var e=[];return t.forEach((r,n)=>{t.forEach((i,o)=>{o>=n&&e.push(to.crosscorrelation(r,i))})}),e}static sma(t=[],e){for(var r=[],n=0;n<t.length;n++)if(n==0)r.push(t[0]);else if(n<e){var i=t.slice(0,n+1);r.push(i.reduce((o,s)=>s+=o)/(n+1))}else{var i=t.slice(n-e,n);r.push(i.reduce((s,a)=>a+=s)/e)}return r}static sum(t=[]){if(t.length>0){var e=t.reduce((r,n)=>n+=r);return e}else return 0}static reduceArrByFactor(t,e=2){return t.filter((r,n)=>n%e===0)}static makeArr(t,e,r){for(var n=[],i=(e-t)/(r-1),o=0;o<r;o++)n.push(t+i*o);return n}static interpolateArray(t,e,r=1){var n=function(m,p,w){return(m+(p-m)*w)*r},i=new Array,o=new Number((t.length-1)/(e-1));i[0]=t[0];for(var s=1;s<e-1;s++){var a=s*o,l=new Number(Math.floor(a)).toFixed(),h=new Number(Math.ceil(a)).toFixed(),g=a-l;i[s]=n(t[l],t[h],g)}return i[e-1]=t[t.length-1],i}static isExtrema(t,e="peak"){let r=[...t];if(r.length%2===0&&r.pop(),t.length>1){let n=!0;for(let i=0;i<r.length;i++){let o=r[i];if(e==="peak"){if(i<Math.floor(r.length*.5)&&o>=r[Math.floor(r.length*.5)]){n=!1;break}else if(i>Math.floor(r.length*.5)&&o>=r[Math.floor(r.length*.5)]){n=!1;break}}else if(e==="valley"){if(i<Math.floor(r.length*.5)&&o<=r[Math.floor(r.length*.5)]){n=!1;break}else if(i>Math.floor(r.length*.5)&&o<=r[Math.floor(r.length*.5)]){n=!1;break}}else if(i<Math.floor(r.length*.5)&&o<=r[Math.floor(r.length*.5)]){n=!1;break}else if(i>Math.floor(r.length*.5)&&o<=r[Math.floor(r.length*.5)]){n=!1;break}}if(e!=="peak"&&e!=="valley"&&n===!1){n=!0;for(let i=0;i<r.length;i++){let o=r[i];if(i<Math.floor(r.length*.5)&&o>=r[Math.floor(r.length*.5)]){n=!1;break}else if(i>Math.floor(r.length*.5)&&o>=r[Math.floor(r.length*.5)]){n=!1;break}}}return n}else return}static isCriticalPoint(t,e="peak"){let r=[...t];if(r.length%2===0&&r.pop(),t.length>1){let n=!0;for(let i=0;i<r.length;i++){let o=r[i];if(e==="peak"){if(i<r.length*.5&&o<=0){n=!1;break}else if(i>r.length*.5&&o>0){n=!1;break}}else if(e==="valley"){if(i<r.length*.5&&o>=0){n=!1;break}else if(i>r.length*.5&&o<0){n=!1;break}}else if(i<r.length*.5&&o>=0){n=!1;break}else if(i>r.length*.5&&o<0){n=!1;break}}if(e!=="peak"&&e!=="valley"&&n===!1){n=!0;for(let i=0;i<r.length;i++){let o=r[i];if(i<r.length*.5&&o<=0){n=!1;break}else if(i>r.length*.5&&o>0){n=!1;break}}}return n}else return}static getPeakThreshold(t,e,r){let n,i=t.filter((o,s)=>{if(e.indexOf(s)>-1)return!0});return r===0?n=this.mean(i):n=(r+this.mean(i))*.5,n}static column(t,e){let r=new Array(t.length).fill(0).map(()=>new Array(1).fill(0));for(let n=0;n<t.length;n++)r[n][0]=t[n][e];return r}static flatten_vector(t){let e=[];for(let r=0;r<t.length;r++)e[r]=t[r][0];return e}static squared_difference(t,e){let r=0;for(let n=0;n<t.length;n++)r=r+Math.pow(t[n]-e[n],2);return r}static shift_deflate(t,e,r){let n=Math.sqrt(this.matmul(this.transpose(r),r)),i=this.matscale(r,1/n),o=this.matscale(this.matmul(i,this.transpose(i)),e);return this.matsub(t,o)}static eigenvalue_of_vector(t,e){return ev=this.matmul(this.matmul(this.transpose(e),t),e),ev}static power_iteration(t,e=1e-5,r=1e3){let n=t.length,i=new Array(n).fill(0).map(()=>new Array(1).fill(Math.sqrt(n))),o=this.eigenvalue_of_vector(t,i),s=1,a=0;for(;s>e&&a<r;){let l=JSON.parse(JSON.stringify(o)),h=this.matmul(t,i);i=this.normalize(h),o=this.eigenvalue_of_vector(t,i),s=Math.abs(o-l),a++}return[o,i]}static eigens(t,e=1e-4,r=1e3){let n=[],i=[];for(let o=0;o<t.length;o++){let s=this.power_iteration(t,e,r),a=s[0],l=s[1];n[o]=a,i[o]=this.flatten_vector(l),t=this.shift_deflate(t,a,l)}return[n,i]}static pca(t,e=1e-5){let r=t.length,n=new Array(r),i=new Array(r),o=this.transpose(t);n[0]=this.column(t,0);let s=1,a=0;for(;espilon>e;){a++,i[0]=this.matmul(o,n[0]);let l=this.matmul(this.transpose(n[0]),n[0]);i[0]=this.matscale(i[0],1/l);let h=Math.sqrt(this.matmul(this.transpose(i[0]),i[0]));i[0]=this.matscale(i[0],1/h);let g=this.matmul(t,i[0]),m=this.matmul(this.transpose(i[0]),i[0]);g=this.matscale(g,1/m),s=this.squared_difference(n[0],g),n[0]=JSON.parse(JSON.stringify(g))}return this.matmul(this.transpose(n[0]),n[0])}static p300(t=[],e=[],r=[],n=256){let i=Math.floor(n/10),o=this.sma(e,i),s=this.peakDetect(o,"peak",i),a=this.mean(o),l=this.std(o,a),h=0,g=[];return s.length>0&&t.forEach((m,p)=>{for(;r[s[h]]<m+200&&(h++,!!s[h]););let w=0,b=[];for(;r[s[h+w]]<m+600&&(b.push(h+w),w++,!!s[h+w]););if(b.length>1){let N=[];b.forEach(D=>{N.push(o[s[D]])});let O=Math.max(...N),I=b[N.indexOf(O)];g.push({event_timestamp:m,event_index:p,peak_timestamp:r[[s[I]]],signal_index:[s[I]],signal_amplitude:e[[s[I]]],zscore:(o[s[I]]-a)/l})}else b.length===1&&g.push({event_timestamp:m,event_index:p,peak_timestamp:r[s[b[0]]],signal_index:s[b[0]],signal_amplitude:e[[s[b[0]]]],zscore:(o[s[b[0]]]-a)/l})}),g}},Le=to;qe(Le,"TWO_PI",Math.PI*2),qe(Le,"C",299792458),qe(Le,"G",66743e-15),qe(Le,"h",662607015e-42),qe(Le,"R",8314.32),qe(Le,"Ra",287),qe(Le,"H",69.3),qe(Le,"kbar",1054571817e-43),qe(Le,"kB",1380649e-29),qe(Le,"ke",89875517923e-1),qe(Le,"me",91093837015e-41),qe(Le,"mp",167262192369e-38),qe(Le,"mn",167492749804e-38),qe(Le,"P0",101325),qe(Le,"T0",288.15),qe(Le,"p0",1.225),qe(Le,"Na",60220978e16),qe(Le,"y",1.405),qe(Le,"M0",28.96643),qe(Le,"g0",9.80665),qe(Le,"Re",6378100),qe(Le,"B",1458e-9),qe(Le,"S",110.4),qe(Le,"Sigma",365e-12),qe(Le,"imgkernels",{edgeDetection:[[-1,-1,-1],[-1,8,-1],[-1,-1,-1]],boxBlur:[[1/9,1/9,1/9],[1/9,1/9,1/9],[1/9,1/9,1/9]],sobelLeft:[[1,0,-1],[2,0,-2],[1,0,-1]],sobelRight:[[-1,0,1],[-2,0,2],[-1,0,1]],sobelTop:[[1,2,1],[0,0,0],[-1,-2,-1]],sobelBottom:[[-1,2,1],[0,0,0],[1,2,1]],identity:[[0,0,0],[0,1,0],[0,0,0]],gaussian3x3:[[1,2,1],[2,4,2],[1,2,1]],guassian7x7:[[0,0,0,5,0,0,0],[0,5,18,32,18,5,0],[0,18,64,100,64,18,0],[5,32,100,100,100,32,5],[0,18,64,100,64,18,0],[0,5,18,32,18,5,0],[0,0,0,5,0,0,0]],emboss:[[-2,-1,0],[-1,1,1],[0,1,2]],sharpen:[[0,-1,0],[-1,5,-1],[0,-1,0]]}),qe(Le,"integral",(t=n=>n,e=[],r=.01)=>{let n=0;for(let i=e[0];i<e[1];i+=r)n+=t(i)*r;return n}),qe(Le,"dintegral",(t=(i,o)=>i+o,e=[[],[]],r=.01,n=r)=>{let i=0;for(let o=e[0][0]+r;o<e[0][1];o+=r)for(let s=e[1][0]+n;s<e[1][1];s+=n)i+=t(o,s)*r*n;return i}),qe(Le,"tintegral",(t=(o,s,a)=>o+s+a,e=[[],[],[]],r=.01,n=r,i=r)=>{let o=0;for(let s=e[0][0]+r;s<e[0][1];s+=r)for(let a=e[1][0]+n;a<e[1][1];a+=n)for(let l=e[2][0]+i;l<e[2][1];l+=i)o+=t(s,a,l)*r*n*i;return o}),qe(Le,"pintegral",(t=n=>n,e=[],r=.01)=>{let n=0,i,o;for(let s=e[0];s<e[1];s+=r)i=o,o=t(s),i&&(n+=to.distance([0,i],[r,o]));return n}),qe(Le,"peakDetect",(t,e="peak",r=49)=>{let n=Math.floor(r*.5),i=[];for(let o=0;o<t.length-r;o++)to.isExtrema(t.slice(o,o+r),e)&&i.push(o+n-1);return i});q5=(t,e="alpha1")=>{let r=[];return Array.isArray(t)||(t=[t]),t.forEach(n=>{if(n.fftCount>0){let i=n.fftCount,o=Math.min(20,i),s=n.means[e].slice(i-o);r.push(Le.mean(s))}}),Le.mean(r)},$5=t=>t.fftCount>0?t.means.alpha2[t.fftCount-1]/t.means.alpha1[t.fftCount-1]:0,H5=t=>t.fftCount>0?t.means.theta[t.fftCount-1]/t.means.beta[t.fftCount-1]:0,J5=t=>t.fftCount>0?(t.means.alpha1[t.fftCount-1]+t.means.alpha2[t.fftCount-1])*.5/t.means.beta[t.fftCount-1]:0,G5=t=>t.fftCount>0?(t.means.alpha1[t.fftCount-1]+t.means.alpha2[t.fftCount-1])*.5/t.means.theta[t.fftCount-1]:0,Y5=(t,e)=>{if(t.fftCount>0&&Array.isArray(e)){let r=t.slices.lowgamma[t.fftCount-1],n=[];return r.forEach((i,o)=>{e.lowgamma[0][o]>38&&e.lowgamma[0][o]<42&&n.push(i)}),Math.max(...n)}else return 0},K5=t=>{if(t.fftCount>0){let e=t.fftCount,r=20;e<r&&(r=e);let n=t.means.lowgamma.slice(e-r);return t.means.lowgamma[e-1]-Le.mean(n)}else return 0},Z5=t=>{if(t.count>0){let e=t.count,r=40;e<r&&(r=e);let n=t.ratio.slice(e-r);return t.ratio[e-1]-Le.mean(n)}else return 0};Q5=(t,e,r,n)=>{let i=0;n.fftCount++,n.fftTimes.push(e),n.ffts.push(t);for(let o in r){let s=t.slice(i,i+r[o][1].length);n.slices[o].push(s),n.means[o].push(s.reduce((a,l)=>a+l)/s.length),i+=r[o][1].length}},ek=(t,e,r,n)=>{t.forEach((i,o)=>{n[o].fftCount++,n[o].fftTimes.push(e),n[o].ffts.push(data);let s=0;for(let a in r){let l=fft.slice(s,s+r[a][1].length);coord.slices[a].push(l),coord.means[a].push(l.reduce((h,g)=>h+g)/l.length),s+=r[a][1].length}})};yS=class{constructor(t={},e=!1,r=void 0){this.DS=Pn,this.collections=new Map,this.data={byTime:{},notes:{},events:{},sleep:{},food:{},hr:{},ppg:{},hrv:{},ecg:{},emg:{},eeg:{},fnirs:{}},this.rolloverLimit=5e4,this.dataSorts=new Map,this.watches={},this.onCollectionSet=(n,i)=>{},this.ontrigger=n=>{},this.threaded=e,r?this.workers=r:typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&(this.threaded=!0),Object.assign(this.data,t),this.dataSorts=new Map,this.watches={},this.setSort("event",n=>(this.data.events[n.timestamp]?this.data.events[n.timestamp].push(n):this.data.events[n.timestamp]=[n],n.event==="sleep"&&(this.data.sleep[n.timestamp]?this.data.sleep[n.timestamp].push(n):this.data.sleep[n.timestamp]=[n]),n)),this.setSort(["notes","note","link"],n=>(this.data.notes[n.timestamp]?this.data.notes[n.timestamp].push(n):this.data.notes[n.timestamp]=[n],this.data.byTime[n.timestamp]?this.data.byTime[n.timestamp].push(n):this.data.byTime[n.timestamp]=[n],n)),this.id=this.randomId("dataTablet")}randomId(t=""){return`${t+Math.floor(Math.random()+Math.random()*Math.random()*1e16)}`}setLocalData(t){let e=r=>{let n=r.structType,i=this.collections.get(n);i||(i=new Map,this.collections.set(n,i)),i.set(r._id,r),this.onCollectionSet(n,i)};Array.isArray(t)?t.forEach(r=>{e(r)}):e(t)}getLocalData(t,e){let r="",n="",i="";if(typeof e=="object"?(r=e.ownerId,n=Object.keys(e).filter(s=>s!="ownerId")[0],i=e[n]):i=e,!t&&!r&&!n&&!i)return[];let o=[];if(!t&&(r||n))return this.collections.forEach(s=>{if((n==="_id"||n==="id")&&i){let a=s.get(i);a&&o.push(a)}else s.forEach(a=>{n&&i?a[n]===i&&a.ownerId===r&&o.push(a):a.ownerId===r&&o.push(a)})}),o;{let s=this.collections.get(t);if(!s)return o;if(!n&&!r)return s.forEach(a=>{o.push(a)}),o;if((n==="_id"||n==="id")&&i)return s.get(i);s.forEach((a,l)=>{n&&i&&!r?a[n]===i&&o.push(a):r&&!n?a.ownerId===r&&o.push(a):r&&n&&i&&a.ownerId===r&&a[n]&&a[n]===i&&o.push(a)})}return o}runSort(t,e={},r=[],n=this){let i;if(this.threaded===!1){let o=this.getSort(t);if(o)i=o(e,r,n);else return!1}else if(this.threaded===!0)return this.workers.runWorkerFunction("runSort",[t,e,r],this.workerId,this.id);return i}setSort(t,e=(r,n=[],i=this)=>{}){if(this.threaded===!1)Array.isArray(t)?t.forEach(r=>{this.dataSorts.set(r,e)}):this.dataSorts.set(t,e);else if(this.threaded===!0)return this.workers.runWorkerFunction("setSort",[t,e.toString()],this.workerId,this.id)}getSort(t){if(this.threaded===!1)return this.dataSorts.get(t);if(this.threaded===!0)return this.workers.runWorkerFunction("getSort",[t],this.workerId,this.id)}checkWatches(t={}){for(let e in this.watches)this.watches[e].ondata(t,this.watches[e].accum,this.watches[e]),this.watches[e].triggered&&(this.ontrigger(this.watches[e].accum),this.watches[e].triggered=!1)}setWatch(t,e=(n,i,o)=>{},r=n=>{}){this.watches[t]={triggered:!1,accum:this.DS.Struct("alert"),ondata:e,ontrigger:r}}getWatch(t){return this.watches[t]}async sortStructsIntoTable(t=[]){let e=function(n,i){return n.timestamp-i.timestamp};t.sort(e);let r=[];for(let n=0;n<t.length;n++){let i=t[n];if(!i.timestamp)continue;let o=i.timestamp;if(this.data.byTime[o]?this.data.byTime[o].push(i):this.data.byTime[o]=[i],i.structType==="dataInstance"&&i.data)i.data.forEach(async s=>{if(typeof s=="object"&&!Array.isArray(s)){let a=s.dataType;if(s.ownerId=i.ownerId,s.timestamp||(s.timestamp=o),a){let l=this.runSort(a,s,r,this);l?l.constructor?.name!=="Promise"&&(this.checkWatches(l),this.onUpdate(o,l),r.push(l)):(this.data[a]||(this.data[a]={}),s.timestamp=o,this.data[a][o]?this.data[a][o].push(s):this.data[a][o]=[s],this.data.byTime[o]?this.data.byTime[o].push(s):this.data.byTime[o]=[s],this.checkWatches(s),this.onUpdate(o,s),r.push(s))}}});else{let s=this.runSort(i.structType,i,r,this);if(s)this.checkWatches(s),this.onUpdate(o,s),r.push(s);else{let a=i.structType;this.data[a]||(this.data[a]={}),this.data[a][o]?this.data[a][o].push(i):this.data[a][o]=[i],this.checkWatches(i),this.onUpdate(o,i),r.push(i)}}}for(let n in this.data)this.data[n]=this.sortObjectByPropName(this.data[n]);this.onSorted(r)}onUpdate(t,e,r=this.data){}onSorted(t=[]){}getDataByTimestamp(t,e){if(this.threaded===!0)return this.workers.runWorkerFunction("getDataByTimestamp",[t,e],this.workerId,this.id);let r=this.data.byTime[t];return e&&r&&(r=r.filter(n=>e?e===n.ownerId:!0)),r}getDataByTimeRange(t,e,r,n){if(this.threaded===!0)return this.workers.runWorkerFunction("getDataByTimeRange",[t,e,r,n],this.workerId,this.id);let i={};if(r){for(let o in this.data[r]){let s=parseInt(o);s>t&&s<e&&(i[o]=[...this.data[r][o]])}r==="sleep"&&(i=this.filterSleepResults(i))}else for(let o in this.data.byTime){let s=parseInt(o);s>t&&s<e&&(i[o]=[...this.data.byTime[o]])}if(n&&i)for(let o in i){let s=[];i[o]=i[o],i[o].forEach((a,l)=>{a.ownerId!==n&&s.push(l)}),s.reverse().forEach(a=>{i[o].splice(a,1)}),i[o].length===0&&delete i[o]}return i}getDataByType(t,e,r){if(!this.data[t])return;let n={...this.data[t]};if(e&&(n=[...n[e]]),r&&n)for(let i in n){let o=[];n[i]=[...n[i]],n[i].forEach((s,a)=>{s.ownerId!==r&&o.push(a)}),o.reverse().forEach(s=>{n[i].splice(s,1)}),n[i].length===0&&delete n[i]}return t==="sleep"&&(n=this.filterSleepResults(n)),n}filterSleepResults(t={}){let e=[];for(let r in t)t[r]=[...t[r]],e.push(...t[r].filter(n=>n.structType==="event"));return e.forEach(r=>{let n;for(let i in t)t[i].forEach((o,s)=>o.structType==="fitbitsleep"&&r.startTime&&r.endTime&&Math.abs(o.startTime-r.startTime)<1e3*12*3600&&Math.abs(o.endTime-r.endTime)<1e3*12*3600&&r.endTime-r.startTime>1e3*2*3600?(n=s,!0):!1),n&&t[i].splice(n,1)}),t}sortObjectByPropName(t){return Object.keys(t).sort().reduce((e,r)=>(e[r]=t[r],e),{})}checkRollover(t,e=this.rolloverLimit){if(!t)return!1;let r=this.collections.get(t);return r?(r.forEach(n=>{for(let i in n)Array.isArray(n[i])?n[i].length>e&&(n[i].slice(n[i].length-e),i==="ffts"?n.fftCount=n[i].length:i==="times"&&(n.count=n[i].length)):typeof n[i]=="object"&&this.checkRollover(n[i])}),!0):!1}}});var vS,wS,_S,SS=at(()=>{vS=class{constructor(e=!1,r=!1){this.debug=e,this.listeners=[],this.synchronous=r,this.syncInterval="FRAMERATE",this.syncAnim=void 0,r===!0&&this.startSync()}addListener(e=null,r,n=void 0,i=void 0,o=void 0,s=this.debug,a=!0){if(r===void 0){console.error("You must assign an object");return}var l=e;l==null&&(l=Math.floor(Math.random()*1e5)),this.synchronous===!0&&(a=!1);var h={key:l,listener:new wS(r,n,i,o,s,a)};this.listeners.push(h)}getListener(e){return this.listeners.find((n,i)=>{if(n.key===e)return!0})}hasKey(e){var r=!1;return this.listeners.forEach((n,i)=>{if(n.key===e)return r=!0,!0}),r}getKeyIndices(e){var r=[];return this.listeners.find((n,i)=>{n.key===e&&r.push(i)}),r}onchange(e=null,r=null){if(e==null)this.listeners.forEach((i,o)=>{i.listener.onchange=r});else var n=this.listeners.find((i,o)=>{i.name===e&&(i.listener.onchange=r)})}addFunc=(e=null,r=null,n=!0)=>{var i=null;if(r!==null)if(e==null)this.listeners.forEach((s,a)=>{i=s.listener.addFunc(r),s.listener.running==!1&&n==!0&&s.listener.start()});else var o=this.listeners.find((s,a)=>{s.key===e&&(i=s.listener.addFunc(r),s.listener.running==!1&&n==!0&&s.listener.start())});return i};getFuncs=(e=void 0)=>{if(e){var r=this.listeners.find((n,i)=>{if(n.key===e)return!0});return r.onchangeFuncs}else return};removeFuncs=(e=null,r=null,n=!1)=>{if(e==null)this.listeners.forEach((o,s)=>{o.listener.removeFuncs(r)});else var i=this.listeners.find((o,s)=>{o.key===e&&(o.listener.removeFuncs(r),(o.listener.onchangeFuncs.length===0||n===!0)&&o.listener.stop())})};stop(e=null){if(this.synchronous&&this.stopSync(),e==null)this.listeners.forEach((n,i)=>{n.listener.stop()});else var r=this.listeners.find((n,i)=>{n.name===e&&n.listener.stop()})}start(e=null){if(this.synchronous&&this.stopSync(),e==null)this.listeners.forEach((n,i)=>{n.listener.start()});else var r=this.listeners.find((n,i)=>{n.name===e&&n.listener.start()})}startSync(){if(this.synchronous===!1){this.synchronous=!0,this.stop();let e=()=>{this.synchronous===!0&&(this.listeners.forEach(r=>{r.listener.check()}),this.syncInterval==="FRAMERATE"?this.syncAnim=requestAnimationFrame(e):typeof this.syncInterval=="number"&&setTimeout(e,this.syncInterval))};e()}}stopSync(){this.synchronous=!1,this.syncAnim&&cancelAnimationFrame(this.syncAnim)}remove(e=null){if(e==null)this.listeners.forEach(i=>{i.listener.stop()}),this.listeners.splice(0,this.listeners.length);else{var r=[],n=this.listeners.forEach((i,o)=>{i.key===e&&r.push(o)});r.reverse().forEach(i=>{this.listeners[i].listener.stop(),this.listeners.splice(i,1)})}}},wS=class{constructor(e,r="__ANY__",n=this.onchange,i="FRAMERATE",o=!1,s=!0){this.debug=o,this.onchange=n,this.onchangeFuncs=[],this.object=e,this.propName=r,this.propOld=void 0,this.setListenerRef(r),this.running=s,this.funcs=0,this.interval,i<10?(this.interval=10,console.log("Min recommended interval set: 10ms")):this.interval=i,s===!0&&(typeof window>"u"?setTimeout(()=>{this.check()},60):this.checker=requestAnimationFrame(this.check))}onchange=e=>{console.log(this.propName," changed from: ",this.propOld," to: ",this.object[this.propName])};addFunc=(e=null)=>{let r=0;return e!==null&&(this.onchangeFuncs.push({idx:this.funcs,onchange:e}),r=this.funcs,this.funcs++),r};removeFuncs(e=null){let r=0;e===null?this.onchangeFuncs=[]:this.onchangeFuncs.find((n,i)=>{if(n.idx===e)return r=i,!0})!==void 0&&this.onchangeFuncs.splice(r,1)}onchangeMulti=e=>{[...this.onchangeFuncs].forEach((n,i)=>{this.debug===!0&&console.log(n.onchange),n.onchange(e)})};setListenerRef=e=>{e==="__ANY__"||e===null||e===void 0?this.propOld=JSON.stringifyFast(this.object):Array.isArray(this.object[e])?this.propOld=JSON.stringifyFast(this.object[e].slice(this.object[e].length-20)):typeof this.object[e]=="object"?this.propOld=JSON.stringifyFast(this.object[e]):typeof this.object[e]=="function"?this.propOld=this.object[e].toString():this.propOld=this.object[e],this.debug===!0&&console.log("propname",e,", new assignment: ",this.propOld)};check=()=>{let e=!1;if(this.propName==="__ANY__"||this.propName===null||this.propName===void 0)this.propOld!==JSON.stringifyFast(this.object)&&(this.debug===!0&&console.log("onchange: ",this.onchange),this.onchange(this.object),this.onchangeFuncs.length>0&&this.onchangeMulti(this.object),this.setListenerRef(this.propName),e=!0);else if(Array.isArray(this.object[this.propName]))this.propOld!==JSON.stringifyFast(this.object[this.propName].slice(this.object[this.propName].length-20))&&(this.debug===!0&&console.log("onchange: ",this.onchange),this.onchange(this.object[this.propName]),this.onchangeFuncs.length>0&&this.onchangeMulti(this.object[this.propName]),this.setListenerRef(this.propName),e=!0);else if(typeof this.object[this.propName]=="object"){let r=JSON.stringifyFast(this.object[this.propName]);this.propOld!==r&&(this.debug===!0&&console.log("onchange: ",this.onchange),this.onchange(this.object[this.propName]),this.onchangeFuncs.length>0&&this.onchangeMulti(this.object[this.propName]),this.setListenerRef(this.propName),e=!0)}else typeof this.object[this.propName]=="function"?this.propOld!==this.object[this.propName].toString()&&(this.debug===!0&&console.log("onchange: ",this.onchange),this.onchange(this.object[this.propName].toString()),this.onchangeFuncs.length>0&&this.onchangeMulti(this.object[this.propName].toString()),this.setListenerRef(this.propName),e=!0):this.object[this.propName]!==this.propOld&&(this.debug===!0&&console.log("onchange: ",this.onchange),this.onchange(this.object[this.propName]),this.onchangeFuncs.length>0&&this.onchangeMulti(this.object[this.propName]),this.setListenerRef(this.propName),e=!0);return this.running===!0&&(this.debug===!0&&console.log("checking",this.object,this.propName),this.interval==="FRAMERATE"?typeof window>"u"?setTimeout(()=>{this.check()},16):this.checker=requestAnimationFrame(this.check):setTimeout(()=>{this.check()},this.interval)),e};start(){this.running=!0,typeof window>"u"?setTimeout(()=>{this.check()},16):this.checker=requestAnimationFrame(this.check)}stop(){this.running=!1,cancelAnimationFrame(this.checker)}};JSON.stringifyFast===void 0&&(JSON.stringifyFast=function(){let t=new Map,e=[],r=["this"];function n(){t.clear(),e.length=0,r.length=1}function i(s,a){var l=e.length-1;if(e[l]){var h=e[l];if(typeof h=="object")if(h[s]===a||l===0)r.push(s),e.push(a.pushed);else for(;l-->=0;){if(h=e[l],typeof h=="object"&&h[s]===a){l+=2,e.length=l,r.length=l,--l,e[l]=a,r[l]=s;break}l--}}}function o(s,a){let l;if(a!=null)if(typeof a=="object"){let h=a.constructor.name;s&&h==="Object"&&i(s,a);let g=t.get(a);if(g)return"[Circular Reference]"+g;if(t.set(a,r.join(".")),h==="Array")a.length>20?l=a.slice(a.length-20):l=a;else if(h.includes("Set"))l=Array.from(a);else if(h!=="Object"&&h!=="Number"&&h!=="String"&&h!=="Boolean")l="instanceof_"+h;else if(h==="Object"){let m={};for(let p in a)if(a[p]==null)m[p]=a[p];else if(Array.isArray(a[p]))a[p].length>20?m[p]=a[p].slice(a[p].length-20):m[p]=a[p];else if(a[p].constructor.name==="Object"){m[p]={};for(let w in a[p])if(Array.isArray(a[p][w]))a[p][w].length>20?m[p][w]=a[p][w].slice(a[p][w].length-20):m[p][w]=a[p][w];else if(a[p][w]!=null){let b=a[p][w].constructor.name;b.includes("Set")?m[p][w]=Array.from(a[p][w]):b!=="Number"&&b!=="String"&&b!=="Boolean"?m[p][w]="instanceof_"+b:m[p][w]=a[p][w]}else m[p][w]=a[p][w]}else{let w=a[p].constructor.name;w.includes("Set")?m[p]=Array.from(a[p]):w!=="Number"&&w!=="String"&&w!=="Boolean"?m[p]="instanceof_"+w:m[p]=a[p]}l=m}else l=a}else l=a;return l}return function(a,l){e.push(a);let h=JSON.stringify(a,o,l);return n(),h}}());JSON.stringifyWithCircularRefs===void 0&&(JSON.stringifyWithCircularRefs=function(){let t=new Map,e=[],r=["this"];function n(){t.clear(),e.length=0,r.length=1}function i(s,a){var l=e.length-1,h=e[l];if(h[s]===a||l===0)r.push(s),e.push(a);else for(;l-->=0;)if(h=e[l],h[s]===a){l+=2,e.length=l,r.length=l,--l,e[l]=a,r[l]=s;break}}function o(s,a){if(a!=null&&typeof a=="object"){s&&i(s,a);let l=t.get(a);if(l)return"[Circular Reference]"+l;t.set(a,r.join("."))}return a}return function(a,l){try{return e.push(a),JSON.stringify(a,o,l)}finally{n()}}}());_S=vS});var bS,ES,OS=at(()=>{SS();bS=class{constructor(e={},r="FRAMERATE",n=!0){this.data=e,this.interval=r,this.pushToState={},this.pushRecord={pushed:[]},this.pushCallbacks={},this.triggers={},this.prev={},this.listener=new _S,this.defaultStartListenerEventLoop=n}subscribe(e,r,n=this.defaultStartListenerEventLoop){if(e&&e!=="state")if(this.data[e]===void 0)this.addToState(e,null,r,n);else return this.addSecondaryKeyResponse(e,r,void 0,n);else return this.addSecondaryKeyResponse(e,r,void 0,n)}subscribeOnce(e=void 0,r=n=>{}){let n,i=o=>{r(o),this.unsubscribe(e,n)};n=this.subscribe(e,i)}unsubscribe(e,r=null){r!==null?this.removeSecondaryKeyResponse(e,r,!0):console.error("Specify a subcription function index")}unsubscribeAll(e){this.unsubscribeAllSequential(e),this.unsubscribeAllTriggers(e),this.clearAllKeyResponses(e),this.data[e]&&delete this.data[e],this.listener.hasKey("pushToState")&&this.setSequentialState({stateRemoved:e})}setInterval(e="FRAMERATE"){this.interval=e,this.listener.listeners.forEach((r,n)=>{r.interval=this.interval})}updateState(e,r){this.data[e]==null?this.addToState(e,r):this.data[e]=r}setupSynchronousUpdates=()=>{if(!this.listener.hasKey("pushToState")){let e=()=>{if(Object.keys(this.pushToState).length>0){Object.assign(this.data,this.pushToState);for(let r of Object.getOwnPropertyNames(this.pushToState))delete this.pushToState[r]}};this.listener.addListener("pushToState",this.pushToState,"__ANY__",e,this.interval),this.addToState("pushRecord",this.pushRecord,r=>{let n=r.pushed.length;for(let i=0;i<n;i++){let o=r.pushed[i];this.pushCallbacks.state&&this.pushCallbacks.state.forEach(s=>{s.onchange(o)});for(let s in o)this.pushCallbacks[s]&&this.pushCallbacks[s].forEach(a=>{typeof a=="object"&&a.onchange(o[s])})}this.pushRecord.pushed.splice(0,n)})}};addToState(e,r,n=null,i=this.defaultStartListenerEventLoop,o=!1){if(!this.listener.hasKey("pushToState")&&this.defaultStartListenerEventLoop&&this.setupSynchronousUpdates(),this.data[e]=r,this.setSequentialState({stateAdded:e}),n!==null)return this.addSecondaryKeyResponse(e,n,o,i)}get(e){return this.data[e]}getState(){return JSON.parse(JSON.stringifyFast(this.data))}setState(e={},r=!1){if(!this.listener.hasKey("pushToState")&&this.defaultStartListenerEventLoop&&(this.setupSynchronousUpdates(),this.pushRecord.pushed.push(JSON.parse(JSON.stringifyWithCircularRefs(e)))),e.stateUpdateTimeStamp=Date.now(),r){for(let n in e)if(n in this.pushToState){if(Array.isArray(this.pushToState[n])&&Array.isArray(e[n]))e[n]=this.pushToState[n].push(...e[n]);else if(typeof this.pushToState[n]=="object"&&typeof e[n]=="object"){for(let i in e[n])if(this.pushToState[n][i]){if(Array.isArray(this.pushToState[n][i])&&Array.isArray(e[n][i]))e[n][i]=this.pushToState[n][i].push(...e[n][i]);else if(typeof this.pushToState[n][i]=="object"&&typeof e[n][i]=="object"){for(let o in e[n][i])if(this.pushToState[n][i][o])Array.isArray(this.pushToState[n][i][o])&&Array.isArray(e[n][i][o])&&(e[n][i][o]=this.pushToState[n][i][o].push(...e[n][i][o]));else if(typeof this.pushToState[n][i][o]=="object"&&typeof e[n][i][o]=="object")for(let s in e[n][i][o])this.pushToState[n][i][o][s]&&Array.isArray(this.pushToState[n][i][o][s])&&Array.isArray(e[n][i][o][s])&&(e[n][i][o][s]=this.pushToState[n][i][o][s].push(...e[n][i][o][s]))}}}}}if(Object.assign(this.pushToState,e),Object.keys(this.triggers).length>0){this.triggers.state&&this.triggers.state.forEach(n=>{n.onchange(this.data)});for(let n of Object.getOwnPropertyNames(this.triggers))n in this.pushToState&&(this.data[n]=this.pushToState[n],delete this.pushToState[n],this.triggers[n].forEach(i=>{i.onchange(this.data[n])}))}return this.pushToState}subscribeTrigger(e=void 0,r=n=>{}){if(e){this.triggers[e]||(this.triggers[e]=[]);let n=this.triggers[e].length;return this.triggers[e].push({idx:n,onchange:r}),this.triggers[e].length-1}else return}subscribeTriggerOnce(e=void 0,r=n=>{}){let n,i=o=>{r(o),this.unsubscribeTrigger(e,n)};n=this.subscribeTrigger(e,i)}unsubscribeTrigger(e=void 0,r=0){let n,i=this.triggers[e];i&&i.find(s=>{if(s.idx===r)return!0})&&i.splice(n,1)}unsubscribeAllTriggers(e){e&&this.triggers[e]&&delete this.triggers[e]}setSequentialState(e={}){this.listener.hasKey("pushToState")||this.setupSynchronousUpdates(),e.stateUpdateTimeStamp=Date.now(),this.pushRecord.pushed.push(JSON.parse(JSON.stringify(e)))}subscribeSequential(e=void 0,r=void 0){if(e)if(this.data[e]===void 0&&e!=="state"&&this.addToState(e,null,void 0),this.pushCallbacks[e]||(this.pushCallbacks[e]=[]),r){let n=this.pushCallbacks[e].length;return this.pushCallbacks[e].push({idx:n,onchange:r}),this.pushCallbacks[e].length-1}else return;else return}subscribeSequentialOnce(e=void 0,r=n=>{}){let n,i=o=>{r(o),this.unsubscribeSequential(e,n)};n=this.subscribeSequential(e,i)}unsubscribeSequential(e=void 0,r=0){e&&this.pushCallbacks[e]&&this.pushCallbacks[e].find((n,i)=>{if(n.idx===r)return this.pushCallbacks[e].splice(i,1),!0})}unsubscribeAllSequential(e){e&&this.pushCallbacks[e]&&this.pushCallbacks[e]&&delete this.pushCallbacks[e]}setPrimaryKeyResponse(e=null,r=null,n=!1,i=this.defaultStartListenerEventLoop){if(r!==null)if(this.listener.hasKey(e))this.listener.onchange(e,r);else if(e!=null&&e!=="state")this.listener.addListener(e,this.data,e,r,this.data.stateUpdateInterval,n,i);else{if(!this.listener.hasKey("state")){let o=()=>{this.prev=Object.assign({},this.data)};this.listener.addListener("state",this.data,"__ANY__",o,this.interval)}return this.listener.addFunc("state",r)}}addSecondaryKeyResponse=(e=null,r=null,n=!1,i=this.defaultStartListenerEventLoop)=>{if(r!=null){if(this.listener.hasKey(e))return this.listener.addFunc(e,r);if(e!=null&&e!=="state")return this.listener.addListener(e,this.data,e,()=>{},this.data.stateUpdateInterval,n,i),this.listener.addFunc(e,r);if(!this.listener.hasKey("state")){let o=()=>{this.prev=Object.assign({},this.data)};this.listener.addListener("state",this.data,"__ANY__",o,this.interval)}return this.listener.addFunc("state",r)}};removeSecondaryKeyResponse(e=null,r=null,n=!0){e!==null?this.listener.hasKey(e)?this.listener.removeFuncs(e,r,n):console.error("key does not exist"):console.error("provide key")}clearAllKeyResponses(e=null){e===null?this.listener.remove(null):this.listener.hasKey(e)&&this.listener.remove(e)}getKeySubCallbacks(e){return this.listener.getFuncs(e)}removeState=this.unsubscribeAll;runSynchronousListeners(){this.defaultStartListenerEventLoop=!1,this.listener.startSync()}stop(e=null){this.listener.stop(e)}};JSON.stringifyFast===void 0&&(JSON.stringifyFast=function(){let t=new Map,e=[],r=["this"];function n(){t.clear(),e.length=0,r.length=1}function i(s,a){var l=e.length-1;if(e[l]){var h=e[l];if(typeof h=="object")if(h[s]===a||l===0)r.push(s),e.push(a.pushed);else for(;l-->=0;){if(h=e[l],typeof h=="object"&&h[s]===a){l+=2,e.length=l,r.length=l,--l,e[l]=a,r[l]=s;break}l++}}}function o(s,a){let l;if(a!=null)if(typeof a=="object"){let h=a.constructor.name;s&&h==="Object"&&i(s,a);let g=t.get(a);if(g)return"[Circular Reference]"+g;if(t.set(a,r.join(".")),h==="Array")a.length>20?l=a.slice(a.length-20):l=a;else if(h.includes("Set"))l=Array.from(a);else if(h!=="Object"&&h!=="Number"&&h!=="String"&&h!=="Boolean")l="instanceof_"+h;else if(h==="Object"){let m={};for(let p in a)if(a[p]==null)m[p]=a[p];else if(Array.isArray(a[p]))a[p].length>20?m[p]=a[p].slice(a[p].length-20):m[p]=a[p];else if(a[p].constructor.name==="Object"){m[p]={};for(let w in a[p])if(Array.isArray(a[p][w]))a[p][w].length>20?m[p][w]=a[p][w].slice(a[p][w].length-20):m[p][w]=a[p][w];else if(a[p][w]!=null){let b=a[p][w].constructor.name;b.includes("Set")?m[p][w]=Array.from(a[p][w]):b!=="Number"&&b!=="String"&&b!=="Boolean"?m[p][w]="instanceof_"+b:m[p][w]=a[p][w]}else m[p][w]=a[p][w]}else{let w=a[p].constructor.name;w.includes("Set")?m[p]=Array.from(a[p]):w!=="Number"&&w!=="String"&&w!=="Boolean"?m[p]="instanceof_"+w:m[p]=a[p]}l=m}else l=a}else l=a;return l}return function(a,l){e.push(a);let h=JSON.stringify(a,o,l);return n(),h}}());JSON.stringifyWithCircularRefs===void 0&&(JSON.stringifyWithCircularRefs=function(){let t=new Map,e=[],r=["this"];function n(){t.clear(),e.length=0,r.length=1}function i(s,a){var l=e.length-1,h=e[l];if(typeof h=="object")if(h[s]===a||l===0)r.push(s),e.push(a.pushed);else for(;l-->=0;){if(h=e[l],typeof h=="object"&&h[s]===a){l+=2,e.length=l,r.length=l,--l,e[l]=a,r[l]=s;break}l--}}function o(s,a){if(a!=null&&typeof a=="object"){s&&i(s,a);let l=t.get(a);if(l)return"[Circular Reference]"+l;t.set(a,r.join("."))}return a}return function(a,l){try{return e.push(a),JSON.stringify(a,o,l)}finally{n()}}}());ES=bS});function xS(t,e){let r=e instanceof URL?e:new URL(e);return t=r.pathname==="/"?t:r.pathname+t,new URL(t,r.href).href}function z0(t,e=!0){t=t.replace(/\/\*\*?/,"");let r=t.split("/");e&&(r=r.slice(0,r.length-1));let n=[t];return n.push(t+"/*"),n.push(t+"/**"),r.forEach((i,o)=>{let s=r.slice(0,o+1).join("/");s!=t&&(o===r.length-1&&n.push(s+"/*"),n.push(s+"/**"))}),n}var V0=at(()=>{});var nn,W0,lc,ps=at(()=>{nn=t=>(t?`${t}_`:"")+Math.floor(1e5*Math.random()),W0=(t=Math,e=Date,r=16,n=i=>t.floor(i).toString(r))=>n(e.now()/1e3)+" ".repeat(r).replace(/./g,()=>n(t.random()*r)),lc=(t={})=>(t._id||(t._id=W0()),t={_id:t._id,id:t.id||t._id},t)});function TS(t){if(t instanceof Function){var e=t.toString().replace(nk,""),r=e.slice(e.indexOf("(")+1,e.indexOf(")")).match(ik);return r===null&&(r=[]),r}else return}function sA(method=""){let getFunctionBody=t=>t.replace(/^\W*(function[^{]+\{([\s\S]*)\}|[^=]+=>[^{]*\{([\s\S]*)\}|[^=]+=>(.+))/i,"$2$3$4"),getFunctionHead=t=>{let e=t.indexOf(")");return t.slice(0,t.indexOf("{",e)+1)},newFuncHead=getFunctionHead(method),newFuncBody=getFunctionBody(method),newFunc;if(newFuncHead.includes("function ")){let t=newFuncHead.split("(")[1].split(")")[0];newFunc=new Function(t,newFuncBody)}else if(newFuncHead.substring(0,6)===newFuncBody.substring(0,6)){let t=newFuncHead.split("(")[1].split(")")[0];newFunc=new Function(t,newFuncBody.substring(newFuncBody.indexOf("{")+1,newFuncBody.length-1))}else newFunc=eval(newFuncHead+newFuncBody+"}");return newFunc}var rk,q0,nk,ik,$0=at(()=>{rk=input=>{if(typeof input=="string"&&(input=JSON.parse(input)),typeof input=="object"){for(let key in input){let value=input[key],regex=new RegExp("(|[a-zA-Z]w*|([a-zA-Z]w*(,s*[a-zA-Z]w*)*))s*=>"),func=typeof value=="string"?value.substring(0,8)=="function":!1,arrow=typeof value=="string"?regex.test(value):!1;try{input[key]=func||arrow?eval("("+value+")"):value}catch(t){console.error(t,value),input[key]=value}typeof input[key]=="object"&&rk(input[key])}return input}else return{}},q0=(t,e=!0)=>{t instanceof Object&&(t=Array.isArray(t)?[...t]:Object.assign({},t));for(let r in t)t[r]instanceof Function&&(t[r]=t[r].toString()),t[r]instanceof Object&&(t[r]=q0(t[r],!1));return e?JSON.stringify(t):t},nk=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/mg,ik=/([^\s,]+)/g});var kS,NS=at(()=>{kS=`<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Error</title>
</head>
<body>
<pre>404 Not Found</pre>
</body>
</html>`});var H0=Te((gs,IS)=>{"use strict";var ok=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof Mn<"u")return Mn;throw new Error("unable to locate global object")},Mn=ok();IS.exports=gs=Mn.fetch;Mn.fetch&&(gs.default=Mn.fetch.bind(Mn));gs.Headers=Mn.Headers;gs.Request=Mn.Request;gs.Response=Mn.Response});var J0,AS=at(()=>{$0();V0();ps();try{if(typeof process=="object"){let t=H0();typeof globalThis.fetch!="function"&&(globalThis.fetch=t)}}catch(t){}J0=class{constructor(e="https://localhost",r,n){this.id=null;this.target=null;this.type=null;this.link=null;this.credentials={};this.connection=null;this.services={available:{},connecting:{},queue:{}};this.router=null;this.clients={};this.user=W0();this.status=!1;this.responses={};this.setCredentials=e=>{this.credentials=lc(e),console.log("Using Credentials:",this.credentials)};this.check=()=>re(this,null,function*(){var i,o,s,a,l,h;this.type==="webrtc"&&(yield this._subscribe({protocol:"webrtc",force:!0}).then(g=>{this.status=!0}).catch(g=>console.log("Link doesn't have WebRTC enabled.",g)));let e=()=>re(this,null,function*(){return yield this._subscribe({protocol:"websocket",force:!0}).then(g=>(this.status=!0,g)),yield this.send("services")}),r=()=>re(this,null,function*(){return yield this.send("services")}),n;if(console.log("endpoint type",this.type),this.type==="websocket"){console.log("connecting ws");let g=yield e().then(m=>(this.status=!0,m)).catch(m=>re(this,null,function*(){if(this.type==="websocket")return console.log("Falling back to http"),yield r()}));console.log("endpoint res",g)}else n=yield r().then(g=>(this.status=!0,g)).catch(g=>re(this,null,function*(){return console.log("Falling back to websockets"),yield e()}));if(n){console.log("Connection successful!");let g=n.message[0],m=[];for(let p in g){let b=g[p].replace(/Backend|Service/,"").toLowerCase();this.services.available[b]=p,m.push(b),((s=(o=(i=this.router)==null?void 0:i.SERVICES)==null?void 0:o[b])==null?void 0:s.status)instanceof Function&&this.router.SERVICES[b].status(p),((a=this.clients[b])==null?void 0:a.serviceType)==="subscription"&&((l=this.services.queue[b])==null||l.forEach(N=>N()),this.services.queue[b]=[])}(h=this.services.queue.undefined)==null||h.forEach(p=>p()),this.services.queue.undefined=[]}else console.log("Connection failed!");return n==null?void 0:n.message});this.send=(i,...o)=>re(this,[i,...o],function*(e,r={},n=()=>{}){var l,h,g,m,p,w,b,N,O;if(typeof e=="string")r.route=e;else{let I=this.services[e.service];r.route=I?`${I}/${e.route}`:e.route}r.suppress=!!this.connection;let s,a={suppress:r.suppress,id:(h=(l=this.link)==null?void 0:l.credentials)==null?void 0:h.id};if(((g=this.connection)==null?void 0:g.protocol)==="websocket")r.id=(m=this.link.credentials)==null?void 0:m.id,s=yield this.link.connection.service.send(r,a);else if(((p=this==null?void 0:this.connection)==null?void 0:p.protocol)==="webrtc")r.id=((w=this.credentials)==null?void 0:w.id)||((b=this.link.credentials)==null?void 0:b.id),s=yield this.connection.service.send(r,a);else{r.id=(N=this.link.credentials)==null?void 0:N.id,r.method||(r.method=((O=r.message)==null?void 0:O.length)>0?"POST":"GET");let I={method:r.method.toUpperCase(),mode:"cors",headers:{"Content-Type":"application/json"}};I.method!="GET"&&(I.body=q0(r)),s=yield fetch(xS(r.route,this.link.target),I).then(D=>re(this,null,function*(){let G=D.body.getReader(),q=D.headers.get("Content-Length"),J=0;if(globalThis.ReadableStream){let C=new ReadableStream({start(z){let S=()=>re(this,null,function*(){G.read().then(({value:W,done:te})=>{if(te){z.close();return}J+=W.length,n(J/q,q),z.enqueue(W),S()})});S()}});return new Response(C,{headers:D.headers})}else return D})),s=s&&(yield s.json().then(D=>{if(s.ok)return D;throw D.message}).catch(D=>re(this,null,function*(){throw"Invalid JSON"})))}return s&&!(s==null?void 0:s.route)&&(s.route=r.route,s.block=!0),s});this._subscribe=(...r)=>re(this,[...r],function*(e={}){let n=()=>new Promise(i=>re(this,null,function*(){var a;let o=(a=e.protocol)!=null?a:this.type;(o?[this.clients[o]]:Object.values(this.clients)).forEach(l=>re(this,null,function*(){var h;if(l&&e.force||(l==null?void 0:l.status)===!0&&(l==null?void 0:l.serviceType)==="subscription"){let g=`${(h=this.link.services.available[l==null?void 0:l.service])!=null?h:l.name.toLowerCase()}/subscribe`;if(l.setEndpoint(this.link),!this.connection){let p=this.type==="http"||this.type==="websocket"?new URL(g,this.target):this.target,w=yield l.add(this.credentials,p.href);this.router&&l.addResponse("router",b=>{let N=typeof b=="string"?JSON.parse(b):b;Object.values(this.responses).forEach(O=>{O(N)}),this.router&&this.router.handleLocalRoute(N)}),this.connection={service:l,credentials:this.credentials,protocol:l.name}}this.type==="webrtc"&&(e.routes=[this.target]);let m=yield this.link.send(g,Object.assign({route:e.route,message:e.message,protocol:e.protocol},{message:[e.routes,this.credentials.id]}));i(this.connection);return}})),this.services.queue[o]||(this.services.queue[o]=[]),this.services.queue[o].push(()=>re(this,null,function*(){let l=yield n();i(l)}))}));return yield n()});this.subscribe=e=>{if(e){let r=nn("response");return this.responses[r]=e,r}};this.unsubscribe=e=>{e?delete this.responses[e]:this.responses={}};let i,o;typeof e=="object"?e instanceof URL?i=e:(i=e.target,o=e.type,this.link=e.link,this.setCredentials(e.credentials)):i=e,o||(o="http"),this.link||(this.link=this),o==="http"||o==="websocket"?(i=i instanceof URL?i:new URL(i),this.id=i.origin):this.id=i,this.target=i,this.type=o,this.router=n,r&&(this.clients=r)}}});var sk,G0,RS=at(()=>{OS();V0();ps();$0();NS();AS();sk="DONOTSEND",G0=class{constructor(e={debug:!1}){this.id=nn();this.USERS={};this.CONNECTIONS=new Map;this.SUBSCRIPTIONS=[];this.ENDPOINTS={};this.SERVICES={};this.ROUTES={};this.INTERVAL=10;this.DEFAULTROUTES=[{route:"ping",post:()=>"pong"},{route:"services/**",get:{object:this.SERVICES,transform:(e,...r)=>{let n={};return(r.length>0?[r[0]]:Object.keys(e)).forEach(o=>{let s=e[o];(s==null?void 0:s.serviceType)==="default"&&(n[o]=s.name)}),r.forEach((o,s)=>n=n[o]),n}}},{route:"/",aliases:["routes/**"],get:{object:this.ROUTES,transform:(e,...r)=>{let n={};return(r.length>0?[r[0]]:Object.keys(e)).forEach(o=>{o&&(n[o]={route:e[o].route.split("/").filter(s=>!s.match(/\*\*?/)).join("/"),args:e[o].args,wildcard:o.includes("*")})}),r.forEach((o,s)=>n=n[o]),n}}},{route:"sendMessage",aliases:["message","sendMsg"],post:(e,r)=>e.sendMsg(r[0],r[1],r[2])},{route:"setUserServerDetails",post:(e,r,n)=>{let i=e.USERS[n];if(!i)return!1;r[0]&&(i.username=r[0]),r[1]&&(i.password=r[1]),r[2]&&(i.props=r[2]),r[3]&&(i._id=r[3],i.id=r[3])}},{route:"setProps",post:(e,r,n)=>{let i=e.USERS[n];if(!i)return!1;if(typeof r=="object"&&!Array.isArray(r))return Object.assign(i.props,r),!0;if(Array.isArray(r)&&typeof r[1]=="object"){let o=e.USERS[r[0]];return o&&Object.assign(o.props,r[1]),!0}return!1}},{route:"getProps",post:(e,r,n)=>{let i=e.USERS[n];if(!i)return!1;if(r[0]){let o=e.USERS[r[0]];if(o)return o.props}else return i.props}},{route:"blockUser",post:(e,r,n)=>{let i=e.USERS[n];return i?this.blockUser(i,r[0]):!1}},{route:"users/**",get:{object:this.USERS,transform:(e,...r)=>{let n={};return(r.length>0?[r[0]]:Object.keys(e)).forEach(o=>{let s=e[o];n[o]={_id:s._id,username:s.username,origin:s.origin,props:s.props,updatedPropNames:s.updatedPropNames,lastUpdate:s.lastUpdate,lastTransmit:s.lastTransmit,latency:s.latency}}),r.forEach((o,s)=>n=n[o]),n}}},{route:"getUser",post:(e,r,n)=>{let i=e.USERS[n];if(!i)return!1;if(r[0]){let o=this.USERS[r[0]];if(o)return{_id:o._id,username:o.username,origin:o.origin,props:o.props,updatedPropNames:o.updatedPropNames,lastUpdate:o.lastUpdate,lastTransmit:o.lastTransmit,latency:o.latency}}else return{_id:i._id,username:i.username,origin:i.origin,props:i.props,updatedPropNames:i.updatedPropNames,lastUpdate:i.lastUpdate,lastTransmit:i.lastTransmit,latency:i.latency}}},{route:"login",aliases:["addUser","startSession"],post:(e,r,n)=>re(this,null,function*(){console.log("logging in",r);let i=yield e.addUser(r[0]);return{message:i,id:i.origin}})},{route:"logout",aliases:["removeUser","endSession"],post:(e,r,n)=>{let i=e.USERS[n];if(!i)return!1;r[0]?e.removeUser(...r):e.removeUser(i)}}];this.protocols={};this.connect=(e,r)=>{let n=new J0(e,this.SERVICES,this);return this.ENDPOINTS[n.id]=n,n.check().then(i=>{i&&(r&&r(n),this.login(n,n.credentials))}),n};this.disconnect=e=>re(this,null,function*(){this.logout(this.ENDPOINTS[e]),delete this.ENDPOINTS[e]});this._loadBackend=(e,r=e.name)=>{var n;this.SERVICES[r]=e,this.SERVICES[r].status=!0,(n=e.routes)==null||n.forEach(i=>this.addRoute(Object.assign({service:r},i))),e.subscribe&&e.subscribe((i,o,s)=>re(this,null,function*(){let a=yield this.handleMessage(i,o);if(s==null?void 0:s.includes("worker"))if(a!==null&&e[s])e[s].postMessage({route:"worker/workerPost",message:a,origin:e.id,callbackId:i.callbackId});else return a;return a})),(e==null?void 0:e.serviceType)==="subscription"&&this.SUBSCRIPTIONS.push(e.updateSubscribers)};this._loadService=(n,...i)=>re(this,[n,...i],function*(e,r=e==null?void 0:e.name){return this._loadBackend(e,r),yield this._loadClient(e,r,!0)});this._loadClient=(e,r,n=!1)=>new Promise(i=>{let o=e.name;if(e.subscribe&&e.subscribe((s,a)=>re(this,null,function*(){var m;let l=this.SERVICES[o],h=l.status===!0,g;return a==="local"?g=yield this.handleLocalRoute(s):h&&(g=yield this.send({route:`${l.route}/${s.route}`,endpoint:e==null?void 0:e.endpoint},...(m=s.message)!=null?m:[])),g})),n)i(e);else{this.SERVICES[o]=e;let s=a=>{this.SERVICES[o].status=!0,e.setEndpointRoute instanceof Function&&e.setEndpointRoute(a),e.routes.forEach(l=>{this.ROUTES[`${a}/${l.route}`]=l}),i(e)};this.SERVICES[o].status===!0?s(this.SERVICES[o]):this.SERVICES[o].status=s}});this.get=(e,...r)=>this._send(e,"GET",...r);this.delete=(e,...r)=>this._send(e,"DELETE",...r);this.post=(e,...r)=>this._send(e,"POST",...r);this.send=this.post;this._send=(e,r,...n)=>re(this,null,function*(){let i;if(typeof e=="string"||(e==null?void 0:e.endpoint)==null?i=Object.values(this.ENDPOINTS)[0]:i=e.endpoint,!i)return;let o;return o=yield i.send(e,{message:n,method:r}),o&&this.handleLocalRoute(o,i),o==null?void 0:o.message});this.handleLocalRoute=(e,r,n)=>re(this,null,function*(){var i,o,s;if(r&&n&&!e.suppress&&r.connection&&((s=(o=(i=r.connection)==null?void 0:i.service)==null?void 0:o.responses)==null||s.forEach(a=>a(Object.assign({route:n},e)))),!e.block){let a=this.ROUTES[e==null?void 0:e.route];if((a==null?void 0:a.post)instanceof Function)return a.post(this,e.message,e.id)}});this.subscribe=(n,...i)=>re(this,[n,...i],function*(e,r={}){if(Object.keys(this.ENDPOINTS).length>0||(r==null?void 0:r.endpoint))return r.endpoint||(r.endpoint=Object.values(this.ENDPOINTS)[0]),yield r.endpoint._subscribe(r).then(s=>r.endpoint.subscribe(e));throw"Remote is not specified"});this.handleMessage=(e,r)=>re(this,null,function*(){var i;let n={};if(Array.isArray(e))n.route=e[0],n.message=e.slice(1),n.callbackId=void 0;else if(typeof e=="string"){let o=e.split(" ");n.route=o[0],n.message=o.slice(1),n.callbackId=void 0}else typeof e=="object"&&Object.assign(n,e);if(typeof n=="object"&&!Array.isArray(n)&&n.route!=null){console.log("runRoute",n.route);let o=yield this.runRoute(n.route,n.method,n.message,(i=n._id)!=null?i:n.id,n.callbackId);return o&&n.suppress&&(o.suppress=n.suppress),o}return null});e.interval&&(this.INTERVAL=e.interval),this.STATE=new ES({},this.INTERVAL,void 0),this.DEBUG=e==null?void 0:e.debug,"onbeforeunload"in globalThis&&(globalThis.onbeforeunload=()=>{Object.values(this.ENDPOINTS).forEach(r=>{r.type!="webrtc"&&this.logout(r)})}),this.load({routes:this.DEFAULTROUTES}),this.DEBUG&&this.runCallback("routes",[!0]),(e==null?void 0:e.endpoints)&&e.endpoints.forEach(r=>this.connect(r))}login(e,r){return re(this,null,function*(){yield this.logout(e);let n=Object.values(e?{endpoint:e}:this.ENDPOINTS);return(yield Promise.all(n.map(o=>re(this,null,function*(){let s=yield this.send({route:"login",endpoint:o},r);return console.log("Resolved from server",s[0]),o.setCredentials(s[0]),s})))).reduce((o,s)=>o*s[0],!0)===1})}logout(e){return re(this,null,function*(){return(yield Promise.all(Object.values(e?{endpoint:e}:this.ENDPOINTS).map(n=>re(this,null,function*(){return yield this.send({route:"logout",endpoint:n},n.credentials)})))).reduce((n,i)=>n*i[0],!0)===1})}load(n){return re(this,arguments,function*(e,r=e.name){let i=e.constructor.type==="client",o=!e.constructor.type||e.constructor.type==="service",s=e.constructor.type==="backend";return o&&(yield this._loadService(e,r)),s&&(yield this._loadBackend(e,r)),i&&(yield this._loadClient(e)),e})}format(e,r={}){return e!==void 0&&((!e||typeof e!="object"||!("message"in e)&&!("route"in e))&&(e={message:e}),Array.isArray(e.message)||(e.message=[e.message]),r.service&&(e==null?void 0:e.route)&&(e.route=`${r.service}/${e.route}`),r.headers&&(e.headers=r.headers)),(e==null?void 0:e.route)&&(e.route=e.route.replace(/\/\*\*?/,"")),e}runRoute(s,a){return re(this,arguments,function*(e,r,n=[],i,o){try{return e==null?void 0:(!r&&Array.isArray(n)&&(r=n.length>0?"POST":"GET"),this.DEBUG&&console.log("route",e),yield this.runCallback(e,n,i,r).then(l=>{if(this.DEBUG&&console.log("Result:",l),l!==void 0)return l=this.format(l),l.callbackId=o,this.ROUTES[l.route]&&(l.block=!0),l.message===sk?void 0:l}).catch(console.error))}catch(l){return new Error("Route failed...")}})}addUser(e={},r=lc(e)){var n,i,o;if(console.log("Trying to add",e),e){let s=this.USERS[r._id],a=s!=null?s:{id:(n=e.id)!=null?n:r.id,_id:(i=e._id)!=null?i:r._id,username:(o=e.id)!=null?o:r.id,origin:r._id,props:{},updatedPropNames:[],sessions:[],blocked:[],lastUpdate:Date.now(),lastTransmit:0,latency:0,routes:new Map};Object.assign(a,e),this.DEBUG&&console.log("Adding User, Id:",e._id,"Credentials:",r),this.USERS[r._id]=a;for(let l in this.SERVICES){let h=this.SERVICES[l];if(h.status===!0){let g=h.name+"/users";z0(g).forEach(p=>{this.ROUTES[p]&&this.runRoute(p,"POST",[a],r._id)})}}return console.log("ADDED USER",a),a}else return!1}removeUser(e){let r=typeof e=="string"?this.USERS[e]:e;return r?(Object.values(this.SERVICES).forEach(n=>{if(n.status===!0){let i=n.name+"/users";this.ROUTES[i]&&this.runRoute(i,"DELETE",[r],r.id)}}),delete r.id,!0):!1}blockUser(e,r=""){return this.USERS[r]&&!e.blocked.includes(r)&&e.id!==r?(e.blocked.push(r),!0):!1}sendMsg(e="",r="",n=void 0){let i=n?Object.assign(n,{message:r}):{message:r};if(typeof e=="string"){let o=this.USERS[e];o&&o.send(i)}else if(typeof e=="object")return e.send(i),!0;return!1}addRoute(e){e=Object.assign({},e);let r=[e.route,...e.aliases?e.aliases:[]];return delete e.aliases,r.forEach(n=>{var i,o;if(!n||!e.post&&!e.get)return!1;n=e.route=`${e.service?`${e.service}/`:""}`+n,this.removeRoute(n),n[0]==="/"&&(n=n.slice(1)),e.args=TS(e.post),this.ROUTES[n]=Object.assign(e,{route:n}),e.get&&(this.STATE.setState({[n]:(o=(i=e.get)==null?void 0:i.object)!=null?o:e.get}),this.STATE.subscribe(n,s=>{var l;let a=((l=e.get)==null?void 0:l.transform)?e.get.transform(s):s;this.SUBSCRIPTIONS.forEach(h=>h(this,{route:n,message:a}))}))}),!0}removeRoute(e){return delete this.ROUTES[e]}runCallback(e,r=[],n,i=r.length>0?"POST":"GET"){return new Promise(o=>re(this,null,function*(){let s=z0(e),a={route:e,block:!0,message:{html:kS},headers:{"Content-Type":"text/html"}};Promise.all(s.map(l=>re(this,null,function*(){var g;let h=this.ROUTES[l];if(h){this.DEBUG&&console.log("routeInfo",h);try{let m;if((h==null?void 0:h.delete)&&i.toUpperCase()==="DELETE")m=yield h.delete(this,r,n);else if(i.toUpperCase()==="GET"||!(h==null?void 0:h.post)){let p=this.STATE.data[h.route];if(p){let w=e.replace(h.route.split("/").filter(b=>b!="*"&&b!="**").join("/"),"").split("/").filter(b=>!!b);m={message:((g=h.get)==null?void 0:g.transform)?yield h.get.transform(p,...w):p}}else m=a}else(h==null?void 0:h.post)?m=yield h==null?void 0:h.post(this,r,n):m=a;o(this.format(m,h))}catch(m){console.log("Callback Failed: ",m)}}}))).then(l=>o(a))}))}checkRoutes(e){return re(this,null,function*(){var n,i;if(!e.data)return;let r=(i=(n=this.ROUTES[e.data.foo])!=null?n:this.ROUTES[e.data.route])!=null?i:this.ROUTES[e.data.functionName];return r||(r=this.ROUTES[e.data.foo]),r?e.data.message?yield r.post(this,e.data.message,e.data.origin):void 0:!1})}}});var MS=Te((SA,PS)=>{var Y0=Math.floor(Math.random()*16777215),DS=Ye.index=parseInt(Math.random()*16777215,10),FS=(typeof process>"u"||typeof process.pid!="number"?Math.floor(Math.random()*1e5):process.pid)%65535,uc=function(t){return!!(t!=null&&t.constructor&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t))},LS=[];for(yr=0;yr<256;yr++)LS[yr]=(yr<=15?"0":"")+yr.toString(16);var yr,CS=new RegExp("^[0-9a-fA-F]{24}$"),Ya=[];yr=0;for(;yr<10;)Ya[48+yr]=yr++;for(;yr<16;)Ya[65-10+yr]=Ya[97-10+yr]=yr++;function Ye(t){if(!(this instanceof Ye))return new Ye(t);if(t&&(t instanceof Ye||t._bsontype==="ObjectID"))return t;if(this._bsontype="ObjectID",t==null||typeof t=="number"){this.id=this.generate(t);return}var e=Ye.isValid(t);if(!e&&t!=null)throw new Error("Argument passed in must be a single String of 12 bytes or a string of 24 hex characters");if(e&&typeof t=="string"&&t.length===24)return Ye.createFromHexString(t);if(t!=null&&t.length===12)this.id=t;else{if(t!=null&&typeof t.toHexString=="function")return t;throw new Error("Argument passed in must be a single String of 12 bytes or a string of 24 hex characters")}}PS.exports=Ye;Ye.default=Ye;Ye.createFromTime=function(t){return t=parseInt(t,10)%4294967295,new Ye(lk(8,t)+"0000000000000000")};Ye.createFromHexString=function(t){if(typeof t>"u"||t!=null&&t.length!==24)throw new Error("Argument passed in must be a single String of 12 bytes or a string of 24 hex characters");for(var e="",r=0;r<24;)e+=String.fromCharCode(Ya[t.charCodeAt(r++)]<<4|Ya[t.charCodeAt(r++)]);return new Ye(e)};Ye.isValid=function(t){return t==null?!1:typeof t=="number"?!0:typeof t=="string"?t.length===12||t.length===24&&CS.test(t):t instanceof Ye||uc(t)?!0:typeof t.toHexString=="function"&&(t.id instanceof _Buffer||typeof t.id=="string")?t.id.length===12||t.id.length===24&&CS.test(t.id):!1};Ye.prototype={constructor:Ye,toHexString:function(){if(!this.id||!this.id.length)throw new Error("invalid ObjectId, ObjectId.id must be either a string or a Buffer, but is ["+JSON.stringify(this.id)+"]");if(this.id.length===24)return this.id;if(uc(this.id))return this.id.toString("hex");for(var t="",e=0;e<this.id.length;e++)t+=LS[this.id.charCodeAt(e)];return t},equals:function(t){return t instanceof Ye?this.toString()===t.toString():typeof t=="string"&&Ye.isValid(t)&&t.length===12&&uc(this.id)?t===this.id.toString("binary"):typeof t=="string"&&Ye.isValid(t)&&t.length===24?t.toLowerCase()===this.toHexString():typeof t=="string"&&Ye.isValid(t)&&t.length===12?t===this.id:t!=null&&(t instanceof Ye||t.toHexString)?t.toHexString()===this.toHexString():!1},getTimestamp:function(){var t=new Date,e;return uc(this.id)?e=this.id[3]|this.id[2]<<8|this.id[1]<<16|this.id[0]<<24:e=this.id.charCodeAt(3)|this.id.charCodeAt(2)<<8|this.id.charCodeAt(1)<<16|this.id.charCodeAt(0)<<24,t.setTime(Math.floor(e)*1e3),t},generate:function(t){typeof t!="number"&&(t=~~(Date.now()/1e3)),t=parseInt(t,10)%4294967295;var e=ak();return String.fromCharCode(t>>24&255,t>>16&255,t>>8&255,t&255,Y0>>16&255,Y0>>8&255,Y0&255,FS>>8&255,FS&255,e>>16&255,e>>8&255,e&255)}};function ak(){return DS=(DS+1)%16777215}function lk(t,e){return e=e.toString(16),e.length===t?e:"00000000".substring(e.length,t)+e}var uk=Symbol&&Symbol.for&&Symbol.for("nodejs.util.inspect.custom")||"inspect";Ye.prototype[uk]=function(){return"ObjectID("+this+")"};Ye.prototype.toJSON=Ye.prototype.toHexString;Ye.prototype.toString=Ye.prototype.toHexString});var jS,K0,US=at(()=>{ps();K0=class{constructor(e){this.id=nn("service");this.name="service";this.callbacks=new Map;this.status=!1;this.serviceType="default";this.routes=[];this.delegate=(jS=globalThis==null?void 0:globalThis.document)==null?void 0:jS.createDocumentFragment();this.protocols={};this.services={};this.setEndpointRoute=e=>{this.route=e};this.notify=(e,r,n)=>re(this,null,function*(){let i=[];return yield Promise.all(Array.from(this.callbacks).map((o,s)=>re(this,null,function*(){let a=yield o[1](e,r,n);a&&!(a instanceof Error)&&i.push(a)}))),i==null?void 0:i[0]});this.setEndpoint=e=>{this.endpoint=e};this.subscribe=e=>{if(e instanceof Function){let r=nn();return this.callbacks.set(r,e),r}else return};this.unsubscribe=e=>this.callbacks.delete(e);this.router=e}addEventListener(...e){var r;(r=this.delegate)==null||r.addEventListener.apply(this.delegate,e)}dispatchEvent(...e){var r;return(r=this.delegate)==null?void 0:r.dispatchEvent.apply(this.delegate,e)}removeEventListener(...e){var r;return(r=this.delegate)==null?void 0:r.removeEventListener.apply(this.delegate,e)}}});var BS,Pt,ck,zS,VS,WS=at(()=>{BS=At(MS());US();ps();Pt=t=>typeof t=="string"&&t.length===24?(0,BS.default)(t):t,ck=["user","group","authorization","discussion","chatroom","comment","dataInstance","event","notification","schedule","date"],zS=class extends K0{constructor(e,r={},n=!1){super(e);this.name="structs";this.collections={};this.debug=!1;this.wipeDB=()=>re(this,null,function*(){return yield Promise.all(Object.values(this.collections).map(e=>e.instance.deleteMany({}))),!0});this.db=r==null?void 0:r.db,this.debug=n,this.mode=this.db&&r.mode?r.mode:"local",r.collections||(r.collections={}),ck.forEach(i=>{r.collections[i]||(r.collections[i]=this.db?{instance:this.db.collection(i)}:{},r.collections[i].reference={})}),this.collections=r.collections,this.routes=[{route:"getUser",post:(i,o,s)=>re(this,null,function*(){let a=i.USERS[s];if(this.debug&&console.log("getUser origin",s,o,"user found:",a),!a)return!1;let l;if(this.mode==="mongo")l=yield this.getMongoUser(a,o[0]);else{let h=this.getLocalData("user",{_id:o[0]});if(!h)l={user:{}};else if(yield this.checkAuthorization(a,h)){let m=this.getLocalData("group",{ownerId:o[0]}),p=this.getLocalData("authorization",{ownerId:o[0]});l={user:h,groups:m,authorizations:p}}else l={user:{}}}return this.debug&&console.log("getUser:",a,o[0],l),l})},{route:"setUser",aliases:["addUser"],post:(i,o,s)=>re(this,null,function*(){let a=i.USERS[s];if(!a)return!1;let l;if(this.mode==="mongo")l=yield this.setMongoUser(a,o[0]);else return(yield this.checkAuthorization(a,o[0],"WRITE"))&&this.setLocalData(o[0]),!0;return this.debug&&console.log("setUser",a,o[0],l),l})},{route:"getUsersByIds",post:(i,o,s)=>re(this,null,function*(){let a=i.USERS[s];if(!a)return!1;let l;if(this.mode==="mongo")l=yield this.getMongoUsersByIds(a,o[0]);else if(l=[],Array.isArray(o[0])){let h=this.getLocalData("user",{_id:o[0]});h&&l.push(h)}return this.debug&&console.log("getUserByIds:",a,o[0],l),l})},{route:"getUsersByRoles",post:(i,o,s)=>re(this,null,function*(){let a=i.USERS[s];if(!a)return!1;let l;if(this.mode.includes("mongo"))l=yield this.getMongoUsersByRoles(a,o[0]);else{let h=this.getLocalData("user");l=[],h.forEach(g=>{var m;((m=g.userRoles)==null?void 0:m.includes(o[0]))&&l.push(g)})}return this.debug&&console.log("getUserByRoles",a,o[0],l),l})},{route:"deleteUser",aliases:["removeUser"],post:(i,o,s)=>re(this,null,function*(){let a=i.USERS[s];if(!a)return!1;let l;if(this.mode==="mongo")l=yield this.deleteMongoUser(a,o[0]);else{l=!1;let h=this.getLocalData(o[0]);h&&this.checkAuthorization(a,h,"WRITE")&&(l=this.deleteLocalData(h))}return this.debug&&console.log("deleteUser:",a,o[0],l),l})},{route:"setData",aliases:["setMongoData"],post:(i,o,s)=>re(this,null,function*(){let a=i.USERS[s];if(!a)return!1;let l;if(this.mode.includes("mongo"))l=yield this.setMongoData(a,o);else{let h=[];return l=[],yield Promise.all(o.map(g=>re(this,null,function*(){let m=this.getLocalData(g);(yield this.checkAuthorization(a,m,"WRITE"))&&(this.setLocalData(m),l.push(m),m.structType!=="notification"&&h.push(m))}))),h.length>0&&this.checkToNotify(a,h,this.mode),this.debug&&console.log("setData:",a,o,l),!0}return this.debug&&console.log("setData:",a,o,l),l})},{route:"getData",aliases:["getMongoData","getUserData"],post:(i,o,s)=>re(this,null,function*(){let a=i.USERS[s];if(!a)return!1;let l;if(this.mode.includes("mongo"))l=yield this.getMongoData(a,o[0],o[1],o[2],o[4],o[5]);else{l=[];let h;o[0]&&(h=this.getLocalData(o[0])),h&&o[1]&&(h=h.filter(g=>{if(g.ownerId===o[1])return!0})),h&&(yield Promise.all(h.map(g=>re(this,null,function*(){let m=this.getLocalData(g._id);(yield this.checkAuthorization(a,m))&&l.push(m)}))))}return this.debug&&console.log("getData:",a,o,l),l})},{route:"getDataByIds",aliases:["getMongoDataByIds","getUserDataByIds"],post:(i,o,s)=>re(this,null,function*(){let a=i.USERS[s];if(!a)return!1;let l;if(this.mode.includes("mongo"))l=yield this.getMongoDataByIds(a,o[0],o[1],o[2]);else{l=[];let h;o[2]&&(h=this.getLocalData(o[2])),h&&o[1]&&(h=h.filter(g=>{if(g.ownerId===o[1])return!0})),h&&(yield Promise.all(h.map(g=>re(this,null,function*(){let m=this.getLocalData(g._id);(yield this.checkAuthorization(a,m))&&l.push(m)}))))}return this.debug&&console.log("getDataByIds:",a,o,l),l})},{route:"getAllData",post:(i,o,s)=>re(this,null,function*(){let a=i.USERS[s];if(!a)return!1;let l;if(this.mode.includes("mongo"))l=yield this.getAllUserMongoData(a,o[0],o[1]);else{let h=this.getLocalData(void 0,{ownerId:o[0]});l=[],yield Promise.all(h.map(g=>re(this,null,function*(){o[1]?o[1].indexOf(g.structType)<0&&(yield this.checkAuthorization(a,g))&&l.push(g):(yield this.checkAuthorization(a,g))&&l.push(g)})))}return this.debug&&console.log("getAllData:",a,o,l),l})},{route:"deleteData",post:(i,o,s)=>re(this,null,function*(){let a=i.USERS[s];if(!a)return!1;let l;return this.mode.includes("mongo")?l=yield this.deleteMongoData(a,o):(l=!1,yield Promise.all(o.map(h=>re(this,null,function*(){let g=this.getLocalData(h);(yield this.checkAuthorization(a,g,"WRITE"))&&this.deleteLocalData(g),l=!0})))),this.debug&&console.log("deleteData:",a,o,l),l})},{route:"getGroup",aliases:["getGroups"],post:(i,o,s)=>re(this,null,function*(){let a=i.USERS[s];if(!a)return!1;let l;if(this.mode.includes("mongo"))l=yield this.getMongoGroups(a,o[0],o[1]);else if(typeof o[1]=="string")l=this.getLocalData("group",{_id:o[1]});else{l=[];let h=this.getLocalData("group");o[0]?h.forEach(g=>{g.users.includes(o[0])&&l.push(g)}):h.forEach(g=>{g.users.includes(a._id)&&l.push(g)})}return this.debug&&console.log("getGroups:",a,o,l),l})},{route:"setGroup",post:(i,o,s)=>re(this,null,function*(){let a=i.USERS[s];if(!a)return!1;let l=yield this.setGroup(a,o[0],this.mode);this.debug&&console.log("setGroup:",a,o,l)})},{route:"deleteGroup",post:(i,o,s)=>re(this,null,function*(){let a=i.USERS[s];if(!a)return!1;let l;if(this.mode.includes("mongo"))l=yield this.deleteMongoGroup(a,o[0]);else{let h=this.getLocalData("group",o[0]),g=!1;h&&(g=yield this.checkAuthorization(a,h,"WRITE")),g&&(l=!0)}return this.debug&&console.log("deleteGroup:",a,o,l),l})},{route:"setAuth",post:(i,o,s)=>re(this,null,function*(){let a=i.USERS[s];if(!a)return!1;let l=yield this.setAuthorization(a,o[0],this.mode);return this.debug&&console.log("deleteGroup:",a,o,l),l})},{route:"getAuths",post:(i,o,s)=>re(this,null,function*(){let a=i.USERS[s];if(!a)return!1;let l;if(this.mode.includes("mongo"))l=yield this.getMongoAuthorizations(a,o[0],o[1]);else if(o[1]){let h=this.getLocalData("authorization",{_id:o[1]});h&&(l=[h])}else l=this.getLocalData("authorization",{ownerId:o[0]});return this.debug&&console.log("deleteGroup:",a,o,l),l})},{route:"deleteAuth",post:(i,o,s)=>re(this,null,function*(){let a=i.USERS[s];if(!a)return!1;let l;if(this.mode.includes("mongo"))l=yield this.deleteMongoAuthorization(a,o[0]);else{l=!0;let h=this.getLocalData("authorization",{_id:o[0]});h&&this.checkAuthorization(a,h,"WRITE")&&(l=this.deleteLocalData(h))}return this.debug&&console.log("deleteGroup:",a,o,l),l})}]}notificationStruct(e={}){let r="notification";return{structType:r,timestamp:Date.now(),id:nn(r),note:"",ownerId:"",parentUserId:"",parent:{structType:e==null?void 0:e.structType,_id:e==null?void 0:e._id}}}checkToNotify(i){return re(this,arguments,function*(e,r=[],n=this.mode){if(typeof e=="string")for(let a in this.router.USERS){let l=this.router.USERS[a];l._id===e&&(e=l)}if(typeof e=="string"||e==null)return!1;let o={},s=[];if(r.forEach(a=>re(this,null,function*(){if((e==null?void 0:e._id)!==a.ownerId){let l=this.notificationStruct(a);l.id="notification_"+a._id,l.ownerId=a.ownerId,l.note=a.structType,l.parentUserId=a.ownerId,s.push(l),o[a.ownerId]=a.ownerId}if(a.users)a.users.forEach(l=>{if(l!==e._id){let h=this.notificationStruct(a);h.id="notification_"+a._id,h.ownerId=l,h.note=a.structType,h.parentUserId=a.ownerId,s.push(h),o[l]=l}});else{let l=[];if(n==="mongo"){let h=this.collections.authorizations.instance.find({$or:[{authorizedId:e._id},{authorizerId:e._id}]});(yield h.count())>0&&(yield h.forEach(g=>l.push(g)))}else l=this.getLocalData("authorization",{authorizedId:e._id}),l.push(...this.getLocalData("authorization",{authorizerId:e._id}));l.length>0&&l.forEach(h=>{if(a.authorizerId===a.ownerId&&!o[a.authorizedId]&&h.status==="OKAY"&&h.authorizations.indexOf("peer")>-1){let g=this.notificationStruct(a);g.ownerId=h.authorizedId,g.id="notification_"+a._id,g.note=a.structType,g.parentUserId=a.ownerId,s.push(g),o[g.ownerId]=g.ownerId}})}})),s.length>0){n==="mongo"?yield this.setMongoData(e,s):this.setLocalData(s);for(let a in o)this.router.sendMsg(a,"notifications",!0);return!0}else return!1})}setMongoData(n){return re(this,arguments,function*(e,r=[]){let i=!1;if(r.length>0){let o=!0,s="";if(yield Promise.all(r.map(a=>re(this,null,function*(){if(((e==null?void 0:e._id)!==a.ownerId||e._id===a.ownerId&&e.userRoles.includes("admin_control"))&&s!==a.ownerId&&(o=yield this.checkAuthorization(e,a,"WRITE"),s=a.ownerId),o){let l=JSON.parse(JSON.stringify(a));l._id&&delete l._id,a.id?a.id.includes("defaultId")?(yield this.db.collection(a.structType).insertOne(l),i=!0):yield this.db.collection(a.structType).updateOne({id:a.id},{$set:l},{upsert:!0}):a._id&&(a._id.includes("defaultId")?(yield this.db.collection(a.structType).insertOne(l),i=!0):yield this.db.collection(a.structType).updateOne({_id:Pt(a._id)},{$set:l},{upsert:!1}))}}))),i===!0){let a=[];return yield Promise.all(r.map((l,h)=>re(this,null,function*(){let g=JSON.parse(JSON.stringify(l));if(g._id&&delete g._id,l.structType!=="comment"){let m;l.structType!=="notification"&&(m=yield this.db.collection(g.structType).findOne(g)),m&&(m._id=m._id.toString(),a.push(m))}else if(l.structType==="comment"){let m=l,p=JSON.parse(JSON.stringify(m));p._id&&delete p._id;let w=yield this.db.collection("comment").findOne(p),b=m.replyTo,N=r.find(O=>{if(O._id===b)return!0});if(N){let O=JSON.parse(JSON.stringify(N));O._id&&delete O._id;let I;if(yield Promise.all(["discussion","chatroom","comment"].map(D=>re(this,null,function*(){let G=yield this.db.collection(D).findOne({_id:Pt(b)});G&&(I=G)}))),I){let D=m.parent._id,G,q;if(D!==b?(G=r.find(C=>{if(C._id===D)return!0}),G&&(delete G._id,yield Promise.all(["discussion","chatroom"].map(C=>re(this,null,function*(){let z=yield this.db.collection(C).findOne(G);z&&(q=z)}))))):q=I,I){let C=I.replies.indexOf(m._id);C>-1&&(I.replies[C]=w._id.toString(),w.replyTo=I._id.toString())}if(q){let C=q.comments.indexOf(m._id);C>-1&&(q.comments[C]=w._id.toString(),w.parent._id=q._id.toString())}let J=[w,I];q._id.toString()!==I._id.toString()&&J.push(q),yield Promise.all(J.map(C=>re(this,null,function*(){let z=JSON.parse(JSON.stringify(C));delete z._id,yield this.db.collection(C.structType).updateOne({_id:Pt(C._id)},{$set:z},{upsert:!1})}))),[...a].reverse().forEach((C,z)=>{J.find(S=>{if(C._id.toString()===S._id.toString())return!0})&&a.splice(a.length-z-1,1)}),a.push(...J)}}else w&&a.push(w)}}))),this.checkToNotify(e,a),a}else{let a=[];return r.forEach(l=>{l.structType!=="notification"&&a.push(l)}),this.checkToNotify(e,a),!0}}else return!1})}setMongoUser(e,r){return re(this,null,function*(){if(r._id){if((e._id!==r.ownerId||e._id===r.ownerId&&e.userRoles.includes("admin_control"))&&!(yield this.checkAuthorization(e,r,"WRITE")))return!1;let n=JSON.parse(JSON.stringify(r));n._id&&delete n._id,this.router.DEBUG&&console.log("RETURNS PROFILE",r);let i=Pt(r._id),o=i!==r._id?{_id:i}:{id:r.id};return yield this.collections.users.instance.updateOne(o,{$set:n},{upsert:!0}),e=yield this.collections.users.instance.findOne(o),this.checkToNotify(e,[r]),e}else return!1})}setGroup(i){return re(this,arguments,function*(e,r={},n=this.mode){if(r._id){let o;if(n==="mongo"?o=yield this.collections.groups.instance.findOne({name:r.name}):o=this.getLocalData("group",{_id:r._id}),o&&(o.ownerId!==r.ownerId||r.admins.indexOf(e._id)<0)||e._id!==r.ownerId&&!(yield this.checkAuthorization(e,r,"WRITE")))return!1;let s=[];r.users.forEach(w=>{s.push({email:w},{id:w},{username:w})});let a=[],l=[];if(n==="mongo"){let w=this.collections.users.instance.find({$or:s});(yield w.count())>0&&(yield w.forEach(b=>{a.push(b),l.push(b._id)}))}else s.forEach(w=>{let b=this.getLocalData("user",w);b.length>0&&(a.push(b[0]),l.push(b[0]._id))});r.users=l;let h=[],g=[],m=[];a.forEach(w=>{r.admins.find((b,N)=>{if(b===w._id||b===w.email||b===w.username||w._id===r.ownerId)return h.indexOf(w._id<0)&&h.push(w._id),!0}),r.peers.find((b,N)=>{if(b===w._id||b===w.email||b===w.username)return g.indexOf(w._id<0)&&g.push(w._id),!0}),r.clients.find((b,N)=>{if(b===w._id||b===w.email||b===w.username)return m.indexOf(w._id<0)&&m.push(w._id),!0})}),r.admins=h,r.peers=g,r.clients=m;let p=JSON.parse(JSON.stringify(r));return p._id&&delete p._id,n==="mongo"?r._id.includes("defaultId")?yield this.db.collection(r.structType).insertOne(p):yield this.collections.groups.instance.updateOne({_id:Pt(r._id)},{$set:p},{upsert:!0}):this.setLocalData(r),this.checkToNotify(e,[r],this.mode),r}else return!1})}getMongoUser(e,r="",n=!1){return re(this,null,function*(){return new Promise(i=>re(this,null,function*(){let o=[{email:r},{id:r},{username:r}];try{o.push({_id:Pt(r)})}catch(a){}let s=yield this.collections.users.instance.findOne({$or:o});if(!s||s==null)i({});else if(!s._id&&s._id?s._id=s._id.toString():!s._id&&s._id&&(s._id=s._id),s.ownerId||(s.ownerId=s._id),s&&n===!1){(e._id!==s._id||e._id===s._id&&e.userRoles.includes("admin_control"))&&((yield this.checkAuthorization(e,s))||i(void 0));let a=[],l=this.collections.authorizations.instance.find({ownerId:s._id});(yield l.count())>0&&(yield l.forEach(m=>a.push(m)));let h=this.collections.groups.instance.find({users:{$all:[s._id]}}),g=[];(yield h.count())>0&&(yield h.forEach(m=>g.push(m))),s.authorizations=a,s.groups=g,i(s)}else i(s)}))})}getMongoUsersByIds(){return re(this,arguments,function*(e={},r=[]){let n=[];r.forEach(o=>{try{n.push({_id:Pt(o)})}catch(s){}});let i=[];if(n.length>0){let o=this.collections.users.instance.find({$or:n});(yield o.count())>0&&(yield o.forEach(s=>{i.push(s)}))}return i})}getMongoUsersByRoles(){return re(this,arguments,function*(e={},r=[]){let n=this.collections.users.instance.find({userRoles:{$all:r}}),i=[];return(yield n.count())>0&&(yield n.forEach(o=>{i.push(o)})),i})}getMongoDataByIds(e,r,n,i){return re(this,null,function*(){if(r.length>0){let o=[];r.forEach(a=>{let l={_id:a};n&&(l.ownerId=n),o.push(l)});let s=[];if(!i)yield Promise.all(Object.keys(this.collections).map(a=>re(this,null,function*(){let l=yield this.db.collection(a).find({$or:o});if((yield l.count())>0){let h=!0,g="";yield l.forEach(m=>re(this,null,function*(){(e._id!==m.ownerId||e._id===m.ownerId&&e.userRoles.includes("admincontrol"))&&g!==m.ownerId&&(h=yield this.checkAuthorization(e,m),g=m.ownerId),h&&s.push(m)}))}})));else{let a=yield this.db.collection(i).find({$or:o});if((yield a.count())>0){let l=!0,h="";yield a.forEach(g=>re(this,null,function*(){(e._id!==g.ownerId||e._id===g.ownerId&&e.userRoles.includes("admincontrol"))&&h!==g.ownerId&&(l=yield this.checkAuthorization(e,g),h=g.ownerId),l&&s.push(g)}))}}return s}})}getMongoData(a,l,h){return re(this,arguments,function*(e,r,n,i={},o=0,s=0){n||(n=i==null?void 0:i.ownerId),i._id&&(i._id=Pt(i._id));let g=[],m=!0,p="";if(!r&&!n&&!i)return[];if(!r&&n&&Object.keys(i).length===0)return yield this.getAllUserMongoData(e,n);if(!i&&n){let w=this.db.collection(r).find({ownerId:n}).sort({$natural:-1}).skip(s);o>0&&w.limit(o),(yield w.count())>0&&(yield w.forEach(b=>re(this,null,function*(){(e._id!==b.ownerId||e._id===b.ownerId&&e.userRoles.includes("admincontrol"))&&p!==b.ownerId&&(m=yield this.checkAuthorization(e,b),p=b.ownerId),m===!0&&g.push(b)})))}else if(Object.keys(i).length>0&&n){let w=yield this.db.collection(r).findOne(kl({ownerId:n},i));w&&g.push(w)}else Object.keys(i).length>0&&!n&&(yield Promise.all(Object.keys(this.collections).map(w=>re(this,null,function*(){let b=yield this.db.collection(w).findOne(i);if(b){(e._id!==b.ownerId||e._id===b.ownerId&&e.userRoles.includes("admincontrol"))&&p!==b.ownerId&&(m=yield this.checkAuthorization(e,b),p=b.ownerId),g.push(b);return}}))));return m?g:[]})}getAllUserMongoData(i,o){return re(this,arguments,function*(e,r,n=[]){let s=[],a=!0,l="";return yield Promise.all(Object.keys(this.collections).map((h,g)=>re(this,null,function*(){if(a&&n.indexOf(h)<0){let m=this.db.collection(h).find({ownerId:r}),p=yield m.count();for(let w=0;w<p;w++){let b=yield m.next();(e._id!==r||e._id===r&&e.userRoles.includes("admincontrol"))&&l!==r&&(a=yield this.checkAuthorization(e,b),l=r),a&&s.push(b)}}}))),a?s:[]})}getMongoDataByRefs(n){return re(this,arguments,function*(e,r=[]){let i=[];if(i.length>0){let o="";r.forEach(s=>re(this,null,function*(){if(s.structType&&s._id){let a=yield this.db.collection(s.structType).findOne({_id:Pt(s._id)});if(a){let l=!0;if((e._id!==a.ownerId||e._id===a.ownerId&&e.userRoles.includes("admincontrol"))&&o!==a.ownerId){let h=yield this.checkAuthorization(e,a);o=a.ownerId}l===!0&&i.push(a)}}}))}return i})}getMongoAuthorizations(i){return re(this,arguments,function*(e,r=e._id,n=""){let o=[];if(n.length===0){let s=this.collections.authorizations.instance.find({ownerId:r});(yield s.count)>0&&(yield s.forEach(a=>{o.push(a)}))}else o.push(yield this.collections.authorizations.instance.findOne({_id:Pt(n),ownerId:r}));if(!(e._id!==o[0].ownerId&&!(yield this.checkAuthorization(e,o[0]))))return o})}getMongoGroups(i){return re(this,arguments,function*(e,r=e._id,n=""){let o=[];if(n.length===0){let s=this.collections.groups.instance.find({users:{$all:[r]}});(yield s.count)>0&&(yield s.forEach(a=>{o.push(a)}))}else try{o.push(yield this.collections.groups.instance.findOne({_id:Pt(n),users:{$all:[r]}}))}catch(s){}return o})}deleteMongoData(n){return re(this,arguments,function*(e,r=[]){let i=[];yield Promise.all(r.map(s=>re(this,null,function*(){try{let a=Pt(s._id),l=yield this.db.collection(s.structType).findOne({_id:a});if(l){i.push(l);let h=yield this.collections.notifications.instance.find({parent:{structType:s.structType,id:s._id}}),g=yield h.count();for(let m=0;m<g;m++){let p=yield h.next();p&&i.push(p)}}}catch(a){}})));let o="";return yield Promise.all(i.map((s,a)=>re(this,null,function*(){var h;let l=!0;(s.ownerId!==e._id||e._id===s.ownerId&&((h=e.userRoles)==null?void 0:h.includes("admincontrol")))&&s.ownerId!==o&&(o=s.ownerId,l=yield this.checkAuthorization(e,s,"WRITE")),l&&(yield this.db.collection(s.structType).deleteOne({_id:Pt(s._id)}),s.users&&s.users.forEach(g=>{g!==e._id&&g!==s.ownerId&&this.router.sendMsg(g,"deleted",s._id)}),s.ownerId!==e._id&&this.router.sendMsg(s.ownerId,"deleted",s._id))}))),!0})}deleteMongoUser(e,r){return re(this,null,function*(){if(e._id!==r||e._id===r&&e.userRoles.includes("admincontrol")){let n=yield this.collections.users.instance.findOne({id:r});if(!(yield this.checkAuthorization(e,n,"WRITE")))return!1}return yield this.collections.users.instance.deleteOne({id:r}),e._id!==r&&this.router.sendMsg(r,"deleted",r),!0})}deleteMongoGroup(e,r){return re(this,null,function*(){let n=yield this.collections.groups.instance.findOne({_id:Pt(r)});return n?(e._id!==n.ownerId||e._id===n.ownerId&&e.userRoles.includes("admincontrol"))&&!(yield this.checkAuthorization(e,n,"WRITE"))?!1:(n.users&&n.users.forEach(i=>{this.router.sendMsg(n.authorizerId,"deleted",n._id)}),yield this.collections.groups.instance.deleteOne({_id:Pt(r)}),!0):!1})}deleteMongoAuthorization(e,r){return re(this,null,function*(){let n=yield this.collections.authorizations.instance.findOne({_id:Pt(r)});return n?(e._id!==n.ownerId||e._id===n.ownerId&&e.userRoles.includes("admincontrol"))&&!(yield this.checkAuthorization(e,n,"WRITE"))?!1:(n.associatedAuthId&&(this.router.DEBUG&&console.log(n),yield this.collections.authorizations.instance.deleteOne({_id:Pt(n.associatedAuthId)}),n.authorizerId!==e._id?this.router.sendMsg(n.authorizerId,"deleted",n._id):n.authorizedId!==e._id&&this.router.sendMsg(n.authorizedId,"deleted",n._id)),yield this.collections.authorizations.instance.deleteOne({_id:Pt(r)}),!0):!1})}setAuthorization(i,o){return re(this,arguments,function*(e,r,n=this.mode){let s,a;if(n==="mongo"?(s=yield this.getMongoUser(e,r.authorizedId,!0),a=yield this.getMongoUser(e,r.authorizerId,!0)):(s=this.getLocalData("user",{_id:r.authorizedId}),a=this.getLocalData("user",{_id:r.authorizedId})),!s||!a||(r.authorizedId!==s._id&&(r.authorizedId=s._id),r.authorizerId!==a._id&&(r.authorizerId=a._id),r.authorizedName||(s.username?r.authorizedName=s.username:s.email&&(r.authorizedName=s.email)),r.authorizerName||(s.username?r.authorizerName=s.username:s.email&&(r.authorizerName=s.email)),(e._id!==r.ownerId||e._id===r.ownerId&&e.userRoles.includes("admincontrol"))&&e._id!==r.authorizedId&&e._id!==r.authorizerId&&!(yield this.checkAuthorization(e,r,"WRITE"))))return!1;let l=[];if(n==="mongo"){let m=this.collections.authorizations.instance.find({$and:[{authorizedId:r.authorizedId},{authorizerId:r.authorizerId}]});(yield m.count())>0&&(yield m.forEach(p=>l.push(p)))}else{let m=this.getLocalData("authorization",{authorizedId:r.authorizedId});Array.isArray(m)&&m.forEach(p=>{p.authorizerId===r.authorizerId&&l.push(p)})}let h;Array.isArray(l)&&l.forEach(m=>re(this,null,function*(){if(m.ownerId!==e._id){r.authorizerId===e._id?(m.authorizations=r.authorizations,m.structIds=r.structIds,m.excluded=r.excluded,m.expires=r.expires,m.status="OKAY",r.status="OKAY"):(r.authorizations=m.authorizations,r.structIds=m.structIds,r.excluded=m.excluded,r.expires=m.expires,m.status="OKAY",r.status="OKAY"),r.associatedAuthId=m._id.toString(),m.associatedAuthId=r._id.toString(),h=m;let p=JSON.parse(JSON.stringify(m));this.mode.includes("mongo")?(delete p._id,yield this.collections.authorizations.instance.updateOne({$and:[{authorizedId:r.authorizedId},{authorizerId:r.authorizerId},{ownerId:m.ownerId}]},{$set:p},{upsert:!0})):this.setLocalData(p)}}));let g=JSON.parse(JSON.stringify(r));if(n==="mongo"?(delete g._id,yield this.collections.authorizations.instance.updateOne({$and:[{authorizedId:r.authorizedId},{authorizerId:r.authorizerId},{ownerId:r.ownerId}]},{$set:g},{upsert:!0})):this.setLocalData(g),r._id.includes("defaultId")&&n==="mongo"){let m=yield this.collections.authorizations.instance.findOne(g);if(m&&(r._id=m._id.toString(),h)){let p=yield this.collections.authorizations.instance.findOne({$and:[{authorizedId:h.authorizedId},{authorizerId:h.authorizerId},{ownerId:h.ownerId}]});p&&(p.associatedAuthId=r._id,delete p._id,yield this.collections.authorizations.instance.updateOne({$and:[{authorizedId:p.authorizedId},{authorizerId:p.authorizerId},{ownerId:p.ownerId}]},{$set:p},{upsert:!0}),this.checkToNotify(e,[p]))}}return r})}checkAuthorization(o,s){return re(this,arguments,function*(e,r,n="READ",i=this.mode){var g,m,p;if(!e||!r)return!1;if(typeof e=="object"){if(r.ownerId===e._id&&!((g=e.userRoles)==null?void 0:g.includes("admin_control")))return!0}else if(typeof e=="string"){if(r.ownerId===e)return!0;e={_id:e}}let a,l;if(i==="mongo"?(a=yield this.collections.authorizations.instance.findOne({$or:[{authorizedId:e._id,authorizerId:r.ownerId,ownerId:e._id},{authorizedId:r.ownerId,authorizerId:e._id,ownerId:e._id}]}),l=yield this.collections.authorizations.instance.findOne({$or:[{authorizedId:e._id,authorizerId:r.ownerId,ownerId:r.ownerId},{authorizedId:r.ownerId,authorizerId:e._id,ownerId:r.ownerId}]})):(a=this.getLocalData("authorization",{ownerId:e._id}).find(w=>{if(w.authorizedId===e._id&&w.authorizerId===r.ownerId)return!0}),l=this.getLocalData("authorization",{ownerId:r.ownerId}).find(w=>{if(w.authorizedId===e._id&&w.authorizerId===r.ownerId)return!0})),!a||!l)return!1;let h=!1;return a.status==="OKAY"&&l.status==="OKAY"&&(r.structType==="group"?a.authorizations.indexOf(r.name+"_admin")>-1&&l.authorizations.indexOf(r.name+"_admin")>-1?h=!0:h=!1:a.authorizations.indexOf("provider")>-1&&l.authorizations.indexOf("provider")>-1||a.authorizations.indexOf("peer")>-1&&l.authorizations.indexOf("peer")>-1||a.authorizations.indexOf("control")>-1&&l.authorizations.indexOf("control")>-1||((m=a.structIds)==null?void 0:m.indexOf(r._id))>-1&&((p=l.structIds)==null?void 0:p.indexOf(r._id))>-1?h=!0:a.excluded.indexOf(r.structType)>-1&&r.ownerId===e._id&&n==="WRITE"&&(h=!1)),h})}overwriteLocalData(e){if(Array.isArray(e))e.forEach(r=>{let n=this.getLocalData(r.structType,{ownerId:r.ownerId,_id:r._id});!n||(n==null?void 0:n.length)===0?this.setLocalData(r):Object.assign(n,r)});else{let r=this.getLocalData(e.structType,{ownerId:e.ownerId,_id:e._id});!r||(r==null?void 0:r.length)===0?this.setLocalData(e):Object.assign(r,e)}}setLocalData(e){let r=n=>{var s;let i=n.structType,o=(s=this.collections[i])==null?void 0:s.reference;o||(o={},this.collections[i]||(this.collections[i]={}),this.collections[i].reference=o),o[n._id]=n};Array.isArray(e)?e.forEach(n=>{r(n)}):r(e)}getLocalData(e,r){let n,i,o;if(typeof r=="object"?(n=r.ownerId,i=Object.keys(r).filter(l=>l!="ownerId")[0],o=r[i]):o=r,!e&&!n&&!i&&!o)return[];let s=[];if(!e&&(n||i))return Object.values(this.collections).forEach(a=>{if(a=a.reference,(i==="_id"||i==="id")&&o){let l=a[o];l&&s.push(l)}else Object.values(a).forEach(l=>{i&&o?l[i]===o&&l.ownerId===n&&s.push(l):l.ownerId===n&&s.push(l)})}),s;{let a=this.collections[e].reference;if(!a)return s;if(!i&&!n)return Object.values(a).forEach(l=>{s.push(l)}),s;if((i==="_id"||i==="id")&&o)return a[o];Object.keys(a).forEach(l=>{let h=a[l];i&&o&&!n?h[i]===o&&s.push(h):n&&!i?h.ownerId===n&&s.push(h):n&&i&&o&&h.ownerId===n&&h[i]&&h[i]===o&&s.push(h)})}return s}deleteLocalData(e){if(!e)throw new Error("Struct not supplied");return!e.structType||!e._id?!1:(this.collections[e.structType]&&delete this.collections[e.structType].reference[e._id],!0)}},VS=zS});var qS,$S,HS=at(()=>{mS();RS();ps();WS();qS=class extends G0{constructor(e={},r){super(r);this.tablet=new yS;this.collections=this.tablet.collections;this.id=nn();this.baseServerCallback=e=>{let r=e;if(typeof e=="object"&&(e==null?void 0:e.structType)&&(r=[e]),Array.isArray(e)){let n=r.filter(i=>{if(i.structType!=="notification")return!0});this.tablet&&this.tablet.sortStructsIntoTable(n),r.forEach(i=>{var o;(!i.structType||i.structType==="USER")&&(i.email?i.structType="user":i.structType="uncategorized"),i.structType==="user"||i.structType==="authorization"||i.structType==="group"?(i.structType==="user"&&(i._id=i.id),this.setLocalData(i)):i.structType==="notification"?(this.getLocalData("notification",{ownerId:i.ownerId,_id:i.parent._id})?this.setLocalData(i):this.getLocalData(i.structType,{_id:i.parent._id})||this.overwriteLocalData(i),i.ownerId===((o=this.currentUser)==null?void 0:o._id)&&(i.parent.structType==="user"||i.parent.structType==="dataInstance"||i.parent.structType==="schedule"||i.parent.structType==="authorization")&&this.resolveNotifications([i],!0)):this.overwriteLocalData(i)})}(e==null?void 0:e.message)==="notifications"&&this.checkForNotifications(),(e==null?void 0:e.message)==="deleted"&&this.deleteLocalData(e.id),this.onResult(e)};this.resolveNotifications=(...i)=>re(this,[...i],function*(e=[],r=!0,n=this.currentUser){if(!n||e.length===0)return;let o=[],s=[],a=[],l=!1;return e.length===0&&(e=this.getLocalData("notification",{ownerId:n._id})),e.forEach(h=>{h.parent.structType==="user"&&(l=!0),a.push(h.parent.structType),o.push(h.parent._id),s.push(h._id),this.deleteLocalData(h)}),this.deleteData(s),r&&(a.reverse().forEach((h,g)=>{h==="user"&&(this.getUser(s[g]),o.splice(o.length-g-1,1))}),o.length>0)?yield this.getDataByIds(o,n._id,"notification"):!0});this.getLocalUserPeerIds=(e=this.currentUser)=>{if(!e)return[];let r=[];return this.getLocalData("authorization",e._id).forEach(i=>{i.authorizations.indexOf("peer")>-1&&i.authorizerId===e._id&&r.push(i.authorizedId)}),r};this.authorizeUser=(m,...p)=>re(this,[m,...p],function*(e,r="",n="",i="",o="",s=[],a=[],l=[],h=[],g=!1){if(!e)return;let w=this.createStruct("authorization",void 0,e,void 0);return w.authorizedId=i,w.authorizedName=o,w.authorizerId=r,w.authorizerName=n,w.authorizations=s,w.structs=a,w.excluded=l,w.groups=h,w.expires=g,w.status="PENDING",w.associatedAuthId="",w.ownerId=e._id,w=yield this.setAuthorization(w),w});this.addGroup=(l,...h)=>re(this,[l,...h],function*(e,r="",n="",i=[],o=[],s=[],a=!0){if(!e)return;let g=this.createStruct("group",void 0,e);return g.name=r,g.details=n,g.admins=i,g.peers=o,g.clients=s,g.users=[...i,...o,...s],g.ownerId=e._id,a&&(g=yield this.setGroup(g)),g});this.addData=(l,...h)=>re(this,[l,...h],function*(e,r="",n="",i="",o=[],s=!1,a=!0){if(!e)return;let g=this.createStruct("dataInstance",void 0,e);return g.author=r,g.title=n,g.type=i,g.data=o,g.expires=s,g.ownerId=e._id,a&&(g=yield this.updateServerData([g])[0]),g});this.addEvent=(m,...p)=>re(this,[m,...p],function*(e,r="",n="",i="",o=0,s=0,a=0,l=[],h=[],g=!0){if(!e)return;h.length===0&&(h=this.getLocalUserPeerIds(e));let w=this.createStruct("event",void 0,e);return w.author=r,w.event=n,w.notes=i,w.startTime=o,w.endTime=s,w.grade=a,w.attachments=l,w.users=h,w.ownerId=e._id,g&&(w=yield this.updateServerData([w])[0]),w});this.addDiscussion=(h,...g)=>re(this,[h,...g],function*(e,r="",n="",i="",o="",s=[],a=[],l=!0){if(!e)return;a.length===0&&(a=this.getLocalUserPeerIds(e));let m=this.createStruct("discussion",void 0,e);m.topic=n,m.category=i,m.message=o,m.attachments=s,m.authorId=r,m.users=a,m.comments=[],m.replies=[],m.ownerId=e._id;let p=[m];return l&&(m=yield this.updateServerData(p)[0]),m});this.addChatroom=(a,...l)=>re(this,[a,...l],function*(e,r="",n="",i=[],o=[],s=!0){if(!e)return;o.length===0&&(o=this.getLocalUserPeerIds(e));let h=this.createStruct("chatroom",void 0,e);h.message=n,h.attachments=i,h.authorId=r,h.users=o,h.replies=[],h.comments=[],h.ownerId=e._id;let g=[h];return s&&(h=yield this.updateServerData(g)[0]),h});this.addComment=(l,h,g,...m)=>re(this,[l,h,g,...m],function*(e,r,n,i="",o="",s=[],a=!0){if(!e)return;let p=this.createStruct("comment",void 0,e,r);p.authorId=i,p.replyTo=n==null?void 0:n._id,p.message=o,p.attachments=s,p.users=r==null?void 0:r.users,p.replies=[],p.ownerId=e._id,a?n==null||n.replies.push(p._id):n==null||n.replies.push(p),a?r==null||r.comments.push(p._id):r==null||r.comments.push(p);let w=[p,r];return n._id!==r._id&&w.push(n),a&&(p=yield this.updateServerData(w)[0]),p});e instanceof Object&&Object.keys(e).length>0&&this.setupUser(e),this.load(new VS(this))}setupUser(e,r=n=>{}){return re(this,null,function*(){if(!e){console.error('must provide an info object! e.g. {_id:"abc123"}'),r(void 0);return}let n=!1;e.id&&(e._id=e.id);let i=yield this.getUser(e._id);console.log("user gotten",i);let o,s=!1;if(i==null?void 0:i._id){o=i.user;for(let a in e){let l=this.userStruct();if(o[a]&&a!=="_id")if(Array.isArray(e[a])){for(let h=0;h<o[a].length;h++)if(e[a].indexOf(o[a][h])<0){o[a]=e[a],n=!0;break}if(!n){for(let h=0;h<e[a].length;h++)if(o[a].indexOf(e[a][h])<0){o[a]=e[a],n=!0;break}}}else o[a]!==e[a]&&(o[a]=e[a],n=!0);else o[a]!==e[a]&&typeof l[a]=="string"&&a!=="_id"&&(o[a]=e[a],n=!0)}(i==null?void 0:i.authorizations)&&Array.isArray(i.authorizations)&&this.setLocalData(i.authorizations),(i==null?void 0:i.groups)&&Array.isArray(i.groups)&&this.setLocalData(i.groups)}else{o=this.userStruct(e,!0),s=!0;let a=yield this.setUser(o),l=this.getLocalData(void 0,{ownerId:o._id});(l==null?void 0:l.length)>0&&this.updateServerData(l,h=>{console.log("setData",h)}),this.setAuthorizationsByGroup(o)}if(s)this.currentUser=o,this.setLocalData(o);else{let a=yield this.getAllUserData(o._id,void 0);if(console.log("getServerData",a),!(!a||a.length===0)){this.setLocalData(a);let l=a.filter(p=>{if(p.structType==="notification"&&(this.getLocalData("authorization",p.parent._id)||p.parent.structType==="user"||p.parent.structType==="authorization"||!this.getLocalData(p.parent.structType,p.parent._id)))return!0}),h=a.filter(p=>{if(p.structType==="comment")return!0}),g=[];h.forEach(p=>{this.getLocalData("comment",{_id:p._id})||g.push(p._id)}),g.length>0&&this.deleteData(g),l.length>0&&(this.resolveNotifications(l,!1,void 0),n=!0);let m=a.filter(p=>{if(p.structType!=="notification")return!0});this.tablet&&this.tablet.sortStructsIntoTable(m)}this.setLocalData(o),console.log("currentUser",o),this.currentUser=o,console.log("collections",this.tablet.collections)}return console.log("u::",o),o&&(r(this.currentUser),this.currentUser)})}onResult(e){}randomId(e=""){return`${e+Math.floor(Math.random()+Math.random()*Math.random()*1e16)}`}addStruct(){return re(this,arguments,function*(e="struct",r={},n=void 0,i=void 0,o=!0){let s=Pn.Struct(e,r,n,i);return o&&(s=yield this.updateServerData([s])[0]),s})}ping(e=r=>{console.log(r)}){return re(this,null,function*(){var n;let r=(n=yield this.send("ping"))==null?void 0:n[0];return e(r),r})}sendMessage(e="",r="",n=void 0,i=o=>{console.log(o)}){return re(this,null,function*(){var a;let o=[e,r];n&&(o[2]=n);let s=(a=yield this.send("sendMessage",...o))==null?void 0:a[0];return i(s),s})}getUser(){return re(this,arguments,function*(e="",r=this.baseServerCallback){var i;let n=(i=yield this.send("structs/getUser",e))==null?void 0:i[0];return r(n),n})}getUsers(){return re(this,arguments,function*(e=[],r=this.baseServerCallback){var i;let n=(i=yield this.send("structs/getUsers",...e))==null?void 0:i[0];return r(n),n})}getUsersByRoles(){return re(this,arguments,function*(e=[],r=this.baseServerCallback){var i;let n=(i=yield this.send("structs/getUsersByRoles",e))==null?void 0:i[0];return r(n),n})}getAllUserData(i){return re(this,arguments,function*(e,r=[],n=this.baseServerCallback){var s;let o=(s=yield this.send("structs/getAllData",e,r))==null?void 0:s[0];return n(o),o})}getData(a,l,h){return re(this,arguments,function*(e,r,n,i=0,o=0,s=this.baseServerCallback){var m;let g=(m=yield this.send("structs/getData",e,r,n,i,o))==null?void 0:m[0];return s(g),g})}getDataByIds(){return re(this,arguments,function*(e=[],r,n,i=this.baseServerCallback){var s;let o=(s=yield this.send("structs/getDataByIdss",e,r,n))==null?void 0:s[0];return i(o),o})}getStructParentData(n){return re(this,arguments,function*(e,r=this.baseServerCallback){var s,a,l;if(!e.parent)return;let i=[(s=e.parent)==null?void 0:s.structType,"_id",(a=e.parent)==null?void 0:a._id],o=(l=yield this.send("structs/getData",...i))==null?void 0:l[0];return r(o),o})}setUser(){return re(this,arguments,function*(e={},r=this.baseServerCallback){var i;let n=(i=yield this.send("structs/setUser",this.stripStruct(e)))==null?void 0:i[0];return r(n),n})}checkUserToken(i){return re(this,arguments,function*(e,r=this.currentUser,n=this.baseServerCallback){if(!e)return!1;let o=!1;for(let s in e){let a=this.userStruct();if(r[s]&&s!=="_id")if(Array.isArray(e[s])){for(let l=0;l<r[s].length;l++)if(e[s].indexOf(r[s][l])<0){r[s]=e[s],o=!0;break}if(!o){for(let l=0;l<e[s].length;l++)if(r[s].indexOf(e[s][l])<0){r[s]=e[s],o=!0;break}}}else r[s]!==e[s]&&(r[s]=e[s],o=!0);else!r[s]&&a[s]&&(r[s]=e[s],o=!0)}return o&&(yield this.setUser(r,n))})}updateServerData(){return re(this,arguments,function*(e=[],r=this.baseServerCallback){var o;let n=new Array;e.forEach(s=>{n.push(this.stripStruct(s))});let i=(o=yield this.send("structs/setData",...n))==null?void 0:o[0];return r(i),i})}deleteData(){return re(this,arguments,function*(e=[],r=this.baseServerCallback){var o;let n=[];e.forEach(s=>{(s==null?void 0:s.structType)&&(s==null?void 0:s._id)&&(n.push({structType:s.structType,_id:s._id}),this.deleteLocalData(s))}),console.log("deleting",n);let i=(o=yield this.send("structs/deleteData",...n))==null?void 0:o[0];return r(i),i})}deleteUser(n){return re(this,arguments,function*(e,r=this.baseServerCallback){var o;if(!e)return;let i=(o=yield this.send("structs/deleteUser",e))==null?void 0:o[0];return r(i),i})}setGroup(){return re(this,arguments,function*(e={},r=this.baseServerCallback){var i;let n=(i=yield this.send("structs/setGroup",this.stripStruct(e)))==null?void 0:i[0];return r(n),n})}getGroups(){return re(this,arguments,function*(e=this.currentUser._id,r="",n=this.baseServerCallback){var o;let i=(o=yield this.send("structs/getGroups",e,r))==null?void 0:o[0];return n(i),i})}deleteGroup(n){return re(this,arguments,function*(e,r=this.baseServerCallback){var o;if(!e)return;this.deleteLocalData(e);let i=(o=yield this.send("structs/deleteGroup",e))==null?void 0:o[0];return r(i),i})}setAuthorization(){return re(this,arguments,function*(e={},r=this.baseServerCallback){var i;let n=(i=yield this.send("structs/setAuth",this.stripStruct(e)))==null?void 0:i[0];return r(n),n})}getAuthorizations(){return re(this,arguments,function*(e=(i=>(i=this.currentUser)==null?void 0:i._id)(),r="",n=this.baseServerCallback){var s;if(e===void 0)return;let o=(s=yield this.send("structs/getAuths",e,r))==null?void 0:s[0];return n(o),o})}deleteAuthorization(n){return re(this,arguments,function*(e,r=this.baseServerCallback){var o;if(!e)return;this.deleteLocalData(e);let i=(o=yield this.send("structs/deleteAuth",e))==null?void 0:o[0];return r(i),i})}checkForNotifications(){return re(this,arguments,function*(e=(r=>(r=this.currentUser)==null?void 0:r._id)()){return yield this.getData("notification",e)})}setAuthorizationsByGroup(){return re(this,arguments,function*(e=this.currentUser){let r=this.getLocalData("authorization",{ownerId:e._id});e.userRoles.forEach(n=>{let o=n.split("_")[0],s;n.includes("client")?s=o+"_peer":n.includes("peer")?s=o+"_client":n.includes("admin")&&(s=o+"_owner"),s&&this.getUsersByRoles([s],a=>{a==null||a.forEach(l=>{let h=l.username;h||(h=l.email),h||(h=l.id);let g=e.username;g||(g=e.email),g||(g=e.id),h!==g&&(n.includes("client")?r.find(p=>{if(p.authorizerId===l.id&&p.authorizedId===e.id)return!0})||this.authorizeUser(Pn.ProfileStruct("user",e,e),l.id,h,e.id,g,["peer"],void 0,[n]):n.includes("peer")&&(r.find(p=>{if(p.authorizedId===l.id&&p.authorizerId===e.id)return!0})||this.authorizeUser(Pn.ProfileStruct("user",e,e),e.id,g,l.id,h,["peer"],void 0,[n])))})})})})}deleteRoom(e){return re(this,null,function*(){var n;if(!e)return!1;let r=[e];return(n=e.comments)==null||n.forEach(i=>{let o=this.getLocalData("comment",{_id:i});r.push(o)}),e?yield this.deleteData(r):!1})}deleteComment(e){return re(this,null,function*(){var a,l,h;let r=[e],n=(g=e)=>{(g==null?void 0:g.replies)&&g.replies.forEach(m=>{let p=this.getLocalData("comment",{_id:m});p&&(p.replies.length>0&&p.replies.forEach(w=>{n(w)}),r.push(p))})};n(e);let i=this.getLocalData((a=e.parent)==null?void 0:a.structType,{_id:(l=e.parent)==null?void 0:l._id}),o=[];i&&(o=[i],r.forEach(g=>{var w,b;let m=(w=i.replies)==null?void 0:w.indexOf(g._id);m>-1&&i.replies.splice(m,1);let p=(b=i.comments)==null?void 0:b.indexOf(g._id);p>-1&&i.comments.splice(p,1)}));let s=this.getLocalData("comment",{_id:e.replyTo});if((s==null?void 0:s._id)!==(i==null?void 0:i._id)){let g=(h=s.replies)==null?void 0:h.indexOf(i._id);g>-1&&s.replies.splice(g,1),o.push(s)}return o.length>0&&(yield this.updateServerData(o)),yield this.deleteData(r)})}getUserDataByAuthorization(a,l,h){return re(this,arguments,function*(e,r,n,i=0,o=0,s=this.baseServerCallback){let g=e.authorizerId;if(g)return new Promise(m=>re(this,null,function*(){this.getUser(g,p=>re(this,null,function*(){r?yield this.getData(r,g,n,i,o,s):yield this.getAllUserData(g,["notification"],s),m(p),s(p)}))}))})}getUserDataByAuthorizationGroup(){return re(this,arguments,function*(e="",r,n,i=0,o=0,s=this.baseServerCallback){let a=this.getLocalData("authorization"),l=[];return yield Promise.all(a.map(h=>re(this,null,function*(){var g;if((g=h.groups)==null?void 0:g.includes(e)){let m=h.authorizerId;if(m){let p,w=yield this.getUser(m,s);w&&l.push(w),r?p=yield this.getData(r,m,n,i,o,s):p=yield this.getAllUserData(m,["notification"],s),p&&l.push(p)}return!0}}))),l})}overwriteLocalData(e){if(Array.isArray(e))e.forEach(r=>{let n=this.getLocalData(r.structType,{ownerId:r.ownerId,_id:r._id});!n||(n==null?void 0:n.length)===0?this.setLocalData(r):Object.assign(n,r)});else{let r=this.getLocalData(e.structType,{ownerId:e.ownerId,_id:e._id});!r||(r==null?void 0:r.length)===0?this.setLocalData(e):Object.assign(r,e)}}setLocalData(e){this.tablet.setLocalData(e)}getLocalData(e,r){return this.tablet.getLocalData(e,r)}getLocalReplies(e){let r=[];if(e.replies){if(e.replies.reduce((n,i)=>n*(typeof i=="object"?1:0),1))return e.replies}else return r;return r=this.getLocalData("comment",{replyTo:e._id}),r}hasLocalAuthorization(e,r=this.currentUser._id){let i=this.getLocalData("authorization",{ownerId:r}).find(o=>{if(o.authorizedId===r&&o.authorizerId===e||o.authorizerId===r&&o.authorizedId===e)return!0});return i||!1}deleteLocalData(e){return Array.isArray(e)?e.forEach(r=>this.deleteStruct(r)):this.deleteStruct(e),!0}deleteStruct(e){if(typeof e=="string"&&(e=this.getLocalData(e)),!e)throw new Error("Struct not supplied");return!e.structType||!e._id?!1:(this.tablet.collections.get(e.structType).delete(e._id),!0)}stripStruct(e={}){let r=Object.assign({},e);for(let n in r)(r[n]===void 0||r[n].constructor.name==="Map")&&delete r[n];return r}createStruct(e,r,n=this.currentUser,i){return Pn.Struct(e,r,n,i)}userStruct(e={},r=!1){let n=Pn.ProfileStruct(void 0,e,e);e._id?n.id=e._id:e.id?n.id=e.id:n.id="user"+Math.floor(Math.random()*1e10),n._id=n.id,n.ownerId=n.id;for(let i in e)Object.keys(Pn.ProfileStruct()).indexOf(i)<0&&delete n[i];return r&&(this.currentUser=n),n}dataObject(e=void 0,r="any",n=Date.now()){return{type:r,data:e,timestamp:n}}},$S=qS});var Ke,Ka=at(()=>{HS();Ke=new $S});var GS,YS,JS,Za,Xa,Z0=at(()=>{GS=At(Jt());Ba();Z_();Ka();YS=At(Ma()),JS=new bn(YS.settings.realmapp),Za=(t,e)=>re(void 0,null,function*(){let{currentUser:r}=JS,n="LOG_IN";if(r)try{yield r.refreshAccessToken(),n="REFRESH"}catch(i){return{type:"FAIL",data:{err:i,type:"REFRESH"}}}else{let i;try{t==="google"?(yield(0,GS.wait)(0),i=Yt.google({redirectUrl:window.location.origin})):t&&(i=Yt.emailPassword(t,e))}catch(o){console.error(o)}if(i)try{let o=yield JS.logIn(i);o&&(yield o.refreshAccessToken(),r=o)}catch(o){return{type:"FAIL",data:{err:o,type:"LOGIN"}}}}return r?{type:n,data:r.toJSON()}:{type:"FAIL",data:{err:void 0,type:"UNCAUGHT"}}}),Xa=t=>re(void 0,null,function*(){var n,i;let e=!1,r;if((t==null?void 0:t.type)!=="FAIL"&&((t==null?void 0:t.data).id||(t==null?void 0:t.data)._id?r=Ke.setupUser(t.data):((i=(n=t==null?void 0:t.data)==null?void 0:n.profile)==null?void 0:i.data)._id&&(r=Ke.setupUser(t.data.profile.data))),r){let o=yield r;if(o)return e=!0,qr.setState({isLoggedIn:!0,loggedInId:o._id}),console.log("Logged in: ",o),o}e||(console.log("User not created with info:",t.data),qr.get("isLoggedIn")&&qr.setState({isLoggedIn:!1}))});window.location.href.includes("_baas_client_app_id")&&K_()});function Mt(t="struct",e={},r={_id:""},n={structType:"struct",_id:""}){function i(s=""){return`${s+Math.floor(Math.random()+Math.random()*Math.random()*1e16)}`}let o={_id:i(t+"defaultId"),structType:t,ownerId:r?._id,timestamp:Date.now(),parent:{structType:n?.structType,_id:n?._id}};return o.ownerId||delete o.ownerId,o?.parent?._id||delete o.parent,Object.keys(e).length>0&&Object.assign(o,e),o}function cc(t,e={}){if(!ro[t.tag]&&t.position&&(ro[t.tag]=[t.position.x,t.position.y,t.position.z]),ro[t.tag]){let r={channel:"",position:{x:ro[t.tag][0],y:ro[t.tag][1],z:ro[t.tag][2]}};return Object.assign(e,r)}else return Object.assign(e,t)}function hk(t=[],e=!0){let r=[];for(let n of t){let i=pi(n);r.push(i)}return e&&r.push(...Q0({channelDicts:t})),r}function fc(t=[],e={}){let r={scp:[],delta:[],theta:[],alpha1:[],alpha2:[],beta:[],lowgamma:[],highgamma:[]};return t.forEach(n=>r[n]=[]),Object.assign(e,r)}function pi(t="",e={},r={_id:""},n={structType:"struct",_id:""}){let i=fc(),o={tag:t,position:{x:0,y:0,z:0},count:0,times:[],raw:[],filtered:[],fftCount:0,fftTimes:[],ffts:[],slices:JSON.parse(JSON.stringify(i)),means:JSON.parse(JSON.stringify(i)),startTime:Date.now()},s=Mt("eeg",o,r,n);return t&&cc(o,s),Object.assign(s,e)}function X0(t={0:pi("FP1"),1:pi("FP2")},e={},r={_id:""},n={structType:"struct",_id:""}){let i=fc(),o={tag:t[0]?.tag+"::"+t[1]?.tag,x0:t[0]?.position?.x,y0:t[0]?.position?.y,z0:t[0]?.position?.z,x1:t[1]?.position?.x,y1:t[1]?.position?.y,z1:t[1]?.position?.z,fftCount:0,fftTimes:[],ffts:[],slices:JSON.parse(JSON.stringify(i)),means:JSON.parse(JSON.stringify(i)),startTime:Date.now()},s=Mt("coherence",o,r,n);return Object.assign(s,e)}function Q0(t={channelDicts:[{ch:0,tag:"FP1",analyze:!1},{ch:1,tag:"FP2",analyze:!1}],taggedOnly:!0},e={},r={_id:""},n={structType:"struct",_id:""}){for(var i=[],o=1,s=0,a=0;a<t.channelDicts.length*(t.channelDicts.length+1)/2-t.channelDicts.length;a++){if(t.taggedOnly===!1||t.taggedOnly===!0&&t.channelDicts[s].tag!==null&&t.channelDicts[s+o].tag!==null&&t.channelDicts[s].tag!=="other"&&t.channelDicts[s+o].tag!=="other"&&t.channelDicts[s].analyze===!0&&t.channelDicts[s+o].analyze===!0){var l=pi(t.channelDicts[s].tag),h=pi(t.channelDicts[s+o].tag);i.push(X0({0:l,1:h},{},r,n))}o++,o+s===t.channelDicts.length&&(s++,o=1)}return i}function ep(t="",e={},r={_id:""},n={structType:"struct",_id:""}){let i={tag:t,position:{x:0,y:0,z:0},count:0,times:[],red:[],ir:[],ir2:[],ambient:[],ratio:[],temp:[],beat_detect:{beats:[],breaths:[],rir:[],rir2:[],drir_dt:[],localmins:[],localmaxs:[],val_dists:[],peak_dists:[],localmins2:[],localmaxs2:[],val_dists2:[],peak_dists2:[]},startTime:Date.now()},o=Mt("fnirs",i,r,n);return t&&cc(i,o),Object.assign(o,e)}function XS(t="",e={},r={_id:""},n={structType:"struct",_id:""}){let i={tag:t,Ax:[],Ay:[],Az:[],Gx:[],Gy:[],Gz:[],startTime:Date.now()},o=Mt("imu",i,r,n);return t&&cc(i,o),Object.assign(o,e)}function QS(t="",e={},r={_id:""},n={structType:"struct",_id:""}){let i={tag:t,count:0,times:[],x:[],y:[],smax:[],smay:[],startTime:Date.now()},o=Mt("eyetracker",i,r,n);return Object.assign(o,e)}function tp(t="",e={},r={_id:""},n={structType:"struct",_id:""}){let i={tag:t,count:0,times:[],raw:[],filtered:[],bpm:[],hrv:[],startTime:Date.now()},o=Mt("ecg",i,r,n);return Object.assign(o,e)}function eb(t="",e={},r={_id:""},n={structType:"struct",_id:""}){}function tb(t="",e={},r={_id:""},n={structType:"struct",_id:""}){let i=ep(t,r,n,e);return i.structType="ppg",i}function rb(t="",e={},r={_id:""},n={structType:"struct",_id:""}){let i=tp(t,r,n,e);return i.structType="hrv",i}function nb(t="",e={},r={_id:""},n={structType:"struct",_id:""}){let i=pi(t,r,n,e);return i.structType="emg",i}function ib(t="",e={},r={_id:""},n={structType:"struct",_id:""}){let i=Mt("profile",{tag:t,name:"",username:"",firstName:"",lastName:"",email:"",sex:"",birthday:"",type:"",userRoles:[],id:""},r,n);return Object.assign(i,e)}function ob(t="",e={},r={_id:""},n={structType:"struct",_id:""}){let i={tag:t,authorizedId:"",authorizedName:"",authorizerId:"",authorizerName:"",authorizations:new Array,structs:new Array,excluded:new Array,groups:new Array,status:"PENDING",expires:!1,associatedAuthId:""},o=Mt("authorization",i,r,n);return Object.assign(o,e)}function sb(t="",e={},r={_id:""},n={structType:"struct",_id:""}){let i={tag:t,name:"",details:"",admins:new Array,peers:new Array,clients:new Array,users:new Array},o=Mt("group",i,r,n);return Object.assign(o,e)}function ab(t="",e={},r={_id:""},n={structType:"struct",_id:""}){let i={tag:t,title:"",author:"",expires:!1,type:"",data:new Array},o=Mt("dataInstance",i,r,n);return Object.assign(o,e)}function lb(t="",e={},r={_id:""},n={structType:"struct",_id:""}){let i={tag:t,event:"",author:"",startTime:"",endTime:"",grade:0,notes:"",attachments:new Array,users:new Array},o=Mt("event",i,r,n);return Object.assign(o,e)}function ub(t="",e={},r={_id:""},n={structType:"struct",_id:""}){let i={tag:t,message:"",topic:"",author:"",attachments:new Array,comments:new Array,replies:new Array,users:new Array,audioChatActive:!1,videoChatActive:!1},o=Mt("chatroom",i,r,n);return Object.assign(o,e)}function cb(t="",e={},r={_id:""},n={structType:"struct",_id:""}){let i={tag:t,author:"",replyTo:"",message:"",rating:0,replies:new Array,users:new Array,attachments:new Array},o=Mt("comment",i,r,n);return Object.assign(o,e)}function fb(t="",e={},r={_id:""},n={structType:"struct",_id:""}){let i=Mt("notification",{tag:t,note:"",parentUserId:""},r,n);return Object.assign(i,e)}function hb(t="",e={},r={_id:""},n={structType:"struct",_id:""}){let i={tag:t,title:"",author:"",attachments:new Array,dates:new Array},o=Mt("schedule",i,r,n);return Object.assign(o,e)}function db(t="",e={},r={_id:""},n={structType:"struct",_id:""}){let i={tag:t,timeSet:"",notes:"",recurs:"NEVER",attachments:new Array},o=Mt("date",i,r,n);return Object.assign(o,e)}function Ek(t=[],e={scp:[.1,1],delta:[1,4],theta:[4,8],alpha1:[8,12],alpha2:[12,16],beta:[16,30],lowgamma:[30,45],highgamma:[45,100]}){let r={};return t.forEach((n,i)=>{for(let o in e)r[o]||(r[o]=[[],[]]),n>=e[o][0]&&n<=e[o][1]&&(r[o][0].push(n),r[o][1].push(i))}),r}function Tk(t,e,r){let n=(e-t)/r,i=[],o=0;for(;o<e;)i.push(o),o+=n;return i}var KS,fk,ZS,$e,Qa,ro,dk,pk,no,Pe,gk,yk,mk,vk,wk,_k,Sk,bk,Ok,xk,pb=at(()=>{KS=Object.defineProperty,fk=(t,e,r)=>e in t?KS(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,ZS=(t,e)=>{for(var r in e)KS(t,r,{get:e[r],enumerable:!0})},$e=(t,e,r)=>(fk(t,typeof e!="symbol"?e+"":e,r),r),Qa={};ZS(Qa,{AuthorizationStruct:()=>ob,ChatroomStruct:()=>ub,CoherenceMap:()=>Q0,CoherenceStruct:()=>X0,CommentStruct:()=>cb,DataStruct:()=>ab,DateStruct:()=>db,ECGStruct:()=>tp,EDAStruct:()=>eb,EEGCoordinates:()=>hk,EEGStruct:()=>pi,EMGStruct:()=>nb,EventStruct:()=>lb,EyeTrackerStruct:()=>QS,FNIRSStruct:()=>ep,FrequencyBandsStruct:()=>fc,GroupStruct:()=>sb,HRVStruct:()=>rb,IMUStruct:()=>XS,NotificationStruct:()=>fb,PPGStruct:()=>tb,ProfileStruct:()=>ib,ScheduleStruct:()=>hb,Struct:()=>Mt,eegCoordinates:()=>ro,setCoordinate:()=>cc,structRegistry:()=>dk});ro={FP1:[-21.2,66.9,12.1],FPZ:[1.4,65.1,11.3],FP2:[24.3,66.3,12.5],AF7:[-41.7,52.8,11.3],AF3:[-32.7,48.4,32.8],AFZ:[1.8,54.8,37.9],AF4:[35.1,50.1,31.1],AF8:[43.9,52.7,9.3],F5:[-51.4,26.7,24.7],F3:[-39.7,25.3,44.7],F1:[-22.1,26.8,54.9],FZ:[0,26.8,60.6],F2:[23.6,28.2,55.6],F4:[41.9,27.5,43.9],F6:[52.9,28.7,25.2],F7:[-52.1,28.6,3.8],F8:[53.2,28.4,3.1],FC5:[-59.1,3,26.1],FC3:[-45.5,2.4,51.3],FC1:[-24.7,.3,66.4],FCZ:[1,1,72.8],FC2:[26.1,3.2,66],FC4:[47.5,4.6,49.7],FC6:[60.5,4.9,25.5],FT9:[-53.8,-2.1,-29.1],FT7:[-59.2,3.4,-2.1],FT8:[60.2,4.7,-2.8],FT10:[55,-3.6,-31],T7:[-65.8,-17.8,-2.9],T5:[-61.5,-65.3,1.1],T3:[-70.2,-21.3,-10.7],T4:[71.9,-25.2,-8.2],T6:[59.3,-67.6,3.8],T8:[67.4,-18.5,-3.4],C5:[-63.6,-18.9,25.8],C3:[-49.1,-20.7,53.2],C1:[-25.1,-22.5,70.1],CZ:[.8,-21.9,77.4],C2:[26.7,-20.9,69.5],C4:[50.3,-18.8,53],C6:[65.2,-18,26.4],CP5:[-61.8,-46.2,22.5],CP3:[-46.9,-47.7,49.7],CP1:[-24,-49.1,66.1],CPZ:[.7,-47.9,72.6],CP2:[25.8,-47.1,66],CP4:[49.5,-45.5,50.7],CP6:[62.9,-44.6,24.4],TP9:[-73.6,-46.7,-4],TP7:[-63.6,-44.7,-4],TP8:[64.6,-45.4,-3.7],TP10:[74.6,-47.4,-3.7],P9:[-50.8,-51.3,-37.7],P7:[-55.9,-64.8,0],P5:[-52.7,-67.1,19.9],P3:[-41.4,-67.8,42.4],P1:[-21.6,-71.3,52.6],PZ:[.7,-69.3,56.9],P2:[24.4,-69.9,53.5],P4:[44.2,-65.8,42.7],P6:[54.4,-65.3,20.2],P8:[56.4,-64.4,.1],P10:[51,-53.9,-36.5],PO7:[-44,-81.7,1.6],PO3:[-33.3,-84.3,26.5],POZ:[0,-87.9,33.5],PO4:[35.2,-82.6,26.1],PO8:[43.3,-82,.7],O1:[-25.8,-93.3,7.7],OZ:[.3,-97.1,8.7],O2:[25,-95.2,6.2]};dk={Struct:Mt,EEGStruct:pi,FNIRSStruct:ep,CoherenceStruct:X0,CoherenceMap:Q0,FrequencyBandsStruct:fc,IMUStruct:XS,EyeTrackerStruct:QS,ECGStruct:tp,EDAStruct:eb,PPGStruct:tb,HRVStruct:rb,EMGStruct:nb,ProfileStruct:ib,AuthorizationStruct:ob,GroupStruct:sb,DataStruct:ab,EventStruct:lb,ChatroomStruct:ub,CommentStruct:cb,NotificationStruct:fb,ScheduleStruct:hb,DateStruct:db},pk={};ZS(pk,{bandpassWindow:()=>Tk,get40HzGamma:()=>_k,getAlphaBetaRatio:()=>vk,getAlphaRatio:()=>yk,getAlphaThetaRatio:()=>wk,getCoherenceScore:()=>gk,getHEGRatioScore:()=>bk,getLowGammaScore:()=>Sk,getThetaBetaRatio:()=>mk,mapCoherenceData:()=>xk,mapFFTData:()=>Ok,splitFrequencyBands:()=>Ek});no=class{constructor(){}static genSineWave(t=20,e=1,r=1,n=512,i=0,o=1){for(var s=[],a=[],l=1/n,h=0;h<r;h+=l){var g=Math.sin(2*Math.PI*t*h)*e;g+=Math.sin(2*Math.PI*i*h)*o,s.push(g),a.push(h)}return[a,s]}static getSineAmplitude(t=20,e=1,r=0,n=0){return Math.sin(this.TWO_PI*t*r+n)*e}static mean(t){var e=t.reduce((r,n)=>n+=r);return e/t.length}static mode(t){return t.sort((e,r)=>t.filter(n=>n===e).length-t.filter(n=>n===r).length).pop()}static std(t,e=void 0){let r=e;e||(r=this.mean(t));let n=0;for(let i=0;i<t.length;i++){let o=t[i]-r;n+=o*o}return Math.sqrt(n/t.length)}static relError(t=[],e=[],r=!0){if(t.length!==e.length)throw new Error("Input arrays of same length!");let n=t.length,i=[];for(let o=0;o<n;o++){let s=(t[o]-e[o])/t[o];r&&(s=Math.abs(s)),i.push(s)}return i}static informationEntropy(t=[]){let e=[],r=t.length;for(let n=0;n<r;n++){let i=t[n]*Math.log(t[n]);isNaN(i)&&(i=0),e.push(i)}return e}static zscore(t){let e=this.mean(t),r=this.std(t,e),n=[];for(let i=0;i<t.length;i++)n.push((t[i]-e)/r);return n}static variance(t){var e=this.mean(t);return t.reduce((r,n)=>r+(n-e)**2,0)/t.length}static dot(t,e){for(var r=0,n=0;n<t.length;n++)r+=t[n]*e[n];return r}static cross3D(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}static magnitude(t){var e=0;return t.forEach(r=>{e+=r*r}),Math.sqrt(e)}static distance(t,e){var r=0;return t.forEach((n,i)=>{r+=(e[i]-n)*(e[i]-n)}),Math.sqrt(r)}static normalize(t){var e=0;e=this.magnitude(t);var r=[];return t.forEach((n,i)=>{r.push(n*e)}),r}static quadraticFormula(t,e,r){let n=Math.sqrt(e*e-4*t*r);if(!isNaN(n))return["complex","complex"];let i=1/(2*t);if(n===0)return[e*i];let o=-e;return[(o+n)*i,(o-n)*i]}static newtonsMethod(t=o=>Math.pow(o,5)+o*o-o-.2,e=0,r=1,n=.01,i=10){let o=[];for(let s=0;s<i;s++){let a=Math.random()*(r-e),l=t(a),h=t(a+n),g=(h-l)/n,m=a+n;for(;Math.abs(g)>n;){let b=-l/O,N=m+b;l=h,h=t(N);let O=(h-l)/(N-m)}let p,w=o.find((b,N)=>{if(Math.abs(xn1-b)<n)return p=N,!0});w?o[p]=(xn1+w)*.5:o.push(xn1)}return o}static makeVec(t,e){var r=[];return t.forEach((n,i)=>{r.push(e[i]-n)}),r}static transpose(t){return t[0].map((e,r)=>t.map(n=>n[r]))}static matmul(t,e){for(var r=t.length,n=t[0].length,i=e.length,o=e[0].length,s=new Array(r),a=0;a<r;++a){s[a]=new Array(o);for(var l=0;l<o;++l){s[a][l]=0;for(var h=0;h<n;++h)s[a][l]+=t[a][h]*e[h][l]}}return s}static matscale(t,e){let r=[];for(var n=0;n<t.length;n++){r[n]=[];for(let i=0;i<t[0].length;i++)r[n][i]=t[n][i]*e}return r}static matadd(t,e){let r=[];for(let i=0;i<t.length;i++){r[i]=[];for(var n=0;n<t[0].length;n++)r[i][n]=t[i][n]+e[i][n]}return r}static matsub(t,e){let r=[];for(let i=0;i<t.length;i++){r[i]=[];for(var n=0;n<t[0].length;n++)r[i][n]=t[i][n]-e[i][n]}return r}static histogram(t=[],e=1,r=void 0){let n=[...t];n.sort(function(l,h){return l-h});let i=Math.min(...n);if(typeof r=="number"){let l=Math.max(...n);e=Math.abs((l-i)/(r-1))}let o=i,s=[],a=[];for(let l=0;l<n.length;l++){let h=e*o;if(n[l]>i+h){o++,h+=e;let g=i+h+h*.5;s.push(g),a.push(0)}a[a.length-1]++}return[s,a]}static normalDistribution(t=[],e=!0,r=1e-4){let n=this.mean(t),i=this.variance(t),o=t.length,s=[],a=1/(this.TWO_PI*i),l=1/i,h=0;for(let g=0;g<o;g++){let m=Math.exp(-.5*Math.pow((t[g]-n)*l,2))*a;m<r&&(m=0),s.push(m),h+=m}if(e){let g=1/h;s=s.map(m=>m*g)}return s}static expectedValue(t=[],e=this.normalDistribution(t)){return t.reduce((r,n,i)=>r+n*e[i])}static originMoment(t=[],e=this.normalDistribution(t),r=1){return t.reduce((n,i,o)=>n+Math.pow(i,r)*e[o])}static centralMoment(t=[],e=this.normalDistribution(t),r=1){let n=this.mean(t);return t.reduce((i,o,s)=>i+Math.pow(o-n,r)*e[s]/t.length)}static linearDiscriminantAnalysis(t=[],e=[]){let r=this.mean(t),n=this.mean(e),i=this.cov1d(t,e),o=this.normalDistribution(t),s=[];for(let a=0;a<t.length;a++)s.push(x[a]*i*n-.5*r*i*n+Math.log10(o[a]));return s}static conv1D(t=[],e=[1/3,1/3,1/3],r=Math.floor(e.length*.5)){let n=[],i=1/e.length;if(r>0){let a=new Array(r).fill(0);t=[...a,...t,...a]}let o=Math.floor(e.length*.5),s=t.length-e.length+o;for(let a=o;a<s;a++){let l=0;for(let h=0;h<e.length;h++)l+=t[a-o]*e[h];n.push(l*i)}return n}static conv2D(t=[[],[],[]],e=[[],[],[]],r=0){let n=new Array(t.length-Math.ceil(e.length*.5)).fill([]),i,o=no.transpose(o);if(r>0){let N=new Array(r).fill(0);i=no.transpose(t);for(let O=0;O<i.length;O++)i[O]=[...N,...i[O],...N];t=no.transpose(i);for(let O=0;O<t.length;O++)t[O]=[...N,...t[O],...N]}let s=Math.floor(e[0].length*.5),a=Math.floor(o[0].length*.5),l=t[0].length-e[0].length+s,h=i[0].length-o[0].length+a,g=1/(e[0].length*o[0].length),m=l*h,p=s,w,b=a;for(;p<m;){let N=0;w=p%t[0].length,w===0&&b++;for(let O=0;O<e[0].length;O++){for(let I=0;I<o[0].length;O++)N+=t[b-a+I][w-s+O]*e[I][O];n[b].push(N*g)}p++}return n}static cov2d(t){var e=this.transpose(t),r=[],n=[],i=[];t.forEach((b,N)=>{n.push(this.mean(b))}),e.forEach((b,N)=>{i.push(this.mean(b))}),t.forEach((b,N)=>{r.push([]);for(var O=0;O<b.length;O++)r[N].push((t[N][O]-n[N])*(t[N][O]-i[O])/(b.length-1))});for(var o=this.transpose(r),s=r.length,a=r[0].length,l=o.length,h=o[0].length,g=new Array(s),m=0;m<s;++m){g[m]=new Array(h);for(var p=0;p<h;++p){g[m][p]=0;for(var w=0;w<a;++w)g[m][p]+=r[m][w]*o[w][p]/(t[0].length-1)}}return g}static cov1d(t=[],e=[]){return this.cov2d([t,e])}static cov3d(t=[],e=[],r=[]){return[[this.cov1d(t,t),this.cov1d(t,e),this.cov1d(t,r)],[this.cov1d(e,t),this.cov1d(e,e),this.cov1d(e,r)],[this.cov1d(r,t),this.cov1d(r,e),this.cov1d(r,r)]]}static covNd(t=[]){let e=[];t.forEach((r,n)=>{e.push([]),t.forEach((i,o)=>{e[n].push(this.cov1d(r,i))})})}static eigens2x2(t=[[1,2],[3,4]]){let e=t[0][0]*t[1][1]-t[0][1]*t[1][0],r=(t[0][0]+t[1][1])*.5,n=Math.sqrt(r*r-e),i=r+n,o=r-n;return[i,o]}static eigenvectors2x2(t=[[1,2],[3,4]],e=[1,2]){let r=[-t[0][1],t[0][0]-e[0]];r[0]===0&&r[1]===0&&(r[0]=t[1][1]-e[0],r[1]=-t[1][0]);let n=[-t[0][1],t[0][0]-e[1]];return n[0]===0&&n[1]===0&&(n[0]=t[1][1]-e[1],n[1]=-t[1][0]),[r,n]}static fastpca2d(t,e){let r=this.cov1d(t,e),n=this.eigens2x2(r);n[1]>n[0]&&n.reverse();let i=this.eigenvectors2x2(r,n);return console.log(n,i),[n,i]}static crosscorrelation(t,e){var r=[...e,...Array(e.length).fill(0)],n=this.mean(t),i=this.mean(e),o=t.reduce((m,p)=>m+=Math.pow(p-n,2));o=Math.sqrt(o);var s=e.reduce((m,p)=>m+=Math.pow(p-n,2));s=Math.sqrt(s);for(var a=1/(o*s),l=new Array(t.length).fill(0),h=0;h<t.length;h++){var g=t.reduce((m,p,w)=>m+=(p-n)*(r[h+w]-i));l[h]=g*a}return l}static autocorrelation(t){var e=[...t,...Array(t.length).fill(0)],r=this.mean(t),n=t.reduce((l,h)=>l+=Math.pow(h-r,2));n=Math.sqrt(n);for(var i=1/(n*n),o=new Array(t.length).fill(0),s=0;s<t.length;s++){var a=t.reduce((l,h,g)=>l+=(h-r)*(e[s+g]-r));o[s]=a*i}return o}static correlograms(t=[[],[]]){var e=[];return t.forEach((r,n)=>{t.forEach((i,o)=>{o>=n&&e.push(no.crosscorrelation(r,i))})}),e}static sma(t=[],e){for(var r=[],n=0;n<t.length;n++)if(n==0)r.push(t[0]);else if(n<e){var i=t.slice(0,n+1);r.push(i.reduce((o,s)=>s+=o)/(n+1))}else{var i=t.slice(n-e,n);r.push(i.reduce((s,a)=>a+=s)/e)}return r}static sum(t=[]){if(t.length>0){var e=t.reduce((r,n)=>n+=r);return e}else return 0}static reduceArrByFactor(t,e=2){return t.filter((r,n)=>n%e===0)}static makeArr(t,e,r){for(var n=[],i=(e-t)/(r-1),o=0;o<r;o++)n.push(t+i*o);return n}static interpolateArray(t,e,r=1){var n=function(m,p,w){return(m+(p-m)*w)*r},i=new Array,o=new Number((t.length-1)/(e-1));i[0]=t[0];for(var s=1;s<e-1;s++){var a=s*o,l=new Number(Math.floor(a)).toFixed(),h=new Number(Math.ceil(a)).toFixed(),g=a-l;i[s]=n(t[l],t[h],g)}return i[e-1]=t[t.length-1],i}static isExtrema(t,e="peak"){let r=[...t];if(r.length%2===0&&r.pop(),t.length>1){let n=!0;for(let i=0;i<r.length;i++){let o=r[i];if(e==="peak"){if(i<Math.floor(r.length*.5)&&o>=r[Math.floor(r.length*.5)]){n=!1;break}else if(i>Math.floor(r.length*.5)&&o>=r[Math.floor(r.length*.5)]){n=!1;break}}else if(e==="valley"){if(i<Math.floor(r.length*.5)&&o<=r[Math.floor(r.length*.5)]){n=!1;break}else if(i>Math.floor(r.length*.5)&&o<=r[Math.floor(r.length*.5)]){n=!1;break}}else if(i<Math.floor(r.length*.5)&&o<=r[Math.floor(r.length*.5)]){n=!1;break}else if(i>Math.floor(r.length*.5)&&o<=r[Math.floor(r.length*.5)]){n=!1;break}}if(e!=="peak"&&e!=="valley"&&n===!1){n=!0;for(let i=0;i<r.length;i++){let o=r[i];if(i<Math.floor(r.length*.5)&&o>=r[Math.floor(r.length*.5)]){n=!1;break}else if(i>Math.floor(r.length*.5)&&o>=r[Math.floor(r.length*.5)]){n=!1;break}}}return n}else return}static isCriticalPoint(t,e="peak"){let r=[...t];if(r.length%2===0&&r.pop(),t.length>1){let n=!0;for(let i=0;i<r.length;i++){let o=r[i];if(e==="peak"){if(i<r.length*.5&&o<=0){n=!1;break}else if(i>r.length*.5&&o>0){n=!1;break}}else if(e==="valley"){if(i<r.length*.5&&o>=0){n=!1;break}else if(i>r.length*.5&&o<0){n=!1;break}}else if(i<r.length*.5&&o>=0){n=!1;break}else if(i>r.length*.5&&o<0){n=!1;break}}if(e!=="peak"&&e!=="valley"&&n===!1){n=!0;for(let i=0;i<r.length;i++){let o=r[i];if(i<r.length*.5&&o<=0){n=!1;break}else if(i>r.length*.5&&o>0){n=!1;break}}}return n}else return}static getPeakThreshold(t,e,r){let n,i=t.filter((o,s)=>{if(e.indexOf(s)>-1)return!0});return r===0?n=this.mean(i):n=(r+this.mean(i))*.5,n}static column(t,e){let r=new Array(t.length).fill(0).map(()=>new Array(1).fill(0));for(let n=0;n<t.length;n++)r[n][0]=t[n][e];return r}static flatten_vector(t){let e=[];for(let r=0;r<t.length;r++)e[r]=t[r][0];return e}static squared_difference(t,e){let r=0;for(let n=0;n<t.length;n++)r=r+Math.pow(t[n]-e[n],2);return r}static shift_deflate(t,e,r){let n=Math.sqrt(this.matmul(this.transpose(r),r)),i=this.matscale(r,1/n),o=this.matscale(this.matmul(i,this.transpose(i)),e);return this.matsub(t,o)}static eigenvalue_of_vector(t,e){return ev=this.matmul(this.matmul(this.transpose(e),t),e),ev}static power_iteration(t,e=1e-5,r=1e3){let n=t.length,i=new Array(n).fill(0).map(()=>new Array(1).fill(Math.sqrt(n))),o=this.eigenvalue_of_vector(t,i),s=1,a=0;for(;s>e&&a<r;){let l=JSON.parse(JSON.stringify(o)),h=this.matmul(t,i);i=this.normalize(h),o=this.eigenvalue_of_vector(t,i),s=Math.abs(o-l),a++}return[o,i]}static eigens(t,e=1e-4,r=1e3){let n=[],i=[];for(let o=0;o<t.length;o++){let s=this.power_iteration(t,e,r),a=s[0],l=s[1];n[o]=a,i[o]=this.flatten_vector(l),t=this.shift_deflate(t,a,l)}return[n,i]}static pca(t,e=1e-5){let r=t.length,n=new Array(r),i=new Array(r),o=this.transpose(t);n[0]=this.column(t,0);let s=1,a=0;for(;espilon>e;){a++,i[0]=this.matmul(o,n[0]);let l=this.matmul(this.transpose(n[0]),n[0]);i[0]=this.matscale(i[0],1/l);let h=Math.sqrt(this.matmul(this.transpose(i[0]),i[0]));i[0]=this.matscale(i[0],1/h);let g=this.matmul(t,i[0]),m=this.matmul(this.transpose(i[0]),i[0]);g=this.matscale(g,1/m),s=this.squared_difference(n[0],g),n[0]=JSON.parse(JSON.stringify(g))}return this.matmul(this.transpose(n[0]),n[0])}static p300(t=[],e=[],r=[],n=256){let i=Math.floor(n/10),o=this.sma(e,i),s=this.peakDetect(o,"peak",i),a=this.mean(o),l=this.std(o,a),h=0,g=[];return s.length>0&&t.forEach((m,p)=>{for(;r[s[h]]<m+200&&(h++,!!s[h]););let w=0,b=[];for(;r[s[h+w]]<m+600&&(b.push(h+w),w++,!!s[h+w]););if(b.length>1){let N=[];b.forEach(D=>{N.push(o[s[D]])});let O=Math.max(...N),I=b[N.indexOf(O)];g.push({event_timestamp:m,event_index:p,peak_timestamp:r[[s[I]]],signal_index:[s[I]],signal_amplitude:e[[s[I]]],zscore:(o[s[I]]-a)/l})}else b.length===1&&g.push({event_timestamp:m,event_index:p,peak_timestamp:r[s[b[0]]],signal_index:s[b[0]],signal_amplitude:e[[s[b[0]]]],zscore:(o[s[b[0]]]-a)/l})}),g}},Pe=no;$e(Pe,"TWO_PI",Math.PI*2),$e(Pe,"C",299792458),$e(Pe,"G",66743e-15),$e(Pe,"h",662607015e-42),$e(Pe,"R",8314.32),$e(Pe,"Ra",287),$e(Pe,"H",69.3),$e(Pe,"kbar",1054571817e-43),$e(Pe,"kB",1380649e-29),$e(Pe,"ke",89875517923e-1),$e(Pe,"me",91093837015e-41),$e(Pe,"mp",167262192369e-38),$e(Pe,"mn",167492749804e-38),$e(Pe,"P0",101325),$e(Pe,"T0",288.15),$e(Pe,"p0",1.225),$e(Pe,"Na",60220978e16),$e(Pe,"y",1.405),$e(Pe,"M0",28.96643),$e(Pe,"g0",9.80665),$e(Pe,"Re",6378100),$e(Pe,"B",1458e-9),$e(Pe,"S",110.4),$e(Pe,"Sigma",365e-12),$e(Pe,"imgkernels",{edgeDetection:[[-1,-1,-1],[-1,8,-1],[-1,-1,-1]],boxBlur:[[1/9,1/9,1/9],[1/9,1/9,1/9],[1/9,1/9,1/9]],sobelLeft:[[1,0,-1],[2,0,-2],[1,0,-1]],sobelRight:[[-1,0,1],[-2,0,2],[-1,0,1]],sobelTop:[[1,2,1],[0,0,0],[-1,-2,-1]],sobelBottom:[[-1,2,1],[0,0,0],[1,2,1]],identity:[[0,0,0],[0,1,0],[0,0,0]],gaussian3x3:[[1,2,1],[2,4,2],[1,2,1]],guassian7x7:[[0,0,0,5,0,0,0],[0,5,18,32,18,5,0],[0,18,64,100,64,18,0],[5,32,100,100,100,32,5],[0,18,64,100,64,18,0],[0,5,18,32,18,5,0],[0,0,0,5,0,0,0]],emboss:[[-2,-1,0],[-1,1,1],[0,1,2]],sharpen:[[0,-1,0],[-1,5,-1],[0,-1,0]]}),$e(Pe,"integral",(t=n=>n,e=[],r=.01)=>{let n=0;for(let i=e[0];i<e[1];i+=r)n+=t(i)*r;return n}),$e(Pe,"dintegral",(t=(i,o)=>i+o,e=[[],[]],r=.01,n=r)=>{let i=0;for(let o=e[0][0]+r;o<e[0][1];o+=r)for(let s=e[1][0]+n;s<e[1][1];s+=n)i+=t(o,s)*r*n;return i}),$e(Pe,"tintegral",(t=(o,s,a)=>o+s+a,e=[[],[],[]],r=.01,n=r,i=r)=>{let o=0;for(let s=e[0][0]+r;s<e[0][1];s+=r)for(let a=e[1][0]+n;a<e[1][1];a+=n)for(let l=e[2][0]+i;l<e[2][1];l+=i)o+=t(s,a,l)*r*n*i;return o}),$e(Pe,"pintegral",(t=n=>n,e=[],r=.01)=>{let n=0,i,o;for(let s=e[0];s<e[1];s+=r)i=o,o=t(s),i&&(n+=no.distance([0,i],[r,o]));return n}),$e(Pe,"peakDetect",(t,e="peak",r=49)=>{let n=Math.floor(r*.5),i=[];for(let o=0;o<t.length-r;o++)no.isExtrema(t.slice(o,o+r),e)&&i.push(o+n-1);return i});gk=(t,e="alpha1")=>{let r=[];return Array.isArray(t)||(t=[t]),t.forEach(n=>{if(n.fftCount>0){let i=n.fftCount,o=Math.min(20,i),s=n.means[e].slice(i-o);r.push(Pe.mean(s))}}),Pe.mean(r)},yk=t=>t.fftCount>0?t.means.alpha2[t.fftCount-1]/t.means.alpha1[t.fftCount-1]:0,mk=t=>t.fftCount>0?t.means.theta[t.fftCount-1]/t.means.beta[t.fftCount-1]:0,vk=t=>t.fftCount>0?(t.means.alpha1[t.fftCount-1]+t.means.alpha2[t.fftCount-1])*.5/t.means.beta[t.fftCount-1]:0,wk=t=>t.fftCount>0?(t.means.alpha1[t.fftCount-1]+t.means.alpha2[t.fftCount-1])*.5/t.means.theta[t.fftCount-1]:0,_k=(t,e)=>{if(t.fftCount>0&&Array.isArray(e)){let r=t.slices.lowgamma[t.fftCount-1],n=[];return r.forEach((i,o)=>{e.lowgamma[0][o]>38&&e.lowgamma[0][o]<42&&n.push(i)}),Math.max(...n)}else return 0},Sk=t=>{if(t.fftCount>0){let e=t.fftCount,r=20;e<r&&(r=e);let n=t.means.lowgamma.slice(e-r);return t.means.lowgamma[e-1]-Pe.mean(n)}else return 0},bk=t=>{if(t.count>0){let e=t.count,r=40;e<r&&(r=e);let n=t.ratio.slice(e-r);return t.ratio[e-1]-Pe.mean(n)}else return 0};Ok=(t,e,r,n)=>{let i=0;n.fftCount++,n.fftTimes.push(e),n.ffts.push(t);for(let o in r){let s=t.slice(i,i+r[o][1].length);n.slices[o].push(s),n.means[o].push(s.reduce((a,l)=>a+l)/s.length),i+=r[o][1].length}},xk=(t,e,r,n)=>{t.forEach((i,o)=>{n[o].fftCount++,n[o].fftTimes.push(e),n[o].ffts.push(data);let s=0;for(let a in r){let l=fft.slice(s,s+r[a][1].length);coord.slices[a].push(l),coord.means[a].push(l.reduce((h,g)=>h+g)/l.length),s+=r[a][1].length}})}});function le(t,e,r,n){return new(r||(r=Promise))(function(i,o){function s(h){try{l(n.next(h))}catch(g){o(g)}}function a(h){try{l(n.throw(h))}catch(g){o(g)}}function l(h){var g;h.done?i(h.value):(g=h.value,g instanceof r?g:new r(function(m){m(g)})).then(s,a)}l((n=n.apply(t,e||[])).next())})}function Ze(t){if(!(this instanceof Ze))return new Ze(t);if(t&&(t instanceof Ze||t._bsontype==="ObjectID"))return t;if(this._bsontype="ObjectID",t!=null&&typeof t!="number"){var e=Ze.isValid(t);if(!e&&t!=null)throw new Error("Argument passed in must be a single String of 12 bytes or a string of 24 hex characters");if(e&&typeof t=="string"&&t.length===24)return Ze.createFromHexString(t);if(t==null||t.length!==12){if(t!=null&&typeof t.toHexString=="function")return t;throw new Error("Argument passed in must be a single String of 12 bytes or a string of 24 hex characters")}this.id=t}else this.id=this.generate(t)}function Ut(t="struct",e={},r={_id:""},n={structType:"struct",_id:""}){var o;let i={_id:function(s=""){return`${s+Math.floor(Math.random()+Math.random()*Math.random()*1e16)}`}(t+"defaultId"),structType:t,ownerId:r==null?void 0:r._id,timestamp:Date.now(),parent:{structType:n==null?void 0:n.structType,_id:n==null?void 0:n._id}};return i.ownerId||delete i.ownerId,((o=i==null?void 0:i.parent)==null?void 0:o._id)||delete i.parent,Object.keys(e).length>0&&Object.assign(i,e),i}function pc(t,e={}){if(!io[t.tag]&&t.position&&(io[t.tag]=[t.position.x,t.position.y,t.position.z]),io[t.tag]){let r={channel:"",position:{x:io[t.tag][0],y:io[t.tag][1],z:io[t.tag][2]}};return Object.assign(e,r)}return Object.assign(e,t)}function Ik(t=[],e=!0){let r=[];for(let n of t){let i=yi(n);r.push(i)}return e&&r.push(...sp({channelDicts:t})),r}function gc(t=[],e={}){let r={scp:[],delta:[],theta:[],alpha1:[],alpha2:[],beta:[],lowgamma:[],highgamma:[]};return t.forEach(n=>r[n]=[]),Object.assign(e,r)}function yi(t="",e={},r={_id:""},n={structType:"struct",_id:""}){let i=gc(),o={tag:t,position:{x:0,y:0,z:0},count:0,times:[],raw:[],filtered:[],fftCount:0,fftTimes:[],ffts:[],slices:JSON.parse(JSON.stringify(i)),means:JSON.parse(JSON.stringify(i)),startTime:Date.now()},s=Ut("eeg",o,r,n);return t&&pc(o,s),Object.assign(s,e)}function op(t={0:yi("FP1"),1:yi("FP2")},e={},r={_id:""},n={structType:"struct",_id:""}){var s,a,l,h,g,m,p,w,b,N,O,I,D,G;let i=gc(),o=Ut("coherence",{tag:((s=t[0])==null?void 0:s.tag)+"::"+((a=t[1])==null?void 0:a.tag),x0:(h=(l=t[0])==null?void 0:l.position)==null?void 0:h.x,y0:(m=(g=t[0])==null?void 0:g.position)==null?void 0:m.y,z0:(w=(p=t[0])==null?void 0:p.position)==null?void 0:w.z,x1:(N=(b=t[1])==null?void 0:b.position)==null?void 0:N.x,y1:(I=(O=t[1])==null?void 0:O.position)==null?void 0:I.y,z1:(G=(D=t[1])==null?void 0:D.position)==null?void 0:G.z,fftCount:0,fftTimes:[],ffts:[],slices:JSON.parse(JSON.stringify(i)),means:JSON.parse(JSON.stringify(i)),startTime:Date.now()},r,n);return Object.assign(o,e)}function sp(t={channelDicts:[{ch:0,tag:"FP1",analyze:!1},{ch:1,tag:"FP2",analyze:!1}],taggedOnly:!0},e={},r={_id:""},n={structType:"struct",_id:""}){for(var i=[],o=1,s=0,a=0;a<t.channelDicts.length*(t.channelDicts.length+1)/2-t.channelDicts.length;a++){if(t.taggedOnly===!1||t.taggedOnly===!0&&t.channelDicts[s].tag!==null&&t.channelDicts[s+o].tag!==null&&t.channelDicts[s].tag!=="other"&&t.channelDicts[s+o].tag!=="other"&&t.channelDicts[s].analyze===!0&&t.channelDicts[s+o].analyze===!0){var l=yi(t.channelDicts[s].tag),h=yi(t.channelDicts[s+o].tag);i.push(op({0:l,1:h},{},r,n))}++o+s===t.channelDicts.length&&(s++,o=1)}return i}function ap(t="",e={},r={_id:""},n={structType:"struct",_id:""}){let i={tag:t,position:{x:0,y:0,z:0},count:0,times:[],red:[],ir:[],ir2:[],ambient:[],ratio:[],temp:[],beat_detect:{beats:[],breaths:[],rir:[],rir2:[],drir_dt:[],localmins:[],localmaxs:[],val_dists:[],peak_dists:[],localmins2:[],localmaxs2:[],val_dists2:[],peak_dists2:[]},startTime:Date.now()},o=Ut("fnirs",i,r,n);return t&&pc(i,o),Object.assign(o,e)}function wb(t="",e={},r={_id:""},n={structType:"struct",_id:""}){let i={tag:t,Ax:[],Ay:[],Az:[],Gx:[],Gy:[],Gz:[],startTime:Date.now()},o=Ut("imu",i,r,n);return t&&pc(i,o),Object.assign(o,e)}function _b(t="",e={},r={_id:""},n={structType:"struct",_id:""}){let i=Ut("eyetracker",{tag:t,count:0,times:[],x:[],y:[],smax:[],smay:[],startTime:Date.now()},r,n);return Object.assign(i,e)}function lp(t="",e={},r={_id:""},n={structType:"struct",_id:""}){let i=Ut("ecg",{tag:t,count:0,times:[],raw:[],filtered:[],bpm:[],hrv:[],startTime:Date.now()},r,n);return Object.assign(i,e)}function Sb(t="",e={},r={_id:""},n={structType:"struct",_id:""}){}function bb(t="",e={},r={_id:""},n={structType:"struct",_id:""}){let i=ap(t,r,n,e);return i.structType="ppg",i}function Eb(t="",e={},r={_id:""},n={structType:"struct",_id:""}){let i=lp(t,r,n,e);return i.structType="hrv",i}function Ob(t="",e={},r={_id:""},n={structType:"struct",_id:""}){let i=yi(t,r,n,e);return i.structType="emg",i}function xb(t="",e={},r={_id:""},n={structType:"struct",_id:""}){let i=Ut("profile",{tag:t,name:"",username:"",firstName:"",lastName:"",email:"",sex:"",birthday:"",type:"",userRoles:[],id:""},r,n);return Object.assign(i,e)}function Tb(t="",e={},r={_id:""},n={structType:"struct",_id:""}){let i=Ut("authorization",{tag:t,authorizedId:"",authorizedName:"",authorizerId:"",authorizerName:"",authorizations:new Array,structs:new Array,excluded:new Array,groups:new Array,status:"PENDING",expires:!1,associatedAuthId:""},r,n);return Object.assign(i,e)}function kb(t="",e={},r={_id:""},n={structType:"struct",_id:""}){let i=Ut("group",{tag:t,name:"",details:"",admins:new Array,peers:new Array,clients:new Array,users:new Array},r,n);return Object.assign(i,e)}function Nb(t="",e={},r={_id:""},n={structType:"struct",_id:""}){let i=Ut("dataInstance",{tag:t,title:"",author:"",expires:!1,type:"",data:new Array},r,n);return Object.assign(i,e)}function Ib(t="",e={},r={_id:""},n={structType:"struct",_id:""}){let i=Ut("event",{tag:t,event:"",author:"",startTime:"",endTime:"",grade:0,notes:"",attachments:new Array,users:new Array},r,n);return Object.assign(i,e)}function Ab(t="",e={},r={_id:""},n={structType:"struct",_id:""}){let i=Ut("chatroom",{tag:t,message:"",topic:"",author:"",attachments:new Array,comments:new Array,replies:new Array,users:new Array,audioChatActive:!1,videoChatActive:!1},r,n);return Object.assign(i,e)}function Rb(t="",e={},r={_id:""},n={structType:"struct",_id:""}){let i=Ut("comment",{tag:t,author:"",replyTo:"",message:"",rating:0,replies:new Array,users:new Array,attachments:new Array},r,n);return Object.assign(i,e)}function Db(t="",e={},r={_id:""},n={structType:"struct",_id:""}){let i=Ut("notification",{tag:t,note:"",parentUserId:""},r,n);return Object.assign(i,e)}function Fb(t="",e={},r={_id:""},n={structType:"struct",_id:""}){let i=Ut("schedule",{tag:t,title:"",author:"",attachments:new Array,dates:new Array},r,n);return Object.assign(i,e)}function Cb(t="",e={},r={_id:""},n={structType:"struct",_id:""}){let i=Ut("date",{tag:t,timeSet:"",notes:"",recurs:"NEVER",attachments:new Array},r,n);return Object.assign(i,e)}function Uk(t=[],e={scp:[.1,1],delta:[1,4],theta:[4,8],alpha1:[8,12],alpha2:[12,16],beta:[16,30],lowgamma:[30,45],highgamma:[45,100]}){let r={};return t.forEach((n,i)=>{for(let o in e)r[o]||(r[o]=[[],[]]),n>=e[o][0]&&n<=e[o][1]&&(r[o][0].push(n),r[o][1].push(i))}),r}function Vk(t,e,r){let n=(e-t)/r,i=[],o=0;for(;o<e;)i.push(o),o+=n;return i}function on(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function yb(t,e=!0){let r=(t=t.replace(/\/\*\*?/,"")).split("/");e&&(r=r.slice(0,r.length-1));let n=[t];return n.push(t+"/*"),n.push(t+"/**"),r.forEach((i,o)=>{let s=r.slice(0,o+1).join("/");s!=t&&(o===r.length-1&&n.push(s+"/*"),n.push(s+"/**"))}),n}var ys,hc,dc,rp,np,el,ip,mr,gb,tl,kk,Nk,mb,vb,He,gi,io,Ak,oo,Me,Rk,Dk,Fk,Ck,Lk,Pk,Mk,jk,Bk,zk,Lb,Pb,Mb,jb,Wk,qk,Ub,jt,$k,Bb,up,zb=at(()=>{ys=t=>(t?`${t}_`:"")+Math.floor(1e5*Math.random()),hc=(t=Math,e=Date,r=16,n=i=>t.floor(i).toString(r))=>n(e.now()/1e3)+" ".repeat(r).replace(/./g,()=>n(t.random()*r));for(dc=Math.floor(16777215*Math.random()),rp=Ze.index=parseInt(16777215*Math.random(),10),np=(typeof process=="undefined"||typeof process.pid!="number"?Math.floor(1e5*Math.random()):process.pid)%65535,el=function(t){return!(t==null||!t.constructor||typeof t.constructor.isBuffer!="function"||!t.constructor.isBuffer(t))},ip=[],mr=0;mr<256;mr++)ip[mr]=(mr<=15?"0":"")+mr.toString(16);gb=new RegExp("^[0-9a-fA-F]{24}$"),tl=[];for(mr=0;mr<10;)tl[48+mr]=mr++;for(;mr<16;)tl[55+mr]=tl[87+mr]=mr++;kk=Ze;Ze.default=Ze,Ze.createFromTime=function(t){return t=parseInt(t,10)%4294967295,new Ze((e=8,((r=(r=t).toString(16)).length===e?r:"00000000".substring(r.length,e)+r)+"0000000000000000"));var e,r},Ze.createFromHexString=function(t){if(t===void 0||t!=null&&t.length!==24)throw new Error("Argument passed in must be a single String of 12 bytes or a string of 24 hex characters");for(var e="",r=0;r<24;)e+=String.fromCharCode(tl[t.charCodeAt(r++)]<<4|tl[t.charCodeAt(r++)]);return new Ze(e)},Ze.isValid=function(t){return t!=null&&(typeof t=="number"||(typeof t=="string"?t.length===12||t.length===24&&gb.test(t):t instanceof Ze||!!el(t)||typeof t.toHexString=="function"&&(t.id instanceof _Buffer||typeof t.id=="string")&&(t.id.length===12||t.id.length===24&&gb.test(t.id))))},Ze.prototype={constructor:Ze,toHexString:function(){if(!this.id||!this.id.length)throw new Error("invalid ObjectId, ObjectId.id must be either a string or a Buffer, but is ["+JSON.stringify(this.id)+"]");if(this.id.length===24)return this.id;if(el(this.id))return this.id.toString("hex");for(var t="",e=0;e<this.id.length;e++)t+=ip[this.id.charCodeAt(e)];return t},equals:function(t){return t instanceof Ze?this.toString()===t.toString():typeof t=="string"&&Ze.isValid(t)&&t.length===12&&el(this.id)?t===this.id.toString("binary"):typeof t=="string"&&Ze.isValid(t)&&t.length===24?t.toLowerCase()===this.toHexString():typeof t=="string"&&Ze.isValid(t)&&t.length===12?t===this.id:!(t==null||!(t instanceof Ze||t.toHexString))&&t.toHexString()===this.toHexString()},getTimestamp:function(){var t,e=new Date;return t=el(this.id)?this.id[3]|this.id[2]<<8|this.id[1]<<16|this.id[0]<<24:this.id.charCodeAt(3)|this.id.charCodeAt(2)<<8|this.id.charCodeAt(1)<<16|this.id.charCodeAt(0)<<24,e.setTime(1e3*Math.floor(t)),e},generate:function(t){typeof t!="number"&&(t=~~(Date.now()/1e3)),t=parseInt(t,10)%4294967295;var e=rp=(rp+1)%16777215;return String.fromCharCode(t>>24&255,t>>16&255,t>>8&255,255&t,dc>>16&255,dc>>8&255,255&dc,np>>8&255,255&np,e>>16&255,e>>8&255,255&e)}};Nk=Symbol&&Symbol.for&&Symbol.for("nodejs.util.inspect.custom")||"inspect";Ze.prototype[Nk]=function(){return"ObjectID("+this+")"},Ze.prototype.toJSON=Ze.prototype.toHexString,Ze.prototype.toString=Ze.prototype.toHexString;mb=Object.defineProperty,vb=(t,e)=>{for(var r in e)mb(t,r,{get:e[r],enumerable:!0})},He=(t,e,r)=>(((n,i,o)=>{i in n?mb(n,i,{enumerable:!0,configurable:!0,writable:!0,value:o}):n[i]=o})(t,typeof e!="symbol"?e+"":e,r),r),gi={};vb(gi,{AuthorizationStruct:()=>Tb,ChatroomStruct:()=>Ab,CoherenceMap:()=>sp,CoherenceStruct:()=>op,CommentStruct:()=>Rb,DataStruct:()=>Nb,DateStruct:()=>Cb,ECGStruct:()=>lp,EDAStruct:()=>Sb,EEGCoordinates:()=>Ik,EEGStruct:()=>yi,EMGStruct:()=>Ob,EventStruct:()=>Ib,EyeTrackerStruct:()=>_b,FNIRSStruct:()=>ap,FrequencyBandsStruct:()=>gc,GroupStruct:()=>kb,HRVStruct:()=>Eb,IMUStruct:()=>wb,NotificationStruct:()=>Db,PPGStruct:()=>bb,ProfileStruct:()=>xb,ScheduleStruct:()=>Fb,Struct:()=>Ut,eegCoordinates:()=>io,setCoordinate:()=>pc,structRegistry:()=>Ak});io={FP1:[-21.2,66.9,12.1],FPZ:[1.4,65.1,11.3],FP2:[24.3,66.3,12.5],AF7:[-41.7,52.8,11.3],AF3:[-32.7,48.4,32.8],AFZ:[1.8,54.8,37.9],AF4:[35.1,50.1,31.1],AF8:[43.9,52.7,9.3],F5:[-51.4,26.7,24.7],F3:[-39.7,25.3,44.7],F1:[-22.1,26.8,54.9],FZ:[0,26.8,60.6],F2:[23.6,28.2,55.6],F4:[41.9,27.5,43.9],F6:[52.9,28.7,25.2],F7:[-52.1,28.6,3.8],F8:[53.2,28.4,3.1],FC5:[-59.1,3,26.1],FC3:[-45.5,2.4,51.3],FC1:[-24.7,.3,66.4],FCZ:[1,1,72.8],FC2:[26.1,3.2,66],FC4:[47.5,4.6,49.7],FC6:[60.5,4.9,25.5],FT9:[-53.8,-2.1,-29.1],FT7:[-59.2,3.4,-2.1],FT8:[60.2,4.7,-2.8],FT10:[55,-3.6,-31],T7:[-65.8,-17.8,-2.9],T5:[-61.5,-65.3,1.1],T3:[-70.2,-21.3,-10.7],T4:[71.9,-25.2,-8.2],T6:[59.3,-67.6,3.8],T8:[67.4,-18.5,-3.4],C5:[-63.6,-18.9,25.8],C3:[-49.1,-20.7,53.2],C1:[-25.1,-22.5,70.1],CZ:[.8,-21.9,77.4],C2:[26.7,-20.9,69.5],C4:[50.3,-18.8,53],C6:[65.2,-18,26.4],CP5:[-61.8,-46.2,22.5],CP3:[-46.9,-47.7,49.7],CP1:[-24,-49.1,66.1],CPZ:[.7,-47.9,72.6],CP2:[25.8,-47.1,66],CP4:[49.5,-45.5,50.7],CP6:[62.9,-44.6,24.4],TP9:[-73.6,-46.7,-4],TP7:[-63.6,-44.7,-4],TP8:[64.6,-45.4,-3.7],TP10:[74.6,-47.4,-3.7],P9:[-50.8,-51.3,-37.7],P7:[-55.9,-64.8,0],P5:[-52.7,-67.1,19.9],P3:[-41.4,-67.8,42.4],P1:[-21.6,-71.3,52.6],PZ:[.7,-69.3,56.9],P2:[24.4,-69.9,53.5],P4:[44.2,-65.8,42.7],P6:[54.4,-65.3,20.2],P8:[56.4,-64.4,.1],P10:[51,-53.9,-36.5],PO7:[-44,-81.7,1.6],PO3:[-33.3,-84.3,26.5],POZ:[0,-87.9,33.5],PO4:[35.2,-82.6,26.1],PO8:[43.3,-82,.7],O1:[-25.8,-93.3,7.7],OZ:[.3,-97.1,8.7],O2:[25,-95.2,6.2]};Ak={Struct:Ut,EEGStruct:yi,FNIRSStruct:ap,CoherenceStruct:op,CoherenceMap:sp,FrequencyBandsStruct:gc,IMUStruct:wb,EyeTrackerStruct:_b,ECGStruct:lp,EDAStruct:Sb,PPGStruct:bb,HRVStruct:Eb,EMGStruct:Ob,ProfileStruct:xb,AuthorizationStruct:Tb,GroupStruct:kb,DataStruct:Nb,EventStruct:Ib,ChatroomStruct:Ab,CommentStruct:Rb,NotificationStruct:Db,ScheduleStruct:Fb,DateStruct:Cb};vb({},{bandpassWindow:()=>Vk,get40HzGamma:()=>Pk,getAlphaBetaRatio:()=>Ck,getAlphaRatio:()=>Dk,getAlphaThetaRatio:()=>Lk,getCoherenceScore:()=>Rk,getHEGRatioScore:()=>jk,getLowGammaScore:()=>Mk,getThetaBetaRatio:()=>Fk,mapCoherenceData:()=>zk,mapFFTData:()=>Bk,splitFrequencyBands:()=>Uk});oo=class{constructor(){}static genSineWave(t=20,e=1,r=1,n=512,i=0,o=1){for(var s=[],a=[],l=1/n,h=0;h<r;h+=l){var g=Math.sin(2*Math.PI*t*h)*e;g+=Math.sin(2*Math.PI*i*h)*o,s.push(g),a.push(h)}return[a,s]}static getSineAmplitude(t=20,e=1,r=0,n=0){return Math.sin(this.TWO_PI*t*r+n)*e}static mean(t){return t.reduce((e,r)=>r+e)/t.length}static mode(t){return t.sort((e,r)=>t.filter(n=>n===e).length-t.filter(n=>n===r).length).pop()}static std(t,e){let r=e;e||(r=this.mean(t));let n=0;for(let i=0;i<t.length;i++){let o=t[i]-r;n+=o*o}return Math.sqrt(n/t.length)}static relError(t=[],e=[],r=!0){if(t.length!==e.length)throw new Error("Input arrays of same length!");let n=t.length,i=[];for(let o=0;o<n;o++){let s=(t[o]-e[o])/t[o];r&&(s=Math.abs(s)),i.push(s)}return i}static informationEntropy(t=[]){let e=[],r=t.length;for(let n=0;n<r;n++){let i=t[n]*Math.log(t[n]);isNaN(i)&&(i=0),e.push(i)}return e}static zscore(t){let e=this.mean(t),r=this.std(t,e),n=[];for(let i=0;i<t.length;i++)n.push((t[i]-e)/r);return n}static variance(t){var e=this.mean(t);return t.reduce((r,n)=>r+Ty(n-e,2),0)/t.length}static dot(t,e){for(var r=0,n=0;n<t.length;n++)r+=t[n]*e[n];return r}static cross3D(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}static magnitude(t){var e=0;return t.forEach(r=>{e+=r*r}),Math.sqrt(e)}static distance(t,e){var r=0;return t.forEach((n,i)=>{r+=(e[i]-n)*(e[i]-n)}),Math.sqrt(r)}static normalize(t){var e;e=this.magnitude(t);var r=[];return t.forEach((n,i)=>{r.push(n*e)}),r}static quadraticFormula(t,e,r){let n=Math.sqrt(e*e-4*t*r);if(!isNaN(n))return["complex","complex"];let i=1/(2*t);if(n===0)return[e*i];let o=-e;return[(o+n)*i,(o-n)*i]}static newtonsMethod(t=o=>Math.pow(o,5)+o*o-o-.2,e=0,r=1,n=.01,i=10){let o=[];for(let s=0;s<i;s++){let a=Math.random()*(r-e),l=t(a),h=t(a+n),g=(h-l)/n,m=a+n;for(;Math.abs(g)>n;){let b=m+-l/N;l=h,h=t(b);let N=(h-l)/(b-m)}let p,w=o.find((b,N)=>{if(Math.abs(xn1-b)<n)return p=N,!0});w?o[p]=.5*(xn1+w):o.push(xn1)}return o}static makeVec(t,e){var r=[];return t.forEach((n,i)=>{r.push(e[i]-n)}),r}static transpose(t){return t[0].map((e,r)=>t.map(n=>n[r]))}static matmul(t,e){for(var r=t.length,n=t[0].length,i=(e.length,e[0].length),o=new Array(r),s=0;s<r;++s){o[s]=new Array(i);for(var a=0;a<i;++a){o[s][a]=0;for(var l=0;l<n;++l)o[s][a]+=t[s][l]*e[l][a]}}return o}static matscale(t,e){let r=[];for(var n=0;n<t.length;n++){r[n]=[];for(let i=0;i<t[0].length;i++)r[n][i]=t[n][i]*e}return r}static matadd(t,e){let r=[];for(let i=0;i<t.length;i++){r[i]=[];for(var n=0;n<t[0].length;n++)r[i][n]=t[i][n]+e[i][n]}return r}static matsub(t,e){let r=[];for(let i=0;i<t.length;i++){r[i]=[];for(var n=0;n<t[0].length;n++)r[i][n]=t[i][n]-e[i][n]}return r}static histogram(t=[],e=1,r){let n=[...t];n.sort(function(l,h){return l-h});let i=Math.min(...n);if(typeof r=="number"){let l=Math.max(...n);e=Math.abs((l-i)/(r-1))}let o=i,s=[],a=[];for(let l=0;l<n.length;l++){let h=e*o;if(n[l]>i+h){o++,h+=e;let g=i+h+.5*h;s.push(g),a.push(0)}a[a.length-1]++}return[s,a]}static normalDistribution(t=[],e=!0,r=1e-4){let n=this.mean(t),i=this.variance(t),o=t.length,s=[],a=1/(this.TWO_PI*i),l=1/i,h=0;for(let g=0;g<o;g++){let m=Math.exp(-.5*Math.pow((t[g]-n)*l,2))*a;m<r&&(m=0),s.push(m),h+=m}if(e){let g=1/h;s=s.map(m=>m*g)}return s}static expectedValue(t=[],e=this.normalDistribution(t)){return t.reduce((r,n,i)=>r+n*e[i])}static originMoment(t=[],e=this.normalDistribution(t),r=1){return t.reduce((n,i,o)=>n+Math.pow(i,r)*e[o])}static centralMoment(t=[],e=this.normalDistribution(t),r=1){let n=this.mean(t);return t.reduce((i,o,s)=>i+Math.pow(o-n,r)*e[s]/t.length)}static linearDiscriminantAnalysis(t=[],e=[]){let r=this.mean(t),n=this.mean(e),i=this.cov1d(t,e),o=this.normalDistribution(t),s=[];for(let a=0;a<t.length;a++)s.push(x[a]*i*n-.5*r*i*n+Math.log10(o[a]));return s}static conv1D(t=[],e=[1/3,1/3,1/3],r=Math.floor(.5*e.length)){let n=[],i=1/e.length;if(r>0){let a=new Array(r).fill(0);t=[...a,...t,...a]}let o=Math.floor(.5*e.length),s=t.length-e.length+o;for(let a=o;a<s;a++){let l=0;for(let h=0;h<e.length;h++)l+=t[a-o]*e[h];n.push(l*i)}return n}static conv2D(t=[[],[],[]],e=[[],[],[]],r=0){let n,i=new Array(t.length-Math.ceil(.5*e.length)).fill([]),o=oo.transpose(o);if(r>0){let N=new Array(r).fill(0);n=oo.transpose(t);for(let O=0;O<n.length;O++)n[O]=[...N,...n[O],...N];t=oo.transpose(n);for(let O=0;O<t.length;O++)t[O]=[...N,...t[O],...N]}let s,a=Math.floor(.5*e[0].length),l=Math.floor(.5*o[0].length),h=t[0].length-e[0].length+a,g=n[0].length-o[0].length+l,m=1/(e[0].length*o[0].length),p=h*g,w=a,b=l;for(;w<p;){let N=0;s=w%t[0].length,s===0&&b++;for(let O=0;O<e[0].length;O++){for(let I=0;I<o[0].length;O++)N+=t[b-l+I][s-a+O]*e[I][O];i[b].push(N*m)}w++}return i}static cov2d(t){var e=this.transpose(t),r=[],n=[],i=[];t.forEach((w,b)=>{n.push(this.mean(w))}),e.forEach((w,b)=>{i.push(this.mean(w))}),t.forEach((w,b)=>{r.push([]);for(var N=0;N<w.length;N++)r[b].push((t[b][N]-n[b])*(t[b][N]-i[N])/(w.length-1))});for(var o=this.transpose(r),s=r.length,a=r[0].length,l=(o.length,o[0].length),h=new Array(s),g=0;g<s;++g){h[g]=new Array(l);for(var m=0;m<l;++m){h[g][m]=0;for(var p=0;p<a;++p)h[g][m]+=r[g][p]*o[p][m]/(t[0].length-1)}}return h}static cov1d(t=[],e=[]){return this.cov2d([t,e])}static cov3d(t=[],e=[],r=[]){return[[this.cov1d(t,t),this.cov1d(t,e),this.cov1d(t,r)],[this.cov1d(e,t),this.cov1d(e,e),this.cov1d(e,r)],[this.cov1d(r,t),this.cov1d(r,e),this.cov1d(r,r)]]}static covNd(t=[]){let e=[];t.forEach((r,n)=>{e.push([]),t.forEach((i,o)=>{e[n].push(this.cov1d(r,i))})})}static eigens2x2(t=[[1,2],[3,4]]){let e=t[0][0]*t[1][1]-t[0][1]*t[1][0],r=.5*(t[0][0]+t[1][1]),n=Math.sqrt(r*r-e);return[r+n,r-n]}static eigenvectors2x2(t=[[1,2],[3,4]],e=[1,2]){let r=[-t[0][1],t[0][0]-e[0]];r[0]===0&&r[1]===0&&(r[0]=t[1][1]-e[0],r[1]=-t[1][0]);let n=[-t[0][1],t[0][0]-e[1]];return n[0]===0&&n[1]===0&&(n[0]=t[1][1]-e[1],n[1]=-t[1][0]),[r,n]}static fastpca2d(t,e){let r=this.cov1d(t,e),n=this.eigens2x2(r);n[1]>n[0]&&n.reverse();let i=this.eigenvectors2x2(r,n);return console.log(n,i),[n,i]}static crosscorrelation(t,e){var r=[...e,...Array(e.length).fill(0)],n=this.mean(t),i=this.mean(e),o=t.reduce((m,p)=>m+Math.pow(p-n,2));o=Math.sqrt(o);for(var s=e.reduce((m,p)=>m+Math.pow(p-n,2)),a=1/(o*(s=Math.sqrt(s))),l=new Array(t.length).fill(0),h=0;h<t.length;h++){var g=t.reduce((m,p,w)=>m+(p-n)*(r[h+w]-i));l[h]=g*a}return l}static autocorrelation(t){for(var e=[...t,...Array(t.length).fill(0)],r=this.mean(t),n=t.reduce((l,h)=>l+Math.pow(h-r,2)),i=1/((n=Math.sqrt(n))*n),o=new Array(t.length).fill(0),s=0;s<t.length;s++){var a=t.reduce((l,h,g)=>l+(h-r)*(e[s+g]-r));o[s]=a*i}return o}static correlograms(t=[[],[]]){var e=[];return t.forEach((r,n)=>{t.forEach((i,o)=>{o>=n&&e.push(oo.crosscorrelation(r,i))})}),e}static sma(t=[],e){for(var r=[],n=0;n<t.length;n++)if(n==0)r.push(t[0]);else if(n<e){var i=t.slice(0,n+1);r.push(i.reduce((o,s)=>s+o)/(n+1))}else i=t.slice(n-e,n),r.push(i.reduce((o,s)=>s+o)/e);return r}static sum(t=[]){return t.length>0?t.reduce((e,r)=>r+e):0}static reduceArrByFactor(t,e=2){return t.filter((r,n)=>n%e==0)}static makeArr(t,e,r){for(var n=[],i=(e-t)/(r-1),o=0;o<r;o++)n.push(t+i*o);return n}static interpolateArray(t,e,r=1){var n,i,o=new Array,s=new Number((t.length-1)/(e-1));o[0]=t[0];for(var a=1;a<e-1;a++){var l=a*s,h=new Number(Math.floor(l)).toFixed(),g=new Number(Math.ceil(l)).toFixed(),m=l-h;o[a]=(n=t[h],i=t[g],(n+(i-n)*m)*r)}return o[e-1]=t[t.length-1],o}static isExtrema(t,e="peak"){let r=[...t];if(r.length%2==0&&r.pop(),t.length>1){let n=!0;for(let i=0;i<r.length;i++){let o=r[i];if(e==="peak"){if(i<Math.floor(.5*r.length)&&o>=r[Math.floor(.5*r.length)]){n=!1;break}if(i>Math.floor(.5*r.length)&&o>=r[Math.floor(.5*r.length)]){n=!1;break}}else if(e==="valley"){if(i<Math.floor(.5*r.length)&&o<=r[Math.floor(.5*r.length)]){n=!1;break}if(i>Math.floor(.5*r.length)&&o<=r[Math.floor(.5*r.length)]){n=!1;break}}else{if(i<Math.floor(.5*r.length)&&o<=r[Math.floor(.5*r.length)]){n=!1;break}if(i>Math.floor(.5*r.length)&&o<=r[Math.floor(.5*r.length)]){n=!1;break}}}if(e!=="peak"&&e!=="valley"&&n===!1){n=!0;for(let i=0;i<r.length;i++){let o=r[i];if(i<Math.floor(.5*r.length)&&o>=r[Math.floor(.5*r.length)]){n=!1;break}if(i>Math.floor(.5*r.length)&&o>=r[Math.floor(.5*r.length)]){n=!1;break}}}return n}}static isCriticalPoint(t,e="peak"){let r=[...t];if(r.length%2==0&&r.pop(),t.length>1){let n=!0;for(let i=0;i<r.length;i++){let o=r[i];if(e==="peak"){if(i<.5*r.length&&o<=0){n=!1;break}if(i>.5*r.length&&o>0){n=!1;break}}else if(e==="valley"){if(i<.5*r.length&&o>=0){n=!1;break}if(i>.5*r.length&&o<0){n=!1;break}}else{if(i<.5*r.length&&o>=0){n=!1;break}if(i>.5*r.length&&o<0){n=!1;break}}}if(e!=="peak"&&e!=="valley"&&n===!1){n=!0;for(let i=0;i<r.length;i++){let o=r[i];if(i<.5*r.length&&o<=0){n=!1;break}if(i>.5*r.length&&o>0){n=!1;break}}}return n}}static getPeakThreshold(t,e,r){let n,i=t.filter((o,s)=>{if(e.indexOf(s)>-1)return!0});return n=r===0?this.mean(i):.5*(r+this.mean(i)),n}static column(t,e){let r=new Array(t.length).fill(0).map(()=>new Array(1).fill(0));for(let n=0;n<t.length;n++)r[n][0]=t[n][e];return r}static flatten_vector(t){let e=[];for(let r=0;r<t.length;r++)e[r]=t[r][0];return e}static squared_difference(t,e){let r=0;for(let n=0;n<t.length;n++)r+=Math.pow(t[n]-e[n],2);return r}static shift_deflate(t,e,r){let n=Math.sqrt(this.matmul(this.transpose(r),r)),i=this.matscale(r,1/n),o=this.matscale(this.matmul(i,this.transpose(i)),e);return this.matsub(t,o)}static eigenvalue_of_vector(t,e){return ev=this.matmul(this.matmul(this.transpose(e),t),e),ev}static power_iteration(t,e=1e-5,r=1e3){let n=t.length,i=new Array(n).fill(0).map(()=>new Array(1).fill(Math.sqrt(n))),o=this.eigenvalue_of_vector(t,i),s=1,a=0;for(;s>e&&a<r;){let l=JSON.parse(JSON.stringify(o)),h=this.matmul(t,i);i=this.normalize(h),o=this.eigenvalue_of_vector(t,i),s=Math.abs(o-l),a++}return[o,i]}static eigens(t,e=1e-4,r=1e3){let n=[],i=[];for(let o=0;o<t.length;o++){let s=this.power_iteration(t,e,r),a=s[0],l=s[1];n[o]=a,i[o]=this.flatten_vector(l),t=this.shift_deflate(t,a,l)}return[n,i]}static pca(t,e=1e-5){let r=t.length,n=new Array(r),i=new Array(r),o=this.transpose(t);for(n[0]=this.column(t,0);espilon>e;){i[0]=this.matmul(o,n[0]);let s=this.matmul(this.transpose(n[0]),n[0]);i[0]=this.matscale(i[0],1/s);let a=Math.sqrt(this.matmul(this.transpose(i[0]),i[0]));i[0]=this.matscale(i[0],1/a);let l=this.matmul(t,i[0]),h=this.matmul(this.transpose(i[0]),i[0]);l=this.matscale(l,1/h),this.squared_difference(n[0],l),n[0]=JSON.parse(JSON.stringify(l))}return this.matmul(this.transpose(n[0]),n[0])}static p300(t=[],e=[],r=[],n=256){let i=Math.floor(n/10),o=this.sma(e,i),s=this.peakDetect(o,"peak",i),a=this.mean(o),l=this.std(o,a),h=0,g=[];return s.length>0&&t.forEach((m,p)=>{for(;r[s[h]]<m+200&&(h++,s[h]););let w=0,b=[];for(;r[s[h+w]]<m+600&&(b.push(h+w),w++,s[h+w]););if(b.length>1){let N=[];b.forEach(D=>{N.push(o[s[D]])});let O=Math.max(...N),I=b[N.indexOf(O)];g.push({event_timestamp:m,event_index:p,peak_timestamp:r[[s[I]]],signal_index:[s[I]],signal_amplitude:e[[s[I]]],zscore:(o[s[I]]-a)/l})}else b.length===1&&g.push({event_timestamp:m,event_index:p,peak_timestamp:r[s[b[0]]],signal_index:s[b[0]],signal_amplitude:e[[s[b[0]]]],zscore:(o[s[b[0]]]-a)/l})}),g}},Me=oo;He(Me,"TWO_PI",2*Math.PI),He(Me,"C",299792458),He(Me,"G",66743e-15),He(Me,"h",662607015e-42),He(Me,"R",8314.32),He(Me,"Ra",287),He(Me,"H",69.3),He(Me,"kbar",1054571817e-43),He(Me,"kB",1380649e-29),He(Me,"ke",89875517923e-1),He(Me,"me",91093837015e-41),He(Me,"mp",167262192369e-38),He(Me,"mn",167492749804e-38),He(Me,"P0",101325),He(Me,"T0",288.15),He(Me,"p0",1.225),He(Me,"Na",60220978e16),He(Me,"y",1.405),He(Me,"M0",28.96643),He(Me,"g0",9.80665),He(Me,"Re",6378100),He(Me,"B",1458e-9),He(Me,"S",110.4),He(Me,"Sigma",365e-12),He(Me,"imgkernels",{edgeDetection:[[-1,-1,-1],[-1,8,-1],[-1,-1,-1]],boxBlur:[[1/9,1/9,1/9],[1/9,1/9,1/9],[1/9,1/9,1/9]],sobelLeft:[[1,0,-1],[2,0,-2],[1,0,-1]],sobelRight:[[-1,0,1],[-2,0,2],[-1,0,1]],sobelTop:[[1,2,1],[0,0,0],[-1,-2,-1]],sobelBottom:[[-1,2,1],[0,0,0],[1,2,1]],identity:[[0,0,0],[0,1,0],[0,0,0]],gaussian3x3:[[1,2,1],[2,4,2],[1,2,1]],guassian7x7:[[0,0,0,5,0,0,0],[0,5,18,32,18,5,0],[0,18,64,100,64,18,0],[5,32,100,100,100,32,5],[0,18,64,100,64,18,0],[0,5,18,32,18,5,0],[0,0,0,5,0,0,0]],emboss:[[-2,-1,0],[-1,1,1],[0,1,2]],sharpen:[[0,-1,0],[-1,5,-1],[0,-1,0]]}),He(Me,"integral",(t=n=>n,e=[],r=.01)=>{let n=0;for(let i=e[0];i<e[1];i+=r)n+=t(i)*r;return n}),He(Me,"dintegral",(t=(i,o)=>i+o,e=[[],[]],r=.01,n=r)=>{let i=0;for(let o=e[0][0]+r;o<e[0][1];o+=r)for(let s=e[1][0]+n;s<e[1][1];s+=n)i+=t(o,s)*r*n;return i}),He(Me,"tintegral",(t=(o,s,a)=>o+s+a,e=[[],[],[]],r=.01,n=r,i=r)=>{let o=0;for(let s=e[0][0]+r;s<e[0][1];s+=r)for(let a=e[1][0]+n;a<e[1][1];a+=n)for(let l=e[2][0]+i;l<e[2][1];l+=i)o+=t(s,a,l)*r*n*i;return o}),He(Me,"pintegral",(t=n=>n,e=[],r=.01)=>{let n,i,o=0;for(let s=e[0];s<e[1];s+=r)n=i,i=t(s),n&&(o+=oo.distance([0,n],[r,i]));return o}),He(Me,"peakDetect",(t,e="peak",r=49)=>{let n=Math.floor(.5*r),i=[];for(let o=0;o<t.length-r;o++)oo.isExtrema(t.slice(o,o+r),e)&&i.push(o+n-1);return i});Rk=(t,e="alpha1")=>{let r=[];return Array.isArray(t)||(t=[t]),t.forEach(n=>{if(n.fftCount>0){let i=n.fftCount,o=Math.min(20,i),s=n.means[e].slice(i-o);r.push(Me.mean(s))}}),Me.mean(r)},Dk=t=>t.fftCount>0?t.means.alpha2[t.fftCount-1]/t.means.alpha1[t.fftCount-1]:0,Fk=t=>t.fftCount>0?t.means.theta[t.fftCount-1]/t.means.beta[t.fftCount-1]:0,Ck=t=>t.fftCount>0?.5*(t.means.alpha1[t.fftCount-1]+t.means.alpha2[t.fftCount-1])/t.means.beta[t.fftCount-1]:0,Lk=t=>t.fftCount>0?.5*(t.means.alpha1[t.fftCount-1]+t.means.alpha2[t.fftCount-1])/t.means.theta[t.fftCount-1]:0,Pk=(t,e)=>{if(t.fftCount>0&&Array.isArray(e)){let r=t.slices.lowgamma[t.fftCount-1],n=[];return r.forEach((i,o)=>{e.lowgamma[0][o]>38&&e.lowgamma[0][o]<42&&n.push(i)}),Math.max(...n)}return 0},Mk=t=>{if(t.fftCount>0){let e=t.fftCount,r=20;e<r&&(r=e);let n=t.means.lowgamma.slice(e-r);return t.means.lowgamma[e-1]-Me.mean(n)}return 0},jk=t=>{if(t.count>0){let e=t.count,r=40;e<r&&(r=e);let n=t.ratio.slice(e-r);return t.ratio[e-1]-Me.mean(n)}return 0};Bk=(t,e,r,n)=>{let i=0;n.fftCount++,n.fftTimes.push(e),n.ffts.push(t);for(let o in r){let s=t.slice(i,i+r[o][1].length);n.slices[o].push(s),n.means[o].push(s.reduce((a,l)=>a+l)/s.length),i+=r[o][1].length}},zk=(t,e,r,n)=>{t.forEach((i,o)=>{n[o].fftCount++,n[o].fftTimes.push(e),n[o].ffts.push(data);let s=0;for(let a in r){let l=fft.slice(s,s+r[a][1].length);coord.slices[a].push(l),coord.means[a].push(l.reduce((h,g)=>h+g)/l.length),s+=r[a][1].length}})};Lb=class{constructor(e=!1,r=!1){on(this,"addFunc",(n=null,i=null,o=!0)=>{var s=null;return i!==null&&(n==null?this.listeners.forEach((a,l)=>{s=a.listener.addFunc(i),a.listener.running==0&&o==1&&a.listener.start()}):this.listeners.find((a,l)=>{a.key===n&&(s=a.listener.addFunc(i),a.listener.running==0&&o==1&&a.listener.start())})),s}),on(this,"getFuncs",n=>n?this.listeners.find((i,o)=>{if(i.key===n)return!0}).onchangeFuncs:void 0),on(this,"removeFuncs",(n=null,i=null,o=!1)=>{n==null?this.listeners.forEach((s,a)=>{s.listener.removeFuncs(i)}):this.listeners.find((s,a)=>{s.key===n&&(s.listener.removeFuncs(i),s.listener.onchangeFuncs.length!==0&&o!==!0||s.listener.stop())})}),this.debug=e,this.listeners=[],this.synchronous=r,this.syncInterval="FRAMERATE",this.syncAnim=void 0,r===!0&&this.startSync()}addListener(e=null,r,n,i,o,s=this.debug,a=!0){if(r!==void 0){var l=e;l==null&&(l=Math.floor(1e5*Math.random())),this.synchronous===!0&&(a=!1);var h={key:l,listener:new Pb(r,n,i,o,s,a)};this.listeners.push(h)}else console.error("You must assign an object")}getListener(e){return this.listeners.find((r,n)=>{if(r.key===e)return!0})}hasKey(e){var r=!1;return this.listeners.forEach((n,i)=>{if(n.key===e)return r=!0,!0}),r}getKeyIndices(e){var r=[];return this.listeners.find((n,i)=>{n.key===e&&r.push(i)}),r}onchange(e=null,r=null){e==null?this.listeners.forEach((n,i)=>{n.listener.onchange=r}):this.listeners.find((n,i)=>{n.name===e&&(n.listener.onchange=r)})}stop(e=null){this.synchronous&&this.stopSync(),e==null?this.listeners.forEach((r,n)=>{r.listener.stop()}):this.listeners.find((r,n)=>{r.name===e&&r.listener.stop()})}start(e=null){this.synchronous&&this.stopSync(),e==null?this.listeners.forEach((r,n)=>{r.listener.start()}):this.listeners.find((r,n)=>{r.name===e&&r.listener.start()})}startSync(){if(this.synchronous===!1){this.synchronous=!0,this.stop();let e=()=>{this.synchronous===!0&&(this.listeners.forEach(r=>{r.listener.check()}),this.syncInterval==="FRAMERATE"?this.syncAnim=requestAnimationFrame(e):typeof this.syncInterval=="number"&&setTimeout(e,this.syncInterval))};e()}}stopSync(){this.synchronous=!1,this.syncAnim&&cancelAnimationFrame(this.syncAnim)}remove(e=null){if(e==null)this.listeners.forEach(n=>{n.listener.stop()}),this.listeners.splice(0,this.listeners.length);else{var r=[];this.listeners.forEach((n,i)=>{n.key===e&&r.push(i)}),r.reverse().forEach(n=>{this.listeners[n].listener.stop(),this.listeners.splice(n,1)})}}},Pb=class{constructor(e,r="__ANY__",n=this.onchange,i="FRAMERATE",o=!1,s=!0){on(this,"onchange",a=>{console.log(this.propName," changed from: ",this.propOld," to: ",this.object[this.propName])}),on(this,"addFunc",(a=null)=>{let l=0;return a!==null&&(this.onchangeFuncs.push({idx:this.funcs,onchange:a}),l=this.funcs,this.funcs++),l}),on(this,"onchangeMulti",a=>{[...this.onchangeFuncs].forEach((l,h)=>{this.debug===!0&&console.log(l.onchange),l.onchange(a)})}),on(this,"setListenerRef",a=>{a==="__ANY__"||a==null?this.propOld=JSON.stringifyFast(this.object):Array.isArray(this.object[a])?this.propOld=JSON.stringifyFast(this.object[a].slice(this.object[a].length-20)):typeof this.object[a]=="object"?this.propOld=JSON.stringifyFast(this.object[a]):typeof this.object[a]=="function"?this.propOld=this.object[a].toString():this.propOld=this.object[a],this.debug===!0&&console.log("propname",a,", new assignment: ",this.propOld)}),on(this,"check",()=>{let a=!1;if(this.propName==="__ANY__"||this.propName===null||this.propName===void 0)this.propOld!==JSON.stringifyFast(this.object)&&(this.debug===!0&&console.log("onchange: ",this.onchange),this.onchange(this.object),this.onchangeFuncs.length>0&&this.onchangeMulti(this.object),this.setListenerRef(this.propName),a=!0);else if(Array.isArray(this.object[this.propName]))this.propOld!==JSON.stringifyFast(this.object[this.propName].slice(this.object[this.propName].length-20))&&(this.debug===!0&&console.log("onchange: ",this.onchange),this.onchange(this.object[this.propName]),this.onchangeFuncs.length>0&&this.onchangeMulti(this.object[this.propName]),this.setListenerRef(this.propName),a=!0);else if(typeof this.object[this.propName]=="object"){let l=JSON.stringifyFast(this.object[this.propName]);this.propOld!==l&&(this.debug===!0&&console.log("onchange: ",this.onchange),this.onchange(this.object[this.propName]),this.onchangeFuncs.length>0&&this.onchangeMulti(this.object[this.propName]),this.setListenerRef(this.propName),a=!0)}else typeof this.object[this.propName]=="function"?this.propOld!==this.object[this.propName].toString()&&(this.debug===!0&&console.log("onchange: ",this.onchange),this.onchange(this.object[this.propName].toString()),this.onchangeFuncs.length>0&&this.onchangeMulti(this.object[this.propName].toString()),this.setListenerRef(this.propName),a=!0):this.object[this.propName]!==this.propOld&&(this.debug===!0&&console.log("onchange: ",this.onchange),this.onchange(this.object[this.propName]),this.onchangeFuncs.length>0&&this.onchangeMulti(this.object[this.propName]),this.setListenerRef(this.propName),a=!0);return this.running===!0&&(this.debug===!0&&console.log("checking",this.object,this.propName),this.interval==="FRAMERATE"?typeof window=="undefined"?setTimeout(()=>{this.check()},16):this.checker=requestAnimationFrame(this.check):setTimeout(()=>{this.check()},this.interval)),a}),this.debug=o,this.onchange=n,this.onchangeFuncs=[],this.object=e,this.propName=r,this.propOld=void 0,this.setListenerRef(r),this.running=s,this.funcs=0,this.interval,i<10?(this.interval=10,console.log("Min recommended interval set: 10ms")):this.interval=i,s===!0&&(typeof window=="undefined"?setTimeout(()=>{this.check()},60):this.checker=requestAnimationFrame(this.check))}removeFuncs(e=null){let r=0;e===null?this.onchangeFuncs=[]:this.onchangeFuncs.find((n,i)=>{if(n.idx===e)return r=i,!0})!==void 0&&this.onchangeFuncs.splice(r,1)}start(){this.running=!0,typeof window=="undefined"?setTimeout(()=>{this.check()},16):this.checker=requestAnimationFrame(this.check)}stop(){this.running=!1,cancelAnimationFrame(this.checker)}};JSON.stringifyFast===void 0&&(JSON.stringifyFast=function(){let t=new Map,e=[],r=["this"];function n(i,o){let s;if(o!=null)if(typeof o=="object"){let a=o.constructor.name;i&&a==="Object"&&function(h,g){var m=e.length-1;if(e[m]){var p=e[m];if(typeof p=="object")if(p[h]===g||m===0)r.push(h),e.push(g.pushed);else for(;m-->=0;){if(typeof(p=e[m])=="object"&&p[h]===g){m+=2,e.length=m,r.length=m,--m,e[m]=g,r[m]=h;break}m--}}}(i,o);let l=t.get(o);if(l)return"[Circular Reference]"+l;if(t.set(o,r.join(".")),a==="Array")s=o.length>20?o.slice(o.length-20):o;else if(a.includes("Set"))s=Array.from(o);else if(a!=="Object"&&a!=="Number"&&a!=="String"&&a!=="Boolean")s="instanceof_"+a;else if(a==="Object"){let h={};for(let g in o)if(o[g]==null)h[g]=o[g];else if(Array.isArray(o[g]))o[g].length>20?h[g]=o[g].slice(o[g].length-20):h[g]=o[g];else if(o[g].constructor.name==="Object"){h[g]={};for(let m in o[g])if(Array.isArray(o[g][m]))o[g][m].length>20?h[g][m]=o[g][m].slice(o[g][m].length-20):h[g][m]=o[g][m];else if(o[g][m]!=null){let p=o[g][m].constructor.name;p.includes("Set")?h[g][m]=Array.from(o[g][m]):h[g][m]=p!=="Number"&&p!=="String"&&p!=="Boolean"?"instanceof_"+p:o[g][m]}else h[g][m]=o[g][m]}else{let m=o[g].constructor.name;m.includes("Set")?h[g]=Array.from(o[g]):h[g]=m!=="Number"&&m!=="String"&&m!=="Boolean"?"instanceof_"+m:o[g]}s=h}else s=o}else s=o;return s}return function(i,o){e.push(i);let s=JSON.stringify(i,n,o);return t.clear(),e.length=0,r.length=1,s}}()),JSON.stringifyWithCircularRefs===void 0&&(JSON.stringifyWithCircularRefs=function(){let t=new Map,e=[],r=["this"];function n(i,o){if(o!=null&&typeof o=="object"){i&&function(a,l){var h=e.length-1,g=e[h];if(g[a]===l||h===0)r.push(a),e.push(l);else for(;h-->=0;)if((g=e[h])[a]===l){h+=2,e.length=h,r.length=h,--h,e[h]=l,r[h]=a;break}}(i,o);let s=t.get(o);if(s)return"[Circular Reference]"+s;t.set(o,r.join("."))}return o}return function(i,o){try{return e.push(i),JSON.stringify(i,n,o)}finally{t.clear(),e.length=0,r.length=1}}}());Mb=class{constructor(e={},r="FRAMERATE",n=!0){on(this,"setupSynchronousUpdates",()=>{if(!this.listener.hasKey("pushToState")){let i=()=>{if(Object.keys(this.pushToState).length>0){Object.assign(this.data,this.pushToState);for(let o of Object.getOwnPropertyNames(this.pushToState))delete this.pushToState[o]}};this.listener.addListener("pushToState",this.pushToState,"__ANY__",i,this.interval),this.addToState("pushRecord",this.pushRecord,o=>{let s=o.pushed.length;for(let a=0;a<s;a++){let l=o.pushed[a];this.pushCallbacks.state&&this.pushCallbacks.state.forEach(h=>{h.onchange(l)});for(let h in l)this.pushCallbacks[h]&&this.pushCallbacks[h].forEach(g=>{typeof g=="object"&&g.onchange(l[h])})}this.pushRecord.pushed.splice(0,s)})}}),on(this,"addSecondaryKeyResponse",(i=null,o=null,s=!1,a=this.defaultStartListenerEventLoop)=>{if(o!=null){if(this.listener.hasKey(i))return this.listener.addFunc(i,o);if(i!=null&&i!=="state")return this.listener.addListener(i,this.data,i,()=>{},this.data.stateUpdateInterval,s,a),this.listener.addFunc(i,o);if(!this.listener.hasKey("state")){let l=()=>{this.prev=Object.assign({},this.data)};this.listener.addListener("state",this.data,"__ANY__",l,this.interval)}return this.listener.addFunc("state",o)}}),on(this,"removeState",this.unsubscribeAll),this.data=e,this.interval=r,this.pushToState={},this.pushRecord={pushed:[]},this.pushCallbacks={},this.triggers={},this.prev={},this.listener=new Lb,this.defaultStartListenerEventLoop=n}subscribe(e,r,n=this.defaultStartListenerEventLoop){return e&&e!=="state"?this.data[e]!==void 0?this.addSecondaryKeyResponse(e,r,void 0,n):void this.addToState(e,null,r,n):this.addSecondaryKeyResponse(e,r,void 0,n)}subscribeOnce(e,r=n=>{}){let n;n=this.subscribe(e,i=>{r(i),this.unsubscribe(e,n)})}unsubscribe(e,r=null){r!==null?this.removeSecondaryKeyResponse(e,r,!0):console.error("Specify a subcription function index")}unsubscribeAll(e){this.unsubscribeAllSequential(e),this.unsubscribeAllTriggers(e),this.clearAllKeyResponses(e),this.data[e]&&delete this.data[e],this.listener.hasKey("pushToState")&&this.setSequentialState({stateRemoved:e})}setInterval(e="FRAMERATE"){this.interval=e,this.listener.listeners.forEach((r,n)=>{r.interval=this.interval})}updateState(e,r){this.data[e]==null?this.addToState(e,r):this.data[e]=r}addToState(e,r,n=null,i=this.defaultStartListenerEventLoop,o=!1){if(!this.listener.hasKey("pushToState")&&this.defaultStartListenerEventLoop&&this.setupSynchronousUpdates(),this.data[e]=r,this.setSequentialState({stateAdded:e}),n!==null)return this.addSecondaryKeyResponse(e,n,o,i)}get(e){return this.data[e]}getState(){return JSON.parse(JSON.stringifyFast(this.data))}setState(e={},r=!1){if(!this.listener.hasKey("pushToState")&&this.defaultStartListenerEventLoop&&(this.setupSynchronousUpdates(),this.pushRecord.pushed.push(JSON.parse(JSON.stringifyWithCircularRefs(e)))),e.stateUpdateTimeStamp=Date.now(),r){for(let n in e)if(n in this.pushToState){if(Array.isArray(this.pushToState[n])&&Array.isArray(e[n]))e[n]=this.pushToState[n].push(...e[n]);else if(typeof this.pushToState[n]=="object"&&typeof e[n]=="object"){for(let i in e[n])if(this.pushToState[n][i]){if(Array.isArray(this.pushToState[n][i])&&Array.isArray(e[n][i]))e[n][i]=this.pushToState[n][i].push(...e[n][i]);else if(typeof this.pushToState[n][i]=="object"&&typeof e[n][i]=="object"){for(let o in e[n][i])if(this.pushToState[n][i][o])Array.isArray(this.pushToState[n][i][o])&&Array.isArray(e[n][i][o])&&(e[n][i][o]=this.pushToState[n][i][o].push(...e[n][i][o]));else if(typeof this.pushToState[n][i][o]=="object"&&typeof e[n][i][o]=="object")for(let s in e[n][i][o])this.pushToState[n][i][o][s]&&Array.isArray(this.pushToState[n][i][o][s])&&Array.isArray(e[n][i][o][s])&&(e[n][i][o][s]=this.pushToState[n][i][o][s].push(...e[n][i][o][s]))}}}}}if(Object.assign(this.pushToState,e),Object.keys(this.triggers).length>0){this.triggers.state&&this.triggers.state.forEach(n=>{n.onchange(this.data)});for(let n of Object.getOwnPropertyNames(this.triggers))n in this.pushToState&&(this.data[n]=this.pushToState[n],delete this.pushToState[n],this.triggers[n].forEach(i=>{i.onchange(this.data[n])}))}return this.pushToState}subscribeTrigger(e,r=n=>{}){if(e){this.triggers[e]||(this.triggers[e]=[]);let n=this.triggers[e].length;return this.triggers[e].push({idx:n,onchange:r}),this.triggers[e].length-1}}subscribeTriggerOnce(e,r=n=>{}){let n;n=this.subscribeTrigger(e,i=>{r(i),this.unsubscribeTrigger(e,n)})}unsubscribeTrigger(e,r=0){let n,i=this.triggers[e];i&&i.find(o=>{if(o.idx===r)return!0})&&i.splice(n,1)}unsubscribeAllTriggers(e){e&&this.triggers[e]&&delete this.triggers[e]}setSequentialState(e={}){this.listener.hasKey("pushToState")||this.setupSynchronousUpdates(),e.stateUpdateTimeStamp=Date.now(),this.pushRecord.pushed.push(JSON.parse(JSON.stringify(e)))}subscribeSequential(e,r){if(e&&(this.data[e]===void 0&&e!=="state"&&this.addToState(e,null,void 0),this.pushCallbacks[e]||(this.pushCallbacks[e]=[]),r)){let n=this.pushCallbacks[e].length;return this.pushCallbacks[e].push({idx:n,onchange:r}),this.pushCallbacks[e].length-1}}subscribeSequentialOnce(e,r=n=>{}){let n;n=this.subscribeSequential(e,i=>{r(i),this.unsubscribeSequential(e,n)})}unsubscribeSequential(e,r=0){e&&this.pushCallbacks[e]&&this.pushCallbacks[e].find((n,i)=>{if(n.idx===r)return this.pushCallbacks[e].splice(i,1),!0})}unsubscribeAllSequential(e){e&&this.pushCallbacks[e]&&this.pushCallbacks[e]&&delete this.pushCallbacks[e]}setPrimaryKeyResponse(e=null,r=null,n=!1,i=this.defaultStartListenerEventLoop){if(r!==null)if(this.listener.hasKey(e))this.listener.onchange(e,r);else{if(e==null||e==="state"){if(!this.listener.hasKey("state")){let o=()=>{this.prev=Object.assign({},this.data)};this.listener.addListener("state",this.data,"__ANY__",o,this.interval)}return this.listener.addFunc("state",r)}this.listener.addListener(e,this.data,e,r,this.data.stateUpdateInterval,n,i)}}removeSecondaryKeyResponse(e=null,r=null,n=!0){e!==null?this.listener.hasKey(e)?this.listener.removeFuncs(e,r,n):console.error("key does not exist"):console.error("provide key")}clearAllKeyResponses(e=null){e===null?this.listener.remove(null):this.listener.hasKey(e)&&this.listener.remove(e)}getKeySubCallbacks(e){return this.listener.getFuncs(e)}runSynchronousListeners(){this.defaultStartListenerEventLoop=!1,this.listener.startSync()}stop(e=null){this.listener.stop(e)}};JSON.stringifyFast===void 0&&(JSON.stringifyFast=function(){let t=new Map,e=[],r=["this"];function n(i,o){let s;if(o!=null)if(typeof o=="object"){let a=o.constructor.name;i&&a==="Object"&&function(h,g){var m=e.length-1;if(e[m]){var p=e[m];if(typeof p=="object")if(p[h]===g||m===0)r.push(h),e.push(g.pushed);else for(;m-->=0;){if(typeof(p=e[m])=="object"&&p[h]===g){m+=2,e.length=m,r.length=m,--m,e[m]=g,r[m]=h;break}m++}}}(i,o);let l=t.get(o);if(l)return"[Circular Reference]"+l;if(t.set(o,r.join(".")),a==="Array")s=o.length>20?o.slice(o.length-20):o;else if(a.includes("Set"))s=Array.from(o);else if(a!=="Object"&&a!=="Number"&&a!=="String"&&a!=="Boolean")s="instanceof_"+a;else if(a==="Object"){let h={};for(let g in o)if(o[g]==null)h[g]=o[g];else if(Array.isArray(o[g]))o[g].length>20?h[g]=o[g].slice(o[g].length-20):h[g]=o[g];else if(o[g].constructor.name==="Object"){h[g]={};for(let m in o[g])if(Array.isArray(o[g][m]))o[g][m].length>20?h[g][m]=o[g][m].slice(o[g][m].length-20):h[g][m]=o[g][m];else if(o[g][m]!=null){let p=o[g][m].constructor.name;p.includes("Set")?h[g][m]=Array.from(o[g][m]):h[g][m]=p!=="Number"&&p!=="String"&&p!=="Boolean"?"instanceof_"+p:o[g][m]}else h[g][m]=o[g][m]}else{let m=o[g].constructor.name;m.includes("Set")?h[g]=Array.from(o[g]):h[g]=m!=="Number"&&m!=="String"&&m!=="Boolean"?"instanceof_"+m:o[g]}s=h}else s=o}else s=o;return s}return function(i,o){e.push(i);let s=JSON.stringify(i,n,o);return t.clear(),e.length=0,r.length=1,s}}()),JSON.stringifyWithCircularRefs===void 0&&(JSON.stringifyWithCircularRefs=function(){let t=new Map,e=[],r=["this"];function n(i,o){if(o!=null&&typeof o=="object"){i&&function(a,l){var h=e.length-1,g=e[h];if(typeof g=="object")if(g[a]===l||h===0)r.push(a),e.push(l.pushed);else for(;h-->=0;){if(typeof(g=e[h])=="object"&&g[a]===l){h+=2,e.length=h,r.length=h,--h,e[h]=l,r[h]=a;break}h--}}(i,o);let s=t.get(o);if(s)return"[Circular Reference]"+s;t.set(o,r.join("."))}return o}return function(i,o){try{return e.push(i),JSON.stringify(i,n,o)}finally{t.clear(),e.length=0,r.length=1}}}());jb=(t,e=!0)=>{t instanceof Object&&(t=Array.isArray(t)?[...t]:Object.assign({},t));for(let r in t)t[r]instanceof Function&&(t[r]=t[r].toString()),t[r]instanceof Object&&(t[r]=jb(t[r],!1));return e?JSON.stringify(t):t},Wk=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,qk=/([^\s,]+)/g;try{if(typeof process=="object"){let t=H0();typeof globalThis.fetch!="function"&&(globalThis.fetch=t)}}catch(t){}Ub=class{constructor(e="https://localhost",r,n){let i,o;this.id=null,this.target=null,this.type=null,this.link=null,this.credentials={},this.connection=null,this.services={available:{},connecting:{},queue:{}},this.router=null,this.clients={},this.user=hc(),this.status=!1,this.responses={},this.setCredentials=s=>{var a;s||(s={_id:hc()}),this.credentials={_id:(a=s._id)!==null&&a!==void 0?a:hc(),id:s.id||s._id}},this.check=()=>le(this,void 0,void 0,function*(){var s,a,l,h,g,m;this.type==="webrtc"&&(yield this._subscribe({protocol:"webrtc",force:!0}).then(N=>{this.status=!0}).catch(N=>console.log("Link doesn't have WebRTC enabled.",N)));let p=()=>le(this,void 0,void 0,function*(){return yield this._subscribe({protocol:"websocket",force:!0}).then(N=>(this.status=!0,N)),yield this.send("services")}),w=()=>le(this,void 0,void 0,function*(){return yield this.send("services")}),b;if(this.type==="websocket"?yield p().then(N=>(this.status=!0,N)).catch(N=>le(this,void 0,void 0,function*(){if(this.type==="websocket")return console.log("Falling back to http"),yield w()})):b=yield w().then(N=>(this.status=!0,N)).catch(N=>le(this,void 0,void 0,function*(){return console.log("Falling back to websockets"),yield p()})),b){console.log("Connection successful!");let N=b.message[0];for(let O in N){let I=N[O].replace(/Backend|Service/,"").toLowerCase();this.services.available[I]=O,((l=(a=(s=this.router)===null||s===void 0?void 0:s.SERVICES)===null||a===void 0?void 0:a[I])===null||l===void 0?void 0:l.status)instanceof Function&&this.router.SERVICES[I].status(O),((h=this.clients[I])===null||h===void 0?void 0:h.serviceType)==="subscription"&&((g=this.services.queue[I])===null||g===void 0||g.forEach(D=>D()),this.services.queue[I]=[])}(m=this.services.queue[void 0])===null||m===void 0||m.forEach(O=>O()),this.services.queue[void 0]=[]}else console.log("Connection failed!");return b==null?void 0:b.message}),this.send=(s,a={},l=()=>{})=>le(this,void 0,void 0,function*(){var h,g,m,p,w,b,N,O;if(typeof s=="string")a.route=s;else{let G=this.services[s.service];a.route=G?`${G}/${s.route}`:s.route}let I;a.suppress=!!this.connection;let D={suppress:a.suppress,id:(h=this.link.connection)===null||h===void 0?void 0:h.id};if(((g=this.connection)===null||g===void 0?void 0:g.protocol)==="websocket")a.id=(m=this.link.credentials)===null||m===void 0?void 0:m.id,I=yield this.link.connection.service.send(a,D);else if(((p=this==null?void 0:this.connection)===null||p===void 0?void 0:p.protocol)==="webrtc")a.id=((w=this.credentials)===null||w===void 0?void 0:w.id)||((b=this.link.credentials)===null||b===void 0?void 0:b.id),I=yield this.connection.service.send(a,D);else{a.id=(N=this.link.credentials)===null||N===void 0?void 0:N.id,a.method||(a.method=((O=a.message)===null||O===void 0?void 0:O.length)>0?"POST":"GET");let G={method:a.method.toUpperCase(),mode:"cors",headers:{"Content-Type":"application/json"}};G.method!="GET"&&(G.body=jb(a)),I=yield fetch(function(q,J){let C=J instanceof URL?J:new URL(J);return q=C.pathname==="/"?q:C.pathname+q,new URL(q,C.href).href}(a.route,this.link.target),G).then(q=>le(this,void 0,void 0,function*(){let J=q.body.getReader(),C=q.headers.get("Content-Length"),z=0;if(globalThis.ReadableStream){let S=new ReadableStream({start(W){let te=()=>le(this,void 0,void 0,function*(){J.read().then(({value:X,done:ue})=>{ue?W.close():(z+=X.length,l(z/C,C),W.enqueue(X),te())})});te()}});return new Response(S,{headers:q.headers})}return q})),I=I&&(yield I.json().then(q=>{if(I.ok)return q;throw q.message}).catch(q=>le(this,void 0,void 0,function*(){throw"Invalid JSON"})))}return I&&!(I==null?void 0:I.route)&&(I.route=a.route,I.block=!0),I}),this._subscribe=(s={})=>le(this,void 0,void 0,function*(){let a=()=>new Promise(l=>le(this,void 0,void 0,function*(){var h;let g=(h=s.protocol)!==null&&h!==void 0?h:this.type;(g?[this.clients[g]]:Object.values(this.clients)).forEach(m=>le(this,void 0,void 0,function*(){var p;if(m&&s.force||(m==null?void 0:m.status)===!0&&(m==null?void 0:m.serviceType)==="subscription"){let w=`${(p=this.link.services.available[m==null?void 0:m.service])!==null&&p!==void 0?p:m.name.toLowerCase()}/subscribe`;if(m.setEndpoint(this.link),!this.connection){let b=this.type==="http"||this.type==="websocket"?new URL(w,this.target):this.target,N=yield m.add(this.credentials,b.href);this.router&&m.addResponse("router",O=>{let I=typeof O=="string"?JSON.parse(O):O;Object.values(this.responses).forEach(D=>{D(I)}),this.router&&this.router.handleLocalRoute(I)}),this.connection={service:m,id:N,protocol:m.name}}return this.type==="webrtc"&&(s.routes=[this.target]),yield this.link.send(w,Object.assign({route:s.route,message:s.message,protocol:s.protocol},{message:[s.routes,this.connection.id]})),void l(this.connection)}})),this.services.queue[g]||(this.services.queue[g]=[]),this.services.queue[g].push(()=>le(this,void 0,void 0,function*(){let m=yield a();l(m)}))}));return yield a()}),this.subscribe=s=>{if(s){let a=ys("response");return this.responses[a]=s,a}},this.unsubscribe=s=>{s?delete this.responses[s]:this.responses={}},typeof e=="object"?e instanceof URL?i=e:(i=e.target,o=e.type,this.link=e.link,this.setCredentials(e.credentials)):i=e,o||(o="http"),this.link||(this.link=this),o==="http"||o==="websocket"?(i=i instanceof URL?i:new URL(i),this.id=i.origin):this.id=i,this.target=i,this.type=o,this.router=n,r&&(this.clients=r)}},jt=t=>typeof t=="string"&&t.length===24?kk(t):t,$k=["user","group","authorization","discussion","chatroom","comment","dataInstance","event","notification","schedule","date"],Bb=class extends class{constructor(e){var r;this.id=ys("service"),this.name="service",this.callbacks=new Map,this.status=!1,this.serviceType="default",this.routes=[],this.delegate=(r=globalThis==null?void 0:globalThis.document)===null||r===void 0?void 0:r.createDocumentFragment(),this.protocols={},this.services={},this.setEndpointRoute=n=>{this.route=n},this.notify=(n,i,o)=>le(this,void 0,void 0,function*(){let s=[];return yield Promise.all(Array.from(this.callbacks).map((a,l)=>le(this,void 0,void 0,function*(){let h=yield a[1](n,i,o);!h||h instanceof Error||s.push(h)}))),s==null?void 0:s[0]}),this.setEndpoint=n=>{this.endpoint=n},this.subscribe=n=>{if(n instanceof Function){let i=ys();return this.callbacks.set(i,n),i}},this.unsubscribe=n=>this.callbacks.delete(n),this.router=e}addEventListener(...e){var r;(r=this.delegate)===null||r===void 0||r.addEventListener.apply(this.delegate,e)}dispatchEvent(...e){var r;return(r=this.delegate)===null||r===void 0?void 0:r.dispatchEvent.apply(this.delegate,e)}removeEventListener(...e){var r;return(r=this.delegate)===null||r===void 0?void 0:r.removeEventListener.apply(this.delegate,e)}}{constructor(e,r={},n=!1){super(e),this.name="structs",this.collections={},this.debug=!1,this.wipeDB=()=>le(this,void 0,void 0,function*(){return yield Promise.all(Object.values(this.collections).map(i=>i.instance.deleteMany({}))),!0}),this.db=r==null?void 0:r.db,this.debug=n,this.mode=this.db&&r.mode?r.mode:"local",r.collections||(r.collections={}),$k.forEach(i=>{r.collections[i]||(r.collections[i]=this.db?{instance:this.db.collection(i)}:{},r.collections[i].reference={})}),this.collections=r.collections,this.routes=[{route:"getUser",post:(i,o,s)=>le(this,void 0,void 0,function*(){let a=i.USERS[s];if(this.debug&&console.log("getUser origin",s,o,"user found:",a),!a)return!1;let l;if(this.mode==="mongo")l=yield this.getMongoUser(a,o[0]);else{let h=this.getLocalData("user",{_id:o[0]});h?(yield this.checkAuthorization(a,h))?l={user:h,groups:this.getLocalData("group",{ownerId:o[0]}),authorizations:this.getLocalData("authorization",{ownerId:o[0]})}:l={user:{}}:l={user:{}}}return this.debug&&console.log("getUser:",a,o[0],l),l})},{route:"setUser",aliases:["addUser"],post:(i,o,s)=>le(this,void 0,void 0,function*(){let a=i.USERS[s];if(!a)return!1;let l;return this.mode!=="mongo"?((yield this.checkAuthorization(a,o[0],"WRITE"))&&this.setLocalData(o[0]),!0):(l=yield this.setMongoUser(a,o[0]),this.debug&&console.log("setUser",a,o[0],l),l)})},{route:"getUsersByIds",post:(i,o,s)=>le(this,void 0,void 0,function*(){let a=i.USERS[s];if(!a)return!1;let l;if(this.mode==="mongo")l=yield this.getMongoUsersByIds(a,o[0]);else if(l=[],Array.isArray(o[0])){let h=this.getLocalData("user",{_id:o[0]});h&&l.push(h)}return this.debug&&console.log("getUserByIds:",a,o[0],l),l})},{route:"getUsersByRoles",post:(i,o,s)=>le(this,void 0,void 0,function*(){let a=i.USERS[s];if(!a)return!1;let l;if(this.mode.includes("mongo"))l=yield this.getMongoUsersByRoles(a,o[0]);else{let h=this.getLocalData("user");l=[],h.forEach(g=>{var m;((m=g.userRoles)===null||m===void 0?void 0:m.includes(o[0]))&&l.push(g)})}return this.debug&&console.log("getUserByRoles",a,o[0],l),l})},{route:"deleteUser",aliases:["removeUser"],post:(i,o,s)=>le(this,void 0,void 0,function*(){let a=i.USERS[s];if(!a)return!1;let l;if(this.mode==="mongo")l=yield this.deleteMongoUser(a,o[0]);else{l=!1;let h=this.getLocalData(o[0]);h&&this.checkAuthorization(a,h,"WRITE")&&(l=this.deleteLocalData(h))}return this.debug&&console.log("deleteUser:",a,o[0],l),l})},{route:"setData",aliases:["setMongoData"],post:(i,o,s)=>le(this,void 0,void 0,function*(){let a=i.USERS[s];if(!a)return!1;let l;if(!this.mode.includes("mongo")){let h=[];return l=[],yield Promise.all(o.map(g=>le(this,void 0,void 0,function*(){let m=this.getLocalData(g);(yield this.checkAuthorization(a,m,"WRITE"))&&(this.setLocalData(m),l.push(m),m.structType!=="notification"&&h.push(m))}))),h.length>0&&this.checkToNotify(a,h,this.mode),this.debug&&console.log("setData:",a,o,l),!0}return l=yield this.setMongoData(a,o),this.debug&&console.log("setData:",a,o,l),l})},{route:"getData",aliases:["getMongoData","getUserData"],post:(i,o,s)=>le(this,void 0,void 0,function*(){let a=i.USERS[s];if(!a)return!1;let l;if(this.mode.includes("mongo"))l=yield this.getMongoData(a,o[0],o[1],o[2],o[4],o[5]);else{let h;l=[],o[0]&&(h=this.getLocalData(o[0])),h&&o[1]&&(h=h.filter(g=>{if(g.ownerId===o[1])return!0})),h&&(yield Promise.all(h.map(g=>le(this,void 0,void 0,function*(){let m=this.getLocalData(g._id);(yield this.checkAuthorization(a,m))&&l.push(m)}))))}return this.debug&&console.log("getData:",a,o,l),l})},{route:"getDataByIds",aliases:["getMongoDataByIds","getUserDataByIds"],post:(i,o,s)=>le(this,void 0,void 0,function*(){let a=i.USERS[s];if(!a)return!1;let l;if(this.mode.includes("mongo"))l=yield this.getMongoDataByIds(a,o[0],o[1],o[2]);else{let h;l=[],o[2]&&(h=this.getLocalData(o[2])),h&&o[1]&&(h=h.filter(g=>{if(g.ownerId===o[1])return!0})),h&&(yield Promise.all(h.map(g=>le(this,void 0,void 0,function*(){let m=this.getLocalData(g._id);(yield this.checkAuthorization(a,m))&&l.push(m)}))))}return this.debug&&console.log("getDataByIds:",a,o,l),l})},{route:"getAllData",post:(i,o,s)=>le(this,void 0,void 0,function*(){let a=i.USERS[s];if(!a)return!1;let l;if(this.mode.includes("mongo"))l=yield this.getAllUserMongoData(a,o[0],o[1]);else{let h=this.getLocalData(void 0,{ownerId:o[0]});l=[],yield Promise.all(h.map(g=>le(this,void 0,void 0,function*(){o[1]?o[1].indexOf(g.structType)<0&&(yield this.checkAuthorization(a,g))&&l.push(g):(yield this.checkAuthorization(a,g))&&l.push(g)})))}return this.debug&&console.log("getAllData:",a,o,l),l})},{route:"deleteData",post:(i,o,s)=>le(this,void 0,void 0,function*(){let a=i.USERS[s];if(!a)return!1;let l;return this.mode.includes("mongo")?l=yield this.deleteMongoData(a,o):(l=!1,yield Promise.all(o.map(h=>le(this,void 0,void 0,function*(){let g=this.getLocalData(h);(yield this.checkAuthorization(a,g,"WRITE"))&&this.deleteLocalData(g),l=!0})))),this.debug&&console.log("deleteData:",a,o,l),l})},{route:"getGroup",aliases:["getGroups"],post:(i,o,s)=>le(this,void 0,void 0,function*(){let a=i.USERS[s];if(!a)return!1;let l;if(this.mode.includes("mongo"))l=yield this.getMongoGroups(a,o[0],o[1]);else if(typeof o[1]=="string")l=this.getLocalData("group",{_id:o[1]});else{l=[];let h=this.getLocalData("group");o[0]?h.forEach(g=>{g.users.includes(o[0])&&l.push(g)}):h.forEach(g=>{g.users.includes(a._id)&&l.push(g)})}return this.debug&&console.log("getGroups:",a,o,l),l})},{route:"setGroup",post:(i,o,s)=>le(this,void 0,void 0,function*(){let a=i.USERS[s];if(!a)return!1;let l=yield this.setGroup(a,o[0],this.mode);this.debug&&console.log("setGroup:",a,o,l)})},{route:"deleteGroup",post:(i,o,s)=>le(this,void 0,void 0,function*(){let a=i.USERS[s];if(!a)return!1;let l;if(this.mode.includes("mongo"))l=yield this.deleteMongoGroup(a,o[0]);else{let h=this.getLocalData("group",o[0]),g=!1;h&&(g=yield this.checkAuthorization(a,h,"WRITE")),g&&(l=!0)}return this.debug&&console.log("deleteGroup:",a,o,l),l})},{route:"setAuth",post:(i,o,s)=>le(this,void 0,void 0,function*(){let a=i.USERS[s];if(!a)return!1;let l=yield this.setAuthorization(a,o[0],this.mode);return this.debug&&console.log("deleteGroup:",a,o,l),l})},{route:"getAuths",post:(i,o,s)=>le(this,void 0,void 0,function*(){let a=i.USERS[s];if(!a)return!1;let l;if(this.mode.includes("mongo"))l=yield this.getMongoAuthorizations(a,o[0],o[1]);else if(o[1]){let h=this.getLocalData("authorization",{_id:o[1]});h&&(l=[h])}else l=this.getLocalData("authorization",{ownerId:o[0]});return this.debug&&console.log("deleteGroup:",a,o,l),l})},{route:"deleteAuth",post:(i,o,s)=>le(this,void 0,void 0,function*(){let a=i.USERS[s];if(!a)return!1;let l;if(this.mode.includes("mongo"))l=yield this.deleteMongoAuthorization(a,o[0]);else{l=!0;let h=this.getLocalData("authorization",{_id:o[0]});h&&this.checkAuthorization(a,h,"WRITE")&&(l=this.deleteLocalData(h))}return this.debug&&console.log("deleteGroup:",a,o,l),l})}]}notificationStruct(e={}){let r="notification";return{structType:r,timestamp:Date.now(),id:ys(r),note:"",ownerId:"",parentUserId:"",parent:{structType:e==null?void 0:e.structType,_id:e==null?void 0:e._id}}}checkToNotify(e,r=[],n=this.mode){return le(this,void 0,void 0,function*(){if(typeof e=="string")for(let s in this.router.USERS){let a=this.router.USERS[s];a._id===e&&(e=a)}if(typeof e=="string"||e==null)return!1;let i={},o=[];if(r.forEach(s=>le(this,void 0,void 0,function*(){if((e==null?void 0:e._id)!==s.ownerId){let a=this.notificationStruct(s);a.id="notification_"+s._id,a.ownerId=s.ownerId,a.note=s.structType,a.parentUserId=s.ownerId,o.push(a),i[s.ownerId]=s.ownerId}if(s.users)s.users.forEach(a=>{if(a!==e._id){let l=this.notificationStruct(s);l.id="notification_"+s._id,l.ownerId=a,l.note=s.structType,l.parentUserId=s.ownerId,o.push(l),i[a]=a}});else{let a=[];if(n==="mongo"){let l=this.collections.authorizations.instance.find({$or:[{authorizedId:e._id},{authorizerId:e._id}]});(yield l.count())>0&&(yield l.forEach(h=>a.push(h)))}else a=this.getLocalData("authorization",{authorizedId:e._id}),a.push(...this.getLocalData("authorization",{authorizerId:e._id}));a.length>0&&a.forEach(l=>{if(s.authorizerId===s.ownerId&&!i[s.authorizedId]&&l.status==="OKAY"&&l.authorizations.indexOf("peer")>-1){let h=this.notificationStruct(s);h.ownerId=l.authorizedId,h.id="notification_"+s._id,h.note=s.structType,h.parentUserId=s.ownerId,o.push(h),i[h.ownerId]=h.ownerId}})}})),o.length>0){n==="mongo"?yield this.setMongoData(e,o):this.setLocalData(o);for(let s in i)this.router.sendMsg(s,"notifications",!0);return!0}return!1})}setMongoData(e,r=[]){return le(this,void 0,void 0,function*(){let n=!1;if(r.length>0){let i=!0,o="";if(yield Promise.all(r.map(s=>le(this,void 0,void 0,function*(){if(((e==null?void 0:e._id)!==s.ownerId||e._id===s.ownerId&&e.userRoles.includes("admin_control"))&&o!==s.ownerId&&(i=yield this.checkAuthorization(e,s,"WRITE"),o=s.ownerId),i){let a=JSON.parse(JSON.stringify(s));a._id&&delete a._id,s.id?s.id.includes("defaultId")?(yield this.db.collection(s.structType).insertOne(a),n=!0):yield this.db.collection(s.structType).updateOne({id:s.id},{$set:a},{upsert:!0}):s._id&&(s._id.includes("defaultId")?(yield this.db.collection(s.structType).insertOne(a),n=!0):yield this.db.collection(s.structType).updateOne({_id:jt(s._id)},{$set:a},{upsert:!1}))}}))),n===!0){let s=[];return yield Promise.all(r.map((a,l)=>le(this,void 0,void 0,function*(){let h=JSON.parse(JSON.stringify(a));if(h._id&&delete h._id,a.structType!=="comment"){let g;a.structType!=="notification"&&(g=yield this.db.collection(h.structType).findOne(h)),g&&(g._id=g._id.toString(),s.push(g))}else if(a.structType==="comment"){let g=a,m=JSON.parse(JSON.stringify(g));m._id&&delete m._id;let p=yield this.db.collection("comment").findOne(m),w=g.replyTo,b=r.find(N=>{if(N._id===w)return!0});if(b){let N,O=JSON.parse(JSON.stringify(b));if(O._id&&delete O._id,yield Promise.all(["discussion","chatroom","comment"].map(I=>le(this,void 0,void 0,function*(){let D=yield this.db.collection(I).findOne({_id:jt(w)});D&&(N=D)}))),N){let I,D,G=g.parent._id;if(G!==w?(I=r.find(J=>{if(J._id===G)return!0}),I&&(delete I._id,yield Promise.all(["discussion","chatroom"].map(J=>le(this,void 0,void 0,function*(){let C=yield this.db.collection(J).findOne(I);C&&(D=C)}))))):D=N,N){let J=N.replies.indexOf(g._id);J>-1&&(N.replies[J]=p._id.toString(),p.replyTo=N._id.toString())}if(D){let J=D.comments.indexOf(g._id);J>-1&&(D.comments[J]=p._id.toString(),p.parent._id=D._id.toString())}let q=[p,N];D._id.toString()!==N._id.toString()&&q.push(D),yield Promise.all(q.map(J=>le(this,void 0,void 0,function*(){let C=JSON.parse(JSON.stringify(J));delete C._id,yield this.db.collection(J.structType).updateOne({_id:jt(J._id)},{$set:C},{upsert:!1})}))),[...s].reverse().forEach((J,C)=>{q.find(z=>{if(J._id.toString()===z._id.toString())return!0})&&s.splice(s.length-C-1,1)}),s.push(...q)}}else p&&s.push(p)}}))),this.checkToNotify(e,s),s}{let s=[];return r.forEach(a=>{a.structType!=="notification"&&s.push(a)}),this.checkToNotify(e,s),!0}}return!1})}setMongoUser(e,r){return le(this,void 0,void 0,function*(){if(r._id){if((e._id!==r.ownerId||e._id===r.ownerId&&e.userRoles.includes("admin_control"))&&!(yield this.checkAuthorization(e,r,"WRITE")))return!1;let n=JSON.parse(JSON.stringify(r));n._id&&delete n._id,this.router.DEBUG&&console.log("RETURNS PROFILE",r);let i=jt(r._id),o=i!==r._id?{_id:i}:{id:r.id};return yield this.collections.users.instance.updateOne(o,{$set:n},{upsert:!0}),e=yield this.collections.users.instance.findOne(o),this.checkToNotify(e,[r]),e}return!1})}setGroup(e,r={},n=this.mode){return le(this,void 0,void 0,function*(){if(r._id){let i;if(i=n==="mongo"?yield this.collections.groups.instance.findOne({name:r.name}):this.getLocalData("group",{_id:r._id}),i&&(i.ownerId!==r.ownerId||r.admins.indexOf(e._id)<0)||e._id!==r.ownerId&&!(yield this.checkAuthorization(e,r,"WRITE")))return!1;let o=[];r.users.forEach(p=>{o.push({email:p},{id:p},{username:p})});let s=[],a=[];if(n==="mongo"){let p=this.collections.users.instance.find({$or:o});(yield p.count())>0&&(yield p.forEach(w=>{s.push(w),a.push(w._id)}))}else o.forEach(p=>{let w=this.getLocalData("user",p);w.length>0&&(s.push(w[0]),a.push(w[0]._id))});r.users=a;let l=[],h=[],g=[];s.forEach(p=>{r.admins.find((w,b)=>{if(w===p._id||w===p.email||w===p.username||p._id===r.ownerId)return l.indexOf(p._id<0)&&l.push(p._id),!0}),r.peers.find((w,b)=>{if(w===p._id||w===p.email||w===p.username)return h.indexOf(p._id<0)&&h.push(p._id),!0}),r.clients.find((w,b)=>{if(w===p._id||w===p.email||w===p.username)return g.indexOf(p._id<0)&&g.push(p._id),!0})}),r.admins=l,r.peers=h,r.clients=g;let m=JSON.parse(JSON.stringify(r));return m._id&&delete m._id,n==="mongo"?r._id.includes("defaultId")?yield this.db.collection(r.structType).insertOne(m):yield this.collections.groups.instance.updateOne({_id:jt(r._id)},{$set:m},{upsert:!0}):this.setLocalData(r),this.checkToNotify(e,[r],this.mode),r}return!1})}getMongoUser(e,r="",n=!1){return le(this,void 0,void 0,function*(){return new Promise(i=>le(this,void 0,void 0,function*(){let o=[{email:r},{id:r},{username:r}];try{o.push({_id:jt(r)})}catch(a){}let s=yield this.collections.users.instance.findOne({$or:o});if(s&&s!=null)if(!s._id&&s._id?s._id=s._id.toString():!s._id&&s._id&&(s._id=s._id),s.ownerId||(s.ownerId=s._id),s&&n===!1){(e._id!==s._id||e._id===s._id&&e.userRoles.includes("admin_control"))&&((yield this.checkAuthorization(e,s))||i(void 0));let a=[],l=this.collections.authorizations.instance.find({ownerId:s._id});(yield l.count())>0&&(yield l.forEach(m=>a.push(m)));let h=this.collections.groups.instance.find({users:{$all:[s._id]}}),g=[];(yield h.count())>0&&(yield h.forEach(m=>g.push(m))),s.authorizations=a,s.groups=g,i(s)}else i(s);else i({})}))})}getMongoUsersByIds(e={},r=[]){return le(this,void 0,void 0,function*(){let n=[];r.forEach(o=>{try{n.push({_id:jt(o)})}catch(s){}});let i=[];if(n.length>0){let o=this.collections.users.instance.find({$or:n});(yield o.count())>0&&(yield o.forEach(s=>{i.push(s)}))}return i})}getMongoUsersByRoles(e={},r=[]){return le(this,void 0,void 0,function*(){let n=this.collections.users.instance.find({userRoles:{$all:r}}),i=[];return(yield n.count())>0&&(yield n.forEach(o=>{i.push(o)})),i})}getMongoDataByIds(e,r,n,i){return le(this,void 0,void 0,function*(){if(r.length>0){let o=[];r.forEach(a=>{let l={_id:a};n&&(l.ownerId=n),o.push(l)});let s=[];if(i){let a=yield this.db.collection(i).find({$or:o});if((yield a.count())>0){let l=!0,h="";yield a.forEach(g=>le(this,void 0,void 0,function*(){(e._id!==g.ownerId||e._id===g.ownerId&&e.userRoles.includes("admincontrol"))&&h!==g.ownerId&&(l=yield this.checkAuthorization(e,g),h=g.ownerId),l&&s.push(g)}))}}else yield Promise.all(Object.keys(this.collections).map(a=>le(this,void 0,void 0,function*(){let l=yield this.db.collection(a).find({$or:o});if((yield l.count())>0){let h=!0,g="";yield l.forEach(m=>le(this,void 0,void 0,function*(){(e._id!==m.ownerId||e._id===m.ownerId&&e.userRoles.includes("admincontrol"))&&g!==m.ownerId&&(h=yield this.checkAuthorization(e,m),g=m.ownerId),h&&s.push(m)}))}})));return s}})}getMongoData(e,r,n,i={},o=0,s=0){return le(this,void 0,void 0,function*(){n||(n=i==null?void 0:i.ownerId),i._id&&(i._id=jt(i._id));let a=[],l=!0,h="";if(!(r||n||i))return[];if(!r&&n&&Object.keys(i).length===0)return yield this.getAllUserMongoData(e,n);if(!i&&n){let g=this.db.collection(r).find({ownerId:n}).sort({$natural:-1}).skip(s);o>0&&g.limit(o),(yield g.count())>0&&(yield g.forEach(m=>le(this,void 0,void 0,function*(){(e._id!==m.ownerId||e._id===m.ownerId&&e.userRoles.includes("admincontrol"))&&h!==m.ownerId&&(l=yield this.checkAuthorization(e,m),h=m.ownerId),l===!0&&a.push(m)})))}else if(Object.keys(i).length>0&&n){let g=yield this.db.collection(r).findOne(Object.assign({ownerId:n},i));g&&a.push(g)}else Object.keys(i).length>0&&!n&&(yield Promise.all(Object.keys(this.collections).map(g=>le(this,void 0,void 0,function*(){let m=yield this.db.collection(g).findOne(i);if(m)return(e._id!==m.ownerId||e._id===m.ownerId&&e.userRoles.includes("admincontrol"))&&h!==m.ownerId&&(l=yield this.checkAuthorization(e,m),h=m.ownerId),void a.push(m)}))));return l?a:[]})}getAllUserMongoData(e,r,n=[]){return le(this,void 0,void 0,function*(){let i=[],o=!0,s="";return yield Promise.all(Object.keys(this.collections).map((a,l)=>le(this,void 0,void 0,function*(){if(o&&n.indexOf(a)<0){let h=this.db.collection(a).find({ownerId:r}),g=yield h.count();for(let m=0;m<g;m++){let p=yield h.next();(e._id!==r||e._id===r&&e.userRoles.includes("admincontrol"))&&s!==r&&(o=yield this.checkAuthorization(e,p),s=r),o&&i.push(p)}}}))),o?i:[]})}getMongoDataByRefs(e,r=[]){return le(this,void 0,void 0,function*(){let n=[];if(n.length>0){let i="";r.forEach(o=>le(this,void 0,void 0,function*(){if(o.structType&&o._id){let s=yield this.db.collection(o.structType).findOne({_id:jt(o._id)});s&&((e._id!==s.ownerId||e._id===s.ownerId&&e.userRoles.includes("admincontrol"))&&i!==s.ownerId&&(yield this.checkAuthorization(e,s),i=s.ownerId),n.push(s))}}))}return n})}getMongoAuthorizations(e,r=e._id,n=""){return le(this,void 0,void 0,function*(){let i=[];if(n.length===0){let o=this.collections.authorizations.instance.find({ownerId:r});(yield o.count)>0&&(yield o.forEach(s=>{i.push(s)}))}else i.push(yield this.collections.authorizations.instance.findOne({_id:jt(n),ownerId:r}));if(!(e._id!==i[0].ownerId&&!(yield this.checkAuthorization(e,i[0]))))return i})}getMongoGroups(e,r=e._id,n=""){return le(this,void 0,void 0,function*(){let i=[];if(n.length===0){let o=this.collections.groups.instance.find({users:{$all:[r]}});(yield o.count)>0&&(yield o.forEach(s=>{i.push(s)}))}else try{i.push(yield this.collections.groups.instance.findOne({_id:jt(n),users:{$all:[r]}}))}catch(o){}return i})}deleteMongoData(e,r=[]){return le(this,void 0,void 0,function*(){let n=[];yield Promise.all(r.map(o=>le(this,void 0,void 0,function*(){try{let s=jt(o._id),a=yield this.db.collection(o.structType).findOne({_id:s});if(a){n.push(a);let l=yield this.collections.notifications.instance.find({parent:{structType:o.structType,id:o._id}}),h=yield l.count();for(let g=0;g<h;g++){let m=yield l.next();m&&n.push(m)}}}catch(s){}})));let i="";return yield Promise.all(n.map((o,s)=>le(this,void 0,void 0,function*(){var a;let l=!0;(o.ownerId!==e._id||e._id===o.ownerId&&((a=e.userRoles)===null||a===void 0?void 0:a.includes("admincontrol")))&&o.ownerId!==i&&(i=o.ownerId,l=yield this.checkAuthorization(e,o,"WRITE")),l&&(yield this.db.collection(o.structType).deleteOne({_id:jt(o._id)}),o.users&&o.users.forEach(h=>{h!==e._id&&h!==o.ownerId&&this.router.sendMsg(h,"deleted",o._id)}),o.ownerId!==e._id&&this.router.sendMsg(o.ownerId,"deleted",o._id))}))),!0})}deleteMongoUser(e,r){return le(this,void 0,void 0,function*(){if(e._id!==r||e._id===r&&e.userRoles.includes("admincontrol")){let n=yield this.collections.users.instance.findOne({id:r});if(!(yield this.checkAuthorization(e,n,"WRITE")))return!1}return yield this.collections.users.instance.deleteOne({id:r}),e._id!==r&&this.router.sendMsg(r,"deleted",r),!0})}deleteMongoGroup(e,r){return le(this,void 0,void 0,function*(){let n=yield this.collections.groups.instance.findOne({_id:jt(r)});return n?(e._id!==n.ownerId||e._id===n.ownerId&&e.userRoles.includes("admincontrol"))&&!(yield this.checkAuthorization(e,n,"WRITE"))?!1:(n.users&&n.users.forEach(i=>{this.router.sendMsg(n.authorizerId,"deleted",n._id)}),yield this.collections.groups.instance.deleteOne({_id:jt(r)}),!0):!1})}deleteMongoAuthorization(e,r){return le(this,void 0,void 0,function*(){let n=yield this.collections.authorizations.instance.findOne({_id:jt(r)});return n?(e._id!==n.ownerId||e._id===n.ownerId&&e.userRoles.includes("admincontrol"))&&!(yield this.checkAuthorization(e,n,"WRITE"))?!1:(n.associatedAuthId&&(this.router.DEBUG&&console.log(n),yield this.collections.authorizations.instance.deleteOne({_id:jt(n.associatedAuthId)}),n.authorizerId!==e._id?this.router.sendMsg(n.authorizerId,"deleted",n._id):n.authorizedId!==e._id&&this.router.sendMsg(n.authorizedId,"deleted",n._id)),yield this.collections.authorizations.instance.deleteOne({_id:jt(r)}),!0):!1})}setAuthorization(e,r,n=this.mode){return le(this,void 0,void 0,function*(){let i,o;if(n==="mongo"?(i=yield this.getMongoUser(e,r.authorizedId,!0),o=yield this.getMongoUser(e,r.authorizerId,!0)):(i=this.getLocalData("user",{_id:r.authorizedId}),o=this.getLocalData("user",{_id:r.authorizedId})),!i||!o||(r.authorizedId!==i._id&&(r.authorizedId=i._id),r.authorizerId!==o._id&&(r.authorizerId=o._id),r.authorizedName||(i.username?r.authorizedName=i.username:i.email&&(r.authorizedName=i.email)),r.authorizerName||(i.username?r.authorizerName=i.username:i.email&&(r.authorizerName=i.email)),(e._id!==r.ownerId||e._id===r.ownerId&&e.userRoles.includes("admincontrol"))&&e._id!==r.authorizedId&&e._id!==r.authorizerId&&!(yield this.checkAuthorization(e,r,"WRITE"))))return!1;let s,a=[];if(n==="mongo"){let h=this.collections.authorizations.instance.find({$and:[{authorizedId:r.authorizedId},{authorizerId:r.authorizerId}]});(yield h.count())>0&&(yield h.forEach(g=>a.push(g)))}else{let h=this.getLocalData("authorization",{authorizedId:r.authorizedId});Array.isArray(h)&&h.forEach(g=>{g.authorizerId===r.authorizerId&&a.push(g)})}Array.isArray(a)&&a.forEach(h=>le(this,void 0,void 0,function*(){if(h.ownerId!==e._id){r.authorizerId===e._id?(h.authorizations=r.authorizations,h.structIds=r.structIds,h.excluded=r.excluded,h.expires=r.expires,h.status="OKAY",r.status="OKAY"):(r.authorizations=h.authorizations,r.structIds=h.structIds,r.excluded=h.excluded,r.expires=h.expires,h.status="OKAY",r.status="OKAY"),r.associatedAuthId=h._id.toString(),h.associatedAuthId=r._id.toString(),s=h;let g=JSON.parse(JSON.stringify(h));this.mode.includes("mongo")?(delete g._id,yield this.collections.authorizations.instance.updateOne({$and:[{authorizedId:r.authorizedId},{authorizerId:r.authorizerId},{ownerId:h.ownerId}]},{$set:g},{upsert:!0})):this.setLocalData(g)}}));let l=JSON.parse(JSON.stringify(r));if(n==="mongo"?(delete l._id,yield this.collections.authorizations.instance.updateOne({$and:[{authorizedId:r.authorizedId},{authorizerId:r.authorizerId},{ownerId:r.ownerId}]},{$set:l},{upsert:!0})):this.setLocalData(l),r._id.includes("defaultId")&&n==="mongo"){let h=yield this.collections.authorizations.instance.findOne(l);if(h&&(r._id=h._id.toString(),s)){let g=yield this.collections.authorizations.instance.findOne({$and:[{authorizedId:s.authorizedId},{authorizerId:s.authorizerId},{ownerId:s.ownerId}]});g&&(g.associatedAuthId=r._id,delete g._id,yield this.collections.authorizations.instance.updateOne({$and:[{authorizedId:g.authorizedId},{authorizerId:g.authorizerId},{ownerId:g.ownerId}]},{$set:g},{upsert:!0}),this.checkToNotify(e,[g]))}}return r})}checkAuthorization(e,r,n="READ",i=this.mode){var o,s,a;return le(this,void 0,void 0,function*(){if(!e||!r)return!1;if(typeof e=="object"){if(r.ownerId===e._id&&!((o=e.userRoles)===null||o===void 0?void 0:o.includes("admin_control")))return!0}else if(typeof e=="string"){if(r.ownerId===e)return!0;e={_id:e}}let l,h;if(i==="mongo"?(l=yield this.collections.authorizations.instance.findOne({$or:[{authorizedId:e._id,authorizerId:r.ownerId,ownerId:e._id},{authorizedId:r.ownerId,authorizerId:e._id,ownerId:e._id}]}),h=yield this.collections.authorizations.instance.findOne({$or:[{authorizedId:e._id,authorizerId:r.ownerId,ownerId:r.ownerId},{authorizedId:r.ownerId,authorizerId:e._id,ownerId:r.ownerId}]})):(l=this.getLocalData("authorization",{ownerId:e._id}).find(m=>{if(m.authorizedId===e._id&&m.authorizerId===r.ownerId)return!0}),h=this.getLocalData("authorization",{ownerId:r.ownerId}).find(m=>{if(m.authorizedId===e._id&&m.authorizerId===r.ownerId)return!0})),!l||!h)return!1;let g=!1;return l.status==="OKAY"&&h.status==="OKAY"&&(r.structType==="group"?g=l.authorizations.indexOf(r.name+"_admin")>-1&&h.authorizations.indexOf(r.name+"_admin")>-1:l.authorizations.indexOf("provider")>-1&&h.authorizations.indexOf("provider")>-1||l.authorizations.indexOf("peer")>-1&&h.authorizations.indexOf("peer")>-1||l.authorizations.indexOf("control")>-1&&h.authorizations.indexOf("control")>-1||((s=l.structIds)===null||s===void 0?void 0:s.indexOf(r._id))>-1&&((a=h.structIds)===null||a===void 0?void 0:a.indexOf(r._id))>-1?g=!0:l.excluded.indexOf(r.structType)>-1&&r.ownerId===e._id&&n==="WRITE"&&(g=!1)),g})}overwriteLocalData(e){if(Array.isArray(e))e.forEach(r=>{let n=this.getLocalData(r.structType,{ownerId:r.ownerId,_id:r._id});n&&(n==null?void 0:n.length)!==0?Object.assign(n,r):this.setLocalData(r)});else{let r=this.getLocalData(e.structType,{ownerId:e.ownerId,_id:e._id});r&&(r==null?void 0:r.length)!==0?Object.assign(r,e):this.setLocalData(e)}}setLocalData(e){let r=n=>{let i=n.structType,o=this.collections[i].reference;o||(o={},this.collections[i].reference=o),o[n._id]=n};Array.isArray(e)?e.forEach(n=>{r(n)}):r(e)}getLocalData(e,r){let n,i,o;if(typeof r=="object"?(n=r.ownerId,i=Object.keys(r).filter(l=>l!="ownerId")[0],o=r[i]):o=r,!(e||n||i||o))return[];let s=[];if(!e&&(n||i))return Object.values(this.collections).forEach(a=>{if(a=a.reference,i!=="_id"&&i!=="id"||!o)Object.values(a).forEach(l=>{i&&o?l[i]===o&&l.ownerId===n&&s.push(l):l.ownerId===n&&s.push(l)});else{let l=a[o];l&&s.push(l)}}),s;{let a=this.collections[e].reference;if(!a)return s;if(!i&&!n)return Object.values(a).forEach(l=>{s.push(l)}),s;if((i==="_id"||i==="id")&&o)return a[o];Object.keys(a).forEach(l=>{let h=a[l];i&&o&&!n?h[i]===o&&s.push(h):n&&!i?h.ownerId===n&&s.push(h):n&&i&&o&&h.ownerId===n&&h[i]&&h[i]===o&&s.push(h)})}return s}deleteLocalData(e){if(!e)throw new Error("Struct not supplied");return!(!e.structType||!e._id)&&(this.collections[e.structType]&&delete this.collections[e.structType].reference[e._id],!0)}},up=class extends class{constructor(e={debug:!1}){this.id=ys(),this.USERS={},this.CONNECTIONS=new Map,this.SUBSCRIPTIONS=[],this.ENDPOINTS={},this.SERVICES={},this.ROUTES={},this.INTERVAL=10,this.DEFAULTROUTES=[{route:"ping",post:()=>"pong"},{route:"services/**",get:{object:this.SERVICES,transform:(r,...n)=>{let i={};return(n.length>0?[n[0]]:Object.keys(r)).forEach(o=>{let s=r[o];(s==null?void 0:s.serviceType)==="default"&&(i[o]=s.name)}),n.forEach((o,s)=>i=i[o]),i}}},{route:"/",aliases:["routes/**"],get:{object:this.ROUTES,transform:(r,...n)=>{let i={};return(n.length>0?[n[0]]:Object.keys(r)).forEach(o=>{o&&(i[o]={route:r[o].route.split("/").filter(s=>!s.match(/\*\*?/)).join("/"),args:r[o].args,wildcard:o.includes("*")})}),n.forEach((o,s)=>i=i[o]),i}}},{route:"sendMessage",aliases:["message","sendMsg"],post:(r,n)=>r.sendMsg(n[0],n[1],n[2])},{route:"setUserServerDetails",post:(r,n,i)=>{let o=r.USERS[i];if(!o)return!1;n[0]&&(o.username=n[0]),n[1]&&(o.password=n[1]),n[2]&&(o.props=n[2]),n[3]&&(o._id=n[3],o.id=n[3])}},{route:"setProps",post:(r,n,i)=>{let o=r.USERS[i];if(!o)return!1;if(typeof n=="object"&&!Array.isArray(n))return Object.assign(o.props,n),!0;if(Array.isArray(n)&&typeof n[1]=="object"){let s=r.USERS[n[0]];return s&&Object.assign(s.props,n[1]),!0}return!1}},{route:"getProps",post:(r,n,i)=>{let o=r.USERS[i];if(!o)return!1;if(!n[0])return o.props;{let s=r.USERS[n[0]];if(s)return s.props}}},{route:"blockUser",post:(r,n,i)=>{let o=r.USERS[i];return!!o&&this.blockUser(o,n[0])}},{route:"users/**",get:{object:this.USERS,transform:(r,...n)=>{let i={};return(n.length>0?[n[0]]:Object.keys(r)).forEach(o=>{let s=r[o];i[o]={_id:s._id,username:s.username,origin:s.origin,props:s.props,updatedPropNames:s.updatedPropNames,lastUpdate:s.lastUpdate,lastTransmit:s.lastTransmit,latency:s.latency}}),n.forEach((o,s)=>i=i[o]),i}}},{route:"getUser",post:(r,n,i)=>{let o=r.USERS[i];if(!o)return!1;if(!n[0])return{_id:o._id,username:o.username,origin:o.origin,props:o.props,updatedPropNames:o.updatedPropNames,lastUpdate:o.lastUpdate,lastTransmit:o.lastTransmit,latency:o.latency};{let s=this.USERS[n[0]];if(s)return{_id:s._id,username:s.username,origin:s.origin,props:s.props,updatedPropNames:s.updatedPropNames,lastUpdate:s.lastUpdate,lastTransmit:s.lastTransmit,latency:s.latency}}}},{route:"login",aliases:["addUser","startSession"],post:(r,n,i)=>le(this,void 0,void 0,function*(){let o=yield r.addUser(...n);return{message:!!o,id:o.id}})},{route:"logout",aliases:["removeUser","endSession"],post:(r,n,i)=>{let o=r.USERS[i];if(!o)return!1;n[0]?r.removeUser(...n):r.removeUser(o)}}],this.protocols={},this.connect=(r,n)=>{let i=new Ub(r,this.SERVICES,this);return this.ENDPOINTS[i.id]=i,i.check().then(o=>{o&&(n&&n(i),this.login(i))}),i},this.disconnect=r=>le(this,void 0,void 0,function*(){this.logout(this.ENDPOINTS[r]),delete this.ENDPOINTS[r]}),this._loadBackend=(r,n=r.name)=>{var i;this.SERVICES[n]=r,this.SERVICES[n].status=!0,(i=r.routes)===null||i===void 0||i.forEach(o=>this.addRoute(Object.assign({service:n},o))),r.subscribe&&r.subscribe((o,s,a)=>le(this,void 0,void 0,function*(){let l=yield this.handleMessage(o,s);if(a==null?void 0:a.includes("worker")){if(l===null||!r[a])return l;r[a].postMessage({route:"worker/workerPost",message:l,origin:r.id,callbackId:o.callbackId})}return l})),(r==null?void 0:r.serviceType)==="subscription"&&this.SUBSCRIPTIONS.push(r.updateSubscribers)},this._loadService=(r,n=r==null?void 0:r.name)=>le(this,void 0,void 0,function*(){return this._loadBackend(r,n),yield this._loadClient(r,n,!0)}),this._loadClient=(r,n,i=!1)=>new Promise(o=>{let s=r.name;if(r.subscribe&&r.subscribe((a,l)=>le(this,void 0,void 0,function*(){var h;let g=this.SERVICES[s],m=g.status===!0,p;return l==="local"?p=yield this.handleLocalRoute(a):m&&(p=yield this.send({route:`${g.route}/${a.route}`,endpoint:r==null?void 0:r.endpoint},...(h=a.message)!==null&&h!==void 0?h:[])),p})),i)o(r);else{this.SERVICES[s]=r;let a=l=>{this.SERVICES[s].status=!0,r.setEndpointRoute instanceof Function&&r.setEndpointRoute(l),r.routes.forEach(h=>{this.ROUTES[`${l}/${h.route}`]=h}),o(r)};this.SERVICES[s].status===!0?a(this.SERVICES[s]):this.SERVICES[s].status=a}}),this.get=(r,...n)=>this._send(r,"GET",...n),this.delete=(r,...n)=>this._send(r,"DELETE",...n),this.post=(r,...n)=>this._send(r,"POST",...n),this.send=this.post,this._send=(r,n,...i)=>le(this,void 0,void 0,function*(){let o,s;if(o=typeof r=="string"||(r==null?void 0:r.endpoint)==null?Object.values(this.ENDPOINTS)[0]:r.endpoint,o)return s=yield o.send(r,{message:i,method:n}),s&&this.handleLocalRoute(s,o),s==null?void 0:s.message}),this.handleLocalRoute=(r,n,i)=>le(this,void 0,void 0,function*(){var o,s,a;if(n&&i&&!r.suppress&&n.connection&&((a=(s=(o=n.connection)===null||o===void 0?void 0:o.service)===null||s===void 0?void 0:s.responses)===null||a===void 0||a.forEach(l=>l(Object.assign({route:i},r)))),!r.block){let l=this.ROUTES[r==null?void 0:r.route];if((l==null?void 0:l.post)instanceof Function)return l.post(this,r.message,r.id)}}),this.subscribe=(r,n={})=>le(this,void 0,void 0,function*(){if(Object.keys(this.ENDPOINTS).length>0||(n==null?void 0:n.endpoint))return n.endpoint||(n.endpoint=Object.values(this.ENDPOINTS)[0]),yield n.endpoint._subscribe(n).then(i=>n.endpoint.subscribe(r));throw"Remote is not specified"}),this.handleMessage=(r,n)=>le(this,void 0,void 0,function*(){var i;let o={};if(Array.isArray(r))o.route=r[0],o.message=r.slice(1),o.callbackId=void 0;else if(typeof r=="string"){let s=r.split(" ");o.route=s[0],o.message=s.slice(1),o.callbackId=void 0}else typeof r=="object"&&Object.assign(o,r);if(typeof o=="object"&&!Array.isArray(o)&&o.route!=null){let s=this.USERS[o==null?void 0:o.id];console.log("runRoute",o.route);let a=yield this.runRoute(o.route,o.method,o.message,(i=s==null?void 0:s.id)!==null&&i!==void 0?i:o.id,o.callbackId);return a&&o.suppress&&(a.suppress=o.suppress),a}return null}),e.interval&&(this.INTERVAL=e.interval),this.STATE=new Mb({},this.INTERVAL,void 0),this.DEBUG=e==null?void 0:e.debug,"onbeforeunload"in globalThis&&(globalThis.onbeforeunload=()=>{Object.values(this.ENDPOINTS).forEach(r=>{r.type!="webrtc"&&this.logout(r)})}),this.load({routes:this.DEFAULTROUTES}),this.DEBUG&&this.runCallback("routes",[!0]),(e==null?void 0:e.endpoints)&&e.endpoints.forEach(r=>this.connect(r))}login(e,r){return le(this,void 0,void 0,function*(){yield this.logout(e);let n=Object.values(e?{endpoint:e}:this.ENDPOINTS);return(yield Promise.all(n.map(o=>le(this,void 0,void 0,function*(){let s=yield this.send({route:"login",endpoint:o},r);return o.setCredentials(s),s})))).reduce((o,s)=>o*s[0],!0)===1})}logout(e){return le(this,void 0,void 0,function*(){return(yield Promise.all(Object.values(e?{endpoint:e}:this.ENDPOINTS).map(r=>le(this,void 0,void 0,function*(){return yield this.send({route:"logout",endpoint:r},r.credentials)})))).reduce((r,n)=>r*n[0],!0)===1})}load(e,r=e.name){return le(this,void 0,void 0,function*(){let n=e.constructor.type==="client",i=!e.constructor.type||e.constructor.type==="service",o=e.constructor.type==="backend";return i&&(yield this._loadService(e,r)),o&&(yield this._loadBackend(e,r)),n&&(yield this._loadClient(e)),e})}format(e,r={}){return e!==void 0&&(e&&typeof e=="object"&&("message"in e||"route"in e)||(e={message:e}),Array.isArray(e.message)||(e.message=[e.message]),r.service&&(e==null?void 0:e.route)&&(e.route=`${r.service}/${e.route}`),r.headers&&(e.headers=r.headers)),(e==null?void 0:e.route)&&(e.route=e.route.replace(/\/\*\*?/,"")),e}runRoute(e,r,n=[],i,o){return le(this,void 0,void 0,function*(){try{return e==null?void 0:(!r&&Array.isArray(n)&&(r=n.length>0?"POST":"GET"),this.DEBUG&&console.log("route",e),yield this.runCallback(e,n,i,r).then(s=>{if(this.DEBUG&&console.log("Result:",s),s!==void 0&&((s=this.format(s)).callbackId=o,this.ROUTES[s.route]&&(s.block=!0),s.message!=="DONOTSEND"))return s}).catch(console.error))}catch(s){return new Error("Route failed...")}})}addUser(e){if(e&&(e.id||e._id)){e._id||(e._id=hc()),e.id||(e.id=e._id);let r=this.USERS[e._id],n=r!=null?r:{id:e.id,_id:e._id,username:e.id,origin:e.id,props:{},updatedPropNames:[],sessions:[],blocked:[],lastUpdate:Date.now(),lastTransmit:0,latency:0,routes:new Map};Object.assign(n,e),this.DEBUG&&console.log("Adding User, Id:",e._id),this.USERS[e.id]=n;for(let i in this.SERVICES){let o=this.SERVICES[i];o.status===!0&&yb(o.name+"/users").forEach(s=>{this.ROUTES[s]&&this.runRoute(s,"POST",[n],e._id)})}return n}return!1}removeUser(e){let r=typeof e=="string"?this.USERS[e]:e;return!!r&&(Object.values(this.SERVICES).forEach(n=>{if(n.status===!0){let i=n.name+"/users";this.ROUTES[i]&&this.runRoute(i,"DELETE",[r],r.id)}}),delete r.id,!0)}blockUser(e,r=""){return!(!this.USERS[r]||e.blocked.includes(r)||e.id===r)&&(e.blocked.push(r),!0)}sendMsg(e="",r="",n){let i=n?Object.assign(n,{message:r}):{message:r};if(typeof e=="string"){let o=this.USERS[e];o&&o.send(i)}else if(typeof e=="object")return e.send(i),!0;return!1}addRoute(e){let r=[(e=Object.assign({},e)).route,...e.aliases?e.aliases:[]];return delete e.aliases,r.forEach(n=>{var i,o;if(!n||!e.post&&!e.get)return!1;n=e.route=(e.service?`${e.service}/`:"")+n,this.removeRoute(n),n[0]==="/"&&(n=n.slice(1)),e.args=function(s){if(s instanceof Function){var a=s.toString().replace(Wk,""),l=a.slice(a.indexOf("(")+1,a.indexOf(")")).match(qk);return l===null&&(l=[]),l}}(e.post),this.ROUTES[n]=Object.assign(e,{route:n}),e.get&&(this.STATE.setState({[n]:(o=(i=e.get)===null||i===void 0?void 0:i.object)!==null&&o!==void 0?o:e.get}),this.STATE.subscribe(n,s=>{var a;let l=((a=e.get)===null||a===void 0?void 0:a.transform)?e.get.transform(s):s;this.SUBSCRIPTIONS.forEach(h=>h(this,{route:n,message:l}))}))}),!0}removeRoute(e){return delete this.ROUTES[e]}runCallback(e,r=[],n,i=r.length>0?"POST":"GET"){return new Promise(o=>le(this,void 0,void 0,function*(){let s=yb(e),a={route:e,block:!0,message:{html:`<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Error</title>
</head>
<body>
<pre>404 Not Found</pre>
</body>
</html>`},headers:{"Content-Type":"text/html"}};Promise.all(s.map(l=>le(this,void 0,void 0,function*(){var h;let g=this.ROUTES[l];if(g){this.DEBUG&&console.log("routeInfo",g);try{let m;if((g==null?void 0:g.delete)&&i.toUpperCase()==="DELETE")m=yield g.delete(this,r,n);else if(i.toUpperCase()!=="GET"&&(g==null?void 0:g.post))m=(g==null?void 0:g.post)?yield g==null?void 0:g.post(this,r,n):a;else{let p=this.STATE.data[g.route];if(p){let w=e.replace(g.route.split("/").filter(b=>b!="*"&&b!="**").join("/"),"").split("/").filter(b=>!!b);m={message:((h=g.get)===null||h===void 0?void 0:h.transform)?yield g.get.transform(p,...w):p}}else m=a}o(this.format(m,g))}catch(m){console.log("Callback Failed: ",m)}}}))).then(l=>o(a))}))}checkRoutes(e){var r,n;return le(this,void 0,void 0,function*(){if(!e.data)return;let i=(n=(r=this.ROUTES[e.data.foo])!==null&&r!==void 0?r:this.ROUTES[e.data.route])!==null&&n!==void 0?n:this.ROUTES[e.data.functionName];return i||(i=this.ROUTES[e.data.foo]),!!i&&(e.data.message?yield i.post(this,e.data.message,e.data.origin):void 0)})}}{constructor(e={},r){super(r),this.tablet=new class{constructor(n={},i=!1,o){this.DS=gi,this.collections=new Map,this.data={byTime:{},notes:{},events:{},sleep:{},food:{},hr:{},ppg:{},hrv:{},ecg:{},emg:{},eeg:{},fnirs:{}},this.rolloverLimit=5e4,this.dataSorts=new Map,this.watches={},this.onCollectionSet=(s,a)=>{},this.ontrigger=s=>{},this.threaded=i,o?this.workers=o:typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&(this.threaded=!0),Object.assign(this.data,n),this.dataSorts=new Map,this.watches={},this.setSort("event",s=>(this.data.events[s.timestamp]?this.data.events[s.timestamp].push(s):this.data.events[s.timestamp]=[s],s.event==="sleep"&&(this.data.sleep[s.timestamp]?this.data.sleep[s.timestamp].push(s):this.data.sleep[s.timestamp]=[s]),s)),this.setSort(["notes","note","link"],s=>(this.data.notes[s.timestamp]?this.data.notes[s.timestamp].push(s):this.data.notes[s.timestamp]=[s],this.data.byTime[s.timestamp]?this.data.byTime[s.timestamp].push(s):this.data.byTime[s.timestamp]=[s],s)),this.id=this.randomId("dataTablet")}randomId(n=""){return`${n+Math.floor(Math.random()+Math.random()*Math.random()*1e16)}`}setLocalData(n){let i=o=>{let s=o.structType,a=this.collections.get(s);a||(a=new Map,this.collections.set(s,a)),a.set(o._id,o),this.onCollectionSet(s,a)};Array.isArray(n)?n.forEach(o=>{i(o)}):i(n)}getLocalData(n,i){let o="",s="",a="";if(typeof i=="object"?(o=i.ownerId,s=Object.keys(i).filter(h=>h!="ownerId")[0],a=i[s]):a=i,!(n||o||s||a))return[];let l=[];if(!n&&(o||s))return this.collections.forEach(h=>{if(s!=="_id"&&s!=="id"||!a)h.forEach(g=>{s&&a?g[s]===a&&g.ownerId===o&&l.push(g):g.ownerId===o&&l.push(g)});else{let g=h.get(a);g&&l.push(g)}}),l;{let h=this.collections.get(n);if(!h)return l;if(!s&&!o)return h.forEach(g=>{l.push(g)}),l;if((s==="_id"||s==="id")&&a)return h.get(a);h.forEach((g,m)=>{s&&a&&!o?g[s]===a&&l.push(g):o&&!s?g.ownerId===o&&l.push(g):o&&s&&a&&g.ownerId===o&&g[s]&&g[s]===a&&l.push(g)})}return l}runSort(n,i={},o=[],s=this){let a;if(this.threaded===!1){let l=this.getSort(n);if(!l)return!1;a=l(i,o,s)}else if(this.threaded===!0)return this.workers.runWorkerFunction("runSort",[n,i,o],this.workerId,this.id);return a}setSort(n,i=(o,s=[],a=this)=>{}){if(this.threaded===!1)Array.isArray(n)?n.forEach(o=>{this.dataSorts.set(o,i)}):this.dataSorts.set(n,i);else if(this.threaded===!0)return this.workers.runWorkerFunction("setSort",[n,i.toString()],this.workerId,this.id)}getSort(n){return this.threaded===!1?this.dataSorts.get(n):this.threaded===!0?this.workers.runWorkerFunction("getSort",[n],this.workerId,this.id):void 0}checkWatches(n={}){for(let i in this.watches)this.watches[i].ondata(n,this.watches[i].accum,this.watches[i]),this.watches[i].triggered&&(this.ontrigger(this.watches[i].accum),this.watches[i].triggered=!1)}setWatch(n,i=(s,a,l)=>{},o=s=>{}){this.watches[n]={triggered:!1,accum:this.DS.Struct("alert"),ondata:i,ontrigger:o}}getWatch(n){return this.watches[n]}sortStructsIntoTable(){return re(this,arguments,function*(n=[]){n.sort(function(o,s){return o.timestamp-s.timestamp});let i=[];for(let o=0;o<n.length;o++){let s=n[o];if(!s.timestamp)continue;let a=s.timestamp;if(this.data.byTime[a]?this.data.byTime[a].push(s):this.data.byTime[a]=[s],s.structType==="dataInstance"&&s.data)s.data.forEach(l=>re(this,null,function*(){var h;if(typeof l=="object"&&!Array.isArray(l)){let g=l.dataType;if(l.ownerId=s.ownerId,l.timestamp||(l.timestamp=a),g){let m=this.runSort(g,l,i,this);m?((h=m.constructor)==null?void 0:h.name)!=="Promise"&&(this.checkWatches(m),this.onUpdate(a,m),i.push(m)):(this.data[g]||(this.data[g]={}),l.timestamp=a,this.data[g][a]?this.data[g][a].push(l):this.data[g][a]=[l],this.data.byTime[a]?this.data.byTime[a].push(l):this.data.byTime[a]=[l],this.checkWatches(l),this.onUpdate(a,l),i.push(l))}}}));else{let l=this.runSort(s.structType,s,i,this);if(l)this.checkWatches(l),this.onUpdate(a,l),i.push(l);else{let h=s.structType;this.data[h]||(this.data[h]={}),this.data[h][a]?this.data[h][a].push(s):this.data[h][a]=[s],this.checkWatches(s),this.onUpdate(a,s),i.push(s)}}}for(let o in this.data)this.data[o]=this.sortObjectByPropName(this.data[o]);this.onSorted(i)})}onUpdate(n,i,o=this.data){}onSorted(n=[]){}getDataByTimestamp(n,i){if(this.threaded===!0)return this.workers.runWorkerFunction("getDataByTimestamp",[n,i],this.workerId,this.id);let o=this.data.byTime[n];return i&&o&&(o=o.filter(s=>!i||i===s.ownerId)),o}getDataByTimeRange(n,i,o,s){if(this.threaded===!0)return this.workers.runWorkerFunction("getDataByTimeRange",[n,i,o,s],this.workerId,this.id);let a={};if(o){for(let l in this.data[o]){let h=parseInt(l);h>n&&h<i&&(a[l]=[...this.data[o][l]])}o==="sleep"&&(a=this.filterSleepResults(a))}else for(let l in this.data.byTime){let h=parseInt(l);h>n&&h<i&&(a[l]=[...this.data.byTime[l]])}if(s&&a)for(let l in a){let h=[];a[l]=a[l],a[l].forEach((g,m)=>{g.ownerId!==s&&h.push(m)}),h.reverse().forEach(g=>{a[l].splice(g,1)}),a[l].length===0&&delete a[l]}return a}getDataByType(n,i,o){if(!this.data[n])return;let s=kl({},this.data[n]);if(i&&(s=[...s[i]]),o&&s)for(let a in s){let l=[];s[a]=[...s[a]],s[a].forEach((h,g)=>{h.ownerId!==o&&l.push(g)}),l.reverse().forEach(h=>{s[a].splice(h,1)}),s[a].length===0&&delete s[a]}return n==="sleep"&&(s=this.filterSleepResults(s)),s}filterSleepResults(n={}){let i=[];for(let o in n)n[o]=[...n[o]],i.push(...n[o].filter(s=>s.structType==="event"));return i.forEach(o=>{let s;for(let a in n)n[a].forEach((l,h)=>!!(l.structType==="fitbitsleep"&&o.startTime&&o.endTime&&Math.abs(l.startTime-o.startTime)<432e5&&Math.abs(l.endTime-o.endTime)<432e5&&o.endTime-o.startTime>72e5)&&(s=h,!0)),s&&n[a].splice(s,1)}),n}sortObjectByPropName(n){return Object.keys(n).sort().reduce((i,o)=>(i[o]=n[o],i),{})}checkRollover(n,i=this.rolloverLimit){if(!n)return!1;let o=this.collections.get(n);return!!o&&(o.forEach(s=>{for(let a in s)Array.isArray(s[a])?s[a].length>i&&(s[a].slice(s[a].length-i),a==="ffts"?s.fftCount=s[a].length:a==="times"&&(s.count=s[a].length)):typeof s[a]=="object"&&this.checkRollover(s[a])}),!0)}},this.collections=this.tablet.collections,this.id=ys(),this.baseServerCallback=n=>{let i=n;if(typeof n=="object"&&(n==null?void 0:n.structType)&&(i=[n]),Array.isArray(n)){let o=i.filter(s=>{if(s.structType!=="notification")return!0});this.tablet&&this.tablet.sortStructsIntoTable(o),i.forEach(s=>{var a;s.structType&&s.structType!=="USER"||(s.email?s.structType="user":s.structType="uncategorized"),s.structType==="user"||s.structType==="authorization"||s.structType==="group"?(s.structType==="user"&&(s._id=s.id),this.setLocalData(s)):s.structType==="notification"?(this.getLocalData("notification",{ownerId:s.ownerId,_id:s.parent._id})?this.setLocalData(s):this.getLocalData(s.structType,{_id:s.parent._id})||this.overwriteLocalData(s),s.ownerId!==((a=this.currentUser)===null||a===void 0?void 0:a._id)||s.parent.structType!=="user"&&s.parent.structType!=="dataInstance"&&s.parent.structType!=="schedule"&&s.parent.structType!=="authorization"||this.resolveNotifications([s],!0)):this.overwriteLocalData(s)})}(n==null?void 0:n.message)==="notifications"&&this.checkForNotifications(),(n==null?void 0:n.message)==="deleted"&&this.deleteLocalData(n.id),this.onResult(n)},this.resolveNotifications=(n=[],i=!0,o=this.currentUser)=>le(this,void 0,void 0,function*(){if(!o||n.length===0)return;let s=[],a=[],l=[];return n.length===0&&(n=this.getLocalData("notification",{ownerId:o._id})),n.forEach(h=>{h.parent.structType,l.push(h.parent.structType),s.push(h.parent._id),a.push(h._id),this.deleteLocalData(h)}),this.deleteData(a),!(i&&(l.reverse().forEach((h,g)=>{h==="user"&&(this.getUser(a[g]),s.splice(s.length-g-1,1))}),s.length>0))||(yield this.getDataByIds(s,o._id,"notification"))}),this.getLocalUserPeerIds=(n=this.currentUser)=>{if(!n)return[];let i=[];return this.getLocalData("authorization",n._id).forEach(o=>{o.authorizations.indexOf("peer")>-1&&o.authorizerId===n._id&&i.push(o.authorizedId)}),i},this.authorizeUser=(n,i="",o="",s="",a="",l=[],h=[],g=[],m=[],p=!1)=>le(this,void 0,void 0,function*(){if(!n)return;let w=this.createStruct("authorization",void 0,n,void 0);return w.authorizedId=s,w.authorizedName=a,w.authorizerId=i,w.authorizerName=o,w.authorizations=l,w.structs=h,w.excluded=g,w.groups=m,w.expires=p,w.status="PENDING",w.associatedAuthId="",w.ownerId=n._id,w=yield this.setAuthorization(w),w}),this.addGroup=(n,i="",o="",s=[],a=[],l=[],h=!0)=>le(this,void 0,void 0,function*(){if(!n)return;let g=this.createStruct("group",void 0,n);return g.name=i,g.details=o,g.admins=s,g.peers=a,g.clients=l,g.users=[...s,...a,...l],g.ownerId=n._id,h&&(g=yield this.setGroup(g)),g}),this.addData=(n,i="",o="",s="",a=[],l=!1,h=!0)=>le(this,void 0,void 0,function*(){if(!n)return;let g=this.createStruct("dataInstance",void 0,n);return g.author=i,g.title=o,g.type=s,g.data=a,g.expires=l,g.ownerId=n._id,h&&(g=yield this.updateServerData([g])[0]),g}),this.addEvent=(n,i="",o="",s="",a=0,l=0,h=0,g=[],m=[],p=!0)=>le(this,void 0,void 0,function*(){if(!n)return;m.length===0&&(m=this.getLocalUserPeerIds(n));let w=this.createStruct("event",void 0,n);return w.author=i,w.event=o,w.notes=s,w.startTime=a,w.endTime=l,w.grade=h,w.attachments=g,w.users=m,w.ownerId=n._id,p&&(w=yield this.updateServerData([w])[0]),w}),this.addDiscussion=(n,i="",o="",s="",a="",l=[],h=[],g=!0)=>le(this,void 0,void 0,function*(){if(!n)return;h.length===0&&(h=this.getLocalUserPeerIds(n));let m=this.createStruct("discussion",void 0,n);m.topic=o,m.category=s,m.message=a,m.attachments=l,m.authorId=i,m.users=h,m.comments=[],m.replies=[],m.ownerId=n._id;let p=[m];return g&&(m=yield this.updateServerData(p)[0]),m}),this.addChatroom=(n,i="",o="",s=[],a=[],l=!0)=>le(this,void 0,void 0,function*(){if(!n)return;a.length===0&&(a=this.getLocalUserPeerIds(n));let h=this.createStruct("chatroom",void 0,n);h.message=o,h.attachments=s,h.authorId=i,h.users=a,h.replies=[],h.comments=[],h.ownerId=n._id;let g=[h];return l&&(h=yield this.updateServerData(g)[0]),h}),this.addComment=(n,i,o,s="",a="",l=[],h=!0)=>le(this,void 0,void 0,function*(){if(!n)return;let g=this.createStruct("comment",void 0,n,i);g.authorId=s,g.replyTo=o==null?void 0:o._id,g.message=a,g.attachments=l,g.users=i==null?void 0:i.users,g.replies=[],g.ownerId=n._id,h?o==null||o.replies.push(g._id):o==null||o.replies.push(g),h?i==null||i.comments.push(g._id):i==null||i.comments.push(g);let m=[g,i];return o._id!==i._id&&m.push(o),h&&(g=yield this.updateServerData(m)[0]),g}),e instanceof Object&&Object.keys(e).length>0&&this.setupUser(e),this.load(new Bb(this))}setupUser(e,r=n=>{}){return le(this,void 0,void 0,function*(){if(!e)return console.error('must provide an info object! e.g. {_id:"abc123"}'),void r(void 0);let n=!1;e.id&&(e._id=e.id),console.log("Generating/Getting User: ",e._id);let i,o=yield this.getUser(e._id),s=!1;if(o==null?void 0:o._id){i=o.user;for(let a in e){let l=this.userStruct();if(i[a]&&a!=="_id")if(Array.isArray(e[a])){for(let h=0;h<i[a].length;h++)if(e[a].indexOf(i[a][h])<0){i[a]=e[a],n=!0;break}if(!n){for(let h=0;h<e[a].length;h++)if(i[a].indexOf(e[a][h])<0){i[a]=e[a],n=!0;break}}}else i[a]!==e[a]&&(i[a]=e[a],n=!0);else i[a]!==e[a]&&typeof l[a]=="string"&&a!=="_id"&&(i[a]=e[a],n=!0)}(o==null?void 0:o.authorizations)&&Array.isArray(o.authorizations)&&this.setLocalData(o.authorizations),(o==null?void 0:o.groups)&&Array.isArray(o.groups)&&this.setLocalData(o.groups)}else{i=this.userStruct(e,!0),s=!0,yield this.setUser(i);let a=this.getLocalData(void 0,{ownerId:i._id});(a==null?void 0:a.length)>0&&this.updateServerData(a,l=>{console.log("setData",l)}),this.setAuthorizationsByGroup(i)}if(s)this.currentUser=i,this.setLocalData(i);else{let a=yield this.getAllUserData(i._id,void 0);if(console.log("getServerData",a),a&&a.length!==0){this.setLocalData(a);let l=a.filter(p=>{if(p.structType==="notification"&&(this.getLocalData("authorization",p.parent._id)||p.parent.structType==="user"||p.parent.structType==="authorization"||!this.getLocalData(p.parent.structType,p.parent._id)))return!0}),h=a.filter(p=>{if(p.structType==="comment")return!0}),g=[];h.forEach(p=>{this.getLocalData("comment",{_id:p._id})||g.push(p._id)}),g.length>0&&this.deleteData(g),l.length>0&&(this.resolveNotifications(l,!1,void 0),n=!0);let m=a.filter(p=>{if(p.structType!=="notification")return!0});this.tablet&&this.tablet.sortStructsIntoTable(m)}this.setLocalData(i),console.log("currentUser",i),this.currentUser=i,console.log("collections",this.tablet.collections)}return r(this.currentUser),this.currentUser})}onResult(e){}randomId(e=""){return`${e+Math.floor(Math.random()+Math.random()*Math.random()*1e16)}`}addStruct(e="struct",r={},n,i,o=!0){return le(this,void 0,void 0,function*(){let s=gi.Struct(e,r,n,i);return o&&(s=yield this.updateServerData([s])[0]),s})}ping(e=r=>{console.log(r)}){var r;return le(this,void 0,void 0,function*(){let n=(r=yield this.send("ping"))===null||r===void 0?void 0:r[0];return e(n),n})}sendMessage(e="",r="",n,i=o=>{console.log(o)}){var o;return le(this,void 0,void 0,function*(){let s=[e,r];n&&(s[2]=n);let a=(o=yield this.send("sendMessage",...s))===null||o===void 0?void 0:o[0];return i(a),a})}getUser(e="",r=this.baseServerCallback){var n;return le(this,void 0,void 0,function*(){let i=(n=yield this.send("structs/getUser",e))===null||n===void 0?void 0:n[0];return r(i),i})}getUsers(e=[],r=this.baseServerCallback){var n;return le(this,void 0,void 0,function*(){let i=(n=yield this.send("structs/getUsers",...e))===null||n===void 0?void 0:n[0];return r(i),i})}getUsersByRoles(e=[],r=this.baseServerCallback){var n;return le(this,void 0,void 0,function*(){let i=(n=yield this.send("structs/getUsersByRoles",e))===null||n===void 0?void 0:n[0];return r(i),i})}getAllUserData(e,r=[],n=this.baseServerCallback){var i;return le(this,void 0,void 0,function*(){let o=(i=yield this.send("structs/getAllData",e,r))===null||i===void 0?void 0:i[0];return n(o),o})}getData(e,r,n,i=0,o=0,s=this.baseServerCallback){var a;return le(this,void 0,void 0,function*(){let l=(a=yield this.send("structs/getData",e,r,n,i,o))===null||a===void 0?void 0:a[0];return s(l),l})}getDataByIds(e=[],r,n,i=this.baseServerCallback){var o;return le(this,void 0,void 0,function*(){let s=(o=yield this.send("structs/getDataByIdss",e,r,n))===null||o===void 0?void 0:o[0];return i(s),s})}getStructParentData(e,r=this.baseServerCallback){var n,i,o;return le(this,void 0,void 0,function*(){if(!e.parent)return;let s=[(n=e.parent)===null||n===void 0?void 0:n.structType,"_id",(i=e.parent)===null||i===void 0?void 0:i._id],a=(o=yield this.send("structs/getData",...s))===null||o===void 0?void 0:o[0];return r(a),a})}setUser(e={},r=this.baseServerCallback){var n;return le(this,void 0,void 0,function*(){let i=(n=yield this.send("structs/setUser",this.stripStruct(e)))===null||n===void 0?void 0:n[0];return r(i),i})}checkUserToken(e,r=this.currentUser,n=this.baseServerCallback){return le(this,void 0,void 0,function*(){if(!e)return!1;let i=!1;for(let o in e){let s=this.userStruct();if(r[o]&&o!=="_id")if(Array.isArray(e[o])){for(let a=0;a<r[o].length;a++)if(e[o].indexOf(r[o][a])<0){r[o]=e[o],i=!0;break}if(!i){for(let a=0;a<e[o].length;a++)if(r[o].indexOf(e[o][a])<0){r[o]=e[o],i=!0;break}}}else r[o]!==e[o]&&(r[o]=e[o],i=!0);else!r[o]&&s[o]&&(r[o]=e[o],i=!0)}return i&&(yield this.setUser(r,n))})}updateServerData(e=[],r=this.baseServerCallback){var n;return le(this,void 0,void 0,function*(){let i=new Array;e.forEach(s=>{i.push(this.stripStruct(s))});let o=(n=yield this.send("structs/setData",...i))===null||n===void 0?void 0:n[0];return r(o),o})}deleteData(e=[],r=this.baseServerCallback){var n;return le(this,void 0,void 0,function*(){let i=[];e.forEach(s=>{(s==null?void 0:s.structType)&&(s==null?void 0:s._id)&&(i.push({structType:s.structType,_id:s._id}),this.deleteLocalData(s))}),console.log("deleting",i);let o=(n=yield this.send("structs/deleteData",...i))===null||n===void 0?void 0:n[0];return r(o),o})}deleteUser(e,r=this.baseServerCallback){var n;return le(this,void 0,void 0,function*(){if(!e)return;let i=(n=yield this.send("structs/deleteUser",e))===null||n===void 0?void 0:n[0];return r(i),i})}setGroup(e={},r=this.baseServerCallback){var n;return le(this,void 0,void 0,function*(){let i=(n=yield this.send("structs/setGroup",this.stripStruct(e)))===null||n===void 0?void 0:n[0];return r(i),i})}getGroups(e=this.currentUser._id,r="",n=this.baseServerCallback){var i;return le(this,void 0,void 0,function*(){let o=(i=yield this.send("structs/getGroups",e,r))===null||i===void 0?void 0:i[0];return n(o),o})}deleteGroup(e,r=this.baseServerCallback){var n;return le(this,void 0,void 0,function*(){if(!e)return;this.deleteLocalData(e);let i=(n=yield this.send("structs/deleteGroup",e))===null||n===void 0?void 0:n[0];return r(i),i})}setAuthorization(e={},r=this.baseServerCallback){var n;return le(this,void 0,void 0,function*(){let i=(n=yield this.send("structs/setAuth",this.stripStruct(e)))===null||n===void 0?void 0:n[0];return r(i),i})}getAuthorizations(e,r,n){var i,o;return e===void 0&&(e=(i=this.currentUser)===null||i===void 0?void 0:i._id),r===void 0&&(r=""),n===void 0&&(n=this.baseServerCallback),le(this,void 0,void 0,function*(){if(e===void 0)return;let s=(o=yield this.send("structs/getAuths",e,r))===null||o===void 0?void 0:o[0];return n(s),s})}deleteAuthorization(e,r=this.baseServerCallback){var n;return le(this,void 0,void 0,function*(){if(!e)return;this.deleteLocalData(e);let i=(n=yield this.send("structs/deleteAuth",e))===null||n===void 0?void 0:n[0];return r(i),i})}checkForNotifications(e){var r;return e===void 0&&(e=(r=this.currentUser)===null||r===void 0?void 0:r._id),le(this,void 0,void 0,function*(){return yield this.getData("notification",e)})}setAuthorizationsByGroup(e=this.currentUser){return le(this,void 0,void 0,function*(){let r=this.getLocalData("authorization",{ownerId:e._id});e.userRoles.forEach(n=>{let i,o=n.split("_")[0];n.includes("client")?i=o+"_peer":n.includes("peer")?i=o+"_client":n.includes("admin")&&(i=o+"_owner"),i&&this.getUsersByRoles([i],s=>{s==null||s.forEach(a=>{let l=a.username;l||(l=a.email),l||(l=a.id);let h=e.username;h||(h=e.email),h||(h=e.id),l!==h&&(n.includes("client")?r.find(g=>{if(g.authorizerId===a.id&&g.authorizedId===e.id)return!0})||this.authorizeUser(gi.ProfileStruct("user",e,e),a.id,l,e.id,h,["peer"],void 0,[n]):n.includes("peer")&&(r.find(g=>{if(g.authorizedId===a.id&&g.authorizerId===e.id)return!0})||this.authorizeUser(gi.ProfileStruct("user",e,e),e.id,h,a.id,l,["peer"],void 0,[n])))})})})})}deleteRoom(e){var r;return le(this,void 0,void 0,function*(){if(!e)return!1;let n=[e];return(r=e.comments)===null||r===void 0||r.forEach(i=>{let o=this.getLocalData("comment",{_id:i});n.push(o)}),!!e&&(yield this.deleteData(n))})}deleteComment(e){var r,n,i;return le(this,void 0,void 0,function*(){let o=[e],s=(g=e)=>{(g==null?void 0:g.replies)&&g.replies.forEach(m=>{let p=this.getLocalData("comment",{_id:m});p&&(p.replies.length>0&&p.replies.forEach(w=>{s(w)}),o.push(p))})};s(e);let a=this.getLocalData((r=e.parent)===null||r===void 0?void 0:r.structType,{_id:(n=e.parent)===null||n===void 0?void 0:n._id}),l=[];a&&(l=[a],o.forEach(g=>{var m,p;let w=(m=a.replies)===null||m===void 0?void 0:m.indexOf(g._id);w>-1&&a.replies.splice(w,1);let b=(p=a.comments)===null||p===void 0?void 0:p.indexOf(g._id);b>-1&&a.comments.splice(b,1)}));let h=this.getLocalData("comment",{_id:e.replyTo});if((h==null?void 0:h._id)!==(a==null?void 0:a._id)){let g=(i=h.replies)===null||i===void 0?void 0:i.indexOf(a._id);g>-1&&h.replies.splice(g,1),l.push(h)}return l.length>0&&(yield this.updateServerData(l)),yield this.deleteData(o)})}getUserDataByAuthorization(e,r,n,i=0,o=0,s=this.baseServerCallback){return le(this,void 0,void 0,function*(){let a=e.authorizerId;return a?new Promise(l=>le(this,void 0,void 0,function*(){this.getUser(a,h=>le(this,void 0,void 0,function*(){r?yield this.getData(r,a,n,i,o,s):yield this.getAllUserData(a,["notification"],s),l(h),s(h)}))})):void 0})}getUserDataByAuthorizationGroup(e="",r,n,i=0,o=0,s=this.baseServerCallback){return le(this,void 0,void 0,function*(){let a=this.getLocalData("authorization"),l=[];return yield Promise.all(a.map(h=>le(this,void 0,void 0,function*(){var g;if((g=h.groups)===null||g===void 0?void 0:g.includes(e)){let m=h.authorizerId;if(m){let p,w=yield this.getUser(m,s);w&&l.push(w),p=r?yield this.getData(r,m,n,i,o,s):yield this.getAllUserData(m,["notification"],s),p&&l.push(p)}return!0}}))),l})}overwriteLocalData(e){if(Array.isArray(e))e.forEach(r=>{let n=this.getLocalData(r.structType,{ownerId:r.ownerId,_id:r._id});n&&(n==null?void 0:n.length)!==0?Object.assign(n,r):this.setLocalData(r)});else{let r=this.getLocalData(e.structType,{ownerId:e.ownerId,_id:e._id});r&&(r==null?void 0:r.length)!==0?Object.assign(r,e):this.setLocalData(e)}}setLocalData(e){this.tablet.setLocalData(e)}getLocalData(e,r){return this.tablet.getLocalData(e,r)}getLocalReplies(e){let r=[];return e.replies?e.replies.reduce((n,i)=>n*(typeof i=="object"?1:0),1)?e.replies:(r=this.getLocalData("comment",{replyTo:e._id}),r):r}hasLocalAuthorization(e,r=this.currentUser._id){return this.getLocalData("authorization",{ownerId:r}).find(i=>i.authorizedId===r&&i.authorizerId===e||i.authorizerId===r&&i.authorizedId===e||void 0)||!1}deleteLocalData(e){return Array.isArray(e)?e.forEach(r=>this.deleteStruct(r)):this.deleteStruct(e),!0}deleteStruct(e){if(typeof e=="string"&&(e=this.getLocalData(e)),!e)throw new Error("Struct not supplied");return!(!e.structType||!e._id)&&(this.tablet.collections.get(e.structType).delete(e._id),!0)}stripStruct(e={}){let r=Object.assign({},e);for(let n in r)r[n]!==void 0&&r[n].constructor.name!=="Map"||delete r[n];return r}createStruct(e,r,n=this.currentUser,i){return gi.Struct(e,r,n,i)}userStruct(e={},r=!1){let n=gi.ProfileStruct(void 0,e,e);e._id?n.id=e._id:e.id?n.id=e.id:n.id="user"+Math.floor(1e10*Math.random()),n._id=n.id,n.ownerId=n.id;for(let i in e)Object.keys(gi.ProfileStruct()).indexOf(i)<0&&delete n[i];return r&&(this.currentUser=n),n}dataObject(e,r="any",n=Date.now()){return{type:r,data:e,timestamp:n}}}});function yc(){return re(this,null,function*(){let t=Ke.connect({target:cp.settings.dataserver,credentials:so,type:"websocket"}).subscribe(r=>{console.log("Indirect message from socket",r)});yield Ke.send("routes").then(r=>console.log("Routes",r)).catch(console.error),console.log("setting up client");let e=yield Ke.login(t,so);return console.log("loggedin",e),Ke.setupUser(so)})}function Vb(){return sn=new up,sn.connect({target:cp.settings.dataserver,credentials:ao,type:"websocket"}).subscribe(t=>{console.log("Indirect message from socket",t)}),sn.send("routes").then(t=>console.log("Client 2 Routes",t)).catch(console.error),sn.setupUser(ao)}var cp,so,ao,sn,mc=at(()=>{Ka();pb();cp=At(Ma());zb();console.log(Qa);so=Qa.ProfileStruct("test",{_id:"test375914777899895",email:"test@myalyce.com",username:"testuser",firstName:"Howard",lastName:"Dent",sex:"m",birthday:"09/10/1993"});ao=Qa.ProfileStruct("test",{_id:"test375914777899896",email:"testpeer@myalyce.com",username:"testpeer",firstName:"The",lastName:"Batman",sex:"m",birthday:"01/19/1483"})});var qb=Te(fp=>{nw();var Wb=At(Ma());Z0();Ba();mc();console.log("using data server URL: ",Wb.settings.dataserver);qr.subscribe("route",t=>{history.replaceState(void 0,t,location.origin+t)});var Hk=!0;Hk?yc().then(t=>re(fp,null,function*(){console.log(t),yield os(t)})):Za().then(t=>re(fp,null,function*(){let e=yield Xa(t);yield os(e)}))});var ut=Te((QA,_c)=>{var $b,Hb,Jb,Gb,Yb,Kb,Zb,Xb,Qb,vc,hp,e2,t2,r2,ms,n2,i2,o2,s2,a2,l2,u2,c2,wc;(function(t){var e=typeof global=="object"?global:typeof self=="object"?self:typeof this=="object"?this:{};typeof define=="function"&&define.amd?define("tslib",["exports"],function(n){t(r(e,r(n)))}):typeof _c=="object"&&typeof _c.exports=="object"?t(r(e,r(_c.exports))):t(r(e));function r(n,i){return n!==e&&(typeof Object.create=="function"?Object.defineProperty(n,"__esModule",{value:!0}):n.__esModule=!0),function(o,s){return n[o]=i?i(o,s):s}}})(function(t){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])};$b=function(n,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");e(n,i);function o(){this.constructor=n}n.prototype=i===null?Object.create(i):(o.prototype=i.prototype,new o)},Hb=Object.assign||function(n){for(var i,o=1,s=arguments.length;o<s;o++){i=arguments[o];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])}return n},Jb=function(n,i){var o={};for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&i.indexOf(s)<0&&(o[s]=n[s]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(n);a<s.length;a++)i.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(n,s[a])&&(o[s[a]]=n[s[a]]);return o},Gb=function(n,i,o,s){var a=arguments.length,l=a<3?i:s===null?s=Object.getOwnPropertyDescriptor(i,o):s,h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")l=Reflect.decorate(n,i,o,s);else for(var g=n.length-1;g>=0;g--)(h=n[g])&&(l=(a<3?h(l):a>3?h(i,o,l):h(i,o))||l);return a>3&&l&&Object.defineProperty(i,o,l),l},Yb=function(n,i){return function(o,s){i(o,s,n)}},Kb=function(n,i){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,i)},Zb=function(n,i,o,s){function a(l){return l instanceof o?l:new o(function(h){h(l)})}return new(o||(o=Promise))(function(l,h){function g(w){try{p(s.next(w))}catch(b){h(b)}}function m(w){try{p(s.throw(w))}catch(b){h(b)}}function p(w){w.done?l(w.value):a(w.value).then(g,m)}p((s=s.apply(n,i||[])).next())})},Xb=function(n,i){var o={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},s,a,l,h;return h={next:g(0),throw:g(1),return:g(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function g(p){return function(w){return m([p,w])}}function m(p){if(s)throw new TypeError("Generator is already executing.");for(;o;)try{if(s=1,a&&(l=p[0]&2?a.return:p[0]?a.throw||((l=a.return)&&l.call(a),0):a.next)&&!(l=l.call(a,p[1])).done)return l;switch(a=0,l&&(p=[p[0]&2,l.value]),p[0]){case 0:case 1:l=p;break;case 4:return o.label++,{value:p[1],done:!1};case 5:o.label++,a=p[1],p=[0];continue;case 7:p=o.ops.pop(),o.trys.pop();continue;default:if(l=o.trys,!(l=l.length>0&&l[l.length-1])&&(p[0]===6||p[0]===2)){o=0;continue}if(p[0]===3&&(!l||p[1]>l[0]&&p[1]<l[3])){o.label=p[1];break}if(p[0]===6&&o.label<l[1]){o.label=l[1],l=p;break}if(l&&o.label<l[2]){o.label=l[2],o.ops.push(p);break}l[2]&&o.ops.pop(),o.trys.pop();continue}p=i.call(n,o)}catch(w){p=[6,w],a=0}finally{s=l=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}},Qb=function(n,i){for(var o in n)o!=="default"&&!Object.prototype.hasOwnProperty.call(i,o)&&wc(i,n,o)},wc=Object.create?function(n,i,o,s){s===void 0&&(s=o),Object.defineProperty(n,s,{enumerable:!0,get:function(){return i[o]}})}:function(n,i,o,s){s===void 0&&(s=o),n[s]=i[o]},vc=function(n){var i=typeof Symbol=="function"&&Symbol.iterator,o=i&&n[i],s=0;if(o)return o.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&s>=n.length&&(n=void 0),{value:n&&n[s++],done:!n}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")},hp=function(n,i){var o=typeof Symbol=="function"&&n[Symbol.iterator];if(!o)return n;var s=o.call(n),a,l=[],h;try{for(;(i===void 0||i-- >0)&&!(a=s.next()).done;)l.push(a.value)}catch(g){h={error:g}}finally{try{a&&!a.done&&(o=s.return)&&o.call(s)}finally{if(h)throw h.error}}return l},e2=function(){for(var n=[],i=0;i<arguments.length;i++)n=n.concat(hp(arguments[i]));return n},t2=function(){for(var n=0,i=0,o=arguments.length;i<o;i++)n+=arguments[i].length;for(var s=Array(n),a=0,i=0;i<o;i++)for(var l=arguments[i],h=0,g=l.length;h<g;h++,a++)s[a]=l[h];return s},r2=function(n,i,o){if(o||arguments.length===2)for(var s=0,a=i.length,l;s<a;s++)(l||!(s in i))&&(l||(l=Array.prototype.slice.call(i,0,s)),l[s]=i[s]);return n.concat(l||Array.prototype.slice.call(i))},ms=function(n){return this instanceof ms?(this.v=n,this):new ms(n)},n2=function(n,i,o){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=o.apply(n,i||[]),a,l=[];return a={},h("next"),h("throw"),h("return"),a[Symbol.asyncIterator]=function(){return this},a;function h(N){s[N]&&(a[N]=function(O){return new Promise(function(I,D){l.push([N,O,I,D])>1||g(N,O)})})}function g(N,O){try{m(s[N](O))}catch(I){b(l[0][3],I)}}function m(N){N.value instanceof ms?Promise.resolve(N.value.v).then(p,w):b(l[0][2],N)}function p(N){g("next",N)}function w(N){g("throw",N)}function b(N,O){N(O),l.shift(),l.length&&g(l[0][0],l[0][1])}},i2=function(n){var i,o;return i={},s("next"),s("throw",function(a){throw a}),s("return"),i[Symbol.iterator]=function(){return this},i;function s(a,l){i[a]=n[a]?function(h){return(o=!o)?{value:ms(n[a](h)),done:a==="return"}:l?l(h):h}:l}},o2=function(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=n[Symbol.asyncIterator],o;return i?i.call(n):(n=typeof vc=="function"?vc(n):n[Symbol.iterator](),o={},s("next"),s("throw"),s("return"),o[Symbol.asyncIterator]=function(){return this},o);function s(l){o[l]=n[l]&&function(h){return new Promise(function(g,m){h=n[l](h),a(g,m,h.done,h.value)})}}function a(l,h,g,m){Promise.resolve(m).then(function(p){l({value:p,done:g})},h)}},s2=function(n,i){return Object.defineProperty?Object.defineProperty(n,"raw",{value:i}):n.raw=i,n};var r=Object.create?function(n,i){Object.defineProperty(n,"default",{enumerable:!0,value:i})}:function(n,i){n.default=i};a2=function(n){if(n&&n.__esModule)return n;var i={};if(n!=null)for(var o in n)o!=="default"&&Object.prototype.hasOwnProperty.call(n,o)&&wc(i,n,o);return r(i,n),i},l2=function(n){return n&&n.__esModule?n:{default:n}},u2=function(n,i,o,s){if(o==="a"&&!s)throw new TypeError("Private accessor was defined without a getter");if(typeof i=="function"?n!==i||!s:!i.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return o==="m"?s:o==="a"?s.call(n):s?s.value:i.get(n)},c2=function(n,i,o,s,a){if(s==="m")throw new TypeError("Private method is not writable");if(s==="a"&&!a)throw new TypeError("Private accessor was defined without a setter");if(typeof i=="function"?n!==i||!a:!i.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return s==="a"?a.call(n,o):a?a.value=o:i.set(n,o),o},t("__extends",$b),t("__assign",Hb),t("__rest",Jb),t("__decorate",Gb),t("__param",Yb),t("__metadata",Kb),t("__awaiter",Zb),t("__generator",Xb),t("__exportStar",Qb),t("__createBinding",wc),t("__values",vc),t("__read",hp),t("__spread",e2),t("__spreadArrays",t2),t("__spreadArray",r2),t("__await",ms),t("__asyncGenerator",n2),t("__asyncDelegator",i2),t("__asyncValues",o2),t("__makeTemplateObject",s2),t("__importStar",a2),t("__importDefault",l2),t("__classPrivateFieldGet",u2),t("__classPrivateFieldSet",c2)})});var h2=Te(f2=>{"use strict";Object.defineProperty(f2,"__esModule",{value:!0})});var Bt=Te((t8,Sc)=>{(function(){"use strict";var t={}.hasOwnProperty;function e(){for(var r=[],n=0;n<arguments.length;n++){var i=arguments[n];if(!!i){var o=typeof i;if(o==="string"||o==="number")r.push(i);else if(Array.isArray(i)){if(i.length){var s=e.apply(null,i);s&&r.push(s)}}else if(o==="object")if(i.toString===Object.prototype.toString)for(var a in i)t.call(i,a)&&i[a]&&r.push(a);else r.push(i.toString())}}return r.join(" ")}typeof Sc<"u"&&Sc.exports?(e.default=e,Sc.exports=e):typeof define=="function"&&typeof define.amd=="object"&&define.amd?define("classnames",[],function(){return e}):window.classNames=e})()});var d2=Te(bc=>{"use strict";Object.defineProperty(bc,"__esModule",{value:!0});bc.chevronIcons=void 0;var Jk=ut(),_t=(0,Jk.__importDefault)(Ce());bc.chevronIcons={1:{viewBox:"0 0 16 16",path:_t.default.createElement("path",{"fill-rule":"evenodd",d:"M1.553 6.776a.5.5 0 0 1 .67-.223L8 9.44l5.776-2.888a.5.5 0 1 1 .448.894l-6 3a.5.5 0 0 1-.448 0l-6-3a.5.5 0 0 1-.223-.67z"})},2:{viewBox:"0 0 16 16",path:_t.default.createElement("path",{"fill-rule":"evenodd",d:"M3.646 4.146a.5.5 0 0 1 .708 0L8 7.793l3.646-3.647a.5.5 0 0 1 .708.708l-4 4a.5.5 0 0 1-.708 0l-4-4a.5.5 0 0 1 0-.708zM1 11.5a.5.5 0 0 1 .5-.5h13a.5.5 0 0 1 0 1h-13a.5.5 0 0 1-.5-.5z"})},3:{viewBox:"0 0 16 16",path:_t.default.createElement(_t.default.Fragment,null,_t.default.createElement("path",{"fill-rule":"evenodd",d:"M1.646 6.646a.5.5 0 0 1 .708 0L8 12.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z"}),_t.default.createElement("path",{"fill-rule":"evenodd",d:"M1.646 2.646a.5.5 0 0 1 .708 0L8 8.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z"}))},4:{viewBox:"0 0 16 16",path:_t.default.createElement("path",{"fill-rule":"evenodd",d:"M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z"})},5:{viewBox:"0 0 24 24",path:_t.default.createElement(_t.default.Fragment,null,_t.default.createElement("path",{d:"M12 2C6.486 2 2 6.486 2 12s4.486 10 10 10 10-4.486 10-10S17.514 2 12 2zm0 18c-4.411 0-8-3.589-8-8s3.589-8 8-8 8 3.589 8 8-3.589 8-8 8z"}),_t.default.createElement("path",{d:"M12 13.586 7.707 9.293l-1.414 1.414L12 16.414l5.707-5.707-1.414-1.414z"}))},6:{viewBox:"0 0 24 24",path:_t.default.createElement(_t.default.Fragment,null,_t.default.createElement("path",{d:"M5 21h14c1.103 0 2-.897 2-2V5c0-1.103-.897-2-2-2H5c-1.103 0-2 .897-2 2v14c0 1.103.897 2 2 2zM5 5h14l.001 14H5V5z"}),_t.default.createElement("path",{d:"M12 13.586 7.707 9.293l-1.414 1.414L12 16.414l5.707-5.707-1.414-1.414z"}))},7:{viewBox:"0 0 24 24",path:_t.default.createElement("path",{d:"M16.293 9.293 12 13.586 7.707 9.293l-1.414 1.414L12 16.414l5.707-5.707z"})},8:{viewBox:"0 0 24 24",path:_t.default.createElement(_t.default.Fragment,null,_t.default.createElement("path",{d:"m12 15.586-4.293-4.293-1.414 1.414L12 18.414l5.707-5.707-1.414-1.414z"}),_t.default.createElement("path",{d:"m17.707 7.707-1.414-1.414L12 10.586 7.707 6.293 6.293 7.707 12 13.414z"}))},9:{viewBox:"0 0 512 512",path:_t.default.createElement("path",{d:"M504 256c0 137-111 248-248 248S8 393 8 256 119 8 256 8s248 111 248 248zM273 369.9l135.5-135.5c9.4-9.4 9.4-24.6 0-33.9l-17-17c-9.4-9.4-24.6-9.4-33.9 0L256 285.1 154.4 183.5c-9.4-9.4-24.6-9.4-33.9 0l-17 17c-9.4 9.4-9.4 24.6 0 33.9L239 369.9c9.4 9.4 24.6 9.4 34 0z"})},10:{viewBox:"0 0 24 24",path:_t.default.createElement("path",{d:"M21.886 5.536A1.002 1.002 0 0 0 21 5H3a1.002 1.002 0 0 0-.822 1.569l9 13a.998.998 0 0 0 1.644 0l9-13a.998.998 0 0 0 .064-1.033zM12 17.243 4.908 7h14.184L12 17.243z"})}}});var dp=Te(Ec=>{"use strict";Object.defineProperty(Ec,"__esModule",{value:!0});Ec.Chevron=void 0;var g2=ut(),Gk=(0,g2.__importDefault)(Ce()),Yk=(0,g2.__importDefault)(Bt()),p2=d2(),Kk={down:"rotate-0",up:"rotate-180",left:"rotate-90",right:"-rotate-90"},Zk={xs:"h-3 w-3",sm:"h-6 w-6",md:"h-12 w-12",lg:"h-24 w-24",xl:"h-48 w-48",auto:"h-full w-full"},Xk=function(t){var e=t.direction,r=t.icon,n=t.size,i=n===void 0?"auto":n,o=t.className,s=t.style;return Gk.default.createElement("svg",{stroke:"currentColor",fill:"currentColor",strokeWidth:"0",className:(0,Yk.default)("transform transition-transform duration-500 svg-fix",Zk[i],Kk[e],o),viewBox:p2.chevronIcons[r].viewBox,style:s},p2.chevronIcons[r].path)};Ec.Chevron=Xk});var mi=Te(vr=>{"use strict";Object.defineProperty(vr,"__esModule",{value:!0});vr.customScrollBar=vr.loremIpsum=vr.TextInputBorderMap=vr.regexpUtil=vr.useRefDimensions=vr.clickOutListener=void 0;var pp=Ce();function Qk(t,e){(0,pp.useEffect)(function(){return document.addEventListener("click",function(r){return t.current&&!t.current.contains(r.target)&&e()})},[t])}vr.clickOutListener=Qk;var e6=function(t){var e,r,n=(0,pp.useState)({width:0,height:0}),i=n[0],o=n[1];return(0,pp.useEffect)(function(){if(t.current){var s=t.current.getBoundingClientRect(),a=s.width,l=s.height;o({width:a,height:l})}},[(e=t.current)===null||e===void 0?void 0:e.offsetHeight,(r=t.current)===null||r===void 0?void 0:r.offsetWidth]),i};vr.useRefDimensions=e6;vr.regexpUtil={name:/^[a-z ,.'-]+$/i,email:/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/};vr.TextInputBorderMap={default:"border-secondary-300 placeholder-secondary-300 focus:border-primary-400 focus:outline-none focus:ring-1 focus:ring-primary-200",success:"border-success-400 placeholder-success-300 focus:border-success-500 focus:outline-none focus:ring-1 focus:ring-success-200",warning:"border-warning-400 placeholder-warning-300 focus:border-warning-500 focus:outline-none focus:ring-1 focus:ring-warning-200",danger:"border-danger-400 placeholder-danger-300 focus:border-danger-500 focus:outline-none focus:ring-1 focus:ring-danger-200"};vr.loremIpsum="Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.";vr.customScrollBar="scrollbar-thin scrollbar-track-secondary-200 scrollbar-thumb-secondary-400 scrollbar"});var m2=Te(Tc=>{"use strict";Object.defineProperty(Tc,"__esModule",{value:!0});Tc.Accordion=void 0;var vs=ut(),Oc=Jt(),xc=Ce(),an=(0,vs.__importDefault)(Ce()),y2=(0,vs.__importDefault)(Bt()),t6=dp(),r6=mi(),n6={xs:"max-w-xs",sm:"max-w-sm",md:"max-w-md",lg:"max-w-lg",xl:"max-w-xl",auto:"w-full"},i6={danger:"text-danger-700",info:"text-info-700",primary:"text-primary-700",secondary:"text-secondary-700",success:"text-success-700",warning:"text-warning-700"},o6={danger:"border-danger-600",info:"border-info-600",primary:"border-primary-600",secondary:"border-secondary-600",success:"border-success-600",warning:"border-warning-600"};function s6(t){var e=t.title,r=t.collapseOthers,n=r===void 0?!1:r,i=t.items,o=t.size,s=o===void 0?"auto":o,a=t.type,l=a===void 0?"secondary":a,h=t.className,g=t.style,m=t.contentMaxHeigh,p=(0,xc.useState)(Date.now()),w=p[0],b=p[1],N=function(O){return b(O)};return an.default.createElement("main",{className:(0,y2.default)(n6[s],h),style:g},an.default.createElement("div",{className:"w-full my-1"},e&&an.default.createElement("h2",{className:"text-xl font-semibold mb-2"},e),an.default.createElement("ul",{className:"flex flex-col"},i.map(function(O,I){return an.default.createElement(a6,(0,vs.__assign)({},(0,vs.__assign)((0,vs.__assign)({},O),{collapseOthers:n,onOpen:N,openId:w,type:l,contentMaxHeigh:m}),{key:I}))}))))}Tc.Accordion=s6;var a6=function(t){var e=t.title,r=t.content,n=t.onOpen,i=t.openId,o=t.collapseOthers,s=t.type,a=t.onClick,l=(0,vs.__rest)(t,["title","content","onOpen","openId","collapseOthers","type","onClick"]),h=(0,xc.useState)(i),g=h[0],m=h[1],p=(0,xc.useState)(!1),w=p[0],b=p[1];(0,xc.useEffect)(function(){i!==g&&(m(i),b(!1))},[i]);var N=function(I){if(!w){var D=Date.now();m(D),o&&n(D)}b(!w),a==null||a(I)},O=(0,Oc.isType)(l.isOpen,"boolean")?l.isOpen:w;return an.default.createElement("li",{className:"bg-white my-2 shadow-lg"},an.default.createElement("h2",{onClick:N,className:`\r
                flex flex-row justify-between items-center\r
                font-semibold p-3 cursor-pointer\r
            `},(0,Oc.isType)(r,"string")?an.default.createElement("span",null,e):e,an.default.createElement(t6.Chevron,{direction:O?"up":"down",icon:8,size:"sm",className:i6[s]})),an.default.createElement("div",{className:(0,y2.default)("border-l-2 overflow-hidden max-h-0 duration-700 transition-all",r6.customScrollBar,o6[s],O&&"max-h-96"),style:{maxHeight:!(0,Oc.nonValue)(l.contentMaxHeigh)&&O?l.contentMaxHeigh:void 0}},(0,Oc.isType)(r,"string")?an.default.createElement("p",{className:"p-3 text-gray-900"},r):r))}});var v2=Te(kc=>{"use strict";Object.defineProperty(kc,"__esModule",{value:!0});kc.AlertIcon=void 0;var l6=ut(),lo=(0,l6.__importDefault)(Ce()),u6={primary:lo.default.createElement("path",{d:"M16 8c0 3.866-3.582 7-8 7a9.06 9.06 0 0 1-2.347-.306c-.584.296-1.925.864-4.181 1.234-.2.032-.352-.176-.273-.362.354-.836.674-1.95.77-2.966C.744 11.37 0 9.76 0 8c0-3.866 3.582-7 8-7s8 3.134 8 7zM5 8a1 1 0 1 0-2 0 1 1 0 0 0 2 0zm4 0a1 1 0 1 0-2 0 1 1 0 0 0 2 0zm3 1a1 1 0 1 0 0-2 1 1 0 0 0 0 2z"}),danger:lo.default.createElement("path",{d:"M11.46.146A.5.5 0 0 0 11.107 0H4.893a.5.5 0 0 0-.353.146L.146 4.54A.5.5 0 0 0 0 4.893v6.214a.5.5 0 0 0 .146.353l4.394 4.394a.5.5 0 0 0 .353.146h6.214a.5.5 0 0 0 .353-.146l4.394-4.394a.5.5 0 0 0 .146-.353V4.893a.5.5 0 0 0-.146-.353L11.46.146zM8 4c.535 0 .954.462.9.995l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 4.995A.905.905 0 0 1 8 4zm.002 6a1 1 0 1 1 0 2 1 1 0 0 1 0-2z"}),info:lo.default.createElement("path",{d:"M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16zm.93-9.412-1 4.705c-.07.34.029.533.304.533.194 0 .487-.07.686-.246l-.088.416c-.287.346-.92.598-1.465.598-.703 0-1.002-.422-.808-1.319l.738-3.468c.064-.293.006-.399-.287-.47l-.451-.081.082-.381 2.29-.287zM8 5.5a1 1 0 1 1 0-2 1 1 0 0 1 0 2z"}),secondary:lo.default.createElement("path",{d:"M6 .278a.768.768 0 0 1 .08.858 7.208 7.208 0 0 0-.878 3.46c0 4.021 3.278 7.277 7.318 7.277.527 0 1.04-.055 1.533-.16a.787.787 0 0 1 .81.316.733.733 0 0 1-.031.893A8.349 8.349 0 0 1 8.344 16C3.734 16 0 12.286 0 7.71 0 4.266 2.114 1.312 5.124.06A.752.752 0 0 1 6 .278z"}),success:lo.default.createElement("path",{d:"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zm-3.97-3.03a.75.75 0 0 0-1.08.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-.01-1.05z"}),warning:lo.default.createElement("path",{d:"M8.982 1.566a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767L8.982 1.566zM8 5c.535 0 .954.462.9.995l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 5.995A.905.905 0 0 1 8 5zm.002 6a1 1 0 1 1 0 2 1 1 0 0 1 0-2z"})},c6=function(t){return lo.default.createElement("svg",{stroke:"currentColor",fill:"currentColor",strokeWidth:"0",viewBox:"0 0 16 16",height:"1em",width:"1em",xmlns:"http://www.w3.org/2000/svg",className:"flex-shrink-0 w-6 h-6"},u6[t.type])};kc.AlertIcon=c6});var w2=Te(Nc=>{"use strict";Object.defineProperty(Nc,"__esModule",{value:!0});Nc.Alert=void 0;var yp=ut(),gp=Jt(),f6=(0,yp.__importDefault)(Bt()),Ar=(0,yp.__importStar)(Ce()),h6=v2(),d6={primary:"text-primary-600",secondary:"text-secondary-600",info:"text-info-600",warning:"text-warning-600",danger:"text-danger-600",success:"text-success-600"},p6={primary:"text-primary-900",secondary:"text-secondary-900",info:"text-info-900",warning:"text-warning-900",danger:"text-danger-900",success:"text-success-900"},g6=function(t){(0,yp.__extends)(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.state={botW:100,isClosing:!1,isClosed:!1,isHover:!1,transitionDuration:void 0},r.closingDebounce=(0,gp.debounceTimeOut)(),r.handleMouseHover=function(n){var i=r.props.timeoutMs,o=!(0,gp.nonValue)(i);o&&!n?r.closingDebounce(r.startClosing,i):n&&r.closingDebounce("cancel"),r.setState(n?{isClosing:!1,botW:100,isHover:n}:{isHover:n,botW:o?0:100})},r.startClosing=function(){r.setState({isClosing:!0}),r.closingDebounce(r.close,700)},r.close=function(){r.props.onClose&&r.props.onClose(),r.setState({isClosed:!0})},r.componentWillUnmount=function(){return r.closingDebounce("cancel")},r.render=function(){var n=r.props,i=n.title,o=n.text,s=n.type,a=n.className,l=n.style,h=r.state,g=h.isHover,m=h.isClosing,p=h.botW,w=h.transitionDuration,b=h.isClosed,N=g?void 0:w,O=(0,f6.default)("bg-white border border-current border-b-0 rounded-lg flex flex-col overflow-hidden transition-opacity duration-700",{"opacity-0":m},d6[s],a);return b?null:Ar.default.createElement("div",{className:O,style:l,onMouseEnter:function(){return r.handleMouseHover(!0)},onMouseLeave:function(){return r.handleMouseHover(!1)}},Ar.default.createElement("div",{className:"p-1 flex w-full overflow-hidden mx-auto"},Ar.default.createElement("div",{className:"pt-2 ml-3"},Ar.default.createElement(h6.AlertIcon,{type:s})),Ar.default.createElement("div",{className:"w-full flex justify-between items-start px-0 py-2"},Ar.default.createElement("div",{className:"ml-3"},Ar.default.createElement("p",{className:"font-bold"},i),o&&Ar.default.createElement("p",{className:"mt-1 text-sm ".concat(p6[s])},o)),Ar.default.createElement("a",{className:"mr-1 cursor-pointer",onClick:r.close},Ar.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},Ar.default.createElement("path",{"stroke-linecap":"round","stroke-linejoin":"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"}))))),Ar.default.createElement("span",{className:"border-b-4 border-current transition-all ease-linear",style:{width:"".concat(p,"%"),transitionDuration:N}}))},r}return e.prototype.componentDidMount=function(){var r=this,n=this.props.timeoutMs;(0,gp.nonValue)(n)||(this.setState({transitionDuration:"".concat(n,"ms")}),setTimeout(function(){return r.setState({botW:0})},0),this.closingDebounce(this.startClosing,n))},e}(Ar.Component);Nc.Alert=g6});var Ac=Te(Ic=>{"use strict";Object.defineProperty(Ic,"__esModule",{value:!0});Ic.Badge=void 0;var S2=ut(),y6=Jt(),m6=(0,S2.__importDefault)(Bt()),_2=(0,S2.__importDefault)(Ce()),v6={xs:"h-2 min-w-2",sm:"h-3 min-w-3",md:"h-4 min-w-4",lg:"h-6 min-w-6",xl:"h-12 min-w-12"},w6={md:"text-xs",lg:"text-base",xl:"text-2xl"},_6=function(t){var e=t.size,r=t.badge,n=t.className;return r?_2.default.createElement("div",{className:(0,m6.default)("bg-info-600 rounded-full absolute top-0 right-0 pl-1 pr-1 flex justify-center text-gray-100",v6[e],n)},(0,y6.isType)(r,"number")&&e!=="sm"&&e!=="xs"&&_2.default.createElement("span",{className:"m-auto ".concat(w6[e])},r>999?"+999":r)):null};Ic.Badge=_6});var b2=Te(Rc=>{"use strict";Object.defineProperty(Rc,"__esModule",{value:!0});Rc.spinnersSvg=void 0;Rc.spinnersSvg=['<svg stroke="currentColor" fill="none" stroke-width="0" viewBox="0 0 24 24" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path opacity="0.2" fill-rule="evenodd" clip-rule="evenodd" d="M12 19C15.866 19 19 15.866 19 12C19 8.13401 15.866 5 12 5C8.13401 5 5 8.13401 5 12C5 15.866 8.13401 19 12 19ZM12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z" fill="currentColor"/><path d="M2 12C2 6.47715 6.47715 2 12 2V5C8.13401 5 5 8.13401 5 12H2Z" fill="currentColor"/></svg>','<svg stroke="currentColor" fill="none" stroke-width="0" viewBox="0 0 24 24" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path opacity="0.2" fill-rule="evenodd" clip-rule="evenodd" d="M12 19C15.866 19 19 15.866 19 12C19 8.13401 15.866 5 12 5C8.13401 5 5 8.13401 5 12C5 15.866 8.13401 19 12 19ZM12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z" fill="currentColor"/><path d="M12 22C17.5228 22 22 17.5228 22 12H19C19 15.866 15.866 19 12 19V22Z" fill="currentColor"/><path d="M2 12C2 6.47715 6.47715 2 12 2V5C8.13401 5 5 8.13401 5 12H2Z" fill="currentColor"/></svg>','<svg stroke="currentColor" fill="none" stroke-width="0" viewBox="0 0 24 24" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M12 22C17.5228 22 22 17.5228 22 12H19C19 15.866 15.866 19 12 19V22Z" fill="currentColor"/><path d="M2 12C2 6.47715 6.47715 2 12 2V5C8.13401 5 5 8.13401 5 12H2Z" fill="currentColor"/></svg>','<svg stroke="currentColor" fill="none" stroke-width="0" viewBox="0 0 24 24" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M2 12C2 6.47715 6.47715 2 12 2V5C8.13401 5 5 8.13401 5 12H2Z" fill="currentColor"/></svg>','<svg stroke="currentColor" fill="currentColor" stroke-width="0" version="1.1" viewBox="0 0 16 16" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M16 6h-6l2.243-2.243c-1.133-1.133-2.64-1.757-4.243-1.757s-3.109 0.624-4.243 1.757c-1.133 1.133-1.757 2.64-1.757 4.243s0.624 3.109 1.757 4.243c1.133 1.133 2.64 1.757 4.243 1.757s3.109-0.624 4.243-1.757c0.095-0.095 0.185-0.192 0.273-0.292l1.505 1.317c-1.466 1.674-3.62 2.732-6.020 2.732-4.418 0-8-3.582-8-8s3.582-8 8-8c2.209 0 4.209 0.896 5.656 2.344l2.343-2.344v6z"/></svg>','<svg stroke="currentColor" fill="currentColor" stroke-width="0" version="1.1" viewBox="0 0 16 16" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M0.001 8.025l-0 0c0 0 0 0.001 0 0.003 0.002 0.061 0.009 0.12 0.021 0.177 0.003 0.027 0.007 0.057 0.011 0.090 0.003 0.029 0.007 0.061 0.011 0.095 0.006 0.040 0.012 0.083 0.019 0.128 0.013 0.090 0.028 0.189 0.045 0.296 0.021 0.101 0.044 0.21 0.068 0.326 0.011 0.058 0.028 0.117 0.044 0.178s0.032 0.123 0.049 0.188c0.009 0.032 0.016 0.065 0.027 0.097s0.021 0.065 0.031 0.098 0.043 0.134 0.065 0.203c0.006 0.017 0.011 0.035 0.017 0.052s0.013 0.034 0.019 0.052 0.026 0.070 0.039 0.105c0.027 0.070 0.053 0.142 0.081 0.215 0.031 0.071 0.062 0.144 0.094 0.218 0.016 0.037 0.032 0.074 0.048 0.111s0.035 0.073 0.053 0.111 0.073 0.148 0.11 0.224c0.039 0.075 0.081 0.149 0.123 0.224 0.021 0.037 0.042 0.075 0.063 0.113s0.045 0.074 0.068 0.112 0.093 0.149 0.14 0.224c0.198 0.295 0.417 0.587 0.66 0.864 0.245 0.275 0.511 0.535 0.792 0.775 0.284 0.236 0.582 0.452 0.886 0.642 0.306 0.188 0.619 0.349 0.928 0.487 0.078 0.032 0.156 0.063 0.232 0.095 0.038 0.015 0.076 0.032 0.115 0.046s0.077 0.027 0.115 0.041 0.151 0.054 0.226 0.078c0.075 0.022 0.15 0.044 0.224 0.066 0.037 0.011 0.073 0.022 0.109 0.031s0.073 0.018 0.109 0.027 0.143 0.035 0.213 0.052c0.070 0.014 0.139 0.027 0.207 0.040 0.034 0.006 0.067 0.013 0.101 0.019 0.017 0.003 0.033 0.006 0.049 0.009s0.033 0.005 0.049 0.007c0.066 0.009 0.13 0.018 0.192 0.027 0.031 0.004 0.062 0.009 0.093 0.013s0.061 0.006 0.091 0.009 0.118 0.010 0.174 0.015c0.056 0.005 0.111 0.011 0.164 0.012 0.004 0 0.007 0 0.011 0 0.010 0.544 0.453 0.982 1 0.982 0.008 0 0.017-0 0.025-0.001v0c0 0 0.001-0 0.004-0 0.061-0.002 0.12-0.009 0.177-0.021 0.027-0.003 0.057-0.007 0.090-0.011 0.029-0.003 0.061-0.007 0.095-0.011 0.040-0.006 0.083-0.012 0.128-0.019 0.090-0.013 0.189-0.028 0.296-0.045 0.101-0.021 0.21-0.044 0.326-0.068 0.058-0.011 0.117-0.028 0.178-0.044s0.123-0.033 0.188-0.049c0.032-0.009 0.065-0.016 0.097-0.027s0.065-0.021 0.098-0.031 0.134-0.043 0.203-0.065c0.017-0.006 0.035-0.011 0.052-0.017s0.034-0.013 0.052-0.019 0.070-0.026 0.105-0.039c0.070-0.027 0.142-0.053 0.215-0.081 0.071-0.031 0.144-0.062 0.218-0.094 0.037-0.016 0.074-0.032 0.111-0.048s0.073-0.035 0.111-0.053 0.148-0.073 0.224-0.11c0.075-0.039 0.149-0.081 0.224-0.123 0.037-0.021 0.075-0.042 0.113-0.063s0.074-0.045 0.112-0.068 0.149-0.093 0.224-0.14c0.295-0.197 0.587-0.417 0.864-0.66 0.275-0.245 0.535-0.511 0.775-0.792 0.236-0.284 0.452-0.582 0.642-0.886 0.188-0.306 0.349-0.619 0.487-0.928 0.032-0.078 0.063-0.156 0.095-0.232 0.015-0.038 0.032-0.076 0.046-0.115s0.027-0.077 0.040-0.115 0.054-0.151 0.078-0.226c0.022-0.075 0.044-0.15 0.066-0.224 0.011-0.037 0.022-0.073 0.031-0.109s0.018-0.073 0.027-0.109 0.035-0.143 0.052-0.213c0.014-0.070 0.027-0.139 0.040-0.207 0.006-0.034 0.013-0.067 0.019-0.101 0.003-0.017 0.006-0.033 0.009-0.049s0.005-0.033 0.007-0.050c0.009-0.065 0.018-0.13 0.027-0.192 0.004-0.031 0.009-0.062 0.013-0.093s0.006-0.061 0.009-0.091 0.010-0.118 0.015-0.174c0.005-0.056 0.011-0.111 0.012-0.165 0-0.008 0.001-0.016 0.001-0.025 0.55-0.002 0.996-0.449 0.996-1 0-0.008-0-0.017-0.001-0.025h0c0 0-0-0.001-0-0.003-0.002-0.061-0.009-0.12-0.021-0.177-0.003-0.027-0.007-0.057-0.011-0.090-0.003-0.029-0.007-0.061-0.011-0.095-0.006-0.040-0.012-0.083-0.019-0.128-0.013-0.090-0.028-0.189-0.045-0.296-0.021-0.101-0.044-0.21-0.068-0.326-0.011-0.058-0.028-0.117-0.044-0.178s-0.032-0.123-0.049-0.188c-0.009-0.032-0.016-0.065-0.027-0.097s-0.021-0.065-0.031-0.098-0.043-0.134-0.065-0.203c-0.005-0.017-0.011-0.035-0.017-0.052s-0.013-0.034-0.019-0.052-0.026-0.070-0.039-0.105c-0.027-0.070-0.053-0.142-0.081-0.215-0.031-0.071-0.062-0.144-0.094-0.218-0.016-0.037-0.032-0.074-0.048-0.111s-0.035-0.073-0.053-0.111-0.073-0.148-0.11-0.224c-0.039-0.075-0.081-0.149-0.123-0.224-0.021-0.037-0.042-0.075-0.063-0.113s-0.045-0.074-0.068-0.112-0.093-0.149-0.14-0.224c-0.197-0.295-0.417-0.587-0.66-0.864-0.245-0.275-0.511-0.535-0.792-0.775-0.284-0.236-0.582-0.452-0.886-0.642-0.306-0.188-0.619-0.349-0.928-0.487-0.078-0.032-0.156-0.063-0.232-0.095-0.038-0.015-0.076-0.032-0.115-0.046s-0.077-0.027-0.115-0.040-0.151-0.054-0.226-0.078c-0.075-0.022-0.15-0.044-0.224-0.066-0.037-0.010-0.073-0.022-0.109-0.031s-0.073-0.018-0.109-0.027-0.143-0.035-0.213-0.052c-0.070-0.014-0.139-0.027-0.207-0.040-0.034-0.006-0.067-0.013-0.101-0.019-0.017-0.003-0.033-0.006-0.049-0.009s-0.033-0.005-0.049-0.007c-0.066-0.009-0.13-0.018-0.192-0.027-0.031-0.004-0.062-0.009-0.093-0.013s-0.061-0.006-0.091-0.009-0.118-0.010-0.174-0.015c-0.056-0.005-0.111-0.011-0.164-0.012-0.013-0-0.026-0.001-0.039-0.001-0.010-0.543-0.454-0.981-0.999-0.981-0.008 0-0.017 0-0.025 0.001l-0-0c0 0-0.001 0-0.003 0-0.061 0.002-0.12 0.009-0.177 0.021-0.027 0.003-0.057 0.007-0.090 0.011-0.029 0.003-0.061 0.007-0.095 0.011-0.040 0.006-0.083 0.012-0.128 0.019-0.090 0.013-0.189 0.028-0.296 0.045-0.101 0.021-0.21 0.044-0.326 0.068-0.058 0.011-0.117 0.028-0.178 0.044s-0.123 0.033-0.188 0.049c-0.032 0.009-0.065 0.016-0.097 0.027s-0.065 0.021-0.098 0.031-0.134 0.043-0.203 0.065c-0.017 0.006-0.035 0.011-0.052 0.017s-0.034 0.013-0.052 0.019-0.070 0.026-0.105 0.039c-0.070 0.027-0.142 0.053-0.215 0.081-0.071 0.031-0.144 0.062-0.218 0.094-0.037 0.016-0.074 0.032-0.111 0.048s-0.073 0.035-0.111 0.053-0.148 0.073-0.224 0.11c-0.075 0.039-0.149 0.081-0.224 0.123-0.037 0.021-0.075 0.042-0.113 0.063s-0.074 0.045-0.112 0.068-0.149 0.093-0.224 0.14c-0.295 0.198-0.587 0.417-0.864 0.66-0.275 0.245-0.535 0.511-0.775 0.792-0.236 0.284-0.452 0.582-0.642 0.886-0.188 0.306-0.349 0.619-0.487 0.928-0.032 0.078-0.063 0.156-0.095 0.232-0.015 0.038-0.032 0.076-0.046 0.115s-0.027 0.077-0.040 0.115-0.054 0.151-0.078 0.226c-0.022 0.075-0.044 0.15-0.066 0.224-0.011 0.037-0.022 0.073-0.032 0.109s-0.018 0.073-0.027 0.109-0.035 0.143-0.052 0.213c-0.014 0.070-0.027 0.139-0.040 0.207-0.006 0.034-0.013 0.067-0.019 0.101-0.003 0.017-0.006 0.033-0.009 0.049s-0.005 0.033-0.007 0.050c-0.009 0.065-0.018 0.13-0.027 0.192-0.004 0.031-0.009 0.062-0.013 0.093s-0.006 0.061-0.009 0.091-0.010 0.118-0.015 0.174c-0.005 0.056-0.011 0.111-0.012 0.165-0 0.009-0.001 0.017-0.001 0.025-0.537 0.017-0.967 0.458-0.967 0.999 0 0.008 0 0.017 0.001 0.025zM1.149 7.011c0.001-0.003 0.001-0.006 0.002-0.009 0.010-0.051 0.026-0.102 0.040-0.155s0.030-0.107 0.045-0.163c0.008-0.028 0.015-0.056 0.024-0.084s0.019-0.057 0.028-0.086 0.038-0.116 0.058-0.176c0.005-0.015 0.010-0.030 0.015-0.045s0.012-0.030 0.017-0.045 0.023-0.060 0.035-0.091 0.048-0.123 0.073-0.186c0.028-0.062 0.056-0.125 0.084-0.189 0.014-0.032 0.028-0.064 0.043-0.096s0.032-0.064 0.048-0.096 0.065-0.128 0.098-0.194c0.034-0.065 0.073-0.128 0.109-0.194 0.018-0.032 0.037-0.065 0.056-0.098s0.040-0.064 0.061-0.096c0.041-0.064 0.082-0.129 0.124-0.194 0.176-0.255 0.369-0.506 0.583-0.744 0.217-0.236 0.451-0.459 0.697-0.665 0.25-0.202 0.511-0.385 0.776-0.547 0.268-0.159 0.541-0.294 0.808-0.41 0.068-0.027 0.135-0.053 0.202-0.079 0.033-0.013 0.066-0.027 0.099-0.038s0.067-0.022 0.1-0.033 0.131-0.045 0.196-0.065c0.065-0.018 0.13-0.036 0.194-0.054 0.032-0.009 0.063-0.019 0.095-0.026s0.063-0.014 0.094-0.021 0.123-0.028 0.184-0.042c0.061-0.011 0.12-0.021 0.179-0.032 0.029-0.005 0.058-0.010 0.087-0.015 0.014-0.003 0.029-0.005 0.043-0.008s0.029-0.003 0.043-0.005c0.056-0.007 0.112-0.014 0.166-0.020 0.027-0.003 0.053-0.007 0.080-0.010s0.053-0.004 0.078-0.006 0.102-0.007 0.15-0.011c0.049-0.003 0.095-0.008 0.142-0.008 0.091-0.002 0.177-0.004 0.256-0.006 0.073 0.003 0.14 0.005 0.2 0.007 0.030 0.001 0.058 0.002 0.085 0.002 0.033 0.002 0.064 0.004 0.093 0.006 0.033 0.002 0.063 0.004 0.091 0.006 0.051 0.008 0.103 0.012 0.156 0.012 0.007 0 0.015-0 0.022-0.001 0.002 0 0.004 0 0.004 0v-0c0.487-0.012 0.887-0.372 0.962-0.84 0.008 0.002 0.017 0.004 0.025 0.006 0.051 0.010 0.102 0.026 0.155 0.040s0.107 0.030 0.163 0.045c0.028 0.008 0.056 0.015 0.084 0.024s0.057 0.019 0.086 0.028 0.116 0.038 0.176 0.058c0.015 0.005 0.030 0.010 0.045 0.015s0.030 0.012 0.045 0.017 0.060 0.023 0.091 0.035 0.123 0.048 0.186 0.073c0.062 0.028 0.125 0.056 0.189 0.084 0.032 0.014 0.064 0.028 0.096 0.043s0.064 0.032 0.096 0.048 0.128 0.065 0.194 0.098c0.065 0.034 0.129 0.073 0.194 0.109 0.032 0.018 0.065 0.037 0.098 0.056s0.064 0.040 0.096 0.061 0.129 0.082 0.194 0.124c0.255 0.176 0.506 0.369 0.744 0.583 0.236 0.217 0.459 0.451 0.665 0.697 0.202 0.25 0.385 0.511 0.547 0.776 0.159 0.268 0.294 0.541 0.41 0.808 0.027 0.068 0.053 0.135 0.079 0.202 0.013 0.033 0.027 0.066 0.038 0.099s0.022 0.067 0.033 0.1 0.045 0.131 0.065 0.196c0.018 0.065 0.036 0.13 0.054 0.194 0.009 0.032 0.019 0.063 0.026 0.095s0.014 0.063 0.021 0.094 0.028 0.123 0.042 0.184c0.011 0.061 0.021 0.12 0.032 0.179 0.005 0.029 0.010 0.058 0.015 0.087 0.003 0.014 0.005 0.029 0.008 0.043s0.003 0.029 0.005 0.043c0.007 0.056 0.014 0.112 0.020 0.166 0.003 0.027 0.007 0.053 0.010 0.080s0.004 0.053 0.006 0.078 0.007 0.102 0.011 0.15c0.003 0.049 0.008 0.095 0.008 0.142 0.002 0.091 0.004 0.177 0.006 0.256-0.003 0.073-0.005 0.14-0.007 0.2-0.001 0.030-0.002 0.058-0.002 0.085-0.002 0.033-0.004 0.064-0.006 0.093-0.002 0.033-0.004 0.063-0.006 0.091-0.008 0.051-0.012 0.103-0.012 0.156 0 0.007 0 0.015 0.001 0.022-0 0.002-0 0.004-0 0.004h0c0.012 0.481 0.363 0.877 0.823 0.959-0.001 0.005-0.002 0.009-0.003 0.014-0.010 0.051-0.025 0.102-0.040 0.155s-0.030 0.107-0.045 0.163c-0.008 0.028-0.015 0.056-0.024 0.084s-0.019 0.057-0.028 0.086-0.039 0.116-0.058 0.176c-0.005 0.015-0.010 0.030-0.015 0.045s-0.012 0.030-0.017 0.045-0.023 0.060-0.035 0.091-0.048 0.123-0.073 0.186c-0.028 0.062-0.056 0.125-0.084 0.189-0.014 0.032-0.028 0.064-0.043 0.096s-0.032 0.064-0.048 0.096-0.065 0.128-0.098 0.194c-0.034 0.065-0.073 0.129-0.109 0.194-0.018 0.032-0.037 0.065-0.056 0.098s-0.040 0.064-0.061 0.096-0.082 0.129-0.124 0.194c-0.176 0.255-0.369 0.506-0.583 0.744-0.217 0.236-0.451 0.459-0.697 0.665-0.25 0.202-0.511 0.385-0.776 0.547-0.268 0.159-0.541 0.294-0.808 0.41-0.068 0.027-0.135 0.053-0.202 0.079-0.033 0.013-0.066 0.027-0.099 0.038s-0.067 0.022-0.1 0.033-0.131 0.045-0.196 0.065c-0.065 0.018-0.13 0.036-0.194 0.054-0.032 0.009-0.063 0.019-0.095 0.026s-0.063 0.014-0.094 0.021-0.123 0.028-0.184 0.042c-0.061 0.011-0.12 0.021-0.179 0.032-0.029 0.005-0.058 0.010-0.087 0.015-0.014 0.003-0.028 0.005-0.043 0.008s-0.029 0.003-0.043 0.005c-0.056 0.007-0.112 0.014-0.166 0.020-0.027 0.003-0.053 0.007-0.080 0.010s-0.053 0.004-0.078 0.006-0.102 0.007-0.15 0.011c-0.049 0.003-0.095 0.008-0.142 0.008-0.091 0.002-0.177 0.004-0.256 0.006-0.073-0.003-0.14-0.005-0.2-0.007-0.030-0.001-0.058-0.002-0.085-0.002-0.033-0.002-0.064-0.004-0.093-0.006-0.033-0.002-0.063-0.004-0.091-0.006-0.051-0.008-0.103-0.012-0.156-0.012-0.007 0-0.015 0-0.022 0.001-0.002-0-0.003-0-0.003-0v0c-0.484 0.012-0.883 0.369-0.961 0.834-0.050-0.010-0.101-0.025-0.153-0.039s-0.107-0.030-0.163-0.045c-0.028-0.008-0.056-0.015-0.084-0.024s-0.057-0.019-0.086-0.028-0.116-0.039-0.176-0.058c-0.015-0.005-0.030-0.010-0.045-0.015s-0.030-0.012-0.045-0.017-0.060-0.023-0.091-0.035-0.123-0.048-0.186-0.073c-0.062-0.028-0.125-0.056-0.189-0.084-0.032-0.014-0.064-0.028-0.096-0.043s-0.064-0.032-0.096-0.048-0.128-0.065-0.194-0.098c-0.065-0.034-0.129-0.073-0.194-0.109-0.032-0.018-0.065-0.037-0.098-0.056s-0.064-0.040-0.096-0.061c-0.064-0.041-0.129-0.082-0.194-0.124-0.255-0.175-0.506-0.369-0.744-0.583-0.236-0.217-0.459-0.451-0.665-0.697-0.202-0.25-0.385-0.511-0.547-0.776-0.159-0.268-0.294-0.541-0.41-0.808-0.027-0.068-0.053-0.135-0.079-0.202-0.013-0.033-0.027-0.066-0.038-0.099s-0.022-0.067-0.033-0.1-0.045-0.131-0.065-0.196c-0.018-0.065-0.036-0.13-0.054-0.194-0.009-0.032-0.019-0.063-0.026-0.095s-0.014-0.063-0.021-0.094-0.028-0.123-0.042-0.184c-0.011-0.061-0.021-0.12-0.032-0.179-0.005-0.029-0.010-0.058-0.015-0.087-0.003-0.014-0.005-0.028-0.008-0.043s-0.003-0.029-0.005-0.043c-0.007-0.056-0.014-0.112-0.020-0.166-0.003-0.027-0.007-0.053-0.010-0.080s-0.004-0.053-0.006-0.078-0.007-0.101-0.011-0.15c-0.003-0.049-0.008-0.095-0.008-0.142-0.002-0.091-0.004-0.177-0.006-0.256 0.003-0.073 0.005-0.14 0.007-0.2 0.001-0.030 0.002-0.058 0.002-0.085 0.002-0.033 0.004-0.064 0.006-0.093 0.002-0.033 0.004-0.063 0.006-0.091 0.008-0.051 0.012-0.103 0.012-0.156 0-0.007-0-0.015-0.001-0.022 0-0.002 0-0.003 0-0.003h-0c-0.012-0.49-0.377-0.893-0.851-0.964z"/></svg>','<svg stroke="currentColor" fill="currentColor" stroke-width="0" version="1.1" viewBox="0 0 16 16" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M8 0c-4.355 0-7.898 3.481-7.998 7.812 0.092-3.779 2.966-6.812 6.498-6.812 3.59 0 6.5 3.134 6.5 7 0 0.828 0.672 1.5 1.5 1.5s1.5-0.672 1.5-1.5c0-4.418-3.582-8-8-8zM8 16c4.355 0 7.898-3.481 7.998-7.812-0.092 3.779-2.966 6.812-6.498 6.812-3.59 0-6.5-3.134-6.5-7 0-0.828-0.672-1.5-1.5-1.5s-1.5 0.672-1.5 1.5c0 4.418 3.582 8 8 8z"/></svg>','<svg stroke="currentColor" fill="currentColor" stroke-width="0" version="1.1" viewBox="0 0 16 16" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M8 0c-4.418 0-8 3.582-8 8s3.582 8 8 8 8-3.582 8-8-3.582-8-8-8zM8 4c2.209 0 4 1.791 4 4s-1.791 4-4 4-4-1.791-4-4 1.791-4 4-4zM12.773 12.773c-1.275 1.275-2.97 1.977-4.773 1.977s-3.498-0.702-4.773-1.977-1.977-2.97-1.977-4.773c0-1.803 0.702-3.498 1.977-4.773l1.061 1.061c0 0 0 0 0 0-2.047 2.047-2.047 5.378 0 7.425 0.992 0.992 2.31 1.538 3.712 1.538s2.721-0.546 3.712-1.538c2.047-2.047 2.047-5.378 0-7.425l1.061-1.061c1.275 1.275 1.977 2.97 1.977 4.773s-0.702 3.498-1.977 4.773z"/></svg>','<svg stroke="currentColor" fill="currentColor" stroke-width="0" version="1.1" viewBox="0 0 16 16" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M3 8c0-0.19 0.011-0.378 0.032-0.563l-2.89-0.939c-0.092 0.487-0.141 0.989-0.141 1.502 0 2.3 0.971 4.374 2.526 5.833l1.786-2.458c-0.814-0.889-1.312-2.074-1.312-3.375zM13 8c0 1.301-0.497 2.486-1.312 3.375l1.786 2.458c1.555-1.459 2.526-3.533 2.526-5.833 0-0.513-0.049-1.015-0.141-1.502l-2.89 0.939c0.021 0.185 0.032 0.373 0.032 0.563zM9 3.1c1.436 0.292 2.649 1.199 3.351 2.435l2.89-0.939c-1.144-2.428-3.473-4.188-6.241-4.534v3.038zM3.649 5.535c0.702-1.236 1.914-2.143 3.351-2.435v-3.038c-2.769 0.345-5.097 2.105-6.241 4.534l2.89 0.939zM10.071 12.552c-0.631 0.288-1.332 0.448-2.071 0.448s-1.44-0.16-2.071-0.448l-1.786 2.458c1.144 0.631 2.458 0.99 3.857 0.99s2.713-0.359 3.857-0.99l-1.786-2.458z"/></svg>','<svg stroke="currentColor" fill="currentColor" stroke-width="0" version="1.1" viewBox="0 0 16 16" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M16 8c-0.020-1.045-0.247-2.086-0.665-3.038-0.417-0.953-1.023-1.817-1.766-2.53s-1.624-1.278-2.578-1.651c-0.953-0.374-1.978-0.552-2.991-0.531-1.013 0.020-2.021 0.24-2.943 0.646-0.923 0.405-1.758 0.992-2.449 1.712s-1.237 1.574-1.597 2.497c-0.361 0.923-0.533 1.914-0.512 2.895 0.020 0.981 0.234 1.955 0.627 2.847 0.392 0.892 0.961 1.7 1.658 2.368s1.523 1.195 2.416 1.543c0.892 0.348 1.851 0.514 2.799 0.493 0.949-0.020 1.89-0.227 2.751-0.608 0.862-0.379 1.642-0.929 2.287-1.604s1.154-1.472 1.488-2.335c0.204-0.523 0.342-1.069 0.415-1.622 0.019 0.001 0.039 0.002 0.059 0.002 0.552 0 1-0.448 1-1 0-0.028-0.001-0.056-0.004-0.083h0.004zM14.411 10.655c-0.367 0.831-0.898 1.584-1.55 2.206s-1.422 1.112-2.254 1.434c-0.832 0.323-1.723 0.476-2.608 0.454-0.884-0.020-1.759-0.215-2.56-0.57-0.801-0.354-1.526-0.867-2.125-1.495s-1.071-1.371-1.38-2.173c-0.31-0.801-0.457-1.66-0.435-2.512s0.208-1.694 0.551-2.464c0.342-0.77 0.836-1.468 1.441-2.044s1.321-1.029 2.092-1.326c0.771-0.298 1.596-0.438 2.416-0.416s1.629 0.202 2.368 0.532c0.74 0.329 1.41 0.805 1.963 1.387s0.988 1.27 1.272 2.011c0.285 0.74 0.418 1.532 0.397 2.32h0.004c-0.002 0.027-0.004 0.055-0.004 0.083 0 0.516 0.39 0.94 0.892 0.994-0.097 0.544-0.258 1.075-0.481 1.578z"/></svg>','<svg stroke="currentColor" fill="currentColor" stroke-width="0" version="1.1" viewBox="0 0 16 16" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M8 16c-2.137 0-4.146-0.832-5.657-2.343s-2.343-3.52-2.343-5.657c0-1.513 0.425-2.986 1.228-4.261 0.781-1.239 1.885-2.24 3.193-2.895l0.672 1.341c-1.063 0.533-1.961 1.347-2.596 2.354-0.652 1.034-0.997 2.231-0.997 3.461 0 3.584 2.916 6.5 6.5 6.5s6.5-2.916 6.5-6.5c0-1.23-0.345-2.426-0.997-3.461-0.635-1.008-1.533-1.822-2.596-2.354l0.672-1.341c1.308 0.655 2.412 1.656 3.193 2.895 0.803 1.274 1.228 2.748 1.228 4.261 0 2.137-0.832 4.146-2.343 5.657s-3.52 2.343-5.657 2.343z"/></svg>']});var Dc=Te(uo=>{"use strict";Object.defineProperty(uo,"__esModule",{value:!0});uo.Spinner=uo.spinnerSizeMap=void 0;var E2=ut(),S6=(0,E2.__importDefault)(Bt()),mp=(0,E2.__importDefault)(Ce()),b6=b2();uo.spinnerSizeMap={xs:"h-6 w-6",sm:"h-9 w-9",md:"h-16 w-16",lg:"h-32 w-32",xl:"h-64 w-64",auto:"h-full w-full"};var E6=function(t){var e=t.type,r=e===void 0?1:e,n=t.size,i=n===void 0?"auto":n,o=t.className;return mp.default.createElement("div",{className:(0,S6.default)("overflow-hidden",o,uo.spinnerSizeMap[i])},r==="pulse"?mp.default.createElement("div",{className:"bg-secondary-300 h-full w-full animate-pulse"}):mp.default.createElement("img",{src:"data:image/svg+xml;utf8,".concat(b6.spinnersSvg[r-1]),className:"animate-spin h-full w-full"}))};uo.Spinner=E6});var Fc=Te(co=>{"use strict";Object.defineProperty(co,"__esModule",{value:!0});co.AvatarInner=co.Avatar=void 0;var vp=ut(),O2=Jt(),wr=(0,vp.__importStar)(Ce()),O6=Ac(),x6=(0,vp.__importDefault)(Bt()),T6={xs:"h-6 w-6",sm:"h-9 w-9",md:"h-16 w-16",lg:"h-32 w-32",xl:"h-64 w-64",auto:"h-full w-full"},k6=Dc(),N6=function(t){var e=t.dataState,r=t.imgSrc,n=t.backgroundColor,i=t.status,o=t.badge,s=t.size,a=t.onClick,l=t.className,h=function(){if(e==="loading"||e==="error")return e==="error"?"Couldn't Load User":e==="loading"?"Loading...":"";if((0,O2.isType)(t.name,"string")||!t.name)return t.name||"";var g=t.name,m=g.first,p=g.last;return"".concat(m," ").concat(p)}();return wr.default.createElement("div",{onClick:a,className:(0,x6.default)(`
            flex relative justify-center items-center
            m-1 mr-2 rounded-full text-white`,T6[s],!(n||e==="loading")&&"bg-secondary-500",e==="loading"&&" overflow-hidden",a&&"cursor-pointer",l),title:e==="error"?"Couldn't Load User":e==="loading"?"Loading...":h,style:{backgroundColor:n}},wr.default.createElement(co.AvatarInner,(0,vp.__assign)({},{dataState:e,imgSrc:r,badge:o,size:s,status:i,name:h})))};co.Avatar=N6;var I6={xs:"text-sm",sm:"text-xl",md:"text-4xl",lg:"text-7xl",xl:"text-9xl"},A6=function(t){if(t.dataState==="loading")return wr.default.createElement(k6.Spinner,{size:"auto",type:"pulse"});if(t.dataState==="error")return wr.default.createElement("img",{src:"data:image/svg+xml;utf8,".concat(C6),className:"rounded-full h-full w-full"});var e=t.imgSrc,r=t.status,n=t.badge,i=t.size,o=t.name,s=o===void 0?"":o,a=(0,wr.useState)(e?"loading":"error"),l=a[0],h=a[1],g=(0,O2.isType)(s,"string")?s.substring(0,2):"".concat(s.first[0].toUpperCase()).concat(s.last[0].toUpperCase());return wr.default.createElement(wr.default.Fragment,null,wr.default.createElement(O6.Badge,{size:i,badge:n}),l==="error"?wr.default.createElement("span",{className:I6[i]},g):wr.default.createElement("img",{className:"rounded-full h-full w-full",src:e,onLoad:function(){return h("success")},onError:function(){return h("error")}}),r&&wr.default.createElement(F6,{size:i,status:r}))};co.AvatarInner=A6;var R6={xs:"h-2 w-2",sm:"h-3 w-3",md:"h-4 w-4",lg:"h-6 w-6",xl:"h-12 w-12"},D6={online:"bg-success-500",offline:"bg-danger-500",busy:"bg-warning-500",away:"bg-secondary-500"},F6=function(t){return wr.default.createElement("span",{className:"flex absolute bottom-0 right-0"},t.status==="online"&&wr.default.createElement("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-success-400 opacity-75"}),wr.default.createElement("span",{className:"relative inline-flex rounded-full ".concat(D6[t.status]," ").concat(R6[t.size])}))},C6='<svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 16 16" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M4.54.146A.5.5 0 0 1 4.893 0h6.214a.5.5 0 0 1 .353.146l4.394 4.394a.5.5 0 0 1 .146.353v6.214a.5.5 0 0 1-.146.353l-4.394 4.394a.5.5 0 0 1-.353.146H4.893a.5.5 0 0 1-.353-.146L.146 11.46A.5.5 0 0 1 0 11.107V4.893a.5.5 0 0 1 .146-.353L4.54.146zM5.1 1 1 5.1v5.8L5.1 15h5.8l4.1-4.1V5.1L10.9 1H5.1z"/><path d="M5.255 5.786a.237.237 0 0 0 .241.247h.825c.138 0 .248-.113.266-.25.09-.656.54-1.134 1.342-1.134.686 0 1.314.343 1.314 1.168 0 .635-.374.927-.965 1.371-.673.489-1.206 1.06-1.168 1.987l.003.217a.25.25 0 0 0 .25.246h.811a.25.25 0 0 0 .25-.25v-.105c0-.718.273-.927 1.01-1.486.609-.463 1.244-.977 1.244-2.056 0-1.511-1.276-2.241-2.673-2.241-1.267 0-2.655.59-2.75 2.286zm1.557 5.763c0 .533.425.927 1.01.927.609 0 1.028-.394 1.028-.927 0-.552-.42-.94-1.029-.94-.584 0-1.009.388-1.009.94z"/></svg>'});var k2=Te(Cc=>{"use strict";Object.defineProperty(Cc,"__esModule",{value:!0});Cc.AvatarGroup=void 0;var _p=ut(),wp=(0,_p.__importDefault)(Bt()),rl=(0,_p.__importDefault)(Ce()),x2=Fc(),T2={xs:"h-6 w-6",sm:"h-9 w-9",md:"h-16 w-16",lg:"h-32 w-32",xl:"h-64 w-64",auto:"h-full w-full"},L6=function(t){var e=t.maxShow,r=e===void 0?5:e,n=t.avatars,i=t.size,o=t.onClick;if(r<1)return console.error(`Property "maxShow" can't be less than 1`),null;var s=n.slice(0,r),a=n.length-s.length;return rl.default.createElement("div",{className:(0,wp.default)("flex flex-row-reverse justify-center mt-10",o&&"cursor-pointer",t.className),onClick:o},a>0&&rl.default.createElement("div",{className:(0,wp.default)(`
                flex flex-shrink-0 relative
                bg-secondary-500
                justify-center items-center m-1 mr-2 -ml-3 rounded-full border-r-2 text-xl text-white`,T2[i])},rl.default.createElement(x2.AvatarInner,{size:i,dataState:"done",name:"+".concat(a)})),s.map(function(l,h){var g=l.dataState,m=l.backgroundColor,p=l.imgSrc,w=l.name,b=l.status,N={dataState:g,name:w,imgSrc:p,status:b,size:i};return rl.default.createElement("div",{className:(0,wp.default)("flex flex-shrink-0 relative justify-center items-center m-1 mr-2 -ml-3 rounded-full border-r-2 border-white",!(l.backgroundColor||l.dataState==="loading")&&"bg-secondary-500",T2[i]),style:{backgroundColor:m},key:h},rl.default.createElement(x2.AvatarInner,(0,_p.__assign)({},N)))}))};Cc.AvatarGroup=L6});var Pc=Te(Lc=>{"use strict";Object.defineProperty(Lc,"__esModule",{value:!0});Lc.Backdrop=void 0;var bp=ut(),P6=(0,bp.__importDefault)(Bt()),Sp=(0,bp.__importStar)(Ce()),M6=function(t){var e=t.zIndex,r=t.onBackdropClick,n=t.maxOpacity,i=n===void 0?40:n,o=t.transition,s=o===void 0?!0:o,a=t.style,l=t.className,h=(0,Sp.useState)(!s),g=h[0],m=h[1];return(0,Sp.useEffect)(function(){return!g&&setTimeout(function(){return m(!0)},0)},[g]),Sp.default.createElement("div",{className:(0,P6.default)("fixed top-0 left-0 right-0 w-screen h-screen bg-black",s&&"transition-opacity duration-200",l),style:(0,bp.__assign)({zIndex:e,opacity:g?Number((i/100).toFixed(2)):0},a),onClick:r})};Lc.Backdrop=M6});var nl=Te(jc=>{"use strict";Object.defineProperty(jc,"__esModule",{value:!0});jc.Button=void 0;var Mc=ut(),j6=(0,Mc.__importDefault)(Bt()),Ep=(0,Mc.__importStar)(Ce()),U6=Ac(),B6={xs:"text-xs p-0.5 px-1",sm:"text-sm p-1 px-2",md:"text-base p-1.5 px-3",lg:"text-lg p-2 px-4",xl:"text-xl p-2.5 px-5",auto:"p-1.5 text-base h-full w-full"},z6={primary:"bg-primary-500",secondary:"bg-secondary-500",success:"bg-success-500",info:"bg-info-500",danger:"bg-danger-500",warning:"bg-warning-500"},V6={primary:"hover:bg-primary-600",secondary:"hover:bg-secondary-600",success:"hover:bg-success-600",info:"hover:bg-info-600",danger:"hover:bg-danger-700",warning:"hover:bg-warning-600"},W6={primary:"border-primary-500 text-primary-500",secondary:"border-secondary-500 text-secondary-500",success:"border-success-500 text-success-500",info:"border-info-500 text-info-500",danger:"border-danger-500 text-danger-500",warning:"border-warning-500 text-warning-500"},q6={xs:"xs",sm:"sm",md:"md",lg:"md",xl:"lg",auto:"md"},$6=function(t){var e=t.size,r=e===void 0?"md":e,n=t.type,i=n===void 0?"secondary":n,o=t.shape,s=o===void 0?"round":o,a=t.outline,l=a===void 0?!1:a,h=t.badge,g=t.className,m=t.disabled,p=t.children,w=t.htmlType,b=w===void 0?"button":w,N=(0,Mc.__rest)(t,["size","type","shape","outline","badge","className","disabled","children","htmlType"]),O=(0,Ep.useState)(!1),I=O[0],D=O[1];return Ep.default.createElement("button",(0,Mc.__assign)({type:b,className:(0,j6.default)("relative text-gray-100 font-normal border-2 transition-all",B6[r],l&&!I?W6[i]:z6[i]+" border-transparent",s==="flat"?"rounded-none":"rounded-lg",m&&"opacity-60",!m&&V6[i],g),onMouseEnter:function(){return D(!m)},onMouseLeave:function(){return D(!1)},disabled:m},N),h&&Ep.default.createElement(U6.Badge,{size:q6[r],badge:h,className:r==="xs"||r==="sm"?"-top-1.5 -right-1.5":"-top-2 -right-3"}),p)};jc.Button=$6});var N2=Te(Bc=>{"use strict";Object.defineProperty(Bc,"__esModule",{value:!0});Bc.Dropdown=void 0;var Uc=ut(),H6=Jt(),il=(0,Uc.__importDefault)(Bt()),_r=(0,Uc.__importStar)(Ce()),J6=mi(),G6={xs:"w-30",sm:"w-44",md:"w-60",lg:"w-80",xl:"w-96",auto:"w-full"};function Y6(t){var e=t.header,r=t.items,n=t.show,i=t.children,o=t.itemBorders,s=t.size,a=s===void 0?"md":s,l=t.className,h=t.align,g=h===void 0?"left":h,m=t.containerClassName,p=(0,_r.useState)(n||!1),w=p[0],b=p[1],N=function(){return setTimeout(function(){return b(!1)},0)},O=(0,_r.useRef)(null);(0,J6.clickOutListener)(O,N);var I=o?r.filter(function(G){return G.type!=="break"}):r,D={onClick:function(){return b(!w)},onBlur:N};return _r.default.createElement("div",(0,Uc.__assign)({className:(0,il.default)("relative",m)},n??D,{ref:O}),i,_r.default.createElement("div",{className:(0,il.default)("animate-slide-down absolute bg-white text-sm list-none divide-gray-100 rounded-sm shadow-md border",!(n??w)&&"hidden",g==="right"&&"right-0 left-auto",G6[a],l)},e&&_r.default.createElement("div",{className:(0,il.default)("cursor-default",o&&"border-b border-secondary-200")},(0,H6.isType)(e,"string")?_r.default.createElement("span",{className:"py-1.5 block text-center text-gray-500 text-base"},e):e),_r.default.createElement("ul",null,I.map(function(G,q,J){var C=J.length;return _r.default.createElement(K6,(0,Uc.__assign)({},G,{border:o,isLast:q===C-1,key:q}))}))))}Bc.Dropdown=Y6;var K6=function(t){var e=(0,il.default)(!t.isLast&&t.border&&"border-b border-secondary-200");switch(t.type){case"action":return _r.default.createElement("li",{className:e},_r.default.createElement("a",{className:"hover:bg-gray-100 text-gray-700 cursor-pointer block px-4 py-1.5",onClick:t.onClick},t.title));case"break":return _r.default.createElement("hr",{className:"my-1 dark:border-gray-600"});case"section":return _r.default.createElement("li",{className:(0,il.default)("text-gray-600 text-center block py-1 cursor-default",e)},_r.default.createElement("span",{className:"text-xs"},t.title));case"jsx":return _r.default.createElement("li",{className:e},t.element);default:throw console.error(t),new Error("This type of MenuItem is not implemented.")}}});var zp=Te(Rr=>{"use strict";function Z6(t){return t&&typeof t=="object"&&"default"in t?t:{default:t}}Object.defineProperty(Rr,"__esModule",{value:!0});var De=Z6(Ce()),sl=t=>t.type==="checkbox",_s=t=>t instanceof Date,Sr=t=>t==null,V2=t=>typeof t=="object",zt=t=>!Sr(t)&&!Array.isArray(t)&&V2(t)&&!_s(t),W2=t=>zt(t)&&t.target?sl(t.target)?t.target.checked:t.target.value:t,q2=(t,e)=>[...t].some(r=>(n=>n.substring(0,n.search(/.\d/))||n)(e)===r),al=t=>t.filter(Boolean),ot=t=>t===void 0,Ee=(t,e,r)=>{if(!e||!zt(t))return r;let n=al(e.split(/[,[\].]+?/)).reduce((i,o)=>Sr(i)?i:i[o],t);return ot(n)||n===t?ot(t[e])?r:t[e]:n},$2="blur",X6="focusout",Q6="change",eN="onBlur",H2="onChange",J2="onSubmit",tN="onTouched",ll="all",rN="max",nN="min",iN="maxLength",oN="minLength",I2="pattern",A2="required",sN="validate",Jc=(t,e)=>{let r=Object.assign({},t);return delete r[e],r},G2=De.default.createContext(null),ul=()=>De.default.useContext(G2),Y2=(t,e,r,n=!0)=>{let i={};for(let o in t)Object.defineProperty(i,o,{get:()=>{let s=o;return e[s]!==ll&&(e[s]=!n||ll),r&&(r[s]=!0),t[s]}});return i},Dr=t=>zt(t)&&!Object.keys(t).length,K2=(t,e,r)=>{let n=Jc(t,"name");return Dr(n)||Object.keys(n).length>=Object.keys(e).length||Object.keys(n).find(i=>e[i]===(!r||ll))},Fr=t=>Array.isArray(t)?t:[t],Z2=(t,e,r)=>r&&e?t===e:!t||!e||t===e||Fr(t).some(n=>n&&(n.startsWith(e)||e.startsWith(n)));function Wc(t){let e=De.default.useRef(t);e.current=t,De.default.useEffect(()=>{let r=!t.disabled&&e.current.subject.subscribe({next:e.current.callback});return()=>(n=>{n&&n.unsubscribe()})(r)},[t.disabled])}function X2(t){let e=ul(),{control:r=e.control,disabled:n,name:i,exact:o}=t||{},[s,a]=De.default.useState(r._formState),l=De.default.useRef({isDirty:!1,dirtyFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1}),h=De.default.useRef(i),g=De.default.useRef(!0);return h.current=i,Wc({disabled:n,callback:De.default.useCallback(m=>g.current&&Z2(h.current,m.name,o)&&K2(m,l.current)&&a(Object.assign(Object.assign({},r._formState),m)),[r,o]),subject:r._subjects.state}),De.default.useEffect(()=>()=>{g.current=!1},[]),Y2(s,r._proxyFormState,l.current,!1)}var On=t=>typeof t=="string",Q2=(t,e,r,n)=>{let i=Array.isArray(t);return On(t)?(n&&e.watch.add(t),Ee(r,t)):i?t.map(o=>(n&&e.watch.add(o),Ee(r,o))):(n&&(e.watchAll=!0),r)},Gc=t=>typeof t=="function",Mp=t=>{for(let e in t)if(Gc(t[e]))return!0;return!1};function eE(t){let e=ul(),{control:r=e.control,name:n,defaultValue:i,disabled:o,exact:s}=t||{},a=De.default.useRef(n);a.current=n;let l=De.default.useCallback(m=>{if(Z2(a.current,m.name,s)){let p=Q2(a.current,r._names,m.values||r._formValues);g(ot(a.current)||zt(p)&&!Mp(p)?Object.assign({},p):Array.isArray(p)?[...p]:ot(p)?i:p)}},[r,s,i]);Wc({disabled:o,subject:r._subjects.watch,callback:l});let[h,g]=De.default.useState(ot(i)?r._getWatch(n):i);return De.default.useEffect(()=>{r._removeUnmounted()}),h}function R2(t){let e=ul(),{name:r,control:n=e.control,shouldUnregister:i}=t,o=q2(n._names.array,r),s=eE({control:n,name:r,defaultValue:Ee(n._formValues,r,Ee(n._defaultValues,r,t.defaultValue)),exact:!0}),a=X2({control:n,name:r}),l=De.default.useRef(n.register(r,Object.assign(Object.assign({},t.rules),{value:s})));return De.default.useEffect(()=>{let h=(g,m)=>{let p=Ee(n._fields,g);p&&(p._f.mount=m)};return h(r,!0),()=>{let g=n._options.shouldUnregister||i;(o?g&&!n._stateFlags.action:g)?n.unregister(r):h(r,!1)}},[r,n,o,i]),{field:{name:r,value:s,onChange:De.default.useCallback(h=>{l.current.onChange({target:{value:W2(h),name:r},type:Q6})},[r]),onBlur:De.default.useCallback(()=>{l.current.onBlur({target:{value:Ee(n._formValues,r),name:r},type:$2})},[r,n]),ref:De.default.useCallback(h=>{let g=Ee(n._fields,r);h&&g&&h.focus&&(g._f.ref={focus:()=>h.focus(),setCustomValidity:m=>h.setCustomValidity(m),reportValidity:()=>h.reportValidity()})},[r,n._fields])},formState:a,fieldState:n.getFieldState(r,a)}}var tE=(t,e,r,n,i)=>e?Object.assign(Object.assign({},r[t]),{types:Object.assign(Object.assign({},r[t]&&r[t].types?r[t].types:{}),{[n]:i||!0})}):{},jp=t=>/^\w*$/.test(t),rE=t=>al(t.replace(/["|']|\]/g,"").split(/\.|\[/));function ht(t,e,r){let n=-1,i=jp(e)?[e]:rE(e),o=i.length,s=o-1;for(;++n<o;){let a=i[n],l=r;if(n!==s){let h=t[a];l=zt(h)||Array.isArray(h)?h:isNaN(+i[n+1])?{}:[]}t[a]=l,t=t[a]}return t}var qc=(t,e,r)=>{for(let n of r||Object.keys(t)){let i=Ee(t,n);if(i){let o=i._f,s=Jc(i,"_f");if(o&&e(o.name)){if(o.ref.focus&&ot(o.ref.focus()))break;if(o.refs){o.refs[0].focus();break}}else zt(s)&&qc(s,e)}}},vi=()=>{let t=typeof performance>"u"?Date.now():1e3*performance.now();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{let r=(16*Math.random()+t)%16|0;return(e=="x"?r:3&r|8).toString(16)})},Op=(t,e,r={})=>r.shouldFocus||ot(r.shouldFocus)?r.focusName||`${t}.${ot(r.focusIndex)?e:r.focusIndex}.`:"",Lp=(t,e,r)=>!r&&(e.watchAll||e.watch.has(t)||[...e.watch].some(n=>t.startsWith(n)&&/^\.\w+/.test(t.slice(n.length))));function xp(t,e){return[...t,...Fr(e)]}function En(t){let e,r=Array.isArray(t);if(t instanceof Date)e=new Date(t);else if(t instanceof Set)e=new Set(t);else{if(!r&&!zt(t))return t;e=r?[]:{};for(let n in t){if(Gc(t[n])){e=t;break}e[n]=En(t[n])}}return e}var Tp=t=>Array.isArray(t)?t.map(()=>{}):void 0;function kp(t,e,r){return[...t.slice(0,e),...Fr(r),...t.slice(e)]}var Np=(t,e,r)=>Array.isArray(t)?(ot(t[r])&&(t[r]=void 0),t.splice(r,0,t.splice(e,1)[0]),t):[];function Ip(t,e){return[...Fr(e),...Fr(t)]}var Ap=(t,e)=>ot(e)?[]:function(r,n){let i=0,o=[...r];for(let s of n)o.splice(s-i,1),i++;return al(o).length?o:[]}(t,Fr(e).sort((r,n)=>r-n)),Rp=(t,e,r)=>{t[e]=[t[r],t[r]=t[e]][0]},D2=(t,e,r)=>(t[e]=r,t);function Dp(){let t=[];return{get observers(){return t},next:e=>{for(let r of t)r.next(e)},subscribe:e=>(t.push(e),{unsubscribe:()=>{t=t.filter(r=>r!==e)}}),unsubscribe:()=>{t=[]}}}var $c=t=>Sr(t)||!V2(t);function Ss(t,e){if($c(t)||$c(e))return t===e;if(_s(t)&&_s(e))return t.getTime()===e.getTime();let r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(let i of r){let o=t[i];if(!n.includes(i))return!1;if(i!=="ref"){let s=e[i];if(_s(o)&&_s(s)||zt(o)&&zt(s)||Array.isArray(o)&&Array.isArray(s)?!Ss(o,s):o!==s)return!1}}return!0}var F2=t=>({isOnSubmit:!t||t===J2,isOnBlur:t===eN,isOnChange:t===H2,isOnAll:t===ll,isOnTouch:t===tN}),cl=t=>typeof t=="boolean",Up=t=>t.type==="file",Pp=t=>t instanceof HTMLElement,nE=t=>t.type==="select-multiple",Bp=t=>t.type==="radio",C2=typeof window<"u"&&window.HTMLElement!==void 0&&typeof document<"u",Fp=t=>Pp(t)&&t.isConnected;function or(t,e){let r=jp(e)?[e]:rE(e),n=r.length==1?t:function(s,a){let l=a.slice(0,-1).length,h=0;for(;h<l;)s=ot(s)?h++:s[a[h++]];return s}(t,r),i=r[r.length-1],o;n&&delete n[i];for(let s=0;s<r.slice(0,-1).length;s++){let a,l=-1,h=r.slice(0,-(s+1)),g=h.length-1;for(s>0&&(o=t);++l<h.length;){let m=h[l];a=a?a[m]:t[m],g===l&&(zt(a)&&Dr(a)||Array.isArray(a)&&!a.filter(p=>zt(p)&&!Dr(p)||cl(p)||Array.isArray(p)&&p.length).length)&&(o?delete o[m]:delete t[m]),o=a}}return t}function zc(t,e={}){let r=Array.isArray(t);if(zt(t)||r)for(let n in t)Array.isArray(t[n])||zt(t[n])&&!Mp(t[n])?(e[n]=Array.isArray(t[n])?[]:{},zc(t[n],e[n])):Sr(t[n])||(e[n]=!0);return e}var L2=(t,e)=>function r(n,i,o){let s=Array.isArray(n);if(zt(n)||s)for(let a in n)Array.isArray(n[a])||zt(n[a])&&!Mp(n[a])?ot(i)||$c(o[a])?o[a]=Array.isArray(n[a])?zc(n[a],[]):Object.assign({},zc(n[a])):r(n[a],Sr(i)?{}:i[a],o[a]):o[a]=!Ss(n[a],i[a]);return o}(t,e,zc(e)),P2={value:!1,isValid:!1},M2={value:!0,isValid:!0},iE=t=>{if(Array.isArray(t)){if(t.length>1){let e=t.filter(r=>r&&r.checked&&!r.disabled).map(r=>r.value);return{value:e,isValid:!!e.length}}return t[0].checked&&!t[0].disabled?t[0].attributes&&!ot(t[0].attributes.value)?ot(t[0].value)||t[0].value===""?M2:{value:t[0].value,isValid:!0}:M2:P2}return P2},oE=(t,{valueAsNumber:e,valueAsDate:r,setValueAs:n})=>ot(t)?t:e?t===""?NaN:+t:r&&On(t)?new Date(t):n?n(t):t,j2={isValid:!1,value:null},sE=t=>Array.isArray(t)?t.reduce((e,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:e,j2):j2;function Cp(t){let e=t.ref;if(!(t.refs?t.refs.every(r=>r.disabled):e.disabled))return Up(e)?e.files:Bp(e)?sE(t.refs).value:nE(e)?[...e.selectedOptions].map(({value:r})=>r):sl(e)?iE(t.refs).value:oE(ot(e.value)?t.ref.value:e.value,t)}var Hc=t=>t instanceof RegExp,ol=t=>ot(t)?void 0:Hc(t)?t.source:zt(t)?Hc(t.value)?t.value.source:t.value:t;function U2(t,e,r){let n=Ee(t,r);if(n||jp(r))return{error:n,name:r};let i=r.split(".");for(;i.length;){let o=i.join("."),s=Ee(e,o),a=Ee(t,o);if(s&&!Array.isArray(s)&&r!==o)return{name:r};if(a&&a.type)return{name:o,error:a};i.pop()}return{name:r}}var Vc=t=>On(t)||De.default.isValidElement(t);function B2(t,e,r="validate"){if(Vc(t)||Array.isArray(t)&&t.every(Vc)||cl(t)&&!t)return{type:r,message:Vc(t)?t:"",ref:e}}var ws=t=>zt(t)&&!Hc(t)?t:{value:t,message:""},z2=async(t,e,r,n)=>{let{ref:i,refs:o,required:s,maxLength:a,minLength:l,min:h,max:g,pattern:m,validate:p,name:w,valueAsNumber:b,mount:N,disabled:O}=t._f;if(!N||O)return{};let I=o?o[0]:i,D=te=>{n&&I.reportValidity&&(I.setCustomValidity(cl(te)?"":te||" "),I.reportValidity())},G={},q=Bp(i),J=sl(i),C=q||J,z=(b||Up(i))&&!i.value||e===""||Array.isArray(e)&&!e.length,S=tE.bind(null,w,r,G),W=(te,X,ue,ae=iN,ye=oN)=>{let M=te?X:ue;G[w]=Object.assign({type:te?ae:ye,message:M,ref:i},S(te?ae:ye,M))};if(s&&(!C&&(z||Sr(e))||cl(e)&&!e||J&&!iE(o).isValid||q&&!sE(o).isValid)){let{value:te,message:X}=Vc(s)?{value:!!s,message:s}:ws(s);if(te&&(G[w]=Object.assign({type:A2,message:X,ref:I},S(A2,X)),!r))return D(X),G}if(!(z||Sr(h)&&Sr(g))){let te,X,ue=ws(g),ae=ws(h);if(isNaN(e)){let ye=i.valueAsDate||new Date(e);On(ue.value)&&(te=ye>new Date(ue.value)),On(ae.value)&&(X=ye<new Date(ae.value))}else{let ye=i.valueAsNumber||+e;Sr(ue.value)||(te=ye>ue.value),Sr(ae.value)||(X=ye<ae.value)}if((te||X)&&(W(!!te,ue.message,ae.message,rN,nN),!r))return D(G[w].message),G}if((a||l)&&!z&&On(e)){let te=ws(a),X=ws(l),ue=!Sr(te.value)&&e.length>te.value,ae=!Sr(X.value)&&e.length<X.value;if((ue||ae)&&(W(ue,te.message,X.message),!r))return D(G[w].message),G}if(m&&!z&&On(e)){let{value:te,message:X}=ws(m);if(Hc(te)&&!e.match(te)&&(G[w]=Object.assign({type:I2,message:X,ref:i},S(I2,X)),!r))return D(X),G}if(p){if(Gc(p)){let te=B2(await p(e),I);if(te&&(G[w]=Object.assign(Object.assign({},te),S(sN,te.message)),!r))return D(te.message),G}else if(zt(p)){let te={};for(let X in p){if(!Dr(te)&&!r)break;let ue=B2(await p[X](e),I,X);ue&&(te=Object.assign(Object.assign({},ue),S(X,ue.message)),D(ue.message),r&&(G[w]=te))}if(!Dr(te)&&(G[w]=Object.assign({ref:I},te),!r))return G}}return D(!0),G},aN={mode:J2,reValidateMode:H2,shouldFocusError:!0};function lN(t={}){let e,r=Object.assign(Object.assign({},aN),t),n={isDirty:!1,isValidating:!1,dirtyFields:{},isSubmitted:!1,submitCount:0,touchedFields:{},isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,errors:{}},i={},o=r.defaultValues||{},s=r.shouldUnregister?{}:En(o),a={action:!1,mount:!1,watch:!1},l={mount:new Set,unMount:new Set,array:new Set,watch:new Set},h=0,g={},m={isDirty:!1,dirtyFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},p={watch:Dp(),array:Dp(),state:Dp()},w=F2(r.mode),b=F2(r.reValidateMode),N=r.criteriaMode===ll,O=async B=>{let V=!1;return m.isValid&&(V=r.resolver?Dr((await J()).errors):await C(i,!0),B||V===n.isValid||(n.isValid=V,p.state.next({isValid:V}))),V},I=(B,V)=>(ht(n.errors,B,V),p.state.next({errors:n.errors})),D=(B,V,Y,ce)=>{let oe=Ee(i,B);if(oe){let ne=Ee(s,B,ot(Y)?Ee(o,B):Y);ot(ne)||ce&&ce.defaultChecked||V?ht(s,B,V?ne:Cp(oe._f)):W(B,ne),a.mount&&O()}},G=(B,V,Y,ce,oe)=>{let ne=!1,se={name:B},ge=Ee(n.touchedFields,B);if(m.isDirty){let be=n.isDirty;n.isDirty=se.isDirty=z(),ne=be!==se.isDirty}if(m.dirtyFields&&(!Y||ce)){let be=Ee(n.dirtyFields,B);Ss(Ee(o,B),V)?or(n.dirtyFields,B):ht(n.dirtyFields,B,!0),se.dirtyFields=n.dirtyFields,ne=ne||be!==Ee(n.dirtyFields,B)}return Y&&!ge&&(ht(n.touchedFields,B,Y),se.touchedFields=n.touchedFields,ne=ne||m.touchedFields&&ge!==Y),ne&&oe&&p.state.next(se),ne?se:{}},q=async(B,V,Y,ce,oe)=>{let ne=Ee(n.errors,V),se=m.isValid&&n.isValid!==Y;var ge,be;if(t.delayError&&ce?(e=e||(ge=I,be=t.delayError,(...Ie)=>{clearTimeout(h),h=window.setTimeout(()=>ge(...Ie),be)}),e(V,ce)):(clearTimeout(h),ce?ht(n.errors,V,ce):or(n.errors,V)),((ce?!Ss(ne,ce):ne)||!Dr(oe)||se)&&!B){let Ie=Object.assign(Object.assign(Object.assign({},oe),se?{isValid:Y}:{}),{errors:n.errors,name:V});n=Object.assign(Object.assign({},n),Ie),p.state.next(Ie)}g[V]--,m.isValidating&&!Object.values(g).some(Ie=>Ie)&&(p.state.next({isValidating:!1}),g={})},J=async B=>r.resolver?await r.resolver(Object.assign({},s),r.context,((V,Y,ce,oe)=>{let ne={};for(let se of V){let ge=Ee(Y,se);ge&&ht(ne,se,ge._f)}return{criteriaMode:ce,names:[...V],fields:ne,shouldUseNativeValidation:oe}})(B||l.mount,i,r.criteriaMode,r.shouldUseNativeValidation)):{},C=async(B,V,Y={valid:!0})=>{for(let ce in B){let oe=B[ce];if(oe){let ne=oe._f,se=Jc(oe,"_f");if(ne){let ge=await z2(oe,Ee(s,ne.name),N,r.shouldUseNativeValidation);if(ge[ne.name]&&(Y.valid=!1,V))break;V||(ge[ne.name]?ht(n.errors,ne.name,ge[ne.name]):or(n.errors,ne.name))}se&&await C(se,V,Y)}}return Y.valid},z=(B,V)=>(B&&V&&ht(s,B,V),!Ss(ye(),o)),S=(B,V,Y)=>{let ce=Object.assign({},a.mount?s:ot(V)?o:On(B)?{[B]:V}:V);return Q2(B,l,ce,Y)},W=(B,V,Y={})=>{let ce=Ee(i,B),oe=V;if(ce){let ne=ce._f;ne&&(!ne.disabled&&ht(s,B,oE(V,ne)),oe=C2&&Pp(ne.ref)&&Sr(V)?"":V,nE(ne.ref)?[...ne.ref.options].forEach(se=>se.selected=oe.includes(se.value)):ne.refs?sl(ne.ref)?ne.refs.length>1?ne.refs.forEach(se=>se.checked=Array.isArray(oe)?!!oe.find(ge=>ge===se.value):oe===se.value):ne.refs[0]&&(ne.refs[0].checked=!!oe):ne.refs.forEach(se=>se.checked=se.value===oe):Up(ne.ref)?ne.ref.value="":(ne.ref.value=oe,ne.ref.type||p.watch.next({name:B})))}(Y.shouldDirty||Y.shouldTouch)&&G(B,oe,Y.shouldTouch,Y.shouldDirty,!0),Y.shouldValidate&&ae(B)},te=(B,V,Y)=>{for(let ce in V){let oe=V[ce],ne=`${B}.${ce}`,se=Ee(i,ne);!l.array.has(B)&&$c(oe)&&(!se||se._f)||_s(oe)?W(ne,oe,Y):te(ne,oe,Y)}},X=(B,V,Y={})=>{let ce=Ee(i,B),oe=l.array.has(B),ne=En(V);ht(s,B,ne),oe?(p.array.next({name:B,values:s}),(m.isDirty||m.dirtyFields)&&Y.shouldDirty&&(n.dirtyFields=L2(o,s),p.state.next({name:B,dirtyFields:n.dirtyFields,isDirty:z(B,ne)}))):!ce||ce._f||Sr(ne)?W(B,ne,Y):te(B,ne,Y),Lp(B,l)&&p.state.next({}),p.watch.next({name:B})},ue=async B=>{let V=B.target,Y=V.name,ce=Ee(i,Y);if(ce){let ne,se,ge=V.type?Cp(ce._f):W2(B),be=B.type===$2||B.type===X6,Ie=!((oe=ce._f).mount&&(oe.required||oe.min||oe.max||oe.maxLength||oe.minLength||oe.pattern||oe.validate)||r.resolver||Ee(n.errors,Y)||ce._f.deps)||((H,Z,K,Se,L)=>!L.isOnAll&&(!K&&L.isOnTouch?!(Z||H):(K?Se.isOnBlur:L.isOnBlur)?!H:!(K?Se.isOnChange:L.isOnChange)||H))(be,Ee(n.touchedFields,Y),n.isSubmitted,b,w),T=Lp(Y,l,be);ht(s,Y,ge),be?ce._f.onBlur&&ce._f.onBlur(B):ce._f.onChange&&ce._f.onChange(B);let R=G(Y,ge,be,!1),j=!Dr(R)||T;if(!be&&p.watch.next({name:Y,type:B.type}),Ie)return j&&p.state.next(Object.assign({name:Y},T?{}:R));if(!be&&T&&p.state.next({}),g[Y]=(g[Y],1),p.state.next({isValidating:!0}),r.resolver){let{errors:H}=await J([Y]),Z=U2(n.errors,i,Y),K=U2(H,i,Z.name||Y);ne=K.error,Y=K.name,se=Dr(H)}else ne=(await z2(ce,Ee(s,Y),N,r.shouldUseNativeValidation))[Y],se=await O(!0);ce._f.deps&&ae(ce._f.deps),q(!1,Y,se,ne,R)}var oe},ae=async(B,V={})=>{let Y,ce,oe=Fr(B);if(p.state.next({isValidating:!0}),r.resolver){let ne=await(async se=>{let{errors:ge}=await J();if(se)for(let be of se){let Ie=Ee(ge,be);Ie?ht(n.errors,be,Ie):or(n.errors,be)}else n.errors=ge;return ge})(ot(B)?B:oe);Y=Dr(ne),ce=B?!oe.some(se=>Ee(ne,se)):Y}else B?(ce=(await Promise.all(oe.map(async ne=>{let se=Ee(i,ne);return await C(se&&se._f?{[ne]:se}:se)}))).every(Boolean),(ce||n.isValid)&&O()):ce=Y=await C(i);return p.state.next(Object.assign(Object.assign(Object.assign({},!On(B)||m.isValid&&Y!==n.isValid?{}:{name:B}),r.resolver?{isValid:Y}:{}),{errors:n.errors,isValidating:!1})),V.shouldFocus&&!ce&&qc(i,ne=>Ee(n.errors,ne),B?oe:l.mount),ce},ye=B=>{let V=Object.assign(Object.assign({},o),a.mount?s:{});return ot(B)?V:On(B)?Ee(V,B):B.map(Y=>Ee(V,Y))},M=(B,V)=>({invalid:!!Ee((V||n).errors,B),isDirty:!!Ee((V||n).dirtyFields,B),isTouched:!!Ee((V||n).touchedFields,B),error:Ee((V||n).errors,B)}),F=(B,V={})=>{for(let Y of B?Fr(B):l.mount)l.mount.delete(Y),l.array.delete(Y),Ee(i,Y)&&(V.keepValue||(or(i,Y),or(s,Y)),!V.keepError&&or(n.errors,Y),!V.keepDirty&&or(n.dirtyFields,Y),!V.keepTouched&&or(n.touchedFields,Y),!r.shouldUnregister&&!V.keepDefaultValue&&or(o,Y));p.watch.next({}),p.state.next(Object.assign(Object.assign({},n),V.keepDirty?{isDirty:z()}:{})),!V.keepIsValid&&O()},ie=(B,V={})=>{let Y=Ee(i,B),ce=cl(V.disabled);return ht(i,B,{_f:Object.assign(Object.assign(Object.assign({},Y&&Y._f?Y._f:{ref:{name:B}}),{name:B,mount:!0}),V)}),l.mount.add(B),Y?ce&&ht(s,B,V.disabled?void 0:Ee(s,B,Cp(Y._f))):D(B,!0,V.value),Object.assign(Object.assign(Object.assign({},ce?{disabled:V.disabled}:{}),r.shouldUseNativeValidation?{required:!!V.required,min:ol(V.min),max:ol(V.max),minLength:ol(V.minLength),maxLength:ol(V.maxLength),pattern:ol(V.pattern)}:{}),{name:B,onChange:ue,onBlur:ue,ref:oe=>{if(oe){ie(B,V),Y=Ee(i,B);let ne=ot(oe.value)&&oe.querySelectorAll&&oe.querySelectorAll("input,select,textarea")[0]||oe,se=(be=>Bp(be)||sl(be))(ne),ge=Y._f.refs||[];if(se?ge.find(be=>be===ne):ne===Y._f.ref)return;ht(i,B,{_f:Object.assign(Object.assign({},Y._f),se?{refs:ge.concat(ne).filter(Fp),ref:{type:ne.type,name:B}}:{ref:ne})}),D(B,!1,void 0,ne)}else Y=Ee(i,B,{}),Y._f&&(Y._f.mount=!1),(r.shouldUnregister||V.shouldUnregister)&&(!q2(l.array,B)||!a.action)&&l.unMount.add(B)}})};return{control:{register:ie,unregister:F,getFieldState:M,_executeSchema:J,_getWatch:S,_getDirty:z,_updateValid:O,_removeUnmounted:()=>{for(let B of l.unMount){let V=Ee(i,B);V&&(V._f.refs?V._f.refs.every(Y=>!Fp(Y)):!Fp(V._f.ref))&&F(B)}l.unMount=new Set},_updateFieldArray:(B,V=[],Y,ce,oe=!0,ne=!0)=>{if(ce&&Y){if(a.action=!0,ne&&Array.isArray(Ee(i,B))){let se=Y(Ee(i,B),ce.argA,ce.argB);oe&&ht(i,B,se)}if(m.errors&&ne&&Array.isArray(Ee(n.errors,B))){let se=Y(Ee(n.errors,B),ce.argA,ce.argB);oe&&ht(n.errors,B,se),((ge,be)=>{!al(Ee(ge,be)).length&&or(ge,be)})(n.errors,B)}if(m.touchedFields&&Array.isArray(Ee(n.touchedFields,B))){let se=Y(Ee(n.touchedFields,B),ce.argA,ce.argB);oe&&ht(n.touchedFields,B,se)}m.dirtyFields&&(n.dirtyFields=L2(o,s)),p.state.next({isDirty:z(B,V),dirtyFields:n.dirtyFields,errors:n.errors,isValid:n.isValid})}else ht(s,B,V)},_getFieldArray:B=>al(Ee(a.mount?s:o,B,t.shouldUnregister?Ee(o,B,[]):[])),_subjects:p,_proxyFormState:m,get _fields(){return i},get _formValues(){return s},get _stateFlags(){return a},set _stateFlags(B){a=B},get _defaultValues(){return o},get _names(){return l},set _names(B){l=B},get _formState(){return n},set _formState(B){n=B},get _options(){return r},set _options(B){r=Object.assign(Object.assign({},r),B)}},trigger:ae,register:ie,handleSubmit:(B,V)=>async Y=>{Y&&(Y.preventDefault&&Y.preventDefault(),Y.persist&&Y.persist());let ce=!0,oe=En(s);p.state.next({isSubmitting:!0});try{if(r.resolver){let{errors:ne,values:se}=await J();n.errors=ne,oe=se}else await C(i);Dr(n.errors)&&Object.keys(n.errors).every(ne=>Ee(oe,ne))?(p.state.next({errors:{},isSubmitting:!0}),await B(oe,Y)):(V&&await V(Object.assign({},n.errors),Y),r.shouldFocusError&&qc(i,ne=>Ee(n.errors,ne),l.mount))}catch(ne){throw ce=!1,ne}finally{n.isSubmitted=!0,p.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Dr(n.errors)&&ce,submitCount:n.submitCount+1,errors:n.errors})}},watch:(B,V)=>Gc(B)?p.watch.subscribe({next:Y=>B(S(void 0,V),Y)}):S(B,V,!0),setValue:X,getValues:ye,reset:(B,V={})=>{let Y=B||o,ce=En(Y),oe=B&&!Dr(B)?ce:o;if(V.keepDefaultValues||(o=Y),!V.keepValues){if(C2&&ot(B))for(let ne of l.mount){let se=Ee(i,ne);if(se&&se._f){let ge=Array.isArray(se._f.refs)?se._f.refs[0]:se._f.ref;try{Pp(ge)&&ge.closest("form").reset();break}catch{}}}s=t.shouldUnregister?V.keepDefaultValues?En(o):{}:ce,i={},p.array.next({values:oe}),p.watch.next({values:oe})}l={mount:new Set,unMount:new Set,array:new Set,watch:new Set,watchAll:!1,focus:""},a.mount=!m.isValid||!!V.keepIsValid,a.watch=!!t.shouldUnregister,p.state.next({submitCount:V.keepSubmitCount?n.submitCount:0,isDirty:V.keepDirty?n.isDirty:!!V.keepDefaultValues&&!Ss(B,o),isSubmitted:!!V.keepIsSubmitted&&n.isSubmitted,dirtyFields:V.keepDirty?n.dirtyFields:V.keepDefaultValues&&B?Object.entries(B).reduce((ne,[se,ge])=>Object.assign(Object.assign({},ne),{[se]:ge!==Ee(o,se)}),{}):{},touchedFields:V.keepTouched?n.touchedFields:{},errors:V.keepErrors?n.errors:{},isSubmitting:!1,isSubmitSuccessful:!1})},resetField:(B,V={})=>{Ee(i,B)&&(ot(V.defaultValue)?X(B,Ee(o,B)):(X(B,V.defaultValue),ht(o,B,V.defaultValue)),V.keepTouched||or(n.touchedFields,B),V.keepDirty||(or(n.dirtyFields,B),n.isDirty=V.defaultValue?z(B,Ee(o,B)):z()),V.keepError||(or(n.errors,B),m.isValid&&O()),p.state.next(Object.assign({},n)))},clearErrors:B=>{B?Fr(B).forEach(V=>or(n.errors,V)):n.errors={},p.state.next({errors:n.errors})},unregister:F,setError:(B,V,Y)=>{let ce=(Ee(i,B,{_f:{}})._f||{}).ref;ht(n.errors,B,Object.assign(Object.assign({},V),{ref:ce})),p.state.next({name:B,errors:n.errors,isValid:!1}),Y&&Y.shouldFocus&&ce&&ce.focus&&ce.focus()},setFocus:(B,V={})=>{let Y=Ee(i,B)._f,ce=Y.refs?Y.refs[0]:Y.ref;V.shouldSelect?ce.select():ce.focus()},getFieldState:M}}Rr.Controller=t=>t.render(R2(t)),Rr.FormProvider=t=>De.default.createElement(G2.Provider,{value:Jc(t,"children")},t.children),Rr.appendErrors=tE,Rr.get=Ee,Rr.set=ht,Rr.useController=R2,Rr.useFieldArray=function(t){let e=ul(),{control:r=e.control,name:n,keyName:i="id",shouldUnregister:o}=t,[s,a]=De.default.useState(r._getFieldArray(n)),l=De.default.useRef(r._getFieldArray(n).map(vi)),h=De.default.useRef(s),g=De.default.useRef(n),m=De.default.useRef(!1);g.current=n,h.current=s,r._names.array.add(n),Wc({callback:De.default.useCallback(({values:w,name:b})=>{if(b===g.current||!b){let N=Ee(w,g.current,[]);a(N),l.current=N.map(vi)}},[]),subject:r._subjects.array});let p=De.default.useCallback(w=>{m.current=!0,r._updateFieldArray(n,w)},[r,n]);return De.default.useEffect(()=>{r._stateFlags.action=!1,Lp(n,r._names)&&r._subjects.state.next({}),m.current&&r._executeSchema([n]).then(w=>{let b=Ee(w.errors,n);b&&b.type&&!Ee(r._formState.errors,n)&&(ht(r._formState.errors,n,b),r._subjects.state.next({errors:r._formState.errors}))}),r._subjects.watch.next({name:n,values:r._formValues}),r._names.focus&&qc(r._fields,w=>w.startsWith(r._names.focus)),r._names.focus="",r._proxyFormState.isValid&&r._updateValid()},[s,n,r]),De.default.useEffect(()=>(!Ee(r._formValues,n)&&r._updateFieldArray(n),()=>{(r._options.shouldUnregister||o)&&r.unregister(n)}),[n,r,i,o]),{swap:De.default.useCallback((w,b)=>{let N=r._getFieldArray(n);Rp(N,w,b),Rp(l.current,w,b),p(N),a(N),r._updateFieldArray(n,N,Rp,{argA:w,argB:b},!1)},[p,n,r]),move:De.default.useCallback((w,b)=>{let N=r._getFieldArray(n);Np(N,w,b),Np(l.current,w,b),p(N),a(N),r._updateFieldArray(n,N,Np,{argA:w,argB:b},!1)},[p,n,r]),prepend:De.default.useCallback((w,b)=>{let N=Fr(En(w)),O=Ip(r._getFieldArray(n),N);r._names.focus=Op(n,0,b),l.current=Ip(l.current,N.map(vi)),p(O),a(O),r._updateFieldArray(n,O,Ip,{argA:Tp(w)})},[p,n,r]),append:De.default.useCallback((w,b)=>{let N=Fr(En(w)),O=xp(r._getFieldArray(n),N);r._names.focus=Op(n,O.length-1,b),l.current=xp(l.current,N.map(vi)),p(O),a(O),r._updateFieldArray(n,O,xp,{argA:Tp(w)})},[p,n,r]),remove:De.default.useCallback(w=>{let b=Ap(r._getFieldArray(n),w);l.current=Ap(l.current,w),p(b),a(b),r._updateFieldArray(n,b,Ap,{argA:w})},[p,n,r]),insert:De.default.useCallback((w,b,N)=>{let O=Fr(En(b)),I=kp(r._getFieldArray(n),w,O);r._names.focus=Op(n,w,N),l.current=kp(l.current,w,O.map(vi)),p(I),a(I),r._updateFieldArray(n,I,kp,{argA:w,argB:Tp(b)})},[p,n,r]),update:De.default.useCallback((w,b)=>{let N=D2(r._getFieldArray(n),w,b);l.current=[...N].map((O,I)=>O&&I!==w?l.current[I]:vi()),p(N),a([...N]),r._updateFieldArray(n,N,D2,{argA:w,argB:b},!0,!1)},[p,n,r]),replace:De.default.useCallback(w=>{let b=Fr(En(w));l.current=b.map(vi),p([...b]),a([...b]),r._updateFieldArray(n,[...b],N=>N,{},!0,!1)},[p,n,r]),fields:De.default.useMemo(()=>s.map((w,b)=>Object.assign(Object.assign({},w),{[i]:l.current[b]||vi()})),[s,i])}},Rr.useForm=function(t={}){let e=De.default.useRef(),[r,n]=De.default.useState({isDirty:!1,isValidating:!1,dirtyFields:{},isSubmitted:!1,submitCount:0,touchedFields:{},isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,errors:{}});e.current?e.current.control._options=t:e.current=Object.assign(Object.assign({},lN(t)),{formState:r});let i=e.current.control,o=De.default.useCallback(s=>{K2(s,i._proxyFormState,!0)&&(i._formState=Object.assign(Object.assign({},i._formState),s),n(Object.assign({},i._formState)))},[i]);return Wc({subject:i._subjects.state,callback:o}),De.default.useEffect(()=>{i._stateFlags.mount||(i._proxyFormState.isValid&&i._updateValid(),i._stateFlags.mount=!0),i._stateFlags.watch&&(i._stateFlags.watch=!1,i._subjects.state.next({})),i._removeUnmounted()}),e.current.formState=Y2(r,i._proxyFormState),e.current},Rr.useFormContext=ul,Rr.useFormState=X2,Rr.useWatch=eE});var Zc=Te(Kc=>{"use strict";Object.defineProperty(Kc,"__esModule",{value:!0});Kc.TextInput=void 0;var fl=ut(),bs=(0,fl.__importDefault)(Ce()),Yc=(0,fl.__importDefault)(Bt()),uN=nl(),cN=mi(),fN=function(t){var e=t.validation,r=e===void 0?"default":e,n=t.className,i=t.label,o=t.labelType,s=o===void 0?"default":o,a=t.inputClassName,l=t.button,h=t.register,g=(0,fl.__rest)(t,["validation","className","label","labelType","inputClassName","button","register"]),m=i&&s,p=bs.default.createElement("input",(0,fl.__assign)({alt:i},g,{className:(0,Yc.default)("px-3 py-1.5 outline-0 border w-full",cN.TextInputBorderMap[r],g.disabled&&"bg-secondary-200",m!=="addon"&&"rounded-l-sm",!l&&"rounded-r",i||l?a:n)},h));return i||l?bs.default.createElement("div",{className:(0,Yc.default)("flex",m==="default"?"flex-col":"flex-row",n)},i&&bs.default.createElement("div",{className:(0,Yc.default)("flex",m==="default"&&"pb-2",m==="row:1/3"&&"w-1/3",m==="row:1/4"&&"w-1/4",m==="row:2/5"&&"w-2/5",m==="addon"&&"border border-secondary-400 rounded-l-sm py-0.5 px-3 bg-secondary-200 text-secondary-500")},bs.default.createElement("span",{className:(0,Yc.default)(m!=="default"&&"m-auto")},i)),l?bs.default.createElement("div",{className:"flex flex-row w-full"},p,bs.default.createElement(uN.Button,(0,fl.__assign)({shape:"flat",className:"rounded-r-sm"},l),l.label)):p):p};Kc.TextInput=fN});var cE=Te(Xc=>{"use strict";Object.defineProperty(Xc,"__esModule",{value:!0});Xc.Login=void 0;var Vp=ut(),aE=(0,Vp.__importDefault)(Bt()),Tt=(0,Vp.__importDefault)(Ce()),hN=zp(),lE=Zc(),dN=mi(),uE=nl(),pN=Dc();function gN(t){var e=t.onLoginClick,r=t.companyName,n=t.onSignUpClick,i=t.isLoading,o=t.useRegularLogin,s=t.thirdPartyLogins,a=t.className,l=t.style,h=(0,hN.useForm)(),g=h.register,m=h.handleSubmit,p=h.formState,w=h.reset,b=h.setValue,N=p.errors,O=p.submitCount,I=function(C){w(),b("email",C.email),b("password",C.password),e==null||e(C)},D="rounded-md text-sm font-medium",G="py-2.5 pl-3 text-base font-semibold "+(i?"bg-gray-200":"bg-gray-50"),q=O>0&&N.email,J=O>0&&N.password;return Tt.default.createElement("form",{className:(0,aE.default)("bg-white rounded max-w-lg w-full p-10",a),style:l,onSubmit:m(I)},Tt.default.createElement("p",{tabIndex:0,className:"focus:outline-none text-2xl font-extrabold leading-6 text-gray-800"},"Login to ",r||"your account"),n&&Tt.default.createElement("p",{tabIndex:0,className:"focus:outline-none text-sm mt-4 font-medium leading-none text-gray-500"},"Dont have account?",Tt.default.createElement("a",{onClick:i?void 0:n,className:(0,aE.default)(`
                    hover:text-gray-500 focus:text-gray-500 focus:outline-none
                    focus:underline hover:underline text-sm font-medium leading-none
                    text-gray-800`,i?"cursor-not-allowed":"cursor-pointer")}," Sign up here")),Tt.default.createElement("div",{className:"mt-4"}),s==null?void 0:s.map(function(C,z){return Tt.default.createElement(yN,(0,Vp.__assign)({},C,{disabled:i,key:z}))}),s&&o&&Tt.default.createElement("div",{className:"w-full flex items-center justify-between py-5"},Tt.default.createElement("hr",{className:"w-full bg-gray-400"}),Tt.default.createElement("p",{className:"text-base font-medium leading-4 px-2.5 text-gray-400"},"OR"),Tt.default.createElement("hr",{className:"w-full bg-gray-400"})),o&&Tt.default.createElement(Tt.default.Fragment,null,Tt.default.createElement(lE.TextInput,{label:"Email",className:D,inputClassName:G,disabled:i,validation:q?"danger":"default",register:g("email",{required:!0,pattern:dN.regexpUtil.email})}),Tt.default.createElement("div",{className:"font-medium tracking-wide text-danger-500 text-sm mt-1 ml-1"},"\u200D",q?"Please enter a valid email":""),Tt.default.createElement(lE.TextInput,{label:"Password",type:"password",className:D,inputClassName:G,disabled:i,validation:q?"danger":"default",register:g("password",{required:!0})}),Tt.default.createElement("div",{className:"font-medium tracking-wide text-danger-500 text-sm mt-1 ml-1"},"\u200D",J?"Please enter your password":""),Tt.default.createElement("div",{className:"mt-6"},Tt.default.createElement(uE.Button,{size:"auto",type:"primary",className:"font-bold leading-none border rounded h-12 text-lg",disabled:i,htmlType:"submit"},i?Tt.default.createElement(pN.Spinner,{size:"xs",className:"m-auto"}):"Log In"))))}Xc.Login=gN;var yN=function(t){var e=t.disabled,r=t.name,n=t.logo,i=t.onClick;return Tt.default.createElement(uE.Button,{size:"auto",outline:!0,type:"secondary",disabled:e,onClick:i,className:"py-2.5 px-3 rounded-md flex items-center mt-3.5"},n,Tt.default.createElement("p",{className:"text-base font-medium ml-4"},"Login With ",r))}});var fE=Te(ef=>{"use strict";Object.defineProperty(ef,"__esModule",{value:!0});ef.Modal=void 0;var Qc=ut(),mN=Jt(),vN=(0,Qc.__importDefault)(Bt()),ln=(0,Qc.__importDefault)(Ce()),wN=Pc();function _N(t){var e=t.zIndex,r=e===void 0?1004:e,n=t.className,i=t.style,o=t.header,s=t.onClose,a=t.onBackdropClick,l=t.children;return ln.default.createElement(ln.default.Fragment,null,ln.default.createElement(wN.Backdrop,(0,Qc.__assign)({},{zIndex:r-1,onBackdropClick:a,transition:!1})),ln.default.createElement("div",{className:(0,vN.default)("fixed left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2","border border-secondary-300 shadow-lg bg-white w-11/12 md:max-w-md mx-auto rounded overflow-y-auto",n),style:(0,Qc.__assign)({zIndex:r},i)},ln.default.createElement("div",{className:"relative"},ln.default.createElement("div",{className:"cursor-pointer absolute top-3.5 right-3.5",onClick:s},ln.default.createElement("svg",{className:"fill-current text-black",xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",viewBox:"0 0 18 18"},ln.default.createElement("path",{d:"M14.53 4.53l-1.06-1.06L9 7.94 4.53 3.47 3.47 4.53 7.94 9l-4.47 4.47 1.06 1.06L9 10.06l4.47 4.47 1.06-1.06L10.06 9z"}))),ln.default.createElement("div",{className:"py-4 px-6"},o&&ln.default.createElement("div",{className:"pb-3"},(0,mN.isType)(o,"string")?ln.default.createElement("p",{className:"text-2xl font-bold"},o):o),l))))}ef.Modal=_N});var hE=Te(tf=>{"use strict";Object.defineProperty(tf,"__esModule",{value:!0});tf.SquareGrid=void 0;var Wp=ut(),un=(0,Wp.__importStar)(Ce()),SN=Jt(),bN=function(t){(0,Wp.__extends)(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.state={sizeBy:"vw"},r.componentDidMount=function(){var n=function(){var i=window.innerHeight>window.innerWidth?"vw":"vh";i!==r.state.sizeBy&&r.setState({sizeBy:i})};n(),r.resizeRef=xN(n)},r.componentWillUnmount=function(){var n;return(n=r.resizeRef)===null||n===void 0?void 0:n.stop()},r.render=function(){var n=r.props,i=r.state,o="85"+i.sizeBy;return un.default.createElement("div",{className:"border flex flex-col",style:{height:o,width:o}},un.default.createElement(EN,{items:n.items}))},r}return e}(un.Component);tf.SquareGrid=bN;function EN(t){var e=(0,un.useState)("0"),r=e[0],n=e[1],i=(0,un.useState)([]),o=i[0],s=i[1];return(0,un.useEffect)(function(){var a=t.items.length,l=Math.ceil(Math.sqrt(a)),h=(0,SN.arrDivide)(t.items,a/l);s(h),n((100/h.length).toFixed(5)+"%")},[t.items]),un.default.createElement(un.default.Fragment,null,o.map(function(a,l){return un.default.createElement("div",{className:"flex flex-row",style:{height:r},key:l},a.map(function(h,g){return un.default.createElement(ON,(0,Wp.__assign)({},{children:h,size:r},{key:g}))}))}))}function ON(t){var e=t.children,r=t.size;return un.default.createElement("div",{style:{width:r},className:"h-full m-auto"},e)}function xN(t){return addEventListener("resize",t),{stop:function(){return removeEventListener("resize",t)}}}});var dE=Te(rf=>{"use strict";Object.defineProperty(rf,"__esModule",{value:!0});rf.Radio=void 0;var $p=ut(),qp=(0,$p.__importDefault)(Ce()),TN=function(t){var e=t.label,r=t.disabled,n=(0,$p.__rest)(t,["label","disabled"]);return qp.default.createElement("label",{className:"inline-flex items-center"},qp.default.createElement("input",(0,$p.__assign)({type:"radio",name:"vehicle",className:"h-5 w-5 text-red-600",disabled:r},n)),e&&qp.default.createElement("span",{className:"ml-2 text-gray-700"},e))};rf.Radio=TN});var pE=Te(af=>{"use strict";Object.defineProperty(af,"__esModule",{value:!0});af.TextArea=void 0;var sf=ut(),nf=(0,sf.__importDefault)(Ce()),kN=mi(),of=(0,sf.__importDefault)(Bt());function NN(t){var e=t.validation,r=e===void 0?"default":e,n=t.className,i=t.label,o=t.labelType,s=o===void 0?"default":o,a=t.inputClassName,l=t.register,h=(0,sf.__rest)(t,["validation","className","label","labelType","inputClassName","register"]),g=i&&s,m=nf.default.createElement("textarea",(0,sf.__assign)({alt:i},h,{className:(0,of.default)("px-3 py-1.5 outline-0 border w-full rounded-r-sm",kN.TextInputBorderMap[r],h.disabled&&"bg-secondary-200",g!=="addon"&&"rounded-l-sm",i?a:n)}));return i?nf.default.createElement("div",{className:(0,of.default)("flex",g==="default"?"flex-col":"flex-row",n)},i&&nf.default.createElement("div",{className:(0,of.default)("flex",g==="default"&&"pb-2",g==="row:1/3"&&"w-1/3",g==="row:1/4"&&"w-1/4",g==="row:2/5"&&"w-2/5",g==="addon"&&"border border-secondary-400 rounded-l-sm py-0.5 px-3 bg-secondary-200 text-secondary-500")},nf.default.createElement("span",{className:(0,of.default)(g!=="default"&&"m-auto")},i)),m):m}af.TextArea=NN});var gE=Te(lf=>{"use strict";Object.defineProperty(lf,"__esModule",{value:!0});lf.Toggle=void 0;var Hp=ut(),wi=(0,Hp.__importStar)(Ce()),IN=function(t){var e=t.onChange,r=t.label,n=(0,Hp.__rest)(t,["onChange","label"]),i=(0,wi.useState)(!1),o=i[0],s=i[1];return wi.default.createElement("div",{className:"flex flex-col"},wi.default.createElement("label",{className:"mt-3 inline-flex items-center cursor-pointer"},wi.default.createElement("span",{className:"relative"},wi.default.createElement("span",{className:"block w-10 h-6 rounded-full shadow-inner ".concat(o?"bg-primary-300":"bg-secondary-200")}),wi.default.createElement("span",{className:"absolute block w-4 h-4 mt-1 ml-1 rounded-full shadow inset-y-0 left-0 focus-within:shadow-outline transition-transform duration-300 ease-in-out ".concat(o?"transform translate-x-full bg-secondary-300":"bg-secondary-400")},wi.default.createElement("input",(0,Hp.__assign)({},n,{type:"checkbox",className:"absolute opacity-0 w-0 h-0",onChange:function(a){s(a.target.checked),e(a.target.checked)}})))),r&&wi.default.createElement("span",{className:"ml-3 text-sm"},r)))};lf.Toggle=IN});var wE=Te(uf=>{"use strict";Object.defineProperty(uf,"__esModule",{value:!0});uf.NavDrawer=void 0;var cn=ut(),Xe=(0,cn.__importStar)(Ce()),fo=(0,cn.__importDefault)(Bt()),mE=Jt(),AN=Fc(),RN=Pc(),DN=mi(),FN=function(t){var e=t.brand,r=t.fixed,n=r===void 0?!1:r,i=t.zIndex,o=i===void 0?1002:i,s=t.user,a=t.onBrandClick,l=t.onAvatarClick,h=t.onBackdropClick,g=t.menuItems,m=t.isOpen,p=t.className,w=t.style;return Xe.default.createElement(Xe.default.Fragment,null,n&&m&&Xe.default.createElement(RN.Backdrop,(0,cn.__assign)({},{onBackdropClick:h,zIndex:o-1})),Xe.default.createElement("div",{className:(0,fo.default)(`
        flex flex-col bg-white
        dark:bg-gray-800 dark:border-gray-600
        shadow text-secondary-600 w-64
        transition-all duration-500`,n&&"h-screen fixed top-0 "+(n==="left"?"left-0":"right-0"),n&&[!m&&n==="left"&&"-translate-x-full",!m&&n==="right"&&"translate-x-full"],DN.customScrollBar,p),style:(0,cn.__assign)({zIndex:o},w)},e&&Xe.default.createElement("div",{className:(0,fo.default)("border-b border-secondary-200 px-2 py-1.5",a&&"cursor-pointer"),onClick:a},(0,mE.isType)(e,"string")?Xe.default.createElement("h2",{className:(0,fo.default)("text-3xl font-semibold text-gray-800 dark:text-white")},e):e),s&&Xe.default.createElement("div",{className:(0,fo.default)("flex items-center border-b border-secondary-200 pl-1.5 py-2",l&&"cursor-pointer"),onClick:l},Xe.default.createElement(AN.Avatar,(0,cn.__assign)({dataState:"done",size:"sm"},s)),Xe.default.createElement("h4",{className:"ml-1 font-medium text-gray-600 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200"},s.name)),Xe.default.createElement("div",{className:"flex flex-col justify-between flex-1"},Xe.default.createElement("nav",{className:"px-1.5"},g.map(function(b,N){return Xe.default.createElement(vE,(0,cn.__assign)({},b,{key:N}))})))))};uf.NavDrawer=FN;var yE=function(t){var e=t.children,r=t.isActive,n=t.getHeight,i=(0,cn.__rest)(t,["children","isActive","getHeight"]);return Xe.default.createElement("div",(0,cn.__assign)({className:(0,fo.default)(`
        flex items-center
        my-1 px-4 py-2 rounded-md
        text-gray-600 dark:text-gray-400
    `,i.onClick&&"cursor-pointer",r?"bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-200":"hover:bg-gray-200 dark:hover:bg-gray-700 hover:text-gray-700 dark:hover:text-gray-200")},i),e)},vE=function(t){switch(t.type){case"action":{var e=t.isActive,r=t.icon,n=t.title,i=t.onClick;return(0,mE.isType)(n,"string")?Xe.default.createElement(yE,(0,cn.__assign)({},{isActive:e,onClick:i}),r&&r,Xe.default.createElement("span",{className:"mx-4 font-medium"},n)):n}case"break":return Xe.default.createElement("hr",{className:"my-1 dark:border-gray-600"});case"section":return Xe.default.createElement("div",{className:`\r
                overflow-hidden my-1 py-2\r
                text-gray-600 dark:text-gray-400\r
            `},Xe.default.createElement("span",{className:"px-3 font-medium"},t.title));case"sub-menu":{var r=t.icon,n=t.title,o=t.subMenu,s=(0,Xe.useState)(!1),a=s[0],l=s[1];return Xe.default.createElement(Xe.default.Fragment,null,Xe.default.createElement(yE,(0,cn.__assign)({},{isActive:a,onClick:function(){return l(!a)}}),r&&r,Xe.default.createElement("span",{className:"mx-4 font-medium"},n),Xe.default.createElement("svg",{className:(0,fo.default)("svg-fix transition-transform ml-auto mr-1.5",a&&"-rotate-90"),stroke:"currentColor",fill:"currentColor",strokeWidth:"0",viewBox:"0 0 16 16",height:"1em",width:"1em",xmlns:"http://www.w3.org/2000/svg"},Xe.default.createElement("path",{"fill-rule":"evenodd",d:"M11.354 1.646a.5.5 0 0 1 0 .708L5.707 8l5.647 5.646a.5.5 0 0 1-.708.708l-6-6a.5.5 0 0 1 0-.708l6-6a.5.5 0 0 1 .708 0z"}))),Xe.default.createElement("div",{className:(0,fo.default)("overflow-hidden transition-all duration-700",a?"max-h-screen":"max-h-0")},o.map(function(m,p){return Xe.default.createElement(vE,(0,cn.__assign)({},m,{key:p}))})))}default:throw console.error(t),new Error("This type of MenuItem is not implemented.")}}});var SE=Te(ff=>{"use strict";Object.defineProperty(ff,"__esModule",{value:!0});ff.TopBar=void 0;var cf=ut(),CN=Jt(),LN=(0,cf.__importDefault)(Bt()),Vt=(0,cf.__importStar)(Ce()),PN=Vt.default.createElement("path",{d:"M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM142.4 642.1L298.7 519a8.84 8.84 0 0 0 0-13.9L142.4 381.9c-5.8-4.6-14.4-.5-14.4 6.9v246.3a8.9 8.9 0 0 0 14.4 7z"}),MN=Vt.default.createElement("path",{d:"M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"});function jN(t){var e=t.fixed,r=t.onMenuExpand,n=t.leftNavItems,i=t.centerContent,o=t.rightNavItems,s=t.zIndex,a=s===void 0?1e3:s,l=t.className,h=t.style,g=t.addSpacer,m=g===void 0?!1:g,p=t.menuIsExpanded,w=(0,Vt.useState)(0),b=w[0],N=w[1],O=(0,Vt.useRef)(null),I=(0,Vt.useRef)(new ResizeObserver(function(z){return N(z[0].borderBoxSize[0].blockSize)}));(0,Vt.useEffect)(function(){return O.current&&I.current.observe(O.current),function(){return I.current.disconnect()}},[O,I]);var D=(0,Vt.useState)(!1),G=D[0],q=D[1],J=function(z){return z&&z.map(function(S,W){var te=S.children,X=S.onClick;return Vt.default.createElement(_E,(0,cf.__assign)({},{children:te,onClick:X},{key:W}))})},C=(0,CN.isType)(p,"boolean")?!p:!G;return Vt.default.createElement(Vt.default.Fragment,null,m&&e&&Vt.default.createElement("div",{style:{height:b},className:"w-full"}),Vt.default.createElement("nav",{ref:O,className:(0,LN.default)("bg-white shadow dark:bg-gray-800 flex justify-between p-2 border",e&&"fixed top-0 left-0 right-0",l),style:(0,cf.__assign)({zIndex:a},h)},Vt.default.createElement("ul",{className:"flex flex-row"},r&&Vt.default.createElement(_E,{onClick:function(){q(!C),r(!C)}},Vt.default.createElement("svg",{stroke:"currentColor",fill:"currentColor",strokeWidth:"0",viewBox:"0 0 1024 1024",height:"1em",width:"1em",xmlns:"http://www.w3.org/2000/svg",className:"svg-fix"},C?MN:PN)),J(n)),i,Vt.default.createElement("ul",{className:"flex flex-row"},J(o))))}ff.TopBar=jN;var _E=function(t){return Vt.default.createElement("li",{className:"p-4 text-neutral-500 hover:text-neutral-800 min-w-2"},Vt.default.createElement("span",{className:"cursor-pointer",onClick:t.onClick},t.children))}});var bE=Te(_i=>{"use strict";Object.defineProperty(_i,"__esModule",{value:!0});_i.grTo=_i.grFrom=_i.gradients=void 0;_i.gradients={1:"bg-gradient-to-t",2:"bg-gradient-to-tr",3:"bg-gradient-to-r",4:"bg-gradient-to-br",5:"bg-gradient-to-b",6:"bg-gradient-to-bl",7:"bg-gradient-to-l",8:"bg-gradient-to-tl"};_i.grFrom={slate:"from-slate-400",gray:"from-gray-400",red:"from-red-400",pink:"from-pink-400",purple:"from-purple-400",indigo:"from-indigo-400",blue:"from-blue-400",cyan:"from-cyan-400",teal:"from-teal-400",green:"from-green-400",lime:"from-lime-400",yellow:"from-yellow-400",amber:"from-amber-400",orange:"from-orange-400",brown:"from-brown-400",grey:"from-grey-400",emerald:"from-emerald-400",rose:"from-rose-400"};_i.grTo={slate:"to-slate-900",gray:"to-gray-900",red:"to-red-900",pink:"to-pink-900",purple:"to-purple-900",indigo:"to-indigo-900",blue:"to-blue-900",cyan:"to-cyan-900",teal:"to-teal-900",green:"to-green-900",lime:"to-lime-900",yellow:"to-yellow-900",amber:"to-amber-900",orange:"to-orange-900",brown:"to-brown-900",grey:"to-grey-900",emerald:"to-emerald-900",rose:"to-rose-900"}});var TE=Te(hf=>{"use strict";Object.defineProperty(hf,"__esModule",{value:!0});hf.LoginPage=void 0;var Gp=ut(),EE=(0,Gp.__importDefault)(Bt()),dt=(0,Gp.__importDefault)(Ce()),UN=zp(),BN=df(),xE=nl(),OE=Zc(),zN=mi(),Jp=bE();function VN(t){var e=t.thirdPartyLogins,r=t.useRegularLogin,n=t.brand,i=t.companyName,o=t.bgGradientFrom,s=t.bgGradientTo,a=t.onLoginClick,l=t.isLoading,h=t.gradient,g=t.onSignUpClick,m=t.className,p=t.style,w=(0,UN.useForm)(),b=w.register,N=w.handleSubmit,O=w.formState,I=w.reset,D=w.setValue,G=O.errors,q=O.submitCount,J=function(X){I(),D("email",X.email),D("password",X.password),a==null||a(X)},C="rounded-md text-sm font-medium",z="py-2.5 pl-3 text-base font-semibold "+(l?"bg-gray-200":"bg-gray-50"),S=o&&s&&h,W=q>0&&G.email,te=q>0&&G.password;return dt.default.createElement("div",{className:(0,EE.default)("h-full w-full py-14 px-4",S&&Jp.gradients[h],S&&Jp.grFrom[o],S&&Jp.grTo[s],m),style:p},dt.default.createElement("div",{className:"flex flex-col items-center justify-center"},n,dt.default.createElement("form",{className:"bg-white shadow-lg rounded lg:w-2/3 md:w-3/4 max-w-lg w-full p-10 border border-secondary-200",onSubmit:N(J)},dt.default.createElement("p",{tabIndex:0,className:"focus:outline-none text-2xl font-extrabold leading-6 text-gray-800"},"Login to ",i||"your account"),g&&dt.default.createElement("p",{tabIndex:0,className:"focus:outline-none text-sm mt-4 font-medium leading-none text-gray-500"},"Dont have account?",dt.default.createElement("a",{onClick:l?void 0:g,className:(0,EE.default)(`
                            hover:text-gray-500 focus:text-gray-500 focus:outline-none
                            focus:underline hover:underline text-sm font-medium leading-none
                            text-gray-800`,l?"cursor-not-allowed":"cursor-pointer")}," Sign up here")),dt.default.createElement("div",{className:"mt-4"}),e==null?void 0:e.map(function(X,ue){return dt.default.createElement(WN,(0,Gp.__assign)({},X,{disabled:l,key:ue}))}),e&&r&&dt.default.createElement("div",{className:"w-full flex items-center justify-between py-5"},dt.default.createElement("hr",{className:"w-full bg-gray-400"}),dt.default.createElement("p",{className:"text-base font-medium leading-4 px-2.5 text-gray-400"},"OR"),dt.default.createElement("hr",{className:"w-full bg-gray-400"})),r&&dt.default.createElement(dt.default.Fragment,null,dt.default.createElement(OE.TextInput,{label:"Email",className:C,inputClassName:z,disabled:l,validation:W?"danger":"default",register:b("email",{required:!0,pattern:zN.regexpUtil.email})}),dt.default.createElement("div",{className:"font-medium tracking-wide text-danger-500 text-sm mt-1 ml-1"},"\u200D",W?"Please enter a valid email":""),dt.default.createElement(OE.TextInput,{label:"Password",type:"password",className:C,inputClassName:z,disabled:l,validation:W?"danger":"default",register:b("password",{required:!0})}),dt.default.createElement("div",{className:"font-medium tracking-wide text-danger-500 text-sm mt-1 ml-1"},"\u200D",te?"Please enter your password":""),dt.default.createElement("div",{className:"mt-6"},dt.default.createElement(xE.Button,{size:"auto",type:"primary",className:"font-bold leading-none border rounded h-12 text-lg",disabled:l,htmlType:"submit"},l?dt.default.createElement(BN.Spinner,{size:"xs",className:"m-auto"}):"Log In"))))))}hf.LoginPage=VN;var WN=function(t){var e=t.disabled,r=t.name,n=t.logo;return dt.default.createElement(xE.Button,{size:"auto",outline:!0,type:"secondary",disabled:e,className:"py-2.5 px-3 rounded-md flex items-center mt-3.5"},n,dt.default.createElement("p",{className:"text-base font-medium ml-4"},"Login With ",r))}});var df=Te(pt=>{"use strict";Object.defineProperty(pt,"__esModule",{value:!0});var kt=ut();(0,kt.__exportStar)(h2(),pt);(0,kt.__exportStar)(m2(),pt);(0,kt.__exportStar)(w2(),pt);(0,kt.__exportStar)(Fc(),pt);(0,kt.__exportStar)(k2(),pt);(0,kt.__exportStar)(Pc(),pt);(0,kt.__exportStar)(Ac(),pt);(0,kt.__exportStar)(nl(),pt);(0,kt.__exportStar)(dp(),pt);(0,kt.__exportStar)(N2(),pt);(0,kt.__exportStar)(cE(),pt);(0,kt.__exportStar)(fE(),pt);(0,kt.__exportStar)(Dc(),pt);(0,kt.__exportStar)(hE(),pt);(0,kt.__exportStar)(dE(),pt);(0,kt.__exportStar)(pE(),pt);(0,kt.__exportStar)(Zc(),pt);(0,kt.__exportStar)(gE(),pt);(0,kt.__exportStar)(wE(),pt);(0,kt.__exportStar)(SE(),pt);(0,kt.__exportStar)(TE(),pt)});var tg=At(Ce()),DE=At(Wv());var Qr=At(Ce());function ns(){return ns=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},ns.apply(this,arguments)}var ai;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(ai||(ai={}));var qv=function(t){return t};var $v="beforeunload";var L3="popstate";function Gv(t){t===void 0&&(t={});var e=t,r=e.window,n=r===void 0?document.defaultView:r,i=n.history;function o(){var z=n.location,S=z.pathname,W=z.search,te=z.hash,X=i.state||{};return[X.idx,qv({pathname:S,search:W,hash:te,state:X.usr||null,key:X.key||"default"})]}var s=null;function a(){if(s)w.call(s),s=null;else{var z=ai.Pop,S=o(),W=S[0],te=S[1];if(w.length){if(W!=null){var X=g-W;X&&(s={action:z,location:te,retry:function(){J(X*-1)}},J(X))}}else D(z)}}n.addEventListener(L3,a);var l=ai.Pop,h=o(),g=h[0],m=h[1],p=Jv(),w=Jv();g==null&&(g=0,i.replaceState(ns({},i.state,{idx:g}),""));function b(z){return typeof z=="string"?z:Yv(z)}function N(z,S){return S===void 0&&(S=null),qv(ns({pathname:m.pathname,hash:"",search:""},typeof z=="string"?Qd(z):z,{state:S,key:P3()}))}function O(z,S){return[{usr:z.state,key:z.key,idx:S},b(z)]}function I(z,S,W){return!w.length||(w.call({action:z,location:S,retry:W}),!1)}function D(z){l=z;var S=o();g=S[0],m=S[1],p.call({action:l,location:m})}function G(z,S){var W=ai.Push,te=N(z,S);function X(){G(z,S)}if(I(W,te,X)){var ue=O(te,g+1),ae=ue[0],ye=ue[1];try{i.pushState(ae,"",ye)}catch{n.location.assign(ye)}D(W)}}function q(z,S){var W=ai.Replace,te=N(z,S);function X(){q(z,S)}if(I(W,te,X)){var ue=O(te,g),ae=ue[0],ye=ue[1];i.replaceState(ae,"",ye),D(W)}}function J(z){i.go(z)}var C={get action(){return l},get location(){return m},createHref:b,push:G,replace:q,go:J,back:function(){J(-1)},forward:function(){J(1)},listen:function(S){return p.push(S)},block:function(S){var W=w.push(S);return w.length===1&&n.addEventListener($v,Hv),function(){W(),w.length||n.removeEventListener($v,Hv)}}};return C}function Hv(t){t.preventDefault(),t.returnValue=""}function Jv(){var t=[];return{get length(){return t.length},push:function(r){return t.push(r),function(){t=t.filter(function(n){return n!==r})}},call:function(r){t.forEach(function(n){return n&&n(r)})}}}function P3(){return Math.random().toString(36).substr(2,8)}function Yv(t){var e=t.pathname,r=e===void 0?"/":e,n=t.search,i=n===void 0?"":n,o=t.hash,s=o===void 0?"":o;return i&&i!=="?"&&(r+=i.charAt(0)==="?"?i:"?"+i),s&&s!=="#"&&(r+=s.charAt(0)==="#"?s:"#"+s),r}function Qd(t){var e={};if(t){var r=t.indexOf("#");r>=0&&(e.hash=t.substr(r),t=t.substr(0,r));var n=t.indexOf("?");n>=0&&(e.search=t.substr(n),t=t.substr(0,n)),t&&(e.pathname=t)}return e}var Ft=At(Ce());function M3(t,e){if(!t)throw new Error(e)}var j3=(0,Ft.createContext)(null),Kv=(0,Ft.createContext)(null);function Zv(t){let{basename:e="/",children:r=null,location:n,navigationType:i=ai.Pop,navigator:o,static:s=!1}=t;U3()&&M3(!1);let a=z3(e),l=(0,Ft.useMemo)(()=>({basename:a,navigator:o,static:s}),[a,o,s]);typeof n=="string"&&(n=Qd(n));let{pathname:h="/",search:g="",hash:m="",state:p=null,key:w="default"}=n,b=(0,Ft.useMemo)(()=>{let N=B3(h,a);return N==null?null:{pathname:N,search:g,hash:m,state:p,key:w}},[a,h,g,m,p,w]);return b==null?null:(0,Ft.createElement)(j3.Provider,{value:l},(0,Ft.createElement)(Kv.Provider,{children:r,value:{location:b,navigationType:i}}))}function U3(){return(0,Ft.useContext)(Kv)!=null}function B3(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let r=t.charAt(e.length);return r&&r!=="/"?null:t.slice(e.length)||"/"}var z3=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/");function Xv(t){let{basename:e,children:r,window:n}=t,i=(0,Qr.useRef)();i.current==null&&(i.current=Gv({window:n}));let o=i.current,[s,a]=(0,Qr.useState)({action:o.action,location:o.location});return(0,Qr.useLayoutEffect)(()=>o.listen(a),[o]),(0,Qr.createElement)(Zv,{basename:e,children:r,location:s.location,navigationType:s.action,navigator:o})}var eR=At(qb());var sr=At(Ce()),pf=At(df());var kE=At(Ce());Ba();var ho=class extends kE.Component{constructor(e={state:qr}){super(e);this.statemgr=qr;this.UPDATED=[];e.state&&(this.statemgr=e.state);let r=this.setState.bind(this);this.setState=n=>{this.UPDATED=Object.keys(n),r(n),typeof n=="object"&&qr.setState(n)},setTimeout(()=>{let n={};for(let i in this.state)this.statemgr.subscribeTrigger(i,o=>{if(typeof this=="undefined")this.statemgr.unsubscribeTrigger(i);else{let a=this.UPDATED.indexOf(i);a>-1?this.UPDATED.splice(a,1):r({[i]:o})}});Object.keys(n).length>0&&r(n)},.001)}};var po=At(Ce()),Yp=class extends po.Component{render(){return po.default.createElement("div",null,po.default.createElement("div",{style:{height:200,border:"1px solid black",borderRadius:5}},"User Card + Summary"),po.default.createElement("div",{style:{height:300,border:"1px solid black",borderRadius:5}},"Timeline"),po.default.createElement("div",{style:{height:300,border:"1px solid black",borderRadius:5}},"Scrollview of selected details/summaries"))}};var St=At(Ce());function NE(t=""){return`${t+Math.floor(Math.random()+Math.random()*Math.random()*1e16)}`}Ka();var Kp=class extends ho{constructor(){super(...arguments);this.id=NE("permissions");this.onclicked=()=>{let e=document.getElementById(this.id+"userid").value,r=document.getElementById(this.id+"name").value,n=document.getElementById(this.id+"perms"),i=n.options[n.selectedIndex].value,o=document.getElementById(this.id+"peers"),s=o.options[o.selectedIndex].value;s==="granting"?Ke.authorizeUser(Ke.currentUser,Ke.currentUser._id,"me",e,r,[n]):s==="asking"&&Ke.authorizeUser(Ke.currentUser,e,r,Ke.currentUser._id,"me",[i])}}componentDidMount(){return re(this,null,function*(){let e=yield Ke.getAuthorizations(),r=document.getElementById(this.id+"auths");e&&e.forEach(n=>{r==null||r.insertAdjacentHTML("beforeend",`
                    <tr>
                        <td>Permissions: ${n.authorizations.join(",")}</td>
                        <td>Authorized: ${n.authorizedName}</td>
                        <td>Authorizer: ${n.authorizerName}</td>
                        <td>Status: ${n.status}</td>
                    </tr>`)})})}render(){return St.default.createElement("div",null,St.default.createElement("div",{style:{height:400,border:"1px solid black",borderRadius:5}},"Groups and Authorizations",St.default.createElement("br",null),"User Id or Email",St.default.createElement("br",null),St.default.createElement("input",{id:this.id+"userid",type:"text",placeholder:"example@example.com"}),"Name",St.default.createElement("br",null),St.default.createElement("input",{id:this.id+"name",type:"text",placeholder:"example@example.com"}),St.default.createElement("br",null),"Permssions:",St.default.createElement("br",null),St.default.createElement("select",{id:this.id+"perms"},St.default.createElement("option",{value:"peer",selected:!0},"Peer (read/write/chat)"),St.default.createElement("option",{value:"control"},"Admin (hand over control)")),St.default.createElement("br",null),"Asking or Granting?",St.default.createElement("br",null),St.default.createElement("select",{id:this.id+"peers"},St.default.createElement("option",{value:"asking",selected:!0},"Asking (get access)"),St.default.createElement("option",{value:"granting"},"Granting (give access)")),St.default.createElement("br",null),St.default.createElement("button",{id:this.id+"submit"},"Submit")),St.default.createElement("div",{onClick:this.onclicked,style:{height:600,border:"1px solid black",borderRadius:5}},"Summaries of Connected Peers",St.default.createElement("table",{id:this.id+"auths"})))}};var Es=At(Ce()),Zp=class extends Es.Component{render(){return Es.default.createElement("div",null,Es.default.createElement("div",null,"Profile Deets + Editing"),Es.default.createElement("div",null,"More fine grained permissions and opt-in stuff"))}};var RE=At(df());Z0();Ba();var Xp=At(Ce());mc();Ka();mc();function IE(){return re(this,null,function*(){let t=yield qN(),e=yield $N(t.user,t.peer),r=yield(t.user,t.peer,Ke,void 0),n=yield HN(t.user,t.peer),i=yield JN(),o=yield GN(t.peer,n.chatroom,n.comment),s=yield YN(),a=yield KN(e.userauth),l=yield ZN(t.user,t.peer),h=yield XN(),g={users:t,auths:e,data:r,chatroomres:n,pnotes:i,replied:o,unotes:s,rejected:a,group:l,gauths:h};return console.log("results",g),g})}function qN(){return re(this,null,function*(){let t=yield yc(),e=yield Vb();return console.log("user",t,"peer",e),{user:t,peer:e}})}function $N(){return re(this,arguments,function*(t=so,e=ao){let r=yield Ke.authorizeUser(t,t._id,void 0,e._id,void 0,["peer"]),n=yield sn.authorizeUser(e,t._id,void 0,e._id,void 0,["peer"]);return console.log("user-owned auth:",r,`
peer-owned auth:`,n),console.log("auths",r,n),{userauth:r,peerauth:n}})}function HN(){return re(this,arguments,function*(t=so,e=ao){let r=Ke.getLocalData("chatroom"),n;r&&(r.length>0?n=r[0]:n=yield Ke.addChatroom(t,t._id,"this is the first comment",void 0,[e._id],!0));let i=yield Ke.addComment(t,n,n,t._id,"don't go there girlfrienddd"),o=yield Ke.addComment(t,n,i,t._id,"update: you did");return console.log("chatroom and comments",n,i,i),{chatroom:n,comment:i,comment2:o}})}function JN(){return re(this,null,function*(){if(yield sn.checkForNotifications())return yield sn.resolveNotifications()})}function GN(){return re(this,arguments,function*(t=ao,e,r){let n=yield Ke.addComment(t,e,r,t._id,"oh I went there");return console.log("new comment",n),n})}function YN(){return re(this,null,function*(){if(yield Ke.checkForNotifications())return yield sn.resolveNotifications()})}function KN(t){return re(this,null,function*(){if(t)return yield Ke.deleteAuthorization(t._id)})}function ZN(){return re(this,arguments,function*(t=so,e=ao){let r=yield sn.addGroup(e,"testgroup"+Math.floor(Math.random()*1e8),"this is a test",[e._id],[e._id],[t],!0);return console.log("new group",r),r})}function XN(){return re(this,null,function*(){yield Ke.setAuthorizationsByGroup(),yield sn.setAuthorizationsByGroup()})}var Qp=class extends ho{componentDidMount(){return re(this,null,function*(){let e=yield IE();console.log(e)})}render(){return Xp.default.createElement("div",null,Xp.default.createElement("div",null,"DEV TEST (see console -- Press F12)"))}};var QN=()=>sr.default.createElement("img",{src:"src/assets/myalyce.png",width:"100px",alt:"MyAlyce"}),AE=!0,eg=class extends ho{constructor(){super(...arguments);this.state={isLoggedIn:!1,navOpen:!1,route:"/"}}onLoginClick(e){Za(e.email,e.password).then(r=>re(this,null,function*(){let n=yield Xa(r);n&&(yield os(n))}))}onGoogleLoginClick(){Za("google").then(e=>re(this,null,function*(){let r=yield Xa(e);r&&(yield os(r))}))}setNavOpen(e){this.setState({navOpen:e})}render(){return console.log(this.state.route),sr.default.createElement("div",null,!this.state.isLoggedIn&&!AE&&sr.default.createElement(RE.Login,{useRegularLogin:!0,onLoginClick:this.onLoginClick,thirdPartyLogins:[{name:"google",logo:sr.default.createElement("img",{src:"src/assets/google.png",width:"50px"}),onClick:this.onGoogleLoginClick}]}),(this.state.isLoggedIn||AE)&&sr.default.createElement("div",null,sr.default.createElement(pf.NavDrawer,{fixed:"left",zIndex:102,isOpen:this.state.navOpen,brand:QN(),onBackdropClick:()=>this.setState({navOpen:!1}),menuItems:[{type:"action",icon:"D",onClick:()=>this.setState({route:"/dashboard",navOpen:!1}),title:"Dashboard"},{type:"action",icon:"P",onClick:()=>this.setState({route:"/peers",navOpen:!1}),title:"Peers & Groups"},{type:"action",icon:"S",onClick:()=>this.setState({route:"/settings",navOpen:!1}),title:"Profile Settings"},{type:"action",icon:"D",onClick:()=>this.setState({route:"/dev",navOpen:!1}),title:"DEV MODE"}]}),sr.default.createElement("div",{id:"view"},sr.default.createElement(pf.TopBar,{zIndex:0,onMenuExpand:()=>{let e=!this.state.navOpen;this.setState({navOpen:e})}}),sr.default.createElement("div",{id:"viewcontent"},sr.default.createElement("div",{id:"route"},(this.state.route.includes("dashboard")||this.state.route==="/"||this.state.route==="")&&sr.default.createElement(Yp,null),this.state.route.includes("peers")&&sr.default.createElement(Kp,null),this.state.route.includes("settings")&&sr.default.createElement(Zp,null),this.state.route.includes("dev")&&sr.default.createElement(Qp,null))))))}};var eI=!0;eI&&document.head.insertAdjacentHTML("beforeend",'<link rel="stylesheet" href="dist/app.css" type="text/css" />');DE.default.render(tg.default.createElement(Xv,null,tg.default.createElement(eg,null)),document.getElementById("react"));})();
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/
/*!
  Copyright (c) 2018 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
/**
 * React Router DOM v6.2.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */
/**
 * React Router v6.2.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */
/** @license React v0.20.2
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
/** @license React v17.0.2
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
/** @license React v17.0.2
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
//# sourceMappingURL=app.js.map
