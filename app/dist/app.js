(()=>{var ZO=Object.create;var Ml=Object.defineProperty;var XO=Object.getOwnPropertyDescriptor;var QO=Object.getOwnPropertyNames,$g=Object.getOwnPropertySymbols,e4=Object.getPrototypeOf,Gg=Object.prototype.hasOwnProperty,t4=Object.prototype.propertyIsEnumerable;var Jg=Math.pow,Hg=(t,e,r)=>e in t?Ml(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,jl=(t,e)=>{for(var r in e||(e={}))Gg.call(e,r)&&Hg(t,r,e[r]);if($g)for(var r of $g(e))t4.call(e,r)&&Hg(t,r,e[r]);return t};var r4=t=>Ml(t,"__esModule",{value:!0});var n4=(t=>typeof require!="undefined"?require:typeof Proxy!="undefined"?new Proxy(t,{get:(e,r)=>(typeof require!="undefined"?require:e)[r]}):t)(function(t){if(typeof require!="undefined")return require.apply(this,arguments);throw new Error('Dynamic require of "'+t+'" is not supported')});var mt=(t,e)=>()=>(t&&(e=t(t=0)),e);var Te=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var i4=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of QO(e))!Gg.call(t,i)&&(r||i!=="default")&&Ml(t,i,{get:()=>e[i],enumerable:!(n=XO(e,i))||n.enumerable});return t},Ft=(t,e)=>i4(r4(Ml(t!=null?ZO(e4(t)):{},"default",!e&&t&&t.__esModule?{get:()=>t.default,enumerable:!0}:{value:t,enumerable:!0})),t);var re=(t,e,r)=>new Promise((n,i)=>{var o=l=>{try{a(r.next(l))}catch(h){i(h)}},s=l=>{try{a(r.throw(l))}catch(h){i(h)}},a=l=>l.done?n(l.value):Promise.resolve(l.value).then(o,s);a((r=r.apply(t,e)).next())});var eh=Te((xA,Kg)=>{"use strict";var Yg=Object.getOwnPropertySymbols,o4=Object.prototype.hasOwnProperty,s4=Object.prototype.propertyIsEnumerable;function a4(t){if(t==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}function l4(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de",Object.getOwnPropertyNames(t)[0]==="5")return!1;for(var e={},r=0;r<10;r++)e["_"+String.fromCharCode(r)]=r;var n=Object.getOwnPropertyNames(e).map(function(o){return e[o]});if(n.join("")!=="0123456789")return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach(function(o){i[o]=o}),Object.keys(Object.assign({},i)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}Kg.exports=l4()?Object.assign:function(t,e){for(var r,n=a4(t),i,o=1;o<arguments.length;o++){r=Object(arguments[o]);for(var s in r)o4.call(r,s)&&(n[s]=r[s]);if(Yg){i=Yg(r);for(var a=0;a<i.length;a++)s4.call(r,i[a])&&(n[i[a]]=r[i[a]])}}return n}});var hm=Te(Be=>{"use strict";var rh=eh(),Fo=60103,Qg=60106;Be.Fragment=60107;Be.StrictMode=60108;Be.Profiler=60114;var em=60109,tm=60110,rm=60112;Be.Suspense=60113;var nm=60115,im=60116;typeof Symbol=="function"&&Symbol.for&&(Wr=Symbol.for,Fo=Wr("react.element"),Qg=Wr("react.portal"),Be.Fragment=Wr("react.fragment"),Be.StrictMode=Wr("react.strict_mode"),Be.Profiler=Wr("react.profiler"),em=Wr("react.provider"),tm=Wr("react.context"),rm=Wr("react.forward_ref"),Be.Suspense=Wr("react.suspense"),nm=Wr("react.memo"),im=Wr("react.lazy"));var Wr,Zg=typeof Symbol=="function"&&Symbol.iterator;function u4(t){return t===null||typeof t!="object"?null:(t=Zg&&t[Zg]||t["@@iterator"],typeof t=="function"?t:null)}function Ks(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var om={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},sm={};function Lo(t,e,r){this.props=t,this.context=e,this.refs=sm,this.updater=r||om}Lo.prototype.isReactComponent={};Lo.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error(Ks(85));this.updater.enqueueSetState(this,t,e,"setState")};Lo.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function am(){}am.prototype=Lo.prototype;function nh(t,e,r){this.props=t,this.context=e,this.refs=sm,this.updater=r||om}var ih=nh.prototype=new am;ih.constructor=nh;rh(ih,Lo.prototype);ih.isPureReactComponent=!0;var oh={current:null},lm=Object.prototype.hasOwnProperty,um={key:!0,ref:!0,__self:!0,__source:!0};function cm(t,e,r){var n,i={},o=null,s=null;if(e!=null)for(n in e.ref!==void 0&&(s=e.ref),e.key!==void 0&&(o=""+e.key),e)lm.call(e,n)&&!um.hasOwnProperty(n)&&(i[n]=e[n]);var a=arguments.length-2;if(a===1)i.children=r;else if(1<a){for(var l=Array(a),h=0;h<a;h++)l[h]=arguments[h+2];i.children=l}if(t&&t.defaultProps)for(n in a=t.defaultProps,a)i[n]===void 0&&(i[n]=a[n]);return{$$typeof:Fo,type:t,key:o,ref:s,props:i,_owner:oh.current}}function c4(t,e){return{$$typeof:Fo,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function sh(t){return typeof t=="object"&&t!==null&&t.$$typeof===Fo}function f4(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var Xg=/\/+/g;function th(t,e){return typeof t=="object"&&t!==null&&t.key!=null?f4(""+t.key):e.toString(36)}function Bl(t,e,r,n,i){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var s=!1;if(t===null)s=!0;else switch(o){case"string":case"number":s=!0;break;case"object":switch(t.$$typeof){case Fo:case Qg:s=!0}}if(s)return s=t,i=i(s),t=n===""?"."+th(s,0):n,Array.isArray(i)?(r="",t!=null&&(r=t.replace(Xg,"$&/")+"/"),Bl(i,e,r,"",function(h){return h})):i!=null&&(sh(i)&&(i=c4(i,r+(!i.key||s&&s.key===i.key?"":(""+i.key).replace(Xg,"$&/")+"/")+t)),e.push(i)),1;if(s=0,n=n===""?".":n+":",Array.isArray(t))for(var a=0;a<t.length;a++){o=t[a];var l=n+th(o,a);s+=Bl(o,e,r,l,i)}else if(l=u4(t),typeof l=="function")for(t=l.call(t),a=0;!(o=t.next()).done;)o=o.value,l=n+th(o,a++),s+=Bl(o,e,r,l,i);else if(o==="object")throw e=""+t,Error(Ks(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e));return s}function Ul(t,e,r){if(t==null)return t;var n=[],i=0;return Bl(t,n,"","",function(o){return e.call(r,o,i++)}),n}function h4(t){if(t._status===-1){var e=t._result;e=e(),t._status=0,t._result=e,e.then(function(r){t._status===0&&(r=r.default,t._status=1,t._result=r)},function(r){t._status===0&&(t._status=2,t._result=r)})}if(t._status===1)return t._result;throw t._result}var fm={current:null};function Pn(){var t=fm.current;if(t===null)throw Error(Ks(321));return t}var d4={ReactCurrentDispatcher:fm,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:oh,IsSomeRendererActing:{current:!1},assign:rh};Be.Children={map:Ul,forEach:function(t,e,r){Ul(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return Ul(t,function(){e++}),e},toArray:function(t){return Ul(t,function(e){return e})||[]},only:function(t){if(!sh(t))throw Error(Ks(143));return t}};Be.Component=Lo;Be.PureComponent=nh;Be.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=d4;Be.cloneElement=function(t,e,r){if(t==null)throw Error(Ks(267,t));var n=rh({},t.props),i=t.key,o=t.ref,s=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,s=oh.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)lm.call(e,l)&&!um.hasOwnProperty(l)&&(n[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)n.children=r;else if(1<l){a=Array(l);for(var h=0;h<l;h++)a[h]=arguments[h+2];n.children=a}return{$$typeof:Fo,type:t.type,key:i,ref:o,props:n,_owner:s}};Be.createContext=function(t,e){return e===void 0&&(e=null),t={$$typeof:tm,_calculateChangedBits:e,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null},t.Provider={$$typeof:em,_context:t},t.Consumer=t};Be.createElement=cm;Be.createFactory=function(t){var e=cm.bind(null,t);return e.type=t,e};Be.createRef=function(){return{current:null}};Be.forwardRef=function(t){return{$$typeof:rm,render:t}};Be.isValidElement=sh;Be.lazy=function(t){return{$$typeof:im,_payload:{_status:-1,_result:t},_init:h4}};Be.memo=function(t,e){return{$$typeof:nm,type:t,compare:e===void 0?null:e}};Be.useCallback=function(t,e){return Pn().useCallback(t,e)};Be.useContext=function(t,e){return Pn().useContext(t,e)};Be.useDebugValue=function(){};Be.useEffect=function(t,e){return Pn().useEffect(t,e)};Be.useImperativeHandle=function(t,e,r){return Pn().useImperativeHandle(t,e,r)};Be.useLayoutEffect=function(t,e){return Pn().useLayoutEffect(t,e)};Be.useMemo=function(t,e){return Pn().useMemo(t,e)};Be.useReducer=function(t,e,r){return Pn().useReducer(t,e,r)};Be.useRef=function(t){return Pn().useRef(t)};Be.useState=function(t){return Pn().useState(t)};Be.version="17.0.2"});var Pe=Te((IA,dm)=>{"use strict";dm.exports=hm()});var wm=Te(Ve=>{"use strict";var Mo,Qs,ql,dh;typeof performance=="object"&&typeof performance.now=="function"?(pm=performance,Ve.unstable_now=function(){return pm.now()}):(ah=Date,ym=ah.now(),Ve.unstable_now=function(){return ah.now()-ym});var pm,ah,ym;typeof window>"u"||typeof MessageChannel!="function"?(Po=null,lh=null,uh=function(){if(Po!==null)try{var t=Ve.unstable_now();Po(!0,t),Po=null}catch(e){throw setTimeout(uh,0),e}},Mo=function(t){Po!==null?setTimeout(Mo,0,t):(Po=t,setTimeout(uh,0))},Qs=function(t,e){lh=setTimeout(t,e)},ql=function(){clearTimeout(lh)},Ve.unstable_shouldYield=function(){return!1},dh=Ve.unstable_forceFrameRate=function(){}):(gm=window.setTimeout,mm=window.clearTimeout,typeof console<"u"&&(vm=window.cancelAnimationFrame,typeof window.requestAnimationFrame!="function"&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),typeof vm!="function"&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")),Zs=!1,Xs=null,zl=-1,ch=5,fh=0,Ve.unstable_shouldYield=function(){return Ve.unstable_now()>=fh},dh=function(){},Ve.unstable_forceFrameRate=function(t){0>t||125<t?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ch=0<t?Math.floor(1e3/t):5},hh=new MessageChannel,Vl=hh.port2,hh.port1.onmessage=function(){if(Xs!==null){var t=Ve.unstable_now();fh=t+ch;try{Xs(!0,t)?Vl.postMessage(null):(Zs=!1,Xs=null)}catch(e){throw Vl.postMessage(null),e}}else Zs=!1},Mo=function(t){Xs=t,Zs||(Zs=!0,Vl.postMessage(null))},Qs=function(t,e){zl=gm(function(){t(Ve.unstable_now())},e)},ql=function(){mm(zl),zl=-1});var Po,lh,uh,gm,mm,vm,Zs,Xs,zl,ch,fh,hh,Vl;function ph(t,e){var r=t.length;t.push(e);e:for(;;){var n=r-1>>>1,i=t[n];if(i!==void 0&&0<Wl(i,e))t[n]=e,t[r]=i,r=n;else break e}}function nn(t){return t=t[0],t===void 0?null:t}function $l(t){var e=t[0];if(e!==void 0){var r=t.pop();if(r!==e){t[0]=r;e:for(var n=0,i=t.length;n<i;){var o=2*(n+1)-1,s=t[o],a=o+1,l=t[a];if(s!==void 0&&0>Wl(s,r))l!==void 0&&0>Wl(l,s)?(t[n]=l,t[a]=r,n=a):(t[n]=s,t[o]=r,n=o);else if(l!==void 0&&0>Wl(l,r))t[n]=l,t[a]=r,n=a;else break e}}return e}return null}function Wl(t,e){var r=t.sortIndex-e.sortIndex;return r!==0?r:t.id-e.id}var bn=[],Jn=[],p4=1,qr=null,rr=3,Hl=!1,Wi=!1,ea=!1;function yh(t){for(var e=nn(Jn);e!==null;){if(e.callback===null)$l(Jn);else if(e.startTime<=t)$l(Jn),e.sortIndex=e.expirationTime,ph(bn,e);else break;e=nn(Jn)}}function gh(t){if(ea=!1,yh(t),!Wi)if(nn(bn)!==null)Wi=!0,Mo(mh);else{var e=nn(Jn);e!==null&&Qs(gh,e.startTime-t)}}function mh(t,e){Wi=!1,ea&&(ea=!1,ql()),Hl=!0;var r=rr;try{for(yh(e),qr=nn(bn);qr!==null&&(!(qr.expirationTime>e)||t&&!Ve.unstable_shouldYield());){var n=qr.callback;if(typeof n=="function"){qr.callback=null,rr=qr.priorityLevel;var i=n(qr.expirationTime<=e);e=Ve.unstable_now(),typeof i=="function"?qr.callback=i:qr===nn(bn)&&$l(bn),yh(e)}else $l(bn);qr=nn(bn)}if(qr!==null)var o=!0;else{var s=nn(Jn);s!==null&&Qs(gh,s.startTime-e),o=!1}return o}finally{qr=null,rr=r,Hl=!1}}var y4=dh;Ve.unstable_IdlePriority=5;Ve.unstable_ImmediatePriority=1;Ve.unstable_LowPriority=4;Ve.unstable_NormalPriority=3;Ve.unstable_Profiling=null;Ve.unstable_UserBlockingPriority=2;Ve.unstable_cancelCallback=function(t){t.callback=null};Ve.unstable_continueExecution=function(){Wi||Hl||(Wi=!0,Mo(mh))};Ve.unstable_getCurrentPriorityLevel=function(){return rr};Ve.unstable_getFirstCallbackNode=function(){return nn(bn)};Ve.unstable_next=function(t){switch(rr){case 1:case 2:case 3:var e=3;break;default:e=rr}var r=rr;rr=e;try{return t()}finally{rr=r}};Ve.unstable_pauseExecution=function(){};Ve.unstable_requestPaint=y4;Ve.unstable_runWithPriority=function(t,e){switch(t){case 1:case 2:case 3:case 4:case 5:break;default:t=3}var r=rr;rr=t;try{return e()}finally{rr=r}};Ve.unstable_scheduleCallback=function(t,e,r){var n=Ve.unstable_now();switch(typeof r=="object"&&r!==null?(r=r.delay,r=typeof r=="number"&&0<r?n+r:n):r=n,t){case 1:var i=-1;break;case 2:i=250;break;case 5:i=1073741823;break;case 4:i=1e4;break;default:i=5e3}return i=r+i,t={id:p4++,callback:e,priorityLevel:t,startTime:r,expirationTime:i,sortIndex:-1},r>n?(t.sortIndex=r,ph(Jn,t),nn(bn)===null&&t===nn(Jn)&&(ea?ql():ea=!0,Qs(gh,r-n))):(t.sortIndex=i,ph(bn,t),Wi||Hl||(Wi=!0,Mo(mh))),t};Ve.unstable_wrapCallback=function(t){var e=rr;return function(){var r=rr;rr=e;try{return t.apply(this,arguments)}finally{rr=r}}}});var Sm=Te((AA,_m)=>{"use strict";_m.exports=wm()});var lw=Te(Kr=>{"use strict";var Uu=Pe(),ut=eh(),Ut=Sm();function me(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!Uu)throw Error(me(227));var F1=new Set,Aa={};function eo(t,e){is(t,e),is(t+"Capture",e)}function is(t,e){for(Aa[t]=e,t=0;t<e.length;t++)F1.add(e[t])}var Vn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),g4=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,bm=Object.prototype.hasOwnProperty,Em={},Om={};function m4(t){return bm.call(Om,t)?!0:bm.call(Em,t)?!1:g4.test(t)?Om[t]=!0:(Em[t]=!0,!1)}function v4(t,e,r,n){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function w4(t,e,r,n){if(e===null||typeof e>"u"||v4(t,e,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function ur(t,e,r,n,i,o,s){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=s}var Zt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Zt[t]=new ur(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Zt[e]=new ur(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Zt[t]=new ur(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Zt[t]=new ur(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Zt[t]=new ur(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Zt[t]=new ur(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Zt[t]=new ur(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Zt[t]=new ur(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Zt[t]=new ur(t,5,!1,t.toLowerCase(),null,!1,!1)});var xd=/[\-:]([a-z])/g;function kd(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(xd,kd);Zt[e]=new ur(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(xd,kd);Zt[e]=new ur(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(xd,kd);Zt[e]=new ur(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Zt[t]=new ur(t,1,!1,t.toLowerCase(),null,!1,!1)});Zt.xlinkHref=new ur("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Zt[t]=new ur(t,1,!1,t.toLowerCase(),null,!0,!0)});function Id(t,e,r,n){var i=Zt.hasOwnProperty(e)?Zt[e]:null,o=i!==null?i.type===0:n?!1:!(!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N");o||(w4(e,r,i,n)&&(r=null),n||i===null?m4(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):i.mustUseProperty?t[i.propertyName]=r===null?i.type===3?!1:"":r:(e=i.attributeName,n=i.attributeNamespace,r===null?t.removeAttribute(e):(i=i.type,r=i===3||i===4&&r===!0?"":""+r,n?t.setAttributeNS(n,e,r):t.setAttribute(e,r))))}var to=Uu.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,da=60103,$i=60106,Kn=60107,Nd=60108,va=60114,Ad=60109,Dd=60110,Bu=60112,wa=60113,gu=60120,zu=60115,Rd=60116,Cd=60121,Fd=60128,L1=60129,Ld=60130,Bh=60131;typeof Symbol=="function"&&Symbol.for&&(Pt=Symbol.for,da=Pt("react.element"),$i=Pt("react.portal"),Kn=Pt("react.fragment"),Nd=Pt("react.strict_mode"),va=Pt("react.profiler"),Ad=Pt("react.provider"),Dd=Pt("react.context"),Bu=Pt("react.forward_ref"),wa=Pt("react.suspense"),gu=Pt("react.suspense_list"),zu=Pt("react.memo"),Rd=Pt("react.lazy"),Cd=Pt("react.block"),Pt("react.scope"),Fd=Pt("react.opaque.id"),L1=Pt("react.debug_trace_mode"),Ld=Pt("react.offscreen"),Bh=Pt("react.legacy_hidden"));var Pt,Tm=typeof Symbol=="function"&&Symbol.iterator;function ta(t){return t===null||typeof t!="object"?null:(t=Tm&&t[Tm]||t["@@iterator"],typeof t=="function"?t:null)}var vh;function pa(t){if(vh===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);vh=e&&e[1]||""}return`
`+vh+t}var wh=!1;function Gl(t,e){if(!t||wh)return"";wh=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(l){var n=l}Reflect.construct(t,[],e)}else{try{e.call()}catch(l){n=l}t.call(e.prototype)}else{try{throw Error()}catch(l){n=l}t()}}catch(l){if(l&&n&&typeof l.stack=="string"){for(var i=l.stack.split(`
`),o=n.stack.split(`
`),s=i.length-1,a=o.length-1;1<=s&&0<=a&&i[s]!==o[a];)a--;for(;1<=s&&0<=a;s--,a--)if(i[s]!==o[a]){if(s!==1||a!==1)do if(s--,a--,0>a||i[s]!==o[a])return`
`+i[s].replace(" at new "," at ");while(1<=s&&0<=a);break}}}finally{wh=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?pa(t):""}function _4(t){switch(t.tag){case 5:return pa(t.type);case 16:return pa("Lazy");case 13:return pa("Suspense");case 19:return pa("SuspenseList");case 0:case 2:case 15:return t=Gl(t.type,!1),t;case 11:return t=Gl(t.type.render,!1),t;case 22:return t=Gl(t.type._render,!1),t;case 1:return t=Gl(t.type,!0),t;default:return""}}function Jo(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Kn:return"Fragment";case $i:return"Portal";case va:return"Profiler";case Nd:return"StrictMode";case wa:return"Suspense";case gu:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Dd:return(t.displayName||"Context")+".Consumer";case Ad:return(t._context.displayName||"Context")+".Provider";case Bu:var e=t.render;return e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case zu:return Jo(t.type);case Cd:return Jo(t._render);case Rd:e=t._payload,t=t._init;try{return Jo(t(e))}catch{}}return null}function li(t){switch(typeof t){case"boolean":case"number":case"object":case"string":case"undefined":return t;default:return""}}function P1(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function S4(t){var e=P1(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var i=r.get,o=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(s){n=""+s,o.call(this,s)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(s){n=""+s},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Jl(t){t._valueTracker||(t._valueTracker=S4(t))}function M1(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=P1(t)?t.checked?"true":"false":t.value),t=n,t!==r?(e.setValue(t),!0):!1}function mu(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function zh(t,e){var r=e.checked;return ut({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function xm(t,e){var r=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;r=li(e.value!=null?e.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function j1(t,e){e=e.checked,e!=null&&Id(t,"checked",e,!1)}function Vh(t,e){j1(t,e);var r=li(e.value),n=e.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Wh(t,e.type,r):e.hasOwnProperty("defaultValue")&&Wh(t,e.type,li(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function km(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function Wh(t,e,r){(e!=="number"||mu(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}function b4(t){var e="";return Uu.Children.forEach(t,function(r){r!=null&&(e+=r)}),e}function qh(t,e){return t=ut({children:void 0},e),(e=b4(e.children))&&(t.children=e),t}function Yo(t,e,r,n){if(t=t.options,e){e={};for(var i=0;i<r.length;i++)e["$"+r[i]]=!0;for(r=0;r<t.length;r++)i=e.hasOwnProperty("$"+t[r].value),t[r].selected!==i&&(t[r].selected=i),i&&n&&(t[r].defaultSelected=!0)}else{for(r=""+li(r),e=null,i=0;i<t.length;i++){if(t[i].value===r){t[i].selected=!0,n&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function $h(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(me(91));return ut({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Im(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(me(92));if(Array.isArray(r)){if(!(1>=r.length))throw Error(me(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:li(r)}}function U1(t,e){var r=li(e.value),n=li(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function Nm(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}var Hh={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function B1(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Gh(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?B1(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Yl,z1=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,n,i){MSApp.execUnsafeLocalFunction(function(){return t(e,r,n,i)})}:t}(function(t,e){if(t.namespaceURI!==Hh.svg||"innerHTML"in t)t.innerHTML=e;else{for(Yl=Yl||document.createElement("div"),Yl.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Yl.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Da(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var _a={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},E4=["Webkit","ms","Moz","O"];Object.keys(_a).forEach(function(t){E4.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),_a[e]=_a[t]})});function V1(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||_a.hasOwnProperty(t)&&_a[t]?(""+e).trim():e+"px"}function W1(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var n=r.indexOf("--")===0,i=V1(r,e[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,i):t[r]=i}}var O4=ut({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Jh(t,e){if(e){if(O4[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(me(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(me(60));if(!(typeof e.dangerouslySetInnerHTML=="object"&&"__html"in e.dangerouslySetInnerHTML))throw Error(me(61))}if(e.style!=null&&typeof e.style!="object")throw Error(me(62))}}function Yh(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function Pd(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Kh=null,Ko=null,Zo=null;function Am(t){if(t=$a(t)){if(typeof Kh!="function")throw Error(me(280));var e=t.stateNode;e&&(e=Gu(e),Kh(t.stateNode,t.type,e))}}function q1(t){Ko?Zo?Zo.push(t):Zo=[t]:Ko=t}function $1(){if(Ko){var t=Ko,e=Zo;if(Zo=Ko=null,Am(t),e)for(t=0;t<e.length;t++)Am(e[t])}}function Md(t,e){return t(e)}function H1(t,e,r,n,i){return t(e,r,n,i)}function jd(){}var G1=Md,Hi=!1,_h=!1;function Ud(){(Ko!==null||Zo!==null)&&(jd(),$1())}function T4(t,e,r){if(_h)return t(e,r);_h=!0;try{return G1(t,e,r)}finally{_h=!1,Ud()}}function Ra(t,e){var r=t.stateNode;if(r===null)return null;var n=Gu(r);if(n===null)return null;r=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(me(231,e,typeof r));return r}var Zh=!1;if(Vn)try{jo={},Object.defineProperty(jo,"passive",{get:function(){Zh=!0}}),window.addEventListener("test",jo,jo),window.removeEventListener("test",jo,jo)}catch{Zh=!1}var jo;function x4(t,e,r,n,i,o,s,a,l){var h=Array.prototype.slice.call(arguments,3);try{e.apply(r,h)}catch(p){this.onError(p)}}var Sa=!1,vu=null,wu=!1,Xh=null,k4={onError:function(t){Sa=!0,vu=t}};function I4(t,e,r,n,i,o,s,a,l){Sa=!1,vu=null,x4.apply(k4,arguments)}function N4(t,e,r,n,i,o,s,a,l){if(I4.apply(this,arguments),Sa){if(Sa){var h=vu;Sa=!1,vu=null}else throw Error(me(198));wu||(wu=!0,Xh=h)}}function ro(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,(e.flags&1026)!==0&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function J1(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Dm(t){if(ro(t)!==t)throw Error(me(188))}function A4(t){var e=t.alternate;if(!e){if(e=ro(t),e===null)throw Error(me(188));return e!==t?null:t}for(var r=t,n=e;;){var i=r.return;if(i===null)break;var o=i.alternate;if(o===null){if(n=i.return,n!==null){r=n;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===r)return Dm(i),t;if(o===n)return Dm(i),e;o=o.sibling}throw Error(me(188))}if(r.return!==n.return)r=i,n=o;else{for(var s=!1,a=i.child;a;){if(a===r){s=!0,r=i,n=o;break}if(a===n){s=!0,n=i,r=o;break}a=a.sibling}if(!s){for(a=o.child;a;){if(a===r){s=!0,r=o,n=i;break}if(a===n){s=!0,n=o,r=i;break}a=a.sibling}if(!s)throw Error(me(189))}}if(r.alternate!==n)throw Error(me(190))}if(r.tag!==3)throw Error(me(188));return r.stateNode.current===r?t:e}function Y1(t){if(t=A4(t),!t)return null;for(var e=t;;){if(e.tag===5||e.tag===6)return e;if(e.child)e.child.return=e,e=e.child;else{if(e===t)break;for(;!e.sibling;){if(!e.return||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}}return null}function Rm(t,e){for(var r=t.alternate;e!==null;){if(e===t||e===r)return!0;e=e.return}return!1}var K1,Bd,Z1,X1,Qh=!1,En=[],ei=null,ti=null,ri=null,Ca=new Map,Fa=new Map,ra=[],Cm="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ed(t,e,r,n,i){return{blockedOn:t,domEventName:e,eventSystemFlags:r|16,nativeEvent:i,targetContainers:[n]}}function Fm(t,e){switch(t){case"focusin":case"focusout":ei=null;break;case"dragenter":case"dragleave":ti=null;break;case"mouseover":case"mouseout":ri=null;break;case"pointerover":case"pointerout":Ca.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Fa.delete(e.pointerId)}}function na(t,e,r,n,i,o){return t===null||t.nativeEvent!==o?(t=ed(e,r,n,i,o),e!==null&&(e=$a(e),e!==null&&Bd(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function D4(t,e,r,n,i){switch(e){case"focusin":return ei=na(ei,t,e,r,n,i),!0;case"dragenter":return ti=na(ti,t,e,r,n,i),!0;case"mouseover":return ri=na(ri,t,e,r,n,i),!0;case"pointerover":var o=i.pointerId;return Ca.set(o,na(Ca.get(o)||null,t,e,r,n,i)),!0;case"gotpointercapture":return o=i.pointerId,Fa.set(o,na(Fa.get(o)||null,t,e,r,n,i)),!0}return!1}function R4(t){var e=Gi(t.target);if(e!==null){var r=ro(e);if(r!==null){if(e=r.tag,e===13){if(e=J1(r),e!==null){t.blockedOn=e,X1(t.lanePriority,function(){Ut.unstable_runWithPriority(t.priority,function(){Z1(r)})});return}}else if(e===3&&r.stateNode.hydrate){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function su(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=qd(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r!==null)return e=$a(r),e!==null&&Bd(e),t.blockedOn=r,!1;e.shift()}return!0}function Lm(t,e,r){su(t)&&r.delete(e)}function C4(){for(Qh=!1;0<En.length;){var t=En[0];if(t.blockedOn!==null){t=$a(t.blockedOn),t!==null&&K1(t);break}for(var e=t.targetContainers;0<e.length;){var r=qd(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r!==null){t.blockedOn=r;break}e.shift()}t.blockedOn===null&&En.shift()}ei!==null&&su(ei)&&(ei=null),ti!==null&&su(ti)&&(ti=null),ri!==null&&su(ri)&&(ri=null),Ca.forEach(Lm),Fa.forEach(Lm)}function ia(t,e){t.blockedOn===e&&(t.blockedOn=null,Qh||(Qh=!0,Ut.unstable_scheduleCallback(Ut.unstable_NormalPriority,C4)))}function Q1(t){function e(i){return ia(i,t)}if(0<En.length){ia(En[0],t);for(var r=1;r<En.length;r++){var n=En[r];n.blockedOn===t&&(n.blockedOn=null)}}for(ei!==null&&ia(ei,t),ti!==null&&ia(ti,t),ri!==null&&ia(ri,t),Ca.forEach(e),Fa.forEach(e),r=0;r<ra.length;r++)n=ra[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<ra.length&&(r=ra[0],r.blockedOn===null);)R4(r),r.blockedOn===null&&ra.shift()}function Kl(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var Vo={animationend:Kl("Animation","AnimationEnd"),animationiteration:Kl("Animation","AnimationIteration"),animationstart:Kl("Animation","AnimationStart"),transitionend:Kl("Transition","TransitionEnd")},Sh={},tv={};Vn&&(tv=document.createElement("div").style,"AnimationEvent"in window||(delete Vo.animationend.animation,delete Vo.animationiteration.animation,delete Vo.animationstart.animation),"TransitionEvent"in window||delete Vo.transitionend.transition);function Vu(t){if(Sh[t])return Sh[t];if(!Vo[t])return t;var e=Vo[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in tv)return Sh[t]=e[r];return t}var rv=Vu("animationend"),nv=Vu("animationiteration"),iv=Vu("animationstart"),ov=Vu("transitionend"),sv=new Map,zd=new Map,F4=["abort","abort",rv,"animationEnd",nv,"animationIteration",iv,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",ov,"transitionEnd","waiting","waiting"];function Vd(t,e){for(var r=0;r<t.length;r+=2){var n=t[r],i=t[r+1];i="on"+(i[0].toUpperCase()+i.slice(1)),zd.set(n,e),sv.set(n,i),eo(i,[n])}}var L4=Ut.unstable_now;L4();var tt=8;function Bo(t){if((1&t)!==0)return tt=15,1;if((2&t)!==0)return tt=14,2;if((4&t)!==0)return tt=13,4;var e=24&t;return e!==0?(tt=12,e):(t&32)!==0?(tt=11,32):(e=192&t,e!==0?(tt=10,e):(t&256)!==0?(tt=9,256):(e=3584&t,e!==0?(tt=8,e):(t&4096)!==0?(tt=7,4096):(e=4186112&t,e!==0?(tt=6,e):(e=62914560&t,e!==0?(tt=5,e):t&67108864?(tt=4,67108864):(t&134217728)!==0?(tt=3,134217728):(e=805306368&t,e!==0?(tt=2,e):(1073741824&t)!==0?(tt=1,1073741824):(tt=8,t))))))}function P4(t){switch(t){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}function M4(t){switch(t){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(me(358,t))}}function La(t,e){var r=t.pendingLanes;if(r===0)return tt=0;var n=0,i=0,o=t.expiredLanes,s=t.suspendedLanes,a=t.pingedLanes;if(o!==0)n=o,i=tt=15;else if(o=r&134217727,o!==0){var l=o&~s;l!==0?(n=Bo(l),i=tt):(a&=o,a!==0&&(n=Bo(a),i=tt))}else o=r&~s,o!==0?(n=Bo(o),i=tt):a!==0&&(n=Bo(a),i=tt);if(n===0)return 0;if(n=31-ui(n),n=r&((0>n?0:1<<n)<<1)-1,e!==0&&e!==n&&(e&s)===0){if(Bo(e),i<=tt)return e;tt=i}if(e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)r=31-ui(e),i=1<<r,n|=t[r],e&=~i;return n}function av(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function _u(t,e){switch(t){case 15:return 1;case 14:return 2;case 12:return t=zo(24&~e),t===0?_u(10,e):t;case 10:return t=zo(192&~e),t===0?_u(8,e):t;case 8:return t=zo(3584&~e),t===0&&(t=zo(4186112&~e),t===0&&(t=512)),t;case 2:return e=zo(805306368&~e),e===0&&(e=268435456),e}throw Error(me(358,t))}function zo(t){return t&-t}function bh(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function Wu(t,e,r){t.pendingLanes|=e;var n=e-1;t.suspendedLanes&=n,t.pingedLanes&=n,t=t.eventTimes,e=31-ui(e),t[e]=r}var ui=Math.clz32?Math.clz32:B4,j4=Math.log,U4=Math.LN2;function B4(t){return t===0?32:31-(j4(t)/U4|0)|0}var z4=Ut.unstable_UserBlockingPriority,V4=Ut.unstable_runWithPriority,au=!0;function W4(t,e,r,n){Hi||jd();var i=Wd,o=Hi;Hi=!0;try{H1(i,t,e,r,n)}finally{(Hi=o)||Ud()}}function q4(t,e,r,n){V4(z4,Wd.bind(null,t,e,r,n))}function Wd(t,e,r,n){if(au){var i;if((i=(e&4)===0)&&0<En.length&&-1<Cm.indexOf(t))t=ed(null,t,e,r,n),En.push(t);else{var o=qd(t,e,r,n);if(o===null)i&&Fm(t,n);else{if(i){if(-1<Cm.indexOf(t)){t=ed(o,t,e,r,n),En.push(t);return}if(D4(o,t,e,r,n))return;Fm(t,n)}_v(t,e,n,null,r)}}}}function qd(t,e,r,n){var i=Pd(n);if(i=Gi(i),i!==null){var o=ro(i);if(o===null)i=null;else{var s=o.tag;if(s===13){if(i=J1(o),i!==null)return i;i=null}else if(s===3){if(o.stateNode.hydrate)return o.tag===3?o.stateNode.containerInfo:null;i=null}else o!==i&&(i=null)}}return _v(t,e,n,i,r),null}var Zn=null,$d=null,lu=null;function lv(){if(lu)return lu;var t,e=$d,r=e.length,n,i="value"in Zn?Zn.value:Zn.textContent,o=i.length;for(t=0;t<r&&e[t]===i[t];t++);var s=r-t;for(n=1;n<=s&&e[r-n]===i[o-n];n++);return lu=i.slice(t,1<n?1-n:void 0)}function uu(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Zl(){return!0}function Pm(){return!1}function Fr(t){function e(r,n,i,o,s){this._reactName=r,this._targetInst=i,this.type=n,this.nativeEvent=o,this.target=s,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(r=t[a],this[a]=r?r(o):o[a]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?Zl:Pm,this.isPropagationStopped=Pm,this}return ut(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Zl)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Zl)},persist:function(){},isPersistent:Zl}),e}var ls={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Hd=Fr(ls),qa=ut({},ls,{view:0,detail:0}),$4=Fr(qa),Eh,Oh,oa,qu=ut({},qa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Gd,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==oa&&(oa&&t.type==="mousemove"?(Eh=t.screenX-oa.screenX,Oh=t.screenY-oa.screenY):Oh=Eh=0,oa=t),Eh)},movementY:function(t){return"movementY"in t?t.movementY:Oh}}),Mm=Fr(qu),H4=ut({},qu,{dataTransfer:0}),G4=Fr(H4),J4=ut({},qa,{relatedTarget:0}),Th=Fr(J4),Y4=ut({},ls,{animationName:0,elapsedTime:0,pseudoElement:0}),K4=Fr(Y4),Z4=ut({},ls,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),X4=Fr(Z4),Q4=ut({},ls,{data:0}),jm=Fr(Q4),e3={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},t3={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},r3={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function n3(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=r3[t])?!!e[t]:!1}function Gd(){return n3}var i3=ut({},qa,{key:function(t){if(t.key){var e=e3[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=uu(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?t3[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Gd,charCode:function(t){return t.type==="keypress"?uu(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?uu(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),o3=Fr(i3),s3=ut({},qu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Um=Fr(s3),a3=ut({},qa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Gd}),l3=Fr(a3),u3=ut({},ls,{propertyName:0,elapsedTime:0,pseudoElement:0}),c3=Fr(u3),f3=ut({},qu,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),h3=Fr(f3),d3=[9,13,27,32],Jd=Vn&&"CompositionEvent"in window,ba=null;Vn&&"documentMode"in document&&(ba=document.documentMode);var p3=Vn&&"TextEvent"in window&&!ba,uv=Vn&&(!Jd||ba&&8<ba&&11>=ba),Bm=String.fromCharCode(32),zm=!1;function cv(t,e){switch(t){case"keyup":return d3.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function fv(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Wo=!1;function y3(t,e){switch(t){case"compositionend":return fv(e);case"keypress":return e.which!==32?null:(zm=!0,Bm);case"textInput":return t=e.data,t===Bm&&zm?null:t;default:return null}}function g3(t,e){if(Wo)return t==="compositionend"||!Jd&&cv(t,e)?(t=lv(),lu=$d=Zn=null,Wo=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return uv&&e.locale!=="ko"?null:e.data;default:return null}}var m3={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Vm(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!m3[t.type]:e==="textarea"}function hv(t,e,r,n){q1(n),e=Su(e,"onChange"),0<e.length&&(r=new Hd("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var Ea=null,Pa=null;function v3(t){mv(t,0)}function $u(t){var e=$o(t);if(M1(e))return t}function w3(t,e){if(t==="change")return e}var dv=!1;Vn&&(Vn?(Ql="oninput"in document,Ql||(xh=document.createElement("div"),xh.setAttribute("oninput","return;"),Ql=typeof xh.oninput=="function"),Xl=Ql):Xl=!1,dv=Xl&&(!document.documentMode||9<document.documentMode));var Xl,Ql,xh;function Wm(){Ea&&(Ea.detachEvent("onpropertychange",pv),Pa=Ea=null)}function pv(t){if(t.propertyName==="value"&&$u(Pa)){var e=[];if(hv(e,Pa,t,Pd(t)),t=v3,Hi)t(e);else{Hi=!0;try{Md(t,e)}finally{Hi=!1,Ud()}}}}function _3(t,e,r){t==="focusin"?(Wm(),Ea=e,Pa=r,Ea.attachEvent("onpropertychange",pv)):t==="focusout"&&Wm()}function S3(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return $u(Pa)}function b3(t,e){if(t==="click")return $u(e)}function E3(t,e){if(t==="input"||t==="change")return $u(e)}function O3(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var $r=typeof Object.is=="function"?Object.is:O3,T3=Object.prototype.hasOwnProperty;function Ma(t,e){if($r(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++)if(!T3.call(e,r[n])||!$r(t[r[n]],e[r[n]]))return!1;return!0}function qm(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function $m(t,e){var r=qm(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=qm(r)}}function yv(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?yv(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Hm(){for(var t=window,e=mu();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=mu(t.document)}return e}function td(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}var x3=Vn&&"documentMode"in document&&11>=document.documentMode,qo=null,rd=null,Oa=null,nd=!1;function Gm(t,e,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;nd||qo==null||qo!==mu(n)||(n=qo,"selectionStart"in n&&td(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Oa&&Ma(Oa,n)||(Oa=n,n=Su(rd,"onSelect"),0<n.length&&(e=new Hd("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=qo)))}Vd("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0);Vd("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1);Vd(F4,2);for(kh="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),eu=0;eu<kh.length;eu++)zd.set(kh[eu],0);var kh,eu;is("onMouseEnter",["mouseout","mouseover"]);is("onMouseLeave",["mouseout","mouseover"]);is("onPointerEnter",["pointerout","pointerover"]);is("onPointerLeave",["pointerout","pointerover"]);eo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));eo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));eo("onBeforeInput",["compositionend","keypress","textInput","paste"]);eo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));eo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));eo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ya="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),gv=new Set("cancel close invalid load scroll toggle".split(" ").concat(ya));function Jm(t,e,r){var n=t.type||"unknown-event";t.currentTarget=r,N4(n,e,void 0,t),t.currentTarget=null}function mv(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],i=n.event;n=n.listeners;e:{var o=void 0;if(e)for(var s=n.length-1;0<=s;s--){var a=n[s],l=a.instance,h=a.currentTarget;if(a=a.listener,l!==o&&i.isPropagationStopped())break e;Jm(i,a,h),o=l}else for(s=0;s<n.length;s++){if(a=n[s],l=a.instance,h=a.currentTarget,a=a.listener,l!==o&&i.isPropagationStopped())break e;Jm(i,a,h),o=l}}}if(wu)throw t=Xh,wu=!1,Xh=null,t}function ot(t,e){var r=bv(e),n=t+"__bubble";r.has(n)||(wv(e,t,2,!1),r.add(n))}var Ym="_reactListening"+Math.random().toString(36).slice(2);function vv(t){t[Ym]||(t[Ym]=!0,F1.forEach(function(e){gv.has(e)||Km(e,!1,t,null),Km(e,!0,t,null)}))}function Km(t,e,r,n){var i=4<arguments.length&&arguments[4]!==void 0?arguments[4]:0,o=r;if(t==="selectionchange"&&r.nodeType!==9&&(o=r.ownerDocument),n!==null&&!e&&gv.has(t)){if(t!=="scroll")return;i|=2,o=n}var s=bv(o),a=t+"__"+(e?"capture":"bubble");s.has(a)||(e&&(i|=4),wv(o,t,i,e),s.add(a))}function wv(t,e,r,n){var i=zd.get(e);switch(i===void 0?2:i){case 0:i=W4;break;case 1:i=q4;break;default:i=Wd}r=i.bind(null,e,r,t),i=void 0,!Zh||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),n?i!==void 0?t.addEventListener(e,r,{capture:!0,passive:i}):t.addEventListener(e,r,!0):i!==void 0?t.addEventListener(e,r,{passive:i}):t.addEventListener(e,r,!1)}function _v(t,e,r,n,i){var o=n;if((e&1)===0&&(e&2)===0&&n!==null)e:for(;;){if(n===null)return;var s=n.tag;if(s===3||s===4){var a=n.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(s===4)for(s=n.return;s!==null;){var l=s.tag;if((l===3||l===4)&&(l=s.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;s=s.return}for(;a!==null;){if(s=Gi(a),s===null)return;if(l=s.tag,l===5||l===6){n=o=s;continue e}a=a.parentNode}}n=n.return}T4(function(){var h=o,p=Pd(r),m=[];e:{var y=sv.get(t);if(y!==void 0){var w=Hd,b=t;switch(t){case"keypress":if(uu(r)===0)break e;case"keydown":case"keyup":w=o3;break;case"focusin":b="focus",w=Th;break;case"focusout":b="blur",w=Th;break;case"beforeblur":case"afterblur":w=Th;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":w=Mm;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":w=G4;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":w=l3;break;case rv:case nv:case iv:w=K4;break;case ov:w=c3;break;case"scroll":w=$4;break;case"wheel":w=h3;break;case"copy":case"cut":case"paste":w=X4;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":w=Um}var N=(e&4)!==0,O=!N&&t==="scroll",I=N?y!==null?y+"Capture":null:y;N=[];for(var R=h,J;R!==null;){J=R;var q=J.stateNode;if(J.tag===5&&q!==null&&(J=q,I!==null&&(q=Ra(R,I),q!=null&&N.push(ja(R,q,J)))),O)break;R=R.return}0<N.length&&(y=new w(y,b,null,r,p),m.push({event:y,listeners:N}))}}if((e&7)===0){e:{if(y=t==="mouseover"||t==="pointerover",w=t==="mouseout"||t==="pointerout",y&&(e&16)===0&&(b=r.relatedTarget||r.fromElement)&&(Gi(b)||b[us]))break e;if((w||y)&&(y=p.window===p?p:(y=p.ownerDocument)?y.defaultView||y.parentWindow:window,w?(b=r.relatedTarget||r.toElement,w=h,b=b?Gi(b):null,b!==null&&(O=ro(b),b!==O||b.tag!==5&&b.tag!==6)&&(b=null)):(w=null,b=h),w!==b)){if(N=Mm,q="onMouseLeave",I="onMouseEnter",R="mouse",(t==="pointerout"||t==="pointerover")&&(N=Um,q="onPointerLeave",I="onPointerEnter",R="pointer"),O=w==null?y:$o(w),J=b==null?y:$o(b),y=new N(q,R+"leave",w,r,p),y.target=O,y.relatedTarget=J,q=null,Gi(p)===h&&(N=new N(I,R+"enter",b,r,p),N.target=J,N.relatedTarget=O,q=N),O=q,w&&b)t:{for(N=w,I=b,R=0,J=N;J;J=Uo(J))R++;for(J=0,q=I;q;q=Uo(q))J++;for(;0<R-J;)N=Uo(N),R--;for(;0<J-R;)I=Uo(I),J--;for(;R--;){if(N===I||I!==null&&N===I.alternate)break t;N=Uo(N),I=Uo(I)}N=null}else N=null;w!==null&&Zm(m,y,w,N,!1),b!==null&&O!==null&&Zm(m,O,b,N,!0)}}e:{if(y=h?$o(h):window,w=y.nodeName&&y.nodeName.toLowerCase(),w==="select"||w==="input"&&y.type==="file")var G=w3;else if(Vm(y))if(dv)G=E3;else{G=S3;var F=_3}else(w=y.nodeName)&&w.toLowerCase()==="input"&&(y.type==="checkbox"||y.type==="radio")&&(G=b3);if(G&&(G=G(t,h))){hv(m,G,r,p);break e}F&&F(t,y,h),t==="focusout"&&(F=y._wrapperState)&&F.controlled&&y.type==="number"&&Wh(y,"number",y.value)}switch(F=h?$o(h):window,t){case"focusin":(Vm(F)||F.contentEditable==="true")&&(qo=F,rd=h,Oa=null);break;case"focusout":Oa=rd=qo=null;break;case"mousedown":nd=!0;break;case"contextmenu":case"mouseup":case"dragend":nd=!1,Gm(m,r,p);break;case"selectionchange":if(x3)break;case"keydown":case"keyup":Gm(m,r,p)}var z;if(Jd)e:{switch(t){case"compositionstart":var S="onCompositionStart";break e;case"compositionend":S="onCompositionEnd";break e;case"compositionupdate":S="onCompositionUpdate";break e}S=void 0}else Wo?cv(t,r)&&(S="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(S="onCompositionStart");S&&(uv&&r.locale!=="ko"&&(Wo||S!=="onCompositionStart"?S==="onCompositionEnd"&&Wo&&(z=lv()):(Zn=p,$d="value"in Zn?Zn.value:Zn.textContent,Wo=!0)),F=Su(h,S),0<F.length&&(S=new jm(S,t,null,r,p),m.push({event:S,listeners:F}),z?S.data=z:(z=fv(r),z!==null&&(S.data=z)))),(z=p3?y3(t,r):g3(t,r))&&(h=Su(h,"onBeforeInput"),0<h.length&&(p=new jm("onBeforeInput","beforeinput",null,r,p),m.push({event:p,listeners:h}),p.data=z))}mv(m,e)})}function ja(t,e,r){return{instance:t,listener:e,currentTarget:r}}function Su(t,e){for(var r=e+"Capture",n=[];t!==null;){var i=t,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=Ra(t,r),o!=null&&n.unshift(ja(t,o,i)),o=Ra(t,e),o!=null&&n.push(ja(t,o,i))),t=t.return}return n}function Uo(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Zm(t,e,r,n,i){for(var o=e._reactName,s=[];r!==null&&r!==n;){var a=r,l=a.alternate,h=a.stateNode;if(l!==null&&l===n)break;a.tag===5&&h!==null&&(a=h,i?(l=Ra(r,o),l!=null&&s.unshift(ja(r,l,a))):i||(l=Ra(r,o),l!=null&&s.push(ja(r,l,a)))),r=r.return}s.length!==0&&t.push({event:e,listeners:s})}function bu(){}var Ih=null,Nh=null;function Sv(t,e){switch(t){case"button":case"input":case"select":case"textarea":return!!e.autoFocus}return!1}function id(t,e){return t==="textarea"||t==="option"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Xm=typeof setTimeout=="function"?setTimeout:void 0,k3=typeof clearTimeout=="function"?clearTimeout:void 0;function Yd(t){t.nodeType===1?t.textContent="":t.nodeType===9&&(t=t.body,t!=null&&(t.textContent=""))}function Xo(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break}return t}function Qm(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var Ah=0;function I3(t){return{$$typeof:Fd,toString:t,valueOf:t}}var Hu=Math.random().toString(36).slice(2),Xn="__reactFiber$"+Hu,Eu="__reactProps$"+Hu,us="__reactContainer$"+Hu,e1="__reactEvents$"+Hu;function Gi(t){var e=t[Xn];if(e)return e;for(var r=t.parentNode;r;){if(e=r[us]||r[Xn]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=Qm(t);t!==null;){if(r=t[Xn])return r;t=Qm(t)}return e}t=r,r=t.parentNode}return null}function $a(t){return t=t[Xn]||t[us],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function $o(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(me(33))}function Gu(t){return t[Eu]||null}function bv(t){var e=t[e1];return e===void 0&&(e=t[e1]=new Set),e}var od=[],Ho=-1;function di(t){return{current:t}}function st(t){0>Ho||(t.current=od[Ho],od[Ho]=null,Ho--)}function wt(t,e){Ho++,od[Ho]=t.current,t.current=e}var ci={},sr=di(ci),wr=di(!1),Zi=ci;function os(t,e){var r=t.type.contextTypes;if(!r)return ci;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in r)i[o]=e[o];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function _r(t){return t=t.childContextTypes,t!=null}function Ou(){st(wr),st(sr)}function t1(t,e,r){if(sr.current!==ci)throw Error(me(168));wt(sr,e),wt(wr,r)}function Ev(t,e,r){var n=t.stateNode;if(t=e.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var i in n)if(!(i in t))throw Error(me(108,Jo(e)||"Unknown",i));return ut({},r,n)}function cu(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ci,Zi=sr.current,wt(sr,t),wt(wr,wr.current),!0}function r1(t,e,r){var n=t.stateNode;if(!n)throw Error(me(169));r?(t=Ev(t,e,Zi),n.__reactInternalMemoizedMergedChildContext=t,st(wr),st(sr),wt(sr,t)):st(wr),wt(wr,r)}var Kd=null,Ki=null,N3=Ut.unstable_runWithPriority,Zd=Ut.unstable_scheduleCallback,sd=Ut.unstable_cancelCallback,A3=Ut.unstable_shouldYield,n1=Ut.unstable_requestPaint,ad=Ut.unstable_now,D3=Ut.unstable_getCurrentPriorityLevel,Ju=Ut.unstable_ImmediatePriority,Ov=Ut.unstable_UserBlockingPriority,Tv=Ut.unstable_NormalPriority,xv=Ut.unstable_LowPriority,kv=Ut.unstable_IdlePriority,Dh={},R3=n1!==void 0?n1:function(){},Mn=null,fu=null,Rh=!1,i1=ad(),ir=1e4>i1?ad:function(){return ad()-i1};function ss(){switch(D3()){case Ju:return 99;case Ov:return 98;case Tv:return 97;case xv:return 96;case kv:return 95;default:throw Error(me(332))}}function Iv(t){switch(t){case 99:return Ju;case 98:return Ov;case 97:return Tv;case 96:return xv;case 95:return kv;default:throw Error(me(332))}}function Xi(t,e){return t=Iv(t),N3(t,e)}function Ua(t,e,r){return t=Iv(t),Zd(t,e,r)}function In(){if(fu!==null){var t=fu;fu=null,sd(t)}Nv()}function Nv(){if(!Rh&&Mn!==null){Rh=!0;var t=0;try{var e=Mn;Xi(99,function(){for(;t<e.length;t++){var r=e[t];do r=r(!0);while(r!==null)}}),Mn=null}catch(r){throw Mn!==null&&(Mn=Mn.slice(t+1)),Zd(Ju,In),r}finally{Rh=!1}}}var C3=to.ReactCurrentBatchConfig;function on(t,e){if(t&&t.defaultProps){e=ut({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}var Tu=di(null),xu=null,Go=null,ku=null;function Xd(){ku=Go=xu=null}function Qd(t){var e=Tu.current;st(Tu),t.type._context._currentValue=e}function Av(t,e){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)===e){if(r===null||(r.childLanes&e)===e)break;r.childLanes|=e}else t.childLanes|=e,r!==null&&(r.childLanes|=e);t=t.return}}function Qo(t,e){xu=t,ku=Go=null,t=t.dependencies,t!==null&&t.firstContext!==null&&((t.lanes&e)!==0&&(sn=!0),t.firstContext=null)}function Jr(t,e){if(ku!==t&&e!==!1&&e!==0)if((typeof e!="number"||e===1073741823)&&(ku=t,e=1073741823),e={context:t,observedBits:e,next:null},Go===null){if(xu===null)throw Error(me(308));Go=e,xu.dependencies={lanes:0,firstContext:e,responders:null}}else Go=Go.next=e;return t._currentValue}var Yn=!1;function e0(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function Dv(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function ni(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ii(t,e){if(t=t.updateQueue,t!==null){t=t.shared;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}}function o1(t,e){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var i=null,o=null;if(r=r.firstBaseUpdate,r!==null){do{var s={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};o===null?i=o=s:o=o.next=s,r=r.next}while(r!==null);o===null?i=o=e:o=o.next=e}else i=o=e;r={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function Ba(t,e,r,n){var i=t.updateQueue;Yn=!1;var o=i.firstBaseUpdate,s=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,h=l.next;l.next=null,s===null?o=h:s.next=h,s=l;var p=t.alternate;if(p!==null){p=p.updateQueue;var m=p.lastBaseUpdate;m!==s&&(m===null?p.firstBaseUpdate=h:m.next=h,p.lastBaseUpdate=l)}}if(o!==null){m=i.baseState,s=0,p=h=l=null;do{a=o.lane;var y=o.eventTime;if((n&a)===a){p!==null&&(p=p.next={eventTime:y,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var w=t,b=o;switch(a=e,y=r,b.tag){case 1:if(w=b.payload,typeof w=="function"){m=w.call(y,m,a);break e}m=w;break e;case 3:w.flags=w.flags&-4097|64;case 0:if(w=b.payload,a=typeof w=="function"?w.call(y,m,a):w,a==null)break e;m=ut({},m,a);break e;case 2:Yn=!0}}o.callback!==null&&(t.flags|=32,a=i.effects,a===null?i.effects=[o]:a.push(o))}else y={eventTime:y,lane:a,tag:o.tag,payload:o.payload,callback:o.callback,next:null},p===null?(h=p=y,l=m):p=p.next=y,s|=a;if(o=o.next,o===null){if(a=i.shared.pending,a===null)break;o=a.next,a.next=null,i.lastBaseUpdate=a,i.shared.pending=null}}while(1);p===null&&(l=m),i.baseState=l,i.firstBaseUpdate=h,i.lastBaseUpdate=p,Ga|=s,t.lanes=s,t.memoizedState=m}}function s1(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],i=n.callback;if(i!==null){if(n.callback=null,n=r,typeof i!="function")throw Error(me(191,i));i.call(n)}}}var Rv=new Uu.Component().refs;function Iu(t,e,r,n){e=t.memoizedState,r=r(n,e),r=r==null?e:ut({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var Yu={isMounted:function(t){return(t=t._reactInternals)?ro(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var n=Cr(),i=oi(t),o=ni(n,i);o.payload=e,r!=null&&(o.callback=r),ii(t,o),si(t,i,n)},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=Cr(),i=oi(t),o=ni(n,i);o.tag=1,o.payload=e,r!=null&&(o.callback=r),ii(t,o),si(t,i,n)},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=Cr(),n=oi(t),i=ni(r,n);i.tag=2,e!=null&&(i.callback=e),ii(t,i),si(t,n,r)}};function a1(t,e,r,n,i,o,s){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,o,s):e.prototype&&e.prototype.isPureReactComponent?!Ma(r,n)||!Ma(i,o):!0}function Cv(t,e,r){var n=!1,i=ci,o=e.contextType;return typeof o=="object"&&o!==null?o=Jr(o):(i=_r(e)?Zi:sr.current,n=e.contextTypes,o=(n=n!=null)?os(t,i):ci),e=new e(r,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Yu,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=o),e}function l1(t,e,r,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&Yu.enqueueReplaceState(e,e.state,null)}function ld(t,e,r,n){var i=t.stateNode;i.props=r,i.state=t.memoizedState,i.refs=Rv,e0(t);var o=e.contextType;typeof o=="object"&&o!==null?i.context=Jr(o):(o=_r(e)?Zi:sr.current,i.context=os(t,o)),Ba(t,r,i,n),i.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(Iu(t,e,o,r),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Yu.enqueueReplaceState(i,i.state,null),Ba(t,r,i,n),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4)}var tu=Array.isArray;function sa(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(me(309));var n=r.stateNode}if(!n)throw Error(me(147,t));var i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var s=n.refs;s===Rv&&(s=n.refs={}),o===null?delete s[i]:s[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(me(284));if(!r._owner)throw Error(me(290,t))}return t}function ru(t,e){if(t.type!=="textarea")throw Error(me(31,Object.prototype.toString.call(e)==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":e))}function Fv(t){function e(O,I){if(t){var R=O.lastEffect;R!==null?(R.nextEffect=I,O.lastEffect=I):O.firstEffect=O.lastEffect=I,I.nextEffect=null,I.flags=8}}function r(O,I){if(!t)return null;for(;I!==null;)e(O,I),I=I.sibling;return null}function n(O,I){for(O=new Map;I!==null;)I.key!==null?O.set(I.key,I):O.set(I.index,I),I=I.sibling;return O}function i(O,I){return O=hi(O,I),O.index=0,O.sibling=null,O}function o(O,I,R){return O.index=R,t?(R=O.alternate,R!==null?(R=R.index,R<I?(O.flags=2,I):R):(O.flags=2,I)):I}function s(O){return t&&O.alternate===null&&(O.flags=2),O}function a(O,I,R,J){return I===null||I.tag!==6?(I=Mh(R,O.mode,J),I.return=O,I):(I=i(I,R),I.return=O,I)}function l(O,I,R,J){return I!==null&&I.elementType===R.type?(J=i(I,R.props),J.ref=sa(O,I,R),J.return=O,J):(J=yu(R.type,R.key,R.props,null,O.mode,J),J.ref=sa(O,I,R),J.return=O,J)}function h(O,I,R,J){return I===null||I.tag!==4||I.stateNode.containerInfo!==R.containerInfo||I.stateNode.implementation!==R.implementation?(I=jh(R,O.mode,J),I.return=O,I):(I=i(I,R.children||[]),I.return=O,I)}function p(O,I,R,J,q){return I===null||I.tag!==7?(I=ns(R,O.mode,J,q),I.return=O,I):(I=i(I,R),I.return=O,I)}function m(O,I,R){if(typeof I=="string"||typeof I=="number")return I=Mh(""+I,O.mode,R),I.return=O,I;if(typeof I=="object"&&I!==null){switch(I.$$typeof){case da:return R=yu(I.type,I.key,I.props,null,O.mode,R),R.ref=sa(O,null,I),R.return=O,R;case $i:return I=jh(I,O.mode,R),I.return=O,I}if(tu(I)||ta(I))return I=ns(I,O.mode,R,null),I.return=O,I;ru(O,I)}return null}function y(O,I,R,J){var q=I!==null?I.key:null;if(typeof R=="string"||typeof R=="number")return q!==null?null:a(O,I,""+R,J);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case da:return R.key===q?R.type===Kn?p(O,I,R.props.children,J,q):l(O,I,R,J):null;case $i:return R.key===q?h(O,I,R,J):null}if(tu(R)||ta(R))return q!==null?null:p(O,I,R,J,null);ru(O,R)}return null}function w(O,I,R,J,q){if(typeof J=="string"||typeof J=="number")return O=O.get(R)||null,a(I,O,""+J,q);if(typeof J=="object"&&J!==null){switch(J.$$typeof){case da:return O=O.get(J.key===null?R:J.key)||null,J.type===Kn?p(I,O,J.props.children,q,J.key):l(I,O,J,q);case $i:return O=O.get(J.key===null?R:J.key)||null,h(I,O,J,q)}if(tu(J)||ta(J))return O=O.get(R)||null,p(I,O,J,q,null);ru(I,J)}return null}function b(O,I,R,J){for(var q=null,G=null,F=I,z=I=0,S=null;F!==null&&z<R.length;z++){F.index>z?(S=F,F=null):S=F.sibling;var W=y(O,F,R[z],J);if(W===null){F===null&&(F=S);break}t&&F&&W.alternate===null&&e(O,F),I=o(W,I,z),G===null?q=W:G.sibling=W,G=W,F=S}if(z===R.length)return r(O,F),q;if(F===null){for(;z<R.length;z++)F=m(O,R[z],J),F!==null&&(I=o(F,I,z),G===null?q=F:G.sibling=F,G=F);return q}for(F=n(O,F);z<R.length;z++)S=w(F,O,z,R[z],J),S!==null&&(t&&S.alternate!==null&&F.delete(S.key===null?z:S.key),I=o(S,I,z),G===null?q=S:G.sibling=S,G=S);return t&&F.forEach(function(te){return e(O,te)}),q}function N(O,I,R,J){var q=ta(R);if(typeof q!="function")throw Error(me(150));if(R=q.call(R),R==null)throw Error(me(151));for(var G=q=null,F=I,z=I=0,S=null,W=R.next();F!==null&&!W.done;z++,W=R.next()){F.index>z?(S=F,F=null):S=F.sibling;var te=y(O,F,W.value,J);if(te===null){F===null&&(F=S);break}t&&F&&te.alternate===null&&e(O,F),I=o(te,I,z),G===null?q=te:G.sibling=te,G=te,F=S}if(W.done)return r(O,F),q;if(F===null){for(;!W.done;z++,W=R.next())W=m(O,W.value,J),W!==null&&(I=o(W,I,z),G===null?q=W:G.sibling=W,G=W);return q}for(F=n(O,F);!W.done;z++,W=R.next())W=w(F,O,z,W.value,J),W!==null&&(t&&W.alternate!==null&&F.delete(W.key===null?z:W.key),I=o(W,I,z),G===null?q=W:G.sibling=W,G=W);return t&&F.forEach(function(X){return e(O,X)}),q}return function(O,I,R,J){var q=typeof R=="object"&&R!==null&&R.type===Kn&&R.key===null;q&&(R=R.props.children);var G=typeof R=="object"&&R!==null;if(G)switch(R.$$typeof){case da:e:{for(G=R.key,q=I;q!==null;){if(q.key===G){switch(q.tag){case 7:if(R.type===Kn){r(O,q.sibling),I=i(q,R.props.children),I.return=O,O=I;break e}break;default:if(q.elementType===R.type){r(O,q.sibling),I=i(q,R.props),I.ref=sa(O,q,R),I.return=O,O=I;break e}}r(O,q);break}else e(O,q);q=q.sibling}R.type===Kn?(I=ns(R.props.children,O.mode,J,R.key),I.return=O,O=I):(J=yu(R.type,R.key,R.props,null,O.mode,J),J.ref=sa(O,I,R),J.return=O,O=J)}return s(O);case $i:e:{for(q=R.key;I!==null;){if(I.key===q)if(I.tag===4&&I.stateNode.containerInfo===R.containerInfo&&I.stateNode.implementation===R.implementation){r(O,I.sibling),I=i(I,R.children||[]),I.return=O,O=I;break e}else{r(O,I);break}else e(O,I);I=I.sibling}I=jh(R,O.mode,J),I.return=O,O=I}return s(O)}if(typeof R=="string"||typeof R=="number")return R=""+R,I!==null&&I.tag===6?(r(O,I.sibling),I=i(I,R),I.return=O,O=I):(r(O,I),I=Mh(R,O.mode,J),I.return=O,O=I),s(O);if(tu(R))return b(O,I,R,J);if(ta(R))return N(O,I,R,J);if(G&&ru(O,R),typeof R>"u"&&!q)switch(O.tag){case 1:case 22:case 0:case 11:case 15:throw Error(me(152,Jo(O.type)||"Component"))}return r(O,I)}}var Nu=Fv(!0),Lv=Fv(!1),Ha={},xn=di(Ha),za=di(Ha),Va=di(Ha);function Ji(t){if(t===Ha)throw Error(me(174));return t}function ud(t,e){switch(wt(Va,e),wt(za,t),wt(xn,Ha),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Gh(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Gh(e,t)}st(xn),wt(xn,e)}function as(){st(xn),st(za),st(Va)}function u1(t){Ji(Va.current);var e=Ji(xn.current),r=Gh(e,t.type);e!==r&&(wt(za,t),wt(xn,r))}function t0(t){za.current===t&&(st(xn),st(za))}var vt=di(0);function Au(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if((e.flags&64)!==0)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Un=null,Qn=null,kn=!1;function Pv(t,e){var r=Hr(5,null,null,0);r.elementType="DELETED",r.type="DELETED",r.stateNode=e,r.return=t,r.flags=8,t.lastEffect!==null?(t.lastEffect.nextEffect=r,t.lastEffect=r):t.firstEffect=t.lastEffect=r}function c1(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,!0):!1;case 13:return!1;default:return!1}}function cd(t){if(kn){var e=Qn;if(e){var r=e;if(!c1(t,e)){if(e=Xo(r.nextSibling),!e||!c1(t,e)){t.flags=t.flags&-1025|2,kn=!1,Un=t;return}Pv(Un,r)}Un=t,Qn=Xo(e.firstChild)}else t.flags=t.flags&-1025|2,kn=!1,Un=t}}function f1(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Un=t}function nu(t){if(t!==Un)return!1;if(!kn)return f1(t),kn=!0,!1;var e=t.type;if(t.tag!==5||e!=="head"&&e!=="body"&&!id(e,t.memoizedProps))for(e=Qn;e;)Pv(t,e),e=Xo(e.nextSibling);if(f1(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(me(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){Qn=Xo(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}Qn=null}}else Qn=Un?Xo(t.stateNode.nextSibling):null;return!0}function Ch(){Qn=Un=null,kn=!1}var es=[];function r0(){for(var t=0;t<es.length;t++)es[t]._workInProgressVersionPrimary=null;es.length=0}var Ta=to.ReactCurrentDispatcher,Gr=to.ReactCurrentBatchConfig,Wa=0,At=null,nr=null,Yt=null,Du=!1,xa=!1;function mr(){throw Error(me(321))}function n0(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!$r(t[r],e[r]))return!1;return!0}function i0(t,e,r,n,i,o){if(Wa=o,At=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Ta.current=t===null||t.memoizedState===null?L3:P3,t=r(n,i),xa){o=0;do{if(xa=!1,!(25>o))throw Error(me(301));o+=1,Yt=nr=null,e.updateQueue=null,Ta.current=M3,t=r(n,i)}while(xa)}if(Ta.current=Lu,e=nr!==null&&nr.next!==null,Wa=0,Yt=nr=At=null,Du=!1,e)throw Error(me(300));return t}function Yi(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Yt===null?At.memoizedState=Yt=t:Yt=Yt.next=t,Yt}function no(){if(nr===null){var t=At.alternate;t=t!==null?t.memoizedState:null}else t=nr.next;var e=Yt===null?At.memoizedState:Yt.next;if(e!==null)Yt=e,nr=t;else{if(t===null)throw Error(me(310));nr=t,t={memoizedState:nr.memoizedState,baseState:nr.baseState,baseQueue:nr.baseQueue,queue:nr.queue,next:null},Yt===null?At.memoizedState=Yt=t:Yt=Yt.next=t}return Yt}function On(t,e){return typeof e=="function"?e(t):e}function aa(t){var e=no(),r=e.queue;if(r===null)throw Error(me(311));r.lastRenderedReducer=t;var n=nr,i=n.baseQueue,o=r.pending;if(o!==null){if(i!==null){var s=i.next;i.next=o.next,o.next=s}n.baseQueue=i=o,r.pending=null}if(i!==null){i=i.next,n=n.baseState;var a=s=o=null,l=i;do{var h=l.lane;if((Wa&h)===h)a!==null&&(a=a.next={lane:0,action:l.action,eagerReducer:l.eagerReducer,eagerState:l.eagerState,next:null}),n=l.eagerReducer===t?l.eagerState:t(n,l.action);else{var p={lane:h,action:l.action,eagerReducer:l.eagerReducer,eagerState:l.eagerState,next:null};a===null?(s=a=p,o=n):a=a.next=p,At.lanes|=h,Ga|=h}l=l.next}while(l!==null&&l!==i);a===null?o=n:a.next=s,$r(n,e.memoizedState)||(sn=!0),e.memoizedState=n,e.baseState=o,e.baseQueue=a,r.lastRenderedState=n}return[e.memoizedState,r.dispatch]}function la(t){var e=no(),r=e.queue;if(r===null)throw Error(me(311));r.lastRenderedReducer=t;var n=r.dispatch,i=r.pending,o=e.memoizedState;if(i!==null){r.pending=null;var s=i=i.next;do o=t(o,s.action),s=s.next;while(s!==i);$r(o,e.memoizedState)||(sn=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),r.lastRenderedState=o}return[o,n]}function h1(t,e,r){var n=e._getVersion;n=n(e._source);var i=e._workInProgressVersionPrimary;if(i!==null?t=i===n:(t=t.mutableReadLanes,(t=(Wa&t)===t)&&(e._workInProgressVersionPrimary=n,es.push(e))),t)return r(e._source);throw es.push(e),Error(me(350))}function Mv(t,e,r,n){var i=lr;if(i===null)throw Error(me(349));var o=e._getVersion,s=o(e._source),a=Ta.current,l=a.useState(function(){return h1(i,e,r)}),h=l[1],p=l[0];l=Yt;var m=t.memoizedState,y=m.refs,w=y.getSnapshot,b=m.source;m=m.subscribe;var N=At;return t.memoizedState={refs:y,source:e,subscribe:n},a.useEffect(function(){y.getSnapshot=r,y.setSnapshot=h;var O=o(e._source);if(!$r(s,O)){O=r(e._source),$r(p,O)||(h(O),O=oi(N),i.mutableReadLanes|=O&i.pendingLanes),O=i.mutableReadLanes,i.entangledLanes|=O;for(var I=i.entanglements,R=O;0<R;){var J=31-ui(R),q=1<<J;I[J]|=O,R&=~q}}},[r,e,n]),a.useEffect(function(){return n(e._source,function(){var O=y.getSnapshot,I=y.setSnapshot;try{I(O(e._source));var R=oi(N);i.mutableReadLanes|=R&i.pendingLanes}catch(J){I(function(){throw J})}})},[e,n]),$r(w,r)&&$r(b,e)&&$r(m,n)||(t={pending:null,dispatch:null,lastRenderedReducer:On,lastRenderedState:p},t.dispatch=h=a0.bind(null,At,t),l.queue=t,l.baseQueue=null,p=h1(i,e,r),l.memoizedState=l.baseState=p),p}function jv(t,e,r){var n=no();return Mv(n,t,e,r)}function ua(t){var e=Yi();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t=e.queue={pending:null,dispatch:null,lastRenderedReducer:On,lastRenderedState:t},t=t.dispatch=a0.bind(null,At,t),[e.memoizedState,t]}function Ru(t,e,r,n){return t={tag:t,create:e,destroy:r,deps:n,next:null},e=At.updateQueue,e===null?(e={lastEffect:null},At.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t)),t}function d1(t){var e=Yi();return t={current:t},e.memoizedState=t}function Cu(){return no().memoizedState}function fd(t,e,r,n){var i=Yi();At.flags|=t,i.memoizedState=Ru(1|e,r,void 0,n===void 0?null:n)}function o0(t,e,r,n){var i=no();n=n===void 0?null:n;var o=void 0;if(nr!==null){var s=nr.memoizedState;if(o=s.destroy,n!==null&&n0(n,s.deps)){Ru(e,r,o,n);return}}At.flags|=t,i.memoizedState=Ru(1|e,r,o,n)}function p1(t,e){return fd(516,4,t,e)}function Fu(t,e){return o0(516,4,t,e)}function Uv(t,e){return o0(4,2,t,e)}function Bv(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function zv(t,e,r){return r=r!=null?r.concat([t]):null,o0(4,2,Bv.bind(null,e,t),r)}function s0(){}function Vv(t,e){var r=no();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&n0(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function Wv(t,e){var r=no();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&n0(e,n[1])?n[0]:(t=t(),r.memoizedState=[t,e],t)}function F3(t,e){var r=ss();Xi(98>r?98:r,function(){t(!0)}),Xi(97<r?97:r,function(){var n=Gr.transition;Gr.transition=1;try{t(!1),e()}finally{Gr.transition=n}})}function a0(t,e,r){var n=Cr(),i=oi(t),o={lane:i,action:r,eagerReducer:null,eagerState:null,next:null},s=e.pending;if(s===null?o.next=o:(o.next=s.next,s.next=o),e.pending=o,s=t.alternate,t===At||s!==null&&s===At)xa=Du=!0;else{if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var a=e.lastRenderedState,l=s(a,r);if(o.eagerReducer=s,o.eagerState=l,$r(l,a))return}catch{}finally{}si(t,i,n)}}var Lu={readContext:Jr,useCallback:mr,useContext:mr,useEffect:mr,useImperativeHandle:mr,useLayoutEffect:mr,useMemo:mr,useReducer:mr,useRef:mr,useState:mr,useDebugValue:mr,useDeferredValue:mr,useTransition:mr,useMutableSource:mr,useOpaqueIdentifier:mr,unstable_isNewReconciler:!1},L3={readContext:Jr,useCallback:function(t,e){return Yi().memoizedState=[t,e===void 0?null:e],t},useContext:Jr,useEffect:p1,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,fd(4,2,Bv.bind(null,e,t),r)},useLayoutEffect:function(t,e){return fd(4,2,t,e)},useMemo:function(t,e){var r=Yi();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var n=Yi();return e=r!==void 0?r(e):e,n.memoizedState=n.baseState=e,t=n.queue={pending:null,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},t=t.dispatch=a0.bind(null,At,t),[n.memoizedState,t]},useRef:d1,useState:ua,useDebugValue:s0,useDeferredValue:function(t){var e=ua(t),r=e[0],n=e[1];return p1(function(){var i=Gr.transition;Gr.transition=1;try{n(t)}finally{Gr.transition=i}},[t]),r},useTransition:function(){var t=ua(!1),e=t[0];return t=F3.bind(null,t[1]),d1(t),[t,e]},useMutableSource:function(t,e,r){var n=Yi();return n.memoizedState={refs:{getSnapshot:e,setSnapshot:null},source:t,subscribe:r},Mv(n,t,e,r)},useOpaqueIdentifier:function(){if(kn){var t=!1,e=I3(function(){throw t||(t=!0,r("r:"+(Ah++).toString(36))),Error(me(355))}),r=ua(e)[1];return(At.mode&2)===0&&(At.flags|=516,Ru(5,function(){r("r:"+(Ah++).toString(36))},void 0,null)),e}return e="r:"+(Ah++).toString(36),ua(e),e},unstable_isNewReconciler:!1},P3={readContext:Jr,useCallback:Vv,useContext:Jr,useEffect:Fu,useImperativeHandle:zv,useLayoutEffect:Uv,useMemo:Wv,useReducer:aa,useRef:Cu,useState:function(){return aa(On)},useDebugValue:s0,useDeferredValue:function(t){var e=aa(On),r=e[0],n=e[1];return Fu(function(){var i=Gr.transition;Gr.transition=1;try{n(t)}finally{Gr.transition=i}},[t]),r},useTransition:function(){var t=aa(On)[0];return[Cu().current,t]},useMutableSource:jv,useOpaqueIdentifier:function(){return aa(On)[0]},unstable_isNewReconciler:!1},M3={readContext:Jr,useCallback:Vv,useContext:Jr,useEffect:Fu,useImperativeHandle:zv,useLayoutEffect:Uv,useMemo:Wv,useReducer:la,useRef:Cu,useState:function(){return la(On)},useDebugValue:s0,useDeferredValue:function(t){var e=la(On),r=e[0],n=e[1];return Fu(function(){var i=Gr.transition;Gr.transition=1;try{n(t)}finally{Gr.transition=i}},[t]),r},useTransition:function(){var t=la(On)[0];return[Cu().current,t]},useMutableSource:jv,useOpaqueIdentifier:function(){return la(On)[0]},unstable_isNewReconciler:!1},j3=to.ReactCurrentOwner,sn=!1;function vr(t,e,r,n){e.child=t===null?Lv(e,null,r,n):Nu(e,t.child,r,n)}function y1(t,e,r,n,i){r=r.render;var o=e.ref;return Qo(e,i),n=i0(t,e,r,n,o,i),t!==null&&!sn?(e.updateQueue=t.updateQueue,e.flags&=-517,t.lanes&=~i,Bn(t,e,i)):(e.flags|=1,vr(t,e,n,i),e.child)}function g1(t,e,r,n,i,o){if(t===null){var s=r.type;return typeof s=="function"&&!d0(s)&&s.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=s,qv(t,e,s,n,i,o)):(t=yu(r.type,null,n,e,e.mode,o),t.ref=e.ref,t.return=e,e.child=t)}return s=t.child,(i&o)===0&&(i=s.memoizedProps,r=r.compare,r=r!==null?r:Ma,r(i,n)&&t.ref===e.ref)?Bn(t,e,o):(e.flags|=1,t=hi(s,n),t.ref=e.ref,t.return=e,e.child=t)}function qv(t,e,r,n,i,o){if(t!==null&&Ma(t.memoizedProps,n)&&t.ref===e.ref)if(sn=!1,(o&i)!==0)(t.flags&16384)!==0&&(sn=!0);else return e.lanes=t.lanes,Bn(t,e,o);return hd(t,e,r,n,o)}function Fh(t,e,r){var n=e.pendingProps,i=n.children,o=t!==null?t.memoizedState:null;if(n.mode==="hidden"||n.mode==="unstable-defer-without-hiding")if((e.mode&4)===0)e.memoizedState={baseLanes:0},ou(e,r);else if((r&1073741824)!==0)e.memoizedState={baseLanes:0},ou(e,o!==null?o.baseLanes:r);else return t=o!==null?o.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t},ou(e,t),null;else o!==null?(n=o.baseLanes|r,e.memoizedState=null):n=r,ou(e,n);return vr(t,e,i,r),e.child}function $v(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=128)}function hd(t,e,r,n,i){var o=_r(r)?Zi:sr.current;return o=os(e,o),Qo(e,i),r=i0(t,e,r,n,o,i),t!==null&&!sn?(e.updateQueue=t.updateQueue,e.flags&=-517,t.lanes&=~i,Bn(t,e,i)):(e.flags|=1,vr(t,e,r,i),e.child)}function m1(t,e,r,n,i){if(_r(r)){var o=!0;cu(e)}else o=!1;if(Qo(e,i),e.stateNode===null)t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2),Cv(e,r,n),ld(e,r,n,i),n=!0;else if(t===null){var s=e.stateNode,a=e.memoizedProps;s.props=a;var l=s.context,h=r.contextType;typeof h=="object"&&h!==null?h=Jr(h):(h=_r(r)?Zi:sr.current,h=os(e,h));var p=r.getDerivedStateFromProps,m=typeof p=="function"||typeof s.getSnapshotBeforeUpdate=="function";m||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==n||l!==h)&&l1(e,s,n,h),Yn=!1;var y=e.memoizedState;s.state=y,Ba(e,n,s,i),l=e.memoizedState,a!==n||y!==l||wr.current||Yn?(typeof p=="function"&&(Iu(e,r,p,n),l=e.memoizedState),(a=Yn||a1(e,r,a,n,y,l,h))?(m||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(e.flags|=4)):(typeof s.componentDidMount=="function"&&(e.flags|=4),e.memoizedProps=n,e.memoizedState=l),s.props=n,s.state=l,s.context=h,n=a):(typeof s.componentDidMount=="function"&&(e.flags|=4),n=!1)}else{s=e.stateNode,Dv(t,e),a=e.memoizedProps,h=e.type===e.elementType?a:on(e.type,a),s.props=h,m=e.pendingProps,y=s.context,l=r.contextType,typeof l=="object"&&l!==null?l=Jr(l):(l=_r(r)?Zi:sr.current,l=os(e,l));var w=r.getDerivedStateFromProps;(p=typeof w=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==m||y!==l)&&l1(e,s,n,l),Yn=!1,y=e.memoizedState,s.state=y,Ba(e,n,s,i);var b=e.memoizedState;a!==m||y!==b||wr.current||Yn?(typeof w=="function"&&(Iu(e,r,w,n),b=e.memoizedState),(h=Yn||a1(e,r,h,n,y,b,l))?(p||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(n,b,l),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(n,b,l)),typeof s.componentDidUpdate=="function"&&(e.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(e.flags|=256)):(typeof s.componentDidUpdate!="function"||a===t.memoizedProps&&y===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&y===t.memoizedState||(e.flags|=256),e.memoizedProps=n,e.memoizedState=b),s.props=n,s.state=b,s.context=l,n=h):(typeof s.componentDidUpdate!="function"||a===t.memoizedProps&&y===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&y===t.memoizedState||(e.flags|=256),n=!1)}return dd(t,e,r,n,o,i)}function dd(t,e,r,n,i,o){$v(t,e);var s=(e.flags&64)!==0;if(!n&&!s)return i&&r1(e,r,!1),Bn(t,e,o);n=e.stateNode,j3.current=e;var a=s&&typeof r.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&s?(e.child=Nu(e,t.child,null,o),e.child=Nu(e,null,a,o)):vr(t,e,a,o),e.memoizedState=n.state,i&&r1(e,r,!0),e.child}function v1(t){var e=t.stateNode;e.pendingContext?t1(t,e.pendingContext,e.pendingContext!==e.context):e.context&&t1(t,e.context,!1),ud(t,e.containerInfo)}var iu={dehydrated:null,retryLane:0};function w1(t,e,r){var n=e.pendingProps,i=vt.current,o=!1,s;return(s=(e.flags&64)!==0)||(s=t!==null&&t.memoizedState===null?!1:(i&2)!==0),s?(o=!0,e.flags&=-65):t!==null&&t.memoizedState===null||n.fallback===void 0||n.unstable_avoidThisFallback===!0||(i|=1),wt(vt,i&1),t===null?(n.fallback!==void 0&&cd(e),t=n.children,i=n.fallback,o?(t=_1(e,t,i,r),e.child.memoizedState={baseLanes:r},e.memoizedState=iu,t):typeof n.unstable_expectedLoadTime=="number"?(t=_1(e,t,i,r),e.child.memoizedState={baseLanes:r},e.memoizedState=iu,e.lanes=33554432,t):(r=p0({mode:"visible",children:t},e.mode,r,null),r.return=e,e.child=r)):t.memoizedState!==null?o?(n=b1(t,e,n.children,n.fallback,r),o=e.child,i=t.child.memoizedState,o.memoizedState=i===null?{baseLanes:r}:{baseLanes:i.baseLanes|r},o.childLanes=t.childLanes&~r,e.memoizedState=iu,n):(r=S1(t,e,n.children,r),e.memoizedState=null,r):o?(n=b1(t,e,n.children,n.fallback,r),o=e.child,i=t.child.memoizedState,o.memoizedState=i===null?{baseLanes:r}:{baseLanes:i.baseLanes|r},o.childLanes=t.childLanes&~r,e.memoizedState=iu,n):(r=S1(t,e,n.children,r),e.memoizedState=null,r)}function _1(t,e,r,n){var i=t.mode,o=t.child;return e={mode:"hidden",children:e},(i&2)===0&&o!==null?(o.childLanes=0,o.pendingProps=e):o=p0(e,i,0,null),r=ns(r,i,n,null),o.return=t,r.return=t,o.sibling=r,t.child=o,r}function S1(t,e,r,n){var i=t.child;return t=i.sibling,r=hi(i,{mode:"visible",children:r}),(e.mode&2)===0&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(t.nextEffect=null,t.flags=8,e.firstEffect=e.lastEffect=t),e.child=r}function b1(t,e,r,n,i){var o=e.mode,s=t.child;t=s.sibling;var a={mode:"hidden",children:r};return(o&2)===0&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=a,s=r.lastEffect,s!==null?(e.firstEffect=r.firstEffect,e.lastEffect=s,s.nextEffect=null):e.firstEffect=e.lastEffect=null):r=hi(s,a),t!==null?n=hi(t,n):(n=ns(n,o,i,null),n.flags|=2),n.return=e,r.return=e,r.sibling=n,e.child=r,n}function E1(t,e){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Av(t.return,e)}function Lh(t,e,r,n,i,o){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:i,lastEffect:o}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=n,s.tail=r,s.tailMode=i,s.lastEffect=o)}function O1(t,e,r){var n=e.pendingProps,i=n.revealOrder,o=n.tail;if(vr(t,e,n.children,r),n=vt.current,(n&2)!==0)n=n&1|2,e.flags|=64;else{if(t!==null&&(t.flags&64)!==0)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&E1(t,r);else if(t.tag===19)E1(t,r);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(wt(vt,n),(e.mode&2)===0)e.memoizedState=null;else switch(i){case"forwards":for(r=e.child,i=null;r!==null;)t=r.alternate,t!==null&&Au(t)===null&&(i=r),r=r.sibling;r=i,r===null?(i=e.child,e.child=null):(i=r.sibling,r.sibling=null),Lh(e,!1,i,r,o,e.lastEffect);break;case"backwards":for(r=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Au(t)===null){e.child=i;break}t=i.sibling,i.sibling=r,r=i,i=t}Lh(e,!0,r,null,o,e.lastEffect);break;case"together":Lh(e,!1,null,null,void 0,e.lastEffect);break;default:e.memoizedState=null}return e.child}function Bn(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),Ga|=e.lanes,(r&e.childLanes)!==0){if(t!==null&&e.child!==t.child)throw Error(me(153));if(e.child!==null){for(t=e.child,r=hi(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=hi(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}return null}var Hv,pd,Gv,Jv;Hv=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};pd=function(){};Gv=function(t,e,r,n){var i=t.memoizedProps;if(i!==n){t=e.stateNode,Ji(xn.current);var o=null;switch(r){case"input":i=zh(t,i),n=zh(t,n),o=[];break;case"option":i=qh(t,i),n=qh(t,n),o=[];break;case"select":i=ut({},i,{value:void 0}),n=ut({},n,{value:void 0}),o=[];break;case"textarea":i=$h(t,i),n=$h(t,n),o=[];break;default:typeof i.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=bu)}Jh(r,n);var s;r=null;for(h in i)if(!n.hasOwnProperty(h)&&i.hasOwnProperty(h)&&i[h]!=null)if(h==="style"){var a=i[h];for(s in a)a.hasOwnProperty(s)&&(r||(r={}),r[s]="")}else h!=="dangerouslySetInnerHTML"&&h!=="children"&&h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(Aa.hasOwnProperty(h)?o||(o=[]):(o=o||[]).push(h,null));for(h in n){var l=n[h];if(a=i!=null?i[h]:void 0,n.hasOwnProperty(h)&&l!==a&&(l!=null||a!=null))if(h==="style")if(a){for(s in a)!a.hasOwnProperty(s)||l&&l.hasOwnProperty(s)||(r||(r={}),r[s]="");for(s in l)l.hasOwnProperty(s)&&a[s]!==l[s]&&(r||(r={}),r[s]=l[s])}else r||(o||(o=[]),o.push(h,r)),r=l;else h==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(o=o||[]).push(h,l)):h==="children"?typeof l!="string"&&typeof l!="number"||(o=o||[]).push(h,""+l):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&(Aa.hasOwnProperty(h)?(l!=null&&h==="onScroll"&&ot("scroll",t),o||a===l||(o=[])):typeof l=="object"&&l!==null&&l.$$typeof===Fd?l.toString():(o=o||[]).push(h,l))}r&&(o=o||[]).push("style",r);var h=o;(e.updateQueue=h)&&(e.flags|=4)}};Jv=function(t,e,r,n){r!==n&&(e.flags|=4)};function ca(t,e){if(!kn)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function U3(t,e,r){var n=e.pendingProps;switch(e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return _r(e.type)&&Ou(),null;case 3:return as(),st(wr),st(sr),r0(),n=e.stateNode,n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(nu(e)?e.flags|=4:n.hydrate||(e.flags|=256)),pd(e),null;case 5:t0(e);var i=Ji(Va.current);if(r=e.type,t!==null&&e.stateNode!=null)Gv(t,e,r,n,i),t.ref!==e.ref&&(e.flags|=128);else{if(!n){if(e.stateNode===null)throw Error(me(166));return null}if(t=Ji(xn.current),nu(e)){n=e.stateNode,r=e.type;var o=e.memoizedProps;switch(n[Xn]=e,n[Eu]=o,r){case"dialog":ot("cancel",n),ot("close",n);break;case"iframe":case"object":case"embed":ot("load",n);break;case"video":case"audio":for(t=0;t<ya.length;t++)ot(ya[t],n);break;case"source":ot("error",n);break;case"img":case"image":case"link":ot("error",n),ot("load",n);break;case"details":ot("toggle",n);break;case"input":xm(n,o),ot("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!o.multiple},ot("invalid",n);break;case"textarea":Im(n,o),ot("invalid",n)}Jh(r,o),t=null;for(var s in o)o.hasOwnProperty(s)&&(i=o[s],s==="children"?typeof i=="string"?n.textContent!==i&&(t=["children",i]):typeof i=="number"&&n.textContent!==""+i&&(t=["children",""+i]):Aa.hasOwnProperty(s)&&i!=null&&s==="onScroll"&&ot("scroll",n));switch(r){case"input":Jl(n),km(n,o,!0);break;case"textarea":Jl(n),Nm(n);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(n.onclick=bu)}n=t,e.updateQueue=n,n!==null&&(e.flags|=4)}else{switch(s=i.nodeType===9?i:i.ownerDocument,t===Hh.html&&(t=B1(r)),t===Hh.html?r==="script"?(t=s.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=s.createElement(r,{is:n.is}):(t=s.createElement(r),r==="select"&&(s=t,n.multiple?s.multiple=!0:n.size&&(s.size=n.size))):t=s.createElementNS(t,r),t[Xn]=e,t[Eu]=n,Hv(t,e,!1,!1),e.stateNode=t,s=Yh(r,n),r){case"dialog":ot("cancel",t),ot("close",t),i=n;break;case"iframe":case"object":case"embed":ot("load",t),i=n;break;case"video":case"audio":for(i=0;i<ya.length;i++)ot(ya[i],t);i=n;break;case"source":ot("error",t),i=n;break;case"img":case"image":case"link":ot("error",t),ot("load",t),i=n;break;case"details":ot("toggle",t),i=n;break;case"input":xm(t,n),i=zh(t,n),ot("invalid",t);break;case"option":i=qh(t,n);break;case"select":t._wrapperState={wasMultiple:!!n.multiple},i=ut({},n,{value:void 0}),ot("invalid",t);break;case"textarea":Im(t,n),i=$h(t,n),ot("invalid",t);break;default:i=n}Jh(r,i);var a=i;for(o in a)if(a.hasOwnProperty(o)){var l=a[o];o==="style"?W1(t,l):o==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&z1(t,l)):o==="children"?typeof l=="string"?(r!=="textarea"||l!=="")&&Da(t,l):typeof l=="number"&&Da(t,""+l):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(Aa.hasOwnProperty(o)?l!=null&&o==="onScroll"&&ot("scroll",t):l!=null&&Id(t,o,l,s))}switch(r){case"input":Jl(t),km(t,n,!1);break;case"textarea":Jl(t),Nm(t);break;case"option":n.value!=null&&t.setAttribute("value",""+li(n.value));break;case"select":t.multiple=!!n.multiple,o=n.value,o!=null?Yo(t,!!n.multiple,o,!1):n.defaultValue!=null&&Yo(t,!!n.multiple,n.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=bu)}Sv(r,n)&&(e.flags|=4)}e.ref!==null&&(e.flags|=128)}return null;case 6:if(t&&e.stateNode!=null)Jv(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(me(166));r=Ji(Va.current),Ji(xn.current),nu(e)?(n=e.stateNode,r=e.memoizedProps,n[Xn]=e,n.nodeValue!==r&&(e.flags|=4)):(n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[Xn]=e,e.stateNode=n)}return null;case 13:return st(vt),n=e.memoizedState,(e.flags&64)!==0?(e.lanes=r,e):(n=n!==null,r=!1,t===null?e.memoizedProps.fallback!==void 0&&nu(e):r=t.memoizedState!==null,n&&!r&&(e.mode&2)!==0&&(t===null&&e.memoizedProps.unstable_avoidThisFallback!==!0||(vt.current&1)!==0?Kt===0&&(Kt=3):((Kt===0||Kt===3)&&(Kt=4),lr===null||(Ga&134217727)===0&&(hs&134217727)===0||ts(lr,or))),(n||r)&&(e.flags|=4),null);case 4:return as(),pd(e),t===null&&vv(e.stateNode.containerInfo),null;case 10:return Qd(e),null;case 17:return _r(e.type)&&Ou(),null;case 19:if(st(vt),n=e.memoizedState,n===null)return null;if(o=(e.flags&64)!==0,s=n.rendering,s===null)if(o)ca(n,!1);else{if(Kt!==0||t!==null&&(t.flags&64)!==0)for(t=e.child;t!==null;){if(s=Au(t),s!==null){for(e.flags|=64,ca(n,!1),o=s.updateQueue,o!==null&&(e.updateQueue=o,e.flags|=4),n.lastEffect===null&&(e.firstEffect=null),e.lastEffect=n.lastEffect,n=r,r=e.child;r!==null;)o=r,t=n,o.flags&=2,o.nextEffect=null,o.firstEffect=null,o.lastEffect=null,s=o.alternate,s===null?(o.childLanes=0,o.lanes=t,o.child=null,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,t=s.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return wt(vt,vt.current&1|2),e.child}t=t.sibling}n.tail!==null&&ir()>_d&&(e.flags|=64,o=!0,ca(n,!1),e.lanes=33554432)}else{if(!o)if(t=Au(s),t!==null){if(e.flags|=64,o=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),ca(n,!0),n.tail===null&&n.tailMode==="hidden"&&!s.alternate&&!kn)return e=e.lastEffect=n.lastEffect,e!==null&&(e.nextEffect=null),null}else 2*ir()-n.renderingStartTime>_d&&r!==1073741824&&(e.flags|=64,o=!0,ca(n,!1),e.lanes=33554432);n.isBackwards?(s.sibling=e.child,e.child=s):(r=n.last,r!==null?r.sibling=s:e.child=s,n.last=s)}return n.tail!==null?(r=n.tail,n.rendering=r,n.tail=r.sibling,n.lastEffect=e.lastEffect,n.renderingStartTime=ir(),r.sibling=null,e=vt.current,wt(vt,o?e&1|2:e&1),r):null;case 23:case 24:return h0(),t!==null&&t.memoizedState!==null!=(e.memoizedState!==null)&&n.mode!=="unstable-defer-without-hiding"&&(e.flags|=4),null}throw Error(me(156,e.tag))}function B3(t){switch(t.tag){case 1:_r(t.type)&&Ou();var e=t.flags;return e&4096?(t.flags=e&-4097|64,t):null;case 3:if(as(),st(wr),st(sr),r0(),e=t.flags,(e&64)!==0)throw Error(me(285));return t.flags=e&-4097|64,t;case 5:return t0(t),null;case 13:return st(vt),e=t.flags,e&4096?(t.flags=e&-4097|64,t):null;case 19:return st(vt),null;case 4:return as(),null;case 10:return Qd(t),null;case 23:case 24:return h0(),null;default:return null}}function l0(t,e){try{var r="",n=e;do r+=_4(n),n=n.return;while(n);var i=r}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:i}}function yd(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var z3=typeof WeakMap=="function"?WeakMap:Map;function Yv(t,e,r){r=ni(-1,r),r.tag=3,r.payload={element:null};var n=e.value;return r.callback=function(){Mu||(Mu=!0,Sd=n),yd(t,e)},r}function Kv(t,e,r){r=ni(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var i=e.value;r.payload=function(){return yd(t,e),n(i)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(r.callback=function(){typeof n!="function"&&(Tn===null?Tn=new Set([this]):Tn.add(this),yd(t,e));var s=e.stack;this.componentDidCatch(e.value,{componentStack:s!==null?s:""})}),r}var V3=typeof WeakSet=="function"?WeakSet:Set;function T1(t){var e=t.ref;if(e!==null)if(typeof e=="function")try{e(null)}catch(r){ai(t,r)}else e.current=null}function W3(t,e){switch(e.tag){case 0:case 11:case 15:case 22:return;case 1:if(e.flags&256&&t!==null){var r=t.memoizedProps,n=t.memoizedState;t=e.stateNode,e=t.getSnapshotBeforeUpdate(e.elementType===e.type?r:on(e.type,r),n),t.__reactInternalSnapshotBeforeUpdate=e}return;case 3:e.flags&256&&Yd(e.stateNode.containerInfo);return;case 5:case 6:case 4:case 17:return}throw Error(me(163))}function q3(t,e,r){switch(r.tag){case 0:case 11:case 15:case 22:if(e=r.updateQueue,e=e!==null?e.lastEffect:null,e!==null){t=e=e.next;do{if((t.tag&3)===3){var n=t.create;t.destroy=n()}t=t.next}while(t!==e)}if(e=r.updateQueue,e=e!==null?e.lastEffect:null,e!==null){t=e=e.next;do{var i=t;n=i.next,i=i.tag,(i&4)!==0&&(i&1)!==0&&(ow(r,t),X3(r,t)),t=n}while(t!==e)}return;case 1:t=r.stateNode,r.flags&4&&(e===null?t.componentDidMount():(n=r.elementType===r.type?e.memoizedProps:on(r.type,e.memoizedProps),t.componentDidUpdate(n,e.memoizedState,t.__reactInternalSnapshotBeforeUpdate))),e=r.updateQueue,e!==null&&s1(r,e,t);return;case 3:if(e=r.updateQueue,e!==null){if(t=null,r.child!==null)switch(r.child.tag){case 5:t=r.child.stateNode;break;case 1:t=r.child.stateNode}s1(r,e,t)}return;case 5:t=r.stateNode,e===null&&r.flags&4&&Sv(r.type,r.memoizedProps)&&t.focus();return;case 6:return;case 4:return;case 12:return;case 13:r.memoizedState===null&&(r=r.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&Q1(r))));return;case 19:case 17:case 20:case 21:case 23:case 24:return}throw Error(me(163))}function x1(t,e){for(var r=t;;){if(r.tag===5){var n=r.stateNode;if(e)n=n.style,typeof n.setProperty=="function"?n.setProperty("display","none","important"):n.display="none";else{n=r.stateNode;var i=r.memoizedProps.style;i=i!=null&&i.hasOwnProperty("display")?i.display:null,n.style.display=V1("display",i)}}else if(r.tag===6)r.stateNode.nodeValue=e?"":r.memoizedProps;else if((r.tag!==23&&r.tag!==24||r.memoizedState===null||r===t)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}}function k1(t,e){if(Ki&&typeof Ki.onCommitFiberUnmount=="function")try{Ki.onCommitFiberUnmount(Kd,e)}catch{}switch(e.tag){case 0:case 11:case 14:case 15:case 22:if(t=e.updateQueue,t!==null&&(t=t.lastEffect,t!==null)){var r=t=t.next;do{var n=r,i=n.destroy;if(n=n.tag,i!==void 0)if((n&4)!==0)ow(e,r);else{n=e;try{i()}catch(o){ai(n,o)}}r=r.next}while(r!==t)}break;case 1:if(T1(e),t=e.stateNode,typeof t.componentWillUnmount=="function")try{t.props=e.memoizedProps,t.state=e.memoizedState,t.componentWillUnmount()}catch(o){ai(e,o)}break;case 5:T1(e);break;case 4:Zv(t,e)}}function I1(t){t.alternate=null,t.child=null,t.dependencies=null,t.firstEffect=null,t.lastEffect=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.return=null,t.updateQueue=null}function N1(t){return t.tag===5||t.tag===3||t.tag===4}function A1(t){e:{for(var e=t.return;e!==null;){if(N1(e))break e;e=e.return}throw Error(me(160))}var r=e;switch(e=r.stateNode,r.tag){case 5:var n=!1;break;case 3:e=e.containerInfo,n=!0;break;case 4:e=e.containerInfo,n=!0;break;default:throw Error(me(161))}r.flags&16&&(Da(e,""),r.flags&=-17);e:t:for(r=t;;){for(;r.sibling===null;){if(r.return===null||N1(r.return)){r=null;break e}r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.flags&2||r.child===null||r.tag===4)continue t;r.child.return=r,r=r.child}if(!(r.flags&2)){r=r.stateNode;break e}}n?gd(t,r,e):md(t,r,e)}function gd(t,e,r){var n=t.tag,i=n===5||n===6;if(i)t=i?t.stateNode:t.stateNode.instance,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=bu));else if(n!==4&&(t=t.child,t!==null))for(gd(t,e,r),t=t.sibling;t!==null;)gd(t,e,r),t=t.sibling}function md(t,e,r){var n=t.tag,i=n===5||n===6;if(i)t=i?t.stateNode:t.stateNode.instance,e?r.insertBefore(t,e):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(md(t,e,r),t=t.sibling;t!==null;)md(t,e,r),t=t.sibling}function Zv(t,e){for(var r=e,n=!1,i,o;;){if(!n){n=r.return;e:for(;;){if(n===null)throw Error(me(160));switch(i=n.stateNode,n.tag){case 5:o=!1;break e;case 3:i=i.containerInfo,o=!0;break e;case 4:i=i.containerInfo,o=!0;break e}n=n.return}n=!0}if(r.tag===5||r.tag===6){e:for(var s=t,a=r,l=a;;)if(k1(s,l),l.child!==null&&l.tag!==4)l.child.return=l,l=l.child;else{if(l===a)break e;for(;l.sibling===null;){if(l.return===null||l.return===a)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}o?(s=i,a=r.stateNode,s.nodeType===8?s.parentNode.removeChild(a):s.removeChild(a)):i.removeChild(r.stateNode)}else if(r.tag===4){if(r.child!==null){i=r.stateNode.containerInfo,o=!0,r.child.return=r,r=r.child;continue}}else if(k1(t,r),r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return,r.tag===4&&(n=!1)}r.sibling.return=r.return,r=r.sibling}}function Ph(t,e){switch(e.tag){case 0:case 11:case 14:case 15:case 22:var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var n=r=r.next;do(n.tag&3)===3&&(t=n.destroy,n.destroy=void 0,t!==void 0&&t()),n=n.next;while(n!==r)}return;case 1:return;case 5:if(r=e.stateNode,r!=null){n=e.memoizedProps;var i=t!==null?t.memoizedProps:n;t=e.type;var o=e.updateQueue;if(e.updateQueue=null,o!==null){for(r[Eu]=n,t==="input"&&n.type==="radio"&&n.name!=null&&j1(r,n),Yh(t,i),e=Yh(t,n),i=0;i<o.length;i+=2){var s=o[i],a=o[i+1];s==="style"?W1(r,a):s==="dangerouslySetInnerHTML"?z1(r,a):s==="children"?Da(r,a):Id(r,s,a,e)}switch(t){case"input":Vh(r,n);break;case"textarea":U1(r,n);break;case"select":t=r._wrapperState.wasMultiple,r._wrapperState.wasMultiple=!!n.multiple,o=n.value,o!=null?Yo(r,!!n.multiple,o,!1):t!==!!n.multiple&&(n.defaultValue!=null?Yo(r,!!n.multiple,n.defaultValue,!0):Yo(r,!!n.multiple,n.multiple?[]:"",!1))}}}return;case 6:if(e.stateNode===null)throw Error(me(162));e.stateNode.nodeValue=e.memoizedProps;return;case 3:r=e.stateNode,r.hydrate&&(r.hydrate=!1,Q1(r.containerInfo));return;case 12:return;case 13:e.memoizedState!==null&&(f0=ir(),x1(e.child,!0)),D1(e);return;case 19:D1(e);return;case 17:return;case 23:case 24:x1(e,e.memoizedState!==null);return}throw Error(me(163))}function D1(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new V3),e.forEach(function(n){var i=tT.bind(null,t,n);r.has(n)||(r.add(n),n.then(i,i))})}}function $3(t,e){return t!==null&&(t=t.memoizedState,t===null||t.dehydrated!==null)?(e=e.memoizedState,e!==null&&e.dehydrated===null):!1}var H3=Math.ceil,Pu=to.ReactCurrentDispatcher,u0=to.ReactCurrentOwner,De=0,lr=null,Mt=null,or=0,Qi=0,vd=di(0),Kt=0,Ku=null,cs=0,Ga=0,hs=0,c0=0,wd=null,f0=0,_d=1/0;function ds(){_d=ir()+500}var xe=null,Mu=!1,Sd=null,Tn=null,fi=!1,ka=null,ga=90,bd=[],Ed=[],zn=null,Ia=0,Od=null,hu=-1,jn=0,du=0,Na=null,pu=!1;function Cr(){return(De&48)!==0?ir():hu!==-1?hu:hu=ir()}function oi(t){if(t=t.mode,(t&2)===0)return 1;if((t&4)===0)return ss()===99?1:2;if(jn===0&&(jn=cs),C3.transition!==0){du!==0&&(du=wd!==null?wd.pendingLanes:0),t=jn;var e=4186112&~du;return e&=-e,e===0&&(t=4186112&~t,e=t&-t,e===0&&(e=8192)),e}return t=ss(),(De&4)!==0&&t===98?t=_u(12,jn):(t=P4(t),t=_u(t,jn)),t}function si(t,e,r){if(50<Ia)throw Ia=0,Od=null,Error(me(185));if(t=Zu(t,e),t===null)return null;Wu(t,e,r),t===lr&&(hs|=e,Kt===4&&ts(t,or));var n=ss();e===1?(De&8)!==0&&(De&48)===0?Td(t):(Yr(t,r),De===0&&(ds(),In())):((De&4)===0||n!==98&&n!==99||(zn===null?zn=new Set([t]):zn.add(t)),Yr(t,r)),wd=t}function Zu(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}function Yr(t,e){for(var r=t.callbackNode,n=t.suspendedLanes,i=t.pingedLanes,o=t.expirationTimes,s=t.pendingLanes;0<s;){var a=31-ui(s),l=1<<a,h=o[a];if(h===-1){if((l&n)===0||(l&i)!==0){h=e,Bo(l);var p=tt;o[a]=10<=p?h+250:6<=p?h+5e3:-1}}else h<=e&&(t.expiredLanes|=l);s&=~l}if(n=La(t,t===lr?or:0),e=tt,n===0)r!==null&&(r!==Dh&&sd(r),t.callbackNode=null,t.callbackPriority=0);else{if(r!==null){if(t.callbackPriority===e)return;r!==Dh&&sd(r)}e===15?(r=Td.bind(null,t),Mn===null?(Mn=[r],fu=Zd(Ju,Nv)):Mn.push(r),r=Dh):e===14?r=Ua(99,Td.bind(null,t)):(r=M4(e),r=Ua(r,Xv.bind(null,t))),t.callbackPriority=e,t.callbackNode=r}}function Xv(t){if(hu=-1,du=jn=0,(De&48)!==0)throw Error(me(327));var e=t.callbackNode;if(pi()&&t.callbackNode!==e)return null;var r=La(t,t===lr?or:0);if(r===0)return null;var n=r,i=De;De|=16;var o=rw();(lr!==t||or!==n)&&(ds(),rs(t,n));do try{Y3();break}catch(a){tw(t,a)}while(1);if(Xd(),Pu.current=o,De=i,Mt!==null?n=0:(lr=null,or=0,n=Kt),(cs&hs)!==0)rs(t,0);else if(n!==0){if(n===2&&(De|=64,t.hydrate&&(t.hydrate=!1,Yd(t.containerInfo)),r=av(t),r!==0&&(n=ma(t,r))),n===1)throw e=Ku,rs(t,0),ts(t,r),Yr(t,ir()),e;switch(t.finishedWork=t.current.alternate,t.finishedLanes=r,n){case 0:case 1:throw Error(me(345));case 2:qi(t);break;case 3:if(ts(t,r),(r&62914560)===r&&(n=f0+500-ir(),10<n)){if(La(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Cr(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Xm(qi.bind(null,t),n);break}qi(t);break;case 4:if(ts(t,r),(r&4186112)===r)break;for(n=t.eventTimes,i=-1;0<r;){var s=31-ui(r);o=1<<s,s=n[s],s>i&&(i=s),r&=~o}if(r=i,r=ir()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*H3(r/1960))-r,10<r){t.timeoutHandle=Xm(qi.bind(null,t),r);break}qi(t);break;case 5:qi(t);break;default:throw Error(me(329))}}return Yr(t,ir()),t.callbackNode===e?Xv.bind(null,t):null}function ts(t,e){for(e&=~c0,e&=~hs,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-ui(e),n=1<<r;t[r]=-1,e&=~n}}function Td(t){if((De&48)!==0)throw Error(me(327));if(pi(),t===lr&&(t.expiredLanes&or)!==0){var e=or,r=ma(t,e);(cs&hs)!==0&&(e=La(t,e),r=ma(t,e))}else e=La(t,0),r=ma(t,e);if(t.tag!==0&&r===2&&(De|=64,t.hydrate&&(t.hydrate=!1,Yd(t.containerInfo)),e=av(t),e!==0&&(r=ma(t,e))),r===1)throw r=Ku,rs(t,0),ts(t,e),Yr(t,ir()),r;return t.finishedWork=t.current.alternate,t.finishedLanes=e,qi(t),Yr(t,ir()),null}function G3(){if(zn!==null){var t=zn;zn=null,t.forEach(function(e){e.expiredLanes|=24&e.pendingLanes,Yr(e,ir())})}In()}function Qv(t,e){var r=De;De|=1;try{return t(e)}finally{De=r,De===0&&(ds(),In())}}function ew(t,e){var r=De;De&=-2,De|=8;try{return t(e)}finally{De=r,De===0&&(ds(),In())}}function ou(t,e){wt(vd,Qi),Qi|=e,cs|=e}function h0(){Qi=vd.current,st(vd)}function rs(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,k3(r)),Mt!==null)for(r=Mt.return;r!==null;){var n=r;switch(n.tag){case 1:n=n.type.childContextTypes,n!=null&&Ou();break;case 3:as(),st(wr),st(sr),r0();break;case 5:t0(n);break;case 4:as();break;case 13:st(vt);break;case 19:st(vt);break;case 10:Qd(n);break;case 23:case 24:h0()}r=r.return}lr=t,Mt=hi(t.current,null),or=Qi=cs=e,Kt=0,Ku=null,c0=hs=Ga=0}function tw(t,e){do{var r=Mt;try{if(Xd(),Ta.current=Lu,Du){for(var n=At.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}Du=!1}if(Wa=0,Yt=nr=At=null,xa=!1,u0.current=null,r===null||r.return===null){Kt=1,Ku=e,Mt=null;break}e:{var o=t,s=r.return,a=r,l=e;if(e=or,a.flags|=2048,a.firstEffect=a.lastEffect=null,l!==null&&typeof l=="object"&&typeof l.then=="function"){var h=l;if((a.mode&2)===0){var p=a.alternate;p?(a.updateQueue=p.updateQueue,a.memoizedState=p.memoizedState,a.lanes=p.lanes):(a.updateQueue=null,a.memoizedState=null)}var m=(vt.current&1)!==0,y=s;do{var w;if(w=y.tag===13){var b=y.memoizedState;if(b!==null)w=b.dehydrated!==null;else{var N=y.memoizedProps;w=N.fallback===void 0?!1:N.unstable_avoidThisFallback!==!0?!0:!m}}if(w){var O=y.updateQueue;if(O===null){var I=new Set;I.add(h),y.updateQueue=I}else O.add(h);if((y.mode&2)===0){if(y.flags|=64,a.flags|=16384,a.flags&=-2981,a.tag===1)if(a.alternate===null)a.tag=17;else{var R=ni(-1,1);R.tag=2,ii(a,R)}a.lanes|=1;break e}l=void 0,a=e;var J=o.pingCache;if(J===null?(J=o.pingCache=new z3,l=new Set,J.set(h,l)):(l=J.get(h),l===void 0&&(l=new Set,J.set(h,l))),!l.has(a)){l.add(a);var q=eT.bind(null,o,h,a);h.then(q,q)}y.flags|=4096,y.lanes=e;break e}y=y.return}while(y!==null);l=Error((Jo(a.type)||"A React component")+` suspended while rendering, but no fallback UI was specified.

Add a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.`)}Kt!==5&&(Kt=2),l=l0(l,a),y=s;do{switch(y.tag){case 3:o=l,y.flags|=4096,e&=-e,y.lanes|=e;var G=Yv(y,o,e);o1(y,G);break e;case 1:o=l;var F=y.type,z=y.stateNode;if((y.flags&64)===0&&(typeof F.getDerivedStateFromError=="function"||z!==null&&typeof z.componentDidCatch=="function"&&(Tn===null||!Tn.has(z)))){y.flags|=4096,e&=-e,y.lanes|=e;var S=Kv(y,o,e);o1(y,S);break e}}y=y.return}while(y!==null)}iw(r)}catch(W){e=W,Mt===r&&r!==null&&(Mt=r=r.return);continue}break}while(1)}function rw(){var t=Pu.current;return Pu.current=Lu,t===null?Lu:t}function ma(t,e){var r=De;De|=16;var n=rw();lr===t&&or===e||rs(t,e);do try{J3();break}catch(i){tw(t,i)}while(1);if(Xd(),De=r,Pu.current=n,Mt!==null)throw Error(me(261));return lr=null,or=0,Kt}function J3(){for(;Mt!==null;)nw(Mt)}function Y3(){for(;Mt!==null&&!A3();)nw(Mt)}function nw(t){var e=sw(t.alternate,t,Qi);t.memoizedProps=t.pendingProps,e===null?iw(t):Mt=e,u0.current=null}function iw(t){var e=t;do{var r=e.alternate;if(t=e.return,(e.flags&2048)===0){if(r=U3(r,e,Qi),r!==null){Mt=r;return}if(r=e,r.tag!==24&&r.tag!==23||r.memoizedState===null||(Qi&1073741824)!==0||(r.mode&4)===0){for(var n=0,i=r.child;i!==null;)n|=i.lanes|i.childLanes,i=i.sibling;r.childLanes=n}t!==null&&(t.flags&2048)===0&&(t.firstEffect===null&&(t.firstEffect=e.firstEffect),e.lastEffect!==null&&(t.lastEffect!==null&&(t.lastEffect.nextEffect=e.firstEffect),t.lastEffect=e.lastEffect),1<e.flags&&(t.lastEffect!==null?t.lastEffect.nextEffect=e:t.firstEffect=e,t.lastEffect=e))}else{if(r=B3(e),r!==null){r.flags&=2047,Mt=r;return}t!==null&&(t.firstEffect=t.lastEffect=null,t.flags|=2048)}if(e=e.sibling,e!==null){Mt=e;return}Mt=e=t}while(e!==null);Kt===0&&(Kt=5)}function qi(t){var e=ss();return Xi(99,K3.bind(null,t,e)),null}function K3(t,e){do pi();while(ka!==null);if((De&48)!==0)throw Error(me(327));var r=t.finishedWork;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(me(177));t.callbackNode=null;var n=r.lanes|r.childLanes,i=n,o=t.pendingLanes&~i;t.pendingLanes=i,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=i,t.mutableReadLanes&=i,t.entangledLanes&=i,i=t.entanglements;for(var s=t.eventTimes,a=t.expirationTimes;0<o;){var l=31-ui(o),h=1<<l;i[l]=0,s[l]=-1,a[l]=-1,o&=~h}if(zn!==null&&(n&24)===0&&zn.has(t)&&zn.delete(t),t===lr&&(Mt=lr=null,or=0),1<r.flags?r.lastEffect!==null?(r.lastEffect.nextEffect=r,n=r.firstEffect):n=r:n=r.firstEffect,n!==null){if(i=De,De|=32,u0.current=null,Ih=au,s=Hm(),td(s)){if("selectionStart"in s)a={start:s.selectionStart,end:s.selectionEnd};else e:if(a=(a=s.ownerDocument)&&a.defaultView||window,(h=a.getSelection&&a.getSelection())&&h.rangeCount!==0){a=h.anchorNode,o=h.anchorOffset,l=h.focusNode,h=h.focusOffset;try{a.nodeType,l.nodeType}catch{a=null;break e}var p=0,m=-1,y=-1,w=0,b=0,N=s,O=null;t:for(;;){for(var I;N!==a||o!==0&&N.nodeType!==3||(m=p+o),N!==l||h!==0&&N.nodeType!==3||(y=p+h),N.nodeType===3&&(p+=N.nodeValue.length),(I=N.firstChild)!==null;)O=N,N=I;for(;;){if(N===s)break t;if(O===a&&++w===o&&(m=p),O===l&&++b===h&&(y=p),(I=N.nextSibling)!==null)break;N=O,O=N.parentNode}N=I}a=m===-1||y===-1?null:{start:m,end:y}}else a=null;a=a||{start:0,end:0}}else a=null;Nh={focusedElem:s,selectionRange:a},au=!1,Na=null,pu=!1,xe=n;do try{Z3()}catch(W){if(xe===null)throw Error(me(330));ai(xe,W),xe=xe.nextEffect}while(xe!==null);Na=null,xe=n;do try{for(s=t;xe!==null;){var R=xe.flags;if(R&16&&Da(xe.stateNode,""),R&128){var J=xe.alternate;if(J!==null){var q=J.ref;q!==null&&(typeof q=="function"?q(null):q.current=null)}}switch(R&1038){case 2:A1(xe),xe.flags&=-3;break;case 6:A1(xe),xe.flags&=-3,Ph(xe.alternate,xe);break;case 1024:xe.flags&=-1025;break;case 1028:xe.flags&=-1025,Ph(xe.alternate,xe);break;case 4:Ph(xe.alternate,xe);break;case 8:a=xe,Zv(s,a);var G=a.alternate;I1(a),G!==null&&I1(G)}xe=xe.nextEffect}}catch(W){if(xe===null)throw Error(me(330));ai(xe,W),xe=xe.nextEffect}while(xe!==null);if(q=Nh,J=Hm(),R=q.focusedElem,s=q.selectionRange,J!==R&&R&&R.ownerDocument&&yv(R.ownerDocument.documentElement,R)){for(s!==null&&td(R)&&(J=s.start,q=s.end,q===void 0&&(q=J),"selectionStart"in R?(R.selectionStart=J,R.selectionEnd=Math.min(q,R.value.length)):(q=(J=R.ownerDocument||document)&&J.defaultView||window,q.getSelection&&(q=q.getSelection(),a=R.textContent.length,G=Math.min(s.start,a),s=s.end===void 0?G:Math.min(s.end,a),!q.extend&&G>s&&(a=s,s=G,G=a),a=$m(R,G),o=$m(R,s),a&&o&&(q.rangeCount!==1||q.anchorNode!==a.node||q.anchorOffset!==a.offset||q.focusNode!==o.node||q.focusOffset!==o.offset)&&(J=J.createRange(),J.setStart(a.node,a.offset),q.removeAllRanges(),G>s?(q.addRange(J),q.extend(o.node,o.offset)):(J.setEnd(o.node,o.offset),q.addRange(J)))))),J=[],q=R;q=q.parentNode;)q.nodeType===1&&J.push({element:q,left:q.scrollLeft,top:q.scrollTop});for(typeof R.focus=="function"&&R.focus(),R=0;R<J.length;R++)q=J[R],q.element.scrollLeft=q.left,q.element.scrollTop=q.top}au=!!Ih,Nh=Ih=null,t.current=r,xe=n;do try{for(R=t;xe!==null;){var F=xe.flags;if(F&36&&q3(R,xe.alternate,xe),F&128){J=void 0;var z=xe.ref;if(z!==null){var S=xe.stateNode;switch(xe.tag){case 5:J=S;break;default:J=S}typeof z=="function"?z(J):z.current=J}}xe=xe.nextEffect}}catch(W){if(xe===null)throw Error(me(330));ai(xe,W),xe=xe.nextEffect}while(xe!==null);xe=null,R3(),De=i}else t.current=r;if(fi)fi=!1,ka=t,ga=e;else for(xe=n;xe!==null;)e=xe.nextEffect,xe.nextEffect=null,xe.flags&8&&(F=xe,F.sibling=null,F.stateNode=null),xe=e;if(n=t.pendingLanes,n===0&&(Tn=null),n===1?t===Od?Ia++:(Ia=0,Od=t):Ia=0,r=r.stateNode,Ki&&typeof Ki.onCommitFiberRoot=="function")try{Ki.onCommitFiberRoot(Kd,r,void 0,(r.current.flags&64)===64)}catch{}if(Yr(t,ir()),Mu)throw Mu=!1,t=Sd,Sd=null,t;return(De&8)!==0||In(),null}function Z3(){for(;xe!==null;){var t=xe.alternate;pu||Na===null||((xe.flags&8)!==0?Rm(xe,Na)&&(pu=!0):xe.tag===13&&$3(t,xe)&&Rm(xe,Na)&&(pu=!0));var e=xe.flags;(e&256)!==0&&W3(t,xe),(e&512)===0||fi||(fi=!0,Ua(97,function(){return pi(),null})),xe=xe.nextEffect}}function pi(){if(ga!==90){var t=97<ga?97:ga;return ga=90,Xi(t,Q3)}return!1}function X3(t,e){bd.push(e,t),fi||(fi=!0,Ua(97,function(){return pi(),null}))}function ow(t,e){Ed.push(e,t),fi||(fi=!0,Ua(97,function(){return pi(),null}))}function Q3(){if(ka===null)return!1;var t=ka;if(ka=null,(De&48)!==0)throw Error(me(331));var e=De;De|=32;var r=Ed;Ed=[];for(var n=0;n<r.length;n+=2){var i=r[n],o=r[n+1],s=i.destroy;if(i.destroy=void 0,typeof s=="function")try{s()}catch(l){if(o===null)throw Error(me(330));ai(o,l)}}for(r=bd,bd=[],n=0;n<r.length;n+=2){i=r[n],o=r[n+1];try{var a=i.create;i.destroy=a()}catch(l){if(o===null)throw Error(me(330));ai(o,l)}}for(a=t.current.firstEffect;a!==null;)t=a.nextEffect,a.nextEffect=null,a.flags&8&&(a.sibling=null,a.stateNode=null),a=t;return De=e,In(),!0}function R1(t,e,r){e=l0(r,e),e=Yv(t,e,1),ii(t,e),e=Cr(),t=Zu(t,1),t!==null&&(Wu(t,1,e),Yr(t,e))}function ai(t,e){if(t.tag===3)R1(t,t,e);else for(var r=t.return;r!==null;){if(r.tag===3){R1(r,t,e);break}else if(r.tag===1){var n=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Tn===null||!Tn.has(n))){t=l0(e,t);var i=Kv(r,t,1);if(ii(r,i),i=Cr(),r=Zu(r,1),r!==null)Wu(r,1,i),Yr(r,i);else if(typeof n.componentDidCatch=="function"&&(Tn===null||!Tn.has(n)))try{n.componentDidCatch(e,t)}catch{}break}}r=r.return}}function eT(t,e,r){var n=t.pingCache;n!==null&&n.delete(e),e=Cr(),t.pingedLanes|=t.suspendedLanes&r,lr===t&&(or&r)===r&&(Kt===4||Kt===3&&(or&62914560)===or&&500>ir()-f0?rs(t,0):c0|=r),Yr(t,e)}function tT(t,e){var r=t.stateNode;r!==null&&r.delete(e),e=0,e===0&&(e=t.mode,(e&2)===0?e=1:(e&4)===0?e=ss()===99?1:2:(jn===0&&(jn=cs),e=zo(62914560&~jn),e===0&&(e=4194304))),r=Cr(),t=Zu(t,e),t!==null&&(Wu(t,e,r),Yr(t,r))}var sw;sw=function(t,e,r){var n=e.lanes;if(t!==null)if(t.memoizedProps!==e.pendingProps||wr.current)sn=!0;else if((r&n)!==0)sn=(t.flags&16384)!==0;else{switch(sn=!1,e.tag){case 3:v1(e),Ch();break;case 5:u1(e);break;case 1:_r(e.type)&&cu(e);break;case 4:ud(e,e.stateNode.containerInfo);break;case 10:n=e.memoizedProps.value;var i=e.type._context;wt(Tu,i._currentValue),i._currentValue=n;break;case 13:if(e.memoizedState!==null)return(r&e.child.childLanes)!==0?w1(t,e,r):(wt(vt,vt.current&1),e=Bn(t,e,r),e!==null?e.sibling:null);wt(vt,vt.current&1);break;case 19:if(n=(r&e.childLanes)!==0,(t.flags&64)!==0){if(n)return O1(t,e,r);e.flags|=64}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),wt(vt,vt.current),n)break;return null;case 23:case 24:return e.lanes=0,Fh(t,e,r)}return Bn(t,e,r)}else sn=!1;switch(e.lanes=0,e.tag){case 2:if(n=e.type,t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2),t=e.pendingProps,i=os(e,sr.current),Qo(e,r),i=i0(null,e,n,t,i,r),e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0){if(e.tag=1,e.memoizedState=null,e.updateQueue=null,_r(n)){var o=!0;cu(e)}else o=!1;e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,e0(e);var s=n.getDerivedStateFromProps;typeof s=="function"&&Iu(e,n,s,t),i.updater=Yu,e.stateNode=i,i._reactInternals=e,ld(e,n,t,r),e=dd(null,e,n,!0,o,r)}else e.tag=0,vr(null,e,i,r),e=e.child;return e;case 16:i=e.elementType;e:{switch(t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2),t=e.pendingProps,o=i._init,i=o(i._payload),e.type=i,o=e.tag=nT(i),t=on(i,t),o){case 0:e=hd(null,e,i,t,r);break e;case 1:e=m1(null,e,i,t,r);break e;case 11:e=y1(null,e,i,t,r);break e;case 14:e=g1(null,e,i,on(i.type,t),n,r);break e}throw Error(me(306,i,""))}return e;case 0:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:on(n,i),hd(t,e,n,i,r);case 1:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:on(n,i),m1(t,e,n,i,r);case 3:if(v1(e),n=e.updateQueue,t===null||n===null)throw Error(me(282));if(n=e.pendingProps,i=e.memoizedState,i=i!==null?i.element:null,Dv(t,e),Ba(e,n,null,r),n=e.memoizedState.element,n===i)Ch(),e=Bn(t,e,r);else{if(i=e.stateNode,(o=i.hydrate)&&(Qn=Xo(e.stateNode.containerInfo.firstChild),Un=e,o=kn=!0),o){if(t=i.mutableSourceEagerHydrationData,t!=null)for(i=0;i<t.length;i+=2)o=t[i],o._workInProgressVersionPrimary=t[i+1],es.push(o);for(r=Lv(e,null,n,r),e.child=r;r;)r.flags=r.flags&-3|1024,r=r.sibling}else vr(t,e,n,r),Ch();e=e.child}return e;case 5:return u1(e),t===null&&cd(e),n=e.type,i=e.pendingProps,o=t!==null?t.memoizedProps:null,s=i.children,id(n,i)?s=null:o!==null&&id(n,o)&&(e.flags|=16),$v(t,e),vr(t,e,s,r),e.child;case 6:return t===null&&cd(e),null;case 13:return w1(t,e,r);case 4:return ud(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=Nu(e,null,n,r):vr(t,e,n,r),e.child;case 11:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:on(n,i),y1(t,e,n,i,r);case 7:return vr(t,e,e.pendingProps,r),e.child;case 8:return vr(t,e,e.pendingProps.children,r),e.child;case 12:return vr(t,e,e.pendingProps.children,r),e.child;case 10:e:{n=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value;var a=e.type._context;if(wt(Tu,a._currentValue),a._currentValue=o,s!==null)if(a=s.value,o=$r(a,o)?0:(typeof n._calculateChangedBits=="function"?n._calculateChangedBits(a,o):1073741823)|0,o===0){if(s.children===i.children&&!wr.current){e=Bn(t,e,r);break e}}else for(a=e.child,a!==null&&(a.return=e);a!==null;){var l=a.dependencies;if(l!==null){s=a.child;for(var h=l.firstContext;h!==null;){if(h.context===n&&(h.observedBits&o)!==0){a.tag===1&&(h=ni(-1,r&-r),h.tag=2,ii(a,h)),a.lanes|=r,h=a.alternate,h!==null&&(h.lanes|=r),Av(a.return,r),l.lanes|=r;break}h=h.next}}else s=a.tag===10&&a.type===e.type?null:a.child;if(s!==null)s.return=a;else for(s=a;s!==null;){if(s===e){s=null;break}if(a=s.sibling,a!==null){a.return=s.return,s=a;break}s=s.return}a=s}vr(t,e,i.children,r),e=e.child}return e;case 9:return i=e.type,o=e.pendingProps,n=o.children,Qo(e,r),i=Jr(i,o.unstable_observedBits),n=n(i),e.flags|=1,vr(t,e,n,r),e.child;case 14:return i=e.type,o=on(i,e.pendingProps),o=on(i.type,o),g1(t,e,i,o,n,r);case 15:return qv(t,e,e.type,e.pendingProps,n,r);case 17:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:on(n,i),t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2),e.tag=1,_r(n)?(t=!0,cu(e)):t=!1,Qo(e,r),Cv(e,n,i),ld(e,n,i,r),dd(null,e,n,!0,t,r);case 19:return O1(t,e,r);case 23:return Fh(t,e,r);case 24:return Fh(t,e,r)}throw Error(me(156,e.tag))};function rT(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function Hr(t,e,r,n){return new rT(t,e,r,n)}function d0(t){return t=t.prototype,!(!t||!t.isReactComponent)}function nT(t){if(typeof t=="function")return d0(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Bu)return 11;if(t===zu)return 14}return 2}function hi(t,e){var r=t.alternate;return r===null?(r=Hr(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.nextEffect=null,r.firstEffect=null,r.lastEffect=null),r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function yu(t,e,r,n,i,o){var s=2;if(n=t,typeof t=="function")d0(t)&&(s=1);else if(typeof t=="string")s=5;else e:switch(t){case Kn:return ns(r.children,i,o,e);case L1:s=8,i|=16;break;case Nd:s=8,i|=1;break;case va:return t=Hr(12,r,e,i|8),t.elementType=va,t.type=va,t.lanes=o,t;case wa:return t=Hr(13,r,e,i),t.type=wa,t.elementType=wa,t.lanes=o,t;case gu:return t=Hr(19,r,e,i),t.elementType=gu,t.lanes=o,t;case Ld:return p0(r,i,o,e);case Bh:return t=Hr(24,r,e,i),t.elementType=Bh,t.lanes=o,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Ad:s=10;break e;case Dd:s=9;break e;case Bu:s=11;break e;case zu:s=14;break e;case Rd:s=16,n=null;break e;case Cd:s=22;break e}throw Error(me(130,t==null?t:typeof t,""))}return e=Hr(s,r,e,i),e.elementType=t,e.type=n,e.lanes=o,e}function ns(t,e,r,n){return t=Hr(7,t,n,e),t.lanes=r,t}function p0(t,e,r,n){return t=Hr(23,t,n,e),t.elementType=Ld,t.lanes=r,t}function Mh(t,e,r){return t=Hr(6,t,null,e),t.lanes=r,t}function jh(t,e,r){return e=Hr(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function iT(t,e,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=r,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=bh(0),this.expirationTimes=bh(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=bh(0),this.mutableSourceEagerHydrationData=null}function oT(t,e,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:$i,key:n==null?null:""+n,children:t,containerInfo:e,implementation:r}}function ju(t,e,r,n){var i=e.current,o=Cr(),s=oi(i);e:if(r){r=r._reactInternals;t:{if(ro(r)!==r||r.tag!==1)throw Error(me(170));var a=r;do{switch(a.tag){case 3:a=a.stateNode.context;break t;case 1:if(_r(a.type)){a=a.stateNode.__reactInternalMemoizedMergedChildContext;break t}}a=a.return}while(a!==null);throw Error(me(171))}if(r.tag===1){var l=r.type;if(_r(l)){r=Ev(r,l,a);break e}}r=a}else r=ci;return e.context===null?e.context=r:e.pendingContext=r,e=ni(o,s),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),ii(i,e),si(i,s,o),s}function Uh(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function C1(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function y0(t,e){C1(t,e),(t=t.alternate)&&C1(t,e)}function sT(){return null}function g0(t,e,r){var n=r!=null&&r.hydrationOptions!=null&&r.hydrationOptions.mutableSources||null;if(r=new iT(t,e,r!=null&&r.hydrate===!0),e=Hr(3,null,null,e===2?7:e===1?3:0),r.current=e,e.stateNode=r,e0(e),t[us]=r.current,vv(t.nodeType===8?t.parentNode:t),n)for(t=0;t<n.length;t++){e=n[t];var i=e._getVersion;i=i(e._source),r.mutableSourceEagerHydrationData==null?r.mutableSourceEagerHydrationData=[e,i]:r.mutableSourceEagerHydrationData.push(e,i)}this._internalRoot=r}g0.prototype.render=function(t){ju(t,this._internalRoot,null,null)};g0.prototype.unmount=function(){var t=this._internalRoot,e=t.containerInfo;ju(null,t,null,function(){e[us]=null})};function Ja(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function aT(t,e){if(e||(e=t?t.nodeType===9?t.documentElement:t.firstChild:null,e=!(!e||e.nodeType!==1||!e.hasAttribute("data-reactroot"))),!e)for(var r;r=t.lastChild;)t.removeChild(r);return new g0(t,0,e?{hydrate:!0}:void 0)}function Xu(t,e,r,n,i){var o=r._reactRootContainer;if(o){var s=o._internalRoot;if(typeof i=="function"){var a=i;i=function(){var h=Uh(s);a.call(h)}}ju(e,s,t,i)}else{if(o=r._reactRootContainer=aT(r,n),s=o._internalRoot,typeof i=="function"){var l=i;i=function(){var h=Uh(s);l.call(h)}}ew(function(){ju(e,s,t,i)})}return Uh(s)}K1=function(t){if(t.tag===13){var e=Cr();si(t,4,e),y0(t,4)}};Bd=function(t){if(t.tag===13){var e=Cr();si(t,67108864,e),y0(t,67108864)}};Z1=function(t){if(t.tag===13){var e=Cr(),r=oi(t);si(t,r,e),y0(t,r)}};X1=function(t,e){return e()};Kh=function(t,e,r){switch(e){case"input":if(Vh(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var i=Gu(n);if(!i)throw Error(me(90));M1(n),Vh(n,i)}}}break;case"textarea":U1(t,r);break;case"select":e=r.value,e!=null&&Yo(t,!!r.multiple,e,!1)}};Md=Qv;H1=function(t,e,r,n,i){var o=De;De|=4;try{return Xi(98,t.bind(null,e,r,n,i))}finally{De=o,De===0&&(ds(),In())}};jd=function(){(De&49)===0&&(G3(),pi())};G1=function(t,e){var r=De;De|=2;try{return t(e)}finally{De=r,De===0&&(ds(),In())}};function aw(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Ja(e))throw Error(me(200));return oT(t,e,null,r)}var lT={Events:[$a,$o,Gu,q1,$1,pi,{current:!1}]},fa={findFiberByHostInstance:Gi,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},uT={bundleType:fa.bundleType,version:fa.version,rendererPackageName:fa.rendererPackageName,rendererConfig:fa.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:to.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Y1(t),t===null?null:t.stateNode},findFiberByHostInstance:fa.findFiberByHostInstance||sT,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&(ha=__REACT_DEVTOOLS_GLOBAL_HOOK__,!ha.isDisabled&&ha.supportsFiber))try{Kd=ha.inject(uT),Ki=ha}catch{}var ha;Kr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=lT;Kr.createPortal=aw;Kr.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(me(188)):Error(me(268,Object.keys(t)));return t=Y1(e),t=t===null?null:t.stateNode,t};Kr.flushSync=function(t,e){var r=De;if((r&48)!==0)return t(e);De|=1;try{if(t)return Xi(99,t.bind(null,e))}finally{De=r,In()}};Kr.hydrate=function(t,e,r){if(!Ja(e))throw Error(me(200));return Xu(null,t,e,!0,r)};Kr.render=function(t,e,r){if(!Ja(e))throw Error(me(200));return Xu(null,t,e,!1,r)};Kr.unmountComponentAtNode=function(t){if(!Ja(t))throw Error(me(40));return t._reactRootContainer?(ew(function(){Xu(null,null,t,!1,function(){t._reactRootContainer=null,t[us]=null})}),!0):!1};Kr.unstable_batchedUpdates=Qv;Kr.unstable_createPortal=function(t,e){return aw(t,e,2<arguments.length&&arguments[2]!==void 0?arguments[2]:null)};Kr.unstable_renderSubtreeIntoContainer=function(t,e,r,n){if(!Ja(r))throw Error(me(200));if(t==null||t._reactInternals===void 0)throw Error(me(38));return Xu(t,e,r,!1,n)};Kr.version="17.0.2"});var fw=Te((RA,cw)=>{"use strict";function uw(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(uw)}catch(t){console.error(t)}}uw(),cw.exports=lw()});var ys=Te(Sw=>{var mT={debug:!1,protocol:"http",host:"localhost",port:8080,socket_protocol:"ws",hotreload:5e3,python:void 0,python_node:7001,startpage:"src/index.html",errpage:"src/other/404.html",certpath:"node_server/ssl/cert.pem",keypath:"node_server/ssl/key.pem",dataserver:"http://localhost:4000",realmapp:"buckleup-ilscy",googleclientid:"406817559914-boi30d05dk9jtj55frgi1dg8gkp6rrj9.apps.googleusercontent.com"};Sw.settings=mT});var Ew,Ow,bw,Tw=mt(()=>{Ew=Ft(ys()),bw={log:console.log,gAuth:new Promise(t=>Ow=t)};Object.keys(bw).forEach(t=>{window[t]=bw[t]});(function(){if(location.hostname==="localhost"&&location.port!=="4000")return;function e(){gapi.load("auth2",()=>{gapi.auth2.init({client_id:Ew.settings.googleclientid,scope:"https://www.googleapis.com/auth/drive"}).then(i=>{Ow(()=>i)},i=>{console.log("UNHANDLED"),console.error(i)})})}let r=document.createElement("script");r.type="text/javascript",r.src="https://apis.google.com/js/platform.js",r.onload=e,document.head.appendChild(r)})()});var kw=Te(xw=>{"use strict";Object.defineProperty(xw,"__esModule",{value:!0})});var v0=Te(We=>{"use strict";Object.defineProperty(We,"__esModule",{value:!0});We.arrHas=We.arrLast=We.arrToBoolDict=We.arrToIdxDict=We.arrToDict=We.arrRemoveValues=We.arrReplace=We.arrDeepFlatten=We.arrFlatten=We.arrDivide=We.arrGetByIds=We.arrRemoveById=We.arrGen=void 0;var gi=mi(),vT=t=>Array(t).fill(null);We.arrGen=vT;function wT(t,e,r="id"){let n=Iw(t,r),i=gi.objRemoveKeys(n,e);return gi.objVals(i)}We.arrRemoveById=wT;function _T(t,e,r="id"){let n=Nw(e);return t.filter(i=>n[i[r]])}We.arrGetByIds=_T;function ST(t,e){let r=Math.ceil(t.length/e),n=We.arrGen(r).map(()=>[]);return t.forEach((i,o)=>n[Math.floor(o/e)].push(i)),n}We.arrDivide=ST;function bT(t){return[].concat.apply([],t)}We.arrFlatten=bT;var ET=t=>t.reduce((e,r)=>e.concat(gi.isType(r,"array")?We.arrDeepFlatten(r):r),[]);We.arrDeepFlatten=ET;function OT(t){let e=[...t];return{all:r=>{let n=[];return t.forEach((i,o)=>gi.equal(r,i)?n[o]=o:null),{with:i=>n.length?(n.forEach(o=>e[o]=i),e):t}},first:r=>{let n=t.findIndex(i=>gi.equal(r,i));return{with:i=>gi.nonValue(n)?t:(e[n]=i,e)}}}}We.arrReplace=OT;function TT(t,e){let r=[...t];return e.forEach(n=>r=r.filter(i=>!gi.equal(i,n))),r}We.arrRemoveValues=TT;function Iw(t,e){let r={};return t.forEach(n=>r[n[e]]=n),r}We.arrToDict=Iw;function xT(t){let e={};return t.forEach((r,n)=>e[r]=n+""),e}We.arrToIdxDict=xT;function Nw(t){let e={};return t.forEach(r=>e[r]=!0),e}We.arrToBoolDict=Nw;var kT=t=>t[t.length-1];We.arrLast=kT;function IT(t,e,r=!1){let n=r?i=>gi.equal(i,e):i=>i===e;return t.findIndex(n)!==-1}We.arrHas=IT});var Aw=Te(Qu=>{"use strict";Object.defineProperty(Qu,"__esModule",{value:!0});Qu.clone=void 0;function w0(t){let e,r,n,i,o,s,a;if(typeof t!="object"||t===null)return t;if(t instanceof Date)return new Date(t);if(r=Object.keys(t),n=r.length,Array.isArray(t)){for(s=new Array(n),i=0;i<n;i++)o=r[i],e=t[o],typeof e!="object"||e===null?s[o]=e:e instanceof Date?s[o]=new Date(e):s[o]=w0(e);return s}for(a={},i=0;i<n;i++)o=r[i],e=t[o],Object.hasOwnProperty.call(t,o)!==!1&&(typeof e!="object"||e===null?a[o]=e:e instanceof Date?a[o]=new Date(e):a[o]=w0(e));return a}Qu.clone=w0});var Dw=Te(tc=>{"use strict";Object.defineProperty(tc,"__esModule",{value:!0});tc.equal=void 0;function ec(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){if(t.constructor!==e.constructor)return!1;var r,n,i;if(Array.isArray(t)){if(r=t.length,r!==e.length)return!1;for(n=r;n--!==0;)if(!ec(t[n],e[n]))return!1;return!0}if(t instanceof Map&&e instanceof Map){if(t.size!==e.size)return!1;for(n of t.entries())if(!e.has(n[0]))return!1;for(n of t.entries())if(!ec(n[1],e.get(n[0])))return!1;return!0}if(t instanceof Set&&e instanceof Set){if(t.size!==e.size)return!1;for(n of t.entries())if(!e.has(n[0]))return!1;return!0}if(ArrayBuffer.isView(t)&&ArrayBuffer.isView(e)){if(r=t.length,r!=e.length)return!1;for(n=r;n--!==0;)if(t[n]!==e[n])return!1;return!0}if(t.constructor===RegExp)return t.source===e.source&&t.flags===e.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===e.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===e.toString();if(i=Object.keys(t),r=i.length,r!==Object.keys(e).length)return!1;for(n=r;n--!==0;)if(!Object.prototype.hasOwnProperty.call(e,i[n]))return!1;for(n=r;n--!==0;){var o=i[n];if(!(o==="_owner"&&t.$$typeof)&&!ec(t[o],e[o]))return!1}return!0}return t!==t&&e!==e}tc.equal=ec});var Cw=Te(_t=>{"use strict";Object.defineProperty(_t,"__esModule",{value:!0});_t.promiseOut=_t.debounceTimeOut=_t.randomColorHex=_t.uiid=_t.assertType=_t.type=_t.cloneLog=_t.unsubAll=_t.wait=_t.interval=void 0;var Wn=mi(),NT=(t,e,r)=>{if(Wn.isType(r,"number")&&r<1)throw Error(`argument "times" can't be less than 1`);let n=0,i=setInterval(()=>{t(n),n++,r&&n>=r&&clearInterval(i)},e);return{stop:()=>clearInterval(i)}};_t.interval=NT;var AT=t=>new Promise(e=>setTimeout(()=>e(),t));_t.wait=AT;var Rw=(t,e="unsubscribe")=>Wn.isType(t,"object")&&Wn.hasKey(t,e)?t[e]():null;function DT(t,e="unsubscribe"){if(Wn.isType(t,"array"))t.forEach(r=>Rw(r,e));else if(Wn.isType(t,"object"))Wn.objMap(t,({val:r})=>Rw(r,e));else throw Error('argument "objOrArr" must be of type "object" or "array"')}_t.unsubAll=DT;var RT=t=>console.log(Wn.clone(t));_t.cloneLog=RT;function CT(t){return typeof t=="object"?Array.isArray(t)?"array":t===null?"null":"object":t!==t?"NaN":typeof t}_t.type=CT;function FT(t,e){Wn.isType(e,"array")||(e=[e]);for(let r of e)if(Wn.isType(t,r))return;throw Error(`value needs to be of type ${e.join(" || ")}`)}_t.assertType=FT;var LT=()=>{let t=new Date().getTime(),e=performance&&performance.now&&performance.now()*1e3||0;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,n=>{let i=Math.random()*16;return t>0?(i=(t+i)%16|0,t=Math.floor(t/16)):(i=(e+i)%16|0,e=Math.floor(e/16)),(n==="x"?i:i&3|8).toString(16)})};_t.uiid=LT;var PT=()=>"#"+((1<<24)*Math.random()|0).toString(16);_t.randomColorHex=PT;function MT(){let t=null;return(e,r)=>{t&&clearTimeout(t),t=setTimeout(e,r)}}_t.debounceTimeOut=MT;function jT(){let t,e=new Promise(r=>t=r);return{resolve:t,promise:e}}_t.promiseOut=jT});var Fw=Te(rc=>{"use strict";Object.defineProperty(rc,"__esModule",{value:!0});rc.iterate=void 0;var _0=v0();function UT(t,e,r){let n=(i,o=!1)=>{let s=[];for(let a=0;a<t;a++)if(!e)s.push(i({x:a}));else for(let l=0;l<e;l++)if(!r)s.push(i({x:a,y:l}));else for(let h=0;h<r;h++)s.push(i({x:a,y:l,z:h}));return o?r&&e?_0.arrDivide(s,e*r).map(l=>_0.arrDivide(l,r)):e?_0.arrDivide(s,e):s:s};return{for:i=>{n(i)},map:i=>n(i),nestedMap:i=>n(i,!0)}}rc.iterate=UT});var Pw=Te(Lr=>{"use strict";Object.defineProperty(Lr,"__esModule",{value:!0});Lr.newNumFromRange=Lr.numberWithCommas=Lr.decPlace=Lr.average=Lr.rand=void 0;var Lw=mi(),BT=(t,e)=>Math.floor(Math.random()*(e+1-t))+t;Lr.rand=BT;var zT=t=>t.reduce((e=0,r=0)=>e+r,0)/t.length;Lr.average=zT;var VT=(t,e)=>parseFloat(t.toFixed(e));Lr.decPlace=VT;var WT=t=>t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",");Lr.numberWithCommas=WT;function qT(t,e,r){let n,i=0,o=Lw.isType(t,"array")?Lw.arrToBoolDict(t):{[t]:!0};do if(n=Lr.rand(e,r),i++,i>1e6)throw console.error("Check for infinite loops"),new Error("Looped 1 million times");while(o[n]);return n}Lr.newNumFromRange=qT});var Mw=Te(ht=>{"use strict";Object.defineProperty(ht,"__esModule",{value:!0});ht.objPromiseAll=ht.objSortKeys=ht.objResolve=ht.objExtract=ht.objKeyVals=ht.objVals=ht.objKeys=ht.objRemoveKeys=ht.objFilter=ht.objMap=void 0;function $T(t,e){let r={};for(let n in t)r[n]=e({key:n,val:t[n]});return r}ht.objMap=$T;function HT(t,e){let r=Object.assign({},t);for(let n in t)e({key:n,val:t[n]})||delete r[n];return r}ht.objFilter=HT;function GT(t,e){let r=Object.assign({},t);return e.forEach(n=>delete r[n]),r}ht.objRemoveKeys=GT;function nc(t){if(Object.keys)return Object.keys(t);let e=[];for(let r in t)e.push(r);return e}ht.objKeys=nc;var JT=t=>Object.values?Object.values(t):nc(t).map(e=>t[e]);ht.objVals=JT;var YT=t=>nc(t).map(e=>({key:e,val:t[e]}));ht.objKeyVals=YT;function KT(t,e){let r={};return e.forEach(n=>r[n]=t[n]),r}ht.objExtract=KT;var ZT=(t,e)=>e.split(".").reduce((r,n)=>r[n],t);ht.objResolve=ZT;var XT=(t,e)=>{let r={};return nc(t).sort(e).map(i=>r[i]=t[i]),r};ht.objSortKeys=XT;function QT(t){let e=ht.objKeyVals(t),r=e.length,n={},i=0;return new Promise(o=>e.forEach(({key:s,val:a})=>a.then(l=>{n[s]=l,i++,r===i&&o(n)})))}ht.objPromiseAll=QT});var jw=Te(vi=>{"use strict";Object.defineProperty(vi,"__esModule",{value:!0});vi.minAppend=vi.strRemove=vi.strIncludes=void 0;var ex=(t,e)=>t.indexOf(e)!==-1;vi.strIncludes=ex;var tx=(t,e)=>t.replace(new RegExp(e,"g"),"");vi.strRemove=tx;var rx=(t,e,r="0")=>{if(t=t+"",e<1)throw Error("length can not be less than 1");if(t.length>e)throw Error("item can not exceed length");return(r.repeat(e-1)+t).slice(-e)};vi.minAppend=rx});var Bw=Te(St=>{"use strict";Object.defineProperty(St,"__esModule",{value:!0});St.isValidEmail=St.nonValue=St.nullOrEmpty=St.isType=St.hasKeys=St.hasKey=St.equalAny=void 0;var nx=mi(),Uw=mi(),ix=(t,e)=>!!e.find(r=>nx.equal(t,r));St.equalAny=ix;var ox=(t,e)=>St.isType(t,"object")&&t.hasOwnProperty(e);St.hasKey=ox;function sx(t,e){if(!St.isType(t,"object"))return!1;for(let r of e)if(!t.hasOwnProperty(r))return!1;return!0}St.hasKeys=sx;var ax=(t,e)=>Uw.type(t)===e;St.isType=ax;function lx(t){return St.nonValue(t)?!0:St.isType(t,"string")||St.isType(t,"array")?!t.length:St.isType(t,"object")?!Uw.objVals(t).length:!1}St.nullOrEmpty=lx;var ux=t=>t==null;St.nonValue=ux;var cx=t=>/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(t);St.isValidEmail=cx});var zw=Te(be=>{"use strict";Object.defineProperty(be,"__esModule",{value:!0});be.yearStartEnd=be.monthStartEnd=be.weekStartEnd=be.getDayStartEnd=be.wks=be.weeks=be.dys=be.days=be.hrs=be.hours=be.min=be.minutes=be.sec=be.seconds=be.msToTime=be.msToWks=be.msToDys=be.msToHrs=be.msToMin=be.msToSec=be.dateTimeToString=be.weekTuple=be.msTime=void 0;var ic=mi();be.msTime={s:1e3,m:6e4,h:36e5,d:864e5,w:6048e5};be.weekTuple=["sun","mon","tue","wed","thu","fri","sat"];function fx(t=new Date){let e=("0"+t.getHours()).slice(-2),r=("0"+t.getMinutes()).slice(-2),n=("0"+t.getSeconds()).slice(-2),i=("00"+t.getMilliseconds()).slice(-3);return`${e}:${r}:${n}:${i}`}be.dateTimeToString=fx;var hx=t=>t/be.msTime.s;be.msToSec=hx;var dx=t=>t/be.msTime.m;be.msToMin=dx;var px=t=>t/be.msTime.h;be.msToHrs=px;var yx=t=>t/be.msTime.d;be.msToDys=yx;var gx=t=>t/be.msTime.w;be.msToWks=gx;function mx(t,e=!1){let r=t%1e3,n=Math.floor(t/1e3),i=Math.floor(n/60);n=n%60;let o=Math.floor(i/60);i=i%60;let s=Math.floor(o/24);o=o%24;let a=("00"+s).slice(-3),l=("0"+o).slice(-2),h=("0"+i).slice(-2),p=("0"+n).slice(-2),m=("00"+r).slice(-3);return e?{d:s,h:o,m:i,s:n,ms:r}:`${s?a+":":""}${l}:${h}:${p}:${m}`}be.msToTime=mx;var vx=t=>t*be.msTime.s;be.seconds=vx;be.sec=be.seconds;var wx=t=>t*be.msTime.m;be.minutes=wx;be.min=be.minutes;var _x=t=>t*be.msTime.h;be.hours=_x;be.hrs=be.hours;var Sx=t=>t*be.msTime.d;be.days=Sx;be.dys=be.days;var bx=t=>t*be.msTime.w;be.weeks=bx;be.wks=be.weeks;function Ex(t,e="local"){ic.isType(t,"number")&&(t=new Date(t));let r=t.getFullYear(),n=t.getMonth(),i=t.getDate(),o=new Date(r,n,i),s=new Date(r,n,i,23,59,59,999);if(e==="unix"){let a=be.min(o.getTimezoneOffset());o=new Date(o.getTime()+a),s=new Date(s.getTime()+a)}return{start:o,end:s}}be.getDayStartEnd=Ex;function Ox(t,e="sun",r="local"){ic.isType(t,"number")&&(t=new Date(t));let i=t.getDay()*-1+(e==="mon"?1:0),o=6+i,s=new Date(t.getTime()+be.days(i)),a=new Date(t.getTime()+be.days(o)),l=new Date(s.getFullYear(),s.getMonth(),s.getDate()),h=new Date(a.getFullYear(),a.getMonth(),a.getDate(),23,59,59,999);if(r==="unix"){let p=be.min(l.getTimezoneOffset());l=new Date(l.getTime()+p),h=new Date(h.getTime()+p)}return{start:l,end:h}}be.weekStartEnd=Ox;function Tx(t,e="local"){ic.isType(t,"number")&&(t=new Date(t));let r=t.getFullYear(),n=t.getMonth(),i=new Date(r,n,1),o=new Date(r,n,0,23,59,59,999);if(e==="unix"){let s=be.min(i.getTimezoneOffset());i=new Date(i.getTime()+s),o=new Date(o.getTime()+s)}return{start:i,end:o}}be.monthStartEnd=Tx;function xx(t,e="local"){ic.isType(t,"number")&&(t=new Date(t));let r=t.getFullYear(),n=new Date(r,0,1),i=new Date(r,12,0,23,59,59,999);if(e==="unix"){let o=be.min(n.getTimezoneOffset());n=new Date(n.getTime()+o),i=new Date(i.getTime()+o)}return{start:n,end:i}}be.yearStartEnd=xx});var mi=Te(Xt=>{"use strict";var kx=Xt&&Xt.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),ln=Xt&&Xt.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&kx(e,t,r)};Object.defineProperty(Xt,"__esModule",{value:!0});ln(kw(),Xt);ln(v0(),Xt);ln(Aw(),Xt);ln(Dw(),Xt);ln(Cw(),Xt);ln(Fw(),Xt);ln(Pw(),Xt);ln(Mw(),Xt);ln(jw(),Xt);ln(Bw(),Xt);ln(zw(),Xt)});var Vw,Ww,qw,$w=mt(()=>{Vw=class{constructor(e=!1,r=!1){this.debug=e,this.listeners=[],this.synchronous=r,this.syncInterval="FRAMERATE",this.syncAnim=void 0,r===!0&&this.startSync()}addListener(e=null,r,n=void 0,i=void 0,o=void 0,s=this.debug,a=!0){if(r===void 0){console.error("You must assign an object");return}var l=e;l==null&&(l=Math.floor(Math.random()*1e5)),this.synchronous===!0&&(a=!1);var h={key:l,listener:new Ww(r,n,i,o,s,a)};this.listeners.push(h)}getListener(e){return this.listeners.find((n,i)=>{if(n.key===e)return!0})}hasKey(e){var r=!1;return this.listeners.forEach((n,i)=>{if(n.key===e)return r=!0,!0}),r}getKeyIndices(e){var r=[];return this.listeners.find((n,i)=>{n.key===e&&r.push(i)}),r}onchange(e=null,r=null){if(e==null)this.listeners.forEach((i,o)=>{i.listener.onchange=r});else var n=this.listeners.find((i,o)=>{i.name===e&&(i.listener.onchange=r)})}addFunc=(e=null,r=null,n=!0)=>{var i=null;if(r!==null)if(e==null)this.listeners.forEach((s,a)=>{i=s.listener.addFunc(r),s.listener.running==!1&&n==!0&&s.listener.start()});else var o=this.listeners.find((s,a)=>{s.key===e&&(i=s.listener.addFunc(r),s.listener.running==!1&&n==!0&&s.listener.start())});return i};getFuncs=(e=void 0)=>{if(e){var r=this.listeners.find((n,i)=>{if(n.key===e)return!0});return r.onchangeFuncs}else return};removeFuncs=(e=null,r=null,n=!1)=>{if(e==null)this.listeners.forEach((o,s)=>{o.listener.removeFuncs(r)});else var i=this.listeners.find((o,s)=>{o.key===e&&(o.listener.removeFuncs(r),(o.listener.onchangeFuncs.length===0||n===!0)&&o.listener.stop())})};stop(e=null){if(this.synchronous&&this.stopSync(),e==null)this.listeners.forEach((n,i)=>{n.listener.stop()});else var r=this.listeners.find((n,i)=>{n.name===e&&n.listener.stop()})}start(e=null){if(this.synchronous&&this.stopSync(),e==null)this.listeners.forEach((n,i)=>{n.listener.start()});else var r=this.listeners.find((n,i)=>{n.name===e&&n.listener.start()})}startSync(){if(this.synchronous===!1){this.synchronous=!0,this.stop();let e=()=>{this.synchronous===!0&&(this.listeners.forEach(r=>{r.listener.check()}),this.syncInterval==="FRAMERATE"?this.syncAnim=requestAnimationFrame(e):typeof this.syncInterval=="number"&&setTimeout(e,this.syncInterval))};e()}}stopSync(){this.synchronous=!1,this.syncAnim&&cancelAnimationFrame(this.syncAnim)}remove(e=null){if(e==null)this.listeners.forEach(i=>{i.listener.stop()}),this.listeners.splice(0,this.listeners.length);else{var r=[],n=this.listeners.forEach((i,o)=>{i.key===e&&r.push(o)});r.reverse().forEach(i=>{this.listeners[i].listener.stop(),this.listeners.splice(i,1)})}}},Ww=class{constructor(e,r="__ANY__",n=this.onchange,i="FRAMERATE",o=!1,s=!0){this.debug=o,this.onchange=n,this.onchangeFuncs=[],this.object=e,this.propName=r,this.propOld=void 0,this.setListenerRef(r),this.running=s,this.funcs=0,this.interval,i<10?(this.interval=10,console.log("Min recommended interval set: 10ms")):this.interval=i,s===!0&&(typeof window>"u"?setTimeout(()=>{this.check()},60):this.checker=requestAnimationFrame(this.check))}onchange=e=>{console.log(this.propName," changed from: ",this.propOld," to: ",this.object[this.propName])};addFunc=(e=null)=>{let r=0;return e!==null&&(this.onchangeFuncs.push({idx:this.funcs,onchange:e}),r=this.funcs,this.funcs++),r};removeFuncs(e=null){let r=0;e===null?this.onchangeFuncs=[]:this.onchangeFuncs.find((n,i)=>{if(n.idx===e)return r=i,!0})!==void 0&&this.onchangeFuncs.splice(r,1)}onchangeMulti=e=>{[...this.onchangeFuncs].forEach((n,i)=>{this.debug===!0&&console.log(n.onchange),n.onchange(e)})};setListenerRef=e=>{e==="__ANY__"||e===null||e===void 0?this.propOld=JSON.stringifyFast(this.object):Array.isArray(this.object[e])?this.propOld=JSON.stringifyFast(this.object[e].slice(this.object[e].length-20)):typeof this.object[e]=="object"?this.propOld=JSON.stringifyFast(this.object[e]):typeof this.object[e]=="function"?this.propOld=this.object[e].toString():this.propOld=this.object[e],this.debug===!0&&console.log("propname",e,", new assignment: ",this.propOld)};check=()=>{let e=!1;if(this.propName==="__ANY__"||this.propName===null||this.propName===void 0)this.propOld!==JSON.stringifyFast(this.object)&&(this.debug===!0&&console.log("onchange: ",this.onchange),this.onchange(this.object),this.onchangeFuncs.length>0&&this.onchangeMulti(this.object),this.setListenerRef(this.propName),e=!0);else if(Array.isArray(this.object[this.propName]))this.propOld!==JSON.stringifyFast(this.object[this.propName].slice(this.object[this.propName].length-20))&&(this.debug===!0&&console.log("onchange: ",this.onchange),this.onchange(this.object[this.propName]),this.onchangeFuncs.length>0&&this.onchangeMulti(this.object[this.propName]),this.setListenerRef(this.propName),e=!0);else if(typeof this.object[this.propName]=="object"){let r=JSON.stringifyFast(this.object[this.propName]);this.propOld!==r&&(this.debug===!0&&console.log("onchange: ",this.onchange),this.onchange(this.object[this.propName]),this.onchangeFuncs.length>0&&this.onchangeMulti(this.object[this.propName]),this.setListenerRef(this.propName),e=!0)}else typeof this.object[this.propName]=="function"?this.propOld!==this.object[this.propName].toString()&&(this.debug===!0&&console.log("onchange: ",this.onchange),this.onchange(this.object[this.propName].toString()),this.onchangeFuncs.length>0&&this.onchangeMulti(this.object[this.propName].toString()),this.setListenerRef(this.propName),e=!0):this.object[this.propName]!==this.propOld&&(this.debug===!0&&console.log("onchange: ",this.onchange),this.onchange(this.object[this.propName]),this.onchangeFuncs.length>0&&this.onchangeMulti(this.object[this.propName]),this.setListenerRef(this.propName),e=!0);return this.running===!0&&(this.debug===!0&&console.log("checking",this.object,this.propName),this.interval==="FRAMERATE"?typeof window>"u"?setTimeout(()=>{this.check()},16):this.checker=requestAnimationFrame(this.check):setTimeout(()=>{this.check()},this.interval)),e};start(){this.running=!0,typeof window>"u"?setTimeout(()=>{this.check()},16):this.checker=requestAnimationFrame(this.check)}stop(){this.running=!1,cancelAnimationFrame(this.checker)}};JSON.stringifyFast===void 0&&(JSON.stringifyFast=function(){let t=new Map,e=[],r=["this"];function n(){t.clear(),e.length=0,r.length=1}function i(s,a){var l=e.length-1;if(e[l]){var h=e[l];if(typeof h=="object")if(h[s]===a||l===0)r.push(s),e.push(a.pushed);else for(;l-->=0;){if(h=e[l],typeof h=="object"&&h[s]===a){l+=2,e.length=l,r.length=l,--l,e[l]=a,r[l]=s;break}l--}}}function o(s,a){let l;if(a!=null)if(typeof a=="object"){let h=a.constructor.name;s&&h==="Object"&&i(s,a);let p=t.get(a);if(p)return"[Circular Reference]"+p;if(t.set(a,r.join(".")),h==="Array")a.length>20?l=a.slice(a.length-20):l=a;else if(h.includes("Set"))l=Array.from(a);else if(h!=="Object"&&h!=="Number"&&h!=="String"&&h!=="Boolean")l="instanceof_"+h;else if(h==="Object"){let m={};for(let y in a)if(a[y]==null)m[y]=a[y];else if(Array.isArray(a[y]))a[y].length>20?m[y]=a[y].slice(a[y].length-20):m[y]=a[y];else if(a[y].constructor.name==="Object"){m[y]={};for(let w in a[y])if(Array.isArray(a[y][w]))a[y][w].length>20?m[y][w]=a[y][w].slice(a[y][w].length-20):m[y][w]=a[y][w];else if(a[y][w]!=null){let b=a[y][w].constructor.name;b.includes("Set")?m[y][w]=Array.from(a[y][w]):b!=="Number"&&b!=="String"&&b!=="Boolean"?m[y][w]="instanceof_"+b:m[y][w]=a[y][w]}else m[y][w]=a[y][w]}else{let w=a[y].constructor.name;w.includes("Set")?m[y]=Array.from(a[y]):w!=="Number"&&w!=="String"&&w!=="Boolean"?m[y]="instanceof_"+w:m[y]=a[y]}l=m}else l=a}else l=a;return l}return function(a,l){e.push(a);let h=JSON.stringify(a,o,l);return n(),h}}());JSON.stringifyWithCircularRefs===void 0&&(JSON.stringifyWithCircularRefs=function(){let t=new Map,e=[],r=["this"];function n(){t.clear(),e.length=0,r.length=1}function i(s,a){var l=e.length-1,h=e[l];if(h[s]===a||l===0)r.push(s),e.push(a);else for(;l-->=0;)if(h=e[l],h[s]===a){l+=2,e.length=l,r.length=l,--l,e[l]=a,r[l]=s;break}}function o(s,a){if(a!=null&&typeof a=="object"){s&&i(s,a);let l=t.get(a);if(l)return"[Circular Reference]"+l;t.set(a,r.join("."))}return a}return function(a,l){try{return e.push(a),JSON.stringify(a,o,l)}finally{n()}}}());qw=Vw});var oc,Hw,S0=mt(()=>{$w();oc=class{constructor(e={},r="FRAMERATE",n=!0){this.data=e,this.interval=r,this.pushToState={},this.pushRecord={pushed:[]},this.pushCallbacks={},this.triggers={},this.prev={},this.listener=new qw,this.defaultStartListenerEventLoop=n}subscribe(e,r,n=this.defaultStartListenerEventLoop){if(e&&e!=="state")if(this.data[e]===void 0)this.addToState(e,null,r,n);else return this.addSecondaryKeyResponse(e,r,void 0,n);else return this.addSecondaryKeyResponse(e,r,void 0,n)}subscribeOnce(e=void 0,r=n=>{}){let n,i=o=>{r(o),this.unsubscribe(e,n)};n=this.subscribe(e,i)}unsubscribe(e,r=null){r!==null?this.removeSecondaryKeyResponse(e,r,!0):console.error("Specify a subcription function index")}unsubscribeAll(e){this.unsubscribeAllSequential(e),this.unsubscribeAllTriggers(e),this.clearAllKeyResponses(e),this.data[e]&&delete this.data[e],this.listener.hasKey("pushToState")&&this.setSequentialState({stateRemoved:e})}setInterval(e="FRAMERATE"){this.interval=e,this.listener.listeners.forEach((r,n)=>{r.interval=this.interval})}updateState(e,r){this.data[e]==null?this.addToState(e,r):this.data[e]=r}setupSynchronousUpdates=()=>{if(!this.listener.hasKey("pushToState")){let e=()=>{if(Object.keys(this.pushToState).length>0){Object.assign(this.data,this.pushToState);for(let r of Object.getOwnPropertyNames(this.pushToState))delete this.pushToState[r]}};this.listener.addListener("pushToState",this.pushToState,"__ANY__",e,this.interval),this.addToState("pushRecord",this.pushRecord,r=>{let n=r.pushed.length;for(let i=0;i<n;i++){let o=r.pushed[i];this.pushCallbacks.state&&this.pushCallbacks.state.forEach(s=>{s.onchange(o)});for(let s in o)this.pushCallbacks[s]&&this.pushCallbacks[s].forEach(a=>{typeof a=="object"&&a.onchange(o[s])})}this.pushRecord.pushed.splice(0,n)})}};addToState(e,r,n=null,i=this.defaultStartListenerEventLoop,o=!1){if(!this.listener.hasKey("pushToState")&&this.defaultStartListenerEventLoop&&this.setupSynchronousUpdates(),this.data[e]=r,this.setSequentialState({stateAdded:e}),n!==null)return this.addSecondaryKeyResponse(e,n,o,i)}get(e){return this.data[e]}getState(){return JSON.parse(JSON.stringifyFast(this.data))}setState(e={},r=!1){if(!this.listener.hasKey("pushToState")&&this.defaultStartListenerEventLoop&&(this.setupSynchronousUpdates(),this.pushRecord.pushed.push(JSON.parse(JSON.stringifyWithCircularRefs(e)))),e.stateUpdateTimeStamp=Date.now(),r){for(let n in e)if(n in this.pushToState){if(Array.isArray(this.pushToState[n])&&Array.isArray(e[n]))e[n]=this.pushToState[n].push(...e[n]);else if(typeof this.pushToState[n]=="object"&&typeof e[n]=="object"){for(let i in e[n])if(this.pushToState[n][i]){if(Array.isArray(this.pushToState[n][i])&&Array.isArray(e[n][i]))e[n][i]=this.pushToState[n][i].push(...e[n][i]);else if(typeof this.pushToState[n][i]=="object"&&typeof e[n][i]=="object"){for(let o in e[n][i])if(this.pushToState[n][i][o])Array.isArray(this.pushToState[n][i][o])&&Array.isArray(e[n][i][o])&&(e[n][i][o]=this.pushToState[n][i][o].push(...e[n][i][o]));else if(typeof this.pushToState[n][i][o]=="object"&&typeof e[n][i][o]=="object")for(let s in e[n][i][o])this.pushToState[n][i][o][s]&&Array.isArray(this.pushToState[n][i][o][s])&&Array.isArray(e[n][i][o][s])&&(e[n][i][o][s]=this.pushToState[n][i][o][s].push(...e[n][i][o][s]))}}}}}if(Object.assign(this.pushToState,e),Object.keys(this.triggers).length>0){this.triggers.state&&this.triggers.state.forEach(n=>{n.onchange(this.data)});for(let n of Object.getOwnPropertyNames(this.triggers))n in this.pushToState&&(this.data[n]=this.pushToState[n],delete this.pushToState[n],this.triggers[n].forEach(i=>{i.onchange(this.data[n])}))}return this.pushToState}subscribeTrigger(e=void 0,r=n=>{}){if(e){this.triggers[e]||(this.triggers[e]=[]);let n=this.triggers[e].length;return this.triggers[e].push({idx:n,onchange:r}),this.triggers[e].length-1}else return}subscribeTriggerOnce(e=void 0,r=n=>{}){let n,i=o=>{r(o),this.unsubscribeTrigger(e,n)};n=this.subscribeTrigger(e,i)}unsubscribeTrigger(e=void 0,r=0){let n,i=this.triggers[e];i&&i.find(s=>{if(s.idx===r)return!0})&&i.splice(n,1)}unsubscribeAllTriggers(e){e&&this.triggers[e]&&delete this.triggers[e]}setSequentialState(e={}){this.listener.hasKey("pushToState")||this.setupSynchronousUpdates(),e.stateUpdateTimeStamp=Date.now(),this.pushRecord.pushed.push(JSON.parse(JSON.stringify(e)))}subscribeSequential(e=void 0,r=void 0){if(e)if(this.data[e]===void 0&&e!=="state"&&this.addToState(e,null,void 0),this.pushCallbacks[e]||(this.pushCallbacks[e]=[]),r){let n=this.pushCallbacks[e].length;return this.pushCallbacks[e].push({idx:n,onchange:r}),this.pushCallbacks[e].length-1}else return;else return}subscribeSequentialOnce(e=void 0,r=n=>{}){let n,i=o=>{r(o),this.unsubscribeSequential(e,n)};n=this.subscribeSequential(e,i)}unsubscribeSequential(e=void 0,r=0){e&&this.pushCallbacks[e]&&this.pushCallbacks[e].find((n,i)=>{if(n.idx===r)return this.pushCallbacks[e].splice(i,1),!0})}unsubscribeAllSequential(e){e&&this.pushCallbacks[e]&&this.pushCallbacks[e]&&delete this.pushCallbacks[e]}setPrimaryKeyResponse(e=null,r=null,n=!1,i=this.defaultStartListenerEventLoop){if(r!==null)if(this.listener.hasKey(e))this.listener.onchange(e,r);else if(e!=null&&e!=="state")this.listener.addListener(e,this.data,e,r,this.data.stateUpdateInterval,n,i);else{if(!this.listener.hasKey("state")){let o=()=>{this.prev=Object.assign({},this.data)};this.listener.addListener("state",this.data,"__ANY__",o,this.interval)}return this.listener.addFunc("state",r)}}addSecondaryKeyResponse=(e=null,r=null,n=!1,i=this.defaultStartListenerEventLoop)=>{if(r!=null){if(this.listener.hasKey(e))return this.listener.addFunc(e,r);if(e!=null&&e!=="state")return this.listener.addListener(e,this.data,e,()=>{},this.data.stateUpdateInterval,n,i),this.listener.addFunc(e,r);if(!this.listener.hasKey("state")){let o=()=>{this.prev=Object.assign({},this.data)};this.listener.addListener("state",this.data,"__ANY__",o,this.interval)}return this.listener.addFunc("state",r)}};removeSecondaryKeyResponse(e=null,r=null,n=!0){e!==null?this.listener.hasKey(e)?this.listener.removeFuncs(e,r,n):console.error("key does not exist"):console.error("provide key")}clearAllKeyResponses(e=null){e===null?this.listener.remove(null):this.listener.hasKey(e)&&this.listener.remove(e)}getKeySubCallbacks(e){return this.listener.getFuncs(e)}removeState=this.unsubscribeAll;runSynchronousListeners(){this.defaultStartListenerEventLoop=!1,this.listener.startSync()}stop(e=null){this.listener.stop(e)}};JSON.stringifyFast===void 0&&(JSON.stringifyFast=function(){let t=new Map,e=[],r=["this"];function n(){t.clear(),e.length=0,r.length=1}function i(s,a){var l=e.length-1;if(e[l]){var h=e[l];if(typeof h=="object")if(h[s]===a||l===0)r.push(s),e.push(a.pushed);else for(;l-->=0;){if(h=e[l],typeof h=="object"&&h[s]===a){l+=2,e.length=l,r.length=l,--l,e[l]=a,r[l]=s;break}l++}}}function o(s,a){let l;if(a!=null)if(typeof a=="object"){let h=a.constructor.name;s&&h==="Object"&&i(s,a);let p=t.get(a);if(p)return"[Circular Reference]"+p;if(t.set(a,r.join(".")),h==="Array")a.length>20?l=a.slice(a.length-20):l=a;else if(h.includes("Set"))l=Array.from(a);else if(h!=="Object"&&h!=="Number"&&h!=="String"&&h!=="Boolean")l="instanceof_"+h;else if(h==="Object"){let m={};for(let y in a)if(a[y]==null)m[y]=a[y];else if(Array.isArray(a[y]))a[y].length>20?m[y]=a[y].slice(a[y].length-20):m[y]=a[y];else if(a[y].constructor.name==="Object"){m[y]={};for(let w in a[y])if(Array.isArray(a[y][w]))a[y][w].length>20?m[y][w]=a[y][w].slice(a[y][w].length-20):m[y][w]=a[y][w];else if(a[y][w]!=null){let b=a[y][w].constructor.name;b.includes("Set")?m[y][w]=Array.from(a[y][w]):b!=="Number"&&b!=="String"&&b!=="Boolean"?m[y][w]="instanceof_"+b:m[y][w]=a[y][w]}else m[y][w]=a[y][w]}else{let w=a[y].constructor.name;w.includes("Set")?m[y]=Array.from(a[y]):w!=="Number"&&w!=="String"&&w!=="Boolean"?m[y]="instanceof_"+w:m[y]=a[y]}l=m}else l=a}else l=a;return l}return function(a,l){e.push(a);let h=JSON.stringify(a,o,l);return n(),h}}());JSON.stringifyWithCircularRefs===void 0&&(JSON.stringifyWithCircularRefs=function(){let t=new Map,e=[],r=["this"];function n(){t.clear(),e.length=0,r.length=1}function i(s,a){var l=e.length-1,h=e[l];if(typeof h=="object")if(h[s]===a||l===0)r.push(s),e.push(a.pushed);else for(;l-->=0;){if(h=e[l],typeof h=="object"&&h[s]===a){l+=2,e.length=l,r.length=l,--l,e[l]=a,r[l]=s;break}l--}}function o(s,a){if(a!=null&&typeof a=="object"){s&&i(s,a);let l=t.get(a);if(l)return"[Circular Reference]"+l;t.set(a,r.join("."))}return a}return function(a,l){try{return e.push(a),JSON.stringify(a,o,l)}finally{n()}}}());Hw=oc});async function Jw(t="sessionName",e="data",r=0,n=5120,i=o=>{}){return t!=""?new Promise(async o=>{Ze.open("/"+e+"/"+t,"r",(s,a)=>{if(s)throw s;Ze.read(a,n,r,"utf-8",(l,h,p)=>{if(l)throw l;if(p!==0){let m=h.toString();Ze.close(a,()=>{i(m,t),o(m)})}else o(void 0)})})}):void console.error("Path name is not defined")}function T0(t=e=>{}){window.gapi.client.drive.files.list({q:"name='Brainsatplay_Data' and mimeType='application/vnd.google-apps.folder'"}).then(e=>{e.result.files.length===0&&this.createDriveFolder(),t&&t(e.result)})}function Zw(t=e=>{}){T0(e=>{window.gapi.client.drive.files.list({q:`'${e.files[0].id}' in parents`,pageSize:10,fields:"nextPageToken, files(id, name)"}).then(r=>{var n=r.result.files;n&&n.length>0&&t(n)})})}function x0(t){return!!t.match(x0.regex)}var Ya,Gw,u8,Ka,sc,Ze,b0,E0,Yw,Kw,gs,O0,io,c8,f8,Qw,e_,t_,Ix,Xw,h8,r_=mt(()=>{Ya=class{constructor(e=this.onOpen,r=null,n=null){this.onOpen=e,this.notes=[{idx:0,text:"comment"}],r!==null&&document.getElementById(r).addEventListener("click",this.saveCSV),n!==null&&document.getElementById(n).addEventListener("click",this.openCSV)}processArraysForCSV(e=["1|2|3","3|2|1"],r="|",n="a,b,c",i=!1){let o=n+`
`,s=0;return e.forEach((a,l)=>{e[l]==="string"&&r!==","?o+=a.split(r).join(","):csvData+=a.join(","),i===!0&&this.notes[s].idx===l&&(a+=this.notes[s].text,s++),a.indexOf(`
`)<0&&(o+=`
`)}),o}static saveCSV(e=`a,b,c
1,2,3
3,2,1
`,r=new Date().toISOString()){var n=document.createElement("a");n.href="data:text/csv;charset=utf-8,"+encodeURI(e),n.target="_blank",n.download=r!==""?r+".csv":Date().toISOString()+".csv",n.click()}static openCSV(e=",",r=(n,i,o)=>o){var n=document.createElement("input");n.accept=".csv",n.type="file",n.onchange=i=>{var o=i.target.files[0],s=new FileReader;s.onload=a=>{var l=a.target.result.split(`
`);let h=[];var p=[];l.pop(),l.forEach((m,y)=>{if(y==0)h=m.split(e);else{var w=m.split(e);p.push(w)}}),r(p,h,n.value),n.value=""},s.readAsText(o)},n.click()}static openCSVRaw(e=(r,n)=>n){var r=document.createElement("input");r.accept=".csv",r.type="file",r.onchange=n=>{var i=n.target.files[0],o=new FileReader;o.onload=s=>{var a=s.target.result;e(a,r.value),r.value=""},o.readAsText(i)},r.click()}onOpen(e=[],r=[]){console.log("CSV Opened!",r,e)}},u8=Object.freeze({__proto__:null,CSV:Ya,parseCSVData:(t,e,r,n=!0,i=(o,s,a)=>{let l={filename:a,head:s},h=s;typeof s=="string"&&(h=s.split(","));for(let p=0;p<o.length;p++){let m=o[p].split(",");for(let y=0;y<m.length;y++)l[h[y]]||l[h[y]],l[h[y]]=m[y]}return l})=>{let o=t.split(`
`);return o.shift(),n===!1&&o.pop(),i(o,e,r)},processDataForCSV:(t={})=>{let e="";typeof t.data[0]!="object"||Array.isArray(t.data[0])||(t.data[0].x?e="x,":t.data[0].timestamp&&(e="timestamp,localtime,"));let r=0,n={};t.data.forEach((s,a)=>{if(Array.isArray(s))for(let l=0;l<s.length;l++)n[l]||(n[l]=""),Array.isArray(s[l])?(l===0&&(e[r]+=t.header[r]+new Array(s[l].length-1).fill("").join(",")),n[l]+=s[l].join(",")+",",r+=s[l].length):(l===0&&(e[r]+=t.header[r]+","),n[l]+=s[l]+",",r++);else if(typeof s=="object"){let l;s.x?l=s.x:s.timestamp&&(l=s.timestamp);for(let h=0;h<l.length;h++){n[l[h]]||(n[l[h]]=l[h]+","),s.timestamp&&(n[l[h]]+=toISOLocal(s.timestamp[h])+",");for(let p in s)p!=="x"&&(n[l[h]]||(n[l[h]]=""),Array.isArray(s[p][h])?(h===0&&(e[r]+=t.header[r]+Array(s[p][h].length-1).fill("").join(",")),n[l[h]]+=s[p][h].join(",")+",",r+=s[p][h].length):(h===0&&(e[r]+=t.header[r]+","),n[l[h]]+=s[p][h]+",",r++))}}}),e.splice(e.length-1,1),e+=`
`;let i="";for(let s in n)n[s].splice(n[s].length-1,1),i+=n[s]+`
`;let o={filename:t.filename,header:e,body:i};return t.save&&Ya.saveCSV(e+i,t.filename),t.write&&fs.exists(t.filename,s=>{s?appendFile(t.filename,i,t.dir):appendFile(t.filename,e+i,t.dir)}),o}}),Ka=(typeof globalThis<"u"||typeof window<"u"||(typeof global<"u"?global:typeof self<"u"),{exports:{}});Gw=function(){return function(t){var e={};function r(n){if(e[n])return e[n].exports;var i=e[n]={exports:{},id:n,loaded:!1};return t[n].call(i.exports,i,i.exports,r),i.loaded=!0,i.exports}return r.m=t,r.c=e,r.p="",r(0)}([function(t,e,r){(function(n,i,o,s){Object.defineProperty(e,"__esModule",{value:!0});var a,l=r(2),h=r(9);(function(f){f[f.EPERM=1]="EPERM",f[f.ENOENT=2]="ENOENT",f[f.EIO=5]="EIO",f[f.EBADF=9]="EBADF",f[f.EACCES=13]="EACCES",f[f.EBUSY=16]="EBUSY",f[f.EEXIST=17]="EEXIST",f[f.ENOTDIR=20]="ENOTDIR",f[f.EISDIR=21]="EISDIR",f[f.EINVAL=22]="EINVAL",f[f.EFBIG=27]="EFBIG",f[f.ENOSPC=28]="ENOSPC",f[f.EROFS=30]="EROFS",f[f.ENOTEMPTY=39]="ENOTEMPTY",f[f.ENOTSUP=95]="ENOTSUP"})(a||(a={}));var p={};p[a.EPERM]="Operation not permitted.",p[a.ENOENT]="No such file or directory.",p[a.EIO]="Input/output error.",p[a.EBADF]="Bad file descriptor.",p[a.EACCES]="Permission denied.",p[a.EBUSY]="Resource busy or locked.",p[a.EEXIST]="File exists.",p[a.ENOTDIR]="File is not a directory.",p[a.EISDIR]="File is a directory.",p[a.EINVAL]="Invalid argument.",p[a.EFBIG]="File is too big.",p[a.ENOSPC]="No space left on disk.",p[a.EROFS]="Cannot modify a read-only file system.",p[a.ENOTEMPTY]="Directory is not empty.",p[a.ENOTSUP]="Operation is not supported.";var m,y=function(f){function c(u,d,g){d===void 0&&(d=p[u]),f.call(this,d),this.syscall="",this.errno=u,this.code=a[u],this.path=g,this.stack=new f().stack,this.message="Error: "+this.code+": "+d+(this.path?", '"+this.path+"'":"")}return f&&(c.__proto__=f),c.prototype=Object.create(f&&f.prototype),c.prototype.constructor=c,c.fromJSON=function(u){var d=new c(0);return d.errno=u.errno,d.code=u.code,d.path=u.path,d.stack=u.stack,d.message=u.message,d},c.fromBuffer=function(u,d){return d===void 0&&(d=0),c.fromJSON(JSON.parse(u.toString("utf8",d+4,d+4+u.readUInt32LE(d))))},c.FileError=function(u,d){return new c(u,p[u],d)},c.ENOENT=function(u){return this.FileError(a.ENOENT,u)},c.EEXIST=function(u){return this.FileError(a.EEXIST,u)},c.EISDIR=function(u){return this.FileError(a.EISDIR,u)},c.ENOTDIR=function(u){return this.FileError(a.ENOTDIR,u)},c.EPERM=function(u){return this.FileError(a.EPERM,u)},c.ENOTEMPTY=function(u){return this.FileError(a.ENOTEMPTY,u)},c.prototype.toString=function(){return this.message},c.prototype.toJSON=function(){return{errno:this.errno,code:this.code,path:this.path,stack:this.stack,message:this.message}},c.prototype.writeToBuffer=function(u,d){u===void 0&&(u=n.alloc(this.bufferSize())),d===void 0&&(d=0);var g=u.write(JSON.stringify(this.toJSON()),d+4);return u.writeUInt32LE(g,d),u},c.prototype.bufferSize=function(){return 4+n.byteLength(JSON.stringify(this.toJSON()))},c}(Error),w=Object.freeze({get ErrorCode(){return a},ErrorStrings:p,ApiError:y});(function(f){f[f.NOP=0]="NOP",f[f.THROW_EXCEPTION=1]="THROW_EXCEPTION",f[f.TRUNCATE_FILE=2]="TRUNCATE_FILE",f[f.CREATE_FILE=3]="CREATE_FILE"})(m||(m={}));var b,N=function f(c){if(this.flagStr=c,f.validFlagStrs.indexOf(c)<0)throw new y(a.EINVAL,"Invalid flag: "+c)};N.getFileFlag=function(f){return N.flagCache.hasOwnProperty(f)?N.flagCache[f]:N.flagCache[f]=new N(f)},N.prototype.getFlagString=function(){return this.flagStr},N.prototype.isReadable=function(){return this.flagStr.indexOf("r")!==-1||this.flagStr.indexOf("+")!==-1},N.prototype.isWriteable=function(){return this.flagStr.indexOf("w")!==-1||this.flagStr.indexOf("a")!==-1||this.flagStr.indexOf("+")!==-1},N.prototype.isTruncating=function(){return this.flagStr.indexOf("w")!==-1},N.prototype.isAppendable=function(){return this.flagStr.indexOf("a")!==-1},N.prototype.isSynchronous=function(){return this.flagStr.indexOf("s")!==-1},N.prototype.isExclusive=function(){return this.flagStr.indexOf("x")!==-1},N.prototype.pathExistsAction=function(){return this.isExclusive()?m.THROW_EXCEPTION:this.isTruncating()?m.TRUNCATE_FILE:m.NOP},N.prototype.pathNotExistsAction=function(){return(this.isWriteable()||this.isAppendable())&&this.flagStr!=="r+"?m.CREATE_FILE:m.THROW_EXCEPTION},N.flagCache={},N.validFlagStrs=["r","r+","rs","rs+","w","wx","w+","wx+","a","ax","a+","ax+"],function(f){f[f.FILE=32768]="FILE",f[f.DIRECTORY=16384]="DIRECTORY",f[f.SYMLINK=40960]="SYMLINK"}(b||(b={}));var O=function(f,c,u,d,g,v){if(d===void 0&&(d=new Date),g===void 0&&(g=new Date),v===void 0&&(v=new Date),this.size=c,this.atime=d,this.mtime=g,this.ctime=v,this.dev=0,this.ino=0,this.rdev=0,this.nlink=1,this.blksize=4096,this.uid=0,this.gid=0,this.birthtime=new Date(0),this.fileData=null,u)this.mode=u;else switch(f){case b.FILE:this.mode=420;break;case b.DIRECTORY:default:this.mode=511}this.blocks=Math.ceil(c/512),this.mode<4096&&(this.mode|=f)};O.fromBuffer=function(f){var c=f.readUInt32LE(0),u=f.readUInt32LE(4),d=f.readDoubleLE(8),g=f.readDoubleLE(16),v=f.readDoubleLE(24);return new O(61440&u,c,4095&u,new Date(d),new Date(g),new Date(v))},O.prototype.toBuffer=function(){var f=n.alloc(32);return f.writeUInt32LE(this.size,0),f.writeUInt32LE(this.mode,4),f.writeDoubleLE(this.atime.getTime(),8),f.writeDoubleLE(this.mtime.getTime(),16),f.writeDoubleLE(this.ctime.getTime(),24),f},O.prototype.clone=function(){return new O(61440&this.mode,this.size,4095&this.mode,this.atime,this.mtime,this.ctime)},O.prototype.isFile=function(){return(61440&this.mode)===b.FILE},O.prototype.isDirectory=function(){return(61440&this.mode)===b.DIRECTORY},O.prototype.isSymbolicLink=function(){return(61440&this.mode)===b.SYMLINK},O.prototype.chmod=function(f){this.mode=61440&this.mode|f},O.prototype.isSocket=function(){return!1},O.prototype.isBlockDevice=function(){return!1},O.prototype.isCharacterDevice=function(){return!1},O.prototype.isFIFO=function(){return!1};var I=function(f,c){return f};function R(f){if(f)return f;throw new y(a.EIO,"Initialize BrowserFS with a file system using BrowserFS.initialize(filesystem)")}function J(f,c){switch(typeof f){case"number":return f;case"string":var u=parseInt(f,8);return isNaN(u)?c:u;default:return c}}function q(f){if(f instanceof Date)return f;if(typeof f=="number")return new Date(1e3*f);throw new y(a.EINVAL,"Invalid time.")}function G(f){if(f.indexOf("\0")>=0)throw new y(a.EINVAL,"Path must be a string without null bytes.");if(f==="")throw new y(a.EINVAL,"Path must not be empty.");return h.resolve(f)}function F(f,c,u,d){switch(typeof f){case"object":return{encoding:f.encoding!==void 0?f.encoding:c,flag:f.flag!==void 0?f.flag:u,mode:J(f.mode,d)};case"string":return{encoding:f,flag:u,mode:d};default:return{encoding:c,flag:u,mode:d}}}function z(){}var S=function(){this.F_OK=0,this.R_OK=4,this.W_OK=2,this.X_OK=1,this.root=null,this.fdMap={},this.nextFd=100};S.prototype.initialize=function(f){if(!f.constructor.isAvailable())throw new y(a.EINVAL,"Tried to instantiate BrowserFS with an unavailable file system.");return this.root=f},S.prototype._toUnixTimestamp=function(f){if(typeof f=="number")return f;if(f instanceof Date)return f.getTime()/1e3;throw new Error("Cannot parse time: "+f)},S.prototype.getRootFS=function(){return this.root?this.root:null},S.prototype.rename=function(f,c,u){u===void 0&&(u=z);var d=I(u,1);try{R(this.root).rename(G(f),G(c),d)}catch(g){d(g)}},S.prototype.renameSync=function(f,c){R(this.root).renameSync(G(f),G(c))},S.prototype.exists=function(f,c){c===void 0&&(c=z);var u=I(c,1);try{return R(this.root).exists(G(f),u)}catch{return u(!1)}},S.prototype.existsSync=function(f){try{return R(this.root).existsSync(G(f))}catch{return!1}},S.prototype.stat=function(f,c){c===void 0&&(c=z);var u=I(c,2);try{return R(this.root).stat(G(f),!1,u)}catch(d){return u(d)}},S.prototype.statSync=function(f){return R(this.root).statSync(G(f),!1)},S.prototype.lstat=function(f,c){c===void 0&&(c=z);var u=I(c,2);try{return R(this.root).stat(G(f),!0,u)}catch(d){return u(d)}},S.prototype.lstatSync=function(f){return R(this.root).statSync(G(f),!0)},S.prototype.truncate=function(f,c,u){c===void 0&&(c=0),u===void 0&&(u=z);var d=0;typeof c=="function"?u=c:typeof c=="number"&&(d=c);var g=I(u,1);try{if(d<0)throw new y(a.EINVAL);return R(this.root).truncate(G(f),d,g)}catch(v){return g(v)}},S.prototype.truncateSync=function(f,c){if(c===void 0&&(c=0),c<0)throw new y(a.EINVAL);return R(this.root).truncateSync(G(f),c)},S.prototype.unlink=function(f,c){c===void 0&&(c=z);var u=I(c,1);try{return R(this.root).unlink(G(f),u)}catch(d){return u(d)}},S.prototype.unlinkSync=function(f){return R(this.root).unlinkSync(G(f))},S.prototype.open=function(f,c,u,d){var g=this;d===void 0&&(d=z);var v=J(u,420),_=I(d=typeof u=="function"?u:d,2);try{R(this.root).open(G(f),N.getFileFlag(c),v,function(A,P){P?_(A,g.getFdForFile(P)):_(A)})}catch(A){_(A)}},S.prototype.openSync=function(f,c,u){return u===void 0&&(u=420),this.getFdForFile(R(this.root).openSync(G(f),N.getFileFlag(c),J(u,420)))},S.prototype.readFile=function(f,c,u){c===void 0&&(c={}),u===void 0&&(u=z);var d=F(c,null,"r",null),g=I(u=typeof c=="function"?c:u,2);try{var v=N.getFileFlag(d.flag);return v.isReadable()?R(this.root).readFile(G(f),d.encoding,v,g):g(new y(a.EINVAL,"Flag passed to readFile must allow for reading."))}catch(_){return g(_)}},S.prototype.readFileSync=function(f,c){c===void 0&&(c={});var u=F(c,null,"r",null),d=N.getFileFlag(u.flag);if(!d.isReadable())throw new y(a.EINVAL,"Flag passed to readFile must allow for reading.");return R(this.root).readFileSync(G(f),u.encoding,d)},S.prototype.writeFile=function(f,c,u,d){u===void 0&&(u={}),d===void 0&&(d=z);var g=F(u,"utf8","w",420),v=I(d=typeof u=="function"?u:d,1);try{var _=N.getFileFlag(g.flag);return _.isWriteable()?R(this.root).writeFile(G(f),c,g.encoding,_,g.mode,v):v(new y(a.EINVAL,"Flag passed to writeFile must allow for writing."))}catch(A){return v(A)}},S.prototype.writeFileSync=function(f,c,u){var d=F(u,"utf8","w",420),g=N.getFileFlag(d.flag);if(!g.isWriteable())throw new y(a.EINVAL,"Flag passed to writeFile must allow for writing.");return R(this.root).writeFileSync(G(f),c,d.encoding,g,d.mode)},S.prototype.appendFile=function(f,c,u,d){d===void 0&&(d=z);var g=F(u,"utf8","a",420),v=I(d=typeof u=="function"?u:d,1);try{var _=N.getFileFlag(g.flag);if(!_.isAppendable())return v(new y(a.EINVAL,"Flag passed to appendFile must allow for appending."));R(this.root).appendFile(G(f),c,g.encoding,_,g.mode,v)}catch(A){v(A)}},S.prototype.appendFileSync=function(f,c,u){var d=F(u,"utf8","a",420),g=N.getFileFlag(d.flag);if(!g.isAppendable())throw new y(a.EINVAL,"Flag passed to appendFile must allow for appending.");return R(this.root).appendFileSync(G(f),c,d.encoding,g,d.mode)},S.prototype.fstat=function(f,c){c===void 0&&(c=z);var u=I(c,2);try{this.fd2file(f).stat(u)}catch(d){u(d)}},S.prototype.fstatSync=function(f){return this.fd2file(f).statSync()},S.prototype.close=function(f,c){var u=this;c===void 0&&(c=z);var d=I(c,1);try{this.fd2file(f).close(function(g){g||u.closeFd(f),d(g)})}catch(g){d(g)}},S.prototype.closeSync=function(f){this.fd2file(f).closeSync(),this.closeFd(f)},S.prototype.ftruncate=function(f,c,u){u===void 0&&(u=z);var d=typeof c=="number"?c:0,g=I(u=typeof c=="function"?c:u,1);try{var v=this.fd2file(f);if(d<0)throw new y(a.EINVAL);v.truncate(d,g)}catch(_){g(_)}},S.prototype.ftruncateSync=function(f,c){c===void 0&&(c=0);var u=this.fd2file(f);if(c<0)throw new y(a.EINVAL);u.truncateSync(c)},S.prototype.fsync=function(f,c){c===void 0&&(c=z);var u=I(c,1);try{this.fd2file(f).sync(u)}catch(d){u(d)}},S.prototype.fsyncSync=function(f){this.fd2file(f).syncSync()},S.prototype.fdatasync=function(f,c){c===void 0&&(c=z);var u=I(c,1);try{this.fd2file(f).datasync(u)}catch(d){u(d)}},S.prototype.fdatasyncSync=function(f){this.fd2file(f).datasyncSync()},S.prototype.write=function(f,c,u,d,g,v){v===void 0&&(v=z);var _,A,P,$=null;if(typeof c=="string"){var Q="utf8";switch(typeof u){case"function":v=u;break;case"number":$=u,Q=typeof d=="string"?d:"utf8",v=typeof g=="function"?g:v;break;default:return(v=typeof d=="function"?d:typeof g=="function"?g:v)(new y(a.EINVAL,"Invalid arguments."))}A=0,P=(_=n.from(c,Q)).length}else _=c,A=u,P=d,$=typeof g=="number"?g:null,v=typeof g=="function"?g:v;var fe=I(v,3);try{var pe=this.fd2file(f);$==null&&($=pe.getPos()),pe.write(_,A,P,$,fe)}catch(ve){fe(ve)}},S.prototype.writeSync=function(f,c,u,d,g){var v,_,A,P=0;if(typeof c=="string"){A=typeof u=="number"?u:null;var $=typeof d=="string"?d:"utf8";P=0,_=(v=n.from(c,$)).length}else v=c,P=u,_=d,A=typeof g=="number"?g:null;var Q=this.fd2file(f);return A==null&&(A=Q.getPos()),Q.writeSync(v,P,_,A)},S.prototype.read=function(f,c,u,d,g,v){var _,A,P,$,Q;if(v===void 0&&(v=z),typeof c=="number"){P=c,_=u;var fe=d;v=typeof g=="function"?g:v,A=0,$=n.alloc(P),Q=I(function(ve,we,Ie){if(ve)return v(ve);v(ve,Ie.toString(fe),we)},3)}else $=c,A=u,P=d,_=g,Q=I(v,3);try{var pe=this.fd2file(f);_==null&&(_=pe.getPos()),pe.read($,A,P,_,Q)}catch(ve){Q(ve)}},S.prototype.readSync=function(f,c,u,d,g){var v,_,A,P,$=!1,Q="utf8";typeof c=="number"?(A=c,P=u,Q=d,_=0,v=n.alloc(A),$=!0):(v=c,_=u,A=d,P=g);var fe=this.fd2file(f);P==null&&(P=fe.getPos());var pe=fe.readSync(v,_,A,P);return $?[v.toString(Q),pe]:pe},S.prototype.fchown=function(f,c,u,d){d===void 0&&(d=z);var g=I(d,1);try{this.fd2file(f).chown(c,u,g)}catch(v){g(v)}},S.prototype.fchownSync=function(f,c,u){this.fd2file(f).chownSync(c,u)},S.prototype.fchmod=function(f,c,u){var d=I(u,1);try{var g=typeof c=="string"?parseInt(c,8):c;this.fd2file(f).chmod(g,d)}catch(v){d(v)}},S.prototype.fchmodSync=function(f,c){var u=typeof c=="string"?parseInt(c,8):c;this.fd2file(f).chmodSync(u)},S.prototype.futimes=function(f,c,u,d){d===void 0&&(d=z);var g=I(d,1);try{var v=this.fd2file(f);typeof c=="number"&&(c=new Date(1e3*c)),typeof u=="number"&&(u=new Date(1e3*u)),v.utimes(c,u,g)}catch(_){g(_)}},S.prototype.futimesSync=function(f,c,u){this.fd2file(f).utimesSync(q(c),q(u))},S.prototype.rmdir=function(f,c){c===void 0&&(c=z);var u=I(c,1);try{f=G(f),R(this.root).rmdir(f,u)}catch(d){u(d)}},S.prototype.rmdirSync=function(f){return f=G(f),R(this.root).rmdirSync(f)},S.prototype.mkdir=function(f,c,u){u===void 0&&(u=z),typeof c=="function"&&(u=c,c=511);var d=I(u,1);try{f=G(f),R(this.root).mkdir(f,c,d)}catch(g){d(g)}},S.prototype.mkdirSync=function(f,c){R(this.root).mkdirSync(G(f),J(c,511))},S.prototype.readdir=function(f,c){c===void 0&&(c=z);var u=I(c,2);try{f=G(f),R(this.root).readdir(f,u)}catch(d){u(d)}},S.prototype.readdirSync=function(f){return f=G(f),R(this.root).readdirSync(f)},S.prototype.link=function(f,c,u){u===void 0&&(u=z);var d=I(u,1);try{f=G(f),c=G(c),R(this.root).link(f,c,d)}catch(g){d(g)}},S.prototype.linkSync=function(f,c){return f=G(f),c=G(c),R(this.root).linkSync(f,c)},S.prototype.symlink=function(f,c,u,d){d===void 0&&(d=z);var g=typeof u=="string"?u:"file",v=I(d=typeof u=="function"?u:d,1);try{if(g!=="file"&&g!=="dir")return v(new y(a.EINVAL,"Invalid type: "+g));f=G(f),c=G(c),R(this.root).symlink(f,c,g,v)}catch(_){v(_)}},S.prototype.symlinkSync=function(f,c,u){if(u){if(u!=="file"&&u!=="dir")throw new y(a.EINVAL,"Invalid type: "+u)}else u="file";return f=G(f),c=G(c),R(this.root).symlinkSync(f,c,u)},S.prototype.readlink=function(f,c){c===void 0&&(c=z);var u=I(c,2);try{f=G(f),R(this.root).readlink(f,u)}catch(d){u(d)}},S.prototype.readlinkSync=function(f){return f=G(f),R(this.root).readlinkSync(f)},S.prototype.chown=function(f,c,u,d){d===void 0&&(d=z);var g=I(d,1);try{f=G(f),R(this.root).chown(f,!1,c,u,g)}catch(v){g(v)}},S.prototype.chownSync=function(f,c,u){f=G(f),R(this.root).chownSync(f,!1,c,u)},S.prototype.lchown=function(f,c,u,d){d===void 0&&(d=z);var g=I(d,1);try{f=G(f),R(this.root).chown(f,!0,c,u,g)}catch(v){g(v)}},S.prototype.lchownSync=function(f,c,u){f=G(f),R(this.root).chownSync(f,!0,c,u)},S.prototype.chmod=function(f,c,u){u===void 0&&(u=z);var d=I(u,1);try{var g=J(c,-1);if(g<0)throw new y(a.EINVAL,"Invalid mode.");R(this.root).chmod(G(f),!1,g,d)}catch(v){d(v)}},S.prototype.chmodSync=function(f,c){var u=J(c,-1);if(u<0)throw new y(a.EINVAL,"Invalid mode.");f=G(f),R(this.root).chmodSync(f,!1,u)},S.prototype.lchmod=function(f,c,u){u===void 0&&(u=z);var d=I(u,1);try{var g=J(c,-1);if(g<0)throw new y(a.EINVAL,"Invalid mode.");R(this.root).chmod(G(f),!0,g,d)}catch(v){d(v)}},S.prototype.lchmodSync=function(f,c){var u=J(c,-1);if(u<1)throw new y(a.EINVAL,"Invalid mode.");R(this.root).chmodSync(G(f),!0,u)},S.prototype.utimes=function(f,c,u,d){d===void 0&&(d=z);var g=I(d,1);try{R(this.root).utimes(G(f),q(c),q(u),g)}catch(v){g(v)}},S.prototype.utimesSync=function(f,c,u){R(this.root).utimesSync(G(f),q(c),q(u))},S.prototype.realpath=function(f,c,u){u===void 0&&(u=z);var d=typeof c=="object"?c:{},g=I(u=typeof c=="function"?c:z,2);try{f=G(f),R(this.root).realpath(f,d,g)}catch(v){g(v)}},S.prototype.realpathSync=function(f,c){return c===void 0&&(c={}),f=G(f),R(this.root).realpathSync(f,c)},S.prototype.watchFile=function(f,c,u){throw new y(a.ENOTSUP)},S.prototype.unwatchFile=function(f,c){throw new y(a.ENOTSUP)},S.prototype.watch=function(f,c,u){throw new y(a.ENOTSUP)},S.prototype.access=function(f,c,u){throw new y(a.ENOTSUP)},S.prototype.accessSync=function(f,c){throw new y(a.ENOTSUP)},S.prototype.createReadStream=function(f,c){throw new y(a.ENOTSUP)},S.prototype.createWriteStream=function(f,c){throw new y(a.ENOTSUP)},S.prototype.wrapCallbacks=function(f){I=f},S.prototype.getFdForFile=function(f){var c=this.nextFd++;return this.fdMap[c]=f,c},S.prototype.fd2file=function(f){var c=this.fdMap[f];if(c)return c;throw new y(a.EBADF,"Invalid file descriptor.")},S.prototype.closeFd=function(f){delete this.fdMap[f]},S.Stats=O;var W=new S,te={},X=S.prototype;function ue(f,c,u,d,g){return f<c||u<c?f>u?u+1:f+1:d===g?c:c+1}function ae(f,c){if(f===c)return 0;if(f.length>c.length){var u=f;f=c,c=u}for(var d=f.length,g=c.length;d>0&&f.charCodeAt(d-1)===c.charCodeAt(g-1);)d--,g--;for(var v=0;v<d&&f.charCodeAt(v)===c.charCodeAt(v);)v++;if(g-=v,(d-=v)==0||g===1)return g;for(var _,A,P,$,Q,fe=new Array(d<<1),pe=0;pe<d;)fe[d+pe]=f.charCodeAt(v+pe),fe[pe]=++pe;for(_=0;_+3<g;)for(var ve=c.charCodeAt(v+(A=_)),we=c.charCodeAt(v+(P=_+1)),Ie=c.charCodeAt(v+($=_+2)),ze=c.charCodeAt(v+(Q=_+3)),Nt=_+=4,rn=0;rn<d;){var Rr=fe[d+rn],Co=fe[rn];A=ue(Co,A,P,ve,Rr),P=ue(A,P,$,we,Rr),$=ue(P,$,Q,Ie,Rr),Nt=ue($,Q,Nt,ze,Rr),fe[rn++]=Nt,Q=$,$=P,P=A,A=Co}for(var gr=0;_<g;){var Xf=c.charCodeAt(v+(A=_));gr=++_;for(var zi=0;zi<d;zi++){var Vi=fe[zi];fe[zi]=gr=Vi<A||gr<A?Vi>gr?gr+1:Vi+1:Xf===fe[d+zi]?A:A+1,A=Vi}}return gr}function ge(f,c,u){f&&console.warn("["+c+"] Direct file system constructor usage is deprecated for this file system, and will be removed in the next major version. Please use the '"+c+".Create("+JSON.stringify(u)+", callback)' method instead. See https://github.com/jvilk/BrowserFS/issues/176 for more details.")}Object.keys(X).forEach(function(f){typeof W[f]=="function"?te[f]=function(){return W[f].apply(W,arguments)}:te[f]=W[f]}),te.changeFSModule=function(f){W=f},te.getFSModule=function(){return W},te.FS=S;var M=typeof navigator<"u"&&!(!/(msie) ([\w.]+)/.exec(navigator.userAgent.toLowerCase())&&navigator.userAgent.indexOf("Trident")===-1),C=typeof window>"u";function ie(){throw new Error("BFS has reached an impossible code path; please file a bug.")}function B(f,c,u){u.existsSync(f)||(B(h.dirname(f),c,u),u.mkdirSync(f,c))}function V(f){var c=Y(f),u=c.byteOffset,d=c.byteLength;return u===0&&d===c.buffer.byteLength?c.buffer:c.buffer.slice(u,u+d)}function Y(f){return f instanceof Uint8Array?f:new Uint8Array(f)}function ce(f){return f instanceof n?f:f instanceof Uint8Array?oe(f):n.from(f)}function oe(f){return f instanceof n?f:f.byteOffset===0&&f.byteLength===f.buffer.byteLength?ne(f.buffer):n.from(f.buffer,f.byteOffset,f.byteLength)}function ne(f){return n.from(f)}function se(f,c,u){if(c===void 0&&(c=0),u===void 0&&(u=f.length),c<0||u<0||u>f.length||c>u)throw new TypeError("Invalid slice bounds on buffer of length "+f.length+": ["+c+", "+u+"]");if(f.length===0)return Ee();var d=Y(f),g=f[0],v=(g+1)%255;return f[0]=v,d[0]===v?(d[0]=g,oe(d.slice(c,u))):(f[0]=g,oe(d.subarray(c,u)))}var ye=null;function Ee(){return ye||(ye=n.alloc(0))}function Ae(f,c){n.isBuffer(f)?c():c(new y(a.EINVAL,"option must be a Buffer."))}function T(f,c,u){var d=f.Options,g=f.Name,v=0,_=!1,A=!1;function P(pe){_||(pe&&(_=!0,u(pe)),--v==0&&A&&u())}var $=function(pe){if(d.hasOwnProperty(pe)){var ve=d[pe],we=c[pe];if(we==null){if(!ve.optional){var Ie=Object.keys(c).filter(function(ze){return!(ze in d)}).map(function(ze){return{str:ze,distance:ae(pe,ze)}}).filter(function(ze){return ze.distance<5}).sort(function(ze,Nt){return ze.distance-Nt.distance});return _?{}:(_=!0,{v:u(new y(a.EINVAL,"["+g+"] Required option '"+pe+"' not provided."+(Ie.length>0?" You provided unrecognized option '"+Ie[0].str+"'; perhaps you meant to type '"+pe+"'.":"")+`
Option description: `+ve.description))})}}else{if(!(Array.isArray(ve.type)?ve.type.indexOf(typeof we)!==-1:typeof we===ve.type))return _?{}:(_=!0,{v:u(new y(a.EINVAL,"["+g+"] Value provided for option "+pe+" is not the proper type. Expected "+(Array.isArray(ve.type)?"one of {"+ve.type.join(", ")+"}":ve.type)+", but received "+typeof we+`
Option description: `+ve.description))});ve.validator&&(v++,ve.validator(we,P))}}};for(var Q in d){var fe=$(Q);if(fe)return fe.v}A=!0,v!==0||_||u()}var D=Object.freeze({deprecationMessage:ge,isIE:M,isWebWorker:C,fail:ie,mkdirpSync:B,buffer2ArrayBuffer:V,buffer2Uint8array:Y,arrayish2Buffer:ce,uint8Array2Buffer:oe,arrayBuffer2Buffer:ne,copyingSlice:se,emptyBuffer:Ee,bufferValidator:Ae,checkOptions:T}),j=function(f){this.fs=f,this.nodefs=f.getNodeFS(),this.FS=f.getFS(),this.PATH=f.getPATH(),this.ERRNO_CODES=f.getERRNO_CODES()};j.prototype.open=function(f){var c=this.fs.realPath(f.node),u=this.FS;try{u.isFile(f.node.mode)&&(f.nfd=this.nodefs.openSync(c,this.fs.flagsToPermissionString(f.flags)))}catch(d){throw d.code?new u.ErrnoError(this.ERRNO_CODES[d.code]):d}},j.prototype.close=function(f){var c=this.FS;try{c.isFile(f.node.mode)&&f.nfd&&this.nodefs.closeSync(f.nfd)}catch(u){throw u.code?new c.ErrnoError(this.ERRNO_CODES[u.code]):u}},j.prototype.read=function(f,c,u,d,g){try{return this.nodefs.readSync(f.nfd,oe(c),u,d,g)}catch(v){throw new this.FS.ErrnoError(this.ERRNO_CODES[v.code])}},j.prototype.write=function(f,c,u,d,g){try{return this.nodefs.writeSync(f.nfd,oe(c),u,d,g)}catch(v){throw new this.FS.ErrnoError(this.ERRNO_CODES[v.code])}},j.prototype.llseek=function(f,c,u){var d=c;if(u===1)d+=f.position;else if(u===2&&this.FS.isFile(f.node.mode))try{d+=this.nodefs.fstatSync(f.nfd).size}catch(g){throw new this.FS.ErrnoError(this.ERRNO_CODES[g.code])}if(d<0)throw new this.FS.ErrnoError(this.ERRNO_CODES.EINVAL);return f.position=d,d};var H=function(f){this.fs=f,this.nodefs=f.getNodeFS(),this.FS=f.getFS(),this.PATH=f.getPATH(),this.ERRNO_CODES=f.getERRNO_CODES()};H.prototype.getattr=function(f){var c,u=this.fs.realPath(f);try{c=this.nodefs.lstatSync(u)}catch(d){throw d.code?new this.FS.ErrnoError(this.ERRNO_CODES[d.code]):d}return{dev:c.dev,ino:c.ino,mode:c.mode,nlink:c.nlink,uid:c.uid,gid:c.gid,rdev:c.rdev,size:c.size,atime:c.atime,mtime:c.mtime,ctime:c.ctime,blksize:c.blksize,blocks:c.blocks}},H.prototype.setattr=function(f,c){var u=this.fs.realPath(f);try{if(c.mode!==void 0&&(this.nodefs.chmodSync(u,c.mode),f.mode=c.mode),c.timestamp!==void 0){var d=new Date(c.timestamp);this.nodefs.utimesSync(u,d,d)}}catch(g){if(!g.code)throw g;if(g.code!=="ENOTSUP")throw new this.FS.ErrnoError(this.ERRNO_CODES[g.code])}if(c.size!==void 0)try{this.nodefs.truncateSync(u,c.size)}catch(g){throw g.code?new this.FS.ErrnoError(this.ERRNO_CODES[g.code]):g}},H.prototype.lookup=function(f,c){var u=this.PATH.join2(this.fs.realPath(f),c),d=this.fs.getMode(u);return this.fs.createNode(f,c,d)},H.prototype.mknod=function(f,c,u,d){var g=this.fs.createNode(f,c,u,d),v=this.fs.realPath(g);try{this.FS.isDir(g.mode)?this.nodefs.mkdirSync(v,g.mode):this.nodefs.writeFileSync(v,"",{mode:g.mode})}catch(_){throw _.code?new this.FS.ErrnoError(this.ERRNO_CODES[_.code]):_}return g},H.prototype.rename=function(f,c,u){var d=this.fs.realPath(f),g=this.PATH.join2(this.fs.realPath(c),u);try{this.nodefs.renameSync(d,g),f.name=u,f.parent=c}catch(v){throw v.code?new this.FS.ErrnoError(this.ERRNO_CODES[v.code]):v}},H.prototype.unlink=function(f,c){var u=this.PATH.join2(this.fs.realPath(f),c);try{this.nodefs.unlinkSync(u)}catch(d){throw d.code?new this.FS.ErrnoError(this.ERRNO_CODES[d.code]):d}},H.prototype.rmdir=function(f,c){var u=this.PATH.join2(this.fs.realPath(f),c);try{this.nodefs.rmdirSync(u)}catch(d){throw d.code?new this.FS.ErrnoError(this.ERRNO_CODES[d.code]):d}},H.prototype.readdir=function(f){var c=this.fs.realPath(f);try{var u=this.nodefs.readdirSync(c);return u.push(".",".."),u}catch(d){throw d.code?new this.FS.ErrnoError(this.ERRNO_CODES[d.code]):d}},H.prototype.symlink=function(f,c,u){var d=this.PATH.join2(this.fs.realPath(f),c);try{this.nodefs.symlinkSync(u,d)}catch(g){throw g.code?new this.FS.ErrnoError(this.ERRNO_CODES[g.code]):g}},H.prototype.readlink=function(f){var c=this.fs.realPath(f);try{return this.nodefs.readlinkSync(c)}catch(u){throw u.code?new this.FS.ErrnoError(this.ERRNO_CODES[u.code]):u}};var Z=function(f,c,u,d){f===void 0&&(f=self.FS),c===void 0&&(c=self.PATH),u===void 0&&(u=self.ERRNO_CODES),d===void 0&&(d=te),this.flagsToPermissionStringMap={0:"r",1:"r+",2:"r+",64:"r",65:"r+",66:"r+",129:"rx+",193:"rx+",514:"w+",577:"w",578:"w+",705:"wx",706:"wx+",1024:"a",1025:"a",1026:"a+",1089:"a",1090:"a+",1153:"ax",1154:"ax+",1217:"ax",1218:"ax+",4096:"rs",4098:"rs+"},this.nodefs=d,this.FS=f,this.PATH=c,this.ERRNO_CODES=u,this.node_ops=new H(this),this.stream_ops=new j(this)};Z.prototype.mount=function(f){return this.createNode(null,"/",this.getMode(f.opts.root),0)},Z.prototype.createNode=function(f,c,u,d){var g=this.FS;if(!g.isDir(u)&&!g.isFile(u)&&!g.isLink(u))throw new g.ErrnoError(this.ERRNO_CODES.EINVAL);var v=g.createNode(f,c,u);return v.node_ops=this.node_ops,v.stream_ops=this.stream_ops,v},Z.prototype.getMode=function(f){var c;try{c=this.nodefs.lstatSync(f)}catch(u){throw u.code?new this.FS.ErrnoError(this.ERRNO_CODES[u.code]):u}return c.mode},Z.prototype.realPath=function(f){for(var c=[];f.parent!==f;)c.push(f.name),f=f.parent;return c.push(f.mount.opts.root),c.reverse(),this.PATH.join.apply(null,c)},Z.prototype.flagsToPermissionString=function(f){var c=typeof f=="string"?parseInt(f,10):f;return(c&=8191)in this.flagsToPermissionStringMap?this.flagsToPermissionStringMap[c]:f},Z.prototype.getNodeFS=function(){return this.nodefs},Z.prototype.getFS=function(){return this.FS},Z.prototype.getPATH=function(){return this.PATH},Z.prototype.getERRNO_CODES=function(){return this.ERRNO_CODES};var K=function(){};K.prototype.supportsLinks=function(){return!1},K.prototype.diskSpace=function(f,c){c(0,0)},K.prototype.openFile=function(f,c,u){throw new y(a.ENOTSUP)},K.prototype.createFile=function(f,c,u,d){throw new y(a.ENOTSUP)},K.prototype.open=function(f,c,u,d){var g=this;this.stat(f,!1,function(v,_){if(v)switch(c.pathNotExistsAction()){case m.CREATE_FILE:return g.stat(h.dirname(f),!1,function(A,P){A?d(A):P&&!P.isDirectory()?d(y.ENOTDIR(h.dirname(f))):g.createFile(f,c,u,d)});case m.THROW_EXCEPTION:return d(y.ENOENT(f));default:return d(new y(a.EINVAL,"Invalid FileFlag object."))}else{if(_&&_.isDirectory())return d(y.EISDIR(f));switch(c.pathExistsAction()){case m.THROW_EXCEPTION:return d(y.EEXIST(f));case m.TRUNCATE_FILE:return g.openFile(f,c,function(A,P){A?d(A):P?P.truncate(0,function(){P.sync(function(){d(null,P)})}):ie()});case m.NOP:return g.openFile(f,c,d);default:return d(new y(a.EINVAL,"Invalid FileFlag object."))}}})},K.prototype.rename=function(f,c,u){u(new y(a.ENOTSUP))},K.prototype.renameSync=function(f,c){throw new y(a.ENOTSUP)},K.prototype.stat=function(f,c,u){u(new y(a.ENOTSUP))},K.prototype.statSync=function(f,c){throw new y(a.ENOTSUP)},K.prototype.openFileSync=function(f,c,u){throw new y(a.ENOTSUP)},K.prototype.createFileSync=function(f,c,u){throw new y(a.ENOTSUP)},K.prototype.openSync=function(f,c,u){var d;try{d=this.statSync(f,!1)}catch{switch(c.pathNotExistsAction()){case m.CREATE_FILE:if(!this.statSync(h.dirname(f),!1).isDirectory())throw y.ENOTDIR(h.dirname(f));return this.createFileSync(f,c,u);case m.THROW_EXCEPTION:throw y.ENOENT(f);default:throw new y(a.EINVAL,"Invalid FileFlag object.")}}if(d.isDirectory())throw y.EISDIR(f);switch(c.pathExistsAction()){case m.THROW_EXCEPTION:throw y.EEXIST(f);case m.TRUNCATE_FILE:return this.unlinkSync(f),this.createFileSync(f,c,d.mode);case m.NOP:return this.openFileSync(f,c,u);default:throw new y(a.EINVAL,"Invalid FileFlag object.")}},K.prototype.unlink=function(f,c){c(new y(a.ENOTSUP))},K.prototype.unlinkSync=function(f){throw new y(a.ENOTSUP)},K.prototype.rmdir=function(f,c){c(new y(a.ENOTSUP))},K.prototype.rmdirSync=function(f){throw new y(a.ENOTSUP)},K.prototype.mkdir=function(f,c,u){u(new y(a.ENOTSUP))},K.prototype.mkdirSync=function(f,c){throw new y(a.ENOTSUP)},K.prototype.readdir=function(f,c){c(new y(a.ENOTSUP))},K.prototype.readdirSync=function(f){throw new y(a.ENOTSUP)},K.prototype.exists=function(f,c){this.stat(f,null,function(u){c(!u)})},K.prototype.existsSync=function(f){try{return this.statSync(f,!0),!0}catch{return!1}},K.prototype.realpath=function(f,c,u){if(this.supportsLinks())for(var d=f.split(h.sep),g=0;g<d.length;g++){var v=d.slice(0,g+1);d[g]=h.join.apply(null,v)}else this.exists(f,function(_){_?u(null,f):u(y.ENOENT(f))})},K.prototype.realpathSync=function(f,c){if(this.supportsLinks()){for(var u=f.split(h.sep),d=0;d<u.length;d++){var g=u.slice(0,d+1);u[d]=h.join.apply(h,g)}return u.join(h.sep)}if(this.existsSync(f))return f;throw y.ENOENT(f)},K.prototype.truncate=function(f,c,u){this.open(f,N.getFileFlag("r+"),420,function(d,g){if(d)return u(d);g.truncate(c,function(v){g.close(function(_){u(v||_)})})})},K.prototype.truncateSync=function(f,c){var u=this.openSync(f,N.getFileFlag("r+"),420);try{u.truncateSync(c)}catch(d){throw d}finally{u.closeSync()}},K.prototype.readFile=function(f,c,u,d){var g=d;this.open(f,u,420,function(v,_){if(v)return d(v);d=function(A,P){_.close(function($){return A||(A=$),g(A,P)})},_.stat(function(A,P){if(A)return d(A);var $=n.alloc(P.size);_.read($,0,P.size,0,function(Q){if(Q)return d(Q);if(c===null)return d(Q,$);try{d(null,$.toString(c))}catch(fe){d(fe)}})})})},K.prototype.readFileSync=function(f,c,u){var d=this.openSync(f,u,420);try{var g=d.statSync(),v=n.alloc(g.size);return d.readSync(v,0,g.size,0),d.closeSync(),c===null?v:v.toString(c)}finally{d.closeSync()}},K.prototype.writeFile=function(f,c,u,d,g,v){var _=v;this.open(f,d,420,function(A,P){if(A)return v(A);v=function($){P.close(function(Q){_($||Q)})};try{typeof c=="string"&&(c=n.from(c,u))}catch($){return v($)}P.write(c,0,c.length,0,v)})},K.prototype.writeFileSync=function(f,c,u,d,g){var v=this.openSync(f,d,g);try{typeof c=="string"&&(c=n.from(c,u)),v.writeSync(c,0,c.length,0)}finally{v.closeSync()}},K.prototype.appendFile=function(f,c,u,d,g,v){var _=v;this.open(f,d,g,function(A,P){if(A)return v(A);v=function($){P.close(function(Q){_($||Q)})},typeof c=="string"&&(c=n.from(c,u)),P.write(c,0,c.length,null,v)})},K.prototype.appendFileSync=function(f,c,u,d,g){var v=this.openSync(f,d,g);try{typeof c=="string"&&(c=n.from(c,u)),v.writeSync(c,0,c.length,null)}finally{v.closeSync()}},K.prototype.chmod=function(f,c,u,d){d(new y(a.ENOTSUP))},K.prototype.chmodSync=function(f,c,u){throw new y(a.ENOTSUP)},K.prototype.chown=function(f,c,u,d,g){g(new y(a.ENOTSUP))},K.prototype.chownSync=function(f,c,u,d){throw new y(a.ENOTSUP)},K.prototype.utimes=function(f,c,u,d){d(new y(a.ENOTSUP))},K.prototype.utimesSync=function(f,c,u){throw new y(a.ENOTSUP)},K.prototype.link=function(f,c,u){u(new y(a.ENOTSUP))},K.prototype.linkSync=function(f,c){throw new y(a.ENOTSUP)},K.prototype.symlink=function(f,c,u,d){d(new y(a.ENOTSUP))},K.prototype.symlinkSync=function(f,c,u){throw new y(a.ENOTSUP)},K.prototype.readlink=function(f,c){c(new y(a.ENOTSUP))},K.prototype.readlinkSync=function(f){throw new y(a.ENOTSUP)};var Se=function(f){function c(){f.apply(this,arguments)}return f&&(c.__proto__=f),c.prototype=Object.create(f&&f.prototype),c.prototype.constructor=c,c.prototype.supportsSynch=function(){return!0},c.prototype.rename=function(u,d,g){try{this.renameSync(u,d),g()}catch(v){g(v)}},c.prototype.stat=function(u,d,g){try{g(null,this.statSync(u,d))}catch(v){g(v)}},c.prototype.open=function(u,d,g,v){try{v(null,this.openSync(u,d,g))}catch(_){v(_)}},c.prototype.unlink=function(u,d){try{this.unlinkSync(u),d()}catch(g){d(g)}},c.prototype.rmdir=function(u,d){try{this.rmdirSync(u),d()}catch(g){d(g)}},c.prototype.mkdir=function(u,d,g){try{this.mkdirSync(u,d),g()}catch(v){g(v)}},c.prototype.readdir=function(u,d){try{d(null,this.readdirSync(u))}catch(g){d(g)}},c.prototype.chmod=function(u,d,g,v){try{this.chmodSync(u,d,g),v()}catch(_){v(_)}},c.prototype.chown=function(u,d,g,v,_){try{this.chownSync(u,d,g,v),_()}catch(A){_(A)}},c.prototype.utimes=function(u,d,g,v){try{this.utimesSync(u,d,g),v()}catch(_){v(_)}},c.prototype.link=function(u,d,g){try{this.linkSync(u,d),g()}catch(v){g(v)}},c.prototype.symlink=function(u,d,g,v){try{this.symlinkSync(u,d,g),v()}catch(_){v(_)}},c.prototype.readlink=function(u,d){try{d(null,this.readlinkSync(u))}catch(g){d(g)}},c}(K),L=function(){};L.prototype.sync=function(f){f(new y(a.ENOTSUP))},L.prototype.syncSync=function(){throw new y(a.ENOTSUP)},L.prototype.datasync=function(f){this.sync(f)},L.prototype.datasyncSync=function(){return this.syncSync()},L.prototype.chown=function(f,c,u){u(new y(a.ENOTSUP))},L.prototype.chownSync=function(f,c){throw new y(a.ENOTSUP)},L.prototype.chmod=function(f,c){c(new y(a.ENOTSUP))},L.prototype.chmodSync=function(f){throw new y(a.ENOTSUP)},L.prototype.utimes=function(f,c,u){u(new y(a.ENOTSUP))},L.prototype.utimesSync=function(f,c){throw new y(a.ENOTSUP)};var E=function(f){function c(u,d,g,v,_){if(f.call(this),this._pos=0,this._dirty=!1,this._fs=u,this._path=d,this._flag=g,this._stat=v,this._buffer=_||Ee(),this._stat.size!==this._buffer.length&&this._flag.isReadable())throw new Error("Invalid buffer: Buffer is "+this._buffer.length+" long, yet Stats object specifies that file is "+this._stat.size+" long.")}return f&&(c.__proto__=f),c.prototype=Object.create(f&&f.prototype),c.prototype.constructor=c,c.prototype.getBuffer=function(){return this._buffer},c.prototype.getStats=function(){return this._stat},c.prototype.getFlag=function(){return this._flag},c.prototype.getPath=function(){return this._path},c.prototype.getPos=function(){return this._flag.isAppendable()?this._stat.size:this._pos},c.prototype.advancePos=function(u){return this._pos+=u},c.prototype.setPos=function(u){return this._pos=u},c.prototype.sync=function(u){try{this.syncSync(),u()}catch(d){u(d)}},c.prototype.syncSync=function(){throw new y(a.ENOTSUP)},c.prototype.close=function(u){try{this.closeSync(),u()}catch(d){u(d)}},c.prototype.closeSync=function(){throw new y(a.ENOTSUP)},c.prototype.stat=function(u){try{u(null,this._stat.clone())}catch(d){u(d)}},c.prototype.statSync=function(){return this._stat.clone()},c.prototype.truncate=function(u,d){try{this.truncateSync(u),this._flag.isSynchronous()&&!te.getRootFS().supportsSynch()&&this.sync(d),d()}catch(g){return d(g)}},c.prototype.truncateSync=function(u){if(this._dirty=!0,!this._flag.isWriteable())throw new y(a.EPERM,"File not opened with a writeable mode.");if(this._stat.mtime=new Date,u>this._buffer.length){var d=n.alloc(u-this._buffer.length,0);return this.writeSync(d,0,d.length,this._buffer.length),void(this._flag.isSynchronous()&&te.getRootFS().supportsSynch()&&this.syncSync())}this._stat.size=u;var g=n.alloc(u);this._buffer.copy(g,0,0,u),this._buffer=g,this._flag.isSynchronous()&&te.getRootFS().supportsSynch()&&this.syncSync()},c.prototype.write=function(u,d,g,v,_){try{_(null,this.writeSync(u,d,g,v),u)}catch(A){_(A)}},c.prototype.writeSync=function(u,d,g,v){if(this._dirty=!0,v==null&&(v=this.getPos()),!this._flag.isWriteable())throw new y(a.EPERM,"File not opened with a writeable mode.");var _=v+g;if(_>this._stat.size&&(this._stat.size=_,_>this._buffer.length)){var A=n.alloc(_);this._buffer.copy(A),this._buffer=A}var P=u.copy(this._buffer,v,d,d+g);return this._stat.mtime=new Date,this._flag.isSynchronous()?(this.syncSync(),P):(this.setPos(v+P),P)},c.prototype.read=function(u,d,g,v,_){try{_(null,this.readSync(u,d,g,v),u)}catch(A){_(A)}},c.prototype.readSync=function(u,d,g,v){if(!this._flag.isReadable())throw new y(a.EPERM,"File not opened with a readable mode.");v==null&&(v=this.getPos()),v+g>this._stat.size&&(g=this._stat.size-v);var _=this._buffer.copy(u,d,v,v+g);return this._stat.atime=new Date,this._pos=v+g,_},c.prototype.chmod=function(u,d){try{this.chmodSync(u),d()}catch(g){d(g)}},c.prototype.chmodSync=function(u){if(!this._fs.supportsProps())throw new y(a.ENOTSUP);this._dirty=!0,this._stat.chmod(u),this.syncSync()},c.prototype.isDirty=function(){return this._dirty},c.prototype.resetDirty=function(){this._dirty=!1},c}(L),k=function(f){function c(u,d,g,v,_){f.call(this,u,d,g,v,_)}return f&&(c.__proto__=f),c.prototype=Object.create(f&&f.prototype),c.prototype.constructor=c,c.prototype.sync=function(u){u()},c.prototype.syncSync=function(){},c.prototype.close=function(u){u()},c.prototype.closeSync=function(){},c}(E),U=function(f){function c(u,d,g,v,_){f.call(this,u,d,g,v,_)}return f&&(c.__proto__=f),c.prototype=Object.create(f&&f.prototype),c.prototype.constructor=c,c.prototype.syncSync=function(){this.isDirty()&&(this._fs._syncSync(this),this.resetDirty())},c.prototype.closeSync=function(){this.syncSync()},c}(E),ee=function(f){function c(u,d,g){if(g===void 0&&(g=!0),f.call(this),this._queue=[],this._queueRunning=!1,this._isInitialized=!1,this._initializeCallbacks=[],this._sync=u,this._async=d,!u.supportsSynch())throw new Error("The first argument to AsyncMirror needs to be a synchronous file system.");ge(g,c.Name,{sync:"sync file system instance",async:"async file system instance"})}return f&&(c.__proto__=f),c.prototype=Object.create(f&&f.prototype),c.prototype.constructor=c,c.Create=function(u,d){try{var g=new c(u.sync,u.async,!1);g.initialize(function(v){v?d(v):d(null,g)},!1)}catch(v){d(v)}},c.isAvailable=function(){return!0},c.prototype.getName=function(){return c.Name},c.prototype._syncSync=function(u){this._sync.writeFileSync(u.getPath(),u.getBuffer(),null,N.getFileFlag("w"),u.getStats().mode),this.enqueueOp({apiMethod:"writeFile",arguments:[u.getPath(),u.getBuffer(),null,u.getFlag(),u.getStats().mode]})},c.prototype.initialize=function(u,d){var g=this;d===void 0&&(d=!0),d&&console.warn("[AsyncMirror] AsyncMirror.initialize() is deprecated and will be removed in the next major version. Please use 'AsyncMirror.Create({ sync: (sync file system instance), async: (async file system instance)}, cb)' to create and initialize AsyncMirror instances.");var v=this._initializeCallbacks;if(this._isInitialized)u();else if(v.push(u)===1){var _=function(P,$,Q){P!=="/"&&g._sync.mkdirSync(P,$),g._async.readdir(P,function(fe,pe){var ve=0;fe?Q(fe):function we(Ie){Ie?Q(Ie):ve<pe.length?(A(h.join(P,pe[ve]),we),ve++):Q()}()})},A=function(P,$){g._async.stat(P,!1,function(Q,fe){Q?$(Q):fe.isDirectory()?_(P,fe.mode,$):function(pe,ve,we){g._async.readFile(pe,null,N.getFileFlag("r"),function(Ie,ze){if(Ie)we(Ie);else try{g._sync.writeFileSync(pe,ze,null,N.getFileFlag("w"),ve)}catch(Nt){Ie=Nt}finally{we(Ie)}})}(P,fe.mode,$)})};_("/",0,function(P){g._isInitialized=!P,g._initializeCallbacks=[],v.forEach(function($){return $(P)})})}},c.prototype.isReadOnly=function(){return!1},c.prototype.supportsSynch=function(){return!0},c.prototype.supportsLinks=function(){return!1},c.prototype.supportsProps=function(){return this._sync.supportsProps()&&this._async.supportsProps()},c.prototype.renameSync=function(u,d){this.checkInitialized(),this._sync.renameSync(u,d),this.enqueueOp({apiMethod:"rename",arguments:[u,d]})},c.prototype.statSync=function(u,d){return this.checkInitialized(),this._sync.statSync(u,d)},c.prototype.openSync=function(u,d,g){return this.checkInitialized(),this._sync.openSync(u,d,g).closeSync(),new U(this,u,d,this._sync.statSync(u,!1),this._sync.readFileSync(u,null,N.getFileFlag("r")))},c.prototype.unlinkSync=function(u){this.checkInitialized(),this._sync.unlinkSync(u),this.enqueueOp({apiMethod:"unlink",arguments:[u]})},c.prototype.rmdirSync=function(u){this.checkInitialized(),this._sync.rmdirSync(u),this.enqueueOp({apiMethod:"rmdir",arguments:[u]})},c.prototype.mkdirSync=function(u,d){this.checkInitialized(),this._sync.mkdirSync(u,d),this.enqueueOp({apiMethod:"mkdir",arguments:[u,d]})},c.prototype.readdirSync=function(u){return this.checkInitialized(),this._sync.readdirSync(u)},c.prototype.existsSync=function(u){return this.checkInitialized(),this._sync.existsSync(u)},c.prototype.chmodSync=function(u,d,g){this.checkInitialized(),this._sync.chmodSync(u,d,g),this.enqueueOp({apiMethod:"chmod",arguments:[u,d,g]})},c.prototype.chownSync=function(u,d,g,v){this.checkInitialized(),this._sync.chownSync(u,d,g,v),this.enqueueOp({apiMethod:"chown",arguments:[u,d,g,v]})},c.prototype.utimesSync=function(u,d,g){this.checkInitialized(),this._sync.utimesSync(u,d,g),this.enqueueOp({apiMethod:"utimes",arguments:[u,d,g]})},c.prototype.checkInitialized=function(){if(!this._isInitialized)throw new y(a.EPERM,"AsyncMirrorFS is not initialized. Please initialize AsyncMirrorFS using its initialize() method before using it.")},c.prototype.enqueueOp=function(u){var d=this;if(this._queue.push(u),!this._queueRunning){this._queueRunning=!0;var g=function(v){if(v&&console.error("WARNING: File system has desynchronized. Received following error: "+v+`
$`),d._queue.length>0){var _=d._queue.shift(),A=_.arguments;A.push(g),d._async[_.apiMethod].apply(d._async,A)}else d._queueRunning=!1};g()}},c}(Se);function he(f,c,u){switch(u.length){case 0:return f.call(c);case 1:return f.call(c,u[0]);case 2:return f.call(c,u[0],u[1]);case 3:return f.call(c,u[0],u[1],u[2])}return f.apply(c,u)}ee.Name="AsyncMirror",ee.Options={sync:{type:"object",description:"The synchronous file system to mirror the asynchronous file system to."},async:{type:"object",description:"The asynchronous file system to mirror."}};var de=Math.max;function Le(f){return f}function Re(f,c){return function(u,d,g){return d=de(d===void 0?u.length-1:d,0),function(){for(var v=arguments,_=-1,A=de(v.length-d,0),P=Array(A);++_<A;)P[_]=v[d+_];_=-1;for(var $=Array(d+1);++_<d;)$[_]=v[_];return $[d]=g(P),he(u,this,$)}}(f,c,Le)}var Ke=function(f){return Re(function(c){var u=c.pop();f.call(this,c,u)})};function Lt(f){return Re(function(c,u){var d=Ke(function(g,v){var _=this;return f(c,function(A,P){A.apply(_,g.concat(P))},v)});return u.length?d.apply(this,u):d})}var rt=typeof i=="object"&&i&&i.Object===Object&&i,To=typeof self=="object"&&self&&self.Object===Object&&self,Ps=rt||To||Function("return this")(),Ci=Ps.Symbol,Oy=Object.prototype,lO=Oy.hasOwnProperty,uO=Oy.toString,Ms=Ci?Ci.toStringTag:void 0,cO=Object.prototype.toString,Ty=Ci?Ci.toStringTag:void 0;function Cf(f){return f==null?f===void 0?"[object Undefined]":"[object Null]":Ty&&Ty in Object(f)?function(c){var u=lO.call(c,Ms),d=c[Ms];try{c[Ms]=void 0;var g=!0}catch{}var v=uO.call(c);return g&&(u?c[Ms]=d:delete c[Ms]),v}(f):function(c){return cO.call(c)}(f)}function xy(f){return typeof f=="number"&&f>-1&&f%1==0&&f<=9007199254740991}function Ff(f){return f!=null&&xy(f.length)&&!function(c){if(!function(d){var g=typeof d;return d!=null&&(g=="object"||g=="function")}(c))return!1;var u=Cf(c);return u=="[object Function]"||u=="[object GeneratorFunction]"||u=="[object AsyncFunction]"||u=="[object Proxy]"}(f)}var ky={};function js(){}function Lf(f){return function(){if(f!==null){var c=f;f=null,c.apply(this,arguments)}}}var Pf=typeof Symbol=="function"&&Symbol.iterator;function Mf(f){return f!=null&&typeof f=="object"}function Iy(f){return Mf(f)&&Cf(f)=="[object Arguments]"}var Ny=Object.prototype,fO=Ny.hasOwnProperty,hO=Ny.propertyIsEnumerable,dO=Iy(function(){return arguments}())?Iy:function(f){return Mf(f)&&fO.call(f,"callee")&&!hO.call(f,"callee")},pO=Array.isArray,Ay=typeof e=="object"&&e&&!e.nodeType&&e,Dy=Ay&&typeof o=="object"&&o&&!o.nodeType&&o,Ry=Dy&&Dy.exports===Ay?Ps.Buffer:void 0,yO=(Ry?Ry.isBuffer:void 0)||function(){return!1},gO=/^(?:0|[1-9]\d*)$/;function mO(f,c){return!!(c=c??9007199254740991)&&(typeof f=="number"||gO.test(f))&&f>-1&&f%1==0&&f<c}var nt={};nt["[object Float32Array]"]=nt["[object Float64Array]"]=nt["[object Int8Array]"]=nt["[object Int16Array]"]=nt["[object Int32Array]"]=nt["[object Uint8Array]"]=nt["[object Uint8ClampedArray]"]=nt["[object Uint16Array]"]=nt["[object Uint32Array]"]=!0,nt["[object Arguments]"]=nt["[object Array]"]=nt["[object ArrayBuffer]"]=nt["[object Boolean]"]=nt["[object DataView]"]=nt["[object Date]"]=nt["[object Error]"]=nt["[object Function]"]=nt["[object Map]"]=nt["[object Number]"]=nt["[object Object]"]=nt["[object RegExp]"]=nt["[object Set]"]=nt["[object String]"]=nt["[object WeakMap]"]=!1;var Cy,Fy=typeof e=="object"&&e&&!e.nodeType&&e,Ly=Fy&&typeof o=="object"&&o&&!o.nodeType&&o,jf=Ly&&Ly.exports===Fy&&rt.process,Py=function(){try{return jf&&jf.binding&&jf.binding("util")}catch{}}(),My=Py&&Py.isTypedArray,vO=My?(Cy=My,function(f){return Cy(f)}):function(f){return Mf(f)&&xy(f.length)&&!!nt[Cf(f)]},wO=Object.prototype.hasOwnProperty;function _O(f,c){var u=pO(f),d=!u&&dO(f),g=!u&&!d&&yO(f),v=!u&&!d&&!g&&vO(f),_=u||d||g||v,A=_?function(Q,fe){for(var pe=-1,ve=Array(Q);++pe<Q;)ve[pe]=fe(pe);return ve}(f.length,String):[],P=A.length;for(var $ in f)!c&&!wO.call(f,$)||_&&($=="length"||g&&($=="offset"||$=="parent")||v&&($=="buffer"||$=="byteLength"||$=="byteOffset")||mO($,P))||A.push($);return A}var SO=Object.prototype,bO=function(f,c){return function(u){return f(c(u))}}(Object.keys,Object),EO=Object.prototype.hasOwnProperty;function OO(f){if(u=(c=f)&&c.constructor,c!==(typeof u=="function"&&u.prototype||SO))return bO(f);var c,u,d=[];for(var g in Object(f))EO.call(f,g)&&g!="constructor"&&d.push(g);return d}function TO(f){var c,u=Ff(c=f)?_O(c):OO(c),d=-1,g=u.length;return function(){var v=u[++d];return d<g?{value:f[v],key:v}:null}}function xO(f){if(Ff(f))return function(u){var d=-1,g=u.length;return function(){return++d<g?{value:u[d],key:d}:null}}(f);var c=function(u){return Pf&&u[Pf]&&u[Pf]()}(f);return c?function(u){var d=-1;return function(){var g=u.next();return g.done?null:(d++,{value:g.value,key:d})}}(c):TO(f)}function jy(f){return function(){if(f===null)throw new Error("Callback was already called.");var c=f;f=null,c.apply(this,arguments)}}function Uy(f){return function(c,u,d){if(d=Lf(d||js),f<=0||!c)return d(null);var g=xO(c),v=!1,_=0;function A($,Q){if(_-=1,$)v=!0,d($);else{if(Q===ky||v&&_<=0)return v=!0,d(null);P()}}function P(){for(;_<f&&!v;){var $=g();if($===null)return v=!0,void(_<=0&&d(null));_+=1,u($.value,$.key,jy(A))}}P()}}function By(f,c,u,d){Uy(c)(f,u,d)}function Uf(f,c){return function(u,d,g){return f(u,c,d,g)}}function kO(f,c,u){u=Lf(u||js);var d=0,g=0,v=f.length;function _(A,P){A?u(A):++g!==v&&P!==ky||u(null)}for(v===0&&u(null);d<v;d++)c(f[d],d,jy(_))}var zy,IO=Uf(By,1/0),Vy=function(f,c,u){(Ff(f)?kO:IO)(f,c,u)};function Wy(f,c,u,d){d=d||js;var g=[],v=0;f(c=c||[],function(_,A,P){var $=v++;u(_,function(Q,fe){g[$]=fe,P(Q)})},function(_){d(_,g)})}Lt((zy=Wy,function(f,c,u){return zy(Vy,f,c,u)}));var NO=function(f){return function(c,u,d,g){return f(Uy(u),c,d,g)}}(Wy);Lt(Uf(NO,1)),Re(function(f,c){return Re(function(u){return f.apply(null,c.concat(u))})});var qy=typeof setImmediate=="function"&&setImmediate,$y=typeof s=="object"&&typeof s.nextTick=="function";function Hy(f){setTimeout(f,0)}function Gy(f){return Re(function(c,u){f(function(){c.apply(null,u)})})}Gy(qy?setImmediate:$y?s.nextTick:Hy);var Ir,AO=Uf(By,1),DO=Re(function(f){return Re(function(c){var u,d,g,v,_=this,A=c[c.length-1];typeof A=="function"?c.pop():A=js,u=f,d=c,g=function(P,$,Q){$.apply(_,P.concat(Re(function(fe,pe){Q(fe,pe)})))},v=Lf((v=function(P,$){A.apply(_,[P].concat($))})||js),AO(u,function(P,$,Q){g(d,P,function(fe,pe){d=pe,Q(fe)})},function(P){v(P,d)})})});function Jy(f){return Re(function(c,u){c.apply(null,u.concat(Re(function(d,g){typeof console=="object"&&(d?console.error&&console.error(d):console[f]&&function(v,_){for(var A=-1,P=v==null?0:v.length;++A<P&&_(v[A],A,v)!==!1;);}(g,function(v){console[f](v)}))})))})}function Yy(f,c,u){Vy(f,function(d){return function(g,v,_){return d(g,_)}}(c),u)}Re(function(f){return DO.apply(null,f.reverse())}),Re(function(f){var c=[null].concat(f);return Ke(function(u,d){return d.apply(this,c)})}),Jy("dir"),Jy("log"),Gy($y?s.nextTick:qy?setImmediate:Hy);var Jt=function(f){this._cache={},this._client=f};Jt.prototype.readdir=function(f,c){var u=this,d=this.getCachedDirInfo(f);this._wrap(function(g){d!==null&&d.contents?u._client.readdir(f,{contentHash:d.stat.contentHash},g):u._client.readdir(f,g)},function(g,v,_,A){g?g.status===Dropbox.ApiError.NO_CONTENT&&d!==null?c(null,d.contents.slice(0)):c(g):(u.updateCachedDirInfo(f,_,v.slice(0)),A.forEach(function(P){u.updateCachedInfo(h.join(f,P.name),P)}),c(null,v))})},Jt.prototype.remove=function(f,c){var u=this;this._wrap(function(d){u._client.remove(f,d)},function(d,g){d||u.updateCachedInfo(f,g),c(d)})},Jt.prototype.move=function(f,c,u){var d=this;this._wrap(function(g){d._client.move(f,c,g)},function(g,v){g||(d.deleteCachedInfo(f),d.updateCachedInfo(c,v)),u(g)})},Jt.prototype.stat=function(f,c){var u=this;this._wrap(function(d){u._client.stat(f,d)},function(d,g){d||u.updateCachedInfo(f,g),c(d,g)})},Jt.prototype.readFile=function(f,c){var u=this,d=this.getCachedFileInfo(f);d!==null&&d.contents!==null?this.stat(f,function(g,v){g?c(g):v.contentHash===d.stat.contentHash?c(g,d.contents.slice(0),d.stat):u.readFile(f,c)}):this._wrap(function(g){u._client.readFile(f,{arrayBuffer:!0},g)},function(g,v,_){g||u.updateCachedInfo(f,_,v.slice(0)),c(g,v,_)})},Jt.prototype.writeFile=function(f,c,u){var d=this;this._wrap(function(g){d._client.writeFile(f,c,g)},function(g,v){g||d.updateCachedInfo(f,v,c.slice(0)),u(g,v)})},Jt.prototype.mkdir=function(f,c){var u=this;this._wrap(function(d){u._client.mkdir(f,d)},function(d,g){d||u.updateCachedInfo(f,g,[]),c(d)})},Jt.prototype._wrap=function(f,c){var u=0,d=function(g){var v=2;if(g&&3>++u)switch(g.status){case Dropbox.ApiError.SERVER_ERROR:case Dropbox.ApiError.NETWORK_ERROR:case Dropbox.ApiError.RATE_LIMITED:setTimeout(function(){f(d)},1e3*v);break;default:c.apply(null,arguments)}else c.apply(null,arguments)};f(d)},Jt.prototype.getCachedInfo=function(f){return this._cache[f.toLowerCase()]},Jt.prototype.putCachedInfo=function(f,c){this._cache[f.toLowerCase()]=c},Jt.prototype.deleteCachedInfo=function(f){delete this._cache[f.toLowerCase()]},Jt.prototype.getCachedDirInfo=function(f){var c,u=this.getCachedInfo(f);return(c=u)&&c.stat.isFolder?u:null},Jt.prototype.getCachedFileInfo=function(f){var c,u=this.getCachedInfo(f);return(c=u)&&c.stat.isFile?u:null},Jt.prototype.updateCachedDirInfo=function(f,c,u){u===void 0&&(u=null);var d=this.getCachedInfo(f);c.contentHash===null||d!==void 0&&d.stat.contentHash===c.contentHash||this.putCachedInfo(f,{stat:c,contents:u})},Jt.prototype.updateCachedFileInfo=function(f,c,u){u===void 0&&(u=null);var d=this.getCachedInfo(f);c.versionTag===null||d!==void 0&&d.stat.versionTag===c.versionTag||this.putCachedInfo(f,{stat:c,contents:u})},Jt.prototype.updateCachedInfo=function(f,c,u){var d;u===void 0&&(u=null),c.isFile&&((d=u)==null||typeof d=="object"&&typeof d.byteLength=="number")?this.updateCachedFileInfo(f,c,u):c.isFolder&&Array.isArray(u)&&this.updateCachedDirInfo(f,c,u)};var RO=function(f){function c(u,d,g,v,_){f.call(this,u,d,g,v,_)}return f&&(c.__proto__=f),c.prototype=Object.create(f&&f.prototype),c.prototype.constructor=c,c.prototype.sync=function(u){var d=this;if(this.isDirty()){var g=V(this.getBuffer());this._fs._writeFileStrict(this.getPath(),g,function(v){v||d.resetDirty(),u(v)})}else u()},c.prototype.close=function(u){this.sync(u)},c}(E),El=function(f){function c(u,d){d===void 0&&(d=!0),f.call(this),this._client=new Jt(u),ge(d,c.Name,{client:"authenticated dropbox client instance"}),Ir||((Ir={})[Dropbox.ApiError.NETWORK_ERROR]=a.EIO,Ir[Dropbox.ApiError.INVALID_PARAM]=a.EINVAL,Ir[Dropbox.ApiError.INVALID_TOKEN]=a.EPERM,Ir[Dropbox.ApiError.OAUTH_ERROR]=a.EPERM,Ir[Dropbox.ApiError.NOT_FOUND]=a.ENOENT,Ir[Dropbox.ApiError.INVALID_METHOD]=a.EINVAL,Ir[Dropbox.ApiError.NOT_ACCEPTABLE]=a.EINVAL,Ir[Dropbox.ApiError.CONFLICT]=a.EINVAL,Ir[Dropbox.ApiError.RATE_LIMITED]=a.EBUSY,Ir[Dropbox.ApiError.SERVER_ERROR]=a.EBUSY,Ir[Dropbox.ApiError.OVER_QUOTA]=a.ENOSPC)}return f&&(c.__proto__=f),c.prototype=Object.create(f&&f.prototype),c.prototype.constructor=c,c.Create=function(u,d){d(null,new c(u.client,!1))},c.isAvailable=function(){return typeof Dropbox<"u"},c.prototype.getName=function(){return c.Name},c.prototype.isReadOnly=function(){return!1},c.prototype.supportsSymlinks=function(){return!1},c.prototype.supportsProps=function(){return!1},c.prototype.supportsSynch=function(){return!1},c.prototype.empty=function(u){var d=this;this._client.readdir("/",function(g,v){g?u(d.convert(g,"/")):Yy(v,function(_,A){var P=h.join("/",_);d._client.remove(P,function($){A($?d.convert($,P):null)})},function(_){_?u(_):u()})})},c.prototype.rename=function(u,d,g){var v=this;this._client.move(u,d,function(_){_?v._client.stat(d,function(A,P){if(A||P.isFolder){var $=_.response.error.indexOf(u)>-1?u:d;g(v.convert(_,$))}else v._client.remove(d,function(Q){Q?g(v.convert(Q,d)):v.rename(u,d,g)})}):g()})},c.prototype.stat=function(u,d,g){var v=this;this._client.stat(u,function(_,A){if(_)g(v.convert(_,u));else{if(!A||!A.isRemoved){var P=new O(v._statType(A),A.size);return g(null,P)}g(y.FileError(a.ENOENT,u))}})},c.prototype.open=function(u,d,g,v){var _=this;this._client.readFile(u,function(A,P,$){if(!A){var Q;Q=P===null?Ee():ne(P);var fe=_._makeFile(u,d,$,Q);return v(null,fe)}if(!d.isReadable()){if(A.status===Dropbox.ApiError.NOT_FOUND){var pe=new ArrayBuffer(0);return _._writeFileStrict(u,pe,function(ve,we){if(ve)v(ve);else{var Ie=_._makeFile(u,d,we,ne(pe));v(null,Ie)}})}return v(_.convert(A,u))}v(_.convert(A,u))})},c.prototype._writeFileStrict=function(u,d,g){var v=this,_=h.dirname(u);this.stat(_,!1,function(A,P){A?g(y.FileError(a.ENOENT,_)):v._client.writeFile(u,d,function($,Q){$?g(v.convert($,u)):g(null,Q)})})},c.prototype._statType=function(u){return u.isFile?b.FILE:b.DIRECTORY},c.prototype._makeFile=function(u,d,g,v){var _=this._statType(g),A=new O(_,g.size);return new RO(this,u,d,A,v)},c.prototype._remove=function(u,d,g){var v=this;this._client.stat(u,function(_,A){_?d(v.convert(_,u)):A.isFile&&!g?d(y.FileError(a.ENOTDIR,u)):!A.isFile&&g?d(y.FileError(a.EISDIR,u)):v._client.remove(u,function(P){d(P?v.convert(P,u):null)})})},c.prototype.unlink=function(u,d){this._remove(u,d,!0)},c.prototype.rmdir=function(u,d){this._remove(u,d,!1)},c.prototype.mkdir=function(u,d,g){var v=this,_=h.dirname(u);this._client.stat(_,function(A,P){A?g(v.convert(A,_)):v._client.mkdir(u,function($){g($?y.FileError(a.EEXIST,u):null)})})},c.prototype.readdir=function(u,d){var g=this;this._client.readdir(u,function(v,_){return v?d(g.convert(v)):d(null,_)})},c.prototype.convert=function(u,d){d===void 0&&(d=null);var g=Ir[u.status];return g===void 0&&(g=a.EIO),d?y.FileError(g,d):new y(g)},c}(K);function ft(f,c){c===void 0&&(c="");for(var u=f.errno,d=f.node,g=[];d&&(g.unshift(d.name),d!==d.parent);)d=d.parent;return new y(u,p[u],g.length>0?"/"+g.join("/"):c)}El.Name="Dropbox",El.Options={client:{type:"object",description:"An *authenticated* Dropbox client. Must be from the 0.10 JS SDK.",validator:function(f,c){f.isAuthenticated&&f.isAuthenticated()?c():c(new y(a.EINVAL,"'client' option must be an authenticated Dropbox client from the v0.10 JS SDK."))}}};var CO=function(f){function c(u,d,g,v){f.call(this),this._fs=u,this._FS=d,this._path=g,this._stream=v}return f&&(c.__proto__=f),c.prototype=Object.create(f&&f.prototype),c.prototype.constructor=c,c.prototype.getPos=function(){},c.prototype.close=function(u){var d=null;try{this.closeSync()}catch(g){d=g}finally{u(d)}},c.prototype.closeSync=function(){try{this._FS.close(this._stream)}catch(u){throw ft(u,this._path)}},c.prototype.stat=function(u){try{u(null,this.statSync())}catch(d){u(d)}},c.prototype.statSync=function(){try{return this._fs.statSync(this._path,!1)}catch(u){throw ft(u,this._path)}},c.prototype.truncate=function(u,d){var g=null;try{this.truncateSync(u)}catch(v){g=v}finally{d(g)}},c.prototype.truncateSync=function(u){try{this._FS.ftruncate(this._stream.fd,u)}catch(d){throw ft(d,this._path)}},c.prototype.write=function(u,d,g,v,_){try{_(null,this.writeSync(u,d,g,v),u)}catch(A){_(A)}},c.prototype.writeSync=function(u,d,g,v){try{var _=Y(u),A=v===null?void 0:v;return this._FS.write(this._stream,_,d,g,A)}catch(P){throw ft(P,this._path)}},c.prototype.read=function(u,d,g,v,_){try{_(null,this.readSync(u,d,g,v),u)}catch(A){_(A)}},c.prototype.readSync=function(u,d,g,v){try{var _=Y(u),A=v===null?void 0:v;return this._FS.read(this._stream,_,d,g,A)}catch(P){throw ft(P,this._path)}},c.prototype.sync=function(u){u()},c.prototype.syncSync=function(){},c.prototype.chown=function(u,d,g){var v=null;try{this.chownSync(u,d)}catch(_){v=_}finally{g(v)}},c.prototype.chownSync=function(u,d){try{this._FS.fchown(this._stream.fd,u,d)}catch(g){throw ft(g,this._path)}},c.prototype.chmod=function(u,d){var g=null;try{this.chmodSync(u)}catch(v){g=v}finally{d(g)}},c.prototype.chmodSync=function(u){try{this._FS.fchmod(this._stream.fd,u)}catch(d){throw ft(d,this._path)}},c.prototype.utimes=function(u,d,g){var v=null;try{this.utimesSync(u,d)}catch(_){v=_}finally{g(v)}},c.prototype.utimesSync=function(u,d){this._fs.utimesSync(this._path,u,d)},c}(L),Ol=function(f){function c(u){f.call(this),this._FS=u}return f&&(c.__proto__=f),c.prototype=Object.create(f&&f.prototype),c.prototype.constructor=c,c.Create=function(u,d){d(null,new c(u.FS))},c.isAvailable=function(){return!0},c.prototype.getName=function(){return this._FS.DB_NAME()},c.prototype.isReadOnly=function(){return!1},c.prototype.supportsLinks=function(){return!0},c.prototype.supportsProps=function(){return!0},c.prototype.supportsSynch=function(){return!0},c.prototype.renameSync=function(u,d){try{this._FS.rename(u,d)}catch(g){throw g.errno===a.ENOENT?ft(g,this.existsSync(u)?d:u):ft(g)}},c.prototype.statSync=function(u,d){try{var g=d?this._FS.lstat(u):this._FS.stat(u),v=this.modeToFileType(g.mode);return new O(v,g.size,g.mode,g.atime,g.mtime,g.ctime)}catch(_){throw ft(_,u)}},c.prototype.openSync=function(u,d,g){try{var v=this._FS.open(u,d.getFlagString(),g);if(this._FS.isDir(v.node.mode))throw this._FS.close(v),y.EISDIR(u);return new CO(this,this._FS,u,v)}catch(_){throw ft(_,u)}},c.prototype.unlinkSync=function(u){try{this._FS.unlink(u)}catch(d){throw ft(d,u)}},c.prototype.rmdirSync=function(u){try{this._FS.rmdir(u)}catch(d){throw ft(d,u)}},c.prototype.mkdirSync=function(u,d){try{this._FS.mkdir(u,d)}catch(g){throw ft(g,u)}},c.prototype.readdirSync=function(u){try{return this._FS.readdir(u).filter(function(d){return d!=="."&&d!==".."})}catch(d){throw ft(d,u)}},c.prototype.truncateSync=function(u,d){try{this._FS.truncate(u,d)}catch(g){throw ft(g,u)}},c.prototype.readFileSync=function(u,d,g){try{var v=oe(this._FS.readFile(u,{flags:g.getFlagString()}));return d?v.toString(d):v}catch(_){throw ft(_,u)}},c.prototype.writeFileSync=function(u,d,g,v,_){try{g&&(d=n.from(d,g));var A=Y(d);this._FS.writeFile(u,A,{flags:v.getFlagString(),encoding:"binary"}),this._FS.chmod(u,_)}catch(P){throw ft(P,u)}},c.prototype.chmodSync=function(u,d,g){try{d?this._FS.lchmod(u,g):this._FS.chmod(u,g)}catch(v){throw ft(v,u)}},c.prototype.chownSync=function(u,d,g,v){try{d?this._FS.lchown(u,g,v):this._FS.chown(u,g,v)}catch(_){throw ft(_,u)}},c.prototype.symlinkSync=function(u,d,g){try{this._FS.symlink(u,d)}catch(v){throw ft(v)}},c.prototype.readlinkSync=function(u){try{return this._FS.readlink(u)}catch(d){throw ft(d,u)}},c.prototype.utimesSync=function(u,d,g){try{this._FS.utime(u,d.getTime(),g.getTime())}catch(v){throw ft(v,u)}},c.prototype.modeToFileType=function(u){if(this._FS.isDir(u))return b.DIRECTORY;if(this._FS.isFile(u))return b.FILE;if(this._FS.isLink(u))return b.SYMLINK;throw y.EPERM("Invalid mode: "+u)},c}(Se);Ol.Name="EmscriptenFileSystem",Ol.Options={FS:{type:"object",description:"The Emscripten file system to use (the `FS` variable)"}};var xo=function(f){function c(u,d){f.call(this),this._folder=u,this._wrapped=d}return f&&(c.__proto__=f),c.prototype=Object.create(f&&f.prototype),c.prototype.constructor=c,c.Create=function(u,d){d(null,new c(u.folder,u.wrapped))},c.isAvailable=function(){return!0},c.prototype.initialize=function(u){var d=this;this._wrapped.exists(this._folder,function(g){g?u():d._wrapped.isReadOnly()?u(y.ENOENT(d._folder)):d._wrapped.mkdir(d._folder,511,u)})},c.prototype.getName=function(){return this._wrapped.getName()},c.prototype.isReadOnly=function(){return this._wrapped.isReadOnly()},c.prototype.supportsProps=function(){return this._wrapped.supportsProps()},c.prototype.supportsSynch=function(){return this._wrapped.supportsSynch()},c.prototype.supportsLinks=function(){return!1},c}(K);function Ky(f,c){if(c!==null&&typeof c=="object"){var u=c,d=u.path;d&&(d="/"+h.relative(f,d),u.message=u.message.replace(u.path,d),u.path=d)}return c}function FO(f,c){return typeof c=="function"?function(u){arguments.length>0&&(arguments[0]=Ky(f,u)),c.apply(null,arguments)}:c}function Zy(f,c,u){return f.slice(f.length-4)!=="Sync"?function(){return arguments.length>0&&(c&&(arguments[0]=h.join(this._folder,arguments[0])),u&&(arguments[1]=h.join(this._folder,arguments[1])),arguments[arguments.length-1]=FO(this._folder,arguments[arguments.length-1])),this._wrapped[f].apply(this._wrapped,arguments)}:function(){try{return c&&(arguments[0]=h.join(this._folder,arguments[0])),u&&(arguments[1]=h.join(this._folder,arguments[1])),this._wrapped[f].apply(this._wrapped,arguments)}catch(d){throw Ky(this._folder,d)}}}xo.Name="FolderAdapter",xo.Options={folder:{type:"string",description:"The folder to use as the root directory"},wrapped:{type:"object",description:"The file system to wrap"}},["diskSpace","stat","statSync","open","openSync","unlink","unlinkSync","rmdir","rmdirSync","mkdir","mkdirSync","readdir","readdirSync","exists","existsSync","realpath","realpathSync","truncate","truncateSync","readFile","readFileSync","writeFile","writeFileSync","appendFile","appendFileSync","chmod","chmodSync","chown","chownSync","utimes","utimesSync","readlink","readlinkSync"].forEach(function(f){xo.prototype[f]=Zy(f,!0,!1)}),["rename","renameSync","link","linkSync","symlink","symlinkSync"].forEach(function(f){xo.prototype[f]=Zy(f,!0,!0)});var kt=typeof window<"u"?window:typeof self<"u"?self:i,Bf=kt.webkitRequestFileSystem||kt.requestFileSystem||null;function wn(f,c,u){switch(f.name){case"PathExistsError":return y.EEXIST(c);case"QuotaExceededError":return y.FileError(a.ENOSPC,c);case"NotFoundError":return y.ENOENT(c);case"SecurityError":return y.FileError(a.EACCES,c);case"InvalidModificationError":return y.FileError(a.EPERM,c);case"TypeMismatchError":return y.FileError(u?a.ENOTDIR:a.EISDIR,c);default:return y.FileError(a.EINVAL,c)}}var LO=function(f){function c(u,d,g,v,_,A){f.call(this,u,g,v,_,A),this._entry=d}return f&&(c.__proto__=f),c.prototype=Object.create(f&&f.prototype),c.prototype.constructor=c,c.prototype.sync=function(u){var d=this;if(!this.isDirty())return u();this._entry.createWriter(function(g){var v=d.getBuffer(),_=new Blob([V(v)]),A=_.size;g.onwriteend=function(P){g.onwriteend=null,g.onerror=null,g.truncate(A),d.resetDirty(),u()},g.onerror=function(P){u(wn(P,d.getPath(),!1))},g.write(_)})},c.prototype.close=function(u){this.sync(u)},c}(E),Tl=function(f){function c(u,d,g){u===void 0&&(u=5),d===void 0&&(d=kt.PERSISTENT),g===void 0&&(g=!0),f.call(this),this.size=1048576*u,this.type=d,ge(g,c.Name,{size:u,type:d})}return f&&(c.__proto__=f),c.prototype=Object.create(f&&f.prototype),c.prototype.constructor=c,c.Create=function(u,d){var g=new c(u.size,u.type,!1);g.allocate(function(v){return v?d(v):d(null,g)},!1)},c.isAvailable=function(){return!!Bf},c.prototype.getName=function(){return c.Name},c.prototype.isReadOnly=function(){return!1},c.prototype.supportsSymlinks=function(){return!1},c.prototype.supportsProps=function(){return!1},c.prototype.supportsSynch=function(){return!1},c.prototype.allocate=function(u,d){var g=this;u===void 0&&(u=function(){}),d===void 0&&(d=!0),d&&console.warn("[HTML5FS] HTML5FS.allocate() is deprecated and will be removed in the next major release. Please use 'HTML5FS.Create({type: "+this.type+", size: "+this.size+"}, cb)' to create and allocate HTML5FS instances.");var v=function(A){g.fs=A,u()},_=function(A){u(wn(A,"/",!0))};this.type===kt.PERSISTENT?function(A,P,$,Q){if(navigator.webkitPersistentStorage!==void 0)switch(A){case kt.PERSISTENT:navigator.webkitPersistentStorage.requestQuota(P,$,Q);break;case kt.TEMPORARY:navigator.webkitTemporaryStorage.requestQuota(P,$,Q);break;default:Q(new TypeError("Invalid storage type: "+A))}else kt.webkitStorageInfo.requestQuota(A,P,$,Q)}(this.type,this.size,function(A){Bf(g.type,A,v,_)},_):Bf(this.type,this.size,v,_)},c.prototype.empty=function(u){this._readdir("/",function(d,g){d?(console.error("Failed to empty FS"),u(d)):Yy(g,function(v,_){var A=function(){_()},P=function($){_(wn($,v.fullPath,!v.isDirectory))};(function($){return $.isDirectory})(v)?v.removeRecursively(A,P):v.remove(A,P)},function(v){d?(console.error("Failed to empty FS"),u(d)):u()})})},c.prototype.rename=function(u,d,g){var v=this,_=2,A=0,P=this.fs.root,$=u,Q=function(pe){--_<=0&&g(wn(pe,$,!1))},fe=function(pe){return++A==2?g(new y(a.EINVAL,"Something was identified as both a file and a directory. This should never happen.")):u===d?g():($=h.dirname(d),void P.getDirectory($,{},function(ve){$=h.basename(d),pe.moveTo(ve,$,function(we){g()},function(we){pe.isDirectory?($=d,v.unlink(d,function(Ie){Ie?Q(we):v.rename(u,d,g)})):Q(we)})},Q))};P.getFile(u,{},fe,Q),P.getDirectory(u,{},fe,Q)},c.prototype.stat=function(u,d,g){var v=this,_={create:!1},A=function($){var Q=new O(b.DIRECTORY,4096);g(null,Q)},P=function($){g(wn($,u,!1))};this.fs.root.getFile(u,_,function($){$.file(function(Q){var fe=new O(b.FILE,Q.size);g(null,fe)},P)},function(){v.fs.root.getDirectory(u,_,A,P)})},c.prototype.open=function(u,d,g,v){var _=this,A=function(P){P.name==="InvalidModificationError"&&d.isExclusive()?v(y.EEXIST(u)):v(wn(P,u,!1))};this.fs.root.getFile(u,{create:d.pathNotExistsAction()===m.CREATE_FILE,exclusive:d.isExclusive()},function(P){P.file(function($){var Q=new FileReader;Q.onloadend=function(fe){var pe=_._makeFile(u,P,d,$,Q.result);v(null,pe)},Q.onerror=function(fe){A(Q.error)},Q.readAsArrayBuffer($)},A)},A)},c.prototype.unlink=function(u,d){this._remove(u,d,!0)},c.prototype.rmdir=function(u,d){var g=this;this.readdir(u,function(v,_){v?d(v):_.length>0?d(y.ENOTEMPTY(u)):g._remove(u,d,!1)})},c.prototype.mkdir=function(u,d,g){this.fs.root.getDirectory(u,{create:!0,exclusive:!0},function(v){g()},function(v){g(wn(v,u,!0))})},c.prototype.readdir=function(u,d){this._readdir(u,function(g,v){if(!v)return d(g);for(var _=[],A=0,P=v;A<P.length;A+=1){var $=P[A];_.push($.name)}d(null,_)})},c.prototype._makeFile=function(u,d,g,v,_){_===void 0&&(_=new ArrayBuffer(0));var A=new O(b.FILE,v.size),P=ne(_);return new LO(this,d,u,g,A,P)},c.prototype._readdir=function(u,d){var g=function(v){d(wn(v,u,!0))};this.fs.root.getDirectory(u,{create:!1},function(v){var _=v.createReader(),A=[],P=function(){_.readEntries(function($){$.length?(A=A.concat(function(Q){return Array.prototype.slice.call(Q||[],0)}($)),P()):d(null,A)},g)};P()},g)},c.prototype._remove=function(u,d,g){var v=function(P){P.remove(function(){d()},function($){d(wn($,u,!g))})},_=function(P){d(wn(P,u,!g))},A={create:!1};g?this.fs.root.getFile(u,A,v,_):this.fs.root.getDirectory(u,A,v,_)},c}(K);Tl.Name="HTML5FS",Tl.Options={size:{type:"number",optional:!0,description:"Storage quota to request, in megabytes. Allocated value may be less. Defaults to 5."},type:{type:"number",optional:!0,description:"window.PERSISTENT or window.TEMPORARY. Defaults to PERSISTENT."}};var dr=function(f,c,u,d,g,v){this.id=f,this.size=c,this.mode=u,this.atime=d,this.mtime=g,this.ctime=v};dr.fromBuffer=function(f){if(f===void 0)throw new Error("NO");return new dr(f.toString("ascii",30),f.readUInt32LE(0),f.readUInt16LE(4),f.readDoubleLE(6),f.readDoubleLE(14),f.readDoubleLE(22))},dr.prototype.toStats=function(){return new O((61440&this.mode)===b.DIRECTORY?b.DIRECTORY:b.FILE,this.size,this.mode,new Date(this.atime),new Date(this.mtime),new Date(this.ctime))},dr.prototype.getSize=function(){return 30+this.id.length},dr.prototype.toBuffer=function(f){return f===void 0&&(f=n.alloc(this.getSize())),f.writeUInt32LE(this.size,0),f.writeUInt16LE(this.mode,4),f.writeDoubleLE(this.atime,6),f.writeDoubleLE(this.mtime,14),f.writeDoubleLE(this.ctime,22),f.write(this.id,30,this.id.length,"ascii"),f},dr.prototype.update=function(f){var c=!1;this.size!==f.size&&(this.size=f.size,c=!0),this.mode!==f.mode&&(this.mode=f.mode,c=!0);var u=f.atime.getTime();this.atime!==u&&(this.atime=u,c=!0);var d=f.mtime.getTime();this.mtime!==d&&(this.mtime=d,c=!0);var g=f.ctime.getTime();return this.ctime!==g&&(this.ctime=g,c=!0),c},dr.prototype.isFile=function(){return(61440&this.mode)===b.FILE},dr.prototype.isDirectory=function(){return(61440&this.mode)===b.DIRECTORY};var Hn="/",Xy=null;function Qy(){return Xy||(Xy=n.from("{}"))}function xl(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(f){var c=16*Math.random()|0;return(f==="x"?c:3&c|8).toString(16)})}function Nr(f,c){return!f||(c(f),!1)}function Ct(f,c,u){return!f||(c.abort(function(){u(f)}),!1)}var Cn=function(f){this.store=f,this.originalData={},this.modifiedKeys=[]};Cn.prototype.get=function(f){var c=this.store.get(f);return this.stashOldValue(f,c),c},Cn.prototype.put=function(f,c,u){return this.markModified(f),this.store.put(f,c,u)},Cn.prototype.del=function(f){this.markModified(f),this.store.del(f)},Cn.prototype.commit=function(){},Cn.prototype.abort=function(){for(var f=this,c=0,u=f.modifiedKeys;c<u.length;c+=1){var d=u[c],g=f.originalData[d];g?f.store.put(d,g,!0):f.store.del(d)}},Cn.prototype.stashOldValue=function(f,c){this.originalData.hasOwnProperty(f)||(this.originalData[f]=c)},Cn.prototype.markModified=function(f){this.modifiedKeys.indexOf(f)===-1&&(this.modifiedKeys.push(f),this.originalData.hasOwnProperty(f)||(this.originalData[f]=this.store.get(f)))};var eg=function(f){function c(u,d,g,v,_){f.call(this,u,d,g,v,_)}return f&&(c.__proto__=f),c.prototype=Object.create(f&&f.prototype),c.prototype.constructor=c,c.prototype.syncSync=function(){this.isDirty()&&(this._fs._syncSync(this.getPath(),this.getBuffer(),this.getStats()),this.resetDirty())},c.prototype.closeSync=function(){this.syncSync()},c}(E),tg=function(f){function c(u){f.call(this),this.store=u.store,this.makeRootDirectory()}return f&&(c.__proto__=f),c.prototype=Object.create(f&&f.prototype),c.prototype.constructor=c,c.isAvailable=function(){return!0},c.prototype.getName=function(){return this.store.name()},c.prototype.isReadOnly=function(){return!1},c.prototype.supportsSymlinks=function(){return!1},c.prototype.supportsProps=function(){return!1},c.prototype.supportsSynch=function(){return!0},c.prototype.empty=function(){this.store.clear(),this.makeRootDirectory()},c.prototype.renameSync=function(u,d){var g=this.store.beginTransaction("readwrite"),v=h.dirname(u),_=h.basename(u),A=h.dirname(d),P=h.basename(d),$=this.findINode(g,v),Q=this.getDirListing(g,v,$);if(!Q[_])throw y.ENOENT(u);var fe,pe,ve=Q[_];if(delete Q[_],(A+"/").indexOf(u+"/")===0)throw new y(a.EBUSY,v);if(A===v?(fe=$,pe=Q):(fe=this.findINode(g,A),pe=this.getDirListing(g,A,fe)),pe[P]){var we=this.getINode(g,d,pe[P]);if(!we.isFile())throw y.EPERM(d);try{g.del(we.id),g.del(pe[P])}catch(Ie){throw g.abort(),Ie}}pe[P]=ve;try{g.put($.id,n.from(JSON.stringify(Q)),!0),g.put(fe.id,n.from(JSON.stringify(pe)),!0)}catch(Ie){throw g.abort(),Ie}g.commit()},c.prototype.statSync=function(u,d){return this.findINode(this.store.beginTransaction("readonly"),u).toStats()},c.prototype.createFileSync=function(u,d,g){var v=this.store.beginTransaction("readwrite"),_=Ee(),A=this.commitNewFile(v,u,b.FILE,g,_);return new eg(this,u,d,A.toStats(),_)},c.prototype.openFileSync=function(u,d){var g=this.store.beginTransaction("readonly"),v=this.findINode(g,u),_=g.get(v.id);if(_===void 0)throw y.ENOENT(u);return new eg(this,u,d,v.toStats(),_)},c.prototype.unlinkSync=function(u){this.removeEntry(u,!1)},c.prototype.rmdirSync=function(u){if(this.readdirSync(u).length>0)throw y.ENOTEMPTY(u);this.removeEntry(u,!0)},c.prototype.mkdirSync=function(u,d){var g=this.store.beginTransaction("readwrite"),v=n.from("{}");this.commitNewFile(g,u,b.DIRECTORY,d,v)},c.prototype.readdirSync=function(u){var d=this.store.beginTransaction("readonly");return Object.keys(this.getDirListing(d,u,this.findINode(d,u)))},c.prototype._syncSync=function(u,d,g){var v=this.store.beginTransaction("readwrite"),_=this._findINode(v,h.dirname(u),h.basename(u)),A=this.getINode(v,u,_),P=A.update(g);try{v.put(A.id,d,!0),P&&v.put(_,A.toBuffer(),!0)}catch($){throw v.abort(),$}v.commit()},c.prototype.makeRootDirectory=function(){var u=this.store.beginTransaction("readwrite");if(u.get(Hn)===void 0){var d=new Date().getTime(),g=new dr(xl(),4096,511|b.DIRECTORY,d,d,d);u.put(g.id,Qy(),!1),u.put(Hn,g.toBuffer(),!1),u.commit()}},c.prototype._findINode=function(u,d,g){var v=this,_=function(A){var P=v.getDirListing(u,d,A);if(P[g])return P[g];throw y.ENOENT(h.resolve(d,g))};return d==="/"?g===""?Hn:_(this.getINode(u,d,Hn)):_(this.getINode(u,d+h.sep+g,this._findINode(u,h.dirname(d),h.basename(d))))},c.prototype.findINode=function(u,d){return this.getINode(u,d,this._findINode(u,h.dirname(d),h.basename(d)))},c.prototype.getINode=function(u,d,g){var v=u.get(g);if(v===void 0)throw y.ENOENT(d);return dr.fromBuffer(v)},c.prototype.getDirListing=function(u,d,g){if(!g.isDirectory())throw y.ENOTDIR(d);var v=u.get(g.id);if(v===void 0)throw y.ENOENT(d);return JSON.parse(v.toString())},c.prototype.addNewNode=function(u,d){for(var g;;)try{return g=xl(),u.put(g,d,!1),g}catch{}throw new y(a.EIO,"Unable to commit data to key-value store.")},c.prototype.commitNewFile=function(u,d,g,v,_){var A,P=h.dirname(d),$=h.basename(d),Q=this.findINode(u,P),fe=this.getDirListing(u,P,Q),pe=new Date().getTime();if(d==="/"||fe[$])throw y.EEXIST(d);try{var ve=this.addNewNode(u,_);A=new dr(ve,_.length,v|g,pe,pe,pe);var we=this.addNewNode(u,A.toBuffer());fe[$]=we,u.put(Q.id,n.from(JSON.stringify(fe)),!0)}catch(Ie){throw u.abort(),Ie}return u.commit(),A},c.prototype.removeEntry=function(u,d){var g=this.store.beginTransaction("readwrite"),v=h.dirname(u),_=this.findINode(g,v),A=this.getDirListing(g,v,_),P=h.basename(u);if(!A[P])throw y.ENOENT(u);var $=A[P];delete A[P];var Q=this.getINode(g,u,$);if(!d&&Q.isDirectory())throw y.EISDIR(u);if(d&&!Q.isDirectory())throw y.ENOTDIR(u);try{g.del(Q.id),g.del($),g.put(_.id,n.from(JSON.stringify(A)),!0)}catch(fe){throw g.abort(),fe}g.commit()},c}(Se),rg=function(f){function c(u,d,g,v,_){f.call(this,u,d,g,v,_)}return f&&(c.__proto__=f),c.prototype=Object.create(f&&f.prototype),c.prototype.constructor=c,c.prototype.sync=function(u){var d=this;this.isDirty()?this._fs._sync(this.getPath(),this.getBuffer(),this.getStats(),function(g){g||d.resetDirty(),u(g)}):u()},c.prototype.close=function(u){this.sync(u)},c}(E),PO=function(f){function c(){f.apply(this,arguments)}return f&&(c.__proto__=f),c.prototype=Object.create(f&&f.prototype),c.prototype.constructor=c,c.isAvailable=function(){return!0},c.prototype.init=function(u,d){this.store=u,this.makeRootDirectory(d)},c.prototype.getName=function(){return this.store.name()},c.prototype.isReadOnly=function(){return!1},c.prototype.supportsSymlinks=function(){return!1},c.prototype.supportsProps=function(){return!1},c.prototype.supportsSynch=function(){return!1},c.prototype.empty=function(u){var d=this;this.store.clear(function(g){Nr(g,u)&&d.makeRootDirectory(u)})},c.prototype.rename=function(u,d,g){var v=this,_=this.store.beginTransaction("readwrite"),A=h.dirname(u),P=h.basename(u),$=h.dirname(d),Q=h.basename(d),fe={},pe={},ve=!1;if(($+"/").indexOf(u+"/")===0)return g(new y(a.EBUSY,A));var we=function(Ie){v.findINodeAndDirListing(_,Ie,function(ze,Nt,rn){ze?ve||(ve=!0,_.abort(function(){g(ze)})):(fe[Ie]=Nt,pe[Ie]=rn,function(){if(!ve&&pe.hasOwnProperty(A)&&pe.hasOwnProperty($)){var Rr=pe[A],Co=fe[A],gr=pe[$],Xf=fe[$];if(Rr[P]){var zi=Rr[P];delete Rr[P];var Vi=function(){gr[Q]=zi,_.put(Co.id,n.from(JSON.stringify(Rr)),!0,function(Qf){Ct(Qf,_,g)&&(A===$?_.commit(g):_.put(Xf.id,n.from(JSON.stringify(gr)),!0,function(Pl){Ct(Pl,_,g)&&_.commit(g)}))})};gr[Q]?v.getINode(_,d,gr[Q],function(Qf,Pl){Ct(Qf,_,g)&&(Pl.isFile()?_.del(Pl.id,function(qg){Ct(qg,_,g)&&_.del(gr[Q],function(KO){Ct(KO,_,g)&&Vi()})}):_.abort(function(qg){g(y.EPERM(d))}))}):Vi()}else g(y.ENOENT(u))}}())})};we(A),A!==$&&we($)},c.prototype.stat=function(u,d,g){var v=this.store.beginTransaction("readonly");this.findINode(v,u,function(_,A){Nr(_,g)&&g(null,A.toStats())})},c.prototype.createFile=function(u,d,g,v){var _=this,A=this.store.beginTransaction("readwrite"),P=Ee();this.commitNewFile(A,u,b.FILE,g,P,function($,Q){Nr($,v)&&v(null,new rg(_,u,d,Q.toStats(),P))})},c.prototype.openFile=function(u,d,g){var v=this,_=this.store.beginTransaction("readonly");this.findINode(_,u,function(A,P){Nr(A,g)&&_.get(P.id,function($,Q){Nr($,g)&&(Q===void 0?g(y.ENOENT(u)):g(null,new rg(v,u,d,P.toStats(),Q)))})})},c.prototype.unlink=function(u,d){this.removeEntry(u,!1,d)},c.prototype.rmdir=function(u,d){var g=this;this.readdir(u,function(v,_){v?d(v):_.length>0?d(y.ENOTEMPTY(u)):g.removeEntry(u,!0,d)})},c.prototype.mkdir=function(u,d,g){var v=this.store.beginTransaction("readwrite"),_=n.from("{}");this.commitNewFile(v,u,b.DIRECTORY,d,_,g)},c.prototype.readdir=function(u,d){var g=this,v=this.store.beginTransaction("readonly");this.findINode(v,u,function(_,A){Nr(_,d)&&g.getDirListing(v,u,A,function(P,$){Nr(P,d)&&d(null,Object.keys($))})})},c.prototype._sync=function(u,d,g,v){var _=this,A=this.store.beginTransaction("readwrite");this._findINode(A,h.dirname(u),h.basename(u),function(P,$){Ct(P,A,v)&&_.getINode(A,u,$,function(Q,fe){if(Ct(Q,A,v)){var pe=fe.update(g);A.put(fe.id,d,!0,function(ve){Ct(ve,A,v)&&(pe?A.put($,fe.toBuffer(),!0,function(we){Ct(we,A,v)&&A.commit(v)}):A.commit(v))})}})})},c.prototype.makeRootDirectory=function(u){var d=this.store.beginTransaction("readwrite");d.get(Hn,function(g,v){if(g||v===void 0){var _=new Date().getTime(),A=new dr(xl(),4096,511|b.DIRECTORY,_,_,_);d.put(A.id,Qy(),!1,function(P){Ct(P,d,u)&&d.put(Hn,A.toBuffer(),!1,function($){$?d.abort(function(){u($)}):d.commit(u)})})}else d.commit(u)})},c.prototype._findINode=function(u,d,g,v){var _=this,A=function(P,$,Q){P?v(P):Q[g]?v(null,Q[g]):v(y.ENOENT(h.resolve(d,g)))};d==="/"?g===""?v(null,Hn):this.getINode(u,d,Hn,function(P,$){Nr(P,v)&&_.getDirListing(u,d,$,function(Q,fe){A(Q,0,fe)})}):this.findINodeAndDirListing(u,d,A)},c.prototype.findINode=function(u,d,g){var v=this;this._findINode(u,h.dirname(d),h.basename(d),function(_,A){Nr(_,g)&&v.getINode(u,d,A,g)})},c.prototype.getINode=function(u,d,g,v){u.get(g,function(_,A){Nr(_,v)&&(A===void 0?v(y.ENOENT(d)):v(null,dr.fromBuffer(A)))})},c.prototype.getDirListing=function(u,d,g,v){g.isDirectory()?u.get(g.id,function(_,A){if(Nr(_,v))try{v(null,JSON.parse(A.toString()))}catch{v(y.ENOENT(d))}}):v(y.ENOTDIR(d))},c.prototype.findINodeAndDirListing=function(u,d,g){var v=this;this.findINode(u,d,function(_,A){Nr(_,g)&&v.getDirListing(u,d,A,function(P,$){Nr(P,g)&&g(null,A,$)})})},c.prototype.addNewNode=function(u,d,g){var v,_=0,A=function(){++_==5?g(new y(a.EIO,"Unable to commit data to key-value store.")):(v=xl(),u.put(v,d,!1,function(P,$){P||!$?A():g(null,v)}))};A()},c.prototype.commitNewFile=function(u,d,g,v,_,A){var P=this,$=h.dirname(d),Q=h.basename(d),fe=new Date().getTime();if(d==="/")return A(y.EEXIST(d));this.findINodeAndDirListing(u,$,function(pe,ve,we){Ct(pe,u,A)&&(we[Q]?u.abort(function(){A(y.EEXIST(d))}):P.addNewNode(u,_,function(Ie,ze){if(Ct(Ie,u,A)){var Nt=new dr(ze,_.length,v|g,fe,fe,fe);P.addNewNode(u,Nt.toBuffer(),function(rn,Rr){Ct(rn,u,A)&&(we[Q]=Rr,u.put(ve.id,n.from(JSON.stringify(we)),!0,function(Co){Ct(Co,u,A)&&u.commit(function(gr){Ct(gr,u,A)&&A(null,Nt)})}))})}}))})},c.prototype.removeEntry=function(u,d,g){var v=this,_=this.store.beginTransaction("readwrite"),A=h.dirname(u),P=h.basename(u);this.findINodeAndDirListing(_,A,function($,Q,fe){if(Ct($,_,g))if(fe[P]){var pe=fe[P];delete fe[P],v.getINode(_,u,pe,function(ve,we){Ct(ve,_,g)&&(!d&&we.isDirectory()?_.abort(function(){g(y.EISDIR(u))}):d&&!we.isDirectory()?_.abort(function(){g(y.ENOTDIR(u))}):_.del(we.id,function(Ie){Ct(Ie,_,g)&&_.del(pe,function(ze){Ct(ze,_,g)&&_.put(Q.id,n.from(JSON.stringify(fe)),!0,function(Nt){Ct(Nt,_,g)&&_.commit(g)})})}))})}else _.abort(function(){g(y.ENOENT(u))})})},c}(K),Fi=function(){this.store={}};Fi.prototype.name=function(){return ko.Name},Fi.prototype.clear=function(){this.store={}},Fi.prototype.beginTransaction=function(f){return new Cn(this)},Fi.prototype.get=function(f){return this.store[f]},Fi.prototype.put=function(f,c,u){return!(!u&&this.store.hasOwnProperty(f)||(this.store[f]=c,0))},Fi.prototype.del=function(f){delete this.store[f]};var ko=function(f){function c(){f.call(this,{store:new Fi})}return f&&(c.__proto__=f),c.prototype=Object.create(f&&f.prototype),c.prototype.constructor=c,c.Create=function(u,d){d(null,new c)},c}(tg);ko.Name="InMemory",ko.Options={};var zf=kt.indexedDB||kt.mozIndexedDB||kt.webkitIndexedDB||kt.msIndexedDB;function Us(f,c){switch(c===void 0&&(c=f.toString()),f.name){case"NotFoundError":return new y(a.ENOENT,c);case"QuotaExceededError":return new y(a.ENOSPC,c);default:return new y(a.EIO,c)}}function Bs(f,c,u){return c===void 0&&(c=a.EIO),u===void 0&&(u=null),function(d){d.preventDefault(),f(new y(c,u!==null?u:void 0))}}var Vf=function(f,c){this.tx=f,this.store=c};Vf.prototype.get=function(f,c){try{var u=this.store.get(f);u.onerror=Bs(c),u.onsuccess=function(d){var g=d.target.result;c(null,g===void 0?g:ne(g))}}catch(d){c(Us(d))}};var MO=function(f){function c(u,d){f.call(this,u,d)}return f&&(c.__proto__=f),c.prototype=Object.create(f&&f.prototype),c.prototype.constructor=c,c.prototype.put=function(u,d,g,v){try{var _,A=V(d);(_=g?this.store.put(A,u):this.store.add(A,u)).onerror=Bs(v),_.onsuccess=function(P){v(null,!0)}}catch(P){v(Us(P))}},c.prototype.del=function(u,d){try{var g=this.store.delete(u);g.onerror=Bs(d),g.onsuccess=function(v){d()}}catch(v){d(Us(v))}},c.prototype.commit=function(u){setTimeout(u,0)},c.prototype.abort=function(u){var d=null;try{this.tx.abort()}catch(g){d=Us(g)}finally{u(d)}},c}(Vf),kl=function(f,c){var u=this;c===void 0&&(c="browserfs"),this.storeName=c;var d=zf.open(this.storeName,1);d.onupgradeneeded=function(g){var v=g.target.result;v.objectStoreNames.contains(u.storeName)&&v.deleteObjectStore(u.storeName),v.createObjectStore(u.storeName)},d.onsuccess=function(g){u.db=g.target.result,f(null,u)},d.onerror=Bs(f,a.EACCES)};kl.prototype.name=function(){return zs.Name+" - "+this.storeName},kl.prototype.clear=function(f){try{var c=this.db.transaction(this.storeName,"readwrite").objectStore(this.storeName).clear();c.onsuccess=function(u){setTimeout(f,0)},c.onerror=Bs(f)}catch(u){f(Us(u))}},kl.prototype.beginTransaction=function(f){f===void 0&&(f="readonly");var c=this.db.transaction(this.storeName,f),u=c.objectStore(this.storeName);if(f==="readwrite")return new MO(c,u);if(f==="readonly")return new Vf(c,u);throw new y(a.EINVAL,"Invalid transaction type.")};var zs=function(f){function c(u,d,g){var v=this;g===void 0&&(g=!0),f.call(this),this.store=new kl(function(_){_?u(_):v.init(v.store,function(A){u(A,v)})},d),ge(g,c.Name,{storeName:d})}return f&&(c.__proto__=f),c.prototype=Object.create(f&&f.prototype),c.prototype.constructor=c,c.Create=function(u,d){new c(d,u.storeName,!1)},c.isAvailable=function(){try{return zf!==void 0&&zf.open("__browserfs_test__")!==null}catch{return!1}},c}(PO);zs.Name="IndexedDB",zs.Options={storeName:{type:"string",optional:!0,description:"The name of this file system. You can have multiple IndexedDB file systems operating at once, but each must have a different name."}};var Vs,Wf=!1;try{kt.localStorage.setItem("__test__",String.fromCharCode(55296)),Wf=kt.localStorage.getItem("__test__")===String.fromCharCode(55296)}catch{Wf=!1}Vs=Wf?"binary_string":"binary_string_ie",n.isEncoding(Vs)||(Vs="base64");var Li=function(){};Li.prototype.name=function(){return Ws.Name},Li.prototype.clear=function(){kt.localStorage.clear()},Li.prototype.beginTransaction=function(f){return new Cn(this)},Li.prototype.get=function(f){try{var c=kt.localStorage.getItem(f);if(c!==null)return n.from(c,Vs)}catch{}},Li.prototype.put=function(f,c,u){try{return!(!u&&kt.localStorage.getItem(f)!==null||(kt.localStorage.setItem(f,c.toString(Vs)),0))}catch{throw new y(a.ENOSPC,"LocalStorage is full.")}},Li.prototype.del=function(f){try{kt.localStorage.removeItem(f)}catch(c){throw new y(a.EIO,"Unable to delete key "+f+": "+c)}};var Ws=function(f){function c(){f.call(this,{store:new Li})}return f&&(c.__proto__=f),c.prototype=Object.create(f&&f.prototype),c.prototype.constructor=c,c.Create=function(u,d){d(null,new c)},c.isAvailable=function(){return kt.localStorage!==void 0},c}(tg);Ws.Name="LocalStorage",Ws.Options={};var Io=function(f){function c(){f.call(this),this.mountList=[],this.mntMap={},this.rootFs=new ko}return f&&(c.__proto__=f),c.prototype=Object.create(f&&f.prototype),c.prototype.constructor=c,c.Create=function(u,d){var g=new c;Object.keys(u).forEach(function(v){g.mount(v,u[v])}),d(null,g)},c.isAvailable=function(){return!0},c.prototype.mount=function(u,d){if(u[0]!=="/"&&(u="/"+u),u=h.resolve(u),this.mntMap[u])throw new y(a.EINVAL,"Mount point "+u+" is already taken.");B(u,511,this.rootFs),this.mntMap[u]=d,this.mountList.push(u),this.mountList=this.mountList.sort(function(g,v){return v.length-g.length})},c.prototype.umount=function(u){if(u[0]!=="/"&&(u="/"+u),u=h.resolve(u),!this.mntMap[u])throw new y(a.EINVAL,"Mount point "+u+" is already unmounted.");for(delete this.mntMap[u],this.mountList.splice(this.mountList.indexOf(u),1);u!=="/"&&this.rootFs.readdirSync(u).length===0;)this.rootFs.rmdirSync(u),u=h.dirname(u)},c.prototype._getFs=function(u){for(var d=this.mountList,g=d.length,v=0;v<g;v++){var _=d[v];if(_.length<=u.length&&u.indexOf(_)===0)return(u=u.substr(_.length>1?_.length:0))===""&&(u="/"),{fs:this.mntMap[_],path:u}}return{fs:this.rootFs,path:u}},c.prototype.getName=function(){return c.Name},c.prototype.diskSpace=function(u,d){d(0,0)},c.prototype.isReadOnly=function(){return!1},c.prototype.supportsLinks=function(){return!1},c.prototype.supportsProps=function(){return!1},c.prototype.supportsSynch=function(){return!0},c.prototype.standardizeError=function(u,d,g){var v=u.message.indexOf(d);return v!==-1&&(u.message=u.message.substr(0,v)+g+u.message.substr(v+d.length),u.path=g),u},c.prototype.rename=function(u,d,g){var v=this,_=this._getFs(u),A=this._getFs(d);return _.fs===A.fs?_.fs.rename(_.path,A.path,function(P){P&&v.standardizeError(v.standardizeError(P,_.path,u),A.path,d),g(P)}):te.readFile(u,function(P,$){if(P)return g(P);te.writeFile(d,$,function(Q){if(Q)return g(Q);te.unlink(u,g)})})},c.prototype.renameSync=function(u,d){var g=this._getFs(u),v=this._getFs(d);if(g.fs===v.fs)try{return g.fs.renameSync(g.path,v.path)}catch(A){throw this.standardizeError(this.standardizeError(A,g.path,u),v.path,d),A}var _=te.readFileSync(u);return te.writeFileSync(d,_),te.unlinkSync(u)},c.prototype.readdirSync=function(u){var d=this._getFs(u),g=null;if(d.fs!==this.rootFs)try{g=this.rootFs.readdirSync(u)}catch{}try{var v=d.fs.readdirSync(d.path);return g===null?v:v.concat(g.filter(function(_){return v.indexOf(_)===-1}))}catch(_){if(g===null)throw this.standardizeError(_,d.path,u);return g}},c.prototype.readdir=function(u,d){var g=this,v=this._getFs(u);v.fs.readdir(v.path,function(_,A){if(v.fs!==g.rootFs)try{var P=g.rootFs.readdirSync(u);A=A?A.concat(P.filter(function($){return A.indexOf($)===-1})):P}catch{if(_)return d(g.standardizeError(_,v.path,u))}else if(_)return d(g.standardizeError(_,v.path,u));d(null,A)})},c.prototype.rmdirSync=function(u){var d=this._getFs(u);if(this._containsMountPt(u))throw y.ENOTEMPTY(u);try{d.fs.rmdirSync(d.path)}catch(g){throw this.standardizeError(g,d.path,u)}},c.prototype.rmdir=function(u,d){var g=this,v=this._getFs(u);this._containsMountPt(u)?d(y.ENOTEMPTY(u)):v.fs.rmdir(v.path,function(_){d(_?g.standardizeError(_,v.path,u):null)})},c.prototype._containsMountPt=function(u){for(var d=this.mountList,g=d.length,v=0;v<g;v++){var _=d[v];if(_.length>=u.length&&_.slice(0,u.length)===u)return!0}return!1},c}(K);function ng(f,c,u){return c?function(){for(var d=[],g=arguments.length;g--;)d[g]=arguments[g];var v=d[0],_=this._getFs(v);d[0]=_.path;try{return _.fs[f].apply(_.fs,d)}catch(A){throw this.standardizeError(A,_.path,v),A}}:function(){for(var d=this,g=[],v=arguments.length;v--;)g[v]=arguments[v];var _=g[0],A=this._getFs(_);if(g[0]=A.path,typeof g[g.length-1]=="function"){var P=g[g.length-1];g[g.length-1]=function(){for(var $=[],Q=arguments.length;Q--;)$[Q]=arguments[Q];$.length>0&&$[0]instanceof y&&d.standardizeError($[0],A.path,_),P.apply(null,$)}}return A.fs[f].apply(A.fs,g)}}Io.Name="MountableFileSystem",Io.Options={};for(var qs,ig=[["exists","unlink","readlink"],["stat","mkdir","realpath","truncate"],["open","readFile","chmod","utimes"],["chown"],["writeFile","appendFile"]],qf=0;qf<ig.length;qf++)for(var $f=0,og=ig[qf];$f<og.length;$f+=1){var Il=og[$f];Io.prototype[Il]=ng(Il,!1),Io.prototype[Il+"Sync"]=ng(Il+"Sync",!0)}if(typeof setImmediate<"u")qs=setImmediate;else{var zr=kt,No=[],sg="zero-timeout-message";if(function(){if(zr.importScripts!==void 0||!zr.postMessage)return!1;var f=!0,c=zr.onmessage;return zr.onmessage=function(){f=!1},zr.postMessage("","*"),zr.onmessage=c,f}()){qs=function(f){No.push(f),zr.postMessage(sg,"*")};var ag=function(f){if(f.source===self&&f.data===sg&&(f.stopPropagation?f.stopPropagation():f.cancelBubble=!0,No.length>0))return No.shift()()};zr.addEventListener?zr.addEventListener("message",ag,!0):zr.attachEvent("onmessage",ag)}else if(zr.MessageChannel){var lg=new zr.MessageChannel;lg.port1.onmessage=function(f){if(No.length>0)return No.shift()()},qs=function(f){No.push(f),lg.port2.postMessage("")}}else qs=function(f){return setTimeout(f,0)}}var Hf=qs,$s=function(){this._locked=!1,this._waiters=[]};$s.prototype.lock=function(f){this._locked?this._waiters.push(f):(this._locked=!0,f())},$s.prototype.unlock=function(){if(!this._locked)throw new Error("unlock of a non-locked mutex");var f=this._waiters.shift();f?Hf(f):this._locked=!1},$s.prototype.tryLock=function(){return!this._locked&&(this._locked=!0,!0)},$s.prototype.isLocked=function(){return this._locked};var Ne=function(f){this._fs=f,this._mu=new $s};Ne.prototype.getName=function(){return"LockedFS<"+this._fs.getName()+">"},Ne.prototype.getFSUnlocked=function(){return this._fs},Ne.prototype.initialize=function(f){this._fs.initialize(f)},Ne.prototype.diskSpace=function(f,c){this._fs.diskSpace(f,c)},Ne.prototype.isReadOnly=function(){return this._fs.isReadOnly()},Ne.prototype.supportsLinks=function(){return this._fs.supportsLinks()},Ne.prototype.supportsProps=function(){return this._fs.supportsProps()},Ne.prototype.supportsSynch=function(){return this._fs.supportsSynch()},Ne.prototype.rename=function(f,c,u){var d=this;this._mu.lock(function(){d._fs.rename(f,c,function(g){d._mu.unlock(),u(g)})})},Ne.prototype.renameSync=function(f,c){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.renameSync(f,c)},Ne.prototype.stat=function(f,c,u){var d=this;this._mu.lock(function(){d._fs.stat(f,c,function(g,v){d._mu.unlock(),u(g,v)})})},Ne.prototype.statSync=function(f,c){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.statSync(f,c)},Ne.prototype.open=function(f,c,u,d){var g=this;this._mu.lock(function(){g._fs.open(f,c,u,function(v,_){g._mu.unlock(),d(v,_)})})},Ne.prototype.openSync=function(f,c,u){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.openSync(f,c,u)},Ne.prototype.unlink=function(f,c){var u=this;this._mu.lock(function(){u._fs.unlink(f,function(d){u._mu.unlock(),c(d)})})},Ne.prototype.unlinkSync=function(f){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.unlinkSync(f)},Ne.prototype.rmdir=function(f,c){var u=this;this._mu.lock(function(){u._fs.rmdir(f,function(d){u._mu.unlock(),c(d)})})},Ne.prototype.rmdirSync=function(f){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.rmdirSync(f)},Ne.prototype.mkdir=function(f,c,u){var d=this;this._mu.lock(function(){d._fs.mkdir(f,c,function(g){d._mu.unlock(),u(g)})})},Ne.prototype.mkdirSync=function(f,c){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.mkdirSync(f,c)},Ne.prototype.readdir=function(f,c){var u=this;this._mu.lock(function(){u._fs.readdir(f,function(d,g){u._mu.unlock(),c(d,g)})})},Ne.prototype.readdirSync=function(f){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.readdirSync(f)},Ne.prototype.exists=function(f,c){var u=this;this._mu.lock(function(){u._fs.exists(f,function(d){u._mu.unlock(),c(d)})})},Ne.prototype.existsSync=function(f){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.existsSync(f)},Ne.prototype.realpath=function(f,c,u){var d=this;this._mu.lock(function(){d._fs.realpath(f,c,function(g,v){d._mu.unlock(),u(g,v)})})},Ne.prototype.realpathSync=function(f,c){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.realpathSync(f,c)},Ne.prototype.truncate=function(f,c,u){var d=this;this._mu.lock(function(){d._fs.truncate(f,c,function(g){d._mu.unlock(),u(g)})})},Ne.prototype.truncateSync=function(f,c){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.truncateSync(f,c)},Ne.prototype.readFile=function(f,c,u,d){var g=this;this._mu.lock(function(){g._fs.readFile(f,c,u,function(v,_){g._mu.unlock(),d(v,_)})})},Ne.prototype.readFileSync=function(f,c,u){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.readFileSync(f,c,u)},Ne.prototype.writeFile=function(f,c,u,d,g,v){var _=this;this._mu.lock(function(){_._fs.writeFile(f,c,u,d,g,function(A){_._mu.unlock(),v(A)})})},Ne.prototype.writeFileSync=function(f,c,u,d,g){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.writeFileSync(f,c,u,d,g)},Ne.prototype.appendFile=function(f,c,u,d,g,v){var _=this;this._mu.lock(function(){_._fs.appendFile(f,c,u,d,g,function(A){_._mu.unlock(),v(A)})})},Ne.prototype.appendFileSync=function(f,c,u,d,g){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.appendFileSync(f,c,u,d,g)},Ne.prototype.chmod=function(f,c,u,d){var g=this;this._mu.lock(function(){g._fs.chmod(f,c,u,function(v){g._mu.unlock(),d(v)})})},Ne.prototype.chmodSync=function(f,c,u){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.chmodSync(f,c,u)},Ne.prototype.chown=function(f,c,u,d,g){var v=this;this._mu.lock(function(){v._fs.chown(f,c,u,d,function(_){v._mu.unlock(),g(_)})})},Ne.prototype.chownSync=function(f,c,u,d){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.chownSync(f,c,u,d)},Ne.prototype.utimes=function(f,c,u,d){var g=this;this._mu.lock(function(){g._fs.utimes(f,c,u,function(v){g._mu.unlock(),d(v)})})},Ne.prototype.utimesSync=function(f,c,u){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.utimesSync(f,c,u)},Ne.prototype.link=function(f,c,u){var d=this;this._mu.lock(function(){d._fs.link(f,c,function(g){d._mu.unlock(),u(g)})})},Ne.prototype.linkSync=function(f,c){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.linkSync(f,c)},Ne.prototype.symlink=function(f,c,u,d){var g=this;this._mu.lock(function(){g._fs.symlink(f,c,u,function(v){g._mu.unlock(),d(v)})})},Ne.prototype.symlinkSync=function(f,c,u){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.symlinkSync(f,c,u)},Ne.prototype.readlink=function(f,c){var u=this;this._mu.lock(function(){u._fs.readlink(f,function(d,g){u._mu.unlock(),c(d,g)})})},Ne.prototype.readlinkSync=function(f){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.readlinkSync(f)};var Fn="/.deletedFiles.log";function ug(f){return 146|f}function Ar(f){return N.getFileFlag(f)}var lt,cg=function(f){function c(u,d,g,v,_){f.call(this,u,d,g,v,_)}return f&&(c.__proto__=f),c.prototype=Object.create(f&&f.prototype),c.prototype.constructor=c,c.prototype.sync=function(u){var d=this;this.isDirty()?this._fs._syncAsync(this,function(g){d.resetDirty(),u(g)}):u(null)},c.prototype.syncSync=function(){this.isDirty()&&(this._fs._syncSync(this),this.resetDirty())},c.prototype.close=function(u){this.sync(u)},c.prototype.closeSync=function(){this.syncSync()},c}(E),fg=function(f){function c(u,d){if(f.call(this),this._isInitialized=!1,this._initializeCallbacks=[],this._deletedFiles={},this._deleteLog="",this._deleteLogUpdatePending=!1,this._deleteLogUpdateNeeded=!1,this._deleteLogError=null,this._writable=u,this._readable=d,this._writable.isReadOnly())throw new y(a.EINVAL,"Writable file system must be writable.")}return f&&(c.__proto__=f),c.prototype=Object.create(f&&f.prototype),c.prototype.constructor=c,c.isAvailable=function(){return!0},c.prototype.getOverlayedFileSystems=function(){return{readable:this._readable,writable:this._writable}},c.prototype._syncAsync=function(u,d){var g=this;this.createParentDirectoriesAsync(u.getPath(),function(v){if(v)return d(v);g._writable.writeFile(u.getPath(),u.getBuffer(),null,Ar("w"),u.getStats().mode,d)})},c.prototype._syncSync=function(u){this.createParentDirectories(u.getPath()),this._writable.writeFileSync(u.getPath(),u.getBuffer(),null,Ar("w"),u.getStats().mode)},c.prototype.getName=function(){return Hs.Name},c.prototype.initialize=function(u){var d=this,g=this._initializeCallbacks,v=function(_){d._isInitialized=!_,d._initializeCallbacks=[],g.forEach(function(A){return A(_)})};if(this._isInitialized)return u();g.push(u),g.length===1&&this._writable.readFile(Fn,"utf8",Ar("r"),function(_,A){if(_){if(_.errno!==a.ENOENT)return v(_)}else d._deleteLog=A;d._reparseDeletionLog(),v()})},c.prototype.isReadOnly=function(){return!1},c.prototype.supportsSynch=function(){return this._readable.supportsSynch()&&this._writable.supportsSynch()},c.prototype.supportsLinks=function(){return!1},c.prototype.supportsProps=function(){return this._readable.supportsProps()&&this._writable.supportsProps()},c.prototype.getDeletionLog=function(){return this._deleteLog},c.prototype.restoreDeletionLog=function(u){this._deleteLog=u,this._reparseDeletionLog(),this.updateLog("")},c.prototype.rename=function(u,d,g){var v=this;if(this.checkInitAsync(g)&&!this.checkPathAsync(u,g)&&!this.checkPathAsync(d,g))return u===Fn||d===Fn?g(y.EPERM("Cannot rename deletion log.")):u===d?g():void this.stat(u,!1,function(_,A){return _?g(_):v.stat(d,!1,function(P,$){var Q=v;function fe(ve){var we=ve.shift();if(!we)return g();var Ie=h.resolve(u,we),ze=h.resolve(d,we);Q.rename(Ie,ze,function(Nt){if(Nt)return g(Nt);fe(ve)})}var pe=511;if(A.isDirectory()){if(P)return P.errno!==a.ENOENT?g(P):v._writable.exists(u,function(ve){if(ve)return v._writable.rename(u,d,g);v._writable.mkdir(d,pe,function(we){if(we)return g(we);v._readable.readdir(u,function(Ie,ze){if(Ie)return g();fe(ze)})})});if(pe=$.mode,!$.isDirectory())return g(y.ENOTDIR(d));v.readdir(d,function(ve,we){if(we&&we.length)return g(y.ENOTEMPTY(d));v._readable.readdir(u,function(Ie,ze){if(Ie)return g();fe(ze)})})}if($&&$.isDirectory())return g(y.EISDIR(d));v.readFile(u,null,Ar("r"),function(ve,we){return ve?g(ve):v.writeFile(d,we,null,Ar("w"),A.mode,function(Ie){return Ie?g(Ie):v.unlink(u,g)})})})})},c.prototype.renameSync=function(u,d){var g=this;if(this.checkInitialized(),this.checkPath(u),this.checkPath(d),u===Fn||d===Fn)throw y.EPERM("Cannot rename deletion log.");var v=this.statSync(u,!1);if(v.isDirectory()){if(u===d)return;var _=511;if(this.existsSync(d)){var A=this.statSync(d,!1);if(_=A.mode,!A.isDirectory())throw y.ENOTDIR(d);if(this.readdirSync(d).length>0)throw y.ENOTEMPTY(d)}this._writable.existsSync(u)?this._writable.renameSync(u,d):this._writable.existsSync(d)||this._writable.mkdirSync(d,_),this._readable.existsSync(u)&&this._readable.readdirSync(u).forEach(function(P){g.renameSync(h.resolve(u,P),h.resolve(d,P))})}else{if(this.existsSync(d)&&this.statSync(d,!1).isDirectory())throw y.EISDIR(d);this.writeFileSync(d,this.readFileSync(u,null,Ar("r")),null,Ar("w"),v.mode)}u!==d&&this.existsSync(u)&&this.unlinkSync(u)},c.prototype.stat=function(u,d,g){var v=this;this.checkInitAsync(g)&&this._writable.stat(u,d,function(_,A){_&&_.errno===a.ENOENT?(v._deletedFiles[u]&&g(y.ENOENT(u)),v._readable.stat(u,d,function(P,$){$&&(($=$.clone()).mode=ug($.mode)),g(P,$)})):g(_,A)})},c.prototype.statSync=function(u,d){this.checkInitialized();try{return this._writable.statSync(u,d)}catch{if(this._deletedFiles[u])throw y.ENOENT(u);var g=this._readable.statSync(u,d).clone();return g.mode=ug(g.mode),g}},c.prototype.open=function(u,d,g,v){var _=this;this.checkInitAsync(v)&&!this.checkPathAsync(u,v)&&this.stat(u,!1,function(A,P){if(!P)return d.pathNotExistsAction()===m.CREATE_FILE?_.createParentDirectoriesAsync(u,function($){return $?v($):_._writable.open(u,d,g,v)}):v(y.ENOENT(u));switch(d.pathExistsAction()){case m.TRUNCATE_FILE:return _.createParentDirectoriesAsync(u,function($){if($)return v($);_._writable.open(u,d,g,v)});case m.NOP:return _._writable.exists(u,function($){$?_._writable.open(u,d,g,v):((P=P.clone()).mode=g,_._readable.readFile(u,null,Ar("r"),function(Q,fe){if(Q)return v(Q);P.size===-1&&(P.size=fe.length);var pe=new cg(_,u,d,P,fe);v(null,pe)}))});default:return v(y.EEXIST(u))}})},c.prototype.openSync=function(u,d,g){if(this.checkInitialized(),this.checkPath(u),u===Fn)throw y.EPERM("Cannot open deletion log.");if(!this.existsSync(u)){if(d.pathNotExistsAction()===m.CREATE_FILE)return this.createParentDirectories(u),this._writable.openSync(u,d,g);throw y.ENOENT(u)}switch(d.pathExistsAction()){case m.TRUNCATE_FILE:return this.createParentDirectories(u),this._writable.openSync(u,d,g);case m.NOP:if(this._writable.existsSync(u))return this._writable.openSync(u,d,g);var v=this._readable.readFileSync(u,null,Ar("r")),_=this._readable.statSync(u,!1).clone();return _.mode=g,new cg(this,u,d,_,v);default:throw y.EEXIST(u)}},c.prototype.unlink=function(u,d){var g=this;this.checkInitAsync(d)&&!this.checkPathAsync(u,d)&&this.exists(u,function(v){if(!v)return d(y.ENOENT(u));g._writable.exists(u,function(_){if(_)return g._writable.unlink(u,function(A){if(A)return d(A);g.exists(u,function(P){P&&g.deletePath(u),d(null)})});g.deletePath(u),d(null)})})},c.prototype.unlinkSync=function(u){if(this.checkInitialized(),this.checkPath(u),!this.existsSync(u))throw y.ENOENT(u);this._writable.existsSync(u)&&this._writable.unlinkSync(u),this.existsSync(u)&&this.deletePath(u)},c.prototype.rmdir=function(u,d){var g=this;if(this.checkInitAsync(d)){var v=function(){g.readdir(u,function(_,A){return _?d(_):A.length?d(y.ENOTEMPTY(u)):(g.deletePath(u),void d(null))})};this.exists(u,function(_){if(!_)return d(y.ENOENT(u));g._writable.exists(u,function(A){A?g._writable.rmdir(u,function(P){if(P)return d(P);g._readable.exists(u,function($){$?v():d()})}):v()})})}},c.prototype.rmdirSync=function(u){if(this.checkInitialized(),!this.existsSync(u))throw y.ENOENT(u);if(this._writable.existsSync(u)&&this._writable.rmdirSync(u),this.existsSync(u)){if(this.readdirSync(u).length>0)throw y.ENOTEMPTY(u);this.deletePath(u)}},c.prototype.mkdir=function(u,d,g){var v=this;this.checkInitAsync(g)&&this.exists(u,function(_){if(_)return g(y.EEXIST(u));v.createParentDirectoriesAsync(u,function(A){if(A)return g(A);v._writable.mkdir(u,d,g)})})},c.prototype.mkdirSync=function(u,d){if(this.checkInitialized(),this.existsSync(u))throw y.EEXIST(u);this.createParentDirectories(u),this._writable.mkdirSync(u,d)},c.prototype.readdir=function(u,d){var g=this;this.checkInitAsync(d)&&this.stat(u,!1,function(v,_){return v?d(v):_.isDirectory()?void g._writable.readdir(u,function(A,P){if(A&&A.code!=="ENOENT")return d(A);!A&&P||(P=[]),g._readable.readdir(u,function($,Q){!$&&Q||(Q=[]);var fe={},pe=P.concat(Q.filter(function(ve){return!g._deletedFiles[u+"/"+ve]})).filter(function(ve){var we=!fe[ve];return fe[ve]=!0,we});d(null,pe)})}):d(y.ENOTDIR(u))})},c.prototype.readdirSync=function(u){var d=this;if(this.checkInitialized(),!this.statSync(u,!1).isDirectory())throw y.ENOTDIR(u);var g=[];try{g=g.concat(this._writable.readdirSync(u))}catch{}try{g=g.concat(this._readable.readdirSync(u).filter(function(_){return!d._deletedFiles[u+"/"+_]}))}catch{}var v={};return g.filter(function(_){var A=!v[_];return v[_]=!0,A})},c.prototype.exists=function(u,d){var g=this;this.checkInitialized(),this._writable.exists(u,function(v){if(v)return d(!0);g._readable.exists(u,function(_){d(_&&g._deletedFiles[u]!==!0)})})},c.prototype.existsSync=function(u){return this.checkInitialized(),this._writable.existsSync(u)||this._readable.existsSync(u)&&this._deletedFiles[u]!==!0},c.prototype.chmod=function(u,d,g,v){var _=this;this.checkInitAsync(v)&&this.operateOnWritableAsync(u,function(A){if(A)return v(A);_._writable.chmod(u,d,g,v)})},c.prototype.chmodSync=function(u,d,g){var v=this;this.checkInitialized(),this.operateOnWritable(u,function(){v._writable.chmodSync(u,d,g)})},c.prototype.chown=function(u,d,g,v,_){var A=this;this.checkInitAsync(_)&&this.operateOnWritableAsync(u,function(P){if(P)return _(P);A._writable.chown(u,d,g,v,_)})},c.prototype.chownSync=function(u,d,g,v){var _=this;this.checkInitialized(),this.operateOnWritable(u,function(){_._writable.chownSync(u,d,g,v)})},c.prototype.utimes=function(u,d,g,v){var _=this;this.checkInitAsync(v)&&this.operateOnWritableAsync(u,function(A){if(A)return v(A);_._writable.utimes(u,d,g,v)})},c.prototype.utimesSync=function(u,d,g){var v=this;this.checkInitialized(),this.operateOnWritable(u,function(){v._writable.utimesSync(u,d,g)})},c.prototype.deletePath=function(u){this._deletedFiles[u]=!0,this.updateLog("d"+u+`
`)},c.prototype.updateLog=function(u){var d=this;this._deleteLog+=u,this._deleteLogUpdatePending?this._deleteLogUpdateNeeded=!0:(this._deleteLogUpdatePending=!0,this._writable.writeFile(Fn,this._deleteLog,"utf8",N.getFileFlag("w"),420,function(g){d._deleteLogUpdatePending=!1,g?d._deleteLogError=g:d._deleteLogUpdateNeeded&&(d._deleteLogUpdateNeeded=!1,d.updateLog(""))}))},c.prototype._reparseDeletionLog=function(){var u=this;this._deletedFiles={},this._deleteLog.split(`
`).forEach(function(d){u._deletedFiles[d.slice(1)]=d.slice(0,1)==="d"})},c.prototype.checkInitialized=function(){if(!this._isInitialized)throw new y(a.EPERM,"OverlayFS is not initialized. Please initialize OverlayFS using its initialize() method before using it.");if(this._deleteLogError!==null){var u=this._deleteLogError;throw this._deleteLogError=null,u}},c.prototype.checkInitAsync=function(u){if(!this._isInitialized)return u(new y(a.EPERM,"OverlayFS is not initialized. Please initialize OverlayFS using its initialize() method before using it.")),!1;if(this._deleteLogError!==null){var d=this._deleteLogError;return this._deleteLogError=null,u(d),!1}return!0},c.prototype.checkPath=function(u){if(u===Fn)throw y.EPERM(u)},c.prototype.checkPathAsync=function(u,d){return u===Fn&&(d(y.EPERM(u)),!0)},c.prototype.createParentDirectoriesAsync=function(u,d){var g=h.dirname(u),v=[],_=this;function A(){if(!v.length)return d();var P=v.pop();_._readable.stat(P,!1,function($,Q){if(!Q)return d();_._writable.mkdir(P,Q.mode,function(fe){if(fe)return d(fe);A()})})}this._writable.stat(g,!1,function P($,Q){$?(v.push(g),g=h.dirname(g),_._writable.stat(g,!1,P)):A()})},c.prototype.createParentDirectories=function(u){for(var d=this,g=h.dirname(u),v=[];!this._writable.existsSync(g);)v.push(g),g=h.dirname(g);(v=v.reverse()).forEach(function(_){d._writable.mkdirSync(_,d.statSync(_,!1).mode)})},c.prototype.operateOnWritable=function(u,d){if(!this.existsSync(u))throw y.ENOENT(u);this._writable.existsSync(u)||this.copyToWritable(u),d()},c.prototype.operateOnWritableAsync=function(u,d){var g=this;this.exists(u,function(v){if(!v)return d(y.ENOENT(u));g._writable.exists(u,function(_){if(!_)return g.copyToWritableAsync(u,d);d()})})},c.prototype.copyToWritable=function(u){var d=this.statSync(u,!1);d.isDirectory()?this._writable.mkdirSync(u,d.mode):this.writeFileSync(u,this._readable.readFileSync(u,null,Ar("r")),null,Ar("w"),this.statSync(u,!1).mode)},c.prototype.copyToWritableAsync=function(u,d){var g=this;this.stat(u,!1,function(v,_){return v?d(v):_.isDirectory()?g._writable.mkdir(u,_.mode,d):void g._readable.readFile(u,null,Ar("r"),function(A,P){if(A)return d(A);g.writeFile(u,P,null,Ar("w"),_.mode,d)})})},c}(K),Hs=function(f){function c(u,d,g){g===void 0&&(g=!0),f.call(this,new fg(u,d)),ge(g,c.Name,{readable:"readable file system",writable:"writable file system"})}return f&&(c.__proto__=f),c.prototype=Object.create(f&&f.prototype),c.prototype.constructor=c,c.Create=function(u,d){try{var g=new c(u.writable,u.readable,!1);g.initialize(function(v){d(v,g)},!1)}catch(v){d(v)}},c.isAvailable=function(){return fg.isAvailable()},c.prototype.initialize=function(u,d){d===void 0&&(d=!0),d&&console.warn("[OverlayFS] OverlayFS.initialize() is deprecated and will be removed in the next major release. Please use 'OverlayFS.Create({readable: readable file system instance, writable: writable file system instance}, cb)' to create and initialize OverlayFS instances."),f.prototype.initialize.call(this,u)},c.prototype.getOverlayedFileSystems=function(){return f.prototype.getFSUnlocked.call(this).getOverlayedFileSystems()},c.prototype.unwrap=function(){return f.prototype.getFSUnlocked.call(this)},c}(Ne);Hs.Name="OverlayFS",Hs.Options={writable:{type:"object",description:"The file system to write modified files to."},readable:{type:"object",description:"The file system that initially populates this file system."}},function(f){f[f.CB=0]="CB",f[f.FD=1]="FD",f[f.API_ERROR=2]="API_ERROR",f[f.STATS=3]="STATS",f[f.PROBE=4]="PROBE",f[f.FILEFLAG=5]="FILEFLAG",f[f.BUFFER=6]="BUFFER",f[f.ERROR=7]="ERROR"}(lt||(lt={}));var Gf=function(){this._callbacks={},this._nextId=0};Gf.prototype.toRemoteArg=function(f){var c=this._nextId++;return this._callbacks[c]=f,{type:lt.CB,id:c}},Gf.prototype.toLocalArg=function(f){var c=this._callbacks[f];return delete this._callbacks[f],c};var Nl=function(){this._fileDescriptors={},this._nextId=0};function Al(f){return{type:lt.API_ERROR,errorData:Pi(f.writeToBuffer())}}function hg(f){return y.fromBuffer(Mi(f.errorData))}function dg(f){return{type:lt.ERROR,name:f.name,message:f.message,stack:f.stack}}function pg(f){var c=kt[f.name];typeof c!="function"&&(c=Error);var u=new c(f.message);return u.stack=f.stack,u}function yg(f){return{type:lt.STATS,statsData:Pi(f.toBuffer())}}function gg(f){return O.fromBuffer(Mi(f.statsData))}function mg(f){return{type:lt.FILEFLAG,flagStr:f.getFlagString()}}function vg(f){return N.getFileFlag(f.flagStr)}function Pi(f){return V(f)}function Mi(f){return ne(f)}function wg(f){return{type:lt.BUFFER,data:Pi(f)}}function _g(f){return Mi(f.data)}Nl.prototype.toRemoteArg=function(f,c,u,d){var g,v,_=this._nextId++;this._fileDescriptors[_]=f,f.stat(function(A,P){A?d(A):(v=Pi(P.toBuffer()),u.isReadable()?f.read(n.alloc(P.size),0,P.size,0,function($,Q,fe){$?d($):(g=Pi(fe),d(null,{type:lt.FD,id:_,data:g,stat:v,path:c,flag:u.getFlagString()}))}):d(null,{type:lt.FD,id:_,data:new ArrayBuffer(0),stat:v,path:c,flag:u.getFlagString()}))})},Nl.prototype.applyFdAPIRequest=function(f,c){var u=this,d=f.args[0];this._applyFdChanges(d,function(g,v){g?c(g):v[f.method](function(_){f.method==="close"&&delete u._fileDescriptors[d.id],c(_)})})},Nl.prototype._applyFdChanges=function(f,c){var u=this._fileDescriptors[f.id],d=Mi(f.data),g=O.fromBuffer(Mi(f.stat)),v=N.getFileFlag(f.flag);v.isWriteable()?u.write(d,0,d.length,v.isAppendable()?u.getPos():0,function(_){function A(){u.stat(function(P,$){P?c(P):$.mode!==g.mode?u.chmod(g.mode,function(Q){c(Q,u)}):c(P,u)})}_?c(_):v.isAppendable()?A():u.truncate(d.length,function(){A()})}):c(null,u)};var Sg=function(f){function c(u,d,g,v,_,A){f.call(this,u,d,g,v,A),this._remoteFdId=_}return f&&(c.__proto__=f),c.prototype=Object.create(f&&f.prototype),c.prototype.constructor=c,c.prototype.getRemoteFdId=function(){return this._remoteFdId},c.prototype.toRemoteArg=function(){return{type:lt.FD,id:this._remoteFdId,data:Pi(this.getBuffer()),stat:Pi(this.getStats().toBuffer()),path:this.getPath(),flag:this.getFlag().getFlagString()}},c.prototype.sync=function(u){this._syncClose("sync",u)},c.prototype.close=function(u){this._syncClose("close",u)},c.prototype._syncClose=function(u,d){var g=this;this.isDirty()?this._fs.syncClose(u,this,function(v){v||g.resetDirty(),d(v)}):d()},c}(E),Dl=function(f){function c(u,d){var g=this;d===void 0&&(d=!0),f.call(this),this._callbackConverter=new Gf,this._isInitialized=!1,this._isReadOnly=!1,this._supportLinks=!1,this._supportProps=!1,this._worker=u,ge(d,c.Name,{worker:"Web Worker instance"}),this._worker.addEventListener("message",function(v){var _,A=v.data;if((_=A)&&typeof _=="object"&&_.hasOwnProperty("browserfsMessage")&&_.browserfsMessage){var P,$=A.args,Q=new Array($.length);for(P=0;P<Q.length;P++)Q[P]=g._argRemote2Local($[P]);g._callbackConverter.toLocalArg(A.cbId).apply(null,Q)}})}return f&&(c.__proto__=f),c.prototype=Object.create(f&&f.prototype),c.prototype.constructor=c,c.Create=function(u,d){var g=new c(u.worker,!1);g.initialize(function(){d(null,g)})},c.isAvailable=function(){return typeof importScripts<"u"||typeof Worker<"u"},c.attachRemoteListener=function(u){var d=new Nl;function g(_,A,P){typeof _=="object"?_ instanceof O?P(null,yg(_)):_ instanceof y?P(null,Al(_)):_ instanceof L?P(null,d.toRemoteArg(_,A[0],A[1],P)):_ instanceof N?P(null,mg(_)):_ instanceof n?P(null,wg(_)):_ instanceof Error?P(null,dg(_)):P(null,_):P(null,_)}function v(_,A){if(!_)return _;if(typeof _=="object"){if(typeof _.type!="number")return _;var P=_;switch(P.type){case lt.CB:var $=_.id;return function(){var Q,fe,pe=arguments,ve=new Array(arguments.length),we=arguments.length;function Ie(ze){we>0&&(we=-1,fe={browserfsMessage:!0,cbId:$,args:[Al(ze)]},u.postMessage(fe))}for(Q=0;Q<arguments.length;Q++)(function(ze,Nt){g(Nt,A,function(rn,Rr){ve[ze]=Rr,rn?Ie(rn):--we==0&&(fe={browserfsMessage:!0,cbId:$,args:ve},u.postMessage(fe))})})(Q,pe[Q]);arguments.length===0&&(fe={browserfsMessage:!0,cbId:$,args:ve},u.postMessage(fe))};case lt.API_ERROR:return hg(P);case lt.STATS:return gg(P);case lt.FILEFLAG:return vg(P);case lt.BUFFER:return _g(P);case lt.ERROR:return pg(P);default:return _}}return _}u.addEventListener("message",function(_){var A,P,$=_.data;if((P=$)&&typeof P=="object"&&P.hasOwnProperty("browserfsMessage")&&P.browserfsMessage){var Q=$.args,fe=new Array(Q.length);switch($.method){case"close":case"sync":A=Q[1],d.applyFdAPIRequest($,function(we){var Ie={browserfsMessage:!0,cbId:A.id,args:we?[Al(we)]:[]};u.postMessage(Ie)});break;case"probe":(function(){var we=te.getRootFS(),Ie=Q[1],ze={type:lt.PROBE,isReadOnly:we.isReadOnly(),supportsLinks:we.supportsLinks(),supportsProps:we.supportsProps()},Nt={browserfsMessage:!0,cbId:Ie.id,args:[ze]};u.postMessage(Nt)})();break;default:for(var pe=0;pe<Q.length;pe++)fe[pe]=v(Q[pe],fe);var ve=te.getRootFS();ve[$.method].apply(ve,fe)}}})},c.prototype.getName=function(){return c.Name},c.prototype.initialize=function(u){var d=this;if(this._isInitialized)u();else{var g={browserfsMessage:!0,method:"probe",args:[this._argLocal2Remote(Ee()),this._callbackConverter.toRemoteArg(function(v){d._isInitialized=!0,d._isReadOnly=v.isReadOnly,d._supportLinks=v.supportsLinks,d._supportProps=v.supportsProps,u()})]};this._worker.postMessage(g)}},c.prototype.isReadOnly=function(){return this._isReadOnly},c.prototype.supportsSynch=function(){return!1},c.prototype.supportsLinks=function(){return this._supportLinks},c.prototype.supportsProps=function(){return this._supportProps},c.prototype.rename=function(u,d,g){this._rpc("rename",arguments)},c.prototype.stat=function(u,d,g){this._rpc("stat",arguments)},c.prototype.open=function(u,d,g,v){this._rpc("open",arguments)},c.prototype.unlink=function(u,d){this._rpc("unlink",arguments)},c.prototype.rmdir=function(u,d){this._rpc("rmdir",arguments)},c.prototype.mkdir=function(u,d,g){this._rpc("mkdir",arguments)},c.prototype.readdir=function(u,d){this._rpc("readdir",arguments)},c.prototype.exists=function(u,d){this._rpc("exists",arguments)},c.prototype.realpath=function(u,d,g){this._rpc("realpath",arguments)},c.prototype.truncate=function(u,d,g){this._rpc("truncate",arguments)},c.prototype.readFile=function(u,d,g,v){this._rpc("readFile",arguments)},c.prototype.writeFile=function(u,d,g,v,_,A){this._rpc("writeFile",arguments)},c.prototype.appendFile=function(u,d,g,v,_,A){this._rpc("appendFile",arguments)},c.prototype.chmod=function(u,d,g,v){this._rpc("chmod",arguments)},c.prototype.chown=function(u,d,g,v,_){this._rpc("chown",arguments)},c.prototype.utimes=function(u,d,g,v){this._rpc("utimes",arguments)},c.prototype.link=function(u,d,g){this._rpc("link",arguments)},c.prototype.symlink=function(u,d,g,v){this._rpc("symlink",arguments)},c.prototype.readlink=function(u,d){this._rpc("readlink",arguments)},c.prototype.syncClose=function(u,d,g){this._worker.postMessage({browserfsMessage:!0,method:u,args:[d.toRemoteArg(),this._callbackConverter.toRemoteArg(g)]})},c.prototype._argRemote2Local=function(u){if(!u)return u;if(typeof u=="object"){if(typeof u.type!="number")return u;var d=u;switch(d.type){case lt.API_ERROR:return hg(d);case lt.FD:var g=d;return new Sg(this,g.path,N.getFileFlag(g.flag),O.fromBuffer(Mi(g.stat)),g.id,Mi(g.data));case lt.STATS:return gg(d);case lt.FILEFLAG:return vg(d);case lt.BUFFER:return _g(d);case lt.ERROR:return pg(d);default:return u}}return u},c.prototype._rpc=function(u,d){for(var g=new Array(d.length),v=0;v<d.length;v++)g[v]=this._argLocal2Remote(d[v]);var _={browserfsMessage:!0,method:u,args:g};this._worker.postMessage(_)},c.prototype._argLocal2Remote=function(u){if(!u)return u;switch(typeof u){case"object":return u instanceof O?yg(u):u instanceof y?Al(u):u instanceof Sg?u.toRemoteArg():u instanceof N?mg(u):u instanceof n?wg(u):u instanceof Error?dg(u):"Unknown argument";case"function":return this._callbackConverter.toRemoteArg(u);default:return u}},c}(K);function bg(f,c,u){var d=new XMLHttpRequest;d.open("HEAD",c,f),d.onreadystatechange=function(g){if(d.readyState===4){if(d.status!==200)return u(new y(d.status,"XHR HEAD error."));try{return u(null,parseInt(d.getResponseHeader("Content-Length")||"-1",10))}catch{return u(new y(a.EIO,"XHR HEAD error: Could not read content-length."))}}},d.send()}Dl.Name="WorkerFS",Dl.Options={worker:{type:"object",description:"The target worker that you want to connect to, or the current worker if in a worker context.",validator:function(f,c){f.postMessage?c():c(new y(a.EINVAL,"option must be a Web Worker instance."))}}};var Eg=function(f,c,u){var d=new XMLHttpRequest;d.open("GET",f,!0);var g=!0;switch(c){case"buffer":d.responseType="arraybuffer";break;case"json":try{d.responseType="json",g=d.responseType==="json"}catch{g=!1}break;default:return u(new y(a.EINVAL,"Invalid download type: "+c))}d.onreadystatechange=function(v){if(d.readyState===4){if(d.status!==200)return u(new y(d.status,"XHR error."));switch(c){case"buffer":return u(null,d.response?n.from(d.response):Ee());case"json":return u(null,g?d.response:JSON.parse(d.responseText))}}},d.send()},jO=M&&typeof Blob<"u"?function(f,c){var u,d,g=new XMLHttpRequest;switch(g.open("GET",f,!1),c){case"buffer":g.responseType="arraybuffer";break;case"json":break;default:throw new y(a.EINVAL,"Invalid download type: "+c)}if(g.onreadystatechange=function(v){if(g.readyState===4)if(g.status===200)switch(c){case"buffer":u=n.from(g.response);break;case"json":u=JSON.parse(g.response)}else d=new y(g.status,"XHR error.")},g.send(),d)throw d;return u}:function(f,c){var u=new XMLHttpRequest;u.open("GET",f,!1);var d=null,g=null;if(u.overrideMimeType("text/plain; charset=x-user-defined"),u.onreadystatechange=function(v){if(u.readyState===4){if(u.status!==200)return void(g=new y(u.status,"XHR error."));switch(c){case"buffer":var _=u.responseText;d=n.alloc(_.length);for(var A=0;A<_.length;A++)d[A]=_.charCodeAt(A);return;case"json":return void(d=JSON.parse(u.responseText))}}},u.send(),g)throw g;return d},Vr=function(){this._index={},this.addPath("/",new pr)};Vr.fromListing=function(f){var c=new Vr,u=new pr;c._index["/"]=u;for(var d=[["",f,u]];d.length>0;){var g=void 0,v=d.pop(),_=v[0],A=v[1],P=v[2];for(var $ in A)if(A.hasOwnProperty($)){var Q=A[$],fe=_+"/"+$;Q?(c._index[fe]=g=new pr,d.push([fe,Q,g])):g=new Ao(new O(b.FILE,-1,365)),P&&(P._ls[$]=g)}}return c},Vr.prototype.fileIterator=function(f){var c=this;for(var u in c._index)if(c._index.hasOwnProperty(u))for(var d=c._index[u],g=0,v=d.getListing();g<v.length;g+=1){var _=v[g],A=d.getItem(_);Ln(A)&&f(A.getData())}},Vr.prototype.addPath=function(f,c){if(!c)throw new Error("Inode must be specified");if(f[0]!=="/")throw new Error("Path must be absolute, got: "+f);if(this._index.hasOwnProperty(f))return this._index[f]===c;var u=this._split_path(f),d=u[0],g=u[1],v=this._index[d];return!(v===void 0&&f!=="/"&&(v=new pr,!this.addPath(d,v))||f!=="/"&&!v.addItem(g,c)||(Gn(c)&&(this._index[f]=c),0))},Vr.prototype.addPathFast=function(f,c){var u=f.lastIndexOf("/"),d=u===0?"/":f.substring(0,u),g=f.substring(u+1),v=this._index[d];return v===void 0&&(v=new pr,this.addPathFast(d,v)),!!v.addItem(g,c)&&(c.isDir()&&(this._index[f]=c),!0)},Vr.prototype.removePath=function(f){var c=this._split_path(f),u=c[0],d=c[1],g=this._index[u];if(g===void 0)return null;var v=g.remItem(d);if(v===null)return null;if(Gn(v)){for(var _=0,A=v.getListing();_<A.length;_+=1){var P=A[_];this.removePath(f+"/"+P)}f!=="/"&&delete this._index[f]}return v},Vr.prototype.ls=function(f){var c=this._index[f];return c===void 0?null:c.getListing()},Vr.prototype.getInode=function(f){var c=this._split_path(f),u=c[0],d=c[1],g=this._index[u];return g===void 0?null:u===f?g:g.getItem(d)},Vr.prototype._split_path=function(f){var c=h.dirname(f);return[c,f.substr(c.length+(c==="/"?0:1))]};var Ao=function(f){this.data=f};Ao.prototype.isFile=function(){return!0},Ao.prototype.isDir=function(){return!1},Ao.prototype.getData=function(){return this.data},Ao.prototype.setData=function(f){this.data=f};var pr=function(f){f===void 0&&(f=null),this.data=f,this._ls={}};function Ln(f){return!!f&&f.isFile()}function Gn(f){return!!f&&f.isDir()}pr.prototype.isFile=function(){return!1},pr.prototype.isDir=function(){return!0},pr.prototype.getData=function(){return this.data},pr.prototype.getStats=function(){return new O(b.DIRECTORY,4096,365)},pr.prototype.getListing=function(){return Object.keys(this._ls)},pr.prototype.getItem=function(f){var c=this._ls[f];return c||null},pr.prototype.addItem=function(f,c){return!(f in this._ls)&&(this._ls[f]=c,!0)},pr.prototype.remItem=function(f){var c=this._ls[f];return c===void 0?null:(delete this._ls[f],c)};var Rl=function(f){function c(u,d,g){d===void 0&&(d=""),g===void 0&&(g=!0),f.call(this),u||(u="index.json"),d.length>0&&d.charAt(d.length-1)!=="/"&&(d+="/"),this.prefixUrl=d;var v=null;if(typeof u=="string"){if(!(v=this._requestFileSync(u,"json")))throw new Error("Unable to find listing at URL: ${listingUrlOrObj}")}else v=u;ge(g,c.Name,{index:typeof u=="string"?u:"file index as an object",baseUrl:d}),this._index=Vr.fromListing(v)}return f&&(c.__proto__=f),c.prototype=Object.create(f&&f.prototype),c.prototype.constructor=c,c.Create=function(u,d){u.index===void 0&&(u.index="index.json"),typeof u.index=="string"?c.FromURL(u.index,d,u.baseUrl,!1):d(null,new c(u.index,u.baseUrl,!1))},c.isAvailable=function(){return typeof XMLHttpRequest<"u"&&XMLHttpRequest!==null},c.FromURL=function(u,d,g,v){g===void 0&&(g=u.slice(0,u.lastIndexOf("/")+1)),v===void 0&&(v=!0),v&&console.warn(`[XmlHttpRequest] XmlHttpRequest.FromURL() is deprecated and will be removed in the next major release. Please use 'XmlHttpRequest.Create({ index: "`+u+'", baseUrl: "'+g+`" }, cb)' instead.`),Eg(u,"json",function(_,A){_?d(_):d(null,new c(A,g,!1))})},c.prototype.empty=function(){this._index.fileIterator(function(u){u.fileData=null})},c.prototype.getName=function(){return c.Name},c.prototype.diskSpace=function(u,d){d(0,0)},c.prototype.isReadOnly=function(){return!0},c.prototype.supportsLinks=function(){return!1},c.prototype.supportsProps=function(){return!1},c.prototype.supportsSynch=function(){return!0},c.prototype.preloadFile=function(u,d){var g=this._index.getInode(u);if(!Ln(g))throw y.EISDIR(u);if(g===null)throw y.ENOENT(u);var v=g.getData();v.size=d.length,v.fileData=d},c.prototype.stat=function(u,d,g){var v,_=this._index.getInode(u);if(_===null)return g(y.ENOENT(u));Ln(_)?(v=_.getData()).size<0?this._requestFileSizeAsync(u,function(A,P){if(A)return g(A);v.size=P,g(null,v.clone())}):g(null,v.clone()):Gn(_)?(v=_.getStats(),g(null,v)):g(y.FileError(a.EINVAL,u))},c.prototype.statSync=function(u,d){var g,v=this._index.getInode(u);if(v===null)throw y.ENOENT(u);if(Ln(v))(g=v.getData()).size<0&&(g.size=this._requestFileSizeSync(u));else{if(!Gn(v))throw y.FileError(a.EINVAL,u);g=v.getStats()}return g},c.prototype.open=function(u,d,g,v){if(d.isWriteable())return v(new y(a.EPERM,u));var _=this,A=this._index.getInode(u);if(A===null)return v(y.ENOENT(u));if(!Ln(A))return v(y.EISDIR(u));var P=A.getData();switch(d.pathExistsAction()){case m.THROW_EXCEPTION:case m.TRUNCATE_FILE:return v(y.EEXIST(u));case m.NOP:if(P.fileData)return v(null,new k(_,u,d,P.clone(),P.fileData));this._requestFileAsync(u,"buffer",function($,Q){return $?v($):(P.size=Q.length,P.fileData=Q,v(null,new k(_,u,d,P.clone(),Q)))});break;default:return v(new y(a.EINVAL,"Invalid FileMode object."))}},c.prototype.openSync=function(u,d,g){if(d.isWriteable())throw new y(a.EPERM,u);var v=this._index.getInode(u);if(v===null)throw y.ENOENT(u);if(!Ln(v))throw y.EISDIR(u);var _=v.getData();switch(d.pathExistsAction()){case m.THROW_EXCEPTION:case m.TRUNCATE_FILE:throw y.EEXIST(u);case m.NOP:if(_.fileData)return new k(this,u,d,_.clone(),_.fileData);var A=this._requestFileSync(u,"buffer");return _.size=A.length,_.fileData=A,new k(this,u,d,_.clone(),A);default:throw new y(a.EINVAL,"Invalid FileMode object.")}},c.prototype.readdir=function(u,d){try{d(null,this.readdirSync(u))}catch(g){d(g)}},c.prototype.readdirSync=function(u){var d=this._index.getInode(u);if(d===null)throw y.ENOENT(u);if(Gn(d))return d.getListing();throw y.ENOTDIR(u)},c.prototype.readFile=function(u,d,g,v){var _=v;this.open(u,g,420,function(A,P){if(A)return v(A);v=function(Q,fe){P.close(function(pe){return Q||(Q=pe),_(Q,fe)})};var $=P.getBuffer();d===null?v(A,se($)):function(Q,fe,pe){try{pe(null,Q.toString(fe))}catch(ve){pe(ve)}}($,d,v)})},c.prototype.readFileSync=function(u,d,g){var v=this.openSync(u,g,420);try{var _=v.getBuffer();return d===null?se(_):_.toString(d)}finally{v.closeSync()}},c.prototype.getXhrPath=function(u){return u.charAt(0)==="/"&&(u=u.slice(1)),this.prefixUrl+u},c.prototype._requestFileAsync=function(u,d,g){Eg(this.getXhrPath(u),d,g)},c.prototype._requestFileSync=function(u,d){return jO(this.getXhrPath(u),d)},c.prototype._requestFileSizeAsync=function(u,d){(function(g,v){bg(!0,g,v)})(this.getXhrPath(u),d)},c.prototype._requestFileSizeSync=function(u){return d=this.getXhrPath(u),g=-1,bg(!1,d,function(v,_){if(v)throw v;g=_}),g;var d,g},c}(K);Rl.Name="XmlHttpRequest",Rl.Options={index:{type:["string","object"],optional:!0,description:"URL to a file index as a JSON file or the file index object itself, generated with the make_xhrfs_index script. Defaults to `index.json`."},baseUrl:{type:"string",optional:!0,description:"Used as the URL prefix for fetched files. Default: Fetch files relative to the index."}};var ji=function(){};ji.str2byte=function(f,c){for(var u=f.length>c.length?c.length:f.length,d=0;d<u;d++){var g=f.charCodeAt(d);if(g>127){var v=ji.extendedChars.indexOf(f.charAt(d));v>-1&&(g=v+128)}c[g]=d}return u},ji.byte2str=function(f){for(var c=new Array(f.length),u=0;u<f.length;u++){var d=f[u];c[u]=d>127?ji.extendedChars[d-128]:String.fromCharCode(d)}return c.join("")},ji.byteLength=function(f){return f.length},ji.extendedChars=["\xC7","\xFC","\xE9","\xE2","\xE4","\xE0","\xE5","\xE7","\xEA","\xEB","\xE8","\xEF","\xEE","\xEC","\xC4","\xC5","\xC9","\xE6","\xC6","\xF4","\xF6","\xF2","\xFB","\xF9","\xFF","\xD6","\xDC","\xF8","\xA3","\xD8","\xD7","\u0192","\xE1","\xED","\xF3","\xFA","\xF1","\xD1","\xAA","\xBA","\xBF","\xAE","\xAC","\xBD","\xBC","\xA1","\xAB","\xBB","_","_","_","\xA6","\xA6","\xC1","\xC2","\xC0","\xA9","\xA6","\xA6","+","+","\xA2","\xA5","+","+","-","-","+","-","+","\xE3","\xC3","+","+","-","-","\xA6","-","+","\xA4","\xF0","\xD0","\xCA","\xCB","\xC8","i","\xCD","\xCE","\xCF","+","+","_","_","\xA6","\xCC","_","\xD3","\xDF","\xD4","\xD2","\xF5","\xD5","\xB5","\xFE","\xDE","\xDA","\xDB","\xD9","\xFD","\xDD","\xAF","\xB4","\xAD","\xB1","_","\xBE","\xB6","\xA7","\xF7","\xB8","\xB0","\xA8","\xB7","\xB9","\xB3","\xB2","_"," "];var Og,Do,UO=r(31).inflateRaw,Tg={};function xg(f,c){return new Date(1980+(c>>9),(c>>5&15)-1,31&c,f>>11,f>>5&63,31&f)}function Cl(f,c,u,d){return d===0?"":c?f.toString("utf8",u,u+d):ji.byte2str(f.slice(u,u+d))}(function(f){f[f.MSDOS=0]="MSDOS",f[f.AMIGA=1]="AMIGA",f[f.OPENVMS=2]="OPENVMS",f[f.UNIX=3]="UNIX",f[f.VM_CMS=4]="VM_CMS",f[f.ATARI_ST=5]="ATARI_ST",f[f.OS2_HPFS=6]="OS2_HPFS",f[f.MAC=7]="MAC",f[f.Z_SYSTEM=8]="Z_SYSTEM",f[f.CP_M=9]="CP_M",f[f.NTFS=10]="NTFS",f[f.MVS=11]="MVS",f[f.VSE=12]="VSE",f[f.ACORN_RISC=13]="ACORN_RISC",f[f.VFAT=14]="VFAT",f[f.ALT_MVS=15]="ALT_MVS",f[f.BEOS=16]="BEOS",f[f.TANDEM=17]="TANDEM",f[f.OS_400=18]="OS_400",f[f.OSX=19]="OSX"})(Og||(Og={})),function(f){f[f.STORED=0]="STORED",f[f.SHRUNK=1]="SHRUNK",f[f.REDUCED_1=2]="REDUCED_1",f[f.REDUCED_2=3]="REDUCED_2",f[f.REDUCED_3=4]="REDUCED_3",f[f.REDUCED_4=5]="REDUCED_4",f[f.IMPLODE=6]="IMPLODE",f[f.DEFLATE=8]="DEFLATE",f[f.DEFLATE64=9]="DEFLATE64",f[f.TERSE_OLD=10]="TERSE_OLD",f[f.BZIP2=12]="BZIP2",f[f.LZMA=14]="LZMA",f[f.TERSE_NEW=18]="TERSE_NEW",f[f.LZ77=19]="LZ77",f[f.WAVPACK=97]="WAVPACK",f[f.PPMD=98]="PPMD"}(Do||(Do={}));var Dr=function(f){if(this.data=f,f.readUInt32LE(0)!==67324752)throw new y(a.EINVAL,"Invalid Zip file: Local file header has invalid signature: "+this.data.readUInt32LE(0))};Dr.prototype.versionNeeded=function(){return this.data.readUInt16LE(4)},Dr.prototype.flags=function(){return this.data.readUInt16LE(6)},Dr.prototype.compressionMethod=function(){return this.data.readUInt16LE(8)},Dr.prototype.lastModFileTime=function(){return xg(this.data.readUInt16LE(10),this.data.readUInt16LE(12))},Dr.prototype.rawLastModFileTime=function(){return this.data.readUInt32LE(10)},Dr.prototype.crc32=function(){return this.data.readUInt32LE(14)},Dr.prototype.fileNameLength=function(){return this.data.readUInt16LE(26)},Dr.prototype.extraFieldLength=function(){return this.data.readUInt16LE(28)},Dr.prototype.fileName=function(){return Cl(this.data,this.useUTF8(),30,this.fileNameLength())},Dr.prototype.extraField=function(){var f=30+this.fileNameLength();return this.data.slice(f,f+this.extraFieldLength())},Dr.prototype.totalSize=function(){return 30+this.fileNameLength()+this.extraFieldLength()},Dr.prototype.useUTF8=function(){return(2048&this.flags())==2048};var Gs=function(f,c,u){this.header=f,this.record=c,this.data=u};Gs.prototype.decompress=function(){var f=this.header.compressionMethod(),c=Tg[f];if(c)return c(this.data,this.record.compressedSize(),this.record.uncompressedSize(),this.record.flag());var u=Do[f];throw u||(u="Unknown: "+f),new y(a.EINVAL,"Invalid compression method on file '"+this.header.fileName()+"': "+u)},Gs.prototype.getHeader=function(){return this.header},Gs.prototype.getRecord=function(){return this.record},Gs.prototype.getRawData=function(){return this.data};var Ue=function(f,c){if(this.zipData=f,this.data=c,this.data.readUInt32LE(0)!==33639248)throw new y(a.EINVAL,"Invalid Zip file: Central directory record has invalid signature: "+this.data.readUInt32LE(0));this._filename=this.produceFilename()};Ue.prototype.versionMadeBy=function(){return this.data.readUInt16LE(4)},Ue.prototype.versionNeeded=function(){return this.data.readUInt16LE(6)},Ue.prototype.flag=function(){return this.data.readUInt16LE(8)},Ue.prototype.compressionMethod=function(){return this.data.readUInt16LE(10)},Ue.prototype.lastModFileTime=function(){return xg(this.data.readUInt16LE(12),this.data.readUInt16LE(14))},Ue.prototype.rawLastModFileTime=function(){return this.data.readUInt32LE(12)},Ue.prototype.crc32=function(){return this.data.readUInt32LE(16)},Ue.prototype.compressedSize=function(){return this.data.readUInt32LE(20)},Ue.prototype.uncompressedSize=function(){return this.data.readUInt32LE(24)},Ue.prototype.fileNameLength=function(){return this.data.readUInt16LE(28)},Ue.prototype.extraFieldLength=function(){return this.data.readUInt16LE(30)},Ue.prototype.fileCommentLength=function(){return this.data.readUInt16LE(32)},Ue.prototype.diskNumberStart=function(){return this.data.readUInt16LE(34)},Ue.prototype.internalAttributes=function(){return this.data.readUInt16LE(36)},Ue.prototype.externalAttributes=function(){return this.data.readUInt32LE(38)},Ue.prototype.headerRelativeOffset=function(){return this.data.readUInt32LE(42)},Ue.prototype.produceFilename=function(){return Cl(this.data,this.useUTF8(),46,this.fileNameLength()).replace(/\\/g,"/")},Ue.prototype.fileName=function(){return this._filename},Ue.prototype.rawFileName=function(){return this.data.slice(46,46+this.fileNameLength())},Ue.prototype.extraField=function(){var f=44+this.fileNameLength();return this.data.slice(f,f+this.extraFieldLength())},Ue.prototype.fileComment=function(){var f=46+this.fileNameLength()+this.extraFieldLength();return Cl(this.data,this.useUTF8(),f,this.fileCommentLength())},Ue.prototype.rawFileComment=function(){var f=46+this.fileNameLength()+this.extraFieldLength();return this.data.slice(f,f+this.fileCommentLength())},Ue.prototype.totalSize=function(){return 46+this.fileNameLength()+this.extraFieldLength()+this.fileCommentLength()},Ue.prototype.isDirectory=function(){var f=this.fileName();return!!(16&this.externalAttributes())||f.charAt(f.length-1)==="/"},Ue.prototype.isFile=function(){return!this.isDirectory()},Ue.prototype.useUTF8=function(){return(2048&this.flag())==2048},Ue.prototype.isEncrypted=function(){return(1&this.flag())==1},Ue.prototype.getFileData=function(){var f=this.headerRelativeOffset(),c=new Dr(this.zipData.slice(f));return new Gs(c,this,this.zipData.slice(f+c.totalSize()))},Ue.prototype.getData=function(){return this.getFileData().decompress()},Ue.prototype.getRawData=function(){return this.getFileData().getRawData()},Ue.prototype.getStats=function(){return new O(b.FILE,this.uncompressedSize(),365,new Date,this.lastModFileTime())};var _n=function(f){if(this.data=f,this.data.readUInt32LE(0)!==101010256)throw new y(a.EINVAL,"Invalid Zip file: End of central directory record has invalid signature: "+this.data.readUInt32LE(0))};_n.prototype.diskNumber=function(){return this.data.readUInt16LE(4)},_n.prototype.cdDiskNumber=function(){return this.data.readUInt16LE(6)},_n.prototype.cdDiskEntryCount=function(){return this.data.readUInt16LE(8)},_n.prototype.cdTotalEntryCount=function(){return this.data.readUInt16LE(10)},_n.prototype.cdSize=function(){return this.data.readUInt32LE(12)},_n.prototype.cdOffset=function(){return this.data.readUInt32LE(16)},_n.prototype.cdZipCommentLength=function(){return this.data.readUInt16LE(20)},_n.prototype.cdZipComment=function(){return Cl(this.data,!0,22,this.cdZipCommentLength())},_n.prototype.rawCdZipComment=function(){return this.data.slice(22,22+this.cdZipCommentLength())};var kg=function(f,c,u,d){this.index=f,this.directoryEntries=c,this.eocd=u,this.data=d},Ui=function(f){function c(u,d,g){d===void 0&&(d=""),g===void 0&&(g=!0),f.call(this),this.name=d,this._index=new Vr,this._directoryEntries=[],this._eocd=null,ge(g,c.Name,{zipData:"zip data as a Buffer",name:d}),u instanceof kg?(this._index=u.index,this._directoryEntries=u.directoryEntries,this._eocd=u.eocd,this.data=u.data):(this.data=u,this.populateIndex())}return f&&(c.__proto__=f),c.prototype=Object.create(f&&f.prototype),c.prototype.constructor=c,c.Create=function(u,d){try{c.computeIndex(u.zipData,function(g){var v=new c(g,u.name,!1);d(null,v)},!1)}catch(g){d(g)}},c.isAvailable=function(){return!0},c.RegisterDecompressionMethod=function(u,d){Tg[u]=d},c.computeIndex=function(u,d,g){g===void 0&&(g=!0),g&&console.warn("[ZipFS] ZipFS.computeIndex is now deprecated, and will be removed in the next major release. Please update your code to use 'ZipFS.Create({ zipData: zip file as a Buffer}, cb)' instead.");var v=new Vr,_=c.getEOCD(u);if(_.diskNumber()!==_.cdDiskNumber())throw new y(a.EINVAL,"ZipFS does not support spanned zip files.");var A=_.cdOffset();if(A===4294967295)throw new y(a.EINVAL,"ZipFS does not support Zip64.");var P=A+_.cdSize();c.computeIndexResponsive(u,v,A,P,d,[],_)},c.getEOCD=function(u){for(var d=Math.min(65557,u.length-1),g=22;g<d;g++)if(u.readUInt32LE(u.length-g)===101010256)return new _n(u.slice(u.length-g));throw new y(a.EINVAL,"Invalid ZIP file: Could not locate End of Central Directory signature.")},c.addToIndex=function(u,d){var g=u.fileName();if(g.charAt(0)==="/")throw new Error("WHY IS THIS ABSOLUTE");g.charAt(g.length-1)==="/"&&(g=g.substr(0,g.length-1)),u.isDirectory()?d.addPathFast("/"+g,new pr(u)):d.addPathFast("/"+g,new Ao(u))},c.computeIndexResponsive=function(u,d,g,v,_,A,P){if(g<v){for(var $=0;$++<200&&g<v;){var Q=new Ue(u,u.slice(g));c.addToIndex(Q,d),g+=Q.totalSize(),A.push(Q)}Hf(function(){c.computeIndexResponsive(u,d,g,v,_,A,P)})}else _(new kg(d,A,P,u))},c.prototype.getName=function(){return c.Name+(this.name!==""?" "+this.name:"")},c.prototype.getCentralDirectoryEntry=function(u){var d=this._index.getInode(u);if(d===null)throw y.ENOENT(u);if(Ln(d)||Gn(d))return d.getData();throw y.EPERM("Invalid inode: "+d)},c.prototype.getCentralDirectoryEntryAt=function(u){var d=this._directoryEntries[u];if(!d)throw new RangeError("Invalid directory index: "+u+".");return d},c.prototype.getNumberOfCentralDirectoryEntries=function(){return this._directoryEntries.length},c.prototype.getEndOfCentralDirectory=function(){return this._eocd},c.prototype.diskSpace=function(u,d){d(this.data.length,0)},c.prototype.isReadOnly=function(){return!0},c.prototype.supportsLinks=function(){return!1},c.prototype.supportsProps=function(){return!1},c.prototype.supportsSynch=function(){return!0},c.prototype.statSync=function(u,d){var g,v=this._index.getInode(u);if(v===null)throw y.ENOENT(u);if(Ln(v))g=v.getData().getStats();else{if(!Gn(v))throw new y(a.EINVAL,"Invalid inode.");g=v.getStats()}return g},c.prototype.openSync=function(u,d,g){if(d.isWriteable())throw new y(a.EPERM,u);var v=this._index.getInode(u);if(!v)throw y.ENOENT(u);if(!Ln(v))throw y.EISDIR(u);var _=v.getData(),A=_.getStats();switch(d.pathExistsAction()){case m.THROW_EXCEPTION:case m.TRUNCATE_FILE:throw y.EEXIST(u);case m.NOP:return new k(this,u,d,A,_.getData());default:throw new y(a.EINVAL,"Invalid FileMode object.")}},c.prototype.readdirSync=function(u){var d=this._index.getInode(u);if(d){if(Gn(d))return d.getListing();throw y.ENOTDIR(u)}throw y.ENOENT(u)},c.prototype.readFileSync=function(u,d,g){var v=this.openSync(u,g,420);try{var _=v.getBuffer();return d===null?se(_):_.toString(d)}finally{v.closeSync()}},c.prototype.populateIndex=function(){var u=this,d=this._eocd=c.getEOCD(this.data);if(d.diskNumber()!==d.cdDiskNumber())throw new y(a.EINVAL,"ZipFS does not support spanned zip files.");var g=d.cdOffset();if(g===4294967295)throw new y(a.EINVAL,"ZipFS does not support Zip64.");for(var v=g+d.cdSize();g<v;){var _=new Ue(u.data,u.data.slice(g));g+=_.totalSize(),c.addToIndex(_,u._index),u._directoryEntries.push(_)}},c}(Se);function yr(f,c,u){return f.toString("ascii",c,c+u).trim()}function Jf(f,c,u){if(u===1)return String.fromCharCode(f[c]);for(var d=Math.floor(u/2),g=new Array(d),v=0;v<d;v++){var _=c+(v<<1);g[v]=String.fromCharCode(f[_+1]|f[_]<<8)}return g.join("")}function Sn(f,c){var u=parseInt(yr(f,c,4),10),d=parseInt(yr(f,c+4,2),10),g=parseInt(yr(f,c+6,2),10),v=parseInt(yr(f,c+8,2),10),_=parseInt(yr(f,c+10,2),10),A=parseInt(yr(f,c+12,2),10),P=parseInt(yr(f,c+14,2),10);return new Date(u,d,g,v,_,A,100*P)}function Bi(f,c){var u=f[c],d=f[c+1],g=f[c+2],v=f[c+3],_=f[c+4],A=f[c+5];return new Date(u,d-1,g,v,_,A)}function BO(f,c){var u=f.slice(c),d=new It(u);switch(d.signatureWord()){case 17221:return new Rg(u);case 20548:return new WO(u);case 21328:return new Cg(u);case 21332:return new Fg(u);case 17746:return new Lg(u);case 17747:return new qO(u);case 20568:return new Mg(u);case 20558:return new $O(u);case 21324:return new Yf(u);case 20045:return new jg(u);case 17228:return new Kf(u);case 20556:return new HO(u);case 21061:return new Ug(u);case 21574:return new Bg(u);case 21318:return new GO(u);case 21074:return new Pg(u);default:return d}}function Ig(f,c,u,d){u-=4;for(var g=new Array;c<u;){var v=BO(f,c),_=v.length();if(_===0)return g;if(c+=_,v instanceof Fg)break;v instanceof Rg?g=g.concat(v.getEntries(d)):g.push(v)}return g}Ui.Name="ZipFS",Ui.Options={zipData:{type:"object",description:"The zip file as a Buffer object.",validator:Ae},name:{type:"string",optional:!0,description:"The name of the zip file (optional)."}},Ui.CompressionMethod=Do,Ui.RegisterDecompressionMethod(Do.DEFLATE,function(f,c,u){return ce(UO(f.slice(0,c),{chunkSize:u}))}),Ui.RegisterDecompressionMethod(Do.STORED,function(f,c,u){return se(f,0,u)});var Ro=function(f){this._data=f};Ro.prototype.type=function(){return this._data[0]},Ro.prototype.standardIdentifier=function(){return yr(this._data,1,5)},Ro.prototype.version=function(){return this._data[6]},Ro.prototype.data=function(){return this._data.slice(7,2048)};var Ng=function(f){function c(u){f.call(this,u),this._root=null}return f&&(c.__proto__=f),c.prototype=Object.create(f&&f.prototype),c.prototype.constructor=c,c.prototype.systemIdentifier=function(){return this._getString32(8)},c.prototype.volumeIdentifier=function(){return this._getString32(40)},c.prototype.volumeSpaceSize=function(){return this._data.readUInt32LE(80)},c.prototype.volumeSetSize=function(){return this._data.readUInt16LE(120)},c.prototype.volumeSequenceNumber=function(){return this._data.readUInt16LE(124)},c.prototype.logicalBlockSize=function(){return this._data.readUInt16LE(128)},c.prototype.pathTableSize=function(){return this._data.readUInt32LE(132)},c.prototype.locationOfTypeLPathTable=function(){return this._data.readUInt32LE(140)},c.prototype.locationOfOptionalTypeLPathTable=function(){return this._data.readUInt32LE(144)},c.prototype.locationOfTypeMPathTable=function(){return this._data.readUInt32BE(148)},c.prototype.locationOfOptionalTypeMPathTable=function(){return this._data.readUInt32BE(152)},c.prototype.rootDirectoryEntry=function(u){return this._root===null&&(this._root=this._constructRootDirectoryRecord(this._data.slice(156)),this._root.rootCheckForRockRidge(u)),this._root},c.prototype.volumeSetIdentifier=function(){return this._getString(190,128)},c.prototype.publisherIdentifier=function(){return this._getString(318,128)},c.prototype.dataPreparerIdentifier=function(){return this._getString(446,128)},c.prototype.applicationIdentifier=function(){return this._getString(574,128)},c.prototype.copyrightFileIdentifier=function(){return this._getString(702,38)},c.prototype.abstractFileIdentifier=function(){return this._getString(740,36)},c.prototype.bibliographicFileIdentifier=function(){return this._getString(776,37)},c.prototype.volumeCreationDate=function(){return Sn(this._data,813)},c.prototype.volumeModificationDate=function(){return Sn(this._data,830)},c.prototype.volumeExpirationDate=function(){return Sn(this._data,847)},c.prototype.volumeEffectiveDate=function(){return Sn(this._data,864)},c.prototype.fileStructureVersion=function(){return this._data[881]},c.prototype.applicationUsed=function(){return this._data.slice(883,1395)},c.prototype.reserved=function(){return this._data.slice(1395,2048)},c.prototype._getString32=function(u){return this._getString(u,32)},c}(Ro),zO=function(f){function c(u){if(f.call(this,u),this.type()!==1)throw new y(a.EIO,"Invalid primary volume descriptor.")}return f&&(c.__proto__=f),c.prototype=Object.create(f&&f.prototype),c.prototype.constructor=c,c.prototype.name=function(){return"ISO9660"},c.prototype._constructRootDirectoryRecord=function(u){return new Ag(u,-1)},c.prototype._getString=function(u,d){return this._getString(u,d)},c}(Ng),VO=function(f){function c(u){if(f.call(this,u),this.type()!==2)throw new y(a.EIO,"Invalid supplementary volume descriptor.");var d=this.escapeSequence(),g=d[2];if(d[0]!==37||d[1]!==47||g!==64&&g!==67&&g!==69)throw new y(a.EIO,"Unrecognized escape sequence for SupplementaryVolumeDescriptor: "+d.toString())}return f&&(c.__proto__=f),c.prototype=Object.create(f&&f.prototype),c.prototype.constructor=c,c.prototype.name=function(){return"Joliet"},c.prototype.escapeSequence=function(){return this._data.slice(88,120)},c.prototype._constructRootDirectoryRecord=function(u){return new Dg(u,-1)},c.prototype._getString=function(u,d){return Jf(this._data,u,d)},c}(Ng),it=function(f,c){this._suEntries=null,this._fileOrDir=null,this._data=f,this._rockRidgeOffset=c};it.prototype.hasRockRidge=function(){return this._rockRidgeOffset>-1},it.prototype.getRockRidgeOffset=function(){return this._rockRidgeOffset},it.prototype.rootCheckForRockRidge=function(f){var c=this.getDirectory(f);this._rockRidgeOffset=c.getDotEntry(f)._getRockRidgeOffset(f),this._rockRidgeOffset>-1&&(this._fileOrDir=null)},it.prototype.length=function(){return this._data[0]},it.prototype.extendedAttributeRecordLength=function(){return this._data[1]},it.prototype.lba=function(){return 2048*this._data.readUInt32LE(2)},it.prototype.dataLength=function(){return this._data.readUInt32LE(10)},it.prototype.recordingDate=function(){return Bi(this._data,18)},it.prototype.fileFlags=function(){return this._data[25]},it.prototype.fileUnitSize=function(){return this._data[26]},it.prototype.interleaveGapSize=function(){return this._data[27]},it.prototype.volumeSequenceNumber=function(){return this._data.readUInt16LE(28)},it.prototype.identifier=function(){return this._getString(33,this._data[32])},it.prototype.fileName=function(f){if(this.hasRockRidge()){var c=this._rockRidgeFilename(f);if(c!==null)return c}var u=this.identifier();if(this.isDirectory(f))return u;var d=u.indexOf(";");return d===-1?u:u[d-1]==="."?u.slice(0,d-1):u.slice(0,d)},it.prototype.isDirectory=function(f){var c=!!(2&this.fileFlags());return!c&&this.hasRockRidge()&&(c=this.getSUEntries(f).filter(function(u){return u instanceof Kf}).length>0),c},it.prototype.isSymlink=function(f){return this.hasRockRidge()&&this.getSUEntries(f).filter(function(c){return c instanceof Yf}).length>0},it.prototype.getSymlinkPath=function(f){for(var c="",u=this.getSUEntries(f),d=this._getGetString(),g=0,v=u;g<v.length;g+=1){var _=v[g];if(_ instanceof Yf){for(var A=0,P=_.componentRecords();A<P.length;A+=1){var $=P[A],Q=$.flags();2&Q?c+="./":4&Q?c+="../":8&Q?c+="/":(c+=$.content(d),1&Q||(c+="/"))}if(!_.continueFlag())break}}return c.length>1&&c[c.length-1]==="/"?c.slice(0,c.length-1):c},it.prototype.getFile=function(f){if(this.isDirectory(f))throw new Error("Tried to get a File from a directory.");return this._fileOrDir===null&&(this._fileOrDir=f.slice(this.lba(),this.lba()+this.dataLength())),this._fileOrDir},it.prototype.getDirectory=function(f){if(!this.isDirectory(f))throw new Error("Tried to get a Directory from a file.");return this._fileOrDir===null&&(this._fileOrDir=this._constructDirectory(f)),this._fileOrDir},it.prototype.getSUEntries=function(f){return this._suEntries||this._constructSUEntries(f),this._suEntries},it.prototype._rockRidgeFilename=function(f){var c=this.getSUEntries(f).filter(function(A){return A instanceof jg});if(c.length===0||6&c[0].flags())return null;for(var u="",d=this._getGetString(),g=0,v=c;g<v.length;g+=1){var _=v[g];if(u+=_.name(d),!(1&_.flags()))break}return u},it.prototype._constructSUEntries=function(f){var c=33+this._data[32];c%2==1&&c++,c+=this._rockRidgeOffset,this._suEntries=Ig(this._data,c,this.length(),f)},it.prototype._getRockRidgeOffset=function(f){this._rockRidgeOffset=0;var c=this.getSUEntries(f);if(c.length>0){var u=c[0];if(u instanceof Cg&&u.checkBytesPass())for(var d=1;d<c.length;d++){var g=c[d];if(g instanceof Pg||g instanceof Lg&&g.extensionIdentifier()==="IEEE_P1282")return u.bytesSkipped()}}return this._rockRidgeOffset=-1,-1};var Ag=function(f){function c(u,d){f.call(this,u,d)}return f&&(c.__proto__=f),c.prototype=Object.create(f&&f.prototype),c.prototype.constructor=c,c.prototype._getString=function(u,d){return yr(this._data,u,d)},c.prototype._constructDirectory=function(u){return new JO(this,u)},c.prototype._getGetString=function(){return yr},c}(it),Dg=function(f){function c(u,d){f.call(this,u,d)}return f&&(c.__proto__=f),c.prototype=Object.create(f&&f.prototype),c.prototype.constructor=c,c.prototype._getString=function(u,d){return Jf(this._data,u,d)},c.prototype._constructDirectory=function(u){return new YO(this,u)},c.prototype._getGetString=function(){return Jf},c}(it),It=function(f){this._data=f};It.prototype.signatureWord=function(){return this._data.readUInt16BE(0)},It.prototype.signatureWordString=function(){return yr(this._data,0,2)},It.prototype.length=function(){return this._data[2]},It.prototype.suVersion=function(){return this._data[3]};var Rg=function(f){function c(u){f.call(this,u),this._entries=null}return f&&(c.__proto__=f),c.prototype=Object.create(f&&f.prototype),c.prototype.constructor=c,c.prototype.continuationLba=function(){return this._data.readUInt32LE(4)},c.prototype.continuationLbaOffset=function(){return this._data.readUInt32LE(12)},c.prototype.continuationLength=function(){return this._data.readUInt32LE(20)},c.prototype.getEntries=function(u){if(!this._entries){var d=2048*this.continuationLba()+this.continuationLbaOffset();this._entries=Ig(u,d,this.continuationLength(),u)}return this._entries},c}(It),WO=function(f){function c(u){f.call(this,u)}return f&&(c.__proto__=f),c.prototype=Object.create(f&&f.prototype),c.prototype.constructor=c,c}(It),Cg=function(f){function c(u){f.call(this,u)}return f&&(c.__proto__=f),c.prototype=Object.create(f&&f.prototype),c.prototype.constructor=c,c.prototype.checkBytesPass=function(){return this._data[4]===190&&this._data[5]===239},c.prototype.bytesSkipped=function(){return this._data[6]},c}(It),Fg=function(f){function c(u){f.call(this,u)}return f&&(c.__proto__=f),c.prototype=Object.create(f&&f.prototype),c.prototype.constructor=c,c}(It),Lg=function(f){function c(u){f.call(this,u)}return f&&(c.__proto__=f),c.prototype=Object.create(f&&f.prototype),c.prototype.constructor=c,c.prototype.identifierLength=function(){return this._data[4]},c.prototype.descriptorLength=function(){return this._data[5]},c.prototype.sourceLength=function(){return this._data[6]},c.prototype.extensionVersion=function(){return this._data[7]},c.prototype.extensionIdentifier=function(){return yr(this._data,8,this.identifierLength())},c.prototype.extensionDescriptor=function(){return yr(this._data,8+this.identifierLength(),this.descriptorLength())},c.prototype.extensionSource=function(){return yr(this._data,8+this.identifierLength()+this.descriptorLength(),this.sourceLength())},c}(It),qO=function(f){function c(u){f.call(this,u)}return f&&(c.__proto__=f),c.prototype=Object.create(f&&f.prototype),c.prototype.constructor=c,c.prototype.extensionSequence=function(){return this._data[4]},c}(It),Pg=function(f){function c(u){f.call(this,u)}return f&&(c.__proto__=f),c.prototype=Object.create(f&&f.prototype),c.prototype.constructor=c,c}(It),Mg=function(f){function c(u){f.call(this,u)}return f&&(c.__proto__=f),c.prototype=Object.create(f&&f.prototype),c.prototype.constructor=c,c.prototype.mode=function(){return this._data.readUInt32LE(4)},c.prototype.fileLinks=function(){return this._data.readUInt32LE(12)},c.prototype.uid=function(){return this._data.readUInt32LE(20)},c.prototype.gid=function(){return this._data.readUInt32LE(28)},c.prototype.inode=function(){return this._data.readUInt32LE(36)},c}(It),$O=function(f){function c(u){f.call(this,u)}return f&&(c.__proto__=f),c.prototype=Object.create(f&&f.prototype),c.prototype.constructor=c,c.prototype.devTHigh=function(){return this._data.readUInt32LE(4)},c.prototype.devTLow=function(){return this._data.readUInt32LE(12)},c}(It),Yf=function(f){function c(u){f.call(this,u)}return f&&(c.__proto__=f),c.prototype=Object.create(f&&f.prototype),c.prototype.constructor=c,c.prototype.flags=function(){return this._data[4]},c.prototype.continueFlag=function(){return 1&this.flags()},c.prototype.componentRecords=function(){for(var u=new Array,d=5;d<this.length();){var g=new Js(this._data.slice(d));u.push(g),d+=g.length()}return u},c}(It),Js=function(f){this._data=f};Js.prototype.flags=function(){return this._data[0]},Js.prototype.length=function(){return 2+this.componentLength()},Js.prototype.componentLength=function(){return this._data[1]},Js.prototype.content=function(f){return f(this._data,2,this.componentLength())};var jg=function(f){function c(u){f.call(this,u)}return f&&(c.__proto__=f),c.prototype=Object.create(f&&f.prototype),c.prototype.constructor=c,c.prototype.flags=function(){return this._data[4]},c.prototype.name=function(u){return u(this._data,5,this.length()-5)},c}(It),Kf=function(f){function c(u){f.call(this,u)}return f&&(c.__proto__=f),c.prototype=Object.create(f&&f.prototype),c.prototype.constructor=c,c.prototype.childDirectoryLba=function(){return this._data.readUInt32LE(4)},c}(It),HO=function(f){function c(u){f.call(this,u)}return f&&(c.__proto__=f),c.prototype=Object.create(f&&f.prototype),c.prototype.constructor=c,c.prototype.parentDirectoryLba=function(){return this._data.readUInt32LE(4)},c}(It),Ug=function(f){function c(u){f.call(this,u)}return f&&(c.__proto__=f),c.prototype=Object.create(f&&f.prototype),c.prototype.constructor=c,c}(It),Bg=function(f){function c(u){f.call(this,u)}return f&&(c.__proto__=f),c.prototype=Object.create(f&&f.prototype),c.prototype.constructor=c,c.prototype.flags=function(){return this._data[4]},c.prototype.creation=function(){return 1&this.flags()?this._longFormDates()?Sn(this._data,5):Bi(this._data,5):null},c.prototype.modify=function(){if(2&this.flags()){var u=1&this.flags()?1:0;return this._longFormDates?Sn(this._data,5+17*u):Bi(this._data,5+7*u)}return null},c.prototype.access=function(){if(4&this.flags()){var u=1&this.flags()?1:0;return u+=2&this.flags()?1:0,this._longFormDates?Sn(this._data,5+17*u):Bi(this._data,5+7*u)}return null},c.prototype.backup=function(){if(16&this.flags()){var u=1&this.flags()?1:0;return u+=2&this.flags()?1:0,u+=4&this.flags()?1:0,this._longFormDates?Sn(this._data,5+17*u):Bi(this._data,5+7*u)}return null},c.prototype.expiration=function(){if(32&this.flags()){var u=1&this.flags()?1:0;return u+=2&this.flags()?1:0,u+=4&this.flags()?1:0,u+=16&this.flags()?1:0,this._longFormDates?Sn(this._data,5+17*u):Bi(this._data,5+7*u)}return null},c.prototype.effective=function(){if(64&this.flags()){var u=1&this.flags()?1:0;return u+=2&this.flags()?1:0,u+=4&this.flags()?1:0,u+=16&this.flags()?1:0,u+=32&this.flags()?1:0,this._longFormDates?Sn(this._data,5+17*u):Bi(this._data,5+7*u)}return null},c.prototype._longFormDates=function(){return!!this.flags()},c}(It),GO=function(f){function c(u){f.call(this,u)}return f&&(c.__proto__=f),c.prototype=Object.create(f&&f.prototype),c.prototype.constructor=c,c.prototype.virtualSizeHigh=function(){return this._data.readUInt32LE(4)},c.prototype.virtualSizeLow=function(){return this._data.readUInt32LE(12)},c.prototype.tableDepth=function(){return this._data[20]},c}(It),Ys=function(f,c){var u=this;this._fileList=[],this._fileMap={},this._record=f;var d=f.lba(),g=d+f.dataLength();for(2&f.fileFlags()||(d=2048*f.getSUEntries(c).filter(function(A){return A instanceof Kf})[0].childDirectoryLba(),g=1/0);d<g;)if(c[d]!==0){var v=u._constructDirectoryRecord(c.slice(d)),_=v.fileName(c);_!=="\0"&&_!==""?v.hasRockRidge()&&v.getSUEntries(c).filter(function(A){return A instanceof Ug}).length!==0||(u._fileMap[_]=v,u._fileList.push(_)):g===1/0&&(g=d+v.dataLength()),d+=v.length()}else d++};Ys.prototype.getRecord=function(f){return this._fileMap[f]},Ys.prototype.getFileList=function(){return this._fileList},Ys.prototype.getDotEntry=function(f){return this._constructDirectoryRecord(f.slice(this._record.lba()))};var JO=function(f){function c(u,d){f.call(this,u,d)}return f&&(c.__proto__=f),c.prototype=Object.create(f&&f.prototype),c.prototype.constructor=c,c.prototype._constructDirectoryRecord=function(u){return new Ag(u,this._record.getRockRidgeOffset())},c}(Ys),YO=function(f){function c(u,d){f.call(this,u,d)}return f&&(c.__proto__=f),c.prototype=Object.create(f&&f.prototype),c.prototype.constructor=c,c.prototype._constructDirectoryRecord=function(u){return new Dg(u,this._record.getRockRidgeOffset())},c}(Ys),Fl=function(f){function c(u,d,g){var v=this;d===void 0&&(d=""),g===void 0&&(g=!0),f.call(this),this._data=u,ge(g,c.Name,{data:"ISO data as a Buffer",name:d});for(var _=!1,A=32768,P=new Array;!_;){var $=u.slice(A);switch(new Ro($).type()){case 1:P.push(new zO($));break;case 2:P.push(new VO($));break;case 255:_=!0}A+=2048}if(P.length===0)throw new y(a.EIO,"Unable to find a suitable volume descriptor.");P.forEach(function(Q){v._pvd&&v._pvd.type()===2||(v._pvd=Q)}),this._root=this._pvd.rootDirectoryEntry(u),this._name=d}return f&&(c.__proto__=f),c.prototype=Object.create(f&&f.prototype),c.prototype.constructor=c,c.Create=function(u,d){var g,v;try{g=new c(u.data,u.name,!1)}catch(_){_=_}finally{d(void 0,g)}},c.isAvailable=function(){return!0},c.prototype.getName=function(){var u="IsoFS"+this._name+(this._pvd?"-"+this._pvd.name():"");return this._root&&this._root.hasRockRidge()&&(u+="-RockRidge"),u},c.prototype.diskSpace=function(u,d){d(this._data.length,0)},c.prototype.isReadOnly=function(){return!0},c.prototype.supportsLinks=function(){return!1},c.prototype.supportsProps=function(){return!1},c.prototype.supportsSynch=function(){return!0},c.prototype.statSync=function(u,d){var g=this._getDirectoryRecord(u);if(g===null)throw y.ENOENT(u);return this._getStats(u,g)},c.prototype.openSync=function(u,d,g){if(d.isWriteable())throw new y(a.EPERM,u);var v=this._getDirectoryRecord(u);if(!v)throw y.ENOENT(u);if(v.isSymlink(this._data))return this.openSync(h.resolve(u,v.getSymlinkPath(this._data)),d,g);if(v.isDirectory(this._data))throw y.EISDIR(u);var _=v.getFile(this._data),A=this._getStats(u,v);switch(d.pathExistsAction()){case m.THROW_EXCEPTION:case m.TRUNCATE_FILE:throw y.EEXIST(u);case m.NOP:return new k(this,u,d,A,_);default:throw new y(a.EINVAL,"Invalid FileMode object.")}},c.prototype.readdirSync=function(u){var d=this._getDirectoryRecord(u);if(d){if(d.isDirectory(this._data))return d.getDirectory(this._data).getFileList().slice(0);throw y.ENOTDIR(u)}throw y.ENOENT(u)},c.prototype.readFileSync=function(u,d,g){var v=this.openSync(u,g,420);try{var _=v.getBuffer();return d===null?se(_):_.toString(d)}finally{v.closeSync()}},c.prototype._getDirectoryRecord=function(u){if(u==="/")return this._root;for(var d=u.split("/").slice(1),g=this._root,v=0,_=d;v<_.length;v+=1){var A=_[v];if(!g.isDirectory(this._data)||!(g=g.getDirectory(this._data).getRecord(A)))return null}return g},c.prototype._getStats=function(u,d){if(d.isSymlink(this._data)){var g=h.resolve(u,d.getSymlinkPath(this._data)),v=this._getDirectoryRecord(g);return v?this._getStats(g,v):null}var _=d.dataLength(),A=365,P=d.recordingDate(),$=P,Q=P,fe=P;if(d.hasRockRidge())for(var pe=0,ve=d.getSUEntries(this._data);pe<ve.length;pe+=1){var we=ve[pe];if(we instanceof Mg)A=we.mode();else if(we instanceof Bg){var Ie=we.flags();4&Ie&&($=we.access()),2&Ie&&(Q=we.modify()),1&Ie&&(fe=we.creation())}}return A&=365,new O(d.isDirectory(this._data)?b.DIRECTORY:b.FILE,_,A,$,Q,fe)},c}(Se);Fl.Name="IsoFS",Fl.Options={data:{type:"object",description:"The ISO file in a buffer",validator:Ae}},[ee,El,Ol,xo,Tl,ko,zs,Fl,Ws,Io,Hs,Dl,Rl,Ui].forEach(function(f){var c=f.Create;f.Create=function(u,d){var g=typeof u=="function",v=g?u:d,_=g?{}:u;T(f,_,function(A){A?v(A):c.call(f,_,v)})}});var zg,Ll={AsyncMirror:ee,Dropbox:El,Emscripten:Ol,FolderAdapter:xo,HTML5FS:Tl,InMemory:ko,IndexedDB:zs,IsoFS:Fl,LocalStorage:Ws,MountableFileSystem:Io,OverlayFS:Hs,WorkerFS:Dl,XmlHttpRequest:Rl,ZipFS:Ui};function Vg(f){switch(f){case"fs":return te;case"path":return h;case"buffer":return l;case"process":return s;case"bfs_utils":return D;default:return Ll[f]}}function Wg(f){return te.initialize(f)}function Zf(f,c){var u=f.fs;if(!u)return c(new y(a.EPERM,'Missing "fs" property on configuration object.'));var d=f.options,g=0,v=!1;function _(){if(!v){v=!0;var P=Ll[u];P?P.Create(d,c):c(new y(a.EPERM,"File system "+u+" is not available in BrowserFS."))}}if(d!==null&&typeof d=="object"){var A=!1;Object.keys(d).filter(function(P){return P!=="fs"}).forEach(function(P){var $=d[P];$!==null&&typeof $=="object"&&$.fs&&(g++,Zf($,function(Q,fe){if(g--,Q){if(v)return;v=!0,c(Q)}else d[P]=fe,g===0&&A&&_()}))}),A=!0}g===0&&_()}s.initializeTTYs&&s.initializeTTYs(),"ab".substr(-1)!=="b"&&(String.prototype.substr=(zg=String.prototype.substr,function(f,c){return f<0&&(f=this.length+f),zg.call(this,f,c)})),typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&(Uint8Array.prototype.slice||(Uint8Array.prototype.slice=function(f,c){return f===void 0&&(f=0),c===void 0&&(c=this.length),f<0&&(f=this.length+f)<0&&(f=0),c<0&&(c=this.length+c)<0&&(c=0),c<f&&(c=f),new Uint8Array(this.buffer,this.byteOffset+f,c-f)})),e.install=function(f){f.Buffer=n,f.process=s;var c=f.require?f.require:null;f.require=function(u){var d=Vg(u);return d||c.apply(null,Array.prototype.slice.call(arguments,0))}},e.registerFileSystem=function(f,c){Ll[f]=c},e.BFSRequire=Vg,e.initialize=Wg,e.configure=function(f,c){Zf(f,function(u,d){d?(Wg(d),c()):c(u)})},e.getFileSystem=Zf,e.EmscriptenFS=Z,e.FileSystem=Ll,e.Errors=w,e.setImmediate=Hf}).call(e,r(1),function(){return this}(),r(5)(t),r(6))},function(t,e,r){t.exports=r(2).Buffer},function(t,e,r){(function(l){var i=r(3),o=r(4);e.Buffer=l,e.SlowBuffer=function(T){return+T!=T&&(T=0),l.alloc(+T)},e.INSPECT_MAX_BYTES=50;var s=2147483647;function a(T){if(T>s)throw new RangeError("Invalid typed array length");var D=new Uint8Array(T);return D.__proto__=l.prototype,D}function l(T,D,j){if(typeof T=="number"){if(typeof D=="string")throw new Error("If encoding is specified then the first argument must be a string");return m(T)}return h(T,D,j)}function h(T,D,j){if(typeof T=="number")throw new TypeError('"value" argument must not be a number');return ye(T)?function(H,Z,K){if(Z<0||H.byteLength<Z)throw new RangeError("'offset' is out of bounds");if(H.byteLength<Z+(K||0))throw new RangeError("'length' is out of bounds");var Se;return(Se=Z===void 0&&K===void 0?new Uint8Array(H):K===void 0?new Uint8Array(H,Z):new Uint8Array(H,Z,K)).__proto__=l.prototype,Se}(T,D,j):typeof T=="string"?function(H,Z){if(typeof Z=="string"&&Z!==""||(Z="utf8"),!l.isEncoding(Z))throw new TypeError('"encoding" must be a valid string encoding');var K=0|b(H,Z),Se=a(K),L=Se.write(H,Z);return L!==K&&(Se=Se.slice(0,L)),Se}(T,D):function(H){if(l.isBuffer(H)){var Z=0|w(H.length),K=a(Z);return K.length===0||H.copy(K,0,0,Z),K}if(H){if(Ee(H)||"length"in H)return typeof H.length!="number"||Ae(H.length)?a(0):y(H);if(H.type==="Buffer"&&Array.isArray(H.data))return y(H.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(T)}function p(T){if(typeof T!="number")throw new TypeError('"size" argument must be a number');if(T<0)throw new RangeError('"size" argument must not be negative')}function m(T){return p(T),a(T<0?0:0|w(T))}function y(T){for(var D=T.length<0?0:0|w(T.length),j=a(D),H=0;H<D;H+=1)j[H]=255&T[H];return j}function w(T){if(T>=s)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s.toString(16)+" bytes");return 0|T}function b(T,D){if(l.isBuffer(T))return T.length;if(Ee(T)||ye(T))return T.byteLength;typeof T!="string"&&(T=""+T);var j=T.length;if(j===0)return 0;for(var H=!1;;)switch(D){case"ascii":case"latin1":case"binary":return j;case"utf8":case"utf-8":case void 0:return oe(T).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*j;case"hex":return j>>>1;case"base64":return ne(T).length;default:if(H)return oe(T).length;D=(""+D).toLowerCase(),H=!0}}function N(T,D,j){var H=!1;if((D===void 0||D<0)&&(D=0),D>this.length||((j===void 0||j>this.length)&&(j=this.length),j<=0)||(j>>>=0)<=(D>>>=0))return"";for(T||(T="utf8");;)switch(T){case"hex":return ge(this,D,j);case"utf8":case"utf-8":return te(this,D,j);case"ascii":return ue(this,D,j);case"latin1":case"binary":return ae(this,D,j);case"base64":return W(this,D,j);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return M(this,D,j);default:if(H)throw new TypeError("Unknown encoding: "+T);T=(T+"").toLowerCase(),H=!0}}function O(T,D,j){var H=T[D];T[D]=T[j],T[j]=H}function I(T,D,j,H,Z){if(T.length===0)return-1;if(typeof j=="string"?(H=j,j=0):j>2147483647?j=2147483647:j<-2147483648&&(j=-2147483648),Ae(j=+j)&&(j=Z?0:T.length-1),j<0&&(j=T.length+j),j>=T.length){if(Z)return-1;j=T.length-1}else if(j<0){if(!Z)return-1;j=0}if(typeof D=="string"&&(D=l.from(D,H)),l.isBuffer(D))return D.length===0?-1:R(T,D,j,H,Z);if(typeof D=="number")return D&=255,typeof Uint8Array.prototype.indexOf=="function"?Z?Uint8Array.prototype.indexOf.call(T,D,j):Uint8Array.prototype.lastIndexOf.call(T,D,j):R(T,[D],j,H,Z);throw new TypeError("val must be string, number or Buffer")}function R(T,D,j,H,Z){var K,Se=1,L=T.length,E=D.length;if(H!==void 0&&((H=String(H).toLowerCase())==="ucs2"||H==="ucs-2"||H==="utf16le"||H==="utf-16le")){if(T.length<2||D.length<2)return-1;Se=2,L/=2,E/=2,j/=2}function k(de,Le){return Se===1?de[Le]:de.readUInt16BE(Le*Se)}if(Z){var U=-1;for(K=j;K<L;K++)if(k(T,K)===k(D,U===-1?0:K-U)){if(U===-1&&(U=K),K-U+1===E)return U*Se}else U!==-1&&(K-=K-U),U=-1}else for(j+E>L&&(j=L-E),K=j;K>=0;K--){for(var ee=!0,he=0;he<E;he++)if(k(T,K+he)!==k(D,he)){ee=!1;break}if(ee)return K}return-1}function J(T,D,j,H){j=Number(j)||0;var Z=T.length-j;H?(H=Number(H))>Z&&(H=Z):H=Z;var K=D.length;if(K%2!=0)throw new TypeError("Invalid hex string");H>K/2&&(H=K/2);for(var Se=0;Se<H;++Se){var L=parseInt(D.substr(2*Se,2),16);if(Ae(L))return Se;T[j+Se]=L}return Se}function q(T,D,j,H){return se(oe(D,T.length-j),T,j,H)}function G(T,D,j,H){return se(function(Z){for(var K=[],Se=0;Se<Z.length;++Se)K.push(255&Z.charCodeAt(Se));return K}(D),T,j,H)}function F(T,D,j,H){return G(T,D,j,H)}function z(T,D,j,H){return se(ne(D),T,j,H)}function S(T,D,j,H){return se(function(Z,K){for(var Se,L,E,k=[],U=0;U<Z.length&&!((K-=2)<0);++U)L=(Se=Z.charCodeAt(U))>>8,E=Se%256,k.push(E),k.push(L);return k}(D,T.length-j),T,j,H)}function W(T,D,j){return D===0&&j===T.length?i.fromByteArray(T):i.fromByteArray(T.slice(D,j))}function te(T,D,j){j=Math.min(T.length,j);for(var H=[],Z=D;Z<j;){var K,Se,L,E,k=T[Z],U=null,ee=k>239?4:k>223?3:k>191?2:1;if(Z+ee<=j)switch(ee){case 1:k<128&&(U=k);break;case 2:(192&(K=T[Z+1]))==128&&(E=(31&k)<<6|63&K)>127&&(U=E);break;case 3:K=T[Z+1],Se=T[Z+2],(192&K)==128&&(192&Se)==128&&(E=(15&k)<<12|(63&K)<<6|63&Se)>2047&&(E<55296||E>57343)&&(U=E);break;case 4:K=T[Z+1],Se=T[Z+2],L=T[Z+3],(192&K)==128&&(192&Se)==128&&(192&L)==128&&(E=(15&k)<<18|(63&K)<<12|(63&Se)<<6|63&L)>65535&&E<1114112&&(U=E)}U===null?(U=65533,ee=1):U>65535&&(U-=65536,H.push(U>>>10&1023|55296),U=56320|1023&U),H.push(U),Z+=ee}return function(he){var de=he.length;if(de<=X)return String.fromCharCode.apply(String,he);for(var Le="",Re=0;Re<de;)Le+=String.fromCharCode.apply(String,he.slice(Re,Re+=X));return Le}(H)}e.kMaxLength=s,l.TYPED_ARRAY_SUPPORT=function(){try{var T=new Uint8Array(1);return T.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},T.foo()===42}catch{return!1}}(),l.TYPED_ARRAY_SUPPORT||typeof console>"u"||typeof console.error!="function"||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),typeof Symbol<"u"&&Symbol.species&&l[Symbol.species]===l&&Object.defineProperty(l,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),l.poolSize=8192,l.from=function(T,D,j){return h(T,D,j)},l.prototype.__proto__=Uint8Array.prototype,l.__proto__=Uint8Array,l.alloc=function(T,D,j){return function(H,Z,K){return p(H),H<=0?a(H):Z!==void 0?typeof K=="string"?a(H).fill(Z,K):a(H).fill(Z):a(H)}(T,D,j)},l.allocUnsafe=function(T){return m(T)},l.allocUnsafeSlow=function(T){return m(T)},l.isBuffer=function(T){return T!=null&&T._isBuffer===!0},l.compare=function(T,D){if(!l.isBuffer(T)||!l.isBuffer(D))throw new TypeError("Arguments must be Buffers");if(T===D)return 0;for(var j=T.length,H=D.length,Z=0,K=Math.min(j,H);Z<K;++Z)if(T[Z]!==D[Z]){j=T[Z],H=D[Z];break}return j<H?-1:H<j?1:0},l.isEncoding=function(T){switch(String(T).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(T,D){if(!Array.isArray(T))throw new TypeError('"list" argument must be an Array of Buffers');if(T.length===0)return l.alloc(0);var j;if(D===void 0)for(D=0,j=0;j<T.length;++j)D+=T[j].length;var H=l.allocUnsafe(D),Z=0;for(j=0;j<T.length;++j){var K=T[j];if(!l.isBuffer(K))throw new TypeError('"list" argument must be an Array of Buffers');K.copy(H,Z),Z+=K.length}return H},l.byteLength=b,l.prototype._isBuffer=!0,l.prototype.swap16=function(){var T=this.length;if(T%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var D=0;D<T;D+=2)O(this,D,D+1);return this},l.prototype.swap32=function(){var T=this.length;if(T%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var D=0;D<T;D+=4)O(this,D,D+3),O(this,D+1,D+2);return this},l.prototype.swap64=function(){var T=this.length;if(T%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var D=0;D<T;D+=8)O(this,D,D+7),O(this,D+1,D+6),O(this,D+2,D+5),O(this,D+3,D+4);return this},l.prototype.toString=function(){var T=this.length;return T===0?"":arguments.length===0?te(this,0,T):N.apply(this,arguments)},l.prototype.equals=function(T){if(!l.isBuffer(T))throw new TypeError("Argument must be a Buffer");return this===T||l.compare(this,T)===0},l.prototype.inspect=function(){var T="",D=e.INSPECT_MAX_BYTES;return this.length>0&&(T=this.toString("hex",0,D).match(/.{2}/g).join(" "),this.length>D&&(T+=" ... ")),"<Buffer "+T+">"},l.prototype.compare=function(T,D,j,H,Z){if(!l.isBuffer(T))throw new TypeError("Argument must be a Buffer");if(D===void 0&&(D=0),j===void 0&&(j=T?T.length:0),H===void 0&&(H=0),Z===void 0&&(Z=this.length),D<0||j>T.length||H<0||Z>this.length)throw new RangeError("out of range index");if(H>=Z&&D>=j)return 0;if(H>=Z)return-1;if(D>=j)return 1;if(this===T)return 0;for(var K=(Z>>>=0)-(H>>>=0),Se=(j>>>=0)-(D>>>=0),L=Math.min(K,Se),E=this.slice(H,Z),k=T.slice(D,j),U=0;U<L;++U)if(E[U]!==k[U]){K=E[U],Se=k[U];break}return K<Se?-1:Se<K?1:0},l.prototype.includes=function(T,D,j){return this.indexOf(T,D,j)!==-1},l.prototype.indexOf=function(T,D,j){return I(this,T,D,j,!0)},l.prototype.lastIndexOf=function(T,D,j){return I(this,T,D,j,!1)},l.prototype.write=function(T,D,j,H){if(D===void 0)H="utf8",j=this.length,D=0;else if(j===void 0&&typeof D=="string")H=D,j=this.length,D=0;else{if(!isFinite(D))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");D>>>=0,isFinite(j)?(j>>>=0,H===void 0&&(H="utf8")):(H=j,j=void 0)}var Z=this.length-D;if((j===void 0||j>Z)&&(j=Z),T.length>0&&(j<0||D<0)||D>this.length)throw new RangeError("Attempt to write outside buffer bounds");H||(H="utf8");for(var K=!1;;)switch(H){case"hex":return J(this,T,D,j);case"utf8":case"utf-8":return q(this,T,D,j);case"ascii":return G(this,T,D,j);case"latin1":case"binary":return F(this,T,D,j);case"base64":return z(this,T,D,j);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return S(this,T,D,j);default:if(K)throw new TypeError("Unknown encoding: "+H);H=(""+H).toLowerCase(),K=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var X=4096;function ue(T,D,j){var H="";j=Math.min(T.length,j);for(var Z=D;Z<j;++Z)H+=String.fromCharCode(127&T[Z]);return H}function ae(T,D,j){var H="";j=Math.min(T.length,j);for(var Z=D;Z<j;++Z)H+=String.fromCharCode(T[Z]);return H}function ge(T,D,j){var H,Z=T.length;(!D||D<0)&&(D=0),(!j||j<0||j>Z)&&(j=Z);for(var K="",Se=D;Se<j;++Se)K+=(H=T[Se])<16?"0"+H.toString(16):H.toString(16);return K}function M(T,D,j){for(var H=T.slice(D,j),Z="",K=0;K<H.length;K+=2)Z+=String.fromCharCode(H[K]+256*H[K+1]);return Z}function C(T,D,j){if(T%1!=0||T<0)throw new RangeError("offset is not uint");if(T+D>j)throw new RangeError("Trying to access beyond buffer length")}function ie(T,D,j,H,Z,K){if(!l.isBuffer(T))throw new TypeError('"buffer" argument must be a Buffer instance');if(D>Z||D<K)throw new RangeError('"value" argument is out of bounds');if(j+H>T.length)throw new RangeError("Index out of range")}function B(T,D,j,H,Z,K){if(j+H>T.length)throw new RangeError("Index out of range");if(j<0)throw new RangeError("Index out of range")}function V(T,D,j,H,Z){return D=+D,j>>>=0,Z||B(T,0,j,4),o.write(T,D,j,H,23,4),j+4}function Y(T,D,j,H,Z){return D=+D,j>>>=0,Z||B(T,0,j,8),o.write(T,D,j,H,52,8),j+8}l.prototype.slice=function(T,D){var j=this.length;(T=~~T)<0?(T+=j)<0&&(T=0):T>j&&(T=j),(D=D===void 0?j:~~D)<0?(D+=j)<0&&(D=0):D>j&&(D=j),D<T&&(D=T);var H=this.subarray(T,D);return H.__proto__=l.prototype,H},l.prototype.readUIntLE=function(T,D,j){T>>>=0,D>>>=0,j||C(T,D,this.length);for(var H=this[T],Z=1,K=0;++K<D&&(Z*=256);)H+=this[T+K]*Z;return H},l.prototype.readUIntBE=function(T,D,j){T>>>=0,D>>>=0,j||C(T,D,this.length);for(var H=this[T+--D],Z=1;D>0&&(Z*=256);)H+=this[T+--D]*Z;return H},l.prototype.readUInt8=function(T,D){return T>>>=0,D||C(T,1,this.length),this[T]},l.prototype.readUInt16LE=function(T,D){return T>>>=0,D||C(T,2,this.length),this[T]|this[T+1]<<8},l.prototype.readUInt16BE=function(T,D){return T>>>=0,D||C(T,2,this.length),this[T]<<8|this[T+1]},l.prototype.readUInt32LE=function(T,D){return T>>>=0,D||C(T,4,this.length),(this[T]|this[T+1]<<8|this[T+2]<<16)+16777216*this[T+3]},l.prototype.readUInt32BE=function(T,D){return T>>>=0,D||C(T,4,this.length),16777216*this[T]+(this[T+1]<<16|this[T+2]<<8|this[T+3])},l.prototype.readIntLE=function(T,D,j){T>>>=0,D>>>=0,j||C(T,D,this.length);for(var H=this[T],Z=1,K=0;++K<D&&(Z*=256);)H+=this[T+K]*Z;return H>=(Z*=128)&&(H-=Math.pow(2,8*D)),H},l.prototype.readIntBE=function(T,D,j){T>>>=0,D>>>=0,j||C(T,D,this.length);for(var H=D,Z=1,K=this[T+--H];H>0&&(Z*=256);)K+=this[T+--H]*Z;return K>=(Z*=128)&&(K-=Math.pow(2,8*D)),K},l.prototype.readInt8=function(T,D){return T>>>=0,D||C(T,1,this.length),128&this[T]?-1*(255-this[T]+1):this[T]},l.prototype.readInt16LE=function(T,D){T>>>=0,D||C(T,2,this.length);var j=this[T]|this[T+1]<<8;return 32768&j?4294901760|j:j},l.prototype.readInt16BE=function(T,D){T>>>=0,D||C(T,2,this.length);var j=this[T+1]|this[T]<<8;return 32768&j?4294901760|j:j},l.prototype.readInt32LE=function(T,D){return T>>>=0,D||C(T,4,this.length),this[T]|this[T+1]<<8|this[T+2]<<16|this[T+3]<<24},l.prototype.readInt32BE=function(T,D){return T>>>=0,D||C(T,4,this.length),this[T]<<24|this[T+1]<<16|this[T+2]<<8|this[T+3]},l.prototype.readFloatLE=function(T,D){return T>>>=0,D||C(T,4,this.length),o.read(this,T,!0,23,4)},l.prototype.readFloatBE=function(T,D){return T>>>=0,D||C(T,4,this.length),o.read(this,T,!1,23,4)},l.prototype.readDoubleLE=function(T,D){return T>>>=0,D||C(T,8,this.length),o.read(this,T,!0,52,8)},l.prototype.readDoubleBE=function(T,D){return T>>>=0,D||C(T,8,this.length),o.read(this,T,!1,52,8)},l.prototype.writeUIntLE=function(T,D,j,H){T=+T,D>>>=0,j>>>=0,H||ie(this,T,D,j,Math.pow(2,8*j)-1,0);var Z=1,K=0;for(this[D]=255&T;++K<j&&(Z*=256);)this[D+K]=T/Z&255;return D+j},l.prototype.writeUIntBE=function(T,D,j,H){T=+T,D>>>=0,j>>>=0,H||ie(this,T,D,j,Math.pow(2,8*j)-1,0);var Z=j-1,K=1;for(this[D+Z]=255&T;--Z>=0&&(K*=256);)this[D+Z]=T/K&255;return D+j},l.prototype.writeUInt8=function(T,D,j){return T=+T,D>>>=0,j||ie(this,T,D,1,255,0),this[D]=255&T,D+1},l.prototype.writeUInt16LE=function(T,D,j){return T=+T,D>>>=0,j||ie(this,T,D,2,65535,0),this[D]=255&T,this[D+1]=T>>>8,D+2},l.prototype.writeUInt16BE=function(T,D,j){return T=+T,D>>>=0,j||ie(this,T,D,2,65535,0),this[D]=T>>>8,this[D+1]=255&T,D+2},l.prototype.writeUInt32LE=function(T,D,j){return T=+T,D>>>=0,j||ie(this,T,D,4,4294967295,0),this[D+3]=T>>>24,this[D+2]=T>>>16,this[D+1]=T>>>8,this[D]=255&T,D+4},l.prototype.writeUInt32BE=function(T,D,j){return T=+T,D>>>=0,j||ie(this,T,D,4,4294967295,0),this[D]=T>>>24,this[D+1]=T>>>16,this[D+2]=T>>>8,this[D+3]=255&T,D+4},l.prototype.writeIntLE=function(T,D,j,H){if(T=+T,D>>>=0,!H){var Z=Math.pow(2,8*j-1);ie(this,T,D,j,Z-1,-Z)}var K=0,Se=1,L=0;for(this[D]=255&T;++K<j&&(Se*=256);)T<0&&L===0&&this[D+K-1]!==0&&(L=1),this[D+K]=(T/Se>>0)-L&255;return D+j},l.prototype.writeIntBE=function(T,D,j,H){if(T=+T,D>>>=0,!H){var Z=Math.pow(2,8*j-1);ie(this,T,D,j,Z-1,-Z)}var K=j-1,Se=1,L=0;for(this[D+K]=255&T;--K>=0&&(Se*=256);)T<0&&L===0&&this[D+K+1]!==0&&(L=1),this[D+K]=(T/Se>>0)-L&255;return D+j},l.prototype.writeInt8=function(T,D,j){return T=+T,D>>>=0,j||ie(this,T,D,1,127,-128),T<0&&(T=255+T+1),this[D]=255&T,D+1},l.prototype.writeInt16LE=function(T,D,j){return T=+T,D>>>=0,j||ie(this,T,D,2,32767,-32768),this[D]=255&T,this[D+1]=T>>>8,D+2},l.prototype.writeInt16BE=function(T,D,j){return T=+T,D>>>=0,j||ie(this,T,D,2,32767,-32768),this[D]=T>>>8,this[D+1]=255&T,D+2},l.prototype.writeInt32LE=function(T,D,j){return T=+T,D>>>=0,j||ie(this,T,D,4,2147483647,-2147483648),this[D]=255&T,this[D+1]=T>>>8,this[D+2]=T>>>16,this[D+3]=T>>>24,D+4},l.prototype.writeInt32BE=function(T,D,j){return T=+T,D>>>=0,j||ie(this,T,D,4,2147483647,-2147483648),T<0&&(T=4294967295+T+1),this[D]=T>>>24,this[D+1]=T>>>16,this[D+2]=T>>>8,this[D+3]=255&T,D+4},l.prototype.writeFloatLE=function(T,D,j){return V(this,T,D,!0,j)},l.prototype.writeFloatBE=function(T,D,j){return V(this,T,D,!1,j)},l.prototype.writeDoubleLE=function(T,D,j){return Y(this,T,D,!0,j)},l.prototype.writeDoubleBE=function(T,D,j){return Y(this,T,D,!1,j)},l.prototype.copy=function(T,D,j,H){if(j||(j=0),H||H===0||(H=this.length),D>=T.length&&(D=T.length),D||(D=0),H>0&&H<j&&(H=j),H===j||T.length===0||this.length===0)return 0;if(D<0)throw new RangeError("targetStart out of bounds");if(j<0||j>=this.length)throw new RangeError("sourceStart out of bounds");if(H<0)throw new RangeError("sourceEnd out of bounds");H>this.length&&(H=this.length),T.length-D<H-j&&(H=T.length-D+j);var Z,K=H-j;if(this===T&&j<D&&D<H)for(Z=K-1;Z>=0;--Z)T[Z+D]=this[Z+j];else if(K<1e3)for(Z=0;Z<K;++Z)T[Z+D]=this[Z+j];else Uint8Array.prototype.set.call(T,this.subarray(j,j+K),D);return K},l.prototype.fill=function(T,D,j,H){if(typeof T=="string"){if(typeof D=="string"?(H=D,D=0,j=this.length):typeof j=="string"&&(H=j,j=this.length),T.length===1){var Z=T.charCodeAt(0);Z<256&&(T=Z)}if(H!==void 0&&typeof H!="string")throw new TypeError("encoding must be a string");if(typeof H=="string"&&!l.isEncoding(H))throw new TypeError("Unknown encoding: "+H)}else typeof T=="number"&&(T&=255);if(D<0||this.length<D||this.length<j)throw new RangeError("Out of range index");if(j<=D)return this;var K;if(D>>>=0,j=j===void 0?this.length:j>>>0,T||(T=0),typeof T=="number")for(K=D;K<j;++K)this[K]=T;else{var Se=l.isBuffer(T)?T:new l(T,H),L=Se.length;for(K=0;K<j-D;++K)this[K+D]=Se[K%L]}return this};var ce=/[^+/0-9A-Za-z-_]/g;function oe(T,D){var j;D=D||1/0;for(var H=T.length,Z=null,K=[],Se=0;Se<H;++Se){if((j=T.charCodeAt(Se))>55295&&j<57344){if(!Z){if(j>56319){(D-=3)>-1&&K.push(239,191,189);continue}if(Se+1===H){(D-=3)>-1&&K.push(239,191,189);continue}Z=j;continue}if(j<56320){(D-=3)>-1&&K.push(239,191,189),Z=j;continue}j=65536+(Z-55296<<10|j-56320)}else Z&&(D-=3)>-1&&K.push(239,191,189);if(Z=null,j<128){if((D-=1)<0)break;K.push(j)}else if(j<2048){if((D-=2)<0)break;K.push(j>>6|192,63&j|128)}else if(j<65536){if((D-=3)<0)break;K.push(j>>12|224,j>>6&63|128,63&j|128)}else{if(!(j<1114112))throw new Error("Invalid code point");if((D-=4)<0)break;K.push(j>>18|240,j>>12&63|128,j>>6&63|128,63&j|128)}}return K}function ne(T){return i.toByteArray(function(D){if((D=D.trim().replace(ce,"")).length<2)return"";for(;D.length%4!=0;)D+="=";return D}(T))}function se(T,D,j,H){for(var Z=0;Z<H&&!(Z+j>=D.length||Z>=T.length);++Z)D[Z+j]=T[Z];return Z}function ye(T){return T instanceof ArrayBuffer||T!=null&&T.constructor!=null&&T.constructor.name==="ArrayBuffer"&&typeof T.byteLength=="number"}function Ee(T){return typeof ArrayBuffer.isView=="function"&&ArrayBuffer.isView(T)}function Ae(T){return T!=T}}).call(e,r(1))},function(t,e){e.byteLength=function(p){return 3*p.length/4-l(p)},e.toByteArray=function(p){var m,y,w,b,N,O,I=p.length;N=l(p),O=new i(3*I/4-N),w=N>0?I-4:I;var R=0;for(m=0,y=0;m<w;m+=4,y+=3)b=n[p.charCodeAt(m)]<<18|n[p.charCodeAt(m+1)]<<12|n[p.charCodeAt(m+2)]<<6|n[p.charCodeAt(m+3)],O[R++]=b>>16&255,O[R++]=b>>8&255,O[R++]=255&b;return N===2?(b=n[p.charCodeAt(m)]<<2|n[p.charCodeAt(m+1)]>>4,O[R++]=255&b):N===1&&(b=n[p.charCodeAt(m)]<<10|n[p.charCodeAt(m+1)]<<4|n[p.charCodeAt(m+2)]>>2,O[R++]=b>>8&255,O[R++]=255&b),O},e.fromByteArray=function(p){for(var m,y=p.length,w=y%3,b="",N=[],O=16383,I=0,R=y-w;I<R;I+=O)N.push(h(p,I,I+O>R?R:I+O));return w===1?(m=p[y-1],b+=r[m>>2],b+=r[m<<4&63],b+="=="):w===2&&(m=(p[y-2]<<8)+p[y-1],b+=r[m>>10],b+=r[m>>4&63],b+=r[m<<2&63],b+="="),N.push(b),N.join("")};for(var r=[],n=[],i=typeof Uint8Array<"u"?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,a=o.length;s<a;++s)r[s]=o[s],n[o.charCodeAt(s)]=s;function l(p){var m=p.length;if(m%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return p[m-2]==="="?2:p[m-1]==="="?1:0}function h(p,m,y){for(var w,b,N=[],O=m;O<y;O+=3)w=(p[O]<<16)+(p[O+1]<<8)+p[O+2],N.push(r[(b=w)>>18&63]+r[b>>12&63]+r[b>>6&63]+r[63&b]);return N.join("")}n["-".charCodeAt(0)]=62,n["_".charCodeAt(0)]=63},function(t,e){e.read=function(r,n,i,o,s){var a,l,h=8*s-o-1,p=(1<<h)-1,m=p>>1,y=-7,w=i?s-1:0,b=i?-1:1,N=r[n+w];for(w+=b,a=N&(1<<-y)-1,N>>=-y,y+=h;y>0;a=256*a+r[n+w],w+=b,y-=8);for(l=a&(1<<-y)-1,a>>=-y,y+=o;y>0;l=256*l+r[n+w],w+=b,y-=8);if(a===0)a=1-m;else{if(a===p)return l?NaN:1/0*(N?-1:1);l+=Math.pow(2,o),a-=m}return(N?-1:1)*l*Math.pow(2,a-o)},e.write=function(r,n,i,o,s,a){var l,h,p,m=8*a-s-1,y=(1<<m)-1,w=y>>1,b=s===23?Math.pow(2,-24)-Math.pow(2,-77):0,N=o?0:a-1,O=o?1:-1,I=n<0||n===0&&1/n<0?1:0;for(n=Math.abs(n),isNaN(n)||n===1/0?(h=isNaN(n)?1:0,l=y):(l=Math.floor(Math.log(n)/Math.LN2),n*(p=Math.pow(2,-l))<1&&(l--,p*=2),(n+=l+w>=1?b/p:b*Math.pow(2,1-w))*p>=2&&(l++,p/=2),l+w>=y?(h=0,l=y):l+w>=1?(h=(n*p-1)*Math.pow(2,s),l+=w):(h=n*Math.pow(2,w-1)*Math.pow(2,s),l=0));s>=8;r[i+N]=255&h,N+=O,h/=256,s-=8);for(l=l<<s|h,m+=s;m>0;r[i+N]=255&l,N+=O,l/=256,m-=8);r[i+N-O]|=128*I}},function(t,e){t.exports=function(r){return r.webpackPolyfill||(r.deprecate=function(){},r.paths=[],r.children=[],r.webpackPolyfill=1),r}},function(t,e,r){var n=new(r(7)),i={};function o(a){i[a]||(typeof n[a]=="function"?i[a]=function(){return n[a].apply(n,arguments)}:i[a]=n[a])}for(var s in n)o(s);i.initializeTTYs=function(){n.stdin===null&&(n.initializeTTYs(),i.stdin=n.stdin,i.stdout=n.stdout,i.stderr=n.stderr)},n.nextTick(function(){i.initializeTTYs()}),t.exports=i},function(t,e,r){(function(n){var i=this&&this.__extends||function(p,m){for(var y in m)m.hasOwnProperty(y)&&(p[y]=m[y]);function w(){this.constructor=p}p.prototype=m===null?Object.create(m):(w.prototype=m.prototype,new w)},o=r(8),s=null,a=function(){function p(m,y){this.fun=m,this.array=y}return p.prototype.run=function(){this.fun.apply(null,this.array)},p}(),l=function(){function p(){this._queue=[],this._draining=!1,this._currentQueue=null,this._queueIndex=-1}return p.prototype.push=function(m){var y=this;this._queue.push(m)!==1||this._draining||setTimeout(function(){return y._drainQueue()},0)},p.prototype._cleanUpNextTick=function(){this._draining=!1,this._currentQueue&&this._currentQueue.length?this._queue=this._currentQueue.concat(this._queue):this._queueIndex=-1,this._queue.length&&this._drainQueue()},p.prototype._drainQueue=function(){var m=this;if(!this._draining){var y=setTimeout(function(){return m._cleanUpNextTick()});this._draining=!0;for(var w=this._queue.length;w;){for(this._currentQueue=this._queue,this._queue=[];++this._queueIndex<w;)this._currentQueue&&this._currentQueue[this._queueIndex].run();this._queueIndex=-1,w=this._queue.length}this._currentQueue=null,this._draining=!1,clearTimeout(y)}},p}(),h=function(p){function m(){p.apply(this,arguments),this.startTime=Date.now(),this._cwd="/",this.platform="browser",this.argv=[],this.execArgv=[],this.stdout=null,this.stderr=null,this.stdin=null,this.domain=null,this._queue=new l,this.execPath=n,this.env={},this.exitCode=0,this._gid=1,this._uid=1,this.version="v5.0",this.versions={http_parser:"0.0",node:"5.0",v8:"0.0",uv:"0.0",zlib:"0.0",ares:"0.0",icu:"0.0",modules:"0",openssl:"0.0"},this.config={target_defaults:{cflags:[],default_configuration:"Release",defines:[],include_dirs:[],libraries:[]},variables:{clang:0,host_arch:"x32",node_install_npm:!1,node_install_waf:!1,node_prefix:"",node_shared_cares:!1,node_shared_http_parser:!1,node_shared_libuv:!1,node_shared_zlib:!1,node_shared_v8:!1,node_use_dtrace:!1,node_use_etw:!1,node_use_openssl:!1,node_shared_openssl:!1,strict_aliasing:!1,target_arch:"x32",v8_use_snapshot:!1,v8_no_strict_aliasing:0,visibility:""}},this.pid=1e3*Math.random()|0,this.title="node",this.arch="x32",this._mask=18,this.connected=void 0}return i(m,p),m.prototype.chdir=function(y){s===null&&(s=r(9)),this._cwd=s.resolve(y)},m.prototype.cwd=function(){return this._cwd},m.prototype.uptime=function(){return(Date.now()-this.startTime)/1e3|0},m.prototype.nextTick=function(y){for(var w=[],b=1;b<arguments.length;b++)w[b-1]=arguments[b];this._queue.push(new a(y,w))},m.prototype.abort=function(){this.emit("abort")},m.prototype.exit=function(y){this.exitCode=y,this.emit("exit",[y])},m.prototype.getgid=function(){return this._gid},m.prototype.setgid=function(y){this._gid=typeof y=="number"?y:1},m.prototype.getuid=function(){return this._uid},m.prototype.setuid=function(y){this._uid=typeof y=="number"?y:1},m.prototype.kill=function(y,w){this.emit("kill",[y,w])},m.prototype.memoryUsage=function(){return{rss:0,heapTotal:0,heapUsed:0}},m.prototype.umask=function(y){y===void 0&&(y=this._mask);var w=this._mask;return this._mask=y,this.emit("umask",[y]),w},m.prototype.hrtime=function(){var y,w=(y=typeof performance<"u"?performance.now():Date.now?Date.now():new Date().getTime())/1e3|0;return[w,y=1e6*(y-=1e3*w)|0]},m.prototype.initializeTTYs=function(){if(this.stdout===null){var y=r(10);this.stdout=new y,this.stderr=new y,this.stdin=new y}},m.prototype.disconnect=function(){},m}(o.EventEmitter);t.exports=h}).call(e,"/")},function(t,e){function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function n(s){return typeof s=="function"}function i(s){return typeof s=="object"&&s!==null}function o(s){return s===void 0}t.exports=r,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(s){if(typeof s!="number"||s<0||isNaN(s))throw TypeError("n must be a positive number");return this._maxListeners=s,this},r.prototype.emit=function(s){var a,l,h,p,m,y;if(this._events||(this._events={}),s==="error"&&(!this._events.error||i(this._events.error)&&!this._events.error.length)){if((a=arguments[1])instanceof Error)throw a;var w=new Error('Uncaught, unspecified "error" event. ('+a+")");throw w.context=a,w}if(o(l=this._events[s]))return!1;if(n(l))switch(arguments.length){case 1:l.call(this);break;case 2:l.call(this,arguments[1]);break;case 3:l.call(this,arguments[1],arguments[2]);break;default:p=Array.prototype.slice.call(arguments,1),l.apply(this,p)}else if(i(l))for(p=Array.prototype.slice.call(arguments,1),h=(y=l.slice()).length,m=0;m<h;m++)y[m].apply(this,p);return!0},r.prototype.addListener=function(s,a){var l;if(!n(a))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",s,n(a.listener)?a.listener:a),this._events[s]?i(this._events[s])?this._events[s].push(a):this._events[s]=[this._events[s],a]:this._events[s]=a,i(this._events[s])&&!this._events[s].warned&&(l=o(this._maxListeners)?r.defaultMaxListeners:this._maxListeners)&&l>0&&this._events[s].length>l&&(this._events[s].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[s].length),typeof console.trace=="function"&&console.trace()),this},r.prototype.on=r.prototype.addListener,r.prototype.once=function(s,a){if(!n(a))throw TypeError("listener must be a function");var l=!1;function h(){this.removeListener(s,h),l||(l=!0,a.apply(this,arguments))}return h.listener=a,this.on(s,h),this},r.prototype.removeListener=function(s,a){var l,h,p,m;if(!n(a))throw TypeError("listener must be a function");if(!this._events||!this._events[s])return this;if(p=(l=this._events[s]).length,h=-1,l===a||n(l.listener)&&l.listener===a)delete this._events[s],this._events.removeListener&&this.emit("removeListener",s,a);else if(i(l)){for(m=p;m-- >0;)if(l[m]===a||l[m].listener&&l[m].listener===a){h=m;break}if(h<0)return this;l.length===1?(l.length=0,delete this._events[s]):l.splice(h,1),this._events.removeListener&&this.emit("removeListener",s,a)}return this},r.prototype.removeAllListeners=function(s){var a,l;if(!this._events)return this;if(!this._events.removeListener)return arguments.length===0?this._events={}:this._events[s]&&delete this._events[s],this;if(arguments.length===0){for(a in this._events)a!=="removeListener"&&this.removeAllListeners(a);return this.removeAllListeners("removeListener"),this._events={},this}if(n(l=this._events[s]))this.removeListener(s,l);else if(l)for(;l.length;)this.removeListener(s,l[l.length-1]);return delete this._events[s],this},r.prototype.listeners=function(s){return this._events&&this._events[s]?n(this._events[s])?[this._events[s]]:this._events[s].slice():[]},r.prototype.listenerCount=function(s){if(this._events){var a=this._events[s];if(n(a))return 1;if(a)return a.length}return 0},r.listenerCount=function(s,a){return s.listenerCount(a)}},function(t,e,r){(function(n){var i=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,o=function(){function s(){}return s.normalize=function(a){a===""&&(a=".");for(var l=a.charAt(0)===s.sep,h=(a=s._removeDuplicateSeps(a)).split(s.sep),p=[],m=0;m<h.length;m++){var y=h[m];y!=="."&&(y===".."&&(l||!l&&p.length>0&&p[0]!=="..")?p.pop():p.push(y))}return!l&&p.length<2&&(p.length===1?p[0]===""&&p.unshift("."):p.push(".")),a=p.join(s.sep),l&&a.charAt(0)!==s.sep&&(a=s.sep+a),a},s.join=function(){for(var a=[],l=0;l<arguments.length;l++)a[l-0]=arguments[l];for(var h=[],p=0;p<a.length;p++){var m=a[p];if(typeof m!="string")throw new TypeError("Invalid argument type to path.join: "+typeof m);m!==""&&h.push(m)}return s.normalize(h.join(s.sep))},s.resolve=function(){for(var a=[],l=0;l<arguments.length;l++)a[l-0]=arguments[l];for(var h=[],p=0;p<a.length;p++){var m=a[p];if(typeof m!="string")throw new TypeError("Invalid argument type to path.join: "+typeof m);m!==""&&(m.charAt(0)===s.sep&&(h=[]),h.push(m))}var y=s.normalize(h.join(s.sep));if(y.length>1&&y.charAt(y.length-1)===s.sep)return y.substr(0,y.length-1);if(y.charAt(0)!==s.sep){y.charAt(0)!=="."||y.length!==1&&y.charAt(1)!==s.sep||(y=y.length===1?"":y.substr(2));var w=n.cwd();y=y!==""?this.normalize(w+(w!=="/"?s.sep:"")+y):w}return y},s.relative=function(a,l){var h;a=s.resolve(a),l=s.resolve(l);var p=a.split(s.sep),m=l.split(s.sep);m.shift(),p.shift();var y=0,w=[];for(h=0;h<p.length;h++)if(p[h]!==m[h]){y=p.length-h;break}w=m.slice(h),p.length===1&&p[0]===""&&(y=0),y>p.length&&(y=p.length);var b="";for(h=0;h<y;h++)b+="../";return(b+=w.join(s.sep)).length>1&&b.charAt(b.length-1)===s.sep&&(b=b.substr(0,b.length-1)),b},s.dirname=function(a){var l=(a=s._removeDuplicateSeps(a)).charAt(0)===s.sep,h=a.split(s.sep);return h.pop()===""&&h.length>0&&h.pop(),h.length>1||h.length===1&&!l?h.join(s.sep):l?s.sep:"."},s.basename=function(a,l){if(l===void 0&&(l=""),a==="")return a;var h=(a=s.normalize(a)).split(s.sep),p=h[h.length-1];return p===""&&h.length>1?h[h.length-2]:l.length>0&&p.substr(p.length-l.length)===l?p.substr(0,p.length-l.length):p},s.extname=function(a){var l=(a=s.normalize(a)).split(s.sep);if((a=l.pop())===""&&l.length>0&&(a=l.pop()),a==="..")return"";var h=a.lastIndexOf(".");return h===-1||h===0?"":a.substr(h)},s.isAbsolute=function(a){return a.length>0&&a.charAt(0)===s.sep},s._makeLong=function(a){return a},s.parse=function(a){var l=function(h){var p=i.exec(h);return p.shift(),p}(a);return{root:l[0],dir:l[0]+l[1].slice(0,-1),base:l[2],ext:l[3],name:l[2].slice(0,l[2].length-l[3].length)}},s.format=function(a){if(a===null||typeof a!="object")throw new TypeError("Parameter 'pathObject' must be an object, not "+typeof a);if(typeof(a.root||"")!="string")throw new TypeError("'pathObject.root' must be a string or undefined, not "+typeof a.root);return(a.dir?a.dir+s.sep:"")+(a.base||"")},s._removeDuplicateSeps=function(a){return a=a.replace(this._replaceRegex,this.sep)},s.sep="/",s._replaceRegex=new RegExp("//+","g"),s.delimiter=":",s.posix=s,s.win32=s,s}();t.exports=o}).call(e,r(6))},function(t,e,r){(function(n){var i=this&&this.__extends||function(s,a){for(var l in a)a.hasOwnProperty(l)&&(s[l]=a[l]);function h(){this.constructor=s}s.prototype=a===null?Object.create(a):(h.prototype=a.prototype,new h)},o=function(s){function a(){s.call(this),this.isRaw=!1,this.columns=80,this.rows=120,this.isTTY=!0,this._bufferedWrites=[],this._waitingForWrites=!1}return i(a,s),a.prototype.setRawMode=function(l){this.isRaw!==l&&(this.isRaw=l,this.emit("modeChange"))},a.prototype.changeColumns=function(l){l!==this.columns&&(this.columns=l,this.emit("resize"))},a.prototype.changeRows=function(l){l!==this.rows&&(this.rows=l,this.emit("resize"))},a.isatty=function(l){return l&&l instanceof a},a.prototype._write=function(l,h,p){var m;try{var y;y=typeof l=="string"?new n(l,h):l,this._bufferedWrites.push(y),this._waitingForWrites&&this._read(1024)}catch(w){m=w}finally{p(m)}},a.prototype._read=function(l){if(this._bufferedWrites.length===0)this._waitingForWrites=!0;else for(;this._bufferedWrites.length>0&&(this._waitingForWrites=this.push(this._bufferedWrites.shift()),this._waitingForWrites););},a}(r(11).Duplex);t.exports=o}).call(e,r(1))},function(t,e,r){t.exports=i;var n=r(8).EventEmitter;function i(){n.call(this)}r(12)(i,n),i.Readable=r(13),i.Writable=r(27),i.Duplex=r(28),i.Transform=r(29),i.PassThrough=r(30),i.Stream=i,i.prototype.pipe=function(o,s){var a=this;function l(N){o.writable&&o.write(N)===!1&&a.pause&&a.pause()}function h(){a.readable&&a.resume&&a.resume()}a.on("data",l),o.on("drain",h),o._isStdio||s&&s.end===!1||(a.on("end",m),a.on("close",y));var p=!1;function m(){p||(p=!0,o.end())}function y(){p||(p=!0,typeof o.destroy=="function"&&o.destroy())}function w(N){if(b(),n.listenerCount(this,"error")===0)throw N}function b(){a.removeListener("data",l),o.removeListener("drain",h),a.removeListener("end",m),a.removeListener("close",y),a.removeListener("error",w),o.removeListener("error",w),a.removeListener("end",b),a.removeListener("close",b),o.removeListener("close",b)}return a.on("error",w),o.on("error",w),a.on("end",b),a.on("close",b),o.on("close",b),o.emit("pipe",a),o}},function(t,e){typeof Object.create=="function"?t.exports=function(r,n){r.super_=n,r.prototype=Object.create(n.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(r,n){r.super_=n;var i=function(){};i.prototype=n.prototype,r.prototype=new i,r.prototype.constructor=r}},function(t,e,r){(function(n){var i=function(){try{return r(11)}catch{}}();(e=t.exports=r(14)).Stream=i||e,e.Readable=e,e.Writable=r(22),e.Duplex=r(21),e.Transform=r(25),e.PassThrough=r(26),!n.browser&&n.env.READABLE_STREAM==="disable"&&i&&(t.exports=i)}).call(e,r(6))},function(t,e,r){(function(n){t.exports=I;var i,o=r(15),s=r(16);I.ReadableState=O,r(8).EventEmitter;var a,l=function(M,C){return M.listeners(C).length};(function(){try{a=r(11)}catch{}finally{a||(a=r(8).EventEmitter)}})();var h=r(2).Buffer,p=r(17),m=r(18);m.inherits=r(12);var y=r(19),w=void 0;w=y&&y.debuglog?y.debuglog("stream"):function(){};var b,N=r(20);function O(M,C){i=i||r(21),M=M||{},this.objectMode=!!M.objectMode,C instanceof i&&(this.objectMode=this.objectMode||!!M.readableObjectMode);var ie=M.highWaterMark,B=this.objectMode?16:16384;this.highWaterMark=ie||ie===0?ie:B,this.highWaterMark=~~this.highWaterMark,this.buffer=new N,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.defaultEncoding=M.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,M.encoding&&(b||(b=r(24).StringDecoder),this.decoder=new b(M.encoding),this.encoding=M.encoding)}function I(M){if(i=i||r(21),!(this instanceof I))return new I(M);this._readableState=new O(M,this),this.readable=!0,M&&typeof M.read=="function"&&(this._read=M.read),a.call(this)}function R(M,C,ie,B,V){var Y=function(se,ye){var Ee=null;return h.isBuffer(ye)||typeof ye=="string"||ye==null||se.objectMode||(Ee=new TypeError("Invalid non-string/buffer chunk")),Ee}(C,ie);if(Y)M.emit("error",Y);else if(ie===null)C.reading=!1,function(se,ye){if(!ye.ended){if(ye.decoder){var Ee=ye.decoder.end();Ee&&Ee.length&&(ye.buffer.push(Ee),ye.length+=ye.objectMode?1:Ee.length)}ye.ended=!0,G(se)}}(M,C);else if(C.objectMode||ie&&ie.length>0)if(C.ended&&!V){var ce=new Error("stream.push() after EOF");M.emit("error",ce)}else if(C.endEmitted&&V){var oe=new Error("stream.unshift() after end event");M.emit("error",oe)}else{var ne;!C.decoder||V||B||(ie=C.decoder.write(ie),ne=!C.objectMode&&ie.length===0),V||(C.reading=!1),ne||(C.flowing&&C.length===0&&!C.sync?(M.emit("data",ie),M.read(0)):(C.length+=C.objectMode?1:ie.length,V?C.buffer.unshift(ie):C.buffer.push(ie),C.needReadable&&G(M))),function(se,ye){ye.readingMore||(ye.readingMore=!0,o(z,se,ye))}(M,C)}else V||(C.reading=!1);return function(se){return!se.ended&&(se.needReadable||se.length<se.highWaterMark||se.length===0)}(C)}m.inherits(I,a),I.prototype.push=function(M,C){var ie=this._readableState;return ie.objectMode||typeof M!="string"||(C=C||ie.defaultEncoding)!==ie.encoding&&(M=p.from(M,C),C=""),R(this,ie,M,C,!1)},I.prototype.unshift=function(M){return R(this,this._readableState,M,"",!0)},I.prototype.isPaused=function(){return this._readableState.flowing===!1},I.prototype.setEncoding=function(M){return b||(b=r(24).StringDecoder),this._readableState.decoder=new b(M),this._readableState.encoding=M,this};var J=8388608;function q(M,C){return M<=0||C.length===0&&C.ended?0:C.objectMode?1:M!=M?C.flowing&&C.length?C.buffer.head.data.length:C.length:(M>C.highWaterMark&&(C.highWaterMark=function(ie){return ie>=J?ie=J:(ie--,ie|=ie>>>1,ie|=ie>>>2,ie|=ie>>>4,ie|=ie>>>8,ie|=ie>>>16,ie++),ie}(M)),M<=C.length?M:C.ended?C.length:(C.needReadable=!0,0))}function G(M){var C=M._readableState;C.needReadable=!1,C.emittedReadable||(w("emitReadable",C.flowing),C.emittedReadable=!0,C.sync?o(F,M):F(M))}function F(M){w("emit readable"),M.emit("readable"),te(M)}function z(M,C){for(var ie=C.length;!C.reading&&!C.flowing&&!C.ended&&C.length<C.highWaterMark&&(w("maybeReadMore read 0"),M.read(0),ie!==C.length);)ie=C.length;C.readingMore=!1}function S(M){w("readable nexttick read 0"),M.read(0)}function W(M,C){C.reading||(w("resume read 0"),M.read(0)),C.resumeScheduled=!1,C.awaitDrain=0,M.emit("resume"),te(M),C.flowing&&!C.reading&&M.read(0)}function te(M){var C=M._readableState;for(w("flow",C.flowing);C.flowing&&M.read()!==null;);}function X(M,C){return C.length===0?null:(C.objectMode?ie=C.buffer.shift():!M||M>=C.length?(ie=C.decoder?C.buffer.join(""):C.buffer.length===1?C.buffer.head.data:C.buffer.concat(C.length),C.buffer.clear()):ie=function(B,V,Y){var ce;return B<V.head.data.length?(ce=V.head.data.slice(0,B),V.head.data=V.head.data.slice(B)):ce=B===V.head.data.length?V.shift():Y?function(oe,ne){var se=ne.head,ye=1,Ee=se.data;for(oe-=Ee.length;se=se.next;){var Ae=se.data,T=oe>Ae.length?Ae.length:oe;if(T===Ae.length?Ee+=Ae:Ee+=Ae.slice(0,oe),(oe-=T)==0){T===Ae.length?(++ye,se.next?ne.head=se.next:ne.head=ne.tail=null):(ne.head=se,se.data=Ae.slice(T));break}++ye}return ne.length-=ye,Ee}(B,V):function(oe,ne){var se=p.allocUnsafe(oe),ye=ne.head,Ee=1;for(ye.data.copy(se),oe-=ye.data.length;ye=ye.next;){var Ae=ye.data,T=oe>Ae.length?Ae.length:oe;if(Ae.copy(se,se.length-oe,0,T),(oe-=T)==0){T===Ae.length?(++Ee,ye.next?ne.head=ye.next:ne.head=ne.tail=null):(ne.head=ye,ye.data=Ae.slice(T));break}++Ee}return ne.length-=Ee,se}(B,V),ce}(M,C.buffer,C.decoder),ie);var ie}function ue(M){var C=M._readableState;if(C.length>0)throw new Error('"endReadable()" called on non-empty stream');C.endEmitted||(C.ended=!0,o(ae,C,M))}function ae(M,C){M.endEmitted||M.length!==0||(M.endEmitted=!0,C.readable=!1,C.emit("end"))}function ge(M,C){for(var ie=0,B=M.length;ie<B;ie++)if(M[ie]===C)return ie;return-1}I.prototype.read=function(M){w("read",M),M=parseInt(M,10);var C=this._readableState,ie=M;if(M!==0&&(C.emittedReadable=!1),M===0&&C.needReadable&&(C.length>=C.highWaterMark||C.ended))return w("read: emitReadable",C.length,C.ended),C.length===0&&C.ended?ue(this):G(this),null;if((M=q(M,C))===0&&C.ended)return C.length===0&&ue(this),null;var B,V=C.needReadable;return w("need readable",V),(C.length===0||C.length-M<C.highWaterMark)&&w("length less than watermark",V=!0),C.ended||C.reading?w("reading or ended",V=!1):V&&(w("do read"),C.reading=!0,C.sync=!0,C.length===0&&(C.needReadable=!0),this._read(C.highWaterMark),C.sync=!1,C.reading||(M=q(ie,C))),(B=M>0?X(M,C):null)===null?(C.needReadable=!0,M=0):C.length-=M,C.length===0&&(C.ended||(C.needReadable=!0),ie!==M&&C.ended&&ue(this)),B!==null&&this.emit("data",B),B},I.prototype._read=function(M){this.emit("error",new Error("_read() is not implemented"))},I.prototype.pipe=function(M,C){var ie=this,B=this._readableState;switch(B.pipesCount){case 0:B.pipes=M;break;case 1:B.pipes=[B.pipes,M];break;default:B.pipes.push(M)}B.pipesCount+=1,w("pipe count=%d opts=%j",B.pipesCount,C);var V=C&&C.end===!1||M===n.stdout||M===n.stderr?se:ce;function Y(H){w("onunpipe"),H===ie&&se()}function ce(){w("onend"),M.end()}B.endEmitted?o(V):ie.once("end",V),M.on("unpipe",Y);var oe=function(H){return function(){var Z=H._readableState;w("pipeOnDrain",Z.awaitDrain),Z.awaitDrain&&Z.awaitDrain--,Z.awaitDrain===0&&l(H,"data")&&(Z.flowing=!0,te(H))}}(ie);M.on("drain",oe);var ne=!1;function se(){w("cleanup"),M.removeListener("close",T),M.removeListener("finish",D),M.removeListener("drain",oe),M.removeListener("error",Ae),M.removeListener("unpipe",Y),ie.removeListener("end",ce),ie.removeListener("end",se),ie.removeListener("data",Ee),ne=!0,!B.awaitDrain||M._writableState&&!M._writableState.needDrain||oe()}var ye=!1;function Ee(H){w("ondata"),ye=!1,M.write(H)!==!1||ye||((B.pipesCount===1&&B.pipes===M||B.pipesCount>1&&ge(B.pipes,M)!==-1)&&!ne&&(w("false write response, pause",ie._readableState.awaitDrain),ie._readableState.awaitDrain++,ye=!0),ie.pause())}function Ae(H){w("onerror",H),j(),M.removeListener("error",Ae),l(M,"error")===0&&M.emit("error",H)}function T(){M.removeListener("finish",D),j()}function D(){w("onfinish"),M.removeListener("close",T),j()}function j(){w("unpipe"),ie.unpipe(M)}return ie.on("data",Ee),function(H,Z,K){if(typeof H.prependListener=="function")return H.prependListener(Z,K);H._events&&H._events[Z]?s(H._events[Z])?H._events[Z].unshift(K):H._events[Z]=[K,H._events[Z]]:H.on(Z,K)}(M,"error",Ae),M.once("close",T),M.once("finish",D),M.emit("pipe",ie),B.flowing||(w("pipe resume"),ie.resume()),M},I.prototype.unpipe=function(M){var C=this._readableState;if(C.pipesCount===0)return this;if(C.pipesCount===1)return M&&M!==C.pipes||(M||(M=C.pipes),C.pipes=null,C.pipesCount=0,C.flowing=!1,M&&M.emit("unpipe",this)),this;if(!M){var ie=C.pipes,B=C.pipesCount;C.pipes=null,C.pipesCount=0,C.flowing=!1;for(var V=0;V<B;V++)ie[V].emit("unpipe",this);return this}var Y=ge(C.pipes,M);return Y===-1||(C.pipes.splice(Y,1),C.pipesCount-=1,C.pipesCount===1&&(C.pipes=C.pipes[0]),M.emit("unpipe",this)),this},I.prototype.on=function(M,C){var ie=a.prototype.on.call(this,M,C);if(M==="data")this._readableState.flowing!==!1&&this.resume();else if(M==="readable"){var B=this._readableState;B.endEmitted||B.readableListening||(B.readableListening=B.needReadable=!0,B.emittedReadable=!1,B.reading?B.length&&G(this):o(S,this))}return ie},I.prototype.addListener=I.prototype.on,I.prototype.resume=function(){var M=this._readableState;return M.flowing||(w("resume"),M.flowing=!0,function(C,ie){ie.resumeScheduled||(ie.resumeScheduled=!0,o(W,C,ie))}(this,M)),this},I.prototype.pause=function(){return w("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(w("pause"),this._readableState.flowing=!1,this.emit("pause")),this},I.prototype.wrap=function(M){var C=this._readableState,ie=!1,B=this;for(var V in M.on("end",function(){if(w("wrapped end"),C.decoder&&!C.ended){var Y=C.decoder.end();Y&&Y.length&&B.push(Y)}B.push(null)}),M.on("data",function(Y){w("wrapped data"),C.decoder&&(Y=C.decoder.write(Y)),C.objectMode&&Y==null||(C.objectMode||Y&&Y.length)&&(B.push(Y)||(ie=!0,M.pause()))}),M)this[V]===void 0&&typeof M[V]=="function"&&(this[V]=function(Y){return function(){return M[Y].apply(M,arguments)}}(V));return function(Y,ce){for(var oe=0,ne=Y.length;oe<ne;oe++)ce(Y[oe],oe)}(["error","close","destroy","pause","resume"],function(Y){M.on(Y,B.emit.bind(B,Y))}),B._read=function(Y){w("wrapped _read",Y),ie&&(ie=!1,M.resume())},B},I._fromList=X}).call(e,r(6))},function(t,e,r){(function(n){!n.version||n.version.indexOf("v0.")===0||n.version.indexOf("v1.")===0&&n.version.indexOf("v1.8.")!==0?t.exports=function(i,o,s,a){if(typeof i!="function")throw new TypeError('"callback" argument must be a function');var l,h,p=arguments.length;switch(p){case 0:case 1:return n.nextTick(i);case 2:return n.nextTick(function(){i.call(null,o)});case 3:return n.nextTick(function(){i.call(null,o,s)});case 4:return n.nextTick(function(){i.call(null,o,s,a)});default:for(l=new Array(p-1),h=0;h<l.length;)l[h++]=arguments[h];return n.nextTick(function(){i.apply(null,l)})}}:t.exports=n.nextTick}).call(e,r(6))},function(t,e){var r={}.toString;t.exports=Array.isArray||function(n){return r.call(n)=="[object Array]"}},function(t,e,r){(function(n){var i=r(2),o=i.Buffer,s=i.SlowBuffer,a=i.kMaxLength||2147483647;e.alloc=function(l,h,p){if(typeof o.alloc=="function")return o.alloc(l,h,p);if(typeof p=="number")throw new TypeError("encoding must not be number");if(typeof l!="number")throw new TypeError("size must be a number");if(l>a)throw new RangeError("size is too large");var m=p,y=h;y===void 0&&(m=void 0,y=0);var w=new o(l);if(typeof y=="string")for(var b=new o(y,m),N=b.length,O=-1;++O<l;)w[O]=b[O%N];else w.fill(y);return w},e.allocUnsafe=function(l){if(typeof o.allocUnsafe=="function")return o.allocUnsafe(l);if(typeof l!="number")throw new TypeError("size must be a number");if(l>a)throw new RangeError("size is too large");return new o(l)},e.from=function(l,h,p){if(typeof o.from=="function"&&(!n.Uint8Array||Uint8Array.from!==o.from))return o.from(l,h,p);if(typeof l=="number")throw new TypeError('"value" argument must not be a number');if(typeof l=="string")return new o(l,h);if(typeof ArrayBuffer<"u"&&l instanceof ArrayBuffer){var m=h;if(arguments.length===1)return new o(l);m===void 0&&(m=0);var y=p;if(y===void 0&&(y=l.byteLength-m),m>=l.byteLength)throw new RangeError("'offset' is out of bounds");if(y>l.byteLength-m)throw new RangeError("'length' is out of bounds");return new o(l.slice(m,m+y))}if(o.isBuffer(l)){var w=new o(l.length);return l.copy(w,0,0,l.length),w}if(l){if(Array.isArray(l)||typeof ArrayBuffer<"u"&&l.buffer instanceof ArrayBuffer||"length"in l)return new o(l);if(l.type==="Buffer"&&Array.isArray(l.data))return new o(l.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")},e.allocUnsafeSlow=function(l){if(typeof o.allocUnsafeSlow=="function")return o.allocUnsafeSlow(l);if(typeof l!="number")throw new TypeError("size must be a number");if(l>=a)throw new RangeError("size is too large");return new s(l)}}).call(e,function(){return this}())},function(t,e,r){(function(n){function i(o){return Object.prototype.toString.call(o)}e.isArray=function(o){return Array.isArray?Array.isArray(o):i(o)==="[object Array]"},e.isBoolean=function(o){return typeof o=="boolean"},e.isNull=function(o){return o===null},e.isNullOrUndefined=function(o){return o==null},e.isNumber=function(o){return typeof o=="number"},e.isString=function(o){return typeof o=="string"},e.isSymbol=function(o){return typeof o=="symbol"},e.isUndefined=function(o){return o===void 0},e.isRegExp=function(o){return i(o)==="[object RegExp]"},e.isObject=function(o){return typeof o=="object"&&o!==null},e.isDate=function(o){return i(o)==="[object Date]"},e.isError=function(o){return i(o)==="[object Error]"||o instanceof Error},e.isFunction=function(o){return typeof o=="function"},e.isPrimitive=function(o){return o===null||typeof o=="boolean"||typeof o=="number"||typeof o=="string"||typeof o=="symbol"||o===void 0},e.isBuffer=n.isBuffer}).call(e,r(1))},function(t,e){},function(t,e,r){r(2).Buffer;var n=r(17);function i(){this.head=null,this.tail=null,this.length=0}t.exports=i,i.prototype.push=function(o){var s={data:o,next:null};this.length>0?this.tail.next=s:this.head=s,this.tail=s,++this.length},i.prototype.unshift=function(o){var s={data:o,next:this.head};this.length===0&&(this.tail=s),this.head=s,++this.length},i.prototype.shift=function(){if(this.length!==0){var o=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,o}},i.prototype.clear=function(){this.head=this.tail=null,this.length=0},i.prototype.join=function(o){if(this.length===0)return"";for(var s=this.head,a=""+s.data;s=s.next;)a+=o+s.data;return a},i.prototype.concat=function(o){if(this.length===0)return n.alloc(0);if(this.length===1)return this.head.data;for(var s=n.allocUnsafe(o>>>0),a=this.head,l=0;a;)a.data.copy(s,l),l+=a.data.length,a=a.next;return s}},function(t,e,r){var n=Object.keys||function(b){var N=[];for(var O in b)N.push(O);return N};t.exports=m;var i=r(15),o=r(18);o.inherits=r(12);var s=r(14),a=r(22);o.inherits(m,s);for(var l=n(a.prototype),h=0;h<l.length;h++){var p=l[h];m.prototype[p]||(m.prototype[p]=a.prototype[p])}function m(b){if(!(this instanceof m))return new m(b);s.call(this,b),a.call(this,b),b&&b.readable===!1&&(this.readable=!1),b&&b.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,b&&b.allowHalfOpen===!1&&(this.allowHalfOpen=!1),this.once("end",y)}function y(){this.allowHalfOpen||this._writableState.ended||i(w,this)}function w(b){b.end()}},function(t,e,r){(function(n){t.exports=O;var i,o=r(15),s=!n.browser&&["v0.10","v0.9."].indexOf(n.version.slice(0,5))>-1?setImmediate:o;O.WritableState=N;var a=r(18);a.inherits=r(12);var l,h={deprecate:r(23)};(function(){try{l=r(11)}catch{}finally{l||(l=r(8).EventEmitter)}})();var p,m=r(2).Buffer,y=r(17);function w(){}function b(S,W,te){this.chunk=S,this.encoding=W,this.callback=te,this.next=null}function N(S,W){i=i||r(21),S=S||{},this.objectMode=!!S.objectMode,W instanceof i&&(this.objectMode=this.objectMode||!!S.writableObjectMode);var te=S.highWaterMark,X=this.objectMode?16:16384;this.highWaterMark=te||te===0?te:X,this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var ue=S.decodeStrings===!1;this.decodeStrings=!ue,this.defaultEncoding=S.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(ae){(function(ge,M){var C=ge._writableState,ie=C.sync,B=C.writecb;if(function(Y){Y.writing=!1,Y.writecb=null,Y.length-=Y.writelen,Y.writelen=0}(C),M)(function(Y,ce,oe,ne,se){--ce.pendingcb,oe?o(se,ne):se(ne),Y._writableState.errorEmitted=!0,Y.emit("error",ne)})(ge,C,ie,M,B);else{var V=q(C);V||C.corked||C.bufferProcessing||!C.bufferedRequest||J(ge,C),ie?s(R,ge,C,V,B):R(ge,C,V,B)}})(W,ae)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new z(this)}function O(S){if(i=i||r(21),!(p.call(O,this)||this instanceof i))return new O(S);this._writableState=new N(S,this),this.writable=!0,S&&(typeof S.write=="function"&&(this._write=S.write),typeof S.writev=="function"&&(this._writev=S.writev)),l.call(this)}function I(S,W,te,X,ue,ae,ge){W.writelen=X,W.writecb=ge,W.writing=!0,W.sync=!0,te?S._writev(ue,W.onwrite):S._write(ue,ae,W.onwrite),W.sync=!1}function R(S,W,te,X){te||function(ue,ae){ae.length===0&&ae.needDrain&&(ae.needDrain=!1,ue.emit("drain"))}(S,W),W.pendingcb--,X(),F(S,W)}function J(S,W){W.bufferProcessing=!0;var te=W.bufferedRequest;if(S._writev&&te&&te.next){var X=W.bufferedRequestCount,ue=new Array(X),ae=W.corkedRequestsFree;ae.entry=te;for(var ge=0;te;)ue[ge]=te,te=te.next,ge+=1;I(S,W,!0,W.length,ue,"",ae.finish),W.pendingcb++,W.lastBufferedRequest=null,ae.next?(W.corkedRequestsFree=ae.next,ae.next=null):W.corkedRequestsFree=new z(W)}else{for(;te;){var M=te.chunk,C=te.encoding,ie=te.callback;if(I(S,W,!1,W.objectMode?1:M.length,M,C,ie),te=te.next,W.writing)break}te===null&&(W.lastBufferedRequest=null)}W.bufferedRequestCount=0,W.bufferedRequest=te,W.bufferProcessing=!1}function q(S){return S.ending&&S.length===0&&S.bufferedRequest===null&&!S.finished&&!S.writing}function G(S,W){W.prefinished||(W.prefinished=!0,S.emit("prefinish"))}function F(S,W){var te=q(W);return te&&(W.pendingcb===0?(G(S,W),W.finished=!0,S.emit("finish")):G(S,W)),te}function z(S){var W=this;this.next=null,this.entry=null,this.finish=function(te){var X=W.entry;for(W.entry=null;X;){var ue=X.callback;S.pendingcb--,ue(te),X=X.next}S.corkedRequestsFree?S.corkedRequestsFree.next=W:S.corkedRequestsFree=W}}a.inherits(O,l),N.prototype.getBuffer=function(){for(var S=this.bufferedRequest,W=[];S;)W.push(S),S=S.next;return W},function(){try{Object.defineProperty(N.prototype,"buffer",{get:h.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.")})}catch{}}(),typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(p=Function.prototype[Symbol.hasInstance],Object.defineProperty(O,Symbol.hasInstance,{value:function(S){return!!p.call(this,S)||S&&S._writableState instanceof N}})):p=function(S){return S instanceof this},O.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},O.prototype.write=function(S,W,te){var X=this._writableState,ue=!1,ae=m.isBuffer(S);return typeof W=="function"&&(te=W,W=null),ae?W="buffer":W||(W=X.defaultEncoding),typeof te!="function"&&(te=w),X.ended?function(ge,M){var C=new Error("write after end");ge.emit("error",C),o(M,C)}(this,te):(ae||function(ge,M,C,ie){var B=!0,V=!1;return C===null?V=new TypeError("May not write null values to stream"):typeof C=="string"||C===void 0||M.objectMode||(V=new TypeError("Invalid non-string/buffer chunk")),V&&(ge.emit("error",V),o(ie,V),B=!1),B}(this,X,S,te))&&(X.pendingcb++,ue=function(ge,M,C,ie,B,V){C||(ie=function(ne,se,ye){return ne.objectMode||ne.decodeStrings===!1||typeof se!="string"||(se=y.from(se,ye)),se}(M,ie,B),m.isBuffer(ie)&&(B="buffer"));var Y=M.objectMode?1:ie.length;M.length+=Y;var ce=M.length<M.highWaterMark;if(ce||(M.needDrain=!0),M.writing||M.corked){var oe=M.lastBufferedRequest;M.lastBufferedRequest=new b(ie,B,V),oe?oe.next=M.lastBufferedRequest:M.bufferedRequest=M.lastBufferedRequest,M.bufferedRequestCount+=1}else I(ge,M,!1,Y,ie,B,V);return ce}(this,X,ae,S,W,te)),ue},O.prototype.cork=function(){this._writableState.corked++},O.prototype.uncork=function(){var S=this._writableState;S.corked&&(S.corked--,S.writing||S.corked||S.finished||S.bufferProcessing||!S.bufferedRequest||J(this,S))},O.prototype.setDefaultEncoding=function(S){if(typeof S=="string"&&(S=S.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((S+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+S);return this._writableState.defaultEncoding=S,this},O.prototype._write=function(S,W,te){te(new Error("_write() is not implemented"))},O.prototype._writev=null,O.prototype.end=function(S,W,te){var X=this._writableState;typeof S=="function"?(te=S,S=null,W=null):typeof W=="function"&&(te=W,W=null),S!=null&&this.write(S,W),X.corked&&(X.corked=1,this.uncork()),X.ending||X.finished||function(ue,ae,ge){ae.ending=!0,F(ue,ae),ge&&(ae.finished?o(ge):ue.once("finish",ge)),ae.ended=!0,ue.writable=!1}(this,X,te)}}).call(e,r(6))},function(t,e){(function(r){function n(i){try{if(!r.localStorage)return!1}catch{return!1}var o=r.localStorage[i];return o!=null&&String(o).toLowerCase()==="true"}t.exports=function(i,o){if(n("noDeprecation"))return i;var s=!1;return function(){if(!s){if(n("throwDeprecation"))throw new Error(o);n("traceDeprecation")?console.trace(o):console.warn(o),s=!0}return i.apply(this,arguments)}}}).call(e,function(){return this}())},function(t,e,r){var n=r(2).Buffer,i=n.isEncoding||function(h){switch(h&&h.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}},o=e.StringDecoder=function(h){switch(this.encoding=(h||"utf8").toLowerCase().replace(/[-_]/,""),function(p){if(p&&!i(p))throw new Error("Unknown encoding: "+p)}(h),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=a;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=l;break;default:return void(this.write=s)}this.charBuffer=new n(6),this.charReceived=0,this.charLength=0};function s(h){return h.toString(this.encoding)}function a(h){this.charReceived=h.length%2,this.charLength=this.charReceived?2:0}function l(h){this.charReceived=h.length%3,this.charLength=this.charReceived?3:0}o.prototype.write=function(h){for(var p="";this.charLength;){var m=h.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:h.length;if(h.copy(this.charBuffer,this.charReceived,0,m),this.charReceived+=m,this.charReceived<this.charLength)return"";if(h=h.slice(m,h.length),!((y=(p=this.charBuffer.slice(0,this.charLength).toString(this.encoding)).charCodeAt(p.length-1))>=55296&&y<=56319)){if(this.charReceived=this.charLength=0,h.length===0)return p;break}this.charLength+=this.surrogateSize,p=""}this.detectIncompleteChar(h);var y,w=h.length;if(this.charLength&&(h.copy(this.charBuffer,0,h.length-this.charReceived,w),w-=this.charReceived),w=(p+=h.toString(this.encoding,0,w)).length-1,(y=p.charCodeAt(w))>=55296&&y<=56319){var b=this.surrogateSize;return this.charLength+=b,this.charReceived+=b,this.charBuffer.copy(this.charBuffer,b,0,b),h.copy(this.charBuffer,0,0,b),p.substring(0,w)}return p},o.prototype.detectIncompleteChar=function(h){for(var p=h.length>=3?3:h.length;p>0;p--){var m=h[h.length-p];if(p==1&&m>>5==6){this.charLength=2;break}if(p<=2&&m>>4==14){this.charLength=3;break}if(p<=3&&m>>3==30){this.charLength=4;break}}this.charReceived=p},o.prototype.end=function(h){var p="";if(h&&h.length&&(p=this.write(h)),this.charReceived){var m=this.charReceived,y=this.charBuffer,w=this.encoding;p+=y.slice(0,m).toString(w)}return p}},function(t,e,r){t.exports=s;var n=r(21),i=r(18);function o(l){this.afterTransform=function(h,p){return function(m,y,w){var b=m._transformState;b.transforming=!1;var N=b.writecb;if(!N)return m.emit("error",new Error("no writecb in Transform class"));b.writechunk=null,b.writecb=null,w!=null&&m.push(w),N(y);var O=m._readableState;O.reading=!1,(O.needReadable||O.length<O.highWaterMark)&&m._read(O.highWaterMark)}(l,h,p)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null,this.writeencoding=null}function s(l){if(!(this instanceof s))return new s(l);n.call(this,l),this._transformState=new o(this);var h=this;this._readableState.needReadable=!0,this._readableState.sync=!1,l&&(typeof l.transform=="function"&&(this._transform=l.transform),typeof l.flush=="function"&&(this._flush=l.flush)),this.once("prefinish",function(){typeof this._flush=="function"?this._flush(function(p,m){a(h,p,m)}):a(h)})}function a(l,h,p){if(h)return l.emit("error",h);p!=null&&l.push(p);var m=l._writableState,y=l._transformState;if(m.length)throw new Error("Calling transform done when ws.length != 0");if(y.transforming)throw new Error("Calling transform done when still transforming");return l.push(null)}i.inherits=r(12),i.inherits(s,n),s.prototype.push=function(l,h){return this._transformState.needTransform=!1,n.prototype.push.call(this,l,h)},s.prototype._transform=function(l,h,p){throw new Error("_transform() is not implemented")},s.prototype._write=function(l,h,p){var m=this._transformState;if(m.writecb=p,m.writechunk=l,m.writeencoding=h,!m.transforming){var y=this._readableState;(m.needTransform||y.needReadable||y.length<y.highWaterMark)&&this._read(y.highWaterMark)}},s.prototype._read=function(l){var h=this._transformState;h.writechunk!==null&&h.writecb&&!h.transforming?(h.transforming=!0,this._transform(h.writechunk,h.writeencoding,h.afterTransform)):h.needTransform=!0}},function(t,e,r){t.exports=o;var n=r(25),i=r(18);function o(s){if(!(this instanceof o))return new o(s);n.call(this,s)}i.inherits=r(12),i.inherits(o,n),o.prototype._transform=function(s,a,l){l(null,s)}},function(t,e,r){t.exports=r(22)},function(t,e,r){t.exports=r(21)},function(t,e,r){t.exports=r(25)},function(t,e,r){t.exports=r(26)},function(t,e,r){var n=r(32),i=r(33),o=r(38),s=r(39),a=r(40),l=r(41),h=r(42),p=Object.prototype.toString;function m(w){if(!(this instanceof m))return new m(w);this.options=i.assign({chunkSize:16384,windowBits:0,to:""},w||{});var b=this.options;b.raw&&b.windowBits>=0&&b.windowBits<16&&(b.windowBits=-b.windowBits,b.windowBits===0&&(b.windowBits=-15)),!(b.windowBits>=0&&b.windowBits<16)||w&&w.windowBits||(b.windowBits+=32),b.windowBits>15&&b.windowBits<48&&(15&b.windowBits)==0&&(b.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new l,this.strm.avail_out=0;var N=n.inflateInit2(this.strm,b.windowBits);if(N!==s.Z_OK)throw new Error(a[N]);this.header=new h,n.inflateGetHeader(this.strm,this.header)}function y(w,b){var N=new m(b);if(N.push(w,!0),N.err)throw N.msg||a[N.err];return N.result}m.prototype.push=function(w,b){var N,O,I,R,J,q,G=this.strm,F=this.options.chunkSize,z=this.options.dictionary,S=!1;if(this.ended)return!1;O=b===~~b?b:b===!0?s.Z_FINISH:s.Z_NO_FLUSH,typeof w=="string"?G.input=o.binstring2buf(w):p.call(w)==="[object ArrayBuffer]"?G.input=new Uint8Array(w):G.input=w,G.next_in=0,G.avail_in=G.input.length;do{if(G.avail_out===0&&(G.output=new i.Buf8(F),G.next_out=0,G.avail_out=F),(N=n.inflate(G,s.Z_NO_FLUSH))===s.Z_NEED_DICT&&z&&(q=typeof z=="string"?o.string2buf(z):p.call(z)==="[object ArrayBuffer]"?new Uint8Array(z):z,N=n.inflateSetDictionary(this.strm,q)),N===s.Z_BUF_ERROR&&S===!0&&(N=s.Z_OK,S=!1),N!==s.Z_STREAM_END&&N!==s.Z_OK)return this.onEnd(N),this.ended=!0,!1;G.next_out&&(G.avail_out!==0&&N!==s.Z_STREAM_END&&(G.avail_in!==0||O!==s.Z_FINISH&&O!==s.Z_SYNC_FLUSH)||(this.options.to==="string"?(I=o.utf8border(G.output,G.next_out),R=G.next_out-I,J=o.buf2string(G.output,I),G.next_out=R,G.avail_out=F-R,R&&i.arraySet(G.output,G.output,I,R,0),this.onData(J)):this.onData(i.shrinkBuf(G.output,G.next_out)))),G.avail_in===0&&G.avail_out===0&&(S=!0)}while((G.avail_in>0||G.avail_out===0)&&N!==s.Z_STREAM_END);return N===s.Z_STREAM_END&&(O=s.Z_FINISH),O===s.Z_FINISH?(N=n.inflateEnd(this.strm),this.onEnd(N),this.ended=!0,N===s.Z_OK):O!==s.Z_SYNC_FLUSH||(this.onEnd(s.Z_OK),G.avail_out=0,!0)},m.prototype.onData=function(w){this.chunks.push(w)},m.prototype.onEnd=function(w){w===s.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=w,this.msg=this.strm.msg},e.Inflate=m,e.inflate=y,e.inflateRaw=function(w,b){return(b=b||{}).raw=!0,y(w,b)},e.ungzip=y},function(t,e,r){var n=r(33),i=r(34),o=r(35),s=r(36),a=r(37),l=-2,h=12,p=30;function m(F){return(F>>>24&255)+(F>>>8&65280)+((65280&F)<<8)+((255&F)<<24)}function y(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new n.Buf16(320),this.work=new n.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function w(F){var z;return F&&F.state?(z=F.state,F.total_in=F.total_out=z.total=0,F.msg="",z.wrap&&(F.adler=1&z.wrap),z.mode=1,z.last=0,z.havedict=0,z.dmax=32768,z.head=null,z.hold=0,z.bits=0,z.lencode=z.lendyn=new n.Buf32(852),z.distcode=z.distdyn=new n.Buf32(592),z.sane=1,z.back=-1,0):l}function b(F){var z;return F&&F.state?((z=F.state).wsize=0,z.whave=0,z.wnext=0,w(F)):l}function N(F,z){var S,W;return F&&F.state?(W=F.state,z<0?(S=0,z=-z):(S=1+(z>>4),z<48&&(z&=15)),z&&(z<8||z>15)?l:(W.window!==null&&W.wbits!==z&&(W.window=null),W.wrap=S,W.wbits=z,b(F))):l}function O(F,z){var S,W;return F?(W=new y,F.state=W,W.window=null,(S=N(F,z))!==0&&(F.state=null),S):l}var I,R,J=!0;function q(F){if(J){var z;for(I=new n.Buf32(512),R=new n.Buf32(32),z=0;z<144;)F.lens[z++]=8;for(;z<256;)F.lens[z++]=9;for(;z<280;)F.lens[z++]=7;for(;z<288;)F.lens[z++]=8;for(a(1,F.lens,0,288,I,0,F.work,{bits:9}),z=0;z<32;)F.lens[z++]=5;a(2,F.lens,0,32,R,0,F.work,{bits:5}),J=!1}F.lencode=I,F.lenbits=9,F.distcode=R,F.distbits=5}function G(F,z,S,W){var te,X=F.state;return X.window===null&&(X.wsize=1<<X.wbits,X.wnext=0,X.whave=0,X.window=new n.Buf8(X.wsize)),W>=X.wsize?(n.arraySet(X.window,z,S-X.wsize,X.wsize,0),X.wnext=0,X.whave=X.wsize):((te=X.wsize-X.wnext)>W&&(te=W),n.arraySet(X.window,z,S-W,te,X.wnext),(W-=te)?(n.arraySet(X.window,z,S-W,W,0),X.wnext=W,X.whave=X.wsize):(X.wnext+=te,X.wnext===X.wsize&&(X.wnext=0),X.whave<X.wsize&&(X.whave+=te))),0}e.inflateReset=b,e.inflateReset2=N,e.inflateResetKeep=w,e.inflateInit=function(F){return O(F,15)},e.inflateInit2=O,e.inflate=function(F,z){var S,W,te,X,ue,ae,ge,M,C,ie,B,V,Y,ce,oe,ne,se,ye,Ee,Ae,T,D,j,H,Z=0,K=new n.Buf8(4),Se=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!F||!F.state||!F.output||!F.input&&F.avail_in!==0)return l;(S=F.state).mode===h&&(S.mode=13),ue=F.next_out,te=F.output,ge=F.avail_out,X=F.next_in,W=F.input,ae=F.avail_in,M=S.hold,C=S.bits,ie=ae,B=ge,D=0;e:for(;;)switch(S.mode){case 1:if(S.wrap===0){S.mode=13;break}for(;C<16;){if(ae===0)break e;ae--,M+=W[X++]<<C,C+=8}if(2&S.wrap&&M===35615){S.check=0,K[0]=255&M,K[1]=M>>>8&255,S.check=o(S.check,K,2,0),M=0,C=0,S.mode=2;break}if(S.flags=0,S.head&&(S.head.done=!1),!(1&S.wrap)||(((255&M)<<8)+(M>>8))%31){F.msg="incorrect header check",S.mode=p;break}if((15&M)!=8){F.msg="unknown compression method",S.mode=p;break}if(C-=4,T=8+(15&(M>>>=4)),S.wbits===0)S.wbits=T;else if(T>S.wbits){F.msg="invalid window size",S.mode=p;break}S.dmax=1<<T,F.adler=S.check=1,S.mode=512&M?10:h,M=0,C=0;break;case 2:for(;C<16;){if(ae===0)break e;ae--,M+=W[X++]<<C,C+=8}if(S.flags=M,(255&S.flags)!=8){F.msg="unknown compression method",S.mode=p;break}if(57344&S.flags){F.msg="unknown header flags set",S.mode=p;break}S.head&&(S.head.text=M>>8&1),512&S.flags&&(K[0]=255&M,K[1]=M>>>8&255,S.check=o(S.check,K,2,0)),M=0,C=0,S.mode=3;case 3:for(;C<32;){if(ae===0)break e;ae--,M+=W[X++]<<C,C+=8}S.head&&(S.head.time=M),512&S.flags&&(K[0]=255&M,K[1]=M>>>8&255,K[2]=M>>>16&255,K[3]=M>>>24&255,S.check=o(S.check,K,4,0)),M=0,C=0,S.mode=4;case 4:for(;C<16;){if(ae===0)break e;ae--,M+=W[X++]<<C,C+=8}S.head&&(S.head.xflags=255&M,S.head.os=M>>8),512&S.flags&&(K[0]=255&M,K[1]=M>>>8&255,S.check=o(S.check,K,2,0)),M=0,C=0,S.mode=5;case 5:if(1024&S.flags){for(;C<16;){if(ae===0)break e;ae--,M+=W[X++]<<C,C+=8}S.length=M,S.head&&(S.head.extra_len=M),512&S.flags&&(K[0]=255&M,K[1]=M>>>8&255,S.check=o(S.check,K,2,0)),M=0,C=0}else S.head&&(S.head.extra=null);S.mode=6;case 6:if(1024&S.flags&&((V=S.length)>ae&&(V=ae),V&&(S.head&&(T=S.head.extra_len-S.length,S.head.extra||(S.head.extra=new Array(S.head.extra_len)),n.arraySet(S.head.extra,W,X,V,T)),512&S.flags&&(S.check=o(S.check,W,V,X)),ae-=V,X+=V,S.length-=V),S.length))break e;S.length=0,S.mode=7;case 7:if(2048&S.flags){if(ae===0)break e;V=0;do T=W[X+V++],S.head&&T&&S.length<65536&&(S.head.name+=String.fromCharCode(T));while(T&&V<ae);if(512&S.flags&&(S.check=o(S.check,W,V,X)),ae-=V,X+=V,T)break e}else S.head&&(S.head.name=null);S.length=0,S.mode=8;case 8:if(4096&S.flags){if(ae===0)break e;V=0;do T=W[X+V++],S.head&&T&&S.length<65536&&(S.head.comment+=String.fromCharCode(T));while(T&&V<ae);if(512&S.flags&&(S.check=o(S.check,W,V,X)),ae-=V,X+=V,T)break e}else S.head&&(S.head.comment=null);S.mode=9;case 9:if(512&S.flags){for(;C<16;){if(ae===0)break e;ae--,M+=W[X++]<<C,C+=8}if(M!==(65535&S.check)){F.msg="header crc mismatch",S.mode=p;break}M=0,C=0}S.head&&(S.head.hcrc=S.flags>>9&1,S.head.done=!0),F.adler=S.check=0,S.mode=h;break;case 10:for(;C<32;){if(ae===0)break e;ae--,M+=W[X++]<<C,C+=8}F.adler=S.check=m(M),M=0,C=0,S.mode=11;case 11:if(S.havedict===0)return F.next_out=ue,F.avail_out=ge,F.next_in=X,F.avail_in=ae,S.hold=M,S.bits=C,2;F.adler=S.check=1,S.mode=h;case h:if(z===5||z===6)break e;case 13:if(S.last){M>>>=7&C,C-=7&C,S.mode=27;break}for(;C<3;){if(ae===0)break e;ae--,M+=W[X++]<<C,C+=8}switch(S.last=1&M,C-=1,3&(M>>>=1)){case 0:S.mode=14;break;case 1:if(q(S),S.mode=20,z===6){M>>>=2,C-=2;break e}break;case 2:S.mode=17;break;case 3:F.msg="invalid block type",S.mode=p}M>>>=2,C-=2;break;case 14:for(M>>>=7&C,C-=7&C;C<32;){if(ae===0)break e;ae--,M+=W[X++]<<C,C+=8}if((65535&M)!=(M>>>16^65535)){F.msg="invalid stored block lengths",S.mode=p;break}if(S.length=65535&M,M=0,C=0,S.mode=15,z===6)break e;case 15:S.mode=16;case 16:if(V=S.length){if(V>ae&&(V=ae),V>ge&&(V=ge),V===0)break e;n.arraySet(te,W,X,V,ue),ae-=V,X+=V,ge-=V,ue+=V,S.length-=V;break}S.mode=h;break;case 17:for(;C<14;){if(ae===0)break e;ae--,M+=W[X++]<<C,C+=8}if(S.nlen=257+(31&M),M>>>=5,C-=5,S.ndist=1+(31&M),M>>>=5,C-=5,S.ncode=4+(15&M),M>>>=4,C-=4,S.nlen>286||S.ndist>30){F.msg="too many length or distance symbols",S.mode=p;break}S.have=0,S.mode=18;case 18:for(;S.have<S.ncode;){for(;C<3;){if(ae===0)break e;ae--,M+=W[X++]<<C,C+=8}S.lens[Se[S.have++]]=7&M,M>>>=3,C-=3}for(;S.have<19;)S.lens[Se[S.have++]]=0;if(S.lencode=S.lendyn,S.lenbits=7,j={bits:S.lenbits},D=a(0,S.lens,0,19,S.lencode,0,S.work,j),S.lenbits=j.bits,D){F.msg="invalid code lengths set",S.mode=p;break}S.have=0,S.mode=19;case 19:for(;S.have<S.nlen+S.ndist;){for(;ne=(Z=S.lencode[M&(1<<S.lenbits)-1])>>>16&255,se=65535&Z,!((oe=Z>>>24)<=C);){if(ae===0)break e;ae--,M+=W[X++]<<C,C+=8}if(se<16)M>>>=oe,C-=oe,S.lens[S.have++]=se;else{if(se===16){for(H=oe+2;C<H;){if(ae===0)break e;ae--,M+=W[X++]<<C,C+=8}if(M>>>=oe,C-=oe,S.have===0){F.msg="invalid bit length repeat",S.mode=p;break}T=S.lens[S.have-1],V=3+(3&M),M>>>=2,C-=2}else if(se===17){for(H=oe+3;C<H;){if(ae===0)break e;ae--,M+=W[X++]<<C,C+=8}C-=oe,T=0,V=3+(7&(M>>>=oe)),M>>>=3,C-=3}else{for(H=oe+7;C<H;){if(ae===0)break e;ae--,M+=W[X++]<<C,C+=8}C-=oe,T=0,V=11+(127&(M>>>=oe)),M>>>=7,C-=7}if(S.have+V>S.nlen+S.ndist){F.msg="invalid bit length repeat",S.mode=p;break}for(;V--;)S.lens[S.have++]=T}}if(S.mode===p)break;if(S.lens[256]===0){F.msg="invalid code -- missing end-of-block",S.mode=p;break}if(S.lenbits=9,j={bits:S.lenbits},D=a(1,S.lens,0,S.nlen,S.lencode,0,S.work,j),S.lenbits=j.bits,D){F.msg="invalid literal/lengths set",S.mode=p;break}if(S.distbits=6,S.distcode=S.distdyn,j={bits:S.distbits},D=a(2,S.lens,S.nlen,S.ndist,S.distcode,0,S.work,j),S.distbits=j.bits,D){F.msg="invalid distances set",S.mode=p;break}if(S.mode=20,z===6)break e;case 20:S.mode=21;case 21:if(ae>=6&&ge>=258){F.next_out=ue,F.avail_out=ge,F.next_in=X,F.avail_in=ae,S.hold=M,S.bits=C,s(F,B),ue=F.next_out,te=F.output,ge=F.avail_out,X=F.next_in,W=F.input,ae=F.avail_in,M=S.hold,C=S.bits,S.mode===h&&(S.back=-1);break}for(S.back=0;ne=(Z=S.lencode[M&(1<<S.lenbits)-1])>>>16&255,se=65535&Z,!((oe=Z>>>24)<=C);){if(ae===0)break e;ae--,M+=W[X++]<<C,C+=8}if(ne&&(240&ne)==0){for(ye=oe,Ee=ne,Ae=se;ne=(Z=S.lencode[Ae+((M&(1<<ye+Ee)-1)>>ye)])>>>16&255,se=65535&Z,!(ye+(oe=Z>>>24)<=C);){if(ae===0)break e;ae--,M+=W[X++]<<C,C+=8}M>>>=ye,C-=ye,S.back+=ye}if(M>>>=oe,C-=oe,S.back+=oe,S.length=se,ne===0){S.mode=26;break}if(32&ne){S.back=-1,S.mode=h;break}if(64&ne){F.msg="invalid literal/length code",S.mode=p;break}S.extra=15&ne,S.mode=22;case 22:if(S.extra){for(H=S.extra;C<H;){if(ae===0)break e;ae--,M+=W[X++]<<C,C+=8}S.length+=M&(1<<S.extra)-1,M>>>=S.extra,C-=S.extra,S.back+=S.extra}S.was=S.length,S.mode=23;case 23:for(;ne=(Z=S.distcode[M&(1<<S.distbits)-1])>>>16&255,se=65535&Z,!((oe=Z>>>24)<=C);){if(ae===0)break e;ae--,M+=W[X++]<<C,C+=8}if((240&ne)==0){for(ye=oe,Ee=ne,Ae=se;ne=(Z=S.distcode[Ae+((M&(1<<ye+Ee)-1)>>ye)])>>>16&255,se=65535&Z,!(ye+(oe=Z>>>24)<=C);){if(ae===0)break e;ae--,M+=W[X++]<<C,C+=8}M>>>=ye,C-=ye,S.back+=ye}if(M>>>=oe,C-=oe,S.back+=oe,64&ne){F.msg="invalid distance code",S.mode=p;break}S.offset=se,S.extra=15&ne,S.mode=24;case 24:if(S.extra){for(H=S.extra;C<H;){if(ae===0)break e;ae--,M+=W[X++]<<C,C+=8}S.offset+=M&(1<<S.extra)-1,M>>>=S.extra,C-=S.extra,S.back+=S.extra}if(S.offset>S.dmax){F.msg="invalid distance too far back",S.mode=p;break}S.mode=25;case 25:if(ge===0)break e;if(V=B-ge,S.offset>V){if((V=S.offset-V)>S.whave&&S.sane){F.msg="invalid distance too far back",S.mode=p;break}V>S.wnext?(V-=S.wnext,Y=S.wsize-V):Y=S.wnext-V,V>S.length&&(V=S.length),ce=S.window}else ce=te,Y=ue-S.offset,V=S.length;V>ge&&(V=ge),ge-=V,S.length-=V;do te[ue++]=ce[Y++];while(--V);S.length===0&&(S.mode=21);break;case 26:if(ge===0)break e;te[ue++]=S.length,ge--,S.mode=21;break;case 27:if(S.wrap){for(;C<32;){if(ae===0)break e;ae--,M|=W[X++]<<C,C+=8}if(B-=ge,F.total_out+=B,S.total+=B,B&&(F.adler=S.check=S.flags?o(S.check,te,B,ue-B):i(S.check,te,B,ue-B)),B=ge,(S.flags?M:m(M))!==S.check){F.msg="incorrect data check",S.mode=p;break}M=0,C=0}S.mode=28;case 28:if(S.wrap&&S.flags){for(;C<32;){if(ae===0)break e;ae--,M+=W[X++]<<C,C+=8}if(M!==(4294967295&S.total)){F.msg="incorrect length check",S.mode=p;break}M=0,C=0}S.mode=29;case 29:D=1;break e;case p:D=-3;break e;case 31:return-4;default:return l}return F.next_out=ue,F.avail_out=ge,F.next_in=X,F.avail_in=ae,S.hold=M,S.bits=C,(S.wsize||B!==F.avail_out&&S.mode<p&&(S.mode<27||z!==4))&&G(F,F.output,F.next_out,B-F.avail_out),ie-=F.avail_in,B-=F.avail_out,F.total_in+=ie,F.total_out+=B,S.total+=B,S.wrap&&B&&(F.adler=S.check=S.flags?o(S.check,te,B,F.next_out-B):i(S.check,te,B,F.next_out-B)),F.data_type=S.bits+(S.last?64:0)+(S.mode===h?128:0)+(S.mode===20||S.mode===15?256:0),(ie===0&&B===0||z===4)&&D===0&&(D=-5),D},e.inflateEnd=function(F){if(!F||!F.state)return l;var z=F.state;return z.window&&(z.window=null),F.state=null,0},e.inflateGetHeader=function(F,z){var S;return F&&F.state?(2&(S=F.state).wrap)==0?l:(S.head=z,z.done=!1,0):l},e.inflateSetDictionary=function(F,z){var S,W=z.length;return F&&F.state?(S=F.state).wrap!==0&&S.mode!==11?l:S.mode===11&&i(1,z,W,0)!==S.check?-3:G(F,z,W,W)?(S.mode=31,-4):(S.havedict=1,0):l},e.inflateInfo="pako inflate (from Nodeca project)"},function(t,e){var r=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";e.assign=function(o){for(var s=Array.prototype.slice.call(arguments,1);s.length;){var a=s.shift();if(a){if(typeof a!="object")throw new TypeError(a+"must be non-object");for(var l in a)a.hasOwnProperty(l)&&(o[l]=a[l])}}return o},e.shrinkBuf=function(o,s){return o.length===s?o:o.subarray?o.subarray(0,s):(o.length=s,o)};var n={arraySet:function(o,s,a,l,h){if(s.subarray&&o.subarray)o.set(s.subarray(a,a+l),h);else for(var p=0;p<l;p++)o[h+p]=s[a+p]},flattenChunks:function(o){var s,a,l,h,p,m;for(l=0,s=0,a=o.length;s<a;s++)l+=o[s].length;for(m=new Uint8Array(l),h=0,s=0,a=o.length;s<a;s++)p=o[s],m.set(p,h),h+=p.length;return m}},i={arraySet:function(o,s,a,l,h){for(var p=0;p<l;p++)o[h+p]=s[a+p]},flattenChunks:function(o){return[].concat.apply([],o)}};e.setTyped=function(o){o?(e.Buf8=Uint8Array,e.Buf16=Uint16Array,e.Buf32=Int32Array,e.assign(e,n)):(e.Buf8=Array,e.Buf16=Array,e.Buf32=Array,e.assign(e,i))},e.setTyped(r)},function(t,e){t.exports=function(r,n,i,o){for(var s=65535&r|0,a=r>>>16&65535|0,l=0;i!==0;){i-=l=i>2e3?2e3:i;do a=a+(s=s+n[o++]|0)|0;while(--l);s%=65521,a%=65521}return s|a<<16|0}},function(t,e){var r=function(){for(var n,i=[],o=0;o<256;o++){n=o;for(var s=0;s<8;s++)n=1&n?3988292384^n>>>1:n>>>1;i[o]=n}return i}();t.exports=function(n,i,o,s){var a=r,l=s+o;n^=-1;for(var h=s;h<l;h++)n=n>>>8^a[255&(n^i[h])];return-1^n}},function(t,e){t.exports=function(r,n){var i,o,s,a,l,h,p,m,y,w,b,N,O,I,R,J,q,G,F,z,S,W,te,X,ue;i=r.state,o=r.next_in,X=r.input,s=o+(r.avail_in-5),a=r.next_out,ue=r.output,l=a-(n-r.avail_out),h=a+(r.avail_out-257),p=i.dmax,m=i.wsize,y=i.whave,w=i.wnext,b=i.window,N=i.hold,O=i.bits,I=i.lencode,R=i.distcode,J=(1<<i.lenbits)-1,q=(1<<i.distbits)-1;e:do{O<15&&(N+=X[o++]<<O,O+=8,N+=X[o++]<<O,O+=8),G=I[N&J];t:for(;;){if(N>>>=F=G>>>24,O-=F,(F=G>>>16&255)==0)ue[a++]=65535&G;else{if(!(16&F)){if((64&F)==0){G=I[(65535&G)+(N&(1<<F)-1)];continue t}if(32&F){i.mode=12;break e}r.msg="invalid literal/length code",i.mode=30;break e}z=65535&G,(F&=15)&&(O<F&&(N+=X[o++]<<O,O+=8),z+=N&(1<<F)-1,N>>>=F,O-=F),O<15&&(N+=X[o++]<<O,O+=8,N+=X[o++]<<O,O+=8),G=R[N&q];r:for(;;){if(N>>>=F=G>>>24,O-=F,!(16&(F=G>>>16&255))){if((64&F)==0){G=R[(65535&G)+(N&(1<<F)-1)];continue r}r.msg="invalid distance code",i.mode=30;break e}if(S=65535&G,O<(F&=15)&&(N+=X[o++]<<O,(O+=8)<F&&(N+=X[o++]<<O,O+=8)),(S+=N&(1<<F)-1)>p){r.msg="invalid distance too far back",i.mode=30;break e}if(N>>>=F,O-=F,S>(F=a-l)){if((F=S-F)>y&&i.sane){r.msg="invalid distance too far back",i.mode=30;break e}if(W=0,te=b,w===0){if(W+=m-F,F<z){z-=F;do ue[a++]=b[W++];while(--F);W=a-S,te=ue}}else if(w<F){if(W+=m+w-F,(F-=w)<z){z-=F;do ue[a++]=b[W++];while(--F);if(W=0,w<z){z-=F=w;do ue[a++]=b[W++];while(--F);W=a-S,te=ue}}}else if(W+=w-F,F<z){z-=F;do ue[a++]=b[W++];while(--F);W=a-S,te=ue}for(;z>2;)ue[a++]=te[W++],ue[a++]=te[W++],ue[a++]=te[W++],z-=3;z&&(ue[a++]=te[W++],z>1&&(ue[a++]=te[W++]))}else{W=a-S;do ue[a++]=ue[W++],ue[a++]=ue[W++],ue[a++]=ue[W++],z-=3;while(z>2);z&&(ue[a++]=ue[W++],z>1&&(ue[a++]=ue[W++]))}break}}break}}while(o<s&&a<h);o-=z=O>>3,N&=(1<<(O-=z<<3))-1,r.next_in=o,r.next_out=a,r.avail_in=o<s?s-o+5:5-(o-s),r.avail_out=a<h?h-a+257:257-(a-h),i.hold=N,i.bits=O}},function(t,e,r){var n=r(33),i=15,o=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],s=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],a=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],l=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];t.exports=function(h,p,m,y,w,b,N,O){var I,R,J,q,G,F,z,S,W,te=O.bits,X=0,ue=0,ae=0,ge=0,M=0,C=0,ie=0,B=0,V=0,Y=0,ce=null,oe=0,ne=new n.Buf16(16),se=new n.Buf16(16),ye=null,Ee=0;for(X=0;X<=i;X++)ne[X]=0;for(ue=0;ue<y;ue++)ne[p[m+ue]]++;for(M=te,ge=i;ge>=1&&ne[ge]===0;ge--);if(M>ge&&(M=ge),ge===0)return w[b++]=20971520,w[b++]=20971520,O.bits=1,0;for(ae=1;ae<ge&&ne[ae]===0;ae++);for(M<ae&&(M=ae),B=1,X=1;X<=i;X++)if(B<<=1,(B-=ne[X])<0)return-1;if(B>0&&(h===0||ge!==1))return-1;for(se[1]=0,X=1;X<i;X++)se[X+1]=se[X]+ne[X];for(ue=0;ue<y;ue++)p[m+ue]!==0&&(N[se[p[m+ue]]++]=ue);if(h===0?(ce=ye=N,F=19):h===1?(ce=o,oe-=257,ye=s,Ee-=257,F=256):(ce=a,ye=l,F=-1),Y=0,ue=0,X=ae,G=b,C=M,ie=0,J=-1,q=(V=1<<M)-1,h===1&&V>852||h===2&&V>592)return 1;for(;;){z=X-ie,N[ue]<F?(S=0,W=N[ue]):N[ue]>F?(S=ye[Ee+N[ue]],W=ce[oe+N[ue]]):(S=96,W=0),I=1<<X-ie,ae=R=1<<C;do w[G+(Y>>ie)+(R-=I)]=z<<24|S<<16|W|0;while(R!==0);for(I=1<<X-1;Y&I;)I>>=1;if(I!==0?(Y&=I-1,Y+=I):Y=0,ue++,--ne[X]==0){if(X===ge)break;X=p[m+N[ue]]}if(X>M&&(Y&q)!==J){for(ie===0&&(ie=M),G+=ae,B=1<<(C=X-ie);C+ie<ge&&!((B-=ne[C+ie])<=0);)C++,B<<=1;if(V+=1<<C,h===1&&V>852||h===2&&V>592)return 1;w[J=Y&q]=M<<24|C<<16|G-b|0}}return Y!==0&&(w[G+Y]=X-ie<<24|64<<16|0),O.bits=M,0}},function(t,e,r){var n=r(33),i=!0,o=!0;try{String.fromCharCode.apply(null,[0])}catch{i=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{o=!1}for(var s=new n.Buf8(256),a=0;a<256;a++)s[a]=a>=252?6:a>=248?5:a>=240?4:a>=224?3:a>=192?2:1;function l(h,p){if(p<65537&&(h.subarray&&o||!h.subarray&&i))return String.fromCharCode.apply(null,n.shrinkBuf(h,p));for(var m="",y=0;y<p;y++)m+=String.fromCharCode(h[y]);return m}s[254]=s[254]=1,e.string2buf=function(h){var p,m,y,w,b,N=h.length,O=0;for(w=0;w<N;w++)(64512&(m=h.charCodeAt(w)))==55296&&w+1<N&&(64512&(y=h.charCodeAt(w+1)))==56320&&(m=65536+(m-55296<<10)+(y-56320),w++),O+=m<128?1:m<2048?2:m<65536?3:4;for(p=new n.Buf8(O),b=0,w=0;b<O;w++)(64512&(m=h.charCodeAt(w)))==55296&&w+1<N&&(64512&(y=h.charCodeAt(w+1)))==56320&&(m=65536+(m-55296<<10)+(y-56320),w++),m<128?p[b++]=m:m<2048?(p[b++]=192|m>>>6,p[b++]=128|63&m):m<65536?(p[b++]=224|m>>>12,p[b++]=128|m>>>6&63,p[b++]=128|63&m):(p[b++]=240|m>>>18,p[b++]=128|m>>>12&63,p[b++]=128|m>>>6&63,p[b++]=128|63&m);return p},e.buf2binstring=function(h){return l(h,h.length)},e.binstring2buf=function(h){for(var p=new n.Buf8(h.length),m=0,y=p.length;m<y;m++)p[m]=h.charCodeAt(m);return p},e.buf2string=function(h,p){var m,y,w,b,N=p||h.length,O=new Array(2*N);for(y=0,m=0;m<N;)if((w=h[m++])<128)O[y++]=w;else if((b=s[w])>4)O[y++]=65533,m+=b-1;else{for(w&=b===2?31:b===3?15:7;b>1&&m<N;)w=w<<6|63&h[m++],b--;b>1?O[y++]=65533:w<65536?O[y++]=w:(w-=65536,O[y++]=55296|w>>10&1023,O[y++]=56320|1023&w)}return l(O,y)},e.utf8border=function(h,p){var m;for((p=p||h.length)>h.length&&(p=h.length),m=p-1;m>=0&&(192&h[m])==128;)m--;return m<0||m===0?p:m+s[h[m]]>p?m:p}},function(t,e){t.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},function(t,e){t.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},function(t,e){t.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},function(t,e){t.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}}])},Ka.exports=Gw();sc=!1,Ze=Ka.exports.BFSRequire("fs");Ka.exports.BFSRequire("buffer").Buffer;b0=async(t=["data","projects","extensions","settings","plugins"],e=()=>{},r=()=>{})=>!!sc||new Promise(n=>{Ze.getRootFS(),Ka.exports.FileSystem.IndexedDB.Create({},(i,o)=>{if(i)throw i;if(!o)throw r(),new Error("Error creating BrowserFS");Ka.exports.initialize(o);let s=[];t.forEach(async a=>{s.push(O0(Ze,a))}),Promise.all(s).then(a=>{e(),sc=!0,n(!0)})})});E0=async(t,e="data",r=n=>{console.log(n)})=>new Promise(n=>{Ze.stat("/"+e+"/"+t,(i,o)=>{if(i)throw i;let s=o.size;r(s),n(s)})}),Yw=async(t="",e="data",r=(n,i)=>{console.log(n,i)})=>new Promise(n=>{Ze.open("/"+e+"/"+t,"r",(i,o)=>{if(i)throw i;Ze.read(o,65535,0,"utf-8",(s,a,l)=>{if(s)throw s;if(l!==0){let h=a.toString().split(`
`)[0];Ze.close(o,()=>{r(h,t),n(h)})}else n(void 0)})})}),Kw=async(t="data",e=n=>{},r)=>new Promise(n=>{Ze.readdir("/"+t,(i,o)=>{if(i)throw i;o&&(console.log("files",o),e(o)),n(o)})}),gs={},O0=async(t,e)=>new Promise(r=>{gs[e]==="exists"||gs[e]==="created"?r():t.exists(`/${e}`,n=>{n?(gs[e]="exists",console.log(`/${e} exists!`),r()):gs[e]==="creating"?(console.log(e+" is still being created."),r()):(console.log("creating "+e),gs[e]="creating",t.mkdir(e,i=>{if(i)throw i;gs[e]="created",setTimeout(r,500)}))})}),io=Object.freeze({__proto__:null,fs:Ze,initFS:b0,exists:async(t="",e="data")=>new Promise(r=>{Ze.exists("/"+e+"/"+t,function(n){r(n)})}),readFile:async(t="sessionName",e="data")=>(sc||await b0(),new Promise(r=>{Ze.readFile("/"+e+"/"+t,function(n,i){r(i)})})),readFileChunk:Jw,getFilenames:(t=r=>{},e="/data")=>new Promise(r=>{Ze.readdir(e,(n,i)=>{if(n)throw n;i?(console.log("files",i),t(i),r(i)):r(void 0)})}),writeFile:async(t,e,r="data",n=i=>{})=>new Promise(i=>{Ze.writeFile("/"+r+"/"+t,e,o=>{if(o)throw o;n(e),i(!0)})}),appendFile:async(t,e,r="data",n=i=>{})=>new Promise(i=>{Ze.appendFile("/"+r+"/"+t,e,o=>{if(o)throw o;n(e),i(!0)})}),deleteFile:(t="sessionName",e="data",r=Kw)=>new Promise(n=>{t!=""?Ze.unlink("/"+e+"/"+t,i=>{i&&console.error(i),r(),n(!0)}):(console.error("Path name is not defined"),n(!1))}),readFileAsText:async(t="sessionName.csv",e="data",r="end",n=0,i=(o,s)=>{})=>new Promise(async o=>{let s=await E0(t,e);(r==="end"||typeof r=="number"&&r>s)&&(r=s),Ze.open("/"+e+"/"+t,"r",(a,l)=>{if(a)throw a;Ze.read(l,r,n,"utf-8",(h,p,m)=>{if(h)throw h;if(m!==0){let y=p.toString();Ze.close(l,()=>{i(y,t),o(y)})}else o(void 0)})})}),getFileSize:E0,getCSVHeader:Yw,listFiles:Kw,writeToCSVFromDB:async(t="sessionName",e="data",r=10)=>new Promise(n=>{t!=""?Ze.stat("/"+e+"/"+t,(i,o)=>{if(i)throw i;let s=o.size;console.log(s),Ze.open(e+"/"+t,"r",(a,l)=>{if(a)throw a;let h=1024*r*1024,p=h;s<h&&(p=s,Ze.read(l,p,0,"utf-8",(m,y,w)=>{if(m)throw m;w!==0&&Ya.saveCSV(y.toString(),t),Ze.close(l),n(!0)}))})}):(console.error("File name is not defined."),n(!1))}),readCSVChunkFromDB:async function(t,e="data",r=0,n="end"){let i=await Yw(t);if(!i)return;i=i.split(",");let o=[],s=[],a={};i.forEach(m=>{m?(s.push(m),o.push(1)):o[o.length-1]++});let l=await E0(t,e);n==="end"?n=l:n>l&&(r=l-(n-r),n=l);let h=await Jw(t,e,r,n),p=0;return h.forEach((m,y)=>{let w=m.split(",");for(;p<w.length-1;){let b=o[0];b===1?(a[s[0]].push(w[p]),p++):(a[s[0]].push(w[p].slice(p,b)),p+=b)}}),a},saveToFS:async(t,e="sessionName",r="data")=>(sc||await b0(),new Promise(async n=>{await O0(Ze,r),Ze.writeFile("/"+r+"/"+e,t,i=>{if(i)throw i;n(t)})})),dirExists:O0});c8=Object.freeze({__proto__:null,checkFolder:T0,createDriveFolder:function(t="Brainsatplay_Data"){let e=new Object;e.name=t,e.mimeType="application/vnd.google-apps.folder",window.gapi.client.drive.files.create({resource:e}).then(r=>{console.log(r.result)})},backupToDrive:(t,e="/data")=>{window.gapi.auth2.getAuthInstance().isSignedIn.get()?Ze.readFile(e+"/"+t,(r,n)=>{if(r)throw r;let i=new Blob([n.toString()],{type:"text/csv"});T0(o=>{let s={name:t+".csv",mimeType:"application/vnd.google-apps.spreadsheet",parents:[o.files[0].id]},a=window.gapi.auth.getToken().access_token;var l=new FormData;l.append("metadata",new Blob([JSON.stringify(s)],{type:"application/json"})),l.append("file",i);var h=new XMLHttpRequest;h.open("post","https://www.googleapis.com/upload/drive/v3/files?uploadType=multipart&fields=id"),h.setRequestHeader("Authorization","Bearer "+a),h.responseType="json",h.onload=()=>{console.log("Uploaded file id: ",h.response.id),Zw()},h.send(l)})}):alert("Sign in with Google first!")},listDriveFiles:Zw});x0.regex=/^\s*data:([a-z]+\/[a-z]+(;[a-z\-]+\=[a-z\-]+)?)?(;base64)?,[a-z0-9\!\$\&\'\,\(\)\*\+\,\;\=\-\.\_\~\:\@\/\?\%\s]*\s*$/i;f8=Object.freeze({__proto__:null,dataURLtoBlob:function(t){if(x0(t)){for(var e=t.split(","),r=e[0].match(/:(.*?);/)[1],n=atob(e[1]),i=n.length,o=new Uint8Array(i);i--;)o[i]=n.charCodeAt(i);return new Blob([o],{type:r})}},blobToDataURL:function(t,e){var r=new FileReader;r.onload=function(n){e(n.target.result)},r.readAsDataURL(t)},dataToBlob:async function(t,e="text/plain",r=256e3){let n={filename,data:new Blob([t],{filetype:e})};if(Object.assign(n,props),n.data.size>r){let i=n.data.size,o=0,s=0,a=[];for(;o<i;){let l,h=o+r;if(h>i&&(h=i),l=e==="text/plain"?await n.data.slice(o,h).text():await n.data.slice(o,h).arrayBuffer(),l){let p={filename,data:new Blob([l],{type:e}),chunk:s,start:o,end:h};Object.assign(p,props),a.push(p)}o+=r,s++}return a}return n}});typeof minimongo<"u"&&(Qw=e_());e_=t=>{try{t=new minimongo.IndexedDb}catch{try{t=new minimongo.LocalStorageDb}catch{try{t=new minimongo.MemoryDb}catch{console.error("No DB created!")}}}return t},t_=async(t,e)=>{let r=t[e].find(),n=[];return await r.count()>0&&await Promise.all(r.map(async i=>{i.chunk!==void 0?i.chunk===0&&n.push(i.filename):n.push(i.filename)})),n},Ix=t_,Xw=async(t,e,r)=>{let n,i=t[e].find({filename:r});if(await i.count()>0){let o={};await Promise.all(i.map(async a=>{let l=await a.data.text();a.chunk!==void 0?o[a.chunk]=l:o[0]=l}));let s=Object.keys(o).length;for(let a=0;a<s;a++)n+=o[a]}return n},h8=Object.freeze({__proto__:null,get db(){return Qw},localDB:e_,remoteDB:(t,e,r,n,i,o)=>new minimongo.RemoteDb(e,r,n,i,o),connectDB:(t,e,r,n,i,o)=>{let s=new minimongo.RemoteDb(e,r,n,i,o);return t=new minimongo.HybridDb(t,s)},readData:async(t,e="",r={})=>{if(e)return t[e]||t.addCollection(e),await t[e].findOne(r)},writeData:async(t,e,r={},n=o=>{},i=o=>{})=>{if(e)return t[e]||t.addCollection(e),await t[e].upsert(r,n,i)},readFile:async(t,e,r="")=>{if(!t[e])return;let n,i={filename:r},o=t[e].find(i);return await o.count()>0&&(n=[],await Promise.all(o.map(async s=>{n.push(s)}))),n},readFileChunk:async(t,e,r="",n,i,o,s=h=>{},a=h=>{},l)=>{if(!t[e])return;let h={filename:r};return n&&(h.chunk=n),i&&(h.start=i),o&&(h.end=o),n||i&&o?await t[e].findOne(h,l,s,a):void 0},writeFile:async(t,e,r="",n,i=h=>{},o=h=>{},s={},a="text/plain",l=256e3)=>{let h=t[e].find({filename:r});await h.count()>0&&await Promise.all(h.map(async m=>{t[e].remove(m._id)}));let p={filename:r,data:new Blob([n],{filetype:a})};if(Object.assign(p,s),p.data.size>l){let m=p.data.size,y=0,w=0;for(;y<m;){let b,N=y+l;if(N>m&&(N=m),b=a==="text/plain"?await p.data.slice(y,N).text():await p.data.slice(y,N).arrayBuffer(),b){let O={filename:r,data:new Blob([b],{type:a}),chunk:w,start:y,end:N};Object.assign(O,s),t[e].upsert(O,i,o)}y+=l,w++}}else t[e].upsert(p,i,o)},appendFile:async(t,e,r="",n,i=h=>{},o=h=>{},s={},a="text/plain",l=256e3)=>{let h=t[e].find({filename:r}),p=await h.count(),m=0,y={filename:r,data:new Blob([n],{filetype:a})};if(Object.assign(y,s),p>0)if(await Promise.all(h.map(async w=>{m+=w.size})),y.data.size>l){let w=m,b=p;for(;w<y.data.size+m;){let N,O=w+l;if(O>m&&(O=m),N=a==="text/plain"?await y.data.slice(w,O).text():await y.data.slice(w,O).arrayBuffer(),N){let I={filename:r,data:new Blob([N],{type:a}),chunk:b,start:w,end:O,size:O-w};Object.assign(I,s),t[e].upsert(I,i,o)}w+=l,b++}}else y.chunk=p,y.start=m,y.end=m+y.data.size,t[e].upsert(y,i,o);else t[e].upsert(y,i,o)},getFilenames:t_,listFiles:Ix,getFileSize:async(t,e,r)=>{let n=t[e].find({filename:r}),i=await n.count(),o=0;return i>0&&await Promise.all(n.map(async s=>{o+=s.size})),o},deleteFile:async(t,e,r)=>await t[e].remove(r),writeToCSVFromDB:async(t,e,r)=>{let n=await Xw(e,r);Ya.saveCSV(n,r)},getCSVHeader:async(t,e,r)=>{let n,i=t[e].find({filename:r});return await i.count()>0&&await Promise.all(i.map(async o=>{if(o.chunk!==void 0&&o.chunk===0){let s=await o.data.text();n=s.substring(0,s.indexOf(`
`))}})),n},readFileAsText:Xw})});function Nx(t="state.json",e=Zr){e.subscribe("state",r=>{io.writeFile(t,JSON.stringify(r),"data")})}function ms(n){return re(this,arguments,function*(t,e="state.json",r=Zr){yield io.initFS(["data"]),yield io.dirExists(io.fs,"data");let i=yield new Promise(s=>{io.fs.exists("/data/"+e,a=>{s(a)})}),o;if(i){o=yield io.readFileAsText("state.json","data");try{let s=JSON.parse(o);typeof s=="object"&&(s.loggedInId&&s.loggedInId===(t==null?void 0:t._id)||!s.loggedInId)&&r.setState(s)}catch(s){console.error(s)}}return Nx(e,r),o})}var Zr,Za=mt(()=>{S0();r_();Zr=new oc({route:"/",isLoggedIn:!1,appInitialized:!1,loggedInId:void 0})});function Ax(t,e){return e={exports:{}},t(e,e.exports),e.exports}function m_(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");r===-1&&(r=e);var n=r===e?0:4-r%4;return[r,n]}function Lx(t){var e=m_(t),r=e[0],n=e[1];return(r+n)*3/4-n}function Px(t,e,r){return(e+r)*3/4-r}function Mx(t){var e,r=m_(t),n=r[0],i=r[1],o=new Fx(Px(t,n,i)),s=0,a=i>0?n-4:n,l;for(l=0;l<a;l+=4)e=Qr[t.charCodeAt(l)]<<18|Qr[t.charCodeAt(l+1)]<<12|Qr[t.charCodeAt(l+2)]<<6|Qr[t.charCodeAt(l+3)],o[s++]=e>>16&255,o[s++]=e>>8&255,o[s++]=e&255;return i===2&&(e=Qr[t.charCodeAt(l)]<<2|Qr[t.charCodeAt(l+1)]>>4,o[s++]=e&255),i===1&&(e=Qr[t.charCodeAt(l)]<<10|Qr[t.charCodeAt(l+1)]<<4|Qr[t.charCodeAt(l+2)]>>2,o[s++]=e>>8&255,o[s++]=e&255),o}function jx(t){return Nn[t>>18&63]+Nn[t>>12&63]+Nn[t>>6&63]+Nn[t&63]}function Ux(t,e,r){for(var n,i=[],o=e;o<r;o+=3)n=(t[o]<<16&16711680)+(t[o+1]<<8&65280)+(t[o+2]&255),i.push(jx(n));return i.join("")}function Bx(t){for(var e,r=t.length,n=r%3,i=[],o=16383,s=0,a=r-n;s<a;s+=o)i.push(Ux(t,s,s+o>a?a:s+o));return n===1?(e=t[r-1],i.push(Nn[e>>2]+Nn[e<<4&63]+"==")):n===2&&(e=(t[r-2]<<8)+t[r-1],i.push(Nn[e>>10]+Nn[e>>4&63]+Nn[e<<2&63]+"=")),i.join("")}function L0(t,e){C0(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}function ac(t){return t&&t.Math==Math&&t}function v_(){return ac(typeof globalThis=="object"&&globalThis)||ac(typeof window=="object"&&window)||ac(typeof self=="object"&&self)||ac(typeof global=="object"&&global)||Function("return this")()}function Wx(){var t=v_();return typeof t.navigator=="object"&&t.navigator.product==="ReactNative"}function Hx(t){return["[object ArrayBuffer]","[object SharedArrayBuffer]"].includes(Object.prototype.toString.call(t))}function P0(t){return Object.prototype.toString.call(t)==="[object Uint8Array]"}function Gx(t){return Object.prototype.toString.call(t)==="[object RegExp]"}function Jx(t){return tl(t)&&Object.prototype.toString.call(t)==="[object Date]"}function tl(t){return typeof t=="object"&&t!==null}function cc(t,e){var r=!1;function n(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];return r||(console.warn(e),r=!0),t.apply(this,i)}return n}function lc(t){if(ArrayBuffer.isView(t))return qe.from(t.buffer,t.byteOffset,t.byteLength);if(Hx(t))return qe.from(t);throw new bt("Must use either Buffer or TypedArray")}function Kx(t){return tl(t)&&t.$id!=null&&typeof t.$ref=="string"&&(t.$db==null||typeof t.$db=="string")}function d_(t){return!isNaN(parseInt(t,10))}function sk(t){var e=ke.fromNumber(1e9),r=ke.fromNumber(0);if(!t.parts[0]&&!t.parts[1]&&!t.parts[2]&&!t.parts[3])return{quotient:t,rem:r};for(var n=0;n<=3;n++)r=r.shiftLeft(32),r=r.add(new ke(t.parts[n],0)),t.parts[n]=r.div(e).low,r=r.modulo(e);return{quotient:t,rem:r}}function ak(t,e){if(!t&&!e)return{high:ke.fromNumber(0),low:ke.fromNumber(0)};var r=t.shiftRightUnsigned(32),n=new ke(t.getLowBits(),0),i=e.shiftRightUnsigned(32),o=new ke(e.getLowBits(),0),s=r.multiply(i),a=r.multiply(o),l=n.multiply(i),h=n.multiply(o);return s=s.add(a.shiftRightUnsigned(32)),a=new ke(a.getLowBits(),0).add(l).add(h.shiftRightUnsigned(32)),s=s.add(a.shiftRightUnsigned(32)),h=a.shiftLeft(32).add(new ke(h.getLowBits(),0)),{high:s,low:h}}function lk(t,e){var r=t.high>>>0,n=e.high>>>0;if(r<n)return!0;if(r===n){var i=t.low>>>0,o=e.low>>>0;if(i<o)return!0}return!1}function ws(t,e){throw new bt('"'+t+'" is not a valid Decimal128 string - '+e)}function ck(t){return t.split("").sort().join("")}function hk(t){return tl(t)&&Reflect.has(t,"_bsontype")&&typeof t._bsontype=="string"}function I_(t,e){if(e===void 0&&(e={}),typeof t=="number"){if(e.relaxed||e.legacy)return t;if(Math.floor(t)===t){if(t>=T_&&t<=O_)return new dc(t);if(t>=k_&&t<=x_)return ke.fromNumber(t)}return new hc(t)}if(t==null||typeof t!="object")return t;if(t.$undefined)return null;for(var r=Object.keys(t).filter(function(m){return m.startsWith("$")&&t[m]!=null}),n=0;n<r.length;n++){var i=dk[r[n]];if(i)return i.fromExtendedJSON(t,e)}if(t.$date!=null){var o=t.$date,s=new Date;return e.legacy?typeof o=="number"?s.setTime(o):typeof o=="string"&&s.setTime(Date.parse(o)):typeof o=="string"?s.setTime(Date.parse(o)):ke.isLong(o)?s.setTime(o.toNumber()):typeof o=="number"&&e.relaxed&&s.setTime(o),s}if(t.$code!=null){var a=Object.assign({},t);return t.$scope&&(a.$scope=I_(t.$scope)),fc.fromExtendedJSON(t)}if(Kx(t)||t.$dbPointer){var l=t.$ref?t:t.$dbPointer;if(l instanceof Qa)return l;var h=Object.keys(l).filter(function(m){return m.startsWith("$")}),p=!0;if(h.forEach(function(m){["$ref","$id","$db"].indexOf(m)===-1&&(p=!1)}),p)return Qa.fromExtendedJSON(l)}return t}function pk(t,e){return t.map(function(r,n){e.seenObjects.push({propertyName:"index "+n,obj:null});try{return wi(r,e)}finally{e.seenObjects.pop()}})}function p_(t){var e=t.toISOString();return t.getUTCMilliseconds()!==0?e:e.slice(0,-5)+"Z"}function wi(t,e){if((typeof t=="object"||typeof t=="function")&&t!==null){var r=e.seenObjects.findIndex(function(I){return I.obj===t});if(r!==-1){var n=e.seenObjects.map(function(I){return I.propertyName}),i=n.slice(0,r).map(function(I){return I+" -> "}).join(""),o=n[r],s=" -> "+n.slice(r+1,n.length-1).map(function(I){return I+" -> "}).join(""),a=n[n.length-1],l=" ".repeat(i.length+o.length/2),h="-".repeat(s.length+(o.length+a.length)/2-1);throw new bt(`Converting circular structure to EJSON:
`+("    "+i+o+s+a+`
`)+("    "+l+"\\"+h+"/"))}e.seenObjects[e.seenObjects.length-1].obj=t}if(Array.isArray(t))return pk(t,e);if(t===void 0)return null;if(t instanceof Date||Jx(t)){var p=t.getTime(),m=p>-1&&p<2534023188e5;return e.legacy?e.relaxed&&m?{$date:t.getTime()}:{$date:p_(t)}:e.relaxed&&m?{$date:p_(t)}:{$date:{$numberLong:t.getTime().toString()}}}if(typeof t=="number"&&(!e.relaxed||!isFinite(t))){if(Math.floor(t)===t){var y=t>=T_&&t<=O_,w=t>=k_&&t<=x_;if(y)return{$numberInt:t.toString()};if(w)return{$numberLong:t.toString()}}return{$numberDouble:t.toString()}}if(t instanceof RegExp||Gx(t)){var b=t.flags;if(b===void 0){var N=t.toString().match(/[gimuy]*$/);N&&(b=N[0])}var O=new el(t.source,b);return O.toExtendedJSON(e)}return t!=null&&typeof t=="object"?gk(t,e):t}function gk(t,e){if(t==null||typeof t!="object")throw new ao("not an object instance");var r=t._bsontype;if(typeof r>"u"){var n={};for(var i in t){e.seenObjects.push({propertyName:i,obj:null});try{n[i]=wi(t[i],e)}finally{e.seenObjects.pop()}}return n}else if(hk(t)){var o=t;if(typeof o.toExtendedJSON!="function"){var s=yk[t._bsontype];if(!s)throw new bt("Unrecognized or invalid _bsontype: "+t._bsontype);o=s(o)}return r==="Code"&&o.scope?o=new fc(o.code,wi(o.scope,e)):r==="DBRef"&&o.oid&&(o=new Qa(wi(o.collection,e),wi(o.oid,e),wi(o.db,e),wi(o.fields,e))),o.toExtendedJSON(e)}else throw new ao("_bsontype must be a string, but was: "+typeof r)}var Dx,Rx,Cx,Nn,Qr,Fx,k0,oo,n_,I0,zx,Vx,vs,uc,qe,C0,ao,bt,qx,$x,w_,Yx,__,F0,i_,N0,A0,S_,lo,fc,Qa,Xr,o_,Zx,Ss,b_,s_,a_,l_,ke,Xx,Qx,ek,Xa,D0,u_,tk,R0,c_,f_,rk,nk,h_,ik,ok,M0,hc,dc,j0,U0,uk,so,_s,Sr,el,B0,fk,E_,O_,T_,x_,k_,dk,yk,_i,y_,g_,m8,v8,mk,vk,w8,_8,wk,S8,z0=mt(()=>{Dx=Lx,Rx=Mx,Cx=Bx,Nn=[],Qr=[],Fx=typeof Uint8Array<"u"?Uint8Array:Array,k0="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(oo=0,n_=k0.length;oo<n_;++oo)Nn[oo]=k0[oo],Qr[k0.charCodeAt(oo)]=oo;Qr["-".charCodeAt(0)]=62;Qr["_".charCodeAt(0)]=63;I0={byteLength:Dx,toByteArray:Rx,fromByteArray:Cx};zx=function(e,r,n,i,o){var s,a,l=o*8-i-1,h=(1<<l)-1,p=h>>1,m=-7,y=n?o-1:0,w=n?-1:1,b=e[r+y];for(y+=w,s=b&(1<<-m)-1,b>>=-m,m+=l;m>0;s=s*256+e[r+y],y+=w,m-=8);for(a=s&(1<<-m)-1,s>>=-m,m+=i;m>0;a=a*256+e[r+y],y+=w,m-=8);if(s===0)s=1-p;else{if(s===h)return a?NaN:(b?-1:1)*(1/0);a=a+Math.pow(2,i),s=s-p}return(b?-1:1)*a*Math.pow(2,s-i)},Vx=function(e,r,n,i,o,s){var a,l,h,p=s*8-o-1,m=(1<<p)-1,y=m>>1,w=o===23?Math.pow(2,-24)-Math.pow(2,-77):0,b=i?0:s-1,N=i?1:-1,O=r<0||r===0&&1/r<0?1:0;for(r=Math.abs(r),isNaN(r)||r===1/0?(l=isNaN(r)?1:0,a=m):(a=Math.floor(Math.log(r)/Math.LN2),r*(h=Math.pow(2,-a))<1&&(a--,h*=2),a+y>=1?r+=w/h:r+=w*Math.pow(2,1-y),r*h>=2&&(a++,h/=2),a+y>=m?(l=0,a=m):a+y>=1?(l=(r*h-1)*Math.pow(2,o),a=a+y):(l=r*Math.pow(2,y-1)*Math.pow(2,o),a=0));o>=8;e[n+b]=l&255,b+=N,l/=256,o-=8);for(a=a<<o|l,p+=o;p>0;e[n+b]=a&255,b+=N,a/=256,p-=8);e[n+b-N]|=O*128},vs={read:zx,write:Vx},uc=Ax(function(t,e){var r=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=s,e.SlowBuffer=I,e.INSPECT_MAX_BYTES=50;var n=2147483647;e.kMaxLength=n,s.TYPED_ARRAY_SUPPORT=i(),!s.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function i(){try{var L=new Uint8Array(1),E={foo:function(){return 42}};return Object.setPrototypeOf(E,Uint8Array.prototype),Object.setPrototypeOf(L,E),L.foo()===42}catch{return!1}}Object.defineProperty(s.prototype,"parent",{enumerable:!0,get:function(){if(!!s.isBuffer(this))return this.buffer}}),Object.defineProperty(s.prototype,"offset",{enumerable:!0,get:function(){if(!!s.isBuffer(this))return this.byteOffset}});function o(L){if(L>n)throw new RangeError('The value "'+L+'" is invalid for option "size"');var E=new Uint8Array(L);return Object.setPrototypeOf(E,s.prototype),E}function s(L,E,k){if(typeof L=="number"){if(typeof E=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return p(L)}return a(L,E,k)}s.poolSize=8192;function a(L,E,k){if(typeof L=="string")return m(L,E);if(ArrayBuffer.isView(L))return w(L);if(L==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+babelHelpers.typeof(L));if(Z(L,ArrayBuffer)||L&&Z(L.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Z(L,SharedArrayBuffer)||L&&Z(L.buffer,SharedArrayBuffer)))return b(L,E,k);if(typeof L=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var U=L.valueOf&&L.valueOf();if(U!=null&&U!==L)return s.from(U,E,k);var ee=N(L);if(ee)return ee;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof L[Symbol.toPrimitive]=="function")return s.from(L[Symbol.toPrimitive]("string"),E,k);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+babelHelpers.typeof(L))}s.from=function(L,E,k){return a(L,E,k)},Object.setPrototypeOf(s.prototype,Uint8Array.prototype),Object.setPrototypeOf(s,Uint8Array);function l(L){if(typeof L!="number")throw new TypeError('"size" argument must be of type number');if(L<0)throw new RangeError('The value "'+L+'" is invalid for option "size"')}function h(L,E,k){return l(L),L<=0?o(L):E!==void 0?typeof k=="string"?o(L).fill(E,k):o(L).fill(E):o(L)}s.alloc=function(L,E,k){return h(L,E,k)};function p(L){return l(L),o(L<0?0:O(L)|0)}s.allocUnsafe=function(L){return p(L)},s.allocUnsafeSlow=function(L){return p(L)};function m(L,E){if((typeof E!="string"||E==="")&&(E="utf8"),!s.isEncoding(E))throw new TypeError("Unknown encoding: "+E);var k=R(L,E)|0,U=o(k),ee=U.write(L,E);return ee!==k&&(U=U.slice(0,ee)),U}function y(L){for(var E=L.length<0?0:O(L.length)|0,k=o(E),U=0;U<E;U+=1)k[U]=L[U]&255;return k}function w(L){if(Z(L,Uint8Array)){var E=new Uint8Array(L);return b(E.buffer,E.byteOffset,E.byteLength)}return y(L)}function b(L,E,k){if(E<0||L.byteLength<E)throw new RangeError('"offset" is outside of buffer bounds');if(L.byteLength<E+(k||0))throw new RangeError('"length" is outside of buffer bounds');var U;return E===void 0&&k===void 0?U=new Uint8Array(L):k===void 0?U=new Uint8Array(L,E):U=new Uint8Array(L,E,k),Object.setPrototypeOf(U,s.prototype),U}function N(L){if(s.isBuffer(L)){var E=O(L.length)|0,k=o(E);return k.length===0||L.copy(k,0,0,E),k}if(L.length!==void 0)return typeof L.length!="number"||K(L.length)?o(0):y(L);if(L.type==="Buffer"&&Array.isArray(L.data))return y(L.data)}function O(L){if(L>=n)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+n.toString(16)+" bytes");return L|0}function I(L){return+L!=L&&(L=0),s.alloc(+L)}s.isBuffer=function(E){return E!=null&&E._isBuffer===!0&&E!==s.prototype},s.compare=function(E,k){if(Z(E,Uint8Array)&&(E=s.from(E,E.offset,E.byteLength)),Z(k,Uint8Array)&&(k=s.from(k,k.offset,k.byteLength)),!s.isBuffer(E)||!s.isBuffer(k))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(E===k)return 0;for(var U=E.length,ee=k.length,he=0,de=Math.min(U,ee);he<de;++he)if(E[he]!==k[he]){U=E[he],ee=k[he];break}return U<ee?-1:ee<U?1:0},s.isEncoding=function(E){switch(String(E).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},s.concat=function(E,k){if(!Array.isArray(E))throw new TypeError('"list" argument must be an Array of Buffers');if(E.length===0)return s.alloc(0);var U;if(k===void 0)for(k=0,U=0;U<E.length;++U)k+=E[U].length;var ee=s.allocUnsafe(k),he=0;for(U=0;U<E.length;++U){var de=E[U];if(Z(de,Uint8Array))he+de.length>ee.length?s.from(de).copy(ee,he):Uint8Array.prototype.set.call(ee,de,he);else if(s.isBuffer(de))de.copy(ee,he);else throw new TypeError('"list" argument must be an Array of Buffers');he+=de.length}return ee};function R(L,E){if(s.isBuffer(L))return L.length;if(ArrayBuffer.isView(L)||Z(L,ArrayBuffer))return L.byteLength;if(typeof L!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+babelHelpers.typeof(L));var k=L.length,U=arguments.length>2&&arguments[2]===!0;if(!U&&k===0)return 0;for(var ee=!1;;)switch(E){case"ascii":case"latin1":case"binary":return k;case"utf8":case"utf-8":return Ae(L).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return k*2;case"hex":return k>>>1;case"base64":return j(L).length;default:if(ee)return U?-1:Ae(L).length;E=(""+E).toLowerCase(),ee=!0}}s.byteLength=R;function J(L,E,k){var U=!1;if((E===void 0||E<0)&&(E=0),E>this.length||((k===void 0||k>this.length)&&(k=this.length),k<=0)||(k>>>=0,E>>>=0,k<=E))return"";for(L||(L="utf8");;)switch(L){case"hex":return B(this,E,k);case"utf8":case"utf-8":return ae(this,E,k);case"ascii":return C(this,E,k);case"latin1":case"binary":return ie(this,E,k);case"base64":return ue(this,E,k);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return V(this,E,k);default:if(U)throw new TypeError("Unknown encoding: "+L);L=(L+"").toLowerCase(),U=!0}}s.prototype._isBuffer=!0;function q(L,E,k){var U=L[E];L[E]=L[k],L[k]=U}s.prototype.swap16=function(){var E=this.length;if(E%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var k=0;k<E;k+=2)q(this,k,k+1);return this},s.prototype.swap32=function(){var E=this.length;if(E%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var k=0;k<E;k+=4)q(this,k,k+3),q(this,k+1,k+2);return this},s.prototype.swap64=function(){var E=this.length;if(E%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var k=0;k<E;k+=8)q(this,k,k+7),q(this,k+1,k+6),q(this,k+2,k+5),q(this,k+3,k+4);return this},s.prototype.toString=function(){var E=this.length;return E===0?"":arguments.length===0?ae(this,0,E):J.apply(this,arguments)},s.prototype.toLocaleString=s.prototype.toString,s.prototype.equals=function(E){if(!s.isBuffer(E))throw new TypeError("Argument must be a Buffer");return this===E?!0:s.compare(this,E)===0},s.prototype.inspect=function(){var E="",k=e.INSPECT_MAX_BYTES;return E=this.toString("hex",0,k).replace(/(.{2})/g,"$1 ").trim(),this.length>k&&(E+=" ... "),"<Buffer "+E+">"},r&&(s.prototype[r]=s.prototype.inspect),s.prototype.compare=function(E,k,U,ee,he){if(Z(E,Uint8Array)&&(E=s.from(E,E.offset,E.byteLength)),!s.isBuffer(E))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+babelHelpers.typeof(E));if(k===void 0&&(k=0),U===void 0&&(U=E?E.length:0),ee===void 0&&(ee=0),he===void 0&&(he=this.length),k<0||U>E.length||ee<0||he>this.length)throw new RangeError("out of range index");if(ee>=he&&k>=U)return 0;if(ee>=he)return-1;if(k>=U)return 1;if(k>>>=0,U>>>=0,ee>>>=0,he>>>=0,this===E)return 0;for(var de=he-ee,Le=U-k,Re=Math.min(de,Le),Ke=this.slice(ee,he),Lt=E.slice(k,U),rt=0;rt<Re;++rt)if(Ke[rt]!==Lt[rt]){de=Ke[rt],Le=Lt[rt];break}return de<Le?-1:Le<de?1:0};function G(L,E,k,U,ee){if(L.length===0)return-1;if(typeof k=="string"?(U=k,k=0):k>2147483647?k=2147483647:k<-2147483648&&(k=-2147483648),k=+k,K(k)&&(k=ee?0:L.length-1),k<0&&(k=L.length+k),k>=L.length){if(ee)return-1;k=L.length-1}else if(k<0)if(ee)k=0;else return-1;if(typeof E=="string"&&(E=s.from(E,U)),s.isBuffer(E))return E.length===0?-1:F(L,E,k,U,ee);if(typeof E=="number")return E=E&255,typeof Uint8Array.prototype.indexOf=="function"?ee?Uint8Array.prototype.indexOf.call(L,E,k):Uint8Array.prototype.lastIndexOf.call(L,E,k):F(L,[E],k,U,ee);throw new TypeError("val must be string, number or Buffer")}function F(L,E,k,U,ee){var he=1,de=L.length,Le=E.length;if(U!==void 0&&(U=String(U).toLowerCase(),U==="ucs2"||U==="ucs-2"||U==="utf16le"||U==="utf-16le")){if(L.length<2||E.length<2)return-1;he=2,de/=2,Le/=2,k/=2}function Re(Ps,Ci){return he===1?Ps[Ci]:Ps.readUInt16BE(Ci*he)}var Ke;if(ee){var Lt=-1;for(Ke=k;Ke<de;Ke++)if(Re(L,Ke)===Re(E,Lt===-1?0:Ke-Lt)){if(Lt===-1&&(Lt=Ke),Ke-Lt+1===Le)return Lt*he}else Lt!==-1&&(Ke-=Ke-Lt),Lt=-1}else for(k+Le>de&&(k=de-Le),Ke=k;Ke>=0;Ke--){for(var rt=!0,To=0;To<Le;To++)if(Re(L,Ke+To)!==Re(E,To)){rt=!1;break}if(rt)return Ke}return-1}s.prototype.includes=function(E,k,U){return this.indexOf(E,k,U)!==-1},s.prototype.indexOf=function(E,k,U){return G(this,E,k,U,!0)},s.prototype.lastIndexOf=function(E,k,U){return G(this,E,k,U,!1)};function z(L,E,k,U){k=Number(k)||0;var ee=L.length-k;U?(U=Number(U),U>ee&&(U=ee)):U=ee;var he=E.length;U>he/2&&(U=he/2);for(var de=0;de<U;++de){var Le=parseInt(E.substr(de*2,2),16);if(K(Le))return de;L[k+de]=Le}return de}function S(L,E,k,U){return H(Ae(E,L.length-k),L,k,U)}function W(L,E,k,U){return H(T(E),L,k,U)}function te(L,E,k,U){return H(j(E),L,k,U)}function X(L,E,k,U){return H(D(E,L.length-k),L,k,U)}s.prototype.write=function(E,k,U,ee){if(k===void 0)ee="utf8",U=this.length,k=0;else if(U===void 0&&typeof k=="string")ee=k,U=this.length,k=0;else if(isFinite(k))k=k>>>0,isFinite(U)?(U=U>>>0,ee===void 0&&(ee="utf8")):(ee=U,U=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var he=this.length-k;if((U===void 0||U>he)&&(U=he),E.length>0&&(U<0||k<0)||k>this.length)throw new RangeError("Attempt to write outside buffer bounds");ee||(ee="utf8");for(var de=!1;;)switch(ee){case"hex":return z(this,E,k,U);case"utf8":case"utf-8":return S(this,E,k,U);case"ascii":case"latin1":case"binary":return W(this,E,k,U);case"base64":return te(this,E,k,U);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return X(this,E,k,U);default:if(de)throw new TypeError("Unknown encoding: "+ee);ee=(""+ee).toLowerCase(),de=!0}},s.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function ue(L,E,k){return E===0&&k===L.length?I0.fromByteArray(L):I0.fromByteArray(L.slice(E,k))}function ae(L,E,k){k=Math.min(L.length,k);for(var U=[],ee=E;ee<k;){var he=L[ee],de=null,Le=he>239?4:he>223?3:he>191?2:1;if(ee+Le<=k){var Re,Ke,Lt,rt;switch(Le){case 1:he<128&&(de=he);break;case 2:Re=L[ee+1],(Re&192)===128&&(rt=(he&31)<<6|Re&63,rt>127&&(de=rt));break;case 3:Re=L[ee+1],Ke=L[ee+2],(Re&192)===128&&(Ke&192)===128&&(rt=(he&15)<<12|(Re&63)<<6|Ke&63,rt>2047&&(rt<55296||rt>57343)&&(de=rt));break;case 4:Re=L[ee+1],Ke=L[ee+2],Lt=L[ee+3],(Re&192)===128&&(Ke&192)===128&&(Lt&192)===128&&(rt=(he&15)<<18|(Re&63)<<12|(Ke&63)<<6|Lt&63,rt>65535&&rt<1114112&&(de=rt))}}de===null?(de=65533,Le=1):de>65535&&(de-=65536,U.push(de>>>10&1023|55296),de=56320|de&1023),U.push(de),ee+=Le}return M(U)}var ge=4096;function M(L){var E=L.length;if(E<=ge)return String.fromCharCode.apply(String,L);for(var k="",U=0;U<E;)k+=String.fromCharCode.apply(String,L.slice(U,U+=ge));return k}function C(L,E,k){var U="";k=Math.min(L.length,k);for(var ee=E;ee<k;++ee)U+=String.fromCharCode(L[ee]&127);return U}function ie(L,E,k){var U="";k=Math.min(L.length,k);for(var ee=E;ee<k;++ee)U+=String.fromCharCode(L[ee]);return U}function B(L,E,k){var U=L.length;(!E||E<0)&&(E=0),(!k||k<0||k>U)&&(k=U);for(var ee="",he=E;he<k;++he)ee+=Se[L[he]];return ee}function V(L,E,k){for(var U=L.slice(E,k),ee="",he=0;he<U.length-1;he+=2)ee+=String.fromCharCode(U[he]+U[he+1]*256);return ee}s.prototype.slice=function(E,k){var U=this.length;E=~~E,k=k===void 0?U:~~k,E<0?(E+=U,E<0&&(E=0)):E>U&&(E=U),k<0?(k+=U,k<0&&(k=0)):k>U&&(k=U),k<E&&(k=E);var ee=this.subarray(E,k);return Object.setPrototypeOf(ee,s.prototype),ee};function Y(L,E,k){if(L%1!==0||L<0)throw new RangeError("offset is not uint");if(L+E>k)throw new RangeError("Trying to access beyond buffer length")}s.prototype.readUintLE=s.prototype.readUIntLE=function(E,k,U){E=E>>>0,k=k>>>0,U||Y(E,k,this.length);for(var ee=this[E],he=1,de=0;++de<k&&(he*=256);)ee+=this[E+de]*he;return ee},s.prototype.readUintBE=s.prototype.readUIntBE=function(E,k,U){E=E>>>0,k=k>>>0,U||Y(E,k,this.length);for(var ee=this[E+--k],he=1;k>0&&(he*=256);)ee+=this[E+--k]*he;return ee},s.prototype.readUint8=s.prototype.readUInt8=function(E,k){return E=E>>>0,k||Y(E,1,this.length),this[E]},s.prototype.readUint16LE=s.prototype.readUInt16LE=function(E,k){return E=E>>>0,k||Y(E,2,this.length),this[E]|this[E+1]<<8},s.prototype.readUint16BE=s.prototype.readUInt16BE=function(E,k){return E=E>>>0,k||Y(E,2,this.length),this[E]<<8|this[E+1]},s.prototype.readUint32LE=s.prototype.readUInt32LE=function(E,k){return E=E>>>0,k||Y(E,4,this.length),(this[E]|this[E+1]<<8|this[E+2]<<16)+this[E+3]*16777216},s.prototype.readUint32BE=s.prototype.readUInt32BE=function(E,k){return E=E>>>0,k||Y(E,4,this.length),this[E]*16777216+(this[E+1]<<16|this[E+2]<<8|this[E+3])},s.prototype.readIntLE=function(E,k,U){E=E>>>0,k=k>>>0,U||Y(E,k,this.length);for(var ee=this[E],he=1,de=0;++de<k&&(he*=256);)ee+=this[E+de]*he;return he*=128,ee>=he&&(ee-=Math.pow(2,8*k)),ee},s.prototype.readIntBE=function(E,k,U){E=E>>>0,k=k>>>0,U||Y(E,k,this.length);for(var ee=k,he=1,de=this[E+--ee];ee>0&&(he*=256);)de+=this[E+--ee]*he;return he*=128,de>=he&&(de-=Math.pow(2,8*k)),de},s.prototype.readInt8=function(E,k){return E=E>>>0,k||Y(E,1,this.length),this[E]&128?(255-this[E]+1)*-1:this[E]},s.prototype.readInt16LE=function(E,k){E=E>>>0,k||Y(E,2,this.length);var U=this[E]|this[E+1]<<8;return U&32768?U|4294901760:U},s.prototype.readInt16BE=function(E,k){E=E>>>0,k||Y(E,2,this.length);var U=this[E+1]|this[E]<<8;return U&32768?U|4294901760:U},s.prototype.readInt32LE=function(E,k){return E=E>>>0,k||Y(E,4,this.length),this[E]|this[E+1]<<8|this[E+2]<<16|this[E+3]<<24},s.prototype.readInt32BE=function(E,k){return E=E>>>0,k||Y(E,4,this.length),this[E]<<24|this[E+1]<<16|this[E+2]<<8|this[E+3]},s.prototype.readFloatLE=function(E,k){return E=E>>>0,k||Y(E,4,this.length),vs.read(this,E,!0,23,4)},s.prototype.readFloatBE=function(E,k){return E=E>>>0,k||Y(E,4,this.length),vs.read(this,E,!1,23,4)},s.prototype.readDoubleLE=function(E,k){return E=E>>>0,k||Y(E,8,this.length),vs.read(this,E,!0,52,8)},s.prototype.readDoubleBE=function(E,k){return E=E>>>0,k||Y(E,8,this.length),vs.read(this,E,!1,52,8)};function ce(L,E,k,U,ee,he){if(!s.isBuffer(L))throw new TypeError('"buffer" argument must be a Buffer instance');if(E>ee||E<he)throw new RangeError('"value" argument is out of bounds');if(k+U>L.length)throw new RangeError("Index out of range")}s.prototype.writeUintLE=s.prototype.writeUIntLE=function(E,k,U,ee){if(E=+E,k=k>>>0,U=U>>>0,!ee){var he=Math.pow(2,8*U)-1;ce(this,E,k,U,he,0)}var de=1,Le=0;for(this[k]=E&255;++Le<U&&(de*=256);)this[k+Le]=E/de&255;return k+U},s.prototype.writeUintBE=s.prototype.writeUIntBE=function(E,k,U,ee){if(E=+E,k=k>>>0,U=U>>>0,!ee){var he=Math.pow(2,8*U)-1;ce(this,E,k,U,he,0)}var de=U-1,Le=1;for(this[k+de]=E&255;--de>=0&&(Le*=256);)this[k+de]=E/Le&255;return k+U},s.prototype.writeUint8=s.prototype.writeUInt8=function(E,k,U){return E=+E,k=k>>>0,U||ce(this,E,k,1,255,0),this[k]=E&255,k+1},s.prototype.writeUint16LE=s.prototype.writeUInt16LE=function(E,k,U){return E=+E,k=k>>>0,U||ce(this,E,k,2,65535,0),this[k]=E&255,this[k+1]=E>>>8,k+2},s.prototype.writeUint16BE=s.prototype.writeUInt16BE=function(E,k,U){return E=+E,k=k>>>0,U||ce(this,E,k,2,65535,0),this[k]=E>>>8,this[k+1]=E&255,k+2},s.prototype.writeUint32LE=s.prototype.writeUInt32LE=function(E,k,U){return E=+E,k=k>>>0,U||ce(this,E,k,4,4294967295,0),this[k+3]=E>>>24,this[k+2]=E>>>16,this[k+1]=E>>>8,this[k]=E&255,k+4},s.prototype.writeUint32BE=s.prototype.writeUInt32BE=function(E,k,U){return E=+E,k=k>>>0,U||ce(this,E,k,4,4294967295,0),this[k]=E>>>24,this[k+1]=E>>>16,this[k+2]=E>>>8,this[k+3]=E&255,k+4},s.prototype.writeIntLE=function(E,k,U,ee){if(E=+E,k=k>>>0,!ee){var he=Math.pow(2,8*U-1);ce(this,E,k,U,he-1,-he)}var de=0,Le=1,Re=0;for(this[k]=E&255;++de<U&&(Le*=256);)E<0&&Re===0&&this[k+de-1]!==0&&(Re=1),this[k+de]=(E/Le>>0)-Re&255;return k+U},s.prototype.writeIntBE=function(E,k,U,ee){if(E=+E,k=k>>>0,!ee){var he=Math.pow(2,8*U-1);ce(this,E,k,U,he-1,-he)}var de=U-1,Le=1,Re=0;for(this[k+de]=E&255;--de>=0&&(Le*=256);)E<0&&Re===0&&this[k+de+1]!==0&&(Re=1),this[k+de]=(E/Le>>0)-Re&255;return k+U},s.prototype.writeInt8=function(E,k,U){return E=+E,k=k>>>0,U||ce(this,E,k,1,127,-128),E<0&&(E=255+E+1),this[k]=E&255,k+1},s.prototype.writeInt16LE=function(E,k,U){return E=+E,k=k>>>0,U||ce(this,E,k,2,32767,-32768),this[k]=E&255,this[k+1]=E>>>8,k+2},s.prototype.writeInt16BE=function(E,k,U){return E=+E,k=k>>>0,U||ce(this,E,k,2,32767,-32768),this[k]=E>>>8,this[k+1]=E&255,k+2},s.prototype.writeInt32LE=function(E,k,U){return E=+E,k=k>>>0,U||ce(this,E,k,4,2147483647,-2147483648),this[k]=E&255,this[k+1]=E>>>8,this[k+2]=E>>>16,this[k+3]=E>>>24,k+4},s.prototype.writeInt32BE=function(E,k,U){return E=+E,k=k>>>0,U||ce(this,E,k,4,2147483647,-2147483648),E<0&&(E=4294967295+E+1),this[k]=E>>>24,this[k+1]=E>>>16,this[k+2]=E>>>8,this[k+3]=E&255,k+4};function oe(L,E,k,U,ee,he){if(k+U>L.length)throw new RangeError("Index out of range");if(k<0)throw new RangeError("Index out of range")}function ne(L,E,k,U,ee){return E=+E,k=k>>>0,ee||oe(L,E,k,4),vs.write(L,E,k,U,23,4),k+4}s.prototype.writeFloatLE=function(E,k,U){return ne(this,E,k,!0,U)},s.prototype.writeFloatBE=function(E,k,U){return ne(this,E,k,!1,U)};function se(L,E,k,U,ee){return E=+E,k=k>>>0,ee||oe(L,E,k,8),vs.write(L,E,k,U,52,8),k+8}s.prototype.writeDoubleLE=function(E,k,U){return se(this,E,k,!0,U)},s.prototype.writeDoubleBE=function(E,k,U){return se(this,E,k,!1,U)},s.prototype.copy=function(E,k,U,ee){if(!s.isBuffer(E))throw new TypeError("argument should be a Buffer");if(U||(U=0),!ee&&ee!==0&&(ee=this.length),k>=E.length&&(k=E.length),k||(k=0),ee>0&&ee<U&&(ee=U),ee===U||E.length===0||this.length===0)return 0;if(k<0)throw new RangeError("targetStart out of bounds");if(U<0||U>=this.length)throw new RangeError("Index out of range");if(ee<0)throw new RangeError("sourceEnd out of bounds");ee>this.length&&(ee=this.length),E.length-k<ee-U&&(ee=E.length-k+U);var he=ee-U;return this===E&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(k,U,ee):Uint8Array.prototype.set.call(E,this.subarray(U,ee),k),he},s.prototype.fill=function(E,k,U,ee){if(typeof E=="string"){if(typeof k=="string"?(ee=k,k=0,U=this.length):typeof U=="string"&&(ee=U,U=this.length),ee!==void 0&&typeof ee!="string")throw new TypeError("encoding must be a string");if(typeof ee=="string"&&!s.isEncoding(ee))throw new TypeError("Unknown encoding: "+ee);if(E.length===1){var he=E.charCodeAt(0);(ee==="utf8"&&he<128||ee==="latin1")&&(E=he)}}else typeof E=="number"?E=E&255:typeof E=="boolean"&&(E=Number(E));if(k<0||this.length<k||this.length<U)throw new RangeError("Out of range index");if(U<=k)return this;k=k>>>0,U=U===void 0?this.length:U>>>0,E||(E=0);var de;if(typeof E=="number")for(de=k;de<U;++de)this[de]=E;else{var Le=s.isBuffer(E)?E:s.from(E,ee),Re=Le.length;if(Re===0)throw new TypeError('The value "'+E+'" is invalid for argument "value"');for(de=0;de<U-k;++de)this[de+k]=Le[de%Re]}return this};var ye=/[^+/0-9A-Za-z-_]/g;function Ee(L){if(L=L.split("=")[0],L=L.trim().replace(ye,""),L.length<2)return"";for(;L.length%4!==0;)L=L+"=";return L}function Ae(L,E){E=E||1/0;for(var k,U=L.length,ee=null,he=[],de=0;de<U;++de){if(k=L.charCodeAt(de),k>55295&&k<57344){if(!ee){if(k>56319){(E-=3)>-1&&he.push(239,191,189);continue}else if(de+1===U){(E-=3)>-1&&he.push(239,191,189);continue}ee=k;continue}if(k<56320){(E-=3)>-1&&he.push(239,191,189),ee=k;continue}k=(ee-55296<<10|k-56320)+65536}else ee&&(E-=3)>-1&&he.push(239,191,189);if(ee=null,k<128){if((E-=1)<0)break;he.push(k)}else if(k<2048){if((E-=2)<0)break;he.push(k>>6|192,k&63|128)}else if(k<65536){if((E-=3)<0)break;he.push(k>>12|224,k>>6&63|128,k&63|128)}else if(k<1114112){if((E-=4)<0)break;he.push(k>>18|240,k>>12&63|128,k>>6&63|128,k&63|128)}else throw new Error("Invalid code point")}return he}function T(L){for(var E=[],k=0;k<L.length;++k)E.push(L.charCodeAt(k)&255);return E}function D(L,E){for(var k,U,ee,he=[],de=0;de<L.length&&!((E-=2)<0);++de)k=L.charCodeAt(de),U=k>>8,ee=k%256,he.push(ee),he.push(U);return he}function j(L){return I0.toByteArray(Ee(L))}function H(L,E,k,U){for(var ee=0;ee<U&&!(ee+k>=E.length||ee>=L.length);++ee)E[ee+k]=L[ee];return ee}function Z(L,E){return L instanceof E||L!=null&&L.constructor!=null&&L.constructor.name!=null&&L.constructor.name===E.name}function K(L){return L!==L}var Se=function(){for(var L="0123456789abcdef",E=new Array(256),k=0;k<16;++k)for(var U=k*16,ee=0;ee<16;++ee)E[U+ee]=L[k]+L[ee];return E}()}),qe=uc.Buffer;uc.SlowBuffer;uc.INSPECT_MAX_BYTES;uc.kMaxLength;C0=function(e,r){return C0=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},C0(e,r)};ao=function(t){L0(e,t);function e(r){var n=t.call(this,r)||this;return Object.setPrototypeOf(n,e.prototype),n}return Object.defineProperty(e.prototype,"name",{get:function(){return"BSONError"},enumerable:!1,configurable:!0}),e}(Error),bt=function(t){L0(e,t);function e(r){var n=t.call(this,r)||this;return Object.setPrototypeOf(n,e.prototype),n}return Object.defineProperty(e.prototype,"name",{get:function(){return"BSONTypeError"},enumerable:!1,configurable:!0}),e}(TypeError);qx=function(e){var r=Wx()?"BSON: For React Native please polyfill crypto.getRandomValues, e.g. using: https://www.npmjs.com/package/react-native-get-random-values.":"BSON: No cryptographic implementation for random bytes present, falling back to a less secure implementation.";console.warn(r);for(var n=qe.alloc(e),i=0;i<e;++i)n[i]=Math.floor(Math.random()*256);return n},$x=function(){if(typeof window<"u"){var t=window.crypto||window.msCrypto;if(t&&t.getRandomValues)return function(r){return t.getRandomValues(qe.alloc(r))}}if(typeof global<"u"&&global.crypto&&global.crypto.getRandomValues)return function(r){return global.crypto.getRandomValues(qe.alloc(r))};var e;try{e=n4("crypto").randomBytes}catch{}return e||qx},w_=$x();Yx=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-4[0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|[0-9a-f]{12}4[0-9a-f]{3}[89ab][0-9a-f]{15})$/i,__=function(t){return typeof t=="string"&&Yx.test(t)},F0=function(t){if(!__(t))throw new bt('UUID string representations must be a 32 or 36 character hex string (dashes excluded/included). Format: "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx" or "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx".');var e=t.replace(/-/g,"");return qe.from(e,"hex")},i_=function(t,e){return e===void 0&&(e=!0),e?t.toString("hex",0,4)+"-"+t.toString("hex",4,6)+"-"+t.toString("hex",6,8)+"-"+t.toString("hex",8,10)+"-"+t.toString("hex",10,16):t.toString("hex")},N0=16,A0=Symbol("id"),S_=function(){function t(e){if(typeof e>"u")this.id=t.generate();else if(e instanceof t)this[A0]=qe.from(e.id),this.__id=e.__id;else if(ArrayBuffer.isView(e)&&e.byteLength===N0)this.id=lc(e);else if(typeof e=="string")this.id=F0(e);else throw new bt("Argument passed in UUID constructor must be a UUID, a 16 byte Buffer or a 32/36 character hex string (dashes excluded/included, format: xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx).")}return Object.defineProperty(t.prototype,"id",{get:function(){return this[A0]},set:function(e){this[A0]=e,t.cacheHexString&&(this.__id=i_(e))},enumerable:!1,configurable:!0}),t.prototype.toHexString=function(e){if(e===void 0&&(e=!0),t.cacheHexString&&this.__id)return this.__id;var r=i_(this.id,e);return t.cacheHexString&&(this.__id=r),r},t.prototype.toString=function(e){return e?this.id.toString(e):this.toHexString()},t.prototype.toJSON=function(){return this.toHexString()},t.prototype.equals=function(e){if(!e)return!1;if(e instanceof t)return e.id.equals(this.id);try{return new t(e).id.equals(this.id)}catch{return!1}},t.prototype.toBinary=function(){return new lo(this.id,lo.SUBTYPE_UUID)},t.generate=function(){var e=w_(N0);return e[6]=e[6]&15|64,e[8]=e[8]&63|128,qe.from(e)},t.isValid=function(e){if(!e)return!1;if(e instanceof t)return!0;if(typeof e=="string")return __(e);if(P0(e)){if(e.length!==N0)return!1;try{return parseInt(e[6].toString(16)[0],10)===lo.SUBTYPE_UUID}catch{return!1}}return!1},t.createFromHexString=function(e){var r=F0(e);return new t(r)},t.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},t.prototype.inspect=function(){return'new UUID("'+this.toHexString()+'")'},t}();Object.defineProperty(S_.prototype,"_bsontype",{value:"UUID"});lo=function(){function t(e,r){if(!(this instanceof t))return new t(e,r);if(e!=null&&typeof e!="string"&&!ArrayBuffer.isView(e)&&!(e instanceof ArrayBuffer)&&!Array.isArray(e))throw new bt("Binary can only be constructed from string, Buffer, TypedArray, or Array<number>");this.sub_type=r??t.BSON_BINARY_SUBTYPE_DEFAULT,e==null?(this.buffer=qe.alloc(t.BUFFER_SIZE),this.position=0):(typeof e=="string"?this.buffer=qe.from(e,"binary"):Array.isArray(e)?this.buffer=qe.from(e):this.buffer=lc(e),this.position=this.buffer.byteLength)}return t.prototype.put=function(e){if(typeof e=="string"&&e.length!==1)throw new bt("only accepts single character String");if(typeof e!="number"&&e.length!==1)throw new bt("only accepts single character Uint8Array or Array");var r;if(typeof e=="string"?r=e.charCodeAt(0):typeof e=="number"?r=e:r=e[0],r<0||r>255)throw new bt("only accepts number in a valid unsigned byte range 0-255");if(this.buffer.length>this.position)this.buffer[this.position++]=r;else{var n=qe.alloc(t.BUFFER_SIZE+this.buffer.length);this.buffer.copy(n,0,0,this.buffer.length),this.buffer=n,this.buffer[this.position++]=r}},t.prototype.write=function(e,r){if(r=typeof r=="number"?r:this.position,this.buffer.length<r+e.length){var n=qe.alloc(this.buffer.length+e.length);this.buffer.copy(n,0,0,this.buffer.length),this.buffer=n}ArrayBuffer.isView(e)?(this.buffer.set(lc(e),r),this.position=r+e.byteLength>this.position?r+e.length:this.position):typeof e=="string"&&(this.buffer.write(e,r,e.length,"binary"),this.position=r+e.length>this.position?r+e.length:this.position)},t.prototype.read=function(e,r){return r=r&&r>0?r:this.position,this.buffer.slice(e,e+r)},t.prototype.value=function(e){return e=!!e,e&&this.buffer.length===this.position?this.buffer:e?this.buffer.slice(0,this.position):this.buffer.toString("binary",0,this.position)},t.prototype.length=function(){return this.position},t.prototype.toJSON=function(){return this.buffer.toString("base64")},t.prototype.toString=function(e){return this.buffer.toString(e)},t.prototype.toExtendedJSON=function(e){e=e||{};var r=this.buffer.toString("base64"),n=Number(this.sub_type).toString(16);return e.legacy?{$binary:r,$type:n.length===1?"0"+n:n}:{$binary:{base64:r,subType:n.length===1?"0"+n:n}}},t.prototype.toUUID=function(){if(this.sub_type===t.SUBTYPE_UUID)return new S_(this.buffer.slice(0,this.position));throw new ao('Binary sub_type "'+this.sub_type+'" is not supported for converting to UUID. Only "'+t.SUBTYPE_UUID+'" is currently supported.')},t.fromExtendedJSON=function(e,r){r=r||{};var n,i;if("$binary"in e?r.legacy&&typeof e.$binary=="string"&&"$type"in e?(i=e.$type?parseInt(e.$type,16):0,n=qe.from(e.$binary,"base64")):typeof e.$binary!="string"&&(i=e.$binary.subType?parseInt(e.$binary.subType,16):0,n=qe.from(e.$binary.base64,"base64")):"$uuid"in e&&(i=4,n=F0(e.$uuid)),!n)throw new bt("Unexpected Binary Extended JSON format "+JSON.stringify(e));return new t(n,i)},t.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},t.prototype.inspect=function(){var e=this.value(!0);return'new Binary(Buffer.from("'+e.toString("hex")+'", "hex"), '+this.sub_type+")"},t.BSON_BINARY_SUBTYPE_DEFAULT=0,t.BUFFER_SIZE=256,t.SUBTYPE_DEFAULT=0,t.SUBTYPE_FUNCTION=1,t.SUBTYPE_BYTE_ARRAY=2,t.SUBTYPE_UUID_OLD=3,t.SUBTYPE_UUID=4,t.SUBTYPE_MD5=5,t.SUBTYPE_ENCRYPTED=6,t.SUBTYPE_COLUMN=7,t.SUBTYPE_USER_DEFINED=128,t}();Object.defineProperty(lo.prototype,"_bsontype",{value:"Binary"});fc=function(){function t(e,r){if(!(this instanceof t))return new t(e,r);this.code=e,this.scope=r}return t.prototype.toJSON=function(){return{code:this.code,scope:this.scope}},t.prototype.toExtendedJSON=function(){return this.scope?{$code:this.code,$scope:this.scope}:{$code:this.code}},t.fromExtendedJSON=function(e){return new t(e.$code,e.$scope)},t.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},t.prototype.inspect=function(){var e=this.toJSON();return'new Code("'+e.code+'"'+(e.scope?", "+JSON.stringify(e.scope):"")+")"},t}();Object.defineProperty(fc.prototype,"_bsontype",{value:"Code"});Qa=function(){function t(e,r,n,i){if(!(this instanceof t))return new t(e,r,n,i);var o=e.split(".");o.length===2&&(n=o.shift(),e=o.shift()),this.collection=e,this.oid=r,this.db=n,this.fields=i||{}}return Object.defineProperty(t.prototype,"namespace",{get:function(){return this.collection},set:function(e){this.collection=e},enumerable:!1,configurable:!0}),t.prototype.toJSON=function(){var e=Object.assign({$ref:this.collection,$id:this.oid},this.fields);return this.db!=null&&(e.$db=this.db),e},t.prototype.toExtendedJSON=function(e){e=e||{};var r={$ref:this.collection,$id:this.oid};return e.legacy||(this.db&&(r.$db=this.db),r=Object.assign(r,this.fields)),r},t.fromExtendedJSON=function(e){var r=Object.assign({},e);return delete r.$ref,delete r.$id,delete r.$db,new t(e.$ref,e.$id,e.$db,r)},t.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},t.prototype.inspect=function(){var e=this.oid===void 0||this.oid.toString===void 0?this.oid:this.oid.toString();return'new DBRef("'+this.namespace+'", new ObjectId("'+e+'")'+(this.db?', "'+this.db+'"':"")+")"},t}();Object.defineProperty(Qa.prototype,"_bsontype",{value:"DBRef"});Xr=void 0;try{Xr=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}o_=1<<16,Zx=1<<24,Ss=o_*o_,b_=Ss*Ss,s_=b_/2,a_={},l_={},ke=function(){function t(e,r,n){if(e===void 0&&(e=0),!(this instanceof t))return new t(e,r,n);typeof e=="bigint"?Object.assign(this,t.fromBigInt(e,!!r)):typeof e=="string"?Object.assign(this,t.fromString(e,!!r)):(this.low=e|0,this.high=r|0,this.unsigned=!!n),Object.defineProperty(this,"__isLong__",{value:!0,configurable:!1,writable:!1,enumerable:!1})}return t.fromBits=function(e,r,n){return new t(e,r,n)},t.fromInt=function(e,r){var n,i,o;return r?(e>>>=0,(o=0<=e&&e<256)&&(i=l_[e],i)?i:(n=t.fromBits(e,(e|0)<0?-1:0,!0),o&&(l_[e]=n),n)):(e|=0,(o=-128<=e&&e<128)&&(i=a_[e],i)?i:(n=t.fromBits(e,e<0?-1:0,!1),o&&(a_[e]=n),n))},t.fromNumber=function(e,r){if(isNaN(e))return r?t.UZERO:t.ZERO;if(r){if(e<0)return t.UZERO;if(e>=b_)return t.MAX_UNSIGNED_VALUE}else{if(e<=-s_)return t.MIN_VALUE;if(e+1>=s_)return t.MAX_VALUE}return e<0?t.fromNumber(-e,r).neg():t.fromBits(e%Ss|0,e/Ss|0,r)},t.fromBigInt=function(e,r){return t.fromString(e.toString(),r)},t.fromString=function(e,r,n){if(e.length===0)throw Error("empty string");if(e==="NaN"||e==="Infinity"||e==="+Infinity"||e==="-Infinity")return t.ZERO;if(typeof r=="number"?(n=r,r=!1):r=!!r,n=n||10,n<2||36<n)throw RangeError("radix");var i;if((i=e.indexOf("-"))>0)throw Error("interior hyphen");if(i===0)return t.fromString(e.substring(1),r,n).neg();for(var o=t.fromNumber(Math.pow(n,8)),s=t.ZERO,a=0;a<e.length;a+=8){var l=Math.min(8,e.length-a),h=parseInt(e.substring(a,a+l),n);if(l<8){var p=t.fromNumber(Math.pow(n,l));s=s.mul(p).add(t.fromNumber(h))}else s=s.mul(o),s=s.add(t.fromNumber(h))}return s.unsigned=r,s},t.fromBytes=function(e,r,n){return n?t.fromBytesLE(e,r):t.fromBytesBE(e,r)},t.fromBytesLE=function(e,r){return new t(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,r)},t.fromBytesBE=function(e,r){return new t(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],r)},t.isLong=function(e){return tl(e)&&e.__isLong__===!0},t.fromValue=function(e,r){return typeof e=="number"?t.fromNumber(e,r):typeof e=="string"?t.fromString(e,r):t.fromBits(e.low,e.high,typeof r=="boolean"?r:e.unsigned)},t.prototype.add=function(e){t.isLong(e)||(e=t.fromValue(e));var r=this.high>>>16,n=this.high&65535,i=this.low>>>16,o=this.low&65535,s=e.high>>>16,a=e.high&65535,l=e.low>>>16,h=e.low&65535,p=0,m=0,y=0,w=0;return w+=o+h,y+=w>>>16,w&=65535,y+=i+l,m+=y>>>16,y&=65535,m+=n+a,p+=m>>>16,m&=65535,p+=r+s,p&=65535,t.fromBits(y<<16|w,p<<16|m,this.unsigned)},t.prototype.and=function(e){return t.isLong(e)||(e=t.fromValue(e)),t.fromBits(this.low&e.low,this.high&e.high,this.unsigned)},t.prototype.compare=function(e){if(t.isLong(e)||(e=t.fromValue(e)),this.eq(e))return 0;var r=this.isNegative(),n=e.isNegative();return r&&!n?-1:!r&&n?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},t.prototype.comp=function(e){return this.compare(e)},t.prototype.divide=function(e){if(t.isLong(e)||(e=t.fromValue(e)),e.isZero())throw Error("division by zero");if(Xr){if(!this.unsigned&&this.high===-2147483648&&e.low===-1&&e.high===-1)return this;var r=(this.unsigned?Xr.div_u:Xr.div_s)(this.low,this.high,e.low,e.high);return t.fromBits(r,Xr.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?t.UZERO:t.ZERO;var n,i,o;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return t.UZERO;if(e.gt(this.shru(1)))return t.UONE;o=t.UZERO}else{if(this.eq(t.MIN_VALUE)){if(e.eq(t.ONE)||e.eq(t.NEG_ONE))return t.MIN_VALUE;if(e.eq(t.MIN_VALUE))return t.ONE;var s=this.shr(1);return n=s.div(e).shl(1),n.eq(t.ZERO)?e.isNegative()?t.ONE:t.NEG_ONE:(i=this.sub(e.mul(n)),o=n.add(i.div(e)),o)}else if(e.eq(t.MIN_VALUE))return this.unsigned?t.UZERO:t.ZERO;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();o=t.ZERO}for(i=this;i.gte(e);){n=Math.max(1,Math.floor(i.toNumber()/e.toNumber()));for(var a=Math.ceil(Math.log(n)/Math.LN2),l=a<=48?1:Math.pow(2,a-48),h=t.fromNumber(n),p=h.mul(e);p.isNegative()||p.gt(i);)n-=l,h=t.fromNumber(n,this.unsigned),p=h.mul(e);h.isZero()&&(h=t.ONE),o=o.add(h),i=i.sub(p)}return o},t.prototype.div=function(e){return this.divide(e)},t.prototype.equals=function(e){return t.isLong(e)||(e=t.fromValue(e)),this.unsigned!==e.unsigned&&this.high>>>31===1&&e.high>>>31===1?!1:this.high===e.high&&this.low===e.low},t.prototype.eq=function(e){return this.equals(e)},t.prototype.getHighBits=function(){return this.high},t.prototype.getHighBitsUnsigned=function(){return this.high>>>0},t.prototype.getLowBits=function(){return this.low},t.prototype.getLowBitsUnsigned=function(){return this.low>>>0},t.prototype.getNumBitsAbs=function(){if(this.isNegative())return this.eq(t.MIN_VALUE)?64:this.neg().getNumBitsAbs();var e=this.high!==0?this.high:this.low,r;for(r=31;r>0&&(e&1<<r)===0;r--);return this.high!==0?r+33:r+1},t.prototype.greaterThan=function(e){return this.comp(e)>0},t.prototype.gt=function(e){return this.greaterThan(e)},t.prototype.greaterThanOrEqual=function(e){return this.comp(e)>=0},t.prototype.gte=function(e){return this.greaterThanOrEqual(e)},t.prototype.ge=function(e){return this.greaterThanOrEqual(e)},t.prototype.isEven=function(){return(this.low&1)===0},t.prototype.isNegative=function(){return!this.unsigned&&this.high<0},t.prototype.isOdd=function(){return(this.low&1)===1},t.prototype.isPositive=function(){return this.unsigned||this.high>=0},t.prototype.isZero=function(){return this.high===0&&this.low===0},t.prototype.lessThan=function(e){return this.comp(e)<0},t.prototype.lt=function(e){return this.lessThan(e)},t.prototype.lessThanOrEqual=function(e){return this.comp(e)<=0},t.prototype.lte=function(e){return this.lessThanOrEqual(e)},t.prototype.modulo=function(e){if(t.isLong(e)||(e=t.fromValue(e)),Xr){var r=(this.unsigned?Xr.rem_u:Xr.rem_s)(this.low,this.high,e.low,e.high);return t.fromBits(r,Xr.get_high(),this.unsigned)}return this.sub(this.div(e).mul(e))},t.prototype.mod=function(e){return this.modulo(e)},t.prototype.rem=function(e){return this.modulo(e)},t.prototype.multiply=function(e){if(this.isZero())return t.ZERO;if(t.isLong(e)||(e=t.fromValue(e)),Xr){var r=Xr.mul(this.low,this.high,e.low,e.high);return t.fromBits(r,Xr.get_high(),this.unsigned)}if(e.isZero())return t.ZERO;if(this.eq(t.MIN_VALUE))return e.isOdd()?t.MIN_VALUE:t.ZERO;if(e.eq(t.MIN_VALUE))return this.isOdd()?t.MIN_VALUE:t.ZERO;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(t.TWO_PWR_24)&&e.lt(t.TWO_PWR_24))return t.fromNumber(this.toNumber()*e.toNumber(),this.unsigned);var n=this.high>>>16,i=this.high&65535,o=this.low>>>16,s=this.low&65535,a=e.high>>>16,l=e.high&65535,h=e.low>>>16,p=e.low&65535,m=0,y=0,w=0,b=0;return b+=s*p,w+=b>>>16,b&=65535,w+=o*p,y+=w>>>16,w&=65535,w+=s*h,y+=w>>>16,w&=65535,y+=i*p,m+=y>>>16,y&=65535,y+=o*h,m+=y>>>16,y&=65535,y+=s*l,m+=y>>>16,y&=65535,m+=n*p+i*h+o*l+s*a,m&=65535,t.fromBits(w<<16|b,m<<16|y,this.unsigned)},t.prototype.mul=function(e){return this.multiply(e)},t.prototype.negate=function(){return!this.unsigned&&this.eq(t.MIN_VALUE)?t.MIN_VALUE:this.not().add(t.ONE)},t.prototype.neg=function(){return this.negate()},t.prototype.not=function(){return t.fromBits(~this.low,~this.high,this.unsigned)},t.prototype.notEquals=function(e){return!this.equals(e)},t.prototype.neq=function(e){return this.notEquals(e)},t.prototype.ne=function(e){return this.notEquals(e)},t.prototype.or=function(e){return t.isLong(e)||(e=t.fromValue(e)),t.fromBits(this.low|e.low,this.high|e.high,this.unsigned)},t.prototype.shiftLeft=function(e){return t.isLong(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?t.fromBits(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):t.fromBits(0,this.low<<e-32,this.unsigned)},t.prototype.shl=function(e){return this.shiftLeft(e)},t.prototype.shiftRight=function(e){return t.isLong(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?t.fromBits(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):t.fromBits(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},t.prototype.shr=function(e){return this.shiftRight(e)},t.prototype.shiftRightUnsigned=function(e){if(t.isLong(e)&&(e=e.toInt()),e&=63,e===0)return this;var r=this.high;if(e<32){var n=this.low;return t.fromBits(n>>>e|r<<32-e,r>>>e,this.unsigned)}else return e===32?t.fromBits(r,0,this.unsigned):t.fromBits(r>>>e-32,0,this.unsigned)},t.prototype.shr_u=function(e){return this.shiftRightUnsigned(e)},t.prototype.shru=function(e){return this.shiftRightUnsigned(e)},t.prototype.subtract=function(e){return t.isLong(e)||(e=t.fromValue(e)),this.add(e.neg())},t.prototype.sub=function(e){return this.subtract(e)},t.prototype.toInt=function(){return this.unsigned?this.low>>>0:this.low},t.prototype.toNumber=function(){return this.unsigned?(this.high>>>0)*Ss+(this.low>>>0):this.high*Ss+(this.low>>>0)},t.prototype.toBigInt=function(){return BigInt(this.toString())},t.prototype.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},t.prototype.toBytesLE=function(){var e=this.high,r=this.low;return[r&255,r>>>8&255,r>>>16&255,r>>>24,e&255,e>>>8&255,e>>>16&255,e>>>24]},t.prototype.toBytesBE=function(){var e=this.high,r=this.low;return[e>>>24,e>>>16&255,e>>>8&255,e&255,r>>>24,r>>>16&255,r>>>8&255,r&255]},t.prototype.toSigned=function(){return this.unsigned?t.fromBits(this.low,this.high,!1):this},t.prototype.toString=function(e){if(e=e||10,e<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(t.MIN_VALUE)){var r=t.fromNumber(e),n=this.div(r),i=n.mul(r).sub(this);return n.toString(e)+i.toInt().toString(e)}else return"-"+this.neg().toString(e);for(var o=t.fromNumber(Math.pow(e,6),this.unsigned),s=this,a="";;){var l=s.div(o),h=s.sub(l.mul(o)).toInt()>>>0,p=h.toString(e);if(s=l,s.isZero())return p+a;for(;p.length<6;)p="0"+p;a=""+p+a}},t.prototype.toUnsigned=function(){return this.unsigned?this:t.fromBits(this.low,this.high,!0)},t.prototype.xor=function(e){return t.isLong(e)||(e=t.fromValue(e)),t.fromBits(this.low^e.low,this.high^e.high,this.unsigned)},t.prototype.eqz=function(){return this.isZero()},t.prototype.le=function(e){return this.lessThanOrEqual(e)},t.prototype.toExtendedJSON=function(e){return e&&e.relaxed?this.toNumber():{$numberLong:this.toString()}},t.fromExtendedJSON=function(e,r){var n=t.fromString(e.$numberLong);return r&&r.relaxed?n.toNumber():n},t.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},t.prototype.inspect=function(){return'new Long("'+this.toString()+'"'+(this.unsigned?", true":"")+")"},t.TWO_PWR_24=t.fromInt(Zx),t.MAX_UNSIGNED_VALUE=t.fromBits(-1,-1,!0),t.ZERO=t.fromInt(0),t.UZERO=t.fromInt(0,!0),t.ONE=t.fromInt(1),t.UONE=t.fromInt(1,!0),t.NEG_ONE=t.fromInt(-1),t.MAX_VALUE=t.fromBits(-1,2147483647,!1),t.MIN_VALUE=t.fromBits(0,-2147483648,!1),t}();Object.defineProperty(ke.prototype,"__isLong__",{value:!0});Object.defineProperty(ke.prototype,"_bsontype",{value:"Long"});Xx=/^(\+|-)?(\d+|(\d*\.\d*))?(E|e)?([-+])?(\d+)?$/,Qx=/^(\+|-)?(Infinity|inf)$/i,ek=/^(\+|-)?NaN$/i,Xa=6111,D0=-6176,u_=6176,tk=34,R0=[124,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].reverse(),c_=[248,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].reverse(),f_=[120,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].reverse(),rk=/^([-+])?(\d+)?$/,nk=31,h_=16383,ik=30,ok=31;M0=function(){function t(e){if(!(this instanceof t))return new t(e);if(typeof e=="string")this.bytes=t.fromString(e).bytes;else if(P0(e)){if(e.byteLength!==16)throw new bt("Decimal128 must take a Buffer of 16 bytes");this.bytes=e}else throw new bt("Decimal128 must take a Buffer or string")}return t.fromString=function(e){var r=!1,n=!1,i=!1,o=0,s=0,a=0,l=0,h=0,p=[0],m=0,y=0,w=0,b=0,N=0,O=0,I=new ke(0,0),R=new ke(0,0),J=0,q=0;if(e.length>=7e3)throw new bt(""+e+" not a valid Decimal128 string");var G=e.match(Xx),F=e.match(Qx),z=e.match(ek);if(!G&&!F&&!z||e.length===0)throw new bt(""+e+" not a valid Decimal128 string");if(G){var S=G[2],W=G[4],te=G[5],X=G[6];W&&X===void 0&&ws(e,"missing exponent power"),W&&S===void 0&&ws(e,"missing exponent base"),W===void 0&&(te||X)&&ws(e,"missing e before exponent")}if((e[q]==="+"||e[q]==="-")&&(r=e[q++]==="-"),!d_(e[q])&&e[q]!=="."){if(e[q]==="i"||e[q]==="I")return new t(qe.from(r?c_:f_));if(e[q]==="N")return new t(qe.from(R0))}for(;d_(e[q])||e[q]===".";){if(e[q]==="."){n&&ws(e,"contains multiple periods"),n=!0,q=q+1;continue}m<34&&(e[q]!=="0"||i)&&(i||(h=s),i=!0,p[y++]=parseInt(e[q],10),m=m+1),i&&(a=a+1),n&&(l=l+1),s=s+1,q=q+1}if(n&&!s)throw new bt(""+e+" not a valid Decimal128 string");if(e[q]==="e"||e[q]==="E"){var ue=e.substr(++q).match(rk);if(!ue||!ue[2])return new t(qe.from(R0));N=parseInt(ue[0],10),q=q+ue[0].length}if(e[q])return new t(qe.from(R0));if(w=0,!m)w=0,b=0,p[0]=0,a=1,m=1,o=0;else if(b=m-1,o=a,o!==1)for(;p[h+o-1]===0;)o=o-1;for(N<=l&&l-N>1<<14?N=D0:N=N-l;N>Xa;){if(b=b+1,b-w>tk){var ae=p.join("");if(ae.match(/^0+$/)){N=Xa;break}ws(e,"overflow")}N=N-1}for(;N<D0||m<a;){if(b===0&&o<m){N=D0,o=0;break}if(m<a?a=a-1:b=b-1,N<Xa)N=N+1;else{var ae=p.join("");if(ae.match(/^0+$/)){N=Xa;break}ws(e,"overflow")}}if(b-w+1<o){var ge=s;n&&(h=h+1,ge=ge+1),r&&(h=h+1,ge=ge+1);var M=parseInt(e[h+b+1],10),C=0;if(M>=5&&(C=1,M===5)){for(C=p[b]%2===1?1:0,O=h+b+2;O<ge;O++)if(parseInt(e[O],10)){C=1;break}}if(C){for(var ie=b;ie>=0;ie--)if(++p[ie]>9&&(p[ie]=0,ie===0))if(N<Xa)N=N+1,p[ie]=1;else return new t(qe.from(r?c_:f_))}}if(I=ke.fromNumber(0),R=ke.fromNumber(0),o===0)I=ke.fromNumber(0),R=ke.fromNumber(0);else if(b-w<17){var ie=w;for(R=ke.fromNumber(p[ie++]),I=new ke(0,0);ie<=b;ie++)R=R.multiply(ke.fromNumber(10)),R=R.add(ke.fromNumber(p[ie]))}else{var ie=w;for(I=ke.fromNumber(p[ie++]);ie<=b-17;ie++)I=I.multiply(ke.fromNumber(10)),I=I.add(ke.fromNumber(p[ie]));for(R=ke.fromNumber(p[ie++]);ie<=b;ie++)R=R.multiply(ke.fromNumber(10)),R=R.add(ke.fromNumber(p[ie]))}var B=ak(I,ke.fromString("100000000000000000"));B.low=B.low.add(R),lk(B.low,R)&&(B.high=B.high.add(ke.fromNumber(1))),J=N+u_;var V={low:ke.fromNumber(0),high:ke.fromNumber(0)};B.high.shiftRightUnsigned(49).and(ke.fromNumber(1)).equals(ke.fromNumber(1))?(V.high=V.high.or(ke.fromNumber(3).shiftLeft(61)),V.high=V.high.or(ke.fromNumber(J).and(ke.fromNumber(16383).shiftLeft(47))),V.high=V.high.or(B.high.and(ke.fromNumber(140737488355327)))):(V.high=V.high.or(ke.fromNumber(J&16383).shiftLeft(49)),V.high=V.high.or(B.high.and(ke.fromNumber(562949953421311)))),V.low=B.low,r&&(V.high=V.high.or(ke.fromString("9223372036854775808")));var Y=qe.alloc(16);return q=0,Y[q++]=V.low.low&255,Y[q++]=V.low.low>>8&255,Y[q++]=V.low.low>>16&255,Y[q++]=V.low.low>>24&255,Y[q++]=V.low.high&255,Y[q++]=V.low.high>>8&255,Y[q++]=V.low.high>>16&255,Y[q++]=V.low.high>>24&255,Y[q++]=V.high.low&255,Y[q++]=V.high.low>>8&255,Y[q++]=V.high.low>>16&255,Y[q++]=V.high.low>>24&255,Y[q++]=V.high.high&255,Y[q++]=V.high.high>>8&255,Y[q++]=V.high.high>>16&255,Y[q++]=V.high.high>>24&255,new t(Y)},t.prototype.toString=function(){for(var e,r=0,n=new Array(36),i=0;i<n.length;i++)n[i]=0;var o=0,s=!1,a,l={parts:[0,0,0,0]},h,p,m=[];o=0;var y=this.bytes,w=y[o++]|y[o++]<<8|y[o++]<<16|y[o++]<<24,b=y[o++]|y[o++]<<8|y[o++]<<16|y[o++]<<24,N=y[o++]|y[o++]<<8|y[o++]<<16|y[o++]<<24,O=y[o++]|y[o++]<<8|y[o++]<<16|y[o++]<<24;o=0;var I={low:new ke(w,b),high:new ke(N,O)};I.high.lessThan(ke.ZERO)&&m.push("-");var R=O>>26&nk;if(R>>3===3){if(R===ik)return m.join("")+"Infinity";if(R===ok)return"NaN";e=O>>15&h_,a=8+(O>>14&1)}else a=O>>14&7,e=O>>17&h_;var J=e-u_;if(l.parts[0]=(O&16383)+((a&15)<<14),l.parts[1]=N,l.parts[2]=b,l.parts[3]=w,l.parts[0]===0&&l.parts[1]===0&&l.parts[2]===0&&l.parts[3]===0)s=!0;else for(p=3;p>=0;p--){var q=0,G=sk(l);if(l=G.quotient,q=G.rem.low,!!q)for(h=8;h>=0;h--)n[p*9+h]=q%10,q=Math.floor(q/10)}if(s)r=1,n[o]=0;else for(r=36;!n[o];)r=r-1,o=o+1;var F=r-1+J;if(F>=34||F<=-7||J>0){if(r>34)return m.push(""+0),J>0?m.push("E+"+J):J<0&&m.push("E"+J),m.join("");m.push(""+n[o++]),r=r-1,r&&m.push(".");for(var i=0;i<r;i++)m.push(""+n[o++]);m.push("E"),F>0?m.push("+"+F):m.push(""+F)}else if(J>=0)for(var i=0;i<r;i++)m.push(""+n[o++]);else{var z=r+J;if(z>0)for(var i=0;i<z;i++)m.push(""+n[o++]);else m.push("0");for(m.push(".");z++<0;)m.push("0");for(var i=0;i<r-Math.max(z-1,0);i++)m.push(""+n[o++])}return m.join("")},t.prototype.toJSON=function(){return{$numberDecimal:this.toString()}},t.prototype.toExtendedJSON=function(){return{$numberDecimal:this.toString()}},t.fromExtendedJSON=function(e){return t.fromString(e.$numberDecimal)},t.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},t.prototype.inspect=function(){return'new Decimal128("'+this.toString()+'")'},t}();Object.defineProperty(M0.prototype,"_bsontype",{value:"Decimal128"});hc=function(){function t(e){if(!(this instanceof t))return new t(e);e instanceof Number&&(e=e.valueOf()),this.value=+e}return t.prototype.valueOf=function(){return this.value},t.prototype.toJSON=function(){return this.value},t.prototype.toString=function(e){return this.value.toString(e)},t.prototype.toExtendedJSON=function(e){if(e&&(e.legacy||e.relaxed&&isFinite(this.value)))return this.value;if(Object.is(Math.sign(this.value),-0))return{$numberDouble:"-"+this.value.toFixed(1)};var r;return Number.isInteger(this.value)?(r=this.value.toFixed(1),r.length>=13&&(r=this.value.toExponential(13).toUpperCase())):r=this.value.toString(),{$numberDouble:r}},t.fromExtendedJSON=function(e,r){var n=parseFloat(e.$numberDouble);return r&&r.relaxed?n:new t(n)},t.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},t.prototype.inspect=function(){var e=this.toExtendedJSON();return"new Double("+e.$numberDouble+")"},t}();Object.defineProperty(hc.prototype,"_bsontype",{value:"Double"});dc=function(){function t(e){if(!(this instanceof t))return new t(e);e instanceof Number&&(e=e.valueOf()),this.value=+e|0}return t.prototype.valueOf=function(){return this.value},t.prototype.toString=function(e){return this.value.toString(e)},t.prototype.toJSON=function(){return this.value},t.prototype.toExtendedJSON=function(e){return e&&(e.relaxed||e.legacy)?this.value:{$numberInt:this.value.toString()}},t.fromExtendedJSON=function(e,r){return r&&r.relaxed?parseInt(e.$numberInt,10):new t(e.$numberInt)},t.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},t.prototype.inspect=function(){return"new Int32("+this.valueOf()+")"},t}();Object.defineProperty(dc.prototype,"_bsontype",{value:"Int32"});j0=function(){function t(){if(!(this instanceof t))return new t}return t.prototype.toExtendedJSON=function(){return{$maxKey:1}},t.fromExtendedJSON=function(){return new t},t.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},t.prototype.inspect=function(){return"new MaxKey()"},t}();Object.defineProperty(j0.prototype,"_bsontype",{value:"MaxKey"});U0=function(){function t(){if(!(this instanceof t))return new t}return t.prototype.toExtendedJSON=function(){return{$minKey:1}},t.fromExtendedJSON=function(){return new t},t.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},t.prototype.inspect=function(){return"new MinKey()"},t}();Object.defineProperty(U0.prototype,"_bsontype",{value:"MinKey"});uk=new RegExp("^[0-9a-fA-F]{24}$"),so=null,_s=Symbol("id"),Sr=function(){function t(e){if(!(this instanceof t))return new t(e);var r;if(typeof e=="object"&&e&&"id"in e){if(typeof e.id!="string"&&!ArrayBuffer.isView(e.id))throw new bt("Argument passed in must have an id that is of type string or Buffer");"toHexString"in e&&typeof e.toHexString=="function"?r=qe.from(e.toHexString(),"hex"):r=e.id}else r=e;if(r==null||typeof r=="number")this[_s]=t.generate(typeof r=="number"?r:void 0);else if(ArrayBuffer.isView(r)&&r.byteLength===12)this[_s]=lc(r);else if(typeof r=="string")if(r.length===12){var n=qe.from(r);if(n.byteLength===12)this[_s]=n;else throw new bt("Argument passed in must be a string of 12 bytes")}else if(r.length===24&&uk.test(r))this[_s]=qe.from(r,"hex");else throw new bt("Argument passed in must be a string of 12 bytes or a string of 24 hex characters");else throw new bt("Argument passed in does not match the accepted types");t.cacheHexString&&(this.__id=this.id.toString("hex"))}return Object.defineProperty(t.prototype,"id",{get:function(){return this[_s]},set:function(e){this[_s]=e,t.cacheHexString&&(this.__id=e.toString("hex"))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"generationTime",{get:function(){return this.id.readInt32BE(0)},set:function(e){this.id.writeUInt32BE(e,0)},enumerable:!1,configurable:!0}),t.prototype.toHexString=function(){if(t.cacheHexString&&this.__id)return this.__id;var e=this.id.toString("hex");return t.cacheHexString&&!this.__id&&(this.__id=e),e},t.getInc=function(){return t.index=(t.index+1)%16777215},t.generate=function(e){typeof e!="number"&&(e=Math.floor(Date.now()/1e3));var r=t.getInc(),n=qe.alloc(12);return n.writeUInt32BE(e,0),so===null&&(so=w_(5)),n[4]=so[0],n[5]=so[1],n[6]=so[2],n[7]=so[3],n[8]=so[4],n[11]=r&255,n[10]=r>>8&255,n[9]=r>>16&255,n},t.prototype.toString=function(e){return e?this.id.toString(e):this.toHexString()},t.prototype.toJSON=function(){return this.toHexString()},t.prototype.equals=function(e){return e==null?!1:e instanceof t?this.toString()===e.toString():typeof e=="string"&&t.isValid(e)&&e.length===12&&P0(this.id)?e===qe.prototype.toString.call(this.id,"latin1"):typeof e=="string"&&t.isValid(e)&&e.length===24?e.toLowerCase()===this.toHexString():typeof e=="string"&&t.isValid(e)&&e.length===12?qe.from(e).equals(this.id):typeof e=="object"&&"toHexString"in e&&typeof e.toHexString=="function"?e.toHexString()===this.toHexString():!1},t.prototype.getTimestamp=function(){var e=new Date,r=this.id.readUInt32BE(0);return e.setTime(Math.floor(r)*1e3),e},t.createPk=function(){return new t},t.createFromTime=function(e){var r=qe.from([0,0,0,0,0,0,0,0,0,0,0,0]);return r.writeUInt32BE(e,0),new t(r)},t.createFromHexString=function(e){if(typeof e>"u"||e!=null&&e.length!==24)throw new bt("Argument passed in must be a single String of 12 bytes or a string of 24 hex characters");return new t(qe.from(e,"hex"))},t.isValid=function(e){if(e==null)return!1;try{return new t(e),!0}catch{return!1}},t.prototype.toExtendedJSON=function(){return this.toHexString?{$oid:this.toHexString()}:{$oid:this.toString("hex")}},t.fromExtendedJSON=function(e){return new t(e.$oid)},t.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},t.prototype.inspect=function(){return'new ObjectId("'+this.toHexString()+'")'},t.index=Math.floor(Math.random()*16777215),t}();Object.defineProperty(Sr.prototype,"generate",{value:cc(function(t){return Sr.generate(t)},"Please use the static `ObjectId.generate(time)` instead")});Object.defineProperty(Sr.prototype,"getInc",{value:cc(function(){return Sr.getInc()},"Please use the static `ObjectId.getInc()` instead")});Object.defineProperty(Sr.prototype,"get_inc",{value:cc(function(){return Sr.getInc()},"Please use the static `ObjectId.getInc()` instead")});Object.defineProperty(Sr,"get_inc",{value:cc(function(){return Sr.getInc()},"Please use the static `ObjectId.getInc()` instead")});Object.defineProperty(Sr.prototype,"_bsontype",{value:"ObjectID"});el=function(){function t(e,r){if(!(this instanceof t))return new t(e,r);if(this.pattern=e,this.options=ck(r??""),this.pattern.indexOf("\0")!==-1)throw new ao("BSON Regex patterns cannot contain null bytes, found: "+JSON.stringify(this.pattern));if(this.options.indexOf("\0")!==-1)throw new ao("BSON Regex options cannot contain null bytes, found: "+JSON.stringify(this.options));for(var n=0;n<this.options.length;n++)if(!(this.options[n]==="i"||this.options[n]==="m"||this.options[n]==="x"||this.options[n]==="l"||this.options[n]==="s"||this.options[n]==="u"))throw new ao("The regular expression option ["+this.options[n]+"] is not supported")}return t.parseOptions=function(e){return e?e.split("").sort().join(""):""},t.prototype.toExtendedJSON=function(e){return e=e||{},e.legacy?{$regex:this.pattern,$options:this.options}:{$regularExpression:{pattern:this.pattern,options:this.options}}},t.fromExtendedJSON=function(e){if("$regex"in e)if(typeof e.$regex!="string"){if(e.$regex._bsontype==="BSONRegExp")return e}else return new t(e.$regex,t.parseOptions(e.$options));if("$regularExpression"in e)return new t(e.$regularExpression.pattern,t.parseOptions(e.$regularExpression.options));throw new bt("Unexpected BSONRegExp EJSON object form: "+JSON.stringify(e))},t}();Object.defineProperty(el.prototype,"_bsontype",{value:"BSONRegExp"});B0=function(){function t(e){if(!(this instanceof t))return new t(e);this.value=e}return t.prototype.valueOf=function(){return this.value},t.prototype.toString=function(){return this.value},t.prototype.inspect=function(){return'new BSONSymbol("'+this.value+'")'},t.prototype.toJSON=function(){return this.value},t.prototype.toExtendedJSON=function(){return{$symbol:this.value}},t.fromExtendedJSON=function(e){return new t(e.$symbol)},t.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},t}();Object.defineProperty(B0.prototype,"_bsontype",{value:"Symbol"});fk=ke,E_=function(t){L0(e,t);function e(r,n){var i=this;return i instanceof e?(ke.isLong(r)?i=t.call(this,r.low,r.high,!0)||this:tl(r)&&typeof r.t<"u"&&typeof r.i<"u"?i=t.call(this,r.i,r.t,!0)||this:i=t.call(this,r,n,!0)||this,Object.defineProperty(i,"_bsontype",{value:"Timestamp",writable:!1,configurable:!1,enumerable:!1}),i):new e(r,n)}return e.prototype.toJSON=function(){return{$timestamp:this.toString()}},e.fromInt=function(r){return new e(ke.fromInt(r,!0))},e.fromNumber=function(r){return new e(ke.fromNumber(r,!0))},e.fromBits=function(r,n){return new e(r,n)},e.fromString=function(r,n){return new e(ke.fromString(r,!0,n))},e.prototype.toExtendedJSON=function(){return{$timestamp:{t:this.high>>>0,i:this.low>>>0}}},e.fromExtendedJSON=function(r){return new e(r.$timestamp)},e.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},e.prototype.inspect=function(){return"new Timestamp({ t: "+this.getHighBits()+", i: "+this.getLowBits()+" })"},e.MAX_VALUE=ke.MAX_UNSIGNED_VALUE,e}(fk);O_=2147483647,T_=-2147483648,x_=9223372036854776e3,k_=-9223372036854776e3,dk={$oid:Sr,$binary:lo,$uuid:lo,$symbol:B0,$numberInt:dc,$numberDecimal:M0,$numberDouble:hc,$numberLong:ke,$minKey:U0,$maxKey:j0,$regex:el,$regularExpression:el,$timestamp:E_};yk={Binary:function(t){return new lo(t.value(),t.sub_type)},Code:function(t){return new fc(t.code,t.scope)},DBRef:function(t){return new Qa(t.collection||t.namespace,t.oid,t.db,t.fields)},Decimal128:function(t){return new M0(t.bytes)},Double:function(t){return new hc(t.value)},Int32:function(t){return new dc(t.value)},Long:function(t){return ke.fromBits(t.low!=null?t.low:t.low_,t.low!=null?t.high:t.high_,t.low!=null?t.unsigned:t.unsigned_)},MaxKey:function(){return new j0},MinKey:function(){return new U0},ObjectID:function(t){return new Sr(t)},ObjectId:function(t){return new Sr(t)},BSONRegExp:function(t){return new el(t.pattern,t.options)},Symbol:function(t){return new B0(t.value)},Timestamp:function(t){return E_.fromBits(t.low,t.high)}};(function(t){function e(o,s){var a=Object.assign({},{relaxed:!0,legacy:!1},s);return typeof a.relaxed=="boolean"&&(a.strict=!a.relaxed),typeof a.strict=="boolean"&&(a.relaxed=!a.strict),JSON.parse(o,function(l,h){if(l.indexOf("\0")!==-1)throw new ao("BSON Document field names cannot contain null bytes, found: "+JSON.stringify(l));return I_(h,a)})}t.parse=e;function r(o,s,a,l){a!=null&&typeof a=="object"&&(l=a,a=0),s!=null&&typeof s=="object"&&!Array.isArray(s)&&(l=s,s=void 0,a=0);var h=Object.assign({relaxed:!0,legacy:!1},l,{seenObjects:[{propertyName:"(root)",obj:null}]}),p=wi(o,h);return JSON.stringify(p,s,a)}t.stringify=r;function n(o,s){return s=s||{},JSON.parse(r(o,s))}t.serialize=n;function i(o,s){return s=s||{},e(JSON.stringify(o),s)}t.deserialize=i})(_i||(_i={}));g_=v_();g_.Map?y_=g_.Map:y_=function(){function t(e){e===void 0&&(e=[]),this._keys=[],this._values={};for(var r=0;r<e.length;r++)if(e[r]!=null){var n=e[r],i=n[0],o=n[1];this._keys.push(i),this._values[i]={v:o,i:this._keys.length-1}}}return t.prototype.clear=function(){this._keys=[],this._values={}},t.prototype.delete=function(e){var r=this._values[e];return r==null?!1:(delete this._values[e],this._keys.splice(r.i,1),!0)},t.prototype.entries=function(){var e=this,r=0;return{next:function(){var n=e._keys[r++];return{value:n!==void 0?[n,e._values[n].v]:void 0,done:n===void 0}}}},t.prototype.forEach=function(e,r){r=r||this;for(var n=0;n<this._keys.length;n++){var i=this._keys[n];e.call(r,this._values[i].v,i,r)}},t.prototype.get=function(e){return this._values[e]?this._values[e].v:void 0},t.prototype.has=function(e){return this._values[e]!=null},t.prototype.keys=function(){var e=this,r=0;return{next:function(){var n=e._keys[r++];return{value:n!==void 0?n:void 0,done:n===void 0}}}},t.prototype.set=function(e,r){return this._values[e]?(this._values[e].v=r,this):(this._keys.push(e),this._values[e]={v:r,i:this._keys.length-1},this)},t.prototype.values=function(){var e=this,r=0;return{next:function(){var n=e._keys[r++];return{value:n!==void 0?e._values[n].v:void 0,done:n===void 0}}}},Object.defineProperty(t.prototype,"size",{get:function(){return this._keys.length},enumerable:!1,configurable:!0}),t}();m8=Math.pow(2,63)-1,v8=-Math.pow(2,63),mk=Math.pow(2,53),vk=-Math.pow(2,53),w8=ke.fromNumber(mk),_8=ke.fromNumber(vk),wk=1024*1024*17,S8=qe.alloc(wk)});function Nk(t){return t?R_(t):typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new Tk:typeof navigator<"u"?R_(navigator.userAgent):Rk()}function Ak(t){return t!==""&&Ik.reduce(function(e,r){var n=r[0],i=r[1];if(e)return e;var o=i.exec(t);return!!o&&[n,o]},!1)}function R_(t){var e=Ak(t);if(!e)return null;var r=e[0],n=e[1];if(r==="searchbot")return new Ok;var i=n[1]&&n[1].split(".").join("_").split("_").slice(0,3);i?i.length<A_&&(i=N_(N_([],i,!0),Ck(A_-i.length),!0)):i=[];var o=i.join("."),s=Dk(t),a=kk.exec(t);return a&&a[1]?new Ek(r,o,s,a[1]):new Sk(r,o,s)}function Dk(t){for(var e=0,r=D_.length;e<r;e++){var n=D_[e],i=n[0],o=n[1],s=o.exec(t);if(s)return i}return null}function Rk(){var t=typeof process<"u"&&process.version;return t?new bk(process.version.slice(1)):null}function Ck(t){for(var e=[],r=0;r<t;r++)e.push("0");return e}function nS(t){return _i.serialize(t,Hk)}function iS(t){return Array.isArray(t)?t.map(e=>_i.deserialize(e)):_i.deserialize(t)}function Y0(t){return Object.fromEntries(Object.entries(t).filter(e=>typeof e[1]<"u"))}function Gk(t,e){let r="";for(let n=0;n<t;n++)r+=e[Math.floor(Math.random()*e.length)];return r}function aS(t,e=!0){let r=Y0(t);return(e&&Object.keys(r).length>0?"?":"")+Object.entries(r).map(([i,o])=>`${i}=${encodeURIComponent(o)}`).join("&")}function Jk(t){let e=t[0]==="?"?t.substr(1):t;return Object.fromEntries(e.split("&").filter(r=>r.length>0).map(r=>r.split("=")).map(([r,n])=>[r,decodeURIComponent(n)]))}function Kk(t){for(let e of t)if(typeof e=="object"&&e)for(let[r,n]of Object.entries(e))n===void 0&&delete e[r];return t}function Zk(t){return Kk(t).map(r=>typeof r=="object"?nS(r):r)}function e5(){return{path:"/api/client/v2.0",app(t){return{path:this.path+`/app/${t}`,location(){return{path:this.path+"/location"}},authProvider(e){return{path:this.path+`/auth/providers/${e}`,login(){return{path:this.path+"/login"}}}},emailPasswordAuth(e){return{...this.authProvider(e),register(){return{path:this.path+"/register"}},confirm(){return{path:this.path+"/confirm"}},confirmSend(){return{path:this.path+"/confirm/send"}},confirmCall(){return{path:this.path+"/confirm/call"}},reset(){return{path:this.path+"/reset"}},resetSend(){return{path:this.path+"/reset/send"}},resetCall(){return{path:this.path+"/reset/call"}}}},functionsCall(){return{path:this.path+"/functions/call"}}}},auth(){return{path:this.path+"/auth",apiKeys(){return{path:this.path+"/api_keys",key(t){return{path:this.path+`/${t}`,enable(){return{path:this.path+"/enable"}},disable(){return{path:this.path+"/disable"}}}}}},profile(){return{path:this.path+"/profile"}},session(){return{path:this.path+"/session"}},delete(){return{path:this.path+"/delete"}}}}}}function t5(t){K0=t}function nl(){if(K0)return K0;throw new Error("Cannot get environment before it's set")}function r5(t,e,r,n){return new hS(t,e,r,n)}function n5(t,e,r){return{collection:r5.bind(null,t,e,r)}}function i5(t,e="mongo-db"){return{db:n5.bind(null,t,e)}}function u5(t){if(typeof t!="object"||t===null)throw new Error("Expected a non-null object");if(Symbol.asyncIterator in t)return t;if("getReader"in t){let e=t;return{[Symbol.asyncIterator](){let r=e.getReader();return{next(){return r.read()},async return(){return await r.cancel(),{done:!0,value:null}}}}}}else throw new Error("Expected an AsyncIterable or a ReadableStream")}function d5(t){return typeof globalThis.open=="function"?globalThis.open(t):(console.log(`Please open ${t}`),null)}function vS(t=globalThis.location,e=mS.defaultStorage){try{let r=t.hash.substr(1);Si.handleRedirect(r,e)}catch(r){console.warn(r)}}var N_,Sk,bk,Ek,Ok,Tk,xk,kk,A_,Ik,D_,cn,q_,Fk,Lk,Pk,Os,C_,F_,Mk,rl,pc,jk,er,L_,$_,H_,G_,X0,H0,yc,Uk,Bk,J_,P_,Es,M_,zk,Vk,Y_,K_,Q0,Z_,X_,Wk,Q_,G0,qk,eS,tS,rS,$k,mc,Hk,J0,un,j_,ep,tn,oS,V0,W0,q0,$0,sS,Yk,ol,lS,Xk,Qk,uo,uS,en,cS,K0,gc,cr,fS,hS,o5,co,U_,Z0,Qt,B_,z_,dS,s5,a5,l5,Si,V_,pS,il,fo,c5,W_,yS,f5,An,gS,bs,h5,mS,wS=mt(()=>{z0();z0();N_=function(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,o;n<i;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))},Sk=function(){function t(e,r,n){this.name=e,this.version=r,this.os=n,this.type="browser"}return t}(),bk=function(){function t(e){this.version=e,this.type="node",this.name="node",this.os=process.platform}return t}(),Ek=function(){function t(e,r,n,i){this.name=e,this.version=r,this.os=n,this.bot=i,this.type="bot-device"}return t}(),Ok=function(){function t(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return t}(),Tk=function(){function t(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return t}(),xk=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,kk=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,A_=3,Ik=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",xk]],D_=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];cn=class{constructor(){if(!cn.fetch)throw new Error("DefaultNetworkTransport.fetch must be set before it's used");if(!cn.AbortController)throw new Error("DefaultNetworkTransport.AbortController must be set before it's used")}fetchWithCallbacks(e,r){this.fetch(e).then(async n=>{let i=await n.text(),o={};return n.headers.forEach((s,a)=>{o[a]=s}),{statusCode:n.status,headers:o,body:i}}).then(n=>r.onSuccess(n)).catch(n=>r.onError(n))}async fetch(e){let{timeoutMs:r,url:n,...i}=e,{signal:o,cancelTimeout:s}=this.createTimeoutSignal(r);try{return await cn.fetch(n,{...cn.extraFetchOptions,signal:o,...i})}finally{s()}}createTimeoutSignal(e){if(typeof e=="number"){let r=new cn.AbortController,n=setTimeout(()=>{r.abort()},e);return{signal:r.signal,cancelTimeout:()=>{clearTimeout(n)}}}else return{signal:void 0,cancelTimeout:()=>{}}}};cn.DEFAULT_HEADERS={"Content-Type":"application/json"};cn.fetch=globalThis.fetch.bind(globalThis);cn.AbortController=globalThis.AbortController;q_="3.7.2",Fk=q_,Lk=typeof atob=="function",Pk=typeof btoa=="function",Os=typeof Buffer=="function",C_=typeof TextDecoder=="function"?new TextDecoder:void 0,F_=typeof TextEncoder=="function"?new TextEncoder:void 0,Mk="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",rl=Array.prototype.slice.call(Mk),pc=(t=>{let e={};return t.forEach((r,n)=>e[r]=n),e})(rl),jk=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,er=String.fromCharCode.bind(String),L_=typeof Uint8Array.from=="function"?Uint8Array.from.bind(Uint8Array):(t,e=r=>r)=>new Uint8Array(Array.prototype.slice.call(t,0).map(e)),$_=t=>t.replace(/=/g,"").replace(/[+\/]/g,e=>e=="+"?"-":"_"),H_=t=>t.replace(/[^A-Za-z0-9\+\/]/g,""),G_=t=>{let e,r,n,i,o="",s=t.length%3;for(let a=0;a<t.length;){if((r=t.charCodeAt(a++))>255||(n=t.charCodeAt(a++))>255||(i=t.charCodeAt(a++))>255)throw new TypeError("invalid character found");e=r<<16|n<<8|i,o+=rl[e>>18&63]+rl[e>>12&63]+rl[e>>6&63]+rl[e&63]}return s?o.slice(0,s-3)+"===".substring(s):o},X0=Pk?t=>btoa(t):Os?t=>Buffer.from(t,"binary").toString("base64"):G_,H0=Os?t=>Buffer.from(t).toString("base64"):t=>{let r=[];for(let n=0,i=t.length;n<i;n+=4096)r.push(er.apply(null,t.subarray(n,n+4096)));return X0(r.join(""))},yc=(t,e=!1)=>e?$_(H0(t)):H0(t),Uk=t=>{if(t.length<2){var e=t.charCodeAt(0);return e<128?t:e<2048?er(192|e>>>6)+er(128|e&63):er(224|e>>>12&15)+er(128|e>>>6&63)+er(128|e&63)}else{var e=65536+(t.charCodeAt(0)-55296)*1024+(t.charCodeAt(1)-56320);return er(240|e>>>18&7)+er(128|e>>>12&63)+er(128|e>>>6&63)+er(128|e&63)}},Bk=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,J_=t=>t.replace(Bk,Uk),P_=Os?t=>Buffer.from(t,"utf8").toString("base64"):F_?t=>H0(F_.encode(t)):t=>X0(J_(t)),Es=(t,e=!1)=>e?$_(P_(t)):P_(t),M_=t=>Es(t,!0),zk=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,Vk=t=>{switch(t.length){case 4:var e=(7&t.charCodeAt(0))<<18|(63&t.charCodeAt(1))<<12|(63&t.charCodeAt(2))<<6|63&t.charCodeAt(3),r=e-65536;return er((r>>>10)+55296)+er((r&1023)+56320);case 3:return er((15&t.charCodeAt(0))<<12|(63&t.charCodeAt(1))<<6|63&t.charCodeAt(2));default:return er((31&t.charCodeAt(0))<<6|63&t.charCodeAt(1))}},Y_=t=>t.replace(zk,Vk),K_=t=>{if(t=t.replace(/\s+/g,""),!jk.test(t))throw new TypeError("malformed base64.");t+="==".slice(2-(t.length&3));let e,r="",n,i;for(let o=0;o<t.length;)e=pc[t.charAt(o++)]<<18|pc[t.charAt(o++)]<<12|(n=pc[t.charAt(o++)])<<6|(i=pc[t.charAt(o++)]),r+=n===64?er(e>>16&255):i===64?er(e>>16&255,e>>8&255):er(e>>16&255,e>>8&255,e&255);return r},Q0=Lk?t=>atob(H_(t)):Os?t=>Buffer.from(t,"base64").toString("binary"):K_,Z_=Os?t=>L_(Buffer.from(t,"base64")):t=>L_(Q0(t),e=>e.charCodeAt(0)),X_=t=>Z_(Q_(t)),Wk=Os?t=>Buffer.from(t,"base64").toString("utf8"):C_?t=>C_.decode(Z_(t)):t=>Y_(Q0(t)),Q_=t=>H_(t.replace(/[-_]/g,e=>e=="-"?"+":"/")),G0=t=>Wk(Q_(t)),qk=t=>{if(typeof t!="string")return!1;let e=t.replace(/\s+/g,"").replace(/={0,2}$/,"");return!/[^\s0-9a-zA-Z\+/]/.test(e)||!/[^\s0-9a-zA-Z\-_]/.test(e)},eS=t=>({value:t,enumerable:!1,writable:!0,configurable:!0}),tS=function(){let t=(e,r)=>Object.defineProperty(String.prototype,e,eS(r));t("fromBase64",function(){return G0(this)}),t("toBase64",function(e){return Es(this,e)}),t("toBase64URI",function(){return Es(this,!0)}),t("toBase64URL",function(){return Es(this,!0)}),t("toUint8Array",function(){return X_(this)})},rS=function(){let t=(e,r)=>Object.defineProperty(Uint8Array.prototype,e,eS(r));t("toBase64",function(e){return yc(this,e)}),t("toBase64URI",function(){return yc(this,!0)}),t("toBase64URL",function(){return yc(this,!0)})},$k=()=>{tS(),rS()},mc={version:q_,VERSION:Fk,atob:Q0,atobPolyfill:K_,btoa:X0,btoaPolyfill:G_,fromBase64:G0,toBase64:Es,encode:Es,encodeURI:M_,encodeURL:M_,utob:J_,btou:Y_,decode:G0,isValid:qk,fromUint8Array:yc,toUint8Array:X_,extendString:tS,extendUint8Array:rS,extendBuiltins:$k},Hk={relaxed:!1};(function(t){t.Normal="normal",t.Server="server"})(J0||(J0={}));(function(t){t.NAME="name",t.EMAIL="email",t.PICTURE="picture",t.FIRST_NAME="first_name",t.LAST_NAME="last_name",t.GENDER="gender",t.BIRTHDAY="birthday",t.MIN_AGE="min_age",t.MAX_AGE="max_age"})(un||(un={}));j_={[un.NAME]:"name",[un.EMAIL]:"email",[un.PICTURE]:"pictureUrl",[un.FIRST_NAME]:"firstName",[un.LAST_NAME]:"lastName",[un.GENDER]:"gender",[un.BIRTHDAY]:"birthday",[un.MIN_AGE]:"minAge",[un.MAX_AGE]:"maxAge"},ep=class{constructor(e){if(this.type=J0.Normal,this.identities=[],typeof e=="object"&&e!==null){let{type:r,identities:n,data:i}=e;if(typeof r=="string")this.type=r;else throw new Error("Expected 'type' in the response body");if(Array.isArray(n))this.identities=n.map(o=>{let{id:s,provider_type:a}=o;return{id:s,providerType:a}});else throw new Error("Expected 'identities' in the response body");if(typeof i=="object"&&i!==null){let o=Object.fromEntries(Object.entries(i).map(([s,a])=>s in j_?[j_[s],a]:[s,a]));this.data=iS(o)}else throw new Error("Expected 'data' in the response body")}else this.data={}}},tn=class{constructor(e,r){this.storage=e,this.keyPart=r}get(e){return this.storage.get(this.keyPart+tn.PART_SEPARATOR+e)}set(e,r){return this.storage.set(this.keyPart+tn.PART_SEPARATOR+e,r)}remove(e){return this.storage.remove(this.keyPart+tn.PART_SEPARATOR+e)}prefix(e){return new tn(this,e)}clear(e=""){return this.storage.clear(this.keyPart+tn.PART_SEPARATOR+e)}addListener(e){return this.storage.addListener(e)}removeListener(e){return this.storage.addListener(e)}};tn.PART_SEPARATOR=":";oS=class{constructor(){this.storage={},this.listeners=new Set}get(e){return e in this.storage?this.storage[e]:null}set(e,r){this.storage[e]=r,this.fireListeners()}remove(e){delete this.storage[e],this.fireListeners()}prefix(e){return new tn(this,e)}clear(e){for(let r of Object.keys(this.storage))(!e||r.startsWith(e))&&delete this.storage[r];this.fireListeners()}addListener(e){this.listeners.add(e)}removeListener(e){this.listeners.delete(e)}fireListeners(){this.listeners.forEach(e=>e())}},V0="accessToken",W0="refreshToken",q0="profile",$0="providerType",sS=class extends tn{constructor(e,r){super(e,`user(${r})`)}get accessToken(){return this.get(V0)}set accessToken(e){e===null?this.remove(V0):this.set(V0,e)}get refreshToken(){return this.get(W0)}set refreshToken(e){e===null?this.remove(W0):this.set(W0,e)}get profile(){let e=this.get(q0);if(e){let r=new ep;return Object.assign(r,JSON.parse(e)),r}}set profile(e){e?this.set(q0,JSON.stringify(e)):this.remove(q0)}get providerType(){let e=this.get($0);if(e)return e}set providerType(e){e?this.set($0,e):this.remove($0)}};Yk=["inspect","callFunction","callFunctionStreaming",...Object.getOwnPropertyNames(Object.prototype)];ol=class{constructor(e,r={}){this.fetcher=e,this.serviceName=r.serviceName,this.argsTransformation=r.argsTransformation||Zk}static create(e,r={}){let n=new ol(e,r);return new Proxy(n,{get(i,o,s){if(typeof o=="string"&&Yk.indexOf(o)===-1)return i.callFunction.bind(i,o);{let a=Reflect.get(i,o,s);return typeof a=="function"?a.bind(i):a}}})}async callFunction(e,...r){let n={name:e,arguments:this.argsTransformation?this.argsTransformation(r):r};this.serviceName&&(n.service=this.serviceName);let i=this.fetcher.appRoute;return this.fetcher.fetchJSON({method:"POST",path:i.functionsCall().path,body:n})}callFunctionStreaming(e,...r){let n={name:e,arguments:this.argsTransformation?this.argsTransformation(r):r};this.serviceName&&(n.service=this.serviceName);let i=this.fetcher.appRoute,o=aS({baas_request:mc.encode(JSON.stringify(n))});return this.fetcher.fetchStream({method:"GET",path:i.functionsCall().path+o})}},lS=!1,Xk=t=>{lS=t},Qk=(t,e)=>{!lS||console.warn(`Deprecation warning from Realm: ${t} is deprecated and will be removed in a future major release. Consider switching to ${e}.`)},uo=(t,e,r,n)=>{if(typeof t[0]!="object"){let i=n?", ...args":"";Qk(`${e}(${r.join(", ")}${i})`,`${e}({ ${r.join(", ")} }${i})`);let o=r.reduce((a,l,h)=>({...a,[l]:t[h]}),{}),s=n?t.slice(r.length):void 0;return{argsObject:o,restArgs:s}}return{argsObject:t[0],restArgs:n?t.slice(1):void 0}};Xk(typeof __DEV__<"u"&&__DEV__);uS=class{constructor(e,r="local-userpass"){this.fetcher=e,this.providerName=r}async registerUser(...e){let{argsObject:r}=uo(e,"registerUser",["email","password"]),n=this.fetcher.appRoute;await this.fetcher.fetchJSON({method:"POST",path:n.emailPasswordAuth(this.providerName).register().path,body:r})}async confirmUser(...e){let{argsObject:r}=uo(e,"confirmUser",["token","tokenId"]),n=this.fetcher.appRoute;await this.fetcher.fetchJSON({method:"POST",path:n.emailPasswordAuth(this.providerName).confirm().path,body:r})}async resendConfirmationEmail(...e){let{argsObject:r}=uo(e,"resendConfirmationEmail",["email"]),n=this.fetcher.appRoute;await this.fetcher.fetchJSON({method:"POST",path:n.emailPasswordAuth(this.providerName).confirmSend().path,body:r})}async retryCustomConfirmation(...e){let{argsObject:r}=uo(e,"retryCustomConfirmation",["email"]),n=this.fetcher.appRoute;await this.fetcher.fetchJSON({method:"POST",path:n.emailPasswordAuth(this.providerName).confirmCall().path,body:r})}async resetPassword(...e){let{argsObject:r}=uo(e,"resetPassword",["token","tokenId","password"]),n=this.fetcher.appRoute;await this.fetcher.fetchJSON({method:"POST",path:n.emailPasswordAuth(this.providerName).reset().path,body:r})}async sendResetPasswordEmail(...e){let{argsObject:r}=uo(e,"sendResetPasswordEmail",["email"]),n=this.fetcher.appRoute;await this.fetcher.fetchJSON({method:"POST",path:n.emailPasswordAuth(this.providerName).resetSend().path,body:r})}async callResetPasswordFunction(...e){let{argsObject:r,restArgs:n}=uo(e,"callResetPasswordFunction",["email","password"],!0),i=this.fetcher.appRoute;await this.fetcher.fetchJSON({method:"POST",path:i.emailPasswordAuth(this.providerName).resetCall().path,body:{...r,arguments:n}})}};en={api:e5},cS=class{constructor(e){this.fetcher=e}create(e){return this.fetcher.fetchJSON({method:"POST",body:{name:e},path:en.api().auth().apiKeys().path,tokenType:"refresh"})}fetch(e){return this.fetcher.fetchJSON({method:"GET",path:en.api().auth().apiKeys().key(e).path,tokenType:"refresh"})}fetchAll(){return this.fetcher.fetchJSON({method:"GET",tokenType:"refresh",path:en.api().auth().apiKeys().path})}async delete(e){await this.fetcher.fetchJSON({method:"DELETE",path:en.api().auth().apiKeys().key(e).path,tokenType:"refresh"})}async enable(e){await this.fetcher.fetchJSON({method:"PUT",path:en.api().auth().apiKeys().key(e).enable().path,tokenType:"refresh"})}async disable(e){await this.fetcher.fetchJSON({method:"PUT",path:en.api().auth().apiKeys().key(e).disable().path,tokenType:"refresh"})}},K0=null;gc=class extends Error{constructor({message:e,code:r}){super(e);this.name="WatchError",this.code=r}};(function(t){t.NEED_DATA="NEED_DATA",t.HAVE_EVENT="HAVE_EVENT",t.HAVE_ERROR="HAVE_ERROR"})(cr||(cr={}));fS=class{constructor(){this._state=cr.NEED_DATA,this._error=null,this._textDecoder=new(nl()).TextDecoder,this._buffer="",this._bufferOffset=0,this._eventType="",this._dataBuffer=""}feedBuffer(e){this.assertState(cr.NEED_DATA),this._buffer+=this._textDecoder.decode(e,{stream:!0}),this.advanceBufferState()}feedLine(e){if(this.assertState(cr.NEED_DATA),e.endsWith(`
`)&&(e=e.substr(0,e.length-1)),e.endsWith("\r")&&(e=e.substr(0,e.length-1)),e.length===0){if(this._dataBuffer.length===0){this._eventType="";return}this._dataBuffer.endsWith(`
`)&&(this._dataBuffer=this._dataBuffer.substr(0,this._dataBuffer.length-1)),this.feedSse({data:this._dataBuffer,eventType:this._eventType}),this._dataBuffer="",this._eventType=""}if(e[0]===":")return;let r=e.indexOf(":"),n=e.substr(0,r),i=r===-1?"":e.substr(r+1);i.startsWith(" ")&&(i=i.substr(1)),n==="event"?this._eventType=i:n==="data"&&(this._dataBuffer+=i,this._dataBuffer+=`
`)}feedSse(e){this.assertState(cr.NEED_DATA);let r=e.data.indexOf("%");if(r!==-1){let n="",i=0;for(let o=r;o!==-1;o=e.data.indexOf("%",i)){n+=e.data.substr(i,o-i);let s=e.data.substr(o,3);s==="%25"?n+="%":s==="%0A"?n+=`
`:s==="%0D"?n+="\r":n+=s,i=o+s.length}n+=e.data.substr(i),e.data=n}if(!e.eventType||e.eventType==="message"){try{let n=_i.parse(e.data);if(typeof n=="object"){this._nextEvent=n,this._state=cr.HAVE_EVENT;return}}catch{}this._state=cr.HAVE_ERROR,this._error=new gc({message:"server returned malformed event: "+e.data,code:"bad bson parse"})}else if(e.eventType==="error"){this._state=cr.HAVE_ERROR,this._error=new gc({message:e.data,code:"unknown"});try{let{error_code:n,error:i}=_i.parse(e.data);if(typeof n!="string"||typeof i!="string")return;this._error=new gc({message:i,code:n})}catch{return}}}get state(){return this._state}nextEvent(){this.assertState(cr.HAVE_EVENT);let e=this._nextEvent;return this._state=cr.NEED_DATA,this.advanceBufferState(),e}get error(){return this._error}advanceBufferState(){for(this.assertState(cr.NEED_DATA);this.state===cr.NEED_DATA;){if(this._bufferOffset===this._buffer.length){this._buffer="",this._bufferOffset=0;return}let e=this._buffer.indexOf(`
`,this._bufferOffset);if(e===-1){this._bufferOffset!==0&&(this._buffer=this._buffer.substr(this._bufferOffset,this._buffer.length-this._bufferOffset),this._bufferOffset=0);return}this.feedLine(this._buffer.substr(this._bufferOffset,e-this._bufferOffset)),this._bufferOffset=e+1}}assertState(e){if(this._state!==e)throw Error(`Expected WatchStream to be in state ${e}, but in state ${this._state}`)}},hS=class{constructor(e,r,n,i){this.functions=ol.create(e,{serviceName:r}),this.databaseName=n,this.collectionName=i,this.serviceName=r,this.fetcher=e}find(e={},r={}){return this.functions.find({database:this.databaseName,collection:this.collectionName,query:e,project:r.projection,sort:r.sort,limit:r.limit})}findOne(e={},r={}){return this.functions.findOne({database:this.databaseName,collection:this.collectionName,query:e,project:r.projection,sort:r.sort})}findOneAndUpdate(e={},r,n={}){return this.functions.findOneAndUpdate({database:this.databaseName,collection:this.collectionName,filter:e,update:r,sort:n.sort,projection:n.projection,upsert:n.upsert,returnNewDocument:n.returnNewDocument})}findOneAndReplace(e={},r,n={}){return this.functions.findOneAndReplace({database:this.databaseName,collection:this.collectionName,filter:e,update:r,sort:n.sort,projection:n.projection,upsert:n.upsert,returnNewDocument:n.returnNewDocument})}findOneAndDelete(e={},r={}){return this.functions.findOneAndReplace({database:this.databaseName,collection:this.collectionName,filter:e,sort:r.sort,projection:r.projection})}aggregate(e){return this.functions.aggregate({database:this.databaseName,collection:this.collectionName,pipeline:e})}count(e={},r={}){return this.functions.count({database:this.databaseName,collection:this.collectionName,query:e,limit:r.limit})}insertOne(e){return this.functions.insertOne({database:this.databaseName,collection:this.collectionName,document:e})}insertMany(e){return this.functions.insertMany({database:this.databaseName,collection:this.collectionName,documents:e})}deleteOne(e={}){return this.functions.deleteOne({database:this.databaseName,collection:this.collectionName,query:e})}deleteMany(e={}){return this.functions.deleteMany({database:this.databaseName,collection:this.collectionName,query:e})}updateOne(e,r,n={}){return this.functions.updateOne({database:this.databaseName,collection:this.collectionName,query:e,update:r,upsert:n.upsert,arrayFilters:n.arrayFilters})}updateMany(e,r,n={}){return this.functions.updateMany({database:this.databaseName,collection:this.collectionName,query:e,update:r,upsert:n.upsert,arrayFilters:n.arrayFilters})}async*watch({ids:e,filter:r}={}){let n=await this.functions.callFunctionStreaming("watch",{database:this.databaseName,collection:this.collectionName,ids:e,filter:r}),i=new fS;for await(let o of n)if(!!o){for(i.feedBuffer(o);i.state==cr.HAVE_EVENT;)yield i.nextEvent();if(i.state==cr.HAVE_ERROR)throw i.error}}};o5="000000000000000000000000";(function(t){t.Active="active",t.LoggedOut="logged-out",t.Removed="removed"})(co||(co={}));(function(t){t.Normal="normal",t.Server="server"})(U_||(U_={}));Z0=class{constructor(e){if(this.app=e.app,this.id=e.id,this.storage=new sS(this.app.storage,this.id),"accessToken"in e&&"refreshToken"in e&&"providerType"in e)this._accessToken=e.accessToken,this._refreshToken=e.refreshToken,this.providerType=e.providerType,this.storage.accessToken=e.accessToken,this.storage.refreshToken=e.refreshToken,this.storage.providerType=e.providerType;else{this._accessToken=this.storage.accessToken,this._refreshToken=this.storage.refreshToken;let r=this.storage.providerType;if(this._profile=this.storage.profile,r)this.providerType=r;else throw new Error("Storage is missing a provider type")}this.fetcher=this.app.fetcher.clone({userContext:{currentUser:this}}),this.apiKeys=new cS(this.fetcher),this.functions=ol.create(this.fetcher)}get accessToken(){return this._accessToken}set accessToken(e){this._accessToken=e,this.storage.accessToken=e}get refreshToken(){return this._refreshToken}set refreshToken(e){this._refreshToken=e,this.storage.refreshToken=e}get state(){return this.id in this.app.allUsers?this.refreshToken===null?co.LoggedOut:co.Active:co.Removed}get isLoggedIn(){return this.state===co.Active}get customData(){if(this.accessToken)return this.decodeAccessToken().userData;throw new Error("Cannot read custom data without an access token")}get profile(){if(this._profile)return this._profile.data;throw new Error("A profile was never fetched for this user")}get identities(){if(this._profile)return this._profile.identities;throw new Error("A profile was never fetched for this user")}get deviceId(){if(this.accessToken){let e=this.accessToken.split(".")[1];if(e){let n=JSON.parse(mc.decode(e)).baas_device_id;if(typeof n=="string"&&n!==o5)return n}}return null}async refreshProfile(){let e=await this.fetcher.fetchJSON({method:"GET",path:en.api().auth().profile().path});this._profile=new ep(e),this.storage.profile=this._profile}async logOut(){try{this._refreshToken!==null&&await this.fetcher.fetchJSON({method:"DELETE",path:en.api().auth().session().path,tokenType:"refresh"})}catch(e){if(!(e instanceof Error)||!e.message.includes("failed to find refresh token"))throw e}finally{this.accessToken=null,this.refreshToken=null}}async linkCredentials(e){let r=await this.app.authenticator.authenticate(e,this);if(this.id!==r.userId){let n=`got user id ${r.userId} expected ${this.id}`;throw new Error(`Link response ment for another user (${n})`)}this.accessToken=r.accessToken,await this.refreshProfile()}async refreshAccessToken(){let e=await this.fetcher.fetchJSON({method:"POST",path:en.api().auth().session().path,tokenType:"refresh"}),{access_token:r}=e;if(typeof r=="string")this.accessToken=r;else throw new Error("Expected an 'access_token' in the response")}async refreshCustomData(){return await this.refreshAccessToken(),this.customData}callFunction(e,...r){return this.functions.callFunction(e,...r)}toJSON(){return{id:this.id,accessToken:this.accessToken,refreshToken:this.refreshToken,profile:this._profile,state:this.state,customData:this.customData}}push(){throw new Error("Not yet implemented")}mongoClient(e){return i5(this.fetcher,e)}decodeAccessToken(){if(this.accessToken){let e=this.accessToken.split(".");if(e.length!==3)throw new Error("Expected an access token with three parts");let r=e[1],n=mc.decode(r),i=JSON.parse(n),{exp:o,iat:s,sub:a,user_data:l={}}=i;if(typeof o!="number")throw new Error("Failed to decode access token 'exp'");if(typeof s!="number")throw new Error("Failed to decode access token 'iat'");return{expires:o,issuedAt:s,subject:a,userData:l}}else throw new Error("Missing an access token")}},Qt=class{constructor(e,r,n){this.providerName=e,this.providerType=r,this.payload=n}static anonymous(){return new Qt("anon-user","anon-user",{})}static userApiKey(e){return new Qt("api-key","api-key",{key:e})}static serverApiKey(e){return new Qt("api-key","api-key",{key:e})}static apiKey(e){return new Qt("api-key","api-key",{key:e})}static emailPassword(e,r){return new Qt("local-userpass","local-userpass",{username:e,password:r})}static function(e){return new Qt("custom-function","custom-function",e)}static jwt(e){return new Qt("custom-token","custom-token",{token:e})}static google(e){return new Qt("oauth2-google","oauth2-google",Qt.derivePayload(e))}static derivePayload(e){if(typeof e=="string"){if(e.includes("://"))return this.derivePayload({redirectUrl:e});if(e.startsWith("4/"))return this.derivePayload({authCode:e});if(e.startsWith("ey"))return this.derivePayload({idToken:e});throw new Error(`Unexpected payload: ${e}`)}else if(Object.keys(e).length===1){if("authCode"in e||"redirectUrl"in e)return e;if("idToken"in e)return{id_token:e.idToken};throw new Error("Unexpected payload: "+JSON.stringify(e))}else throw new Error("Expected only one property in payload, got "+JSON.stringify(e))}static facebook(e){return new Qt("oauth2-facebook","oauth2-facebook",e.includes("://")?{redirectUrl:e}:{accessToken:e})}static apple(e){return new Qt("oauth2-apple","oauth2-apple",e.includes("://")?{redirectUrl:e}:{id_token:e})}},B_="userIds",z_="deviceId",dS=class extends tn{constructor(e,r){super(e,`app(${r})`)}getUserIds(){let e=this.get(B_),r=e?JSON.parse(e):[];if(Array.isArray(r))return[...new Set(r)];throw new Error("Expected the user ids to be an array")}setUserIds(e,r){if(r){let n=this.getUserIds();for(let i of n)e.indexOf(i)===-1&&e.push(i)}this.set(B_,JSON.stringify(e))}removeUserId(e){let n=this.getUserIds().filter(i=>i!==e);this.setUserIds(n,!1)}getDeviceId(){return this.get(z_)}setDeviceId(e){this.set(z_,e)}},s5="abcdefghijklmnopqrstuvwxyz",a5=100,l5={_stitch_client_app_id:"appId",_baas_client_app_id:"appId",_stitch_ua:"userAuth",_baas_ua:"userAuth",_stitch_link:"link",_baas_link:"link",_stitch_error:"error",_baas_error:"error",_stitch_state:"state",_baas_state:"state"},Si=class{constructor(e,r=nl().openWindow){this.storage=e.prefix("oauth2"),this.openWindow=r}static parseRedirectLocation(e){let r=Jk(e),n={};for(let[i,o]of Object.entries(l5)){let s=r[i];s&&(n[o]=s)}return n}static handleRedirect(e,r=nl().defaultStorage){let n=Si.parseRedirectLocation(e),{state:i,error:o}=n;if(typeof i=="string"){let s=r.prefix("oauth2");Si.getStateStorage(s,i).set("result",JSON.stringify(n))}else throw o?new Error(`Failed to handle OAuth 2.0 redirect: ${o}`):new Error("Failed to handle OAuth 2.0 redirect.")}static decodeAuthInfo(e){let r=(e||"").split("$");if(r.length===4){let[n,i,o,s]=r;return{accessToken:n,refreshToken:i,userId:o,deviceId:s}}else throw new Error("Failed to decode 'authInfo' into ids and tokens")}static getStateStorage(e,r){return e.prefix(`state(${r})`)}openWindowAndWaitForRedirect(e,r){let n=Si.getStateStorage(this.storage,r);return new Promise((i,o)=>{let s=null,a,l=()=>{let h=n.get("result");if(h){let p=JSON.parse(h);n.removeListener(l),n.clear();try{s&&(clearInterval(a),s.close())}catch(m){console.warn(`Failed closing redirect window: ${m}`)}finally{i(p)}}};n.addListener(l),s=this.openWindow(e),a=setInterval(()=>{if(!s)clearInterval(a);else if(s.closed){clearInterval(a),n.removeListener(l);let h=new Error("Window closed");o(h)}},a5)})}generateState(){return Gk(12,s5)}},V_="x-baas-location",pS=class{constructor(e,r,n){this.fetcher=e,this.oauth2=new Si(r),this.getDeviceInformation=n}async authenticate(e,r){let n=this.getDeviceInformation(),i=typeof r=="object";if(e.providerType.startsWith("oauth2")&&typeof e.payload.redirectUrl=="string"){let o=this.oauth2.generateState(),s=await this.getLogInUrl(e,i,{state:o,redirect:e.payload.redirectUrl,providerRedirectHeader:i?!0:void 0,device:i?void 0:n.encode()});if(i){let l=(await this.fetcher.fetch({method:"GET",url:s,tokenType:i?"access":"none",user:r,mode:"cors",credentials:"include"})).headers.get(V_);if(l)return this.openWindowAndWaitForAuthResponse(l,o);throw new Error(`Missing ${V_} header`)}else return this.openWindowAndWaitForAuthResponse(s,o)}else{let o=await this.getLogInUrl(e,i),s=await this.fetcher.fetchJSON({method:"POST",url:o,body:{...e.payload,options:{device:n.toJSON()}},tokenType:i?"access":"none",user:r}),{user_id:a,access_token:l,refresh_token:h=null,device_id:p}=s;if(typeof a!="string")throw new Error("Expected a user id in the response");if(typeof l!="string")throw new Error("Expected an access token in the response");if(typeof h!="string"&&h!==null)throw new Error("Expected refresh token to be a string or null");if(typeof p!="string")throw new Error("Expected device id to be a string");return{userId:a,accessToken:l,refreshToken:h,deviceId:p}}}async getLogInUrl(e,r=!1,n={}){let o=this.fetcher.appRoute.authProvider(e.providerName).login(),s=aS({link:r?"true":void 0,...n});return await this.fetcher.locationUrl+o.path+s}async openWindowAndWaitForAuthResponse(e,r){let n=await this.oauth2.openWindowAndWaitForRedirect(e,r);return Si.decodeAuthInfo(n.userAuth)}},il=class extends Error{constructor(e,r,n,i,o,s,a){let l=i?`status ${n} ${i}`:`status ${n}`;typeof o=="string"?super(`Request failed (${e} ${r}): ${o} (${l})`):super(`Request failed (${e} ${r}): (${l})`),this.method=e,this.url=r,this.statusText=i,this.statusCode=n,this.error=o,this.errorCode=s,this.link=a}static async fromRequestAndResponse(e,r){var n;let{url:i,method:o}=e,{status:s,statusText:a}=r;if((n=r.headers.get("content-type"))===null||n===void 0?void 0:n.startsWith("application/json")){let l=await r.json();if(typeof l=="object"&&l){let{error:h,error_code:p,link:m}=l;return new il(o,i,s,a,typeof h=="string"?h:void 0,typeof p=="string"?p:void 0,typeof m=="string"?m:void 0)}}return new il(o,i,s,a)}};fo=class{constructor({appId:e,transport:r,userContext:n,locationUrlContext:i}){this.appId=e,this.transport=r,this.userContext=n,this.locationUrlContext=i}static buildAuthorizationHeader(e,r){if(!e||r==="none")return{};if(r==="access")return{Authorization:`Bearer ${e.accessToken}`};if(r==="refresh")return{Authorization:`Bearer ${e.refreshToken}`};throw new Error(`Unexpected token type (${r})`)}static buildBody(e){if(e){if(typeof e=="object"&&e!==null)return JSON.stringify(nS(e));if(typeof e=="string")return e;throw console.log("body is",e),new Error("Unexpected type of body")}else return}static buildJsonHeader(e){return e&&e.length>0?{"Content-Type":"application/json"}:{}}clone(e){return new fo({appId:this.appId,transport:this.transport,userContext:this.userContext,locationUrlContext:this.locationUrlContext,...e})}async fetch(e){let{path:r,url:n,tokenType:i="access",user:o=this.userContext.currentUser,...s}=e;if(typeof r=="string"&&typeof n=="string")throw new Error("Use of 'url' and 'path' mutually exclusive");if(typeof r=="string"){let a=await this.locationUrlContext.locationUrl+r;return this.fetch({...e,path:void 0,url:a})}else if(typeof n=="string"){let a=await this.transport.fetch({...s,url:n,headers:{...fo.buildAuthorizationHeader(o,i),...e.headers}});if(a.ok)return a;if(o&&a.status===401&&i==="access")return await o.refreshAccessToken(),this.fetch({...e,user:o});throw o&&a.status===401&&i==="refresh"&&(o.accessToken=null,o.refreshToken=null),await il.fromRequestAndResponse(e,a)}else throw new Error("Expected either 'url' or 'path'")}async fetchJSON(e){let{body:r}=e,n=fo.buildBody(r),i=fo.buildJsonHeader(n),o=await this.fetch({...e,body:n,headers:{Accept:"application/json",...i,...e.headers}}),s=o.headers.get("content-type");if(s==null?void 0:s.startsWith("application/json")){let a=await o.json();return iS(a)}else{if(s===null)return null;throw new Error(`Expected JSON response, got "${s}"`)}}async fetchStream(e){let{body:r}=await this.fetch({...e,headers:{Accept:"text/event-stream",...e.headers}});return u5(r)}get appRoute(){return en.api().app(this.appId)}get locationUrl(){return this.locationUrlContext.locationUrl}},c5="deviceId";(function(t){t.DEVICE_ID="deviceId",t.APP_ID="appId",t.APP_VERSION="appVersion",t.PLATFORM="platform",t.PLATFORM_VERSION="platformVersion",t.SDK_VERSION="sdkVersion"})(W_||(W_={}));yS=class{constructor({appId:e,appVersion:r,deviceId:n}){this.sdkVersion="1.7.0";let i=nl();this.platform=i.platform,this.platformVersion=i.platformVersion,this.appId=e,this.appVersion=r,this.deviceId=n}encode(){let e=Y0(this);return mc.encode(JSON.stringify(e))}toJSON(){return Y0(this)}},f5="https://realm.mongodb.com",An=class{constructor(e){this.users=[],this._locationUrl=null;let r=typeof e=="string"?{id:e}:e;if(typeof r=="object"&&typeof r.id=="string")this.id=r.id;else throw new Error("Missing a MongoDB Realm app-id");this.baseUrl=r.baseUrl||f5,r.skipLocationRequest&&(this._locationUrl=Promise.resolve(this.baseUrl)),this.localApp=r.app;let{storage:n,transport:i=new cn}=r;this.fetcher=new fo({appId:this.id,userContext:this,locationUrlContext:this,transport:i}),this.emailPasswordAuth=new uS(this.fetcher);let o=n||nl().defaultStorage;this.storage=new dS(o,this.id),this.authenticator=new pS(this.fetcher,o,()=>this.deviceInformation);try{this.hydrate()}catch(s){this.storage.clear(),console.warn("Realm app hydration failed:",s instanceof Error?s.message:s)}}static getApp(e){if(e in An.appCache)return An.appCache[e];{let r=new An(e);return An.appCache[e]=r,r}}switchUser(e){let r=this.users.findIndex(i=>i===e);if(r===-1)throw new Error("The user was never logged into this app");let[n]=this.users.splice(r,1);this.users.unshift(n)}async logIn(e,r=!0){let n=await this.authenticator.authenticate(e),i=this.createOrUpdateUser(n,e.providerType);this.switchUser(i),r&&await i.refreshProfile(),this.storage.setUserIds(this.users.map(s=>s.id),!0);let o=n.deviceId;return o&&o!=="000000000000000000000000"&&this.storage.set(c5,o),i}async removeUser(e){let r=this.users.findIndex(n=>n===e);if(r===-1)throw new Error("The user was never logged into this app");this.users.splice(r,1),await e.logOut(),this.storage.remove(`user(${e.id}):profile`),this.storage.removeUserId(e.id)}async deleteUser(e){await this.fetcher.fetchJSON({method:"DELETE",path:en.api().auth().delete().path}),await this.removeUser(e)}get currentUser(){let e=this.users.filter(r=>r.state===co.Active);return e.length===0?null:e[0]}get allUsers(){return Object.fromEntries(this.users.map(e=>[e.id,e]))}get locationUrl(){if(!this._locationUrl){let e=en.api().app(this.id).location().path;this._locationUrl=this.fetcher.fetchJSON({method:"GET",url:this.baseUrl+e,tokenType:"none"}).then(r=>{if(typeof r!="object")throw new Error("Expected response body be an object");return r}).then(({hostname:r})=>{if(typeof r!="string")throw new Error("Expected response to contain a 'hostname'");return r}).catch(r=>{throw this._locationUrl=null,r})}return this._locationUrl}get deviceInformation(){let e=this.storage.getDeviceId(),r=typeof e=="string"&&e!=="000000000000000000000000"?new Sr(e):void 0;return new yS({appId:this.localApp?this.localApp.name:void 0,appVersion:this.localApp?this.localApp.version:void 0,deviceId:r})}createOrUpdateUser(e,r){let n=this.users.find(i=>i.id===e.userId);if(n)return n.accessToken=e.accessToken,n.refreshToken=e.refreshToken,n;{if(!e.refreshToken)throw new Error("No refresh token in response from server");let i=new Z0({app:this,id:e.userId,accessToken:e.accessToken,refreshToken:e.refreshToken,providerType:r});return this.users.unshift(i),i}}hydrate(){let e=this.storage.getUserIds();this.users=e.map(r=>new Z0({app:this,id:r}))}};An.appCache={};An.Credentials=Qt;gS=class{constructor(){if(typeof globalThis.localStorage=="object")this.global=globalThis;else throw new Error("Cannot use LocalStorage without a global localStorage object")}get(e){return this.global.localStorage.getItem(e)}set(e,r){return this.global.localStorage.setItem(e,r)}remove(e){return this.global.localStorage.removeItem(e)}prefix(e){return new tn(this,e)}clear(e){let r=[];for(let n=0;n<this.global.localStorage.length;n++){let i=this.global.localStorage.key(n);i&&(!e||i.startsWith(e))&&r.push(i)}for(let n of r)this.global.localStorage.removeItem(n)}addListener(e){return this.global.addEventListener("storage",e)}removeListener(e){return this.global.removeEventListener("storage",e)}},bs=Nk(),h5="localStorage"in globalThis?gS:oS;mS={defaultStorage:new h5().prefix("realm-web"),openWindow:d5,platform:(bs==null?void 0:bs.name)||"web",platformVersion:(bs==null?void 0:bs.version)||"0.0.0",TextDecoder};t5(mS)});function Bt(t="struct",e={},r={_id:""},n={structType:"struct",_id:""}){let i={_id:function(o=""){return`${o+Math.floor(Math.random()+Math.random()*Math.random()*1e16)}`}(t+"defaultId"),structType:t,ownerId:r?._id,timestamp:Date.now(),parent:{structType:n?.structType,_id:n?._id}};return i.ownerId||delete i.ownerId,i?.parent?._id||delete i.parent,Object.keys(e).length>0&&Object.assign(i,e),i}function vc(t,e={}){if(!ho[t.tag]&&t.position&&(ho[t.tag]=[t.position.x,t.position.y,t.position.z]),ho[t.tag]){let r={channel:"",position:{x:ho[t.tag][0],y:ho[t.tag][1],z:ho[t.tag][2]}};return Object.assign(e,r)}return Object.assign(e,t)}function wc(t=[],e={}){let r={scp:[],delta:[],theta:[],alpha1:[],alpha2:[],beta:[],lowgamma:[],highgamma:[]};return t.forEach(n=>r[n]=[]),Object.assign(e,r)}function bi(t="",e={},r={_id:""},n={structType:"struct",_id:""}){let i=wc(),o={tag:t,position:{x:0,y:0,z:0},count:0,times:[],raw:[],filtered:[],fftCount:0,fftTimes:[],ffts:[],slices:JSON.parse(JSON.stringify(i)),means:JSON.parse(JSON.stringify(i)),startTime:Date.now()},s=Bt("eeg",o,r,n);return t&&vc(o,s),Object.assign(s,e)}function rp(t={0:bi("FP1"),1:bi("FP2")},e={},r={_id:""},n={structType:"struct",_id:""}){let i=wc(),o=Bt("coherence",{tag:t[0]?.tag+"::"+t[1]?.tag,x0:t[0]?.position?.x,y0:t[0]?.position?.y,z0:t[0]?.position?.z,x1:t[1]?.position?.x,y1:t[1]?.position?.y,z1:t[1]?.position?.z,fftCount:0,fftTimes:[],ffts:[],slices:JSON.parse(JSON.stringify(i)),means:JSON.parse(JSON.stringify(i)),startTime:Date.now()},r,n);return Object.assign(o,e)}function tp(t={channelDicts:[{ch:0,tag:"FP1",analyze:!1},{ch:1,tag:"FP2",analyze:!1}],taggedOnly:!0},e={},r={_id:""},n={structType:"struct",_id:""}){for(var i=[],o=1,s=0,a=0;a<t.channelDicts.length*(t.channelDicts.length+1)/2-t.channelDicts.length;a++){if(t.taggedOnly===!1||t.taggedOnly===!0&&t.channelDicts[s].tag!==null&&t.channelDicts[s+o].tag!==null&&t.channelDicts[s].tag!=="other"&&t.channelDicts[s+o].tag!=="other"&&t.channelDicts[s].analyze===!0&&t.channelDicts[s+o].analyze===!0){var l=bi(t.channelDicts[s].tag),h=bi(t.channelDicts[s+o].tag);i.push(rp({0:l,1:h},{},r,n))}++o+s===t.channelDicts.length&&(s++,o=1)}return i}function np(t="",e={},r={_id:""},n={structType:"struct",_id:""}){let i={tag:t,position:{x:0,y:0,z:0},count:0,times:[],red:[],ir:[],ir2:[],ambient:[],ratio:[],temp:[],beat_detect:{beats:[],breaths:[],rir:[],rir2:[],drir_dt:[],localmins:[],localmaxs:[],val_dists:[],peak_dists:[],localmins2:[],localmaxs2:[],val_dists2:[],peak_dists2:[]},startTime:Date.now()},o=Bt("fnirs",i,r,n);return t&&vc(i,o),Object.assign(o,e)}function _S(t="",e={},r={_id:""},n={structType:"struct",_id:""}){let i={tag:t,Ax:[],Ay:[],Az:[],Gx:[],Gy:[],Gz:[],startTime:Date.now()},o=Bt("imu",i,r,n);return t&&vc(i,o),Object.assign(o,e)}function SS(t="",e={},r={_id:""},n={structType:"struct",_id:""}){let i=Bt("eyetracker",{tag:t,count:0,times:[],x:[],y:[],smax:[],smay:[],startTime:Date.now()},r,n);return Object.assign(i,e)}function ip(t="",e={},r={_id:""},n={structType:"struct",_id:""}){let i=Bt("ecg",{tag:t,count:0,times:[],raw:[],filtered:[],bpm:[],hrv:[],startTime:Date.now()},r,n);return Object.assign(i,e)}function bS(t="",e={},r={_id:""},n={structType:"struct",_id:""}){}function ES(t="",e={},r={_id:""},n={structType:"struct",_id:""}){let i=np(t,r,n,e);return i.structType="ppg",i}function OS(t="",e={},r={_id:""},n={structType:"struct",_id:""}){let i=ip(t,r,n,e);return i.structType="hrv",i}function TS(t="",e={},r={_id:""},n={structType:"struct",_id:""}){let i=bi(t,r,n,e);return i.structType="emg",i}function xS(t="",e={},r={_id:""},n={structType:"struct",_id:""}){let i=Bt("profile",{tag:t,name:"",username:"",firstName:"",lastName:"",email:"",sex:"",birthday:"",type:"",userRoles:[],id:""},r,n);return Object.assign(i,e)}function kS(t="",e={},r={_id:""},n={structType:"struct",_id:""}){let i=Bt("authorization",{tag:t,authorizedId:"",authorizedName:"",authorizerId:"",authorizerName:"",authorizations:new Array,structs:new Array,excluded:new Array,groups:new Array,status:"PENDING",expires:!1,associatedAuthId:""},r,n);return Object.assign(i,e)}function IS(t="",e={},r={_id:""},n={structType:"struct",_id:""}){let i=Bt("group",{tag:t,name:"",details:"",admins:new Array,peers:new Array,clients:new Array,users:new Array},r,n);return Object.assign(i,e)}function NS(t="",e={},r={_id:""},n={structType:"struct",_id:""}){let i=Bt("dataInstance",{tag:t,title:"",author:"",expires:!1,type:"",data:new Array},r,n);return Object.assign(i,e)}function AS(t="",e={},r={_id:""},n={structType:"struct",_id:""}){let i=Bt("event",{tag:t,event:"",author:"",startTime:"",endTime:"",grade:0,notes:"",attachments:new Array,users:new Array},r,n);return Object.assign(i,e)}function DS(t="",e={},r={_id:""},n={structType:"struct",_id:""}){let i=Bt("chatroom",{tag:t,message:"",topic:"",author:"",attachments:new Array,comments:new Array,replies:new Array,users:new Array,audioChatActive:!1,videoChatActive:!1},r,n);return Object.assign(i,e)}function RS(t="",e={},r={_id:""},n={structType:"struct",_id:""}){let i=Bt("comment",{tag:t,author:"",replyTo:"",message:"",rating:0,replies:new Array,users:new Array,attachments:new Array},r,n);return Object.assign(i,e)}function CS(t="",e={},r={_id:""},n={structType:"struct",_id:""}){let i=Bt("notification",{tag:t,note:"",parentUserId:""},r,n);return Object.assign(i,e)}function FS(t="",e={},r={_id:""},n={structType:"struct",_id:""}){let i=Bt("schedule",{tag:t,title:"",author:"",attachments:new Array,dates:new Array},r,n);return Object.assign(i,e)}function LS(t="",e={},r={_id:""},n={structType:"struct",_id:""}){let i=Bt("date",{tag:t,timeSet:"",notes:"",recurs:"NEVER",attachments:new Array},r,n);return Object.assign(i,e)}function $e(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var ho,p5,Ei,Fe,O8,op,PS=mt(()=>{ho={FP1:[-21.2,66.9,12.1],FPZ:[1.4,65.1,11.3],FP2:[24.3,66.3,12.5],AF7:[-41.7,52.8,11.3],AF3:[-32.7,48.4,32.8],AFZ:[1.8,54.8,37.9],AF4:[35.1,50.1,31.1],AF8:[43.9,52.7,9.3],F5:[-51.4,26.7,24.7],F3:[-39.7,25.3,44.7],F1:[-22.1,26.8,54.9],FZ:[0,26.8,60.6],F2:[23.6,28.2,55.6],F4:[41.9,27.5,43.9],F6:[52.9,28.7,25.2],F7:[-52.1,28.6,3.8],F8:[53.2,28.4,3.1],FC5:[-59.1,3,26.1],FC3:[-45.5,2.4,51.3],FC1:[-24.7,.3,66.4],FCZ:[1,1,72.8],FC2:[26.1,3.2,66],FC4:[47.5,4.6,49.7],FC6:[60.5,4.9,25.5],FT9:[-53.8,-2.1,-29.1],FT7:[-59.2,3.4,-2.1],FT8:[60.2,4.7,-2.8],FT10:[55,-3.6,-31],T7:[-65.8,-17.8,-2.9],T5:[-61.5,-65.3,1.1],T3:[-70.2,-21.3,-10.7],T4:[71.9,-25.2,-8.2],T6:[59.3,-67.6,3.8],T8:[67.4,-18.5,-3.4],C5:[-63.6,-18.9,25.8],C3:[-49.1,-20.7,53.2],C1:[-25.1,-22.5,70.1],CZ:[.8,-21.9,77.4],C2:[26.7,-20.9,69.5],C4:[50.3,-18.8,53],C6:[65.2,-18,26.4],CP5:[-61.8,-46.2,22.5],CP3:[-46.9,-47.7,49.7],CP1:[-24,-49.1,66.1],CPZ:[.7,-47.9,72.6],CP2:[25.8,-47.1,66],CP4:[49.5,-45.5,50.7],CP6:[62.9,-44.6,24.4],TP9:[-73.6,-46.7,-4],TP7:[-63.6,-44.7,-4],TP8:[64.6,-45.4,-3.7],TP10:[74.6,-47.4,-3.7],P9:[-50.8,-51.3,-37.7],P7:[-55.9,-64.8,0],P5:[-52.7,-67.1,19.9],P3:[-41.4,-67.8,42.4],P1:[-21.6,-71.3,52.6],PZ:[.7,-69.3,56.9],P2:[24.4,-69.9,53.5],P4:[44.2,-65.8,42.7],P6:[54.4,-65.3,20.2],P8:[56.4,-64.4,.1],P10:[51,-53.9,-36.5],PO7:[-44,-81.7,1.6],PO3:[-33.3,-84.3,26.5],POZ:[0,-87.9,33.5],PO4:[35.2,-82.6,26.1],PO8:[43.3,-82,.7],O1:[-25.8,-93.3,7.7],OZ:[.3,-97.1,8.7],O2:[25,-95.2,6.2]};p5={Struct:Bt,EEGStruct:bi,FNIRSStruct:np,CoherenceStruct:rp,CoherenceMap:tp,FrequencyBandsStruct:wc,IMUStruct:_S,EyeTrackerStruct:SS,ECGStruct:ip,EDAStruct:bS,PPGStruct:ES,HRVStruct:OS,EMGStruct:TS,ProfileStruct:xS,AuthorizationStruct:kS,GroupStruct:IS,DataStruct:NS,EventStruct:AS,ChatroomStruct:DS,CommentStruct:RS,NotificationStruct:CS,ScheduleStruct:FS,DateStruct:LS},Ei=Object.freeze({__proto__:null,Struct:Bt,eegCoordinates:ho,setCoordinate:vc,EEGCoordinates:function(t=[],e=!0){let r=[];for(let n of t){let i=bi(n);r.push(i)}return e&&r.push(...tp({channelDicts:t})),r},FrequencyBandsStruct:wc,EEGStruct:bi,CoherenceStruct:rp,CoherenceMap:tp,FNIRSStruct:np,IMUStruct:_S,EyeTrackerStruct:SS,ECGStruct:ip,EDAStruct:bS,PPGStruct:ES,HRVStruct:OS,EMGStruct:TS,ProfileStruct:xS,AuthorizationStruct:kS,GroupStruct:IS,DataStruct:NS,EventStruct:AS,ChatroomStruct:DS,CommentStruct:RS,NotificationStruct:CS,ScheduleStruct:FS,DateStruct:LS,structRegistry:p5});Fe=class{constructor(){}static genSineWave(e=20,r=1,n=1,i=512,o=0,s=1){for(var a=[],l=[],h=1/i,p=0;p<n;p+=h){var m=Math.sin(2*Math.PI*e*p)*r;m+=Math.sin(2*Math.PI*o*p)*s,a.push(m),l.push(p)}return[l,a]}static getSineAmplitude(e=20,r=1,n=0,i=0){return Math.sin(this.TWO_PI*e*n+i)*r}static mean(e){return e.reduce((r,n)=>n+r)/e.length}static mode(e){return e.sort((r,n)=>e.filter(i=>i===r).length-e.filter(i=>i===n).length).pop()}static std(e,r){let n=r;r||(n=this.mean(e));let i=0;for(let o=0;o<e.length;o++){let s=e[o]-n;i+=s*s}return Math.sqrt(i/e.length)}static relError(e=[],r=[],n=!0){if(e.length!==r.length)throw new Error("Input arrays of same length!");let i=e.length,o=[];for(let s=0;s<i;s++){let a=(e[s]-r[s])/e[s];n&&(a=Math.abs(a)),o.push(a)}return o}static informationEntropy(e=[]){let r=[],n=e.length;for(let i=0;i<n;i++){let o=e[i]*Math.log(e[i]);isNaN(o)&&(o=0),r.push(o)}return r}static zscore(e){let r=this.mean(e),n=this.std(e,r),i=[];for(let o=0;o<e.length;o++)i.push((e[o]-r)/n);return i}static variance(e){var r=this.mean(e);return e.reduce((n,i)=>n+(i-r)**2,0)/e.length}static dot(e,r){for(var n=0,i=0;i<e.length;i++)n+=e[i]*r[i];return n}static cross3D(e,r){return[e[1]*r[2]-e[2]*r[1],e[2]*r[0]-e[0]*r[2],e[0]*r[1]-e[1]*r[0]]}static magnitude(e){var r=0;return e.forEach(n=>{r+=n*n}),Math.sqrt(r)}static distance(e,r){var n=0;return e.forEach((i,o)=>{n+=(r[o]-i)*(r[o]-i)}),Math.sqrt(n)}static normalize(e){var r;r=this.magnitude(e);var n=[];return e.forEach((i,o)=>{n.push(i*r)}),n}static quadraticFormula(e,r,n){let i=Math.sqrt(r*r-4*e*n);if(!isNaN(i))return["complex","complex"];let o=1/(2*e);if(i===0)return[r*o];let s=-r;return[(s+i)*o,(s-i)*o]}static newtonsMethod(e=s=>Math.pow(s,5)+s*s-s-.2,r=0,n=1,i=.01,o=10){let s=[];for(let a=0;a<o;a++){let l,h=Math.random()*(n-r),p=e(h),m=e(h+i),y=(m-p)/i,w=h+i;for(;Math.abs(y)>i;){let N=w+-p/O;p=m,m=e(N);let O=(m-p)/(N-w)}let b=s.find((N,O)=>{if(Math.abs(xn1-N)<i)return l=O,!0});b?s[l]=.5*(xn1+b):s.push(xn1)}return s}static makeVec(e,r){var n=[];return e.forEach((i,o)=>{n.push(r[o]-i)}),n}static transpose(e){return e[0].map((r,n)=>e.map(i=>i[n]))}static matmul(e,r){var n=e.length,i=e[0].length;r.length;for(var o=r[0].length,s=new Array(n),a=0;a<n;++a){s[a]=new Array(o);for(var l=0;l<o;++l){s[a][l]=0;for(var h=0;h<i;++h)s[a][l]+=e[a][h]*r[h][l]}}return s}static matscale(e,r){let n=[];for(var i=0;i<e.length;i++){n[i]=[];for(let o=0;o<e[0].length;o++)n[i][o]=e[i][o]*r}return n}static matadd(e,r){let n=[];for(let o=0;o<e.length;o++){n[o]=[];for(var i=0;i<e[0].length;i++)n[o][i]=e[o][i]+r[o][i]}return n}static matsub(e,r){let n=[];for(let o=0;o<e.length;o++){n[o]=[];for(var i=0;i<e[0].length;i++)n[o][i]=e[o][i]-r[o][i]}return n}static histogram(e=[],r=1,n){let i=[...e];i.sort(function(h,p){return h-p});let o=Math.min(...i);if(typeof n=="number"){let h=Math.max(...i);r=Math.abs((h-o)/(n-1))}let s=o,a=[],l=[];for(let h=0;h<i.length;h++){let p=r*s;if(i[h]>o+p){s++,p+=r;let m=o+p+.5*p;a.push(m),l.push(0)}l[l.length-1]++}return[a,l]}static normalDistribution(e=[],r=!0,n=1e-4){let i=this.mean(e),o=this.variance(e),s=e.length,a=[],l=1/(this.TWO_PI*o),h=1/o,p=0;for(let m=0;m<s;m++){let y=Math.exp(-.5*Math.pow((e[m]-i)*h,2))*l;y<n&&(y=0),a.push(y),p+=y}if(r){let m=1/p;a=a.map(y=>y*m)}return a}static expectedValue(e=[],r=this.normalDistribution(e)){return e.reduce((n,i,o)=>n+i*r[o])}static originMoment(e=[],r=this.normalDistribution(e),n=1){return e.reduce((i,o,s)=>i+Math.pow(o,n)*r[s])}static centralMoment(e=[],r=this.normalDistribution(e),n=1){let i=this.mean(e);return e.reduce((o,s,a)=>o+Math.pow(s-i,n)*r[a]/e.length)}static linearDiscriminantAnalysis(e=[],r=[]){let n=this.mean(e),i=this.mean(r),o=this.cov1d(e,r),s=this.normalDistribution(e),a=[];for(let l=0;l<e.length;l++)a.push(x[l]*o*i-.5*n*o*i+Math.log10(s[l]));return a}static conv1D(e=[],r=[1/3,1/3,1/3],n=Math.floor(.5*r.length)){let i=[],o=1/r.length;if(n>0){let l=new Array(n).fill(0);e=[...l,...e,...l]}let s=Math.floor(.5*r.length),a=e.length-r.length+s;for(let l=s;l<a;l++){let h=0;for(let p=0;p<r.length;p++)h+=e[l-s]*r[p];i.push(h*o)}return i}static conv2D(e=[[],[],[]],r=[[],[],[]],n=0){let i,o=new Array(e.length-Math.ceil(.5*r.length)).fill([]),s=Fe.transpose(s);if(n>0){let O=new Array(n).fill(0);i=Fe.transpose(e);for(let I=0;I<i.length;I++)i[I]=[...O,...i[I],...O];e=Fe.transpose(i);for(let I=0;I<e.length;I++)e[I]=[...O,...e[I],...O]}let a,l=Math.floor(.5*r[0].length),h=Math.floor(.5*s[0].length),p=e[0].length-r[0].length+l,m=i[0].length-s[0].length+h,y=1/(r[0].length*s[0].length),w=p*m,b=l,N=h;for(;b<w;){let O=0;a=b%e[0].length,a===0&&N++;for(let I=0;I<r[0].length;I++){for(let R=0;R<s[0].length;I++)O+=e[N-h+R][a-l+I]*r[R][I];o[N].push(O*y)}b++}return o}static cov2d(e){var r=this.transpose(e),n=[],i=[],o=[];e.forEach((b,N)=>{i.push(this.mean(b))}),r.forEach((b,N)=>{o.push(this.mean(b))}),e.forEach((b,N)=>{n.push([]);for(var O=0;O<b.length;O++)n[N].push((e[N][O]-i[N])*(e[N][O]-o[O])/(b.length-1))});var s=this.transpose(n),a=n.length,l=n[0].length;s.length;for(var h=s[0].length,p=new Array(a),m=0;m<a;++m){p[m]=new Array(h);for(var y=0;y<h;++y){p[m][y]=0;for(var w=0;w<l;++w)p[m][y]+=n[m][w]*s[w][y]/(e[0].length-1)}}return p}static cov1d(e=[],r=[]){return this.cov2d([e,r])}static cov3d(e=[],r=[],n=[]){return[[this.cov1d(e,e),this.cov1d(e,r),this.cov1d(e,n)],[this.cov1d(r,e),this.cov1d(r,r),this.cov1d(r,n)],[this.cov1d(n,e),this.cov1d(n,r),this.cov1d(n,n)]]}static covNd(e=[]){let r=[];e.forEach((n,i)=>{r.push([]),e.forEach((o,s)=>{r[i].push(this.cov1d(n,o))})})}static eigens2x2(e=[[1,2],[3,4]]){let r=e[0][0]*e[1][1]-e[0][1]*e[1][0],n=.5*(e[0][0]+e[1][1]),i=Math.sqrt(n*n-r);return[n+i,n-i]}static eigenvectors2x2(e=[[1,2],[3,4]],r=[1,2]){let n=[-e[0][1],e[0][0]-r[0]];n[0]===0&&n[1]===0&&(n[0]=e[1][1]-r[0],n[1]=-e[1][0]);let i=[-e[0][1],e[0][0]-r[1]];return i[0]===0&&i[1]===0&&(i[0]=e[1][1]-r[1],i[1]=-e[1][0]),[n,i]}static fastpca2d(e,r){let n=this.cov1d(e,r),i=this.eigens2x2(n);i[1]>i[0]&&i.reverse();let o=this.eigenvectors2x2(n,i);return console.log(i,o),[i,o]}static crosscorrelation(e,r){var n=[...r,...Array(r.length).fill(0)],i=this.mean(e),o=this.mean(r),s=e.reduce((y,w)=>y+Math.pow(w-i,2));s=Math.sqrt(s);for(var a=r.reduce((y,w)=>y+Math.pow(w-i,2)),l=1/(s*(a=Math.sqrt(a))),h=new Array(e.length).fill(0),p=0;p<e.length;p++){var m=e.reduce((y,w,b)=>y+(w-i)*(n[p+b]-o));h[p]=m*l}return h}static autocorrelation(e){for(var r=[...e,...Array(e.length).fill(0)],n=this.mean(e),i=e.reduce((h,p)=>h+Math.pow(p-n,2)),o=1/((i=Math.sqrt(i))*i),s=new Array(e.length).fill(0),a=0;a<e.length;a++){var l=e.reduce((h,p,m)=>h+(p-n)*(r[a+m]-n));s[a]=l*o}return s}static correlograms(e=[[],[]]){var r=[];return e.forEach((n,i)=>{e.forEach((o,s)=>{s>=i&&r.push(Fe.crosscorrelation(n,o))})}),r}static sma(e=[],r){for(var n=[],i=0;i<e.length;i++)if(i==0)n.push(e[0]);else if(i<r){var o=e.slice(0,i+1);n.push(o.reduce((s,a)=>a+s)/(i+1))}else o=e.slice(i-r,i),n.push(o.reduce((s,a)=>a+s)/r);return n}static sum(e=[]){return e.length>0?e.reduce((r,n)=>n+r):0}static reduceArrByFactor(e,r=2){return e.filter((n,i)=>i%r==0)}static makeArr(e,r,n){for(var i=[],o=(r-e)/(n-1),s=0;s<n;s++)i.push(e+o*s);return i}static interpolateArray(e,r,n=1){var i=function(y,w,b){return(y+(w-y)*b)*n},o=new Array,s=new Number((e.length-1)/(r-1));o[0]=e[0];for(var a=1;a<r-1;a++){var l=a*s,h=new Number(Math.floor(l)).toFixed(),p=new Number(Math.ceil(l)).toFixed(),m=l-h;o[a]=i(e[h],e[p],m)}return o[r-1]=e[e.length-1],o}static isExtrema(e,r="peak"){let n=[...e];if(n.length%2==0&&n.pop(),e.length>1){let i=!0;for(let o=0;o<n.length;o++){let s=n[o];if(r==="peak"){if(o<Math.floor(.5*n.length)&&s>=n[Math.floor(.5*n.length)]){i=!1;break}if(o>Math.floor(.5*n.length)&&s>=n[Math.floor(.5*n.length)]){i=!1;break}}else if(r==="valley"){if(o<Math.floor(.5*n.length)&&s<=n[Math.floor(.5*n.length)]){i=!1;break}if(o>Math.floor(.5*n.length)&&s<=n[Math.floor(.5*n.length)]){i=!1;break}}else{if(o<Math.floor(.5*n.length)&&s<=n[Math.floor(.5*n.length)]){i=!1;break}if(o>Math.floor(.5*n.length)&&s<=n[Math.floor(.5*n.length)]){i=!1;break}}}if(r!=="peak"&&r!=="valley"&&i===!1){i=!0;for(let o=0;o<n.length;o++){let s=n[o];if(o<Math.floor(.5*n.length)&&s>=n[Math.floor(.5*n.length)]){i=!1;break}if(o>Math.floor(.5*n.length)&&s>=n[Math.floor(.5*n.length)]){i=!1;break}}}return i}}static isCriticalPoint(e,r="peak"){let n=[...e];if(n.length%2==0&&n.pop(),e.length>1){let i=!0;for(let o=0;o<n.length;o++){let s=n[o];if(r==="peak"){if(o<.5*n.length&&s<=0){i=!1;break}if(o>.5*n.length&&s>0){i=!1;break}}else if(r==="valley"){if(o<.5*n.length&&s>=0){i=!1;break}if(o>.5*n.length&&s<0){i=!1;break}}else{if(o<.5*n.length&&s>=0){i=!1;break}if(o>.5*n.length&&s<0){i=!1;break}}}if(r!=="peak"&&r!=="valley"&&i===!1){i=!0;for(let o=0;o<n.length;o++){let s=n[o];if(o<.5*n.length&&s<=0){i=!1;break}if(o>.5*n.length&&s>0){i=!1;break}}}return i}}static getPeakThreshold(e,r,n){let i,o=e.filter((s,a)=>{if(r.indexOf(a)>-1)return!0});return i=n===0?this.mean(o):.5*(n+this.mean(o)),i}static column(e,r){let n=new Array(e.length).fill(0).map(()=>new Array(1).fill(0));for(let i=0;i<e.length;i++)n[i][0]=e[i][r];return n}static flatten_vector(e){let r=[];for(let n=0;n<e.length;n++)r[n]=e[n][0];return r}static squared_difference(e,r){let n=0;for(let i=0;i<e.length;i++)n+=Math.pow(e[i]-r[i],2);return n}static shift_deflate(e,r,n){let i=Math.sqrt(this.matmul(this.transpose(n),n)),o=this.matscale(n,1/i),s=this.matscale(this.matmul(o,this.transpose(o)),r);return this.matsub(e,s)}static eigenvalue_of_vector(e,r){return ev=this.matmul(this.matmul(this.transpose(r),e),r),ev}static power_iteration(e,r=1e-5,n=1e3){let i=e.length,o=new Array(i).fill(0).map(()=>new Array(1).fill(Math.sqrt(i))),s=this.eigenvalue_of_vector(e,o),a=1,l=0;for(;a>r&&l<n;){let h=JSON.parse(JSON.stringify(s)),p=this.matmul(e,o);o=this.normalize(p),s=this.eigenvalue_of_vector(e,o),a=Math.abs(s-h),l++}return[s,o]}static eigens(e,r=1e-4,n=1e3){let i=[],o=[];for(let s=0;s<e.length;s++){let a=this.power_iteration(e,r,n),l=a[0],h=a[1];i[s]=l,o[s]=this.flatten_vector(h),e=this.shift_deflate(e,l,h)}return[i,o]}static pca(e,r=1e-5){let n=e.length,i=new Array(n),o=new Array(n),s=this.transpose(e);for(i[0]=this.column(e,0);espilon>r;){o[0]=this.matmul(s,i[0]);let a=this.matmul(this.transpose(i[0]),i[0]);o[0]=this.matscale(o[0],1/a);let l=Math.sqrt(this.matmul(this.transpose(o[0]),o[0]));o[0]=this.matscale(o[0],1/l);let h=this.matmul(e,o[0]),p=this.matmul(this.transpose(o[0]),o[0]);h=this.matscale(h,1/p),this.squared_difference(i[0],h),i[0]=JSON.parse(JSON.stringify(h))}return this.matmul(this.transpose(i[0]),i[0])}static p300(e=[],r=[],n=[],i=256){let o=Math.floor(i/10),s=this.sma(r,o),a=this.peakDetect(s,"peak",o),l=this.mean(s),h=this.std(s,l),p=0,m=[];return a.length>0&&e.forEach((y,w)=>{for(;n[a[p]]<y+200&&(p++,a[p]););let b=0,N=[];for(;n[a[p+b]]<y+600&&(N.push(p+b),b++,a[p+b]););if(N.length>1){let O=[];N.forEach(J=>{O.push(s[a[J]])});let I=Math.max(...O),R=N[O.indexOf(I)];m.push({event_timestamp:y,event_index:w,peak_timestamp:n[[a[R]]],signal_index:[a[R]],signal_amplitude:r[[a[R]]],zscore:(s[a[R]]-l)/h})}else N.length===1&&m.push({event_timestamp:y,event_index:w,peak_timestamp:n[a[N[0]]],signal_index:a[N[0]],signal_amplitude:r[[a[N[0]]]],zscore:(s[a[N[0]]]-l)/h})}),m}};$e(Fe,"TWO_PI",2*Math.PI),$e(Fe,"C",299792458),$e(Fe,"G",66743e-15),$e(Fe,"h",662607015e-42),$e(Fe,"R",8314.32),$e(Fe,"Ra",287),$e(Fe,"H",69.3),$e(Fe,"kbar",1054571817e-43),$e(Fe,"kB",1380649e-29),$e(Fe,"ke",89875517923e-1),$e(Fe,"me",91093837015e-41),$e(Fe,"mp",167262192369e-38),$e(Fe,"mn",167492749804e-38),$e(Fe,"P0",101325),$e(Fe,"T0",288.15),$e(Fe,"p0",1.225),$e(Fe,"Na",60220978e16),$e(Fe,"y",1.405),$e(Fe,"M0",28.96643),$e(Fe,"g0",9.80665),$e(Fe,"Re",6378100),$e(Fe,"B",1458e-9),$e(Fe,"S",110.4),$e(Fe,"Sigma",365e-12),$e(Fe,"imgkernels",{edgeDetection:[[-1,-1,-1],[-1,8,-1],[-1,-1,-1]],boxBlur:[[1/9,1/9,1/9],[1/9,1/9,1/9],[1/9,1/9,1/9]],sobelLeft:[[1,0,-1],[2,0,-2],[1,0,-1]],sobelRight:[[-1,0,1],[-2,0,2],[-1,0,1]],sobelTop:[[1,2,1],[0,0,0],[-1,-2,-1]],sobelBottom:[[-1,2,1],[0,0,0],[1,2,1]],identity:[[0,0,0],[0,1,0],[0,0,0]],gaussian3x3:[[1,2,1],[2,4,2],[1,2,1]],guassian7x7:[[0,0,0,5,0,0,0],[0,5,18,32,18,5,0],[0,18,64,100,64,18,0],[5,32,100,100,100,32,5],[0,18,64,100,64,18,0],[0,5,18,32,18,5,0],[0,0,0,5,0,0,0]],emboss:[[-2,-1,0],[-1,1,1],[0,1,2]],sharpen:[[0,-1,0],[-1,5,-1],[0,-1,0]]}),$e(Fe,"integral",(t=n=>n,e=[],r=.01)=>{let n=0;for(let i=e[0];i<e[1];i+=r)n+=t(i)*r;return n}),$e(Fe,"dintegral",(t=(i,o)=>i+o,e=[[],[]],r=.01,n=r)=>{let i=0;for(let o=e[0][0]+r;o<e[0][1];o+=r)for(let s=e[1][0]+n;s<e[1][1];s+=n)i+=t(o,s)*r*n;return i}),$e(Fe,"tintegral",(t=(o,s,a)=>o+s+a,e=[[],[],[]],r=.01,n=r,i=r)=>{let o=0;for(let s=e[0][0]+r;s<e[0][1];s+=r)for(let a=e[1][0]+n;a<e[1][1];a+=n)for(let l=e[2][0]+i;l<e[2][1];l+=i)o+=t(s,a,l)*r*n*i;return o}),$e(Fe,"pintegral",(t=n=>n,e=[],r=.01)=>{let n,i,o=0;for(let s=e[0];s<e[1];s+=r)n=i,i=t(s),n&&(o+=Fe.distance([0,n],[r,i]));return o}),$e(Fe,"peakDetect",(t,e="peak",r=49)=>{let n=Math.floor(.5*r),i=[];for(let o=0;o<t.length-r;o++)Fe.isExtrema(t.slice(o,o+r),e)&&i.push(o+n-1);return i});O8=Object.freeze({__proto__:null,getCoherenceScore:(t,e="alpha1")=>{let r=[];return Array.isArray(t)||(t=[t]),t.forEach(n=>{if(n.fftCount>0){let i=n.fftCount,o=Math.min(20,i),s=n.means[e].slice(i-o);r.push(Fe.mean(s))}}),Fe.mean(r)},getAlphaRatio:t=>t.fftCount>0?t.means.alpha2[t.fftCount-1]/t.means.alpha1[t.fftCount-1]:0,getThetaBetaRatio:t=>t.fftCount>0?t.means.theta[t.fftCount-1]/t.means.beta[t.fftCount-1]:0,getAlphaBetaRatio:t=>t.fftCount>0?.5*(t.means.alpha1[t.fftCount-1]+t.means.alpha2[t.fftCount-1])/t.means.beta[t.fftCount-1]:0,getAlphaThetaRatio:t=>t.fftCount>0?.5*(t.means.alpha1[t.fftCount-1]+t.means.alpha2[t.fftCount-1])/t.means.theta[t.fftCount-1]:0,get40HzGamma:(t,e)=>{if(t.fftCount>0&&Array.isArray(e)){let r=t.slices.lowgamma[t.fftCount-1],n=[];return r.forEach((i,o)=>{e.lowgamma[0][o]>38&&e.lowgamma[0][o]<42&&n.push(i)}),Math.max(...n)}return 0},getLowGammaScore:t=>{if(t.fftCount>0){let e=t.fftCount,r=20;e<r&&(r=e);let n=t.means.lowgamma.slice(e-r);return t.means.lowgamma[e-1]-Fe.mean(n)}return 0},getHEGRatioScore:t=>{if(t.count>0){let e=t.count,r=40;e<r&&(r=e);let n=t.ratio.slice(e-r);return t.ratio[e-1]-Fe.mean(n)}return 0},splitFrequencyBands:function(t=[],e={scp:[.1,1],delta:[1,4],theta:[4,8],alpha1:[8,12],alpha2:[12,16],beta:[16,30],lowgamma:[30,45],highgamma:[45,100]}){let r={};return t.forEach((n,i)=>{for(let o in e)r[o]||(r[o]=[[],[]]),n>=e[o][0]&&n<=e[o][1]&&(r[o][0].push(n),r[o][1].push(i))}),r},mapFFTData:(t,e,r,n)=>{let i=0;n.fftCount++,n.fftTimes.push(e),n.ffts.push(t);for(let o in r){let s=t.slice(i,i+r[o][1].length);n.slices[o].push(s),n.means[o].push(s.reduce((a,l)=>a+l)/s.length),i+=r[o][1].length}},mapCoherenceData:(t,e,r,n)=>{t.forEach((i,o)=>{n[o].fftCount++,n[o].fftTimes.push(e),n[o].ffts.push(data);let s=0;for(let a in r){let l=fft.slice(s,s+r[a][1].length);coord.slices[a].push(l),coord.means[a].push(l.reduce((h,p)=>h+p)/l.length),s+=r[a][1].length}})},bandpassWindow:function(t,e,r){let n=(e-t)/r,i=[],o=0;for(;o<e;)i.push(o),o+=n;return i}}),op=class{constructor(e={},r=!1,n){this.DS=Ei,this.collections=new Map,this.data={byTime:{},notes:{},events:{},sleep:{},food:{},hr:{},ppg:{},hrv:{},ecg:{},emg:{},eeg:{},fnirs:{}},this.rolloverLimit=5e4,this.dataSorts=new Map,this.watches={},this.onCollectionSet=(i,o)=>{},this.ontrigger=i=>{},this.threaded=r,n?this.workers=n:typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&(this.threaded=!0),Object.assign(this.data,e),this.dataSorts=new Map,this.watches={},this.setSort("event",i=>(this.data.events[i.timestamp]?this.data.events[i.timestamp].push(i):this.data.events[i.timestamp]=[i],i.event==="sleep"&&(this.data.sleep[i.timestamp]?this.data.sleep[i.timestamp].push(i):this.data.sleep[i.timestamp]=[i]),i)),this.setSort(["notes","note","link"],i=>(this.data.notes[i.timestamp]?this.data.notes[i.timestamp].push(i):this.data.notes[i.timestamp]=[i],this.data.byTime[i.timestamp]?this.data.byTime[i.timestamp].push(i):this.data.byTime[i.timestamp]=[i],i)),this.id=this.randomId("dataTablet")}randomId(e=""){return`${e+Math.floor(Math.random()+Math.random()*Math.random()*1e16)}`}setLocalData(e){let r=n=>{let i=n.structType,o=this.collections.get(i);o||(o=new Map,this.collections.set(i,o)),o.set(n._id,n),this.onCollectionSet(i,o)};Array.isArray(e)?e.forEach(n=>{r(n)}):r(e)}getLocalData(e,r){let n="",i="",o="";if(typeof r=="object"?(n=r.ownerId,i=Object.keys(r).filter(l=>l!="ownerId")[0],o=r[i]):o=r,!(e||n||i||o))return[];let s=[];if(!e&&(n||i))return this.collections.forEach(a=>{if(i!=="_id"&&i!=="id"||!o)a.forEach(l=>{i&&o?l[i]===o&&l.ownerId===n&&s.push(l):l.ownerId===n&&s.push(l)});else{let l=a.get(o);l&&s.push(l)}}),s;{let a=this.collections.get(e);if(!a)return s;if(!i&&!n)return a.forEach(l=>{s.push(l)}),s;if((i==="_id"||i==="id")&&o)return a.get(o);a.forEach((l,h)=>{i&&o&&!n?l[i]===o&&s.push(l):n&&!i?l.ownerId===n&&s.push(l):n&&i&&o&&l.ownerId===n&&l[i]&&l[i]===o&&s.push(l)})}return s}runSort(e,r={},n=[],i=this){let o;if(this.threaded===!1){let s=this.getSort(e);if(!s)return!1;o=s(r,n,i)}else if(this.threaded===!0)return this.workers.runWorkerFunction("runSort",[e,r,n],this.workerId,this.id);return o}setSort(e,r=(n,i=[],o=this)=>{}){if(this.threaded===!1)Array.isArray(e)?e.forEach(n=>{this.dataSorts.set(n,r)}):this.dataSorts.set(e,r);else if(this.threaded===!0)return this.workers.runWorkerFunction("setSort",[e,r.toString()],this.workerId,this.id)}getSort(e){return this.threaded===!1?this.dataSorts.get(e):this.threaded===!0?this.workers.runWorkerFunction("getSort",[e],this.workerId,this.id):void 0}checkWatches(e={}){for(let r in this.watches)this.watches[r].ondata(e,this.watches[r].accum,this.watches[r]),this.watches[r].triggered&&(this.ontrigger(this.watches[r].accum),this.watches[r].triggered=!1)}setWatch(e,r=(i,o,s)=>{},n=i=>{}){this.watches[e]={triggered:!1,accum:this.DS.Struct("alert"),ondata:r,ontrigger:n}}getWatch(e){return this.watches[e]}async sortStructsIntoTable(e=[]){e.sort(function(n,i){return n.timestamp-i.timestamp});let r=[];for(let n=0;n<e.length;n++){let i=e[n];if(!i.timestamp)continue;let o=i.timestamp;if(this.data.byTime[o]?this.data.byTime[o].push(i):this.data.byTime[o]=[i],i.structType==="dataInstance"&&i.data)i.data.forEach(async s=>{if(typeof s=="object"&&!Array.isArray(s)){let a=s.dataType;if(s.ownerId=i.ownerId,s.timestamp||(s.timestamp=o),a){let l=this.runSort(a,s,r,this);l?l.constructor?.name!=="Promise"&&(this.checkWatches(l),this.onUpdate(o,l),r.push(l)):(this.data[a]||(this.data[a]={}),s.timestamp=o,this.data[a][o]?this.data[a][o].push(s):this.data[a][o]=[s],this.data.byTime[o]?this.data.byTime[o].push(s):this.data.byTime[o]=[s],this.checkWatches(s),this.onUpdate(o,s),r.push(s))}}});else{let s=this.runSort(i.structType,i,r,this);if(s)this.checkWatches(s),this.onUpdate(o,s),r.push(s);else{let a=i.structType;this.data[a]||(this.data[a]={}),this.data[a][o]?this.data[a][o].push(i):this.data[a][o]=[i],this.checkWatches(i),this.onUpdate(o,i),r.push(i)}}}for(let n in this.data)this.data[n]=this.sortObjectByPropName(this.data[n]);this.onSorted(r)}onUpdate(e,r,n=this.data){}onSorted(e=[]){}getDataByTimestamp(e,r){if(this.threaded===!0)return this.workers.runWorkerFunction("getDataByTimestamp",[e,r],this.workerId,this.id);let n=this.data.byTime[e];return r&&n&&(n=n.filter(i=>!r||r===i.ownerId)),n}getDataByTimeRange(e,r,n,i){if(this.threaded===!0)return this.workers.runWorkerFunction("getDataByTimeRange",[e,r,n,i],this.workerId,this.id);let o={};if(n){for(let s in this.data[n]){let a=parseInt(s);a>e&&a<r&&(o[s]=[...this.data[n][s]])}n==="sleep"&&(o=this.filterSleepResults(o))}else for(let s in this.data.byTime){let a=parseInt(s);a>e&&a<r&&(o[s]=[...this.data.byTime[s]])}if(i&&o)for(let s in o){let a=[];o[s]=o[s],o[s].forEach((l,h)=>{l.ownerId!==i&&a.push(h)}),a.reverse().forEach(l=>{o[s].splice(l,1)}),o[s].length===0&&delete o[s]}return o}getDataByType(e,r,n){if(!this.data[e])return;let i={...this.data[e]};if(r&&(i=[...i[r]]),n&&i)for(let o in i){let s=[];i[o]=[...i[o]],i[o].forEach((a,l)=>{a.ownerId!==n&&s.push(l)}),s.reverse().forEach(a=>{i[o].splice(a,1)}),i[o].length===0&&delete i[o]}return e==="sleep"&&(i=this.filterSleepResults(i)),i}filterSleepResults(e={}){let r=[];for(let n in e)e[n]=[...e[n]],r.push(...e[n].filter(i=>i.structType==="event"));return r.forEach(n=>{let i;for(let o in e)e[o].forEach((s,a)=>!(s.structType!=="fitbitsleep"||!n.startTime||!n.endTime)&&Math.abs(s.startTime-n.startTime)<432e5&&Math.abs(s.endTime-n.endTime)<432e5&&n.endTime-n.startTime>72e5&&(i=a,!0)),i&&e[o].splice(i,1)}),e}sortObjectByPropName(e){return Object.keys(e).sort().reduce((r,n)=>(r[n]=e[n],r),{})}checkRollover(e,r=this.rolloverLimit){if(!e)return!1;let n=this.collections.get(e);return!!n&&(n.forEach(i=>{for(let o in i)Array.isArray(i[o])?i[o].length>r&&(i[o].slice(i[o].length-r),o==="ffts"?i.fftCount=i[o].length:o==="times"&&(i.count=i[o].length)):typeof i[o]=="object"&&this.checkRollover(i[o])}),!0)}}});function MS(t,e){let r=e instanceof URL?e:new URL(e);return t=r.pathname==="/"?t:r.pathname+t,new URL(t,r.href).href}function sp(t,e=!0){t=t.replace(/\/\*\*?/,"");let r=t.split("/");e&&(r=r.slice(0,r.length-1));let n=[t];return n.push(t+"/*"),n.push(t+"/**"),r.forEach((i,o)=>{let s=r.slice(0,o+1).join("/");s!=t&&(o===r.length-1&&n.push(s+"/*"),n.push(s+"/**"))}),n}var ap=mt(()=>{});var fn,lp,_c,Ts=mt(()=>{fn=t=>(t?`${t}_`:"")+Math.floor(1e5*Math.random()),lp=(t=Math,e=Date,r=16,n=i=>t.floor(i).toString(r))=>n(e.now()/1e3)+" ".repeat(r).replace(/./g,()=>n(t.random()*r)),_c=(t={})=>(t._id||(t._id=lp()),t={_id:t._id,id:t.id||t._id},t)});function jS(t){if(t instanceof Function){var e=t.toString().replace(g5,""),r=e.slice(e.indexOf("(")+1,e.indexOf(")")).match(m5);return r===null&&(r=[]),r}else return}function I8(method=""){let getFunctionBody=t=>t.replace(/^\W*(function[^{]+\{([\s\S]*)\}|[^=]+=>[^{]*\{([\s\S]*)\}|[^=]+=>(.+))/i,"$2$3$4"),getFunctionHead=t=>{let e=t.indexOf(")");return t.slice(0,t.indexOf("{",e)+1)},newFuncHead=getFunctionHead(method),newFuncBody=getFunctionBody(method),newFunc;if(newFuncHead.includes("function ")){let t=newFuncHead.split("(")[1].split(")")[0];newFunc=new Function(t,newFuncBody)}else if(newFuncHead.substring(0,6)===newFuncBody.substring(0,6)){let t=newFuncHead.split("(")[1].split(")")[0];newFunc=new Function(t,newFuncBody.substring(newFuncBody.indexOf("{")+1,newFuncBody.length-1))}else newFunc=eval(newFuncHead+newFuncBody+"}");return newFunc}var y5,up,g5,m5,cp=mt(()=>{y5=input=>{if(typeof input=="string"&&(input=JSON.parse(input)),typeof input=="object"){for(let key in input){let value=input[key],regex=new RegExp("(|[a-zA-Z]w*|([a-zA-Z]w*(,s*[a-zA-Z]w*)*))s*=>"),func=typeof value=="string"?value.substring(0,8)=="function":!1,arrow=typeof value=="string"?regex.test(value):!1;try{input[key]=func||arrow?eval("("+value+")"):value}catch(t){console.error(t,value),input[key]=value}typeof input[key]=="object"&&y5(input[key])}return input}else return{}},up=(t,e=!0)=>{t instanceof Object&&(t=Array.isArray(t)?[...t]:Object.assign({},t));for(let r in t)t[r]instanceof Function&&(t[r]=t[r].toString()),t[r]instanceof Object&&(t[r]=up(t[r],!1));return e?JSON.stringify(t):t},g5=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/mg,m5=/([^\s,]+)/g});var US,BS=mt(()=>{US=`<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Error</title>
</head>
<body>
<pre>404 Not Found</pre>
</body>
</html>`});var fp=Te((xs,zS)=>{"use strict";var v5=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof qn<"u")return qn;throw new Error("unable to locate global object")},qn=v5();zS.exports=xs=qn.fetch;qn.fetch&&(xs.default=qn.fetch.bind(qn));xs.Headers=qn.Headers;xs.Request=qn.Request;xs.Response=qn.Response});var hp,VS=mt(()=>{cp();ap();Ts();try{if(typeof process=="object"){let t=fp();typeof globalThis.fetch!="function"&&(globalThis.fetch=t)}}catch(t){}hp=class{constructor(e="https://localhost",r,n){this.id=null;this.target=null;this.type=null;this.link=null;this.credentials={};this.connection=null;this.services={available:{},connecting:{},queue:{}};this.router=null;this.clients={};this.user=lp();this.status=!1;this.responses={};this.setCredentials=e=>{console.error("Setting credentials"),this.credentials=_c(e),console.error("Creds",this.credentials)};this.check=()=>re(this,null,function*(){var i,o,s,a,l,h;this.type==="webrtc"&&(yield this._subscribe({protocol:"webrtc",force:!0}).then(p=>{this.status=!0}).catch(p=>console.log("Link doesn't have WebRTC enabled.",p)));let e=()=>re(this,null,function*(){return yield this._subscribe({protocol:"websocket",force:!0}).then(p=>(this.status=!0,p)),yield this.send("services")}),r=()=>re(this,null,function*(){return yield this.send("services")}),n;if(this.type==="websocket"){let p=yield e().then(m=>(this.status=!0,m)).catch(m=>re(this,null,function*(){if(this.type==="websocket")return console.log("Falling back to http"),yield r()}))}else n=yield r().then(p=>(this.status=!0,p)).catch(p=>re(this,null,function*(){return console.log("Falling back to websockets"),yield e()}));if(n){console.log("Connection successful!");let p=n.message[0],m=[];for(let y in p){let b=p[y].replace(/Backend|Service/,"").toLowerCase();this.services.available[b]=y,m.push(b),((s=(o=(i=this.router)==null?void 0:i.SERVICES)==null?void 0:o[b])==null?void 0:s.status)instanceof Function&&this.router.SERVICES[b].status(y),((a=this.clients[b])==null?void 0:a.serviceType)==="subscription"&&((l=this.services.queue[b])==null||l.forEach(N=>N()),this.services.queue[b]=[])}(h=this.services.queue.undefined)==null||h.forEach(y=>y()),this.services.queue.undefined=[]}else console.log("Connection failed!");return n==null?void 0:n.message});this.send=(i,...o)=>re(this,[i,...o],function*(e,r={},n=()=>{}){var l,h,p,m,y,w,b,N,O;if(typeof e=="string")r.route=e;else{let I=this.services[e.service];r.route=I?`${I}/${e.route}`:e.route}r.suppress=!!this.connection;let s,a={suppress:r.suppress,id:(h=(l=this.link)==null?void 0:l.credentials)==null?void 0:h.id};if(console.log("Creds",a,this.link),((p=this.connection)==null?void 0:p.protocol)==="websocket")r.id=(m=this.link.credentials)==null?void 0:m.id,s=yield this.link.connection.service.send(r,a);else if(((y=this==null?void 0:this.connection)==null?void 0:y.protocol)==="webrtc")r.id=((w=this.credentials)==null?void 0:w.id)||((b=this.link.credentials)==null?void 0:b.id),s=yield this.connection.service.send(r,a);else{r.id=(N=this.link.credentials)==null?void 0:N.id,r.method||(r.method=((O=r.message)==null?void 0:O.length)>0?"POST":"GET");let I={method:r.method.toUpperCase(),mode:"cors",headers:{"Content-Type":"application/json"}};I.method!="GET"&&(I.body=up(r)),s=yield fetch(MS(r.route,this.link.target),I).then(R=>re(this,null,function*(){let J=R.body.getReader(),q=R.headers.get("Content-Length"),G=0;if(globalThis.ReadableStream){let F=new ReadableStream({start(z){let S=()=>re(this,null,function*(){J.read().then(({value:W,done:te})=>{if(te){z.close();return}G+=W.length,n(G/q,q),z.enqueue(W),S()})});S()}});return new Response(F,{headers:R.headers})}else return R})),s=s&&(yield s.json().then(R=>{if(s.ok)return R;throw R.message}).catch(R=>re(this,null,function*(){throw"Invalid JSON"})))}return s&&!(s==null?void 0:s.route)&&(s.route=r.route,s.block=!0),s});this._subscribe=(...r)=>re(this,[...r],function*(e={}){let n=()=>new Promise(i=>re(this,null,function*(){var a;let o=(a=e.protocol)!=null?a:this.type;(o?[this.clients[o]]:Object.values(this.clients)).forEach(l=>re(this,null,function*(){var h;if(l&&e.force||(l==null?void 0:l.status)===!0&&(l==null?void 0:l.serviceType)==="subscription"){let p=`${(h=this.link.services.available[l==null?void 0:l.service])!=null?h:l.name.toLowerCase()}/subscribe`;if(l.setEndpoint(this.link),!this.connection){let y=this.type==="http"||this.type==="websocket"?new URL(p,this.target):this.target,w=yield l.add(this.credentials,y.href);this.router&&l.addResponse("router",b=>{let N=typeof b=="string"?JSON.parse(b):b;Object.values(this.responses).forEach(O=>{O(N)}),this.router&&this.router.handleLocalRoute(N)}),this.connection={service:l,credentials:this.credentials,protocol:l.name}}this.type==="webrtc"&&(e.routes=[this.target]);let m=yield this.link.send(p,Object.assign({route:e.route,message:e.message,protocol:e.protocol},{message:[e.routes,this.credentials.id]}));i(this.connection);return}})),this.services.queue[o]||(this.services.queue[o]=[]),this.services.queue[o].push(()=>re(this,null,function*(){let l=yield n();i(l)}))}));return yield n()});this.subscribe=e=>{if(e){let r=fn("response");return this.responses[r]=e,r}};this.unsubscribe=e=>{e?delete this.responses[e]:this.responses={}};let i,o;typeof e=="object"?e instanceof URL?i=e:(i=e.target,o=e.type,this.link=e.link,this.setCredentials(e.credentials)):i=e,o||(o="http"),this.link||(this.link=this),o==="http"||o==="websocket"?(i=i instanceof URL?i:new URL(i),this.id=i.origin):this.id=i,this.target=i,this.type=o,this.router=n,r&&(this.clients=r)}}});var w5,dp,WS=mt(()=>{S0();ap();Ts();cp();BS();VS();w5="DONOTSEND",dp=class{constructor(e={debug:!1}){this.id=fn();this.USERS={};this.CONNECTIONS=new Map;this.SUBSCRIPTIONS=[];this.ENDPOINTS={};this.SERVICES={};this.ROUTES={};this.INTERVAL=10;this.DEFAULTROUTES=[{route:"ping",post:()=>"pong"},{route:"services/**",get:{object:this.SERVICES,transform:(e,...r)=>{let n={};return(r.length>0?[r[0]]:Object.keys(e)).forEach(o=>{let s=e[o];(s==null?void 0:s.serviceType)==="default"&&(n[o]=s.name)}),r.forEach((o,s)=>n=n[o]),n}}},{route:"/",aliases:["routes/**"],get:{object:this.ROUTES,transform:(e,...r)=>{let n={};return(r.length>0?[r[0]]:Object.keys(e)).forEach(o=>{o&&(n[o]={route:e[o].route.split("/").filter(s=>!s.match(/\*\*?/)).join("/"),args:e[o].args,wildcard:o.includes("*")})}),r.forEach((o,s)=>n=n[o]),n}}},{route:"sendMessage",aliases:["message","sendMsg"],post:(e,r)=>e.sendMsg(r[0],r[1],r[2])},{route:"setUserServerDetails",post:(e,r,n)=>{let i=e.USERS[n];if(!i)return!1;r[0]&&(i.username=r[0]),r[1]&&(i.password=r[1]),r[2]&&(i.props=r[2]),r[3]&&(i._id=r[3],i.id=r[3])}},{route:"setProps",post:(e,r,n)=>{let i=e.USERS[n];if(!i)return!1;if(typeof r=="object"&&!Array.isArray(r))return Object.assign(i.props,r),!0;if(Array.isArray(r)&&typeof r[1]=="object"){let o=e.USERS[r[0]];return o&&Object.assign(o.props,r[1]),!0}return!1}},{route:"getProps",post:(e,r,n)=>{let i=e.USERS[n];if(!i)return!1;if(r[0]){let o=e.USERS[r[0]];if(o)return o.props}else return i.props}},{route:"blockUser",post:(e,r,n)=>{let i=e.USERS[n];return i?this.blockUser(i,r[0]):!1}},{route:"users/**",get:{object:this.USERS,transform:(e,...r)=>{let n={};return(r.length>0?[r[0]]:Object.keys(e)).forEach(o=>{let s=e[o];n[o]={_id:s._id,username:s.username,origin:s.origin,props:s.props,updatedPropNames:s.updatedPropNames,lastUpdate:s.lastUpdate,lastTransmit:s.lastTransmit,latency:s.latency}}),r.forEach((o,s)=>n=n[o]),n}}},{route:"getUser",post:(e,r,n)=>{let i=e.USERS[n];if(!i)return!1;if(r[0]){let o=this.USERS[r[0]];if(o)return{_id:o._id,username:o.username,origin:o.origin,props:o.props,updatedPropNames:o.updatedPropNames,lastUpdate:o.lastUpdate,lastTransmit:o.lastTransmit,latency:o.latency}}else return{_id:i._id,username:i.username,origin:i.origin,props:i.props,updatedPropNames:i.updatedPropNames,lastUpdate:i.lastUpdate,lastTransmit:i.lastTransmit,latency:i.latency}}},{route:"login",aliases:["addUser","startSession"],post:(e,r,n)=>re(this,null,function*(){let i=yield e.addUser(r[0]);return{message:{_id:i.origin},id:i.origin}})},{route:"logout",aliases:["removeUser","endSession"],post:(e,r,n)=>{let i=e.USERS[n];if(!i)return!1;r[0]?e.removeUser(...r):e.removeUser(i)}}];this.protocols={};this.connect=(e,r)=>{let n=new hp(e,this.SERVICES,this);return this.ENDPOINTS[n.id]=n,n.check().then(i=>{i&&(r&&r(n),this.login(n))}),n};this.disconnect=e=>re(this,null,function*(){this.logout(this.ENDPOINTS[e]),delete this.ENDPOINTS[e]});this._loadBackend=(e,r=e.name)=>{var n;this.SERVICES[r]=e,this.SERVICES[r].status=!0,(n=e.routes)==null||n.forEach(i=>this.addRoute(Object.assign({service:r},i))),e.subscribe&&e.subscribe((i,o,s)=>re(this,null,function*(){let a=yield this.handleMessage(i,o);if(s==null?void 0:s.includes("worker"))if(a!==null&&e[s])e[s].postMessage({route:"worker/workerPost",message:a,origin:e.id,callbackId:i.callbackId});else return a;return a})),(e==null?void 0:e.serviceType)==="subscription"&&this.SUBSCRIPTIONS.push(e.updateSubscribers)};this._loadService=(n,...i)=>re(this,[n,...i],function*(e,r=e==null?void 0:e.name){return this._loadBackend(e,r),yield this._loadClient(e,r,!0)});this._loadClient=(e,r,n=!1)=>new Promise(i=>{let o=e.name;if(e.subscribe&&e.subscribe((s,a)=>re(this,null,function*(){var m;let l=this.SERVICES[o],h=l.status===!0,p;return a==="local"?p=yield this.handleLocalRoute(s):h&&(p=yield this.send({route:`${l.route}/${s.route}`,endpoint:e==null?void 0:e.endpoint},...(m=s.message)!=null?m:[])),p})),n)i(e);else{this.SERVICES[o]=e;let s=a=>{this.SERVICES[o].status=!0,e.setEndpointRoute instanceof Function&&e.setEndpointRoute(a),e.routes.forEach(l=>{this.ROUTES[`${a}/${l.route}`]=l}),i(e)};this.SERVICES[o].status===!0?s(this.SERVICES[o]):this.SERVICES[o].status=s}});this.get=(e,...r)=>this._send(e,"GET",...r);this.delete=(e,...r)=>this._send(e,"DELETE",...r);this.post=(e,...r)=>this._send(e,"POST",...r);this.send=this.post;this._send=(e,r,...n)=>re(this,null,function*(){let i;if(typeof e=="string"||(e==null?void 0:e.endpoint)==null?i=Object.values(this.ENDPOINTS)[0]:i=e.endpoint,!i)return;let o;return o=yield i.send(e,{message:n,method:r}),o&&this.handleLocalRoute(o,i),o==null?void 0:o.message});this.handleLocalRoute=(e,r,n)=>re(this,null,function*(){var i,o,s;if(r&&n&&!e.suppress&&r.connection&&((s=(o=(i=r.connection)==null?void 0:i.service)==null?void 0:o.responses)==null||s.forEach(a=>a(Object.assign({route:n},e)))),!e.block){let a=this.ROUTES[e==null?void 0:e.route];if((a==null?void 0:a.post)instanceof Function)return a.post(this,e.message,e.id)}});this.subscribe=(n,...i)=>re(this,[n,...i],function*(e,r={}){if(Object.keys(this.ENDPOINTS).length>0||(r==null?void 0:r.endpoint))return r.endpoint||(r.endpoint=Object.values(this.ENDPOINTS)[0]),yield r.endpoint._subscribe(r).then(s=>r.endpoint.subscribe(e));throw"Remote is not specified"});this.handleMessage=(e,r)=>re(this,null,function*(){var i;let n={};if(Array.isArray(e))n.route=e[0],n.message=e.slice(1),n.callbackId=void 0;else if(typeof e=="string"){let o=e.split(" ");n.route=o[0],n.message=o.slice(1),n.callbackId=void 0}else typeof e=="object"&&Object.assign(n,e);if(typeof n=="object"&&!Array.isArray(n)&&n.route!=null){console.log("runRoute",n.route);let o=yield this.runRoute(n.route,n.method,n.message,(i=n._id)!=null?i:n.id,n.callbackId);return o&&n.suppress&&(o.suppress=n.suppress),o}return null});e.interval&&(this.INTERVAL=e.interval),this.STATE=new Hw({},this.INTERVAL,void 0),this.DEBUG=e==null?void 0:e.debug,"onbeforeunload"in globalThis&&(globalThis.onbeforeunload=()=>{Object.values(this.ENDPOINTS).forEach(r=>{r.type!="webrtc"&&this.logout(r)})}),this.load({routes:this.DEFAULTROUTES}),this.DEBUG&&this.runCallback("routes",[!0]),(e==null?void 0:e.endpoints)&&e.endpoints.forEach(r=>this.connect(r))}login(e,r){return re(this,null,function*(){yield this.logout(e);let n=Object.values(e?{endpoint:e}:this.ENDPOINTS);return(yield Promise.all(n.map(o=>re(this,null,function*(){let s=yield this.send({route:"login",endpoint:o},r);return console.log("Resolved from server",s[0]),o.setCredentials(s[0]),s})))).reduce((o,s)=>o*s[0],!0)===1})}logout(e){return re(this,null,function*(){return(yield Promise.all(Object.values(e?{endpoint:e}:this.ENDPOINTS).map(n=>re(this,null,function*(){return yield this.send({route:"logout",endpoint:n},n.credentials)})))).reduce((n,i)=>n*i[0],!0)===1})}load(n){return re(this,arguments,function*(e,r=e.name){let i=e.constructor.type==="client",o=!e.constructor.type||e.constructor.type==="service",s=e.constructor.type==="backend";return o&&(yield this._loadService(e,r)),s&&(yield this._loadBackend(e,r)),i&&(yield this._loadClient(e)),e})}format(e,r={}){return e!==void 0&&((!e||typeof e!="object"||!("message"in e)&&!("route"in e))&&(e={message:e}),Array.isArray(e.message)||(e.message=[e.message]),r.service&&(e==null?void 0:e.route)&&(e.route=`${r.service}/${e.route}`),r.headers&&(e.headers=r.headers)),(e==null?void 0:e.route)&&(e.route=e.route.replace(/\/\*\*?/,"")),e}runRoute(s,a){return re(this,arguments,function*(e,r,n=[],i,o){try{return e==null?void 0:(!r&&Array.isArray(n)&&(r=n.length>0?"POST":"GET"),this.DEBUG&&console.log("route",e),yield this.runCallback(e,n,i,r).then(l=>{if(this.DEBUG&&console.log("Result:",l),l!==void 0)return l=this.format(l),l.callbackId=o,this.ROUTES[l.route]&&(l.block=!0),l.message===w5?void 0:l}).catch(console.error))}catch(l){return new Error("Route failed...")}})}addUser(e={},r=_c()){var n,i,o;if(console.log("Trying to add",e),e){let s=this.USERS[r._id],a=s!=null?s:{id:(n=e.id)!=null?n:r.id,_id:(i=e._id)!=null?i:r._id,username:(o=e.id)!=null?o:r.id,origin:r._id,props:{},updatedPropNames:[],sessions:[],blocked:[],lastUpdate:Date.now(),lastTransmit:0,latency:0,routes:new Map};Object.assign(a,e),this.DEBUG&&console.log("Adding User, Id:",e._id,"Credentials:",r),this.USERS[r._id]=a,console.log("Adding user",r._id);for(let l in this.SERVICES){let h=this.SERVICES[l];if(h.status===!0){let p=h.name+"/users";sp(p).forEach(y=>{this.ROUTES[y]&&this.runRoute(y,"POST",[a],r._id)})}}return a}else return!1}removeUser(e){let r=typeof e=="string"?this.USERS[e]:e;return r?(Object.values(this.SERVICES).forEach(n=>{if(n.status===!0){let i=n.name+"/users";this.ROUTES[i]&&this.runRoute(i,"DELETE",[r],r.id)}}),delete r.id,!0):!1}blockUser(e,r=""){return this.USERS[r]&&!e.blocked.includes(r)&&e.id!==r?(e.blocked.push(r),!0):!1}sendMsg(e="",r="",n=void 0){let i=n?Object.assign(n,{message:r}):{message:r};if(typeof e=="string"){let o=this.USERS[e];o&&o.send(i)}else if(typeof e=="object")return e.send(i),!0;return!1}addRoute(e){e=Object.assign({},e);let r=[e.route,...e.aliases?e.aliases:[]];return delete e.aliases,r.forEach(n=>{var i,o;if(!n||!e.post&&!e.get)return!1;n=e.route=`${e.service?`${e.service}/`:""}`+n,this.removeRoute(n),n[0]==="/"&&(n=n.slice(1)),e.args=jS(e.post),this.ROUTES[n]=Object.assign(e,{route:n}),e.get&&(this.STATE.setState({[n]:(o=(i=e.get)==null?void 0:i.object)!=null?o:e.get}),this.STATE.subscribe(n,s=>{var l;let a=((l=e.get)==null?void 0:l.transform)?e.get.transform(s):s;this.SUBSCRIPTIONS.forEach(h=>h(this,{route:n,message:a}))}))}),!0}removeRoute(e){return delete this.ROUTES[e]}runCallback(e,r=[],n,i=r.length>0?"POST":"GET"){return new Promise(o=>re(this,null,function*(){let s=sp(e),a={route:e,block:!0,message:{html:US},headers:{"Content-Type":"text/html"}};Promise.all(s.map(l=>re(this,null,function*(){var p;let h=this.ROUTES[l];if(h){this.DEBUG&&console.log("routeInfo",h);try{let m;if((h==null?void 0:h.delete)&&i.toUpperCase()==="DELETE")m=yield h.delete(this,r,n);else if(i.toUpperCase()==="GET"||!(h==null?void 0:h.post)){let y=this.STATE.data[h.route];if(y){let w=e.replace(h.route.split("/").filter(b=>b!="*"&&b!="**").join("/"),"").split("/").filter(b=>!!b);m={message:((p=h.get)==null?void 0:p.transform)?yield h.get.transform(y,...w):y}}else m=a}else(h==null?void 0:h.post)?m=yield h==null?void 0:h.post(this,r,n):m=a;o(this.format(m,h))}catch(m){console.log("Callback Failed: ",m)}}}))).then(l=>o(a))}))}checkRoutes(e){return re(this,null,function*(){var n,i;if(!e.data)return;let r=(i=(n=this.ROUTES[e.data.foo])!=null?n:this.ROUTES[e.data.route])!=null?i:this.ROUTES[e.data.functionName];return r||(r=this.ROUTES[e.data.foo]),r?e.data.message?yield r.post(this,e.data.message,e.data.origin):void 0:!1})}}});var YS=Te((W8,JS)=>{var pp=Math.floor(Math.random()*16777215),qS=Xe.index=parseInt(Math.random()*16777215,10),$S=(typeof process>"u"||typeof process.pid!="number"?Math.floor(Math.random()*1e5):process.pid)%65535,Sc=function(t){return!!(t!=null&&t.constructor&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t))},GS=[];for(br=0;br<256;br++)GS[br]=(br<=15?"0":"")+br.toString(16);var br,HS=new RegExp("^[0-9a-fA-F]{24}$"),sl=[];br=0;for(;br<10;)sl[48+br]=br++;for(;br<16;)sl[65-10+br]=sl[97-10+br]=br++;function Xe(t){if(!(this instanceof Xe))return new Xe(t);if(t&&(t instanceof Xe||t._bsontype==="ObjectID"))return t;if(this._bsontype="ObjectID",t==null||typeof t=="number"){this.id=this.generate(t);return}var e=Xe.isValid(t);if(!e&&t!=null)throw new Error("Argument passed in must be a single String of 12 bytes or a string of 24 hex characters");if(e&&typeof t=="string"&&t.length===24)return Xe.createFromHexString(t);if(t!=null&&t.length===12)this.id=t;else{if(t!=null&&typeof t.toHexString=="function")return t;throw new Error("Argument passed in must be a single String of 12 bytes or a string of 24 hex characters")}}JS.exports=Xe;Xe.default=Xe;Xe.createFromTime=function(t){return t=parseInt(t,10)%4294967295,new Xe(S5(8,t)+"0000000000000000")};Xe.createFromHexString=function(t){if(typeof t>"u"||t!=null&&t.length!==24)throw new Error("Argument passed in must be a single String of 12 bytes or a string of 24 hex characters");for(var e="",r=0;r<24;)e+=String.fromCharCode(sl[t.charCodeAt(r++)]<<4|sl[t.charCodeAt(r++)]);return new Xe(e)};Xe.isValid=function(t){return t==null?!1:typeof t=="number"?!0:typeof t=="string"?t.length===12||t.length===24&&HS.test(t):t instanceof Xe||Sc(t)?!0:typeof t.toHexString=="function"&&(t.id instanceof _Buffer||typeof t.id=="string")?t.id.length===12||t.id.length===24&&HS.test(t.id):!1};Xe.prototype={constructor:Xe,toHexString:function(){if(!this.id||!this.id.length)throw new Error("invalid ObjectId, ObjectId.id must be either a string or a Buffer, but is ["+JSON.stringify(this.id)+"]");if(this.id.length===24)return this.id;if(Sc(this.id))return this.id.toString("hex");for(var t="",e=0;e<this.id.length;e++)t+=GS[this.id.charCodeAt(e)];return t},equals:function(t){return t instanceof Xe?this.toString()===t.toString():typeof t=="string"&&Xe.isValid(t)&&t.length===12&&Sc(this.id)?t===this.id.toString("binary"):typeof t=="string"&&Xe.isValid(t)&&t.length===24?t.toLowerCase()===this.toHexString():typeof t=="string"&&Xe.isValid(t)&&t.length===12?t===this.id:t!=null&&(t instanceof Xe||t.toHexString)?t.toHexString()===this.toHexString():!1},getTimestamp:function(){var t=new Date,e;return Sc(this.id)?e=this.id[3]|this.id[2]<<8|this.id[1]<<16|this.id[0]<<24:e=this.id.charCodeAt(3)|this.id.charCodeAt(2)<<8|this.id.charCodeAt(1)<<16|this.id.charCodeAt(0)<<24,t.setTime(Math.floor(e)*1e3),t},generate:function(t){typeof t!="number"&&(t=~~(Date.now()/1e3)),t=parseInt(t,10)%4294967295;var e=_5();return String.fromCharCode(t>>24&255,t>>16&255,t>>8&255,t&255,pp>>16&255,pp>>8&255,pp&255,$S>>8&255,$S&255,e>>16&255,e>>8&255,e&255)}};function _5(){return qS=(qS+1)%16777215}function S5(t,e){return e=e.toString(16),e.length===t?e:"00000000".substring(e.length,t)+e}var b5=Symbol&&Symbol.for&&Symbol.for("nodejs.util.inspect.custom")||"inspect";Xe.prototype[b5]=function(){return"ObjectID("+this+")"};Xe.prototype.toJSON=Xe.prototype.toHexString;Xe.prototype.toString=Xe.prototype.toHexString});var KS,yp,ZS=mt(()=>{Ts();yp=class{constructor(e){this.id=fn("service");this.name="service";this.callbacks=new Map;this.status=!1;this.serviceType="default";this.routes=[];this.delegate=(KS=globalThis==null?void 0:globalThis.document)==null?void 0:KS.createDocumentFragment();this.protocols={};this.services={};this.setEndpointRoute=e=>{this.route=e};this.notify=(e,r,n)=>re(this,null,function*(){let i=[];return yield Promise.all(Array.from(this.callbacks).map((o,s)=>re(this,null,function*(){let a=yield o[1](e,r,n);a&&!(a instanceof Error)&&i.push(a)}))),i==null?void 0:i[0]});this.setEndpoint=e=>{this.endpoint=e};this.subscribe=e=>{if(e instanceof Function){let r=fn();return this.callbacks.set(r,e),r}else return};this.unsubscribe=e=>this.callbacks.delete(e);this.router=e}addEventListener(...e){var r;(r=this.delegate)==null||r.addEventListener.apply(this.delegate,e)}dispatchEvent(...e){var r;return(r=this.delegate)==null?void 0:r.dispatchEvent.apply(this.delegate,e)}removeEventListener(...e){var r;return(r=this.delegate)==null?void 0:r.removeEventListener.apply(this.delegate,e)}}});var XS,zt,E5,QS,e2,t2=mt(()=>{XS=Ft(YS());ZS();Ts();zt=t=>typeof t=="string"&&t.length===24?(0,XS.default)(t):t,E5=["user","group","authorization","discussion","chatroom","comment","dataInstance","event","notification","schedule","date"],QS=class extends yp{constructor(e,r={},n=!1){super(e);this.name="structs";this.collections={};this.debug=!1;this.wipeDB=()=>re(this,null,function*(){return yield Promise.all(Object.values(this.collections).map(e=>e.instance.deleteMany({}))),!0});this.db=r==null?void 0:r.db,this.debug=n,this.mode=this.db&&r.mode?r.mode:"local",r.collections||(r.collections={}),E5.forEach(i=>{r.collections[i]||(r.collections[i]=this.db?{instance:this.db.collection(i)}:{},r.collections[i].reference={})}),this.collections=r.collections,this.routes=[{route:"getUser",post:(i,o,s)=>re(this,null,function*(){let a=i.USERS[s];if(this.debug&&console.log("getUser origin",s,o,"user found:",a),!a)return!1;let l;if(this.mode==="mongo")l=yield this.getMongoUser(a,o[0]);else{let h=this.getLocalData("user",{_id:o[0]});if(!h)l={user:{}};else if(yield this.checkAuthorization(a,h)){let m=this.getLocalData("group",{ownerId:o[0]}),y=this.getLocalData("authorization",{ownerId:o[0]});l={user:h,groups:m,authorizations:y}}else l={user:{}}}return this.debug&&console.log("getUser:",a,o[0],l),l})},{route:"setUser",aliases:["addUser"],post:(i,o,s)=>re(this,null,function*(){let a=i.USERS[s];if(!a)return!1;let l;if(this.mode==="mongo")l=yield this.setMongoUser(a,o[0]);else return(yield this.checkAuthorization(a,o[0],"WRITE"))&&this.setLocalData(o[0]),!0;return this.debug&&console.log("setUser",a,o[0],l),l})},{route:"getUsersByIds",post:(i,o,s)=>re(this,null,function*(){let a=i.USERS[s];if(!a)return!1;let l;if(this.mode==="mongo")l=yield this.getMongoUsersByIds(a,o[0]);else if(l=[],Array.isArray(o[0])){let h=this.getLocalData("user",{_id:o[0]});h&&l.push(h)}return this.debug&&console.log("getUserByIds:",a,o[0],l),l})},{route:"getUsersByRoles",post:(i,o,s)=>re(this,null,function*(){let a=i.USERS[s];if(!a)return!1;let l;if(this.mode.includes("mongo"))l=yield this.getMongoUsersByRoles(a,o[0]);else{let h=this.getLocalData("user");l=[],h.forEach(p=>{var m;((m=p.userRoles)==null?void 0:m.includes(o[0]))&&l.push(p)})}return this.debug&&console.log("getUserByRoles",a,o[0],l),l})},{route:"deleteUser",aliases:["removeUser"],post:(i,o,s)=>re(this,null,function*(){let a=i.USERS[s];if(!a)return!1;let l;if(this.mode==="mongo")l=yield this.deleteMongoUser(a,o[0]);else{l=!1;let h=this.getLocalData(o[0]);h&&this.checkAuthorization(a,h,"WRITE")&&(l=this.deleteLocalData(h))}return this.debug&&console.log("deleteUser:",a,o[0],l),l})},{route:"setData",aliases:["setMongoData"],post:(i,o,s)=>re(this,null,function*(){let a=i.USERS[s];if(!a)return!1;let l;if(this.mode.includes("mongo"))l=yield this.setMongoData(a,o);else{let h=[];return l=[],yield Promise.all(o.map(p=>re(this,null,function*(){let m=this.getLocalData(p);(yield this.checkAuthorization(a,m,"WRITE"))&&(this.setLocalData(m),l.push(m),m.structType!=="notification"&&h.push(m))}))),h.length>0&&this.checkToNotify(a,h,this.mode),this.debug&&console.log("setData:",a,o,l),!0}return this.debug&&console.log("setData:",a,o,l),l})},{route:"getData",aliases:["getMongoData","getUserData"],post:(i,o,s)=>re(this,null,function*(){let a=i.USERS[s];if(!a)return!1;let l;if(this.mode.includes("mongo"))l=yield this.getMongoData(a,o[0],o[1],o[2],o[4],o[5]);else{l=[];let h;o[0]&&(h=this.getLocalData(o[0])),h&&o[1]&&(h=h.filter(p=>{if(p.ownerId===o[1])return!0})),h&&(yield Promise.all(h.map(p=>re(this,null,function*(){let m=this.getLocalData(p._id);(yield this.checkAuthorization(a,m))&&l.push(m)}))))}return this.debug&&console.log("getData:",a,o,l),l})},{route:"getDataByIds",aliases:["getMongoDataByIds","getUserDataByIds"],post:(i,o,s)=>re(this,null,function*(){let a=i.USERS[s];if(!a)return!1;let l;if(this.mode.includes("mongo"))l=yield this.getMongoDataByIds(a,o[0],o[1],o[2]);else{l=[];let h;o[2]&&(h=this.getLocalData(o[2])),h&&o[1]&&(h=h.filter(p=>{if(p.ownerId===o[1])return!0})),h&&(yield Promise.all(h.map(p=>re(this,null,function*(){let m=this.getLocalData(p._id);(yield this.checkAuthorization(a,m))&&l.push(m)}))))}return this.debug&&console.log("getDataByIds:",a,o,l),l})},{route:"getAllData",post:(i,o,s)=>re(this,null,function*(){let a=i.USERS[s];if(!a)return!1;let l;if(this.mode.includes("mongo"))l=yield this.getAllUserMongoData(a,o[0],o[1]);else{let h=this.getLocalData(void 0,{ownerId:o[0]});l=[],yield Promise.all(h.map(p=>re(this,null,function*(){o[1]?o[1].indexOf(p.structType)<0&&(yield this.checkAuthorization(a,p))&&l.push(p):(yield this.checkAuthorization(a,p))&&l.push(p)})))}return this.debug&&console.log("getAllData:",a,o,l),l})},{route:"deleteData",post:(i,o,s)=>re(this,null,function*(){let a=i.USERS[s];if(!a)return!1;let l;return this.mode.includes("mongo")?l=yield this.deleteMongoData(a,o):(l=!1,yield Promise.all(o.map(h=>re(this,null,function*(){let p=this.getLocalData(h);(yield this.checkAuthorization(a,p,"WRITE"))&&this.deleteLocalData(p),l=!0})))),this.debug&&console.log("deleteData:",a,o,l),l})},{route:"getGroup",aliases:["getGroups"],post:(i,o,s)=>re(this,null,function*(){let a=i.USERS[s];if(!a)return!1;let l;if(this.mode.includes("mongo"))l=yield this.getMongoGroups(a,o[0],o[1]);else if(typeof o[1]=="string")l=this.getLocalData("group",{_id:o[1]});else{l=[];let h=this.getLocalData("group");o[0]?h.forEach(p=>{p.users.includes(o[0])&&l.push(p)}):h.forEach(p=>{p.users.includes(a._id)&&l.push(p)})}return this.debug&&console.log("getGroups:",a,o,l),l})},{route:"setGroup",post:(i,o,s)=>re(this,null,function*(){let a=i.USERS[s];if(!a)return!1;let l=yield this.setGroup(a,o[0],this.mode);this.debug&&console.log("setGroup:",a,o,l)})},{route:"deleteGroup",post:(i,o,s)=>re(this,null,function*(){let a=i.USERS[s];if(!a)return!1;let l;if(this.mode.includes("mongo"))l=yield this.deleteMongoGroup(a,o[0]);else{let h=this.getLocalData("group",o[0]),p=!1;h&&(p=yield this.checkAuthorization(a,h,"WRITE")),p&&(l=!0)}return this.debug&&console.log("deleteGroup:",a,o,l),l})},{route:"setAuth",post:(i,o,s)=>re(this,null,function*(){let a=i.USERS[s];if(!a)return!1;let l=yield this.setAuthorization(a,o[0],this.mode);return this.debug&&console.log("deleteGroup:",a,o,l),l})},{route:"getAuths",post:(i,o,s)=>re(this,null,function*(){let a=i.USERS[s];if(!a)return!1;let l;if(this.mode.includes("mongo"))l=yield this.getMongoAuthorizations(a,o[0],o[1]);else if(o[1]){let h=this.getLocalData("authorization",{_id:o[1]});h&&(l=[h])}else l=this.getLocalData("authorization",{ownerId:o[0]});return this.debug&&console.log("deleteGroup:",a,o,l),l})},{route:"deleteAuth",post:(i,o,s)=>re(this,null,function*(){let a=i.USERS[s];if(!a)return!1;let l;if(this.mode.includes("mongo"))l=yield this.deleteMongoAuthorization(a,o[0]);else{l=!0;let h=this.getLocalData("authorization",{_id:o[0]});h&&this.checkAuthorization(a,h,"WRITE")&&(l=this.deleteLocalData(h))}return this.debug&&console.log("deleteGroup:",a,o,l),l})}]}notificationStruct(e={}){let r="notification";return{structType:r,timestamp:Date.now(),id:fn(r),note:"",ownerId:"",parentUserId:"",parent:{structType:e==null?void 0:e.structType,_id:e==null?void 0:e._id}}}checkToNotify(i){return re(this,arguments,function*(e,r=[],n=this.mode){if(typeof e=="string")for(let a in this.router.USERS){let l=this.router.USERS[a];l._id===e&&(e=l)}if(typeof e=="string"||e==null)return!1;let o={},s=[];if(r.forEach(a=>re(this,null,function*(){if((e==null?void 0:e._id)!==a.ownerId){let l=this.notificationStruct(a);l.id="notification_"+a._id,l.ownerId=a.ownerId,l.note=a.structType,l.parentUserId=a.ownerId,s.push(l),o[a.ownerId]=a.ownerId}if(a.users)a.users.forEach(l=>{if(l!==e._id){let h=this.notificationStruct(a);h.id="notification_"+a._id,h.ownerId=l,h.note=a.structType,h.parentUserId=a.ownerId,s.push(h),o[l]=l}});else{let l=[];if(n==="mongo"){let h=this.collections.authorizations.instance.find({$or:[{authorizedId:e._id},{authorizerId:e._id}]});(yield h.count())>0&&(yield h.forEach(p=>l.push(p)))}else l=this.getLocalData("authorization",{authorizedId:e._id}),l.push(...this.getLocalData("authorization",{authorizerId:e._id}));l.length>0&&l.forEach(h=>{if(a.authorizerId===a.ownerId&&!o[a.authorizedId]&&h.status==="OKAY"&&h.authorizations.indexOf("peer")>-1){let p=this.notificationStruct(a);p.ownerId=h.authorizedId,p.id="notification_"+a._id,p.note=a.structType,p.parentUserId=a.ownerId,s.push(p),o[p.ownerId]=p.ownerId}})}})),s.length>0){n==="mongo"?yield this.setMongoData(e,s):this.setLocalData(s);for(let a in o)this.router.sendMsg(a,"notifications",!0);return!0}else return!1})}setMongoData(n){return re(this,arguments,function*(e,r=[]){let i=!1;if(r.length>0){let o=!0,s="";if(yield Promise.all(r.map(a=>re(this,null,function*(){if(((e==null?void 0:e._id)!==a.ownerId||e._id===a.ownerId&&e.userRoles.includes("admin_control"))&&s!==a.ownerId&&(o=yield this.checkAuthorization(e,a,"WRITE"),s=a.ownerId),o){let l=JSON.parse(JSON.stringify(a));l._id&&delete l._id,a.id?a.id.includes("defaultId")?(yield this.db.collection(a.structType).insertOne(l),i=!0):yield this.db.collection(a.structType).updateOne({id:a.id},{$set:l},{upsert:!0}):a._id&&(a._id.includes("defaultId")?(yield this.db.collection(a.structType).insertOne(l),i=!0):yield this.db.collection(a.structType).updateOne({_id:zt(a._id)},{$set:l},{upsert:!1}))}}))),i===!0){let a=[];return yield Promise.all(r.map((l,h)=>re(this,null,function*(){let p=JSON.parse(JSON.stringify(l));if(p._id&&delete p._id,l.structType!=="comment"){let m;l.structType!=="notification"&&(m=yield this.db.collection(p.structType).findOne(p)),m&&(m._id=m._id.toString(),a.push(m))}else if(l.structType==="comment"){let m=l,y=JSON.parse(JSON.stringify(m));y._id&&delete y._id;let w=yield this.db.collection("comment").findOne(y),b=m.replyTo,N=r.find(O=>{if(O._id===b)return!0});if(N){let O=JSON.parse(JSON.stringify(N));O._id&&delete O._id;let I;if(yield Promise.all(["discussion","chatroom","comment"].map(R=>re(this,null,function*(){let J=yield this.db.collection(R).findOne({_id:zt(b)});J&&(I=J)}))),I){let R=m.parent._id,J,q;if(R!==b?(J=r.find(F=>{if(F._id===R)return!0}),J&&(delete J._id,yield Promise.all(["discussion","chatroom"].map(F=>re(this,null,function*(){let z=yield this.db.collection(F).findOne(J);z&&(q=z)}))))):q=I,I){let F=I.replies.indexOf(m._id);F>-1&&(I.replies[F]=w._id.toString(),w.replyTo=I._id.toString())}if(q){let F=q.comments.indexOf(m._id);F>-1&&(q.comments[F]=w._id.toString(),w.parent._id=q._id.toString())}let G=[w,I];q._id.toString()!==I._id.toString()&&G.push(q),yield Promise.all(G.map(F=>re(this,null,function*(){let z=JSON.parse(JSON.stringify(F));delete z._id,yield this.db.collection(F.structType).updateOne({_id:zt(F._id)},{$set:z},{upsert:!1})}))),[...a].reverse().forEach((F,z)=>{G.find(S=>{if(F._id.toString()===S._id.toString())return!0})&&a.splice(a.length-z-1,1)}),a.push(...G)}}else w&&a.push(w)}}))),this.checkToNotify(e,a),a}else{let a=[];return r.forEach(l=>{l.structType!=="notification"&&a.push(l)}),this.checkToNotify(e,a),!0}}else return!1})}setMongoUser(e,r){return re(this,null,function*(){if(r._id){if((e._id!==r.ownerId||e._id===r.ownerId&&e.userRoles.includes("admin_control"))&&!(yield this.checkAuthorization(e,r,"WRITE")))return!1;let n=JSON.parse(JSON.stringify(r));n._id&&delete n._id,this.router.DEBUG&&console.log("RETURNS PROFILE",r);let i=zt(r._id),o=i!==r._id?{_id:i}:{id:r.id};return yield this.collections.users.instance.updateOne(o,{$set:n},{upsert:!0}),e=yield this.collections.users.instance.findOne(o),this.checkToNotify(e,[r]),e}else return!1})}setGroup(i){return re(this,arguments,function*(e,r={},n=this.mode){if(r._id){let o;if(n==="mongo"?o=yield this.collections.groups.instance.findOne({name:r.name}):o=this.getLocalData("group",{_id:r._id}),o&&(o.ownerId!==r.ownerId||r.admins.indexOf(e._id)<0)||e._id!==r.ownerId&&!(yield this.checkAuthorization(e,r,"WRITE")))return!1;let s=[];r.users.forEach(w=>{s.push({email:w},{id:w},{username:w})});let a=[],l=[];if(n==="mongo"){let w=this.collections.users.instance.find({$or:s});(yield w.count())>0&&(yield w.forEach(b=>{a.push(b),l.push(b._id)}))}else s.forEach(w=>{let b=this.getLocalData("user",w);b.length>0&&(a.push(b[0]),l.push(b[0]._id))});r.users=l;let h=[],p=[],m=[];a.forEach(w=>{r.admins.find((b,N)=>{if(b===w._id||b===w.email||b===w.username||w._id===r.ownerId)return h.indexOf(w._id<0)&&h.push(w._id),!0}),r.peers.find((b,N)=>{if(b===w._id||b===w.email||b===w.username)return p.indexOf(w._id<0)&&p.push(w._id),!0}),r.clients.find((b,N)=>{if(b===w._id||b===w.email||b===w.username)return m.indexOf(w._id<0)&&m.push(w._id),!0})}),r.admins=h,r.peers=p,r.clients=m;let y=JSON.parse(JSON.stringify(r));return y._id&&delete y._id,n==="mongo"?r._id.includes("defaultId")?yield this.db.collection(r.structType).insertOne(y):yield this.collections.groups.instance.updateOne({_id:zt(r._id)},{$set:y},{upsert:!0}):this.setLocalData(r),this.checkToNotify(e,[r],this.mode),r}else return!1})}getMongoUser(e,r="",n=!1){return re(this,null,function*(){return new Promise(i=>re(this,null,function*(){let o=[{email:r},{id:r},{username:r}];try{o.push({_id:zt(r)})}catch(a){}let s=yield this.collections.users.instance.findOne({$or:o});if(!s||s==null)i({});else if(!s._id&&s._id?s._id=s._id.toString():!s._id&&s._id&&(s._id=s._id),s.ownerId||(s.ownerId=s._id),s&&n===!1){(e._id!==s._id||e._id===s._id&&e.userRoles.includes("admin_control"))&&((yield this.checkAuthorization(e,s))||i(void 0));let a=[],l=this.collections.authorizations.instance.find({ownerId:s._id});(yield l.count())>0&&(yield l.forEach(m=>a.push(m)));let h=this.collections.groups.instance.find({users:{$all:[s._id]}}),p=[];(yield h.count())>0&&(yield h.forEach(m=>p.push(m))),s.authorizations=a,s.groups=p,i(s)}else i(s)}))})}getMongoUsersByIds(){return re(this,arguments,function*(e={},r=[]){let n=[];r.forEach(o=>{try{n.push({_id:zt(o)})}catch(s){}});let i=[];if(n.length>0){let o=this.collections.users.instance.find({$or:n});(yield o.count())>0&&(yield o.forEach(s=>{i.push(s)}))}return i})}getMongoUsersByRoles(){return re(this,arguments,function*(e={},r=[]){let n=this.collections.users.instance.find({userRoles:{$all:r}}),i=[];return(yield n.count())>0&&(yield n.forEach(o=>{i.push(o)})),i})}getMongoDataByIds(e,r,n,i){return re(this,null,function*(){if(r.length>0){let o=[];r.forEach(a=>{let l={_id:a};n&&(l.ownerId=n),o.push(l)});let s=[];if(!i)yield Promise.all(Object.keys(this.collections).map(a=>re(this,null,function*(){let l=yield this.db.collection(a).find({$or:o});if((yield l.count())>0){let h=!0,p="";yield l.forEach(m=>re(this,null,function*(){(e._id!==m.ownerId||e._id===m.ownerId&&e.userRoles.includes("admincontrol"))&&p!==m.ownerId&&(h=yield this.checkAuthorization(e,m),p=m.ownerId),h&&s.push(m)}))}})));else{let a=yield this.db.collection(i).find({$or:o});if((yield a.count())>0){let l=!0,h="";yield a.forEach(p=>re(this,null,function*(){(e._id!==p.ownerId||e._id===p.ownerId&&e.userRoles.includes("admincontrol"))&&h!==p.ownerId&&(l=yield this.checkAuthorization(e,p),h=p.ownerId),l&&s.push(p)}))}}return s}})}getMongoData(a,l,h){return re(this,arguments,function*(e,r,n,i={},o=0,s=0){n||(n=i==null?void 0:i.ownerId),i._id&&(i._id=zt(i._id));let p=[],m=!0,y="";if(!r&&!n&&!i)return[];if(!r&&n&&Object.keys(i).length===0)return yield this.getAllUserMongoData(e,n);if(!i&&n){let w=this.db.collection(r).find({ownerId:n}).sort({$natural:-1}).skip(s);o>0&&w.limit(o),(yield w.count())>0&&(yield w.forEach(b=>re(this,null,function*(){(e._id!==b.ownerId||e._id===b.ownerId&&e.userRoles.includes("admincontrol"))&&y!==b.ownerId&&(m=yield this.checkAuthorization(e,b),y=b.ownerId),m===!0&&p.push(b)})))}else if(Object.keys(i).length>0&&n){let w=yield this.db.collection(r).findOne(jl({ownerId:n},i));w&&p.push(w)}else Object.keys(i).length>0&&!n&&(yield Promise.all(Object.keys(this.collections).map(w=>re(this,null,function*(){let b=yield this.db.collection(w).findOne(i);if(b){(e._id!==b.ownerId||e._id===b.ownerId&&e.userRoles.includes("admincontrol"))&&y!==b.ownerId&&(m=yield this.checkAuthorization(e,b),y=b.ownerId),p.push(b);return}}))));return m?p:[]})}getAllUserMongoData(i,o){return re(this,arguments,function*(e,r,n=[]){let s=[],a=!0,l="";return yield Promise.all(Object.keys(this.collections).map((h,p)=>re(this,null,function*(){if(a&&n.indexOf(h)<0){let m=this.db.collection(h).find({ownerId:r}),y=yield m.count();for(let w=0;w<y;w++){let b=yield m.next();(e._id!==r||e._id===r&&e.userRoles.includes("admincontrol"))&&l!==r&&(a=yield this.checkAuthorization(e,b),l=r),a&&s.push(b)}}}))),a?s:[]})}getMongoDataByRefs(n){return re(this,arguments,function*(e,r=[]){let i=[];if(i.length>0){let o="";r.forEach(s=>re(this,null,function*(){if(s.structType&&s._id){let a=yield this.db.collection(s.structType).findOne({_id:zt(s._id)});if(a){let l=!0;if((e._id!==a.ownerId||e._id===a.ownerId&&e.userRoles.includes("admincontrol"))&&o!==a.ownerId){let h=yield this.checkAuthorization(e,a);o=a.ownerId}l===!0&&i.push(a)}}}))}return i})}getMongoAuthorizations(i){return re(this,arguments,function*(e,r=e._id,n=""){let o=[];if(n.length===0){let s=this.collections.authorizations.instance.find({ownerId:r});(yield s.count)>0&&(yield s.forEach(a=>{o.push(a)}))}else o.push(yield this.collections.authorizations.instance.findOne({_id:zt(n),ownerId:r}));if(!(e._id!==o[0].ownerId&&!(yield this.checkAuthorization(e,o[0]))))return o})}getMongoGroups(i){return re(this,arguments,function*(e,r=e._id,n=""){let o=[];if(n.length===0){let s=this.collections.groups.instance.find({users:{$all:[r]}});(yield s.count)>0&&(yield s.forEach(a=>{o.push(a)}))}else try{o.push(yield this.collections.groups.instance.findOne({_id:zt(n),users:{$all:[r]}}))}catch(s){}return o})}deleteMongoData(n){return re(this,arguments,function*(e,r=[]){let i=[];yield Promise.all(r.map(s=>re(this,null,function*(){try{let a=zt(s._id),l=yield this.db.collection(s.structType).findOne({_id:a});if(l){i.push(l);let h=yield this.collections.notifications.instance.find({parent:{structType:s.structType,id:s._id}}),p=yield h.count();for(let m=0;m<p;m++){let y=yield h.next();y&&i.push(y)}}}catch(a){}})));let o="";return yield Promise.all(i.map((s,a)=>re(this,null,function*(){var h;let l=!0;(s.ownerId!==e._id||e._id===s.ownerId&&((h=e.userRoles)==null?void 0:h.includes("admincontrol")))&&s.ownerId!==o&&(o=s.ownerId,l=yield this.checkAuthorization(e,s,"WRITE")),l&&(yield this.db.collection(s.structType).deleteOne({_id:zt(s._id)}),s.users&&s.users.forEach(p=>{p!==e._id&&p!==s.ownerId&&this.router.sendMsg(p,"deleted",s._id)}),s.ownerId!==e._id&&this.router.sendMsg(s.ownerId,"deleted",s._id))}))),!0})}deleteMongoUser(e,r){return re(this,null,function*(){if(e._id!==r||e._id===r&&e.userRoles.includes("admincontrol")){let n=yield this.collections.users.instance.findOne({id:r});if(!(yield this.checkAuthorization(e,n,"WRITE")))return!1}return yield this.collections.users.instance.deleteOne({id:r}),e._id!==r&&this.router.sendMsg(r,"deleted",r),!0})}deleteMongoGroup(e,r){return re(this,null,function*(){let n=yield this.collections.groups.instance.findOne({_id:zt(r)});return n?(e._id!==n.ownerId||e._id===n.ownerId&&e.userRoles.includes("admincontrol"))&&!(yield this.checkAuthorization(e,n,"WRITE"))?!1:(n.users&&n.users.forEach(i=>{this.router.sendMsg(n.authorizerId,"deleted",n._id)}),yield this.collections.groups.instance.deleteOne({_id:zt(r)}),!0):!1})}deleteMongoAuthorization(e,r){return re(this,null,function*(){let n=yield this.collections.authorizations.instance.findOne({_id:zt(r)});return n?(e._id!==n.ownerId||e._id===n.ownerId&&e.userRoles.includes("admincontrol"))&&!(yield this.checkAuthorization(e,n,"WRITE"))?!1:(n.associatedAuthId&&(this.router.DEBUG&&console.log(n),yield this.collections.authorizations.instance.deleteOne({_id:zt(n.associatedAuthId)}),n.authorizerId!==e._id?this.router.sendMsg(n.authorizerId,"deleted",n._id):n.authorizedId!==e._id&&this.router.sendMsg(n.authorizedId,"deleted",n._id)),yield this.collections.authorizations.instance.deleteOne({_id:zt(r)}),!0):!1})}setAuthorization(i,o){return re(this,arguments,function*(e,r,n=this.mode){let s,a;if(n==="mongo"?(s=yield this.getMongoUser(e,r.authorizedId,!0),a=yield this.getMongoUser(e,r.authorizerId,!0)):(s=this.getLocalData("user",{_id:r.authorizedId}),a=this.getLocalData("user",{_id:r.authorizedId})),!s||!a||(r.authorizedId!==s._id&&(r.authorizedId=s._id),r.authorizerId!==a._id&&(r.authorizerId=a._id),r.authorizedName||(s.username?r.authorizedName=s.username:s.email&&(r.authorizedName=s.email)),r.authorizerName||(s.username?r.authorizerName=s.username:s.email&&(r.authorizerName=s.email)),(e._id!==r.ownerId||e._id===r.ownerId&&e.userRoles.includes("admincontrol"))&&e._id!==r.authorizedId&&e._id!==r.authorizerId&&!(yield this.checkAuthorization(e,r,"WRITE"))))return!1;let l=[];if(n==="mongo"){let m=this.collections.authorizations.instance.find({$and:[{authorizedId:r.authorizedId},{authorizerId:r.authorizerId}]});(yield m.count())>0&&(yield m.forEach(y=>l.push(y)))}else{let m=this.getLocalData("authorization",{authorizedId:r.authorizedId});Array.isArray(m)&&m.forEach(y=>{y.authorizerId===r.authorizerId&&l.push(y)})}let h;Array.isArray(l)&&l.forEach(m=>re(this,null,function*(){if(m.ownerId!==e._id){r.authorizerId===e._id?(m.authorizations=r.authorizations,m.structIds=r.structIds,m.excluded=r.excluded,m.expires=r.expires,m.status="OKAY",r.status="OKAY"):(r.authorizations=m.authorizations,r.structIds=m.structIds,r.excluded=m.excluded,r.expires=m.expires,m.status="OKAY",r.status="OKAY"),r.associatedAuthId=m._id.toString(),m.associatedAuthId=r._id.toString(),h=m;let y=JSON.parse(JSON.stringify(m));this.mode.includes("mongo")?(delete y._id,yield this.collections.authorizations.instance.updateOne({$and:[{authorizedId:r.authorizedId},{authorizerId:r.authorizerId},{ownerId:m.ownerId}]},{$set:y},{upsert:!0})):this.setLocalData(y)}}));let p=JSON.parse(JSON.stringify(r));if(n==="mongo"?(delete p._id,yield this.collections.authorizations.instance.updateOne({$and:[{authorizedId:r.authorizedId},{authorizerId:r.authorizerId},{ownerId:r.ownerId}]},{$set:p},{upsert:!0})):this.setLocalData(p),r._id.includes("defaultId")&&n==="mongo"){let m=yield this.collections.authorizations.instance.findOne(p);if(m&&(r._id=m._id.toString(),h)){let y=yield this.collections.authorizations.instance.findOne({$and:[{authorizedId:h.authorizedId},{authorizerId:h.authorizerId},{ownerId:h.ownerId}]});y&&(y.associatedAuthId=r._id,delete y._id,yield this.collections.authorizations.instance.updateOne({$and:[{authorizedId:y.authorizedId},{authorizerId:y.authorizerId},{ownerId:y.ownerId}]},{$set:y},{upsert:!0}),this.checkToNotify(e,[y]))}}return r})}checkAuthorization(o,s){return re(this,arguments,function*(e,r,n="READ",i=this.mode){var p,m,y;if(!e||!r)return!1;if(typeof e=="object"){if(r.ownerId===e._id&&!((p=e.userRoles)==null?void 0:p.includes("admin_control")))return!0}else if(typeof e=="string"){if(r.ownerId===e)return!0;e={_id:e}}let a,l;if(i==="mongo"?(a=yield this.collections.authorizations.instance.findOne({$or:[{authorizedId:e._id,authorizerId:r.ownerId,ownerId:e._id},{authorizedId:r.ownerId,authorizerId:e._id,ownerId:e._id}]}),l=yield this.collections.authorizations.instance.findOne({$or:[{authorizedId:e._id,authorizerId:r.ownerId,ownerId:r.ownerId},{authorizedId:r.ownerId,authorizerId:e._id,ownerId:r.ownerId}]})):(a=this.getLocalData("authorization",{ownerId:e._id}).find(w=>{if(w.authorizedId===e._id&&w.authorizerId===r.ownerId)return!0}),l=this.getLocalData("authorization",{ownerId:r.ownerId}).find(w=>{if(w.authorizedId===e._id&&w.authorizerId===r.ownerId)return!0})),!a||!l)return!1;let h=!1;return a.status==="OKAY"&&l.status==="OKAY"&&(r.structType==="group"?a.authorizations.indexOf(r.name+"_admin")>-1&&l.authorizations.indexOf(r.name+"_admin")>-1?h=!0:h=!1:a.authorizations.indexOf("provider")>-1&&l.authorizations.indexOf("provider")>-1||a.authorizations.indexOf("peer")>-1&&l.authorizations.indexOf("peer")>-1||a.authorizations.indexOf("control")>-1&&l.authorizations.indexOf("control")>-1||((m=a.structIds)==null?void 0:m.indexOf(r._id))>-1&&((y=l.structIds)==null?void 0:y.indexOf(r._id))>-1?h=!0:a.excluded.indexOf(r.structType)>-1&&r.ownerId===e._id&&n==="WRITE"&&(h=!1)),h})}overwriteLocalData(e){if(Array.isArray(e))e.forEach(r=>{let n=this.getLocalData(r.structType,{ownerId:r.ownerId,_id:r._id});!n||(n==null?void 0:n.length)===0?this.setLocalData(r):Object.assign(n,r)});else{let r=this.getLocalData(e.structType,{ownerId:e.ownerId,_id:e._id});!r||(r==null?void 0:r.length)===0?this.setLocalData(e):Object.assign(r,e)}}setLocalData(e){let r=n=>{var s;let i=n.structType;console.log("Type",i);let o=(s=this.collections[i])==null?void 0:s.reference;o||(o={},this.collections[i]||(this.collections[i]={}),this.collections[i].reference=o),o[n._id]=n};Array.isArray(e)?e.forEach(n=>{r(n)}):r(e)}getLocalData(e,r){let n,i,o;if(typeof r=="object"?(n=r.ownerId,i=Object.keys(r).filter(l=>l!="ownerId")[0],o=r[i]):o=r,!e&&!n&&!i&&!o)return[];let s=[];if(!e&&(n||i))return Object.values(this.collections).forEach(a=>{if(a=a.reference,(i==="_id"||i==="id")&&o){let l=a[o];l&&s.push(l)}else Object.values(a).forEach(l=>{i&&o?l[i]===o&&l.ownerId===n&&s.push(l):l.ownerId===n&&s.push(l)})}),s;{let a=this.collections[e].reference;if(!a)return s;if(!i&&!n)return Object.values(a).forEach(l=>{s.push(l)}),s;if((i==="_id"||i==="id")&&o)return a[o];Object.keys(a).forEach(l=>{let h=a[l];i&&o&&!n?h[i]===o&&s.push(h):n&&!i?h.ownerId===n&&s.push(h):n&&i&&o&&h.ownerId===n&&h[i]&&h[i]===o&&s.push(h)})}return s}deleteLocalData(e){if(!e)throw new Error("Struct not supplied");return!e.structType||!e._id?!1:(this.collections[e.structType]&&delete this.collections[e.structType].reference[e._id],!0)}},e2=QS});var r2,n2,i2=mt(()=>{PS();WS();Ts();t2();r2=class extends dp{constructor(e={},r){super(r);this.tablet=new op;this.collections=this.tablet.collections;this.id=fn();this.baseServerCallback=e=>{let r=e;if(typeof e=="object"&&(e==null?void 0:e.structType)&&(r=[e]),Array.isArray(e)){let n=r.filter(i=>{if(i.structType!=="notification")return!0});this.tablet&&this.tablet.sortStructsIntoTable(n),r.forEach(i=>{var o;(!i.structType||i.structType==="USER")&&(i.email?i.structType="user":i.structType="uncategorized"),i.structType==="user"||i.structType==="authorization"||i.structType==="group"?(i.structType==="user"&&(i._id=i.id),this.setLocalData(i)):i.structType==="notification"?(this.getLocalData("notification",{ownerId:i.ownerId,_id:i.parent._id})?this.setLocalData(i):this.getLocalData(i.structType,{_id:i.parent._id})||this.overwriteLocalData(i),i.ownerId===((o=this.currentUser)==null?void 0:o._id)&&(i.parent.structType==="user"||i.parent.structType==="dataInstance"||i.parent.structType==="schedule"||i.parent.structType==="authorization")&&this.resolveNotifications([i],!0)):this.overwriteLocalData(i)})}(e==null?void 0:e.message)==="notifications"&&this.checkForNotifications(),(e==null?void 0:e.message)==="deleted"&&this.deleteLocalData(e.id),this.onResult(e)};this.resolveNotifications=(...i)=>re(this,[...i],function*(e=[],r=!0,n=this.currentUser){if(!n||e.length===0)return;let o=[],s=[],a=[],l=!1;return e.length===0&&(e=this.getLocalData("notification",{ownerId:n._id})),e.forEach(h=>{h.parent.structType==="user"&&(l=!0),a.push(h.parent.structType),o.push(h.parent._id),s.push(h._id),this.deleteLocalData(h)}),this.deleteData(s),r&&(a.reverse().forEach((h,p)=>{h==="user"&&(this.getUser(s[p]),o.splice(o.length-p-1,1))}),o.length>0)?yield this.getDataByIds(o,n._id,"notification"):!0});this.getLocalUserPeerIds=(e=this.currentUser)=>{if(!e)return[];let r=[];return this.getLocalData("authorization",e._id).forEach(i=>{i.authorizations.indexOf("peer")>-1&&i.authorizerId===e._id&&r.push(i.authorizedId)}),r};this.authorizeUser=(m,...y)=>re(this,[m,...y],function*(e,r="",n="",i="",o="",s=[],a=[],l=[],h=[],p=!1){if(!e)return;let w=this.createStruct("authorization",void 0,e,void 0);return w.authorizedId=i,w.authorizedName=o,w.authorizerId=r,w.authorizerName=n,w.authorizations=s,w.structs=a,w.excluded=l,w.groups=h,w.expires=p,w.status="PENDING",w.associatedAuthId="",w.ownerId=e._id,w=yield this.setAuthorization(w),w});this.addGroup=(l,...h)=>re(this,[l,...h],function*(e,r="",n="",i=[],o=[],s=[],a=!0){if(!e)return;let p=this.createStruct("group",void 0,e);return p.name=r,p.details=n,p.admins=i,p.peers=o,p.clients=s,p.users=[...i,...o,...s],p.ownerId=e._id,a&&(p=yield this.setGroup(p)),p});this.addData=(l,...h)=>re(this,[l,...h],function*(e,r="",n="",i="",o=[],s=!1,a=!0){if(!e)return;let p=this.createStruct("dataInstance",void 0,e);return p.author=r,p.title=n,p.type=i,p.data=o,p.expires=s,p.ownerId=e._id,a&&(p=yield this.updateServerData([p])[0]),p});this.addEvent=(m,...y)=>re(this,[m,...y],function*(e,r="",n="",i="",o=0,s=0,a=0,l=[],h=[],p=!0){if(!e)return;h.length===0&&(h=this.getLocalUserPeerIds(e));let w=this.createStruct("event",void 0,e);return w.author=r,w.event=n,w.notes=i,w.startTime=o,w.endTime=s,w.grade=a,w.attachments=l,w.users=h,w.ownerId=e._id,p&&(w=yield this.updateServerData([w])[0]),w});this.addDiscussion=(h,...p)=>re(this,[h,...p],function*(e,r="",n="",i="",o="",s=[],a=[],l=!0){if(!e)return;a.length===0&&(a=this.getLocalUserPeerIds(e));let m=this.createStruct("discussion",void 0,e);m.topic=n,m.category=i,m.message=o,m.attachments=s,m.authorId=r,m.users=a,m.comments=[],m.replies=[],m.ownerId=e._id;let y=[m];return l&&(m=yield this.updateServerData(y)[0]),m});this.addChatroom=(a,...l)=>re(this,[a,...l],function*(e,r="",n="",i=[],o=[],s=!0){if(!e)return;o.length===0&&(o=this.getLocalUserPeerIds(e));let h=this.createStruct("chatroom",void 0,e);h.message=n,h.attachments=i,h.authorId=r,h.users=o,h.replies=[],h.comments=[],h.ownerId=e._id;let p=[h];return s&&(h=yield this.updateServerData(p)[0]),h});this.addComment=(l,h,p,...m)=>re(this,[l,h,p,...m],function*(e,r,n,i="",o="",s=[],a=!0){if(!e)return;let y=this.createStruct("comment",void 0,e,r);y.authorId=i,y.replyTo=n==null?void 0:n._id,y.message=o,y.attachments=s,y.users=r==null?void 0:r.users,y.replies=[],y.ownerId=e._id,a?n==null||n.replies.push(y._id):n==null||n.replies.push(y),a?r==null||r.comments.push(y._id):r==null||r.comments.push(y);let w=[y,r];return n._id!==r._id&&w.push(n),a&&(y=yield this.updateServerData(w)[0]),y});e instanceof Object&&Object.keys(e).length>0&&this.setupUser(e),this.load(new e2(this))}setupUser(e,r=n=>{}){return re(this,null,function*(){if(!e){console.error('must provide an info object! e.g. {_id:"abc123"}'),r(void 0);return}let n=!1;e.id&&(e._id=e.id),console.log("Generating/Getting User: ",e._id);let i=yield this.getUser(e._id),o,s=!1;if(i==null?void 0:i._id){o=i.user;for(let a in e){let l=this.userStruct();if(o[a]&&a!=="_id")if(Array.isArray(e[a])){for(let h=0;h<o[a].length;h++)if(e[a].indexOf(o[a][h])<0){o[a]=e[a],n=!0;break}if(!n){for(let h=0;h<e[a].length;h++)if(o[a].indexOf(e[a][h])<0){o[a]=e[a],n=!0;break}}}else o[a]!==e[a]&&(o[a]=e[a],n=!0);else o[a]!==e[a]&&typeof l[a]=="string"&&a!=="_id"&&(o[a]=e[a],n=!0)}(i==null?void 0:i.authorizations)&&Array.isArray(i.authorizations)&&this.setLocalData(i.authorizations),(i==null?void 0:i.groups)&&Array.isArray(i.groups)&&this.setLocalData(i.groups)}else{o=this.userStruct(e,!0),s=!0;let a=yield this.setUser(o),l=this.getLocalData(void 0,{ownerId:o._id});(l==null?void 0:l.length)>0&&this.updateServerData(l,h=>{console.log("setData",h)}),this.setAuthorizationsByGroup(o)}if(s)this.currentUser=o,this.setLocalData(o);else{let a=yield this.getAllUserData(o._id,void 0);if(console.log("getServerData",a),!(!a||a.length===0)){this.setLocalData(a);let l=a.filter(y=>{if(y.structType==="notification"&&(this.getLocalData("authorization",y.parent._id)||y.parent.structType==="user"||y.parent.structType==="authorization"||!this.getLocalData(y.parent.structType,y.parent._id)))return!0}),h=a.filter(y=>{if(y.structType==="comment")return!0}),p=[];h.forEach(y=>{this.getLocalData("comment",{_id:y._id})||p.push(y._id)}),p.length>0&&this.deleteData(p),l.length>0&&(this.resolveNotifications(l,!1,void 0),n=!0);let m=a.filter(y=>{if(y.structType!=="notification")return!0});this.tablet&&this.tablet.sortStructsIntoTable(m)}this.setLocalData(o),console.log("currentUser",o),this.currentUser=o,console.log("collections",this.tablet.collections)}return r(this.currentUser),this.currentUser})}onResult(e){}randomId(e=""){return`${e+Math.floor(Math.random()+Math.random()*Math.random()*1e16)}`}addStruct(){return re(this,arguments,function*(e="struct",r={},n=void 0,i=void 0,o=!0){let s=Ei.Struct(e,r,n,i);return o&&(s=yield this.updateServerData([s])[0]),s})}ping(e=r=>{console.log(r)}){return re(this,null,function*(){var n;let r=(n=yield this.send("ping"))==null?void 0:n[0];return e(r),r})}sendMessage(e="",r="",n=void 0,i=o=>{console.log(o)}){return re(this,null,function*(){var a;let o=[e,r];n&&(o[2]=n);let s=(a=yield this.send("sendMessage",...o))==null?void 0:a[0];return i(s),s})}getUser(){return re(this,arguments,function*(e="",r=this.baseServerCallback){var i;let n=(i=yield this.send("structs/getUser",e))==null?void 0:i[0];return r(n),n})}getUsers(){return re(this,arguments,function*(e=[],r=this.baseServerCallback){var i;let n=(i=yield this.send("structs/getUsers",...e))==null?void 0:i[0];return r(n),n})}getUsersByRoles(){return re(this,arguments,function*(e=[],r=this.baseServerCallback){var i;let n=(i=yield this.send("structs/getUsersByRoles",e))==null?void 0:i[0];return r(n),n})}getAllUserData(i){return re(this,arguments,function*(e,r=[],n=this.baseServerCallback){var s;let o=(s=yield this.send("structs/getAllData",e,r))==null?void 0:s[0];return n(o),o})}getData(a,l,h){return re(this,arguments,function*(e,r,n,i=0,o=0,s=this.baseServerCallback){var m;let p=(m=yield this.send("structs/getData",e,r,n,i,o))==null?void 0:m[0];return s(p),p})}getDataByIds(){return re(this,arguments,function*(e=[],r,n,i=this.baseServerCallback){var s;let o=(s=yield this.send("structs/getDataByIdss",e,r,n))==null?void 0:s[0];return i(o),o})}getStructParentData(n){return re(this,arguments,function*(e,r=this.baseServerCallback){var s,a,l;if(!e.parent)return;let i=[(s=e.parent)==null?void 0:s.structType,"_id",(a=e.parent)==null?void 0:a._id],o=(l=yield this.send("structs/getData",...i))==null?void 0:l[0];return r(o),o})}setUser(){return re(this,arguments,function*(e={},r=this.baseServerCallback){var i;let n=(i=yield this.send("structs/setUser",this.stripStruct(e)))==null?void 0:i[0];return r(n),n})}checkUserToken(i){return re(this,arguments,function*(e,r=this.currentUser,n=this.baseServerCallback){if(!e)return!1;let o=!1;for(let s in e){let a=this.userStruct();if(r[s]&&s!=="_id")if(Array.isArray(e[s])){for(let l=0;l<r[s].length;l++)if(e[s].indexOf(r[s][l])<0){r[s]=e[s],o=!0;break}if(!o){for(let l=0;l<e[s].length;l++)if(r[s].indexOf(e[s][l])<0){r[s]=e[s],o=!0;break}}}else r[s]!==e[s]&&(r[s]=e[s],o=!0);else!r[s]&&a[s]&&(r[s]=e[s],o=!0)}return o&&(yield this.setUser(r,n))})}updateServerData(){return re(this,arguments,function*(e=[],r=this.baseServerCallback){var o;let n=new Array;e.forEach(s=>{n.push(this.stripStruct(s))});let i=(o=yield this.send("structs/setData",...n))==null?void 0:o[0];return r(i),i})}deleteData(){return re(this,arguments,function*(e=[],r=this.baseServerCallback){var o;let n=[];e.forEach(s=>{(s==null?void 0:s.structType)&&(s==null?void 0:s._id)&&(n.push({structType:s.structType,_id:s._id}),this.deleteLocalData(s))}),console.log("deleting",n);let i=(o=yield this.send("structs/deleteData",...n))==null?void 0:o[0];return r(i),i})}deleteUser(n){return re(this,arguments,function*(e,r=this.baseServerCallback){var o;if(!e)return;let i=(o=yield this.send("structs/deleteUser",e))==null?void 0:o[0];return r(i),i})}setGroup(){return re(this,arguments,function*(e={},r=this.baseServerCallback){var i;let n=(i=yield this.send("structs/setGroup",this.stripStruct(e)))==null?void 0:i[0];return r(n),n})}getGroups(){return re(this,arguments,function*(e=this.currentUser._id,r="",n=this.baseServerCallback){var o;let i=(o=yield this.send("structs/getGroups",e,r))==null?void 0:o[0];return n(i),i})}deleteGroup(n){return re(this,arguments,function*(e,r=this.baseServerCallback){var o;if(!e)return;this.deleteLocalData(e);let i=(o=yield this.send("structs/deleteGroup",e))==null?void 0:o[0];return r(i),i})}setAuthorization(){return re(this,arguments,function*(e={},r=this.baseServerCallback){var i;let n=(i=yield this.send("structs/setAuth",this.stripStruct(e)))==null?void 0:i[0];return r(n),n})}getAuthorizations(){return re(this,arguments,function*(e=(i=>(i=this.currentUser)==null?void 0:i._id)(),r="",n=this.baseServerCallback){var s;if(e===void 0)return;let o=(s=yield this.send("structs/getAuths",e,r))==null?void 0:s[0];return n(o),o})}deleteAuthorization(n){return re(this,arguments,function*(e,r=this.baseServerCallback){var o;if(!e)return;this.deleteLocalData(e);let i=(o=yield this.send("structs/deleteAuth",e))==null?void 0:o[0];return r(i),i})}checkForNotifications(){return re(this,arguments,function*(e=(r=>(r=this.currentUser)==null?void 0:r._id)()){return yield this.getData("notification",e)})}setAuthorizationsByGroup(){return re(this,arguments,function*(e=this.currentUser){let r=this.getLocalData("authorization",{ownerId:e._id});e.userRoles.forEach(n=>{let o=n.split("_")[0],s;n.includes("client")?s=o+"_peer":n.includes("peer")?s=o+"_client":n.includes("admin")&&(s=o+"_owner"),s&&this.getUsersByRoles([s],a=>{a==null||a.forEach(l=>{let h=l.username;h||(h=l.email),h||(h=l.id);let p=e.username;p||(p=e.email),p||(p=e.id),h!==p&&(n.includes("client")?r.find(y=>{if(y.authorizerId===l.id&&y.authorizedId===e.id)return!0})||this.authorizeUser(Ei.ProfileStruct("user",e,e),l.id,h,e.id,p,["peer"],void 0,[n]):n.includes("peer")&&(r.find(y=>{if(y.authorizedId===l.id&&y.authorizerId===e.id)return!0})||this.authorizeUser(Ei.ProfileStruct("user",e,e),e.id,p,l.id,h,["peer"],void 0,[n])))})})})})}deleteRoom(e){return re(this,null,function*(){var n;if(!e)return!1;let r=[e];return(n=e.comments)==null||n.forEach(i=>{let o=this.getLocalData("comment",{_id:i});r.push(o)}),e?yield this.deleteData(r):!1})}deleteComment(e){return re(this,null,function*(){var a,l,h;let r=[e],n=(p=e)=>{(p==null?void 0:p.replies)&&p.replies.forEach(m=>{let y=this.getLocalData("comment",{_id:m});y&&(y.replies.length>0&&y.replies.forEach(w=>{n(w)}),r.push(y))})};n(e);let i=this.getLocalData((a=e.parent)==null?void 0:a.structType,{_id:(l=e.parent)==null?void 0:l._id}),o=[];i&&(o=[i],r.forEach(p=>{var w,b;let m=(w=i.replies)==null?void 0:w.indexOf(p._id);m>-1&&i.replies.splice(m,1);let y=(b=i.comments)==null?void 0:b.indexOf(p._id);y>-1&&i.comments.splice(y,1)}));let s=this.getLocalData("comment",{_id:e.replyTo});if((s==null?void 0:s._id)!==(i==null?void 0:i._id)){let p=(h=s.replies)==null?void 0:h.indexOf(i._id);p>-1&&s.replies.splice(p,1),o.push(s)}return o.length>0&&(yield this.updateServerData(o)),yield this.deleteData(r)})}getUserDataByAuthorization(a,l,h){return re(this,arguments,function*(e,r,n,i=0,o=0,s=this.baseServerCallback){let p=e.authorizerId;if(p)return new Promise(m=>re(this,null,function*(){this.getUser(p,y=>re(this,null,function*(){r?yield this.getData(r,p,n,i,o,s):yield this.getAllUserData(p,["notification"],s),m(y),s(y)}))}))})}getUserDataByAuthorizationGroup(){return re(this,arguments,function*(e="",r,n,i=0,o=0,s=this.baseServerCallback){let a=this.getLocalData("authorization"),l=[];return yield Promise.all(a.map(h=>re(this,null,function*(){var p;if((p=h.groups)==null?void 0:p.includes(e)){let m=h.authorizerId;if(m){let y,w=yield this.getUser(m,s);w&&l.push(w),r?y=yield this.getData(r,m,n,i,o,s):y=yield this.getAllUserData(m,["notification"],s),y&&l.push(y)}return!0}}))),l})}overwriteLocalData(e){if(Array.isArray(e))e.forEach(r=>{let n=this.getLocalData(r.structType,{ownerId:r.ownerId,_id:r._id});!n||(n==null?void 0:n.length)===0?this.setLocalData(r):Object.assign(n,r)});else{let r=this.getLocalData(e.structType,{ownerId:e.ownerId,_id:e._id});!r||(r==null?void 0:r.length)===0?this.setLocalData(e):Object.assign(r,e)}}setLocalData(e){this.tablet.setLocalData(e)}getLocalData(e,r){return this.tablet.getLocalData(e,r)}getLocalReplies(e){let r=[];if(e.replies){if(e.replies.reduce((n,i)=>n*(typeof i=="object"?1:0),1))return e.replies}else return r;return r=this.getLocalData("comment",{replyTo:e._id}),r}hasLocalAuthorization(e,r=this.currentUser._id){let i=this.getLocalData("authorization",{ownerId:r}).find(o=>{if(o.authorizedId===r&&o.authorizerId===e||o.authorizerId===r&&o.authorizedId===e)return!0});return i||!1}deleteLocalData(e){return Array.isArray(e)?e.forEach(r=>this.deleteStruct(r)):this.deleteStruct(e),!0}deleteStruct(e){if(typeof e=="string"&&(e=this.getLocalData(e)),!e)throw new Error("Struct not supplied");return!e.structType||!e._id?!1:(this.tablet.collections.get(e.structType).delete(e._id),!0)}stripStruct(e={}){let r=Object.assign({},e);for(let n in r)(r[n]===void 0||r[n].constructor.name==="Map")&&delete r[n];return r}createStruct(e,r,n=this.currentUser,i){return Ei.Struct(e,r,n,i)}userStruct(e={},r=!1){let n=Ei.ProfileStruct(void 0,e,e);e._id?n.id=e._id:e.id?n.id=e.id:n.id="user"+Math.floor(Math.random()*1e10),n._id=n.id,n.ownerId=n.id;for(let i in e)Object.keys(Ei.ProfileStruct()).indexOf(i)<0&&delete n[i];return r&&(this.currentUser=n),n}dataObject(e=void 0,r="any",n=Date.now()){return{type:r,data:e,timestamp:n}}},n2=r2});var o2,Ye,al=mt(()=>{o2=Ft(ys());i2();Ye=new n2;Ye.connect({target:o2.settings.dataserver,credentials:{},type:"websocket"}).subscribe(t=>{console.log("Indirect message from socket",t)});Ye.send("routes").then(t=>console.log("Routes",t)).catch(console.error)});var a2,l2,s2,ll,ul,gp=mt(()=>{a2=Ft(mi());Za();wS();al();l2=Ft(ys()),s2=new An(l2.settings.realmapp),ll=(t,e)=>re(void 0,null,function*(){let{currentUser:r}=s2,n="LOG_IN";if(r)try{yield r.refreshAccessToken(),n="REFRESH"}catch(i){return{type:"FAIL",data:{err:i,type:"REFRESH"}}}else{let i;try{t==="google"?(yield(0,a2.wait)(0),i=Qt.google({redirectUrl:window.location.origin})):t&&(i=Qt.emailPassword(t,e))}catch(o){console.error(o)}if(i)try{let o=yield s2.logIn(i);o&&(yield o.refreshAccessToken(),r=o)}catch(o){return{type:"FAIL",data:{err:o,type:"LOGIN"}}}}return r?{type:n,data:r.toJSON()}:{type:"FAIL",data:{err:void 0,type:"UNCAUGHT"}}}),ul=t=>re(void 0,null,function*(){var n,i;let e=!1,r;if((t==null?void 0:t.type)!=="FAIL"&&((t==null?void 0:t.data).id||(t==null?void 0:t.data)._id?r=Ye.setupUser(t.data):((i=(n=t==null?void 0:t.data)==null?void 0:n.profile)==null?void 0:i.data)._id&&(r=Ye.setupUser(t.data.profile.data))),r){let o=yield r;if(o)return e=!0,Zr.setState({isLoggedIn:!0,loggedInId:o._id}),console.log("Logged in: ",o),o}e||(console.log("User not created with info:",t.data),Zr.get("isLoggedIn")&&Zr.setState({isLoggedIn:!1}))});window.location.href.includes("_baas_client_app_id")&&vS()});function Vt(t="struct",e={},r={_id:""},n={structType:"struct",_id:""}){function i(s=""){return`${s+Math.floor(Math.random()+Math.random()*Math.random()*1e16)}`}let o={_id:i(t+"defaultId"),structType:t,ownerId:r?._id,timestamp:Date.now(),parent:{structType:n?.structType,_id:n?._id}};return o.ownerId||delete o.ownerId,o?.parent?._id||delete o.parent,Object.keys(e).length>0&&Object.assign(o,e),o}function bc(t,e={}){if(!po[t.tag]&&t.position&&(po[t.tag]=[t.position.x,t.position.y,t.position.z]),po[t.tag]){let r={channel:"",position:{x:po[t.tag][0],y:po[t.tag][1],z:po[t.tag][2]}};return Object.assign(e,r)}else return Object.assign(e,t)}function T5(t=[],e=!0){let r=[];for(let n of t){let i=Oi(n);r.push(i)}return e&&r.push(...vp({channelDicts:t})),r}function Ec(t=[],e={}){let r={scp:[],delta:[],theta:[],alpha1:[],alpha2:[],beta:[],lowgamma:[],highgamma:[]};return t.forEach(n=>r[n]=[]),Object.assign(e,r)}function Oi(t="",e={},r={_id:""},n={structType:"struct",_id:""}){let i=Ec(),o={tag:t,position:{x:0,y:0,z:0},count:0,times:[],raw:[],filtered:[],fftCount:0,fftTimes:[],ffts:[],slices:JSON.parse(JSON.stringify(i)),means:JSON.parse(JSON.stringify(i)),startTime:Date.now()},s=Vt("eeg",o,r,n);return t&&bc(o,s),Object.assign(s,e)}function mp(t={0:Oi("FP1"),1:Oi("FP2")},e={},r={_id:""},n={structType:"struct",_id:""}){let i=Ec(),o={tag:t[0]?.tag+"::"+t[1]?.tag,x0:t[0]?.position?.x,y0:t[0]?.position?.y,z0:t[0]?.position?.z,x1:t[1]?.position?.x,y1:t[1]?.position?.y,z1:t[1]?.position?.z,fftCount:0,fftTimes:[],ffts:[],slices:JSON.parse(JSON.stringify(i)),means:JSON.parse(JSON.stringify(i)),startTime:Date.now()},s=Vt("coherence",o,r,n);return Object.assign(s,e)}function vp(t={channelDicts:[{ch:0,tag:"FP1",analyze:!1},{ch:1,tag:"FP2",analyze:!1}],taggedOnly:!0},e={},r={_id:""},n={structType:"struct",_id:""}){for(var i=[],o=1,s=0,a=0;a<t.channelDicts.length*(t.channelDicts.length+1)/2-t.channelDicts.length;a++){if(t.taggedOnly===!1||t.taggedOnly===!0&&t.channelDicts[s].tag!==null&&t.channelDicts[s+o].tag!==null&&t.channelDicts[s].tag!=="other"&&t.channelDicts[s+o].tag!=="other"&&t.channelDicts[s].analyze===!0&&t.channelDicts[s+o].analyze===!0){var l=Oi(t.channelDicts[s].tag),h=Oi(t.channelDicts[s+o].tag);i.push(mp({0:l,1:h},{},r,n))}o++,o+s===t.channelDicts.length&&(s++,o=1)}return i}function wp(t="",e={},r={_id:""},n={structType:"struct",_id:""}){let i={tag:t,position:{x:0,y:0,z:0},count:0,times:[],red:[],ir:[],ir2:[],ambient:[],ratio:[],temp:[],beat_detect:{beats:[],breaths:[],rir:[],rir2:[],drir_dt:[],localmins:[],localmaxs:[],val_dists:[],peak_dists:[],localmins2:[],localmaxs2:[],val_dists2:[],peak_dists2:[]},startTime:Date.now()},o=Vt("fnirs",i,r,n);return t&&bc(i,o),Object.assign(o,e)}function f2(t="",e={},r={_id:""},n={structType:"struct",_id:""}){let i={tag:t,Ax:[],Ay:[],Az:[],Gx:[],Gy:[],Gz:[],startTime:Date.now()},o=Vt("imu",i,r,n);return t&&bc(i,o),Object.assign(o,e)}function h2(t="",e={},r={_id:""},n={structType:"struct",_id:""}){let i={tag:t,count:0,times:[],x:[],y:[],smax:[],smay:[],startTime:Date.now()},o=Vt("eyetracker",i,r,n);return Object.assign(o,e)}function _p(t="",e={},r={_id:""},n={structType:"struct",_id:""}){let i={tag:t,count:0,times:[],raw:[],filtered:[],bpm:[],hrv:[],startTime:Date.now()},o=Vt("ecg",i,r,n);return Object.assign(o,e)}function d2(t="",e={},r={_id:""},n={structType:"struct",_id:""}){}function p2(t="",e={},r={_id:""},n={structType:"struct",_id:""}){let i=wp(t,r,n,e);return i.structType="ppg",i}function y2(t="",e={},r={_id:""},n={structType:"struct",_id:""}){let i=_p(t,r,n,e);return i.structType="hrv",i}function g2(t="",e={},r={_id:""},n={structType:"struct",_id:""}){let i=Oi(t,r,n,e);return i.structType="emg",i}function m2(t="",e={},r={_id:""},n={structType:"struct",_id:""}){let i=Vt("profile",{tag:t,name:"",username:"",firstName:"",lastName:"",email:"",sex:"",birthday:"",type:"",userRoles:[],id:""},r,n);return Object.assign(i,e)}function v2(t="",e={},r={_id:""},n={structType:"struct",_id:""}){let i={tag:t,authorizedId:"",authorizedName:"",authorizerId:"",authorizerName:"",authorizations:new Array,structs:new Array,excluded:new Array,groups:new Array,status:"PENDING",expires:!1,associatedAuthId:""},o=Vt("authorization",i,r,n);return Object.assign(o,e)}function w2(t="",e={},r={_id:""},n={structType:"struct",_id:""}){let i={tag:t,name:"",details:"",admins:new Array,peers:new Array,clients:new Array,users:new Array},o=Vt("group",i,r,n);return Object.assign(o,e)}function _2(t="",e={},r={_id:""},n={structType:"struct",_id:""}){let i={tag:t,title:"",author:"",expires:!1,type:"",data:new Array},o=Vt("dataInstance",i,r,n);return Object.assign(o,e)}function S2(t="",e={},r={_id:""},n={structType:"struct",_id:""}){let i={tag:t,event:"",author:"",startTime:"",endTime:"",grade:0,notes:"",attachments:new Array,users:new Array},o=Vt("event",i,r,n);return Object.assign(o,e)}function b2(t="",e={},r={_id:""},n={structType:"struct",_id:""}){let i={tag:t,message:"",topic:"",author:"",attachments:new Array,comments:new Array,replies:new Array,users:new Array,audioChatActive:!1,videoChatActive:!1},o=Vt("chatroom",i,r,n);return Object.assign(o,e)}function E2(t="",e={},r={_id:""},n={structType:"struct",_id:""}){let i={tag:t,author:"",replyTo:"",message:"",rating:0,replies:new Array,users:new Array,attachments:new Array},o=Vt("comment",i,r,n);return Object.assign(o,e)}function O2(t="",e={},r={_id:""},n={structType:"struct",_id:""}){let i=Vt("notification",{tag:t,note:"",parentUserId:""},r,n);return Object.assign(i,e)}function T2(t="",e={},r={_id:""},n={structType:"struct",_id:""}){let i={tag:t,title:"",author:"",attachments:new Array,dates:new Array},o=Vt("schedule",i,r,n);return Object.assign(o,e)}function x2(t="",e={},r={_id:""},n={structType:"struct",_id:""}){let i={tag:t,timeSet:"",notes:"",recurs:"NEVER",attachments:new Array},o=Vt("date",i,r,n);return Object.assign(o,e)}function P5(t=[],e={scp:[.1,1],delta:[1,4],theta:[4,8],alpha1:[8,12],alpha2:[12,16],beta:[16,30],lowgamma:[30,45],highgamma:[45,100]}){let r={};return t.forEach((n,i)=>{for(let o in e)r[o]||(r[o]=[[],[]]),n>=e[o][0]&&n<=e[o][1]&&(r[o][0].push(n),r[o][1].push(i))}),r}function U5(t,e,r){let n=(e-t)/r,i=[],o=0;for(;o<e;)i.push(o),o+=n;return i}var u2,O5,c2,He,cl,po,x5,k5,yo,Me,I5,N5,A5,D5,R5,C5,F5,L5,M5,j5,k2=mt(()=>{u2=Object.defineProperty,O5=(t,e,r)=>e in t?u2(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,c2=(t,e)=>{for(var r in e)u2(t,r,{get:e[r],enumerable:!0})},He=(t,e,r)=>(O5(t,typeof e!="symbol"?e+"":e,r),r),cl={};c2(cl,{AuthorizationStruct:()=>v2,ChatroomStruct:()=>b2,CoherenceMap:()=>vp,CoherenceStruct:()=>mp,CommentStruct:()=>E2,DataStruct:()=>_2,DateStruct:()=>x2,ECGStruct:()=>_p,EDAStruct:()=>d2,EEGCoordinates:()=>T5,EEGStruct:()=>Oi,EMGStruct:()=>g2,EventStruct:()=>S2,EyeTrackerStruct:()=>h2,FNIRSStruct:()=>wp,FrequencyBandsStruct:()=>Ec,GroupStruct:()=>w2,HRVStruct:()=>y2,IMUStruct:()=>f2,NotificationStruct:()=>O2,PPGStruct:()=>p2,ProfileStruct:()=>m2,ScheduleStruct:()=>T2,Struct:()=>Vt,eegCoordinates:()=>po,setCoordinate:()=>bc,structRegistry:()=>x5});po={FP1:[-21.2,66.9,12.1],FPZ:[1.4,65.1,11.3],FP2:[24.3,66.3,12.5],AF7:[-41.7,52.8,11.3],AF3:[-32.7,48.4,32.8],AFZ:[1.8,54.8,37.9],AF4:[35.1,50.1,31.1],AF8:[43.9,52.7,9.3],F5:[-51.4,26.7,24.7],F3:[-39.7,25.3,44.7],F1:[-22.1,26.8,54.9],FZ:[0,26.8,60.6],F2:[23.6,28.2,55.6],F4:[41.9,27.5,43.9],F6:[52.9,28.7,25.2],F7:[-52.1,28.6,3.8],F8:[53.2,28.4,3.1],FC5:[-59.1,3,26.1],FC3:[-45.5,2.4,51.3],FC1:[-24.7,.3,66.4],FCZ:[1,1,72.8],FC2:[26.1,3.2,66],FC4:[47.5,4.6,49.7],FC6:[60.5,4.9,25.5],FT9:[-53.8,-2.1,-29.1],FT7:[-59.2,3.4,-2.1],FT8:[60.2,4.7,-2.8],FT10:[55,-3.6,-31],T7:[-65.8,-17.8,-2.9],T5:[-61.5,-65.3,1.1],T3:[-70.2,-21.3,-10.7],T4:[71.9,-25.2,-8.2],T6:[59.3,-67.6,3.8],T8:[67.4,-18.5,-3.4],C5:[-63.6,-18.9,25.8],C3:[-49.1,-20.7,53.2],C1:[-25.1,-22.5,70.1],CZ:[.8,-21.9,77.4],C2:[26.7,-20.9,69.5],C4:[50.3,-18.8,53],C6:[65.2,-18,26.4],CP5:[-61.8,-46.2,22.5],CP3:[-46.9,-47.7,49.7],CP1:[-24,-49.1,66.1],CPZ:[.7,-47.9,72.6],CP2:[25.8,-47.1,66],CP4:[49.5,-45.5,50.7],CP6:[62.9,-44.6,24.4],TP9:[-73.6,-46.7,-4],TP7:[-63.6,-44.7,-4],TP8:[64.6,-45.4,-3.7],TP10:[74.6,-47.4,-3.7],P9:[-50.8,-51.3,-37.7],P7:[-55.9,-64.8,0],P5:[-52.7,-67.1,19.9],P3:[-41.4,-67.8,42.4],P1:[-21.6,-71.3,52.6],PZ:[.7,-69.3,56.9],P2:[24.4,-69.9,53.5],P4:[44.2,-65.8,42.7],P6:[54.4,-65.3,20.2],P8:[56.4,-64.4,.1],P10:[51,-53.9,-36.5],PO7:[-44,-81.7,1.6],PO3:[-33.3,-84.3,26.5],POZ:[0,-87.9,33.5],PO4:[35.2,-82.6,26.1],PO8:[43.3,-82,.7],O1:[-25.8,-93.3,7.7],OZ:[.3,-97.1,8.7],O2:[25,-95.2,6.2]};x5={Struct:Vt,EEGStruct:Oi,FNIRSStruct:wp,CoherenceStruct:mp,CoherenceMap:vp,FrequencyBandsStruct:Ec,IMUStruct:f2,EyeTrackerStruct:h2,ECGStruct:_p,EDAStruct:d2,PPGStruct:p2,HRVStruct:y2,EMGStruct:g2,ProfileStruct:m2,AuthorizationStruct:v2,GroupStruct:w2,DataStruct:_2,EventStruct:S2,ChatroomStruct:b2,CommentStruct:E2,NotificationStruct:O2,ScheduleStruct:T2,DateStruct:x2},k5={};c2(k5,{bandpassWindow:()=>U5,get40HzGamma:()=>C5,getAlphaBetaRatio:()=>D5,getAlphaRatio:()=>N5,getAlphaThetaRatio:()=>R5,getCoherenceScore:()=>I5,getHEGRatioScore:()=>L5,getLowGammaScore:()=>F5,getThetaBetaRatio:()=>A5,mapCoherenceData:()=>j5,mapFFTData:()=>M5,splitFrequencyBands:()=>P5});yo=class{constructor(){}static genSineWave(t=20,e=1,r=1,n=512,i=0,o=1){for(var s=[],a=[],l=1/n,h=0;h<r;h+=l){var p=Math.sin(2*Math.PI*t*h)*e;p+=Math.sin(2*Math.PI*i*h)*o,s.push(p),a.push(h)}return[a,s]}static getSineAmplitude(t=20,e=1,r=0,n=0){return Math.sin(this.TWO_PI*t*r+n)*e}static mean(t){var e=t.reduce((r,n)=>n+=r);return e/t.length}static mode(t){return t.sort((e,r)=>t.filter(n=>n===e).length-t.filter(n=>n===r).length).pop()}static std(t,e=void 0){let r=e;e||(r=this.mean(t));let n=0;for(let i=0;i<t.length;i++){let o=t[i]-r;n+=o*o}return Math.sqrt(n/t.length)}static relError(t=[],e=[],r=!0){if(t.length!==e.length)throw new Error("Input arrays of same length!");let n=t.length,i=[];for(let o=0;o<n;o++){let s=(t[o]-e[o])/t[o];r&&(s=Math.abs(s)),i.push(s)}return i}static informationEntropy(t=[]){let e=[],r=t.length;for(let n=0;n<r;n++){let i=t[n]*Math.log(t[n]);isNaN(i)&&(i=0),e.push(i)}return e}static zscore(t){let e=this.mean(t),r=this.std(t,e),n=[];for(let i=0;i<t.length;i++)n.push((t[i]-e)/r);return n}static variance(t){var e=this.mean(t);return t.reduce((r,n)=>r+(n-e)**2,0)/t.length}static dot(t,e){for(var r=0,n=0;n<t.length;n++)r+=t[n]*e[n];return r}static cross3D(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}static magnitude(t){var e=0;return t.forEach(r=>{e+=r*r}),Math.sqrt(e)}static distance(t,e){var r=0;return t.forEach((n,i)=>{r+=(e[i]-n)*(e[i]-n)}),Math.sqrt(r)}static normalize(t){var e=0;e=this.magnitude(t);var r=[];return t.forEach((n,i)=>{r.push(n*e)}),r}static quadraticFormula(t,e,r){let n=Math.sqrt(e*e-4*t*r);if(!isNaN(n))return["complex","complex"];let i=1/(2*t);if(n===0)return[e*i];let o=-e;return[(o+n)*i,(o-n)*i]}static newtonsMethod(t=o=>Math.pow(o,5)+o*o-o-.2,e=0,r=1,n=.01,i=10){let o=[];for(let s=0;s<i;s++){let a=Math.random()*(r-e),l=t(a),h=t(a+n),p=(h-l)/n,m=a+n;for(;Math.abs(p)>n;){let b=-l/O,N=m+b;l=h,h=t(N);let O=(h-l)/(N-m)}let y,w=o.find((b,N)=>{if(Math.abs(xn1-b)<n)return y=N,!0});w?o[y]=(xn1+w)*.5:o.push(xn1)}return o}static makeVec(t,e){var r=[];return t.forEach((n,i)=>{r.push(e[i]-n)}),r}static transpose(t){return t[0].map((e,r)=>t.map(n=>n[r]))}static matmul(t,e){for(var r=t.length,n=t[0].length,i=e.length,o=e[0].length,s=new Array(r),a=0;a<r;++a){s[a]=new Array(o);for(var l=0;l<o;++l){s[a][l]=0;for(var h=0;h<n;++h)s[a][l]+=t[a][h]*e[h][l]}}return s}static matscale(t,e){let r=[];for(var n=0;n<t.length;n++){r[n]=[];for(let i=0;i<t[0].length;i++)r[n][i]=t[n][i]*e}return r}static matadd(t,e){let r=[];for(let i=0;i<t.length;i++){r[i]=[];for(var n=0;n<t[0].length;n++)r[i][n]=t[i][n]+e[i][n]}return r}static matsub(t,e){let r=[];for(let i=0;i<t.length;i++){r[i]=[];for(var n=0;n<t[0].length;n++)r[i][n]=t[i][n]-e[i][n]}return r}static histogram(t=[],e=1,r=void 0){let n=[...t];n.sort(function(l,h){return l-h});let i=Math.min(...n);if(typeof r=="number"){let l=Math.max(...n);e=Math.abs((l-i)/(r-1))}let o=i,s=[],a=[];for(let l=0;l<n.length;l++){let h=e*o;if(n[l]>i+h){o++,h+=e;let p=i+h+h*.5;s.push(p),a.push(0)}a[a.length-1]++}return[s,a]}static normalDistribution(t=[],e=!0,r=1e-4){let n=this.mean(t),i=this.variance(t),o=t.length,s=[],a=1/(this.TWO_PI*i),l=1/i,h=0;for(let p=0;p<o;p++){let m=Math.exp(-.5*Math.pow((t[p]-n)*l,2))*a;m<r&&(m=0),s.push(m),h+=m}if(e){let p=1/h;s=s.map(m=>m*p)}return s}static expectedValue(t=[],e=this.normalDistribution(t)){return t.reduce((r,n,i)=>r+n*e[i])}static originMoment(t=[],e=this.normalDistribution(t),r=1){return t.reduce((n,i,o)=>n+Math.pow(i,r)*e[o])}static centralMoment(t=[],e=this.normalDistribution(t),r=1){let n=this.mean(t);return t.reduce((i,o,s)=>i+Math.pow(o-n,r)*e[s]/t.length)}static linearDiscriminantAnalysis(t=[],e=[]){let r=this.mean(t),n=this.mean(e),i=this.cov1d(t,e),o=this.normalDistribution(t),s=[];for(let a=0;a<t.length;a++)s.push(x[a]*i*n-.5*r*i*n+Math.log10(o[a]));return s}static conv1D(t=[],e=[1/3,1/3,1/3],r=Math.floor(e.length*.5)){let n=[],i=1/e.length;if(r>0){let a=new Array(r).fill(0);t=[...a,...t,...a]}let o=Math.floor(e.length*.5),s=t.length-e.length+o;for(let a=o;a<s;a++){let l=0;for(let h=0;h<e.length;h++)l+=t[a-o]*e[h];n.push(l*i)}return n}static conv2D(t=[[],[],[]],e=[[],[],[]],r=0){let n=new Array(t.length-Math.ceil(e.length*.5)).fill([]),i,o=yo.transpose(o);if(r>0){let N=new Array(r).fill(0);i=yo.transpose(t);for(let O=0;O<i.length;O++)i[O]=[...N,...i[O],...N];t=yo.transpose(i);for(let O=0;O<t.length;O++)t[O]=[...N,...t[O],...N]}let s=Math.floor(e[0].length*.5),a=Math.floor(o[0].length*.5),l=t[0].length-e[0].length+s,h=i[0].length-o[0].length+a,p=1/(e[0].length*o[0].length),m=l*h,y=s,w,b=a;for(;y<m;){let N=0;w=y%t[0].length,w===0&&b++;for(let O=0;O<e[0].length;O++){for(let I=0;I<o[0].length;O++)N+=t[b-a+I][w-s+O]*e[I][O];n[b].push(N*p)}y++}return n}static cov2d(t){var e=this.transpose(t),r=[],n=[],i=[];t.forEach((b,N)=>{n.push(this.mean(b))}),e.forEach((b,N)=>{i.push(this.mean(b))}),t.forEach((b,N)=>{r.push([]);for(var O=0;O<b.length;O++)r[N].push((t[N][O]-n[N])*(t[N][O]-i[O])/(b.length-1))});for(var o=this.transpose(r),s=r.length,a=r[0].length,l=o.length,h=o[0].length,p=new Array(s),m=0;m<s;++m){p[m]=new Array(h);for(var y=0;y<h;++y){p[m][y]=0;for(var w=0;w<a;++w)p[m][y]+=r[m][w]*o[w][y]/(t[0].length-1)}}return p}static cov1d(t=[],e=[]){return this.cov2d([t,e])}static cov3d(t=[],e=[],r=[]){return[[this.cov1d(t,t),this.cov1d(t,e),this.cov1d(t,r)],[this.cov1d(e,t),this.cov1d(e,e),this.cov1d(e,r)],[this.cov1d(r,t),this.cov1d(r,e),this.cov1d(r,r)]]}static covNd(t=[]){let e=[];t.forEach((r,n)=>{e.push([]),t.forEach((i,o)=>{e[n].push(this.cov1d(r,i))})})}static eigens2x2(t=[[1,2],[3,4]]){let e=t[0][0]*t[1][1]-t[0][1]*t[1][0],r=(t[0][0]+t[1][1])*.5,n=Math.sqrt(r*r-e),i=r+n,o=r-n;return[i,o]}static eigenvectors2x2(t=[[1,2],[3,4]],e=[1,2]){let r=[-t[0][1],t[0][0]-e[0]];r[0]===0&&r[1]===0&&(r[0]=t[1][1]-e[0],r[1]=-t[1][0]);let n=[-t[0][1],t[0][0]-e[1]];return n[0]===0&&n[1]===0&&(n[0]=t[1][1]-e[1],n[1]=-t[1][0]),[r,n]}static fastpca2d(t,e){let r=this.cov1d(t,e),n=this.eigens2x2(r);n[1]>n[0]&&n.reverse();let i=this.eigenvectors2x2(r,n);return console.log(n,i),[n,i]}static crosscorrelation(t,e){var r=[...e,...Array(e.length).fill(0)],n=this.mean(t),i=this.mean(e),o=t.reduce((m,y)=>m+=Math.pow(y-n,2));o=Math.sqrt(o);var s=e.reduce((m,y)=>m+=Math.pow(y-n,2));s=Math.sqrt(s);for(var a=1/(o*s),l=new Array(t.length).fill(0),h=0;h<t.length;h++){var p=t.reduce((m,y,w)=>m+=(y-n)*(r[h+w]-i));l[h]=p*a}return l}static autocorrelation(t){var e=[...t,...Array(t.length).fill(0)],r=this.mean(t),n=t.reduce((l,h)=>l+=Math.pow(h-r,2));n=Math.sqrt(n);for(var i=1/(n*n),o=new Array(t.length).fill(0),s=0;s<t.length;s++){var a=t.reduce((l,h,p)=>l+=(h-r)*(e[s+p]-r));o[s]=a*i}return o}static correlograms(t=[[],[]]){var e=[];return t.forEach((r,n)=>{t.forEach((i,o)=>{o>=n&&e.push(yo.crosscorrelation(r,i))})}),e}static sma(t=[],e){for(var r=[],n=0;n<t.length;n++)if(n==0)r.push(t[0]);else if(n<e){var i=t.slice(0,n+1);r.push(i.reduce((o,s)=>s+=o)/(n+1))}else{var i=t.slice(n-e,n);r.push(i.reduce((s,a)=>a+=s)/e)}return r}static sum(t=[]){if(t.length>0){var e=t.reduce((r,n)=>n+=r);return e}else return 0}static reduceArrByFactor(t,e=2){return t.filter((r,n)=>n%e===0)}static makeArr(t,e,r){for(var n=[],i=(e-t)/(r-1),o=0;o<r;o++)n.push(t+i*o);return n}static interpolateArray(t,e,r=1){var n=function(m,y,w){return(m+(y-m)*w)*r},i=new Array,o=new Number((t.length-1)/(e-1));i[0]=t[0];for(var s=1;s<e-1;s++){var a=s*o,l=new Number(Math.floor(a)).toFixed(),h=new Number(Math.ceil(a)).toFixed(),p=a-l;i[s]=n(t[l],t[h],p)}return i[e-1]=t[t.length-1],i}static isExtrema(t,e="peak"){let r=[...t];if(r.length%2===0&&r.pop(),t.length>1){let n=!0;for(let i=0;i<r.length;i++){let o=r[i];if(e==="peak"){if(i<Math.floor(r.length*.5)&&o>=r[Math.floor(r.length*.5)]){n=!1;break}else if(i>Math.floor(r.length*.5)&&o>=r[Math.floor(r.length*.5)]){n=!1;break}}else if(e==="valley"){if(i<Math.floor(r.length*.5)&&o<=r[Math.floor(r.length*.5)]){n=!1;break}else if(i>Math.floor(r.length*.5)&&o<=r[Math.floor(r.length*.5)]){n=!1;break}}else if(i<Math.floor(r.length*.5)&&o<=r[Math.floor(r.length*.5)]){n=!1;break}else if(i>Math.floor(r.length*.5)&&o<=r[Math.floor(r.length*.5)]){n=!1;break}}if(e!=="peak"&&e!=="valley"&&n===!1){n=!0;for(let i=0;i<r.length;i++){let o=r[i];if(i<Math.floor(r.length*.5)&&o>=r[Math.floor(r.length*.5)]){n=!1;break}else if(i>Math.floor(r.length*.5)&&o>=r[Math.floor(r.length*.5)]){n=!1;break}}}return n}else return}static isCriticalPoint(t,e="peak"){let r=[...t];if(r.length%2===0&&r.pop(),t.length>1){let n=!0;for(let i=0;i<r.length;i++){let o=r[i];if(e==="peak"){if(i<r.length*.5&&o<=0){n=!1;break}else if(i>r.length*.5&&o>0){n=!1;break}}else if(e==="valley"){if(i<r.length*.5&&o>=0){n=!1;break}else if(i>r.length*.5&&o<0){n=!1;break}}else if(i<r.length*.5&&o>=0){n=!1;break}else if(i>r.length*.5&&o<0){n=!1;break}}if(e!=="peak"&&e!=="valley"&&n===!1){n=!0;for(let i=0;i<r.length;i++){let o=r[i];if(i<r.length*.5&&o<=0){n=!1;break}else if(i>r.length*.5&&o>0){n=!1;break}}}return n}else return}static getPeakThreshold(t,e,r){let n,i=t.filter((o,s)=>{if(e.indexOf(s)>-1)return!0});return r===0?n=this.mean(i):n=(r+this.mean(i))*.5,n}static column(t,e){let r=new Array(t.length).fill(0).map(()=>new Array(1).fill(0));for(let n=0;n<t.length;n++)r[n][0]=t[n][e];return r}static flatten_vector(t){let e=[];for(let r=0;r<t.length;r++)e[r]=t[r][0];return e}static squared_difference(t,e){let r=0;for(let n=0;n<t.length;n++)r=r+Math.pow(t[n]-e[n],2);return r}static shift_deflate(t,e,r){let n=Math.sqrt(this.matmul(this.transpose(r),r)),i=this.matscale(r,1/n),o=this.matscale(this.matmul(i,this.transpose(i)),e);return this.matsub(t,o)}static eigenvalue_of_vector(t,e){return ev=this.matmul(this.matmul(this.transpose(e),t),e),ev}static power_iteration(t,e=1e-5,r=1e3){let n=t.length,i=new Array(n).fill(0).map(()=>new Array(1).fill(Math.sqrt(n))),o=this.eigenvalue_of_vector(t,i),s=1,a=0;for(;s>e&&a<r;){let l=JSON.parse(JSON.stringify(o)),h=this.matmul(t,i);i=this.normalize(h),o=this.eigenvalue_of_vector(t,i),s=Math.abs(o-l),a++}return[o,i]}static eigens(t,e=1e-4,r=1e3){let n=[],i=[];for(let o=0;o<t.length;o++){let s=this.power_iteration(t,e,r),a=s[0],l=s[1];n[o]=a,i[o]=this.flatten_vector(l),t=this.shift_deflate(t,a,l)}return[n,i]}static pca(t,e=1e-5){let r=t.length,n=new Array(r),i=new Array(r),o=this.transpose(t);n[0]=this.column(t,0);let s=1,a=0;for(;espilon>e;){a++,i[0]=this.matmul(o,n[0]);let l=this.matmul(this.transpose(n[0]),n[0]);i[0]=this.matscale(i[0],1/l);let h=Math.sqrt(this.matmul(this.transpose(i[0]),i[0]));i[0]=this.matscale(i[0],1/h);let p=this.matmul(t,i[0]),m=this.matmul(this.transpose(i[0]),i[0]);p=this.matscale(p,1/m),s=this.squared_difference(n[0],p),n[0]=JSON.parse(JSON.stringify(p))}return this.matmul(this.transpose(n[0]),n[0])}static p300(t=[],e=[],r=[],n=256){let i=Math.floor(n/10),o=this.sma(e,i),s=this.peakDetect(o,"peak",i),a=this.mean(o),l=this.std(o,a),h=0,p=[];return s.length>0&&t.forEach((m,y)=>{for(;r[s[h]]<m+200&&(h++,!!s[h]););let w=0,b=[];for(;r[s[h+w]]<m+600&&(b.push(h+w),w++,!!s[h+w]););if(b.length>1){let N=[];b.forEach(R=>{N.push(o[s[R]])});let O=Math.max(...N),I=b[N.indexOf(O)];p.push({event_timestamp:m,event_index:y,peak_timestamp:r[[s[I]]],signal_index:[s[I]],signal_amplitude:e[[s[I]]],zscore:(o[s[I]]-a)/l})}else b.length===1&&p.push({event_timestamp:m,event_index:y,peak_timestamp:r[s[b[0]]],signal_index:s[b[0]],signal_amplitude:e[[s[b[0]]]],zscore:(o[s[b[0]]]-a)/l})}),p}},Me=yo;He(Me,"TWO_PI",Math.PI*2),He(Me,"C",299792458),He(Me,"G",66743e-15),He(Me,"h",662607015e-42),He(Me,"R",8314.32),He(Me,"Ra",287),He(Me,"H",69.3),He(Me,"kbar",1054571817e-43),He(Me,"kB",1380649e-29),He(Me,"ke",89875517923e-1),He(Me,"me",91093837015e-41),He(Me,"mp",167262192369e-38),He(Me,"mn",167492749804e-38),He(Me,"P0",101325),He(Me,"T0",288.15),He(Me,"p0",1.225),He(Me,"Na",60220978e16),He(Me,"y",1.405),He(Me,"M0",28.96643),He(Me,"g0",9.80665),He(Me,"Re",6378100),He(Me,"B",1458e-9),He(Me,"S",110.4),He(Me,"Sigma",365e-12),He(Me,"imgkernels",{edgeDetection:[[-1,-1,-1],[-1,8,-1],[-1,-1,-1]],boxBlur:[[1/9,1/9,1/9],[1/9,1/9,1/9],[1/9,1/9,1/9]],sobelLeft:[[1,0,-1],[2,0,-2],[1,0,-1]],sobelRight:[[-1,0,1],[-2,0,2],[-1,0,1]],sobelTop:[[1,2,1],[0,0,0],[-1,-2,-1]],sobelBottom:[[-1,2,1],[0,0,0],[1,2,1]],identity:[[0,0,0],[0,1,0],[0,0,0]],gaussian3x3:[[1,2,1],[2,4,2],[1,2,1]],guassian7x7:[[0,0,0,5,0,0,0],[0,5,18,32,18,5,0],[0,18,64,100,64,18,0],[5,32,100,100,100,32,5],[0,18,64,100,64,18,0],[0,5,18,32,18,5,0],[0,0,0,5,0,0,0]],emboss:[[-2,-1,0],[-1,1,1],[0,1,2]],sharpen:[[0,-1,0],[-1,5,-1],[0,-1,0]]}),He(Me,"integral",(t=n=>n,e=[],r=.01)=>{let n=0;for(let i=e[0];i<e[1];i+=r)n+=t(i)*r;return n}),He(Me,"dintegral",(t=(i,o)=>i+o,e=[[],[]],r=.01,n=r)=>{let i=0;for(let o=e[0][0]+r;o<e[0][1];o+=r)for(let s=e[1][0]+n;s<e[1][1];s+=n)i+=t(o,s)*r*n;return i}),He(Me,"tintegral",(t=(o,s,a)=>o+s+a,e=[[],[],[]],r=.01,n=r,i=r)=>{let o=0;for(let s=e[0][0]+r;s<e[0][1];s+=r)for(let a=e[1][0]+n;a<e[1][1];a+=n)for(let l=e[2][0]+i;l<e[2][1];l+=i)o+=t(s,a,l)*r*n*i;return o}),He(Me,"pintegral",(t=n=>n,e=[],r=.01)=>{let n=0,i,o;for(let s=e[0];s<e[1];s+=r)i=o,o=t(s),i&&(n+=yo.distance([0,i],[r,o]));return n}),He(Me,"peakDetect",(t,e="peak",r=49)=>{let n=Math.floor(r*.5),i=[];for(let o=0;o<t.length-r;o++)yo.isExtrema(t.slice(o,o+r),e)&&i.push(o+n-1);return i});I5=(t,e="alpha1")=>{let r=[];return Array.isArray(t)||(t=[t]),t.forEach(n=>{if(n.fftCount>0){let i=n.fftCount,o=Math.min(20,i),s=n.means[e].slice(i-o);r.push(Me.mean(s))}}),Me.mean(r)},N5=t=>t.fftCount>0?t.means.alpha2[t.fftCount-1]/t.means.alpha1[t.fftCount-1]:0,A5=t=>t.fftCount>0?t.means.theta[t.fftCount-1]/t.means.beta[t.fftCount-1]:0,D5=t=>t.fftCount>0?(t.means.alpha1[t.fftCount-1]+t.means.alpha2[t.fftCount-1])*.5/t.means.beta[t.fftCount-1]:0,R5=t=>t.fftCount>0?(t.means.alpha1[t.fftCount-1]+t.means.alpha2[t.fftCount-1])*.5/t.means.theta[t.fftCount-1]:0,C5=(t,e)=>{if(t.fftCount>0&&Array.isArray(e)){let r=t.slices.lowgamma[t.fftCount-1],n=[];return r.forEach((i,o)=>{e.lowgamma[0][o]>38&&e.lowgamma[0][o]<42&&n.push(i)}),Math.max(...n)}else return 0},F5=t=>{if(t.fftCount>0){let e=t.fftCount,r=20;e<r&&(r=e);let n=t.means.lowgamma.slice(e-r);return t.means.lowgamma[e-1]-Me.mean(n)}else return 0},L5=t=>{if(t.count>0){let e=t.count,r=40;e<r&&(r=e);let n=t.ratio.slice(e-r);return t.ratio[e-1]-Me.mean(n)}else return 0};M5=(t,e,r,n)=>{let i=0;n.fftCount++,n.fftTimes.push(e),n.ffts.push(t);for(let o in r){let s=t.slice(i,i+r[o][1].length);n.slices[o].push(s),n.means[o].push(s.reduce((a,l)=>a+l)/s.length),i+=r[o][1].length}},j5=(t,e,r,n)=>{t.forEach((i,o)=>{n[o].fftCount++,n[o].fftTimes.push(e),n[o].ffts.push(data);let s=0;for(let a in r){let l=fft.slice(s,s+r[a][1].length);coord.slices[a].push(l),coord.means[a].push(l.reduce((h,p)=>h+p)/l.length),s+=r[a][1].length}})}});function le(t,e,r,n){return new(r||(r=Promise))(function(i,o){function s(h){try{l(n.next(h))}catch(p){o(p)}}function a(h){try{l(n.throw(h))}catch(p){o(p)}}function l(h){var p;h.done?i(h.value):(p=h.value,p instanceof r?p:new r(function(m){m(p)})).then(s,a)}l((n=n.apply(t,e||[])).next())})}function Qe(t){if(!(this instanceof Qe))return new Qe(t);if(t&&(t instanceof Qe||t._bsontype==="ObjectID"))return t;if(this._bsontype="ObjectID",t!=null&&typeof t!="number"){var e=Qe.isValid(t);if(!e&&t!=null)throw new Error("Argument passed in must be a single String of 12 bytes or a string of 24 hex characters");if(e&&typeof t=="string"&&t.length===24)return Qe.createFromHexString(t);if(t==null||t.length!==12){if(t!=null&&typeof t.toHexString=="function")return t;throw new Error("Argument passed in must be a single String of 12 bytes or a string of 24 hex characters")}this.id=t}else this.id=this.generate(t)}function qt(t="struct",e={},r={_id:""},n={structType:"struct",_id:""}){var o;let i={_id:function(s=""){return`${s+Math.floor(Math.random()+Math.random()*Math.random()*1e16)}`}(t+"defaultId"),structType:t,ownerId:r==null?void 0:r._id,timestamp:Date.now(),parent:{structType:n==null?void 0:n.structType,_id:n==null?void 0:n._id}};return i.ownerId||delete i.ownerId,((o=i==null?void 0:i.parent)==null?void 0:o._id)||delete i.parent,Object.keys(e).length>0&&Object.assign(i,e),i}function xc(t,e={}){if(!go[t.tag]&&t.position&&(go[t.tag]=[t.position.x,t.position.y,t.position.z]),go[t.tag]){let r={channel:"",position:{x:go[t.tag][0],y:go[t.tag][1],z:go[t.tag][2]}};return Object.assign(e,r)}return Object.assign(e,t)}function V5(t=[],e=!0){let r=[];for(let n of t){let i=xi(n);r.push(i)}return e&&r.push(...Tp({channelDicts:t})),r}function kc(t=[],e={}){let r={scp:[],delta:[],theta:[],alpha1:[],alpha2:[],beta:[],lowgamma:[],highgamma:[]};return t.forEach(n=>r[n]=[]),Object.assign(e,r)}function xi(t="",e={},r={_id:""},n={structType:"struct",_id:""}){let i=kc(),o={tag:t,position:{x:0,y:0,z:0},count:0,times:[],raw:[],filtered:[],fftCount:0,fftTimes:[],ffts:[],slices:JSON.parse(JSON.stringify(i)),means:JSON.parse(JSON.stringify(i)),startTime:Date.now()},s=qt("eeg",o,r,n);return t&&xc(o,s),Object.assign(s,e)}function Op(t={0:xi("FP1"),1:xi("FP2")},e={},r={_id:""},n={structType:"struct",_id:""}){var s,a,l,h,p,m,y,w,b,N,O,I,R,J;let i=kc(),o=qt("coherence",{tag:((s=t[0])==null?void 0:s.tag)+"::"+((a=t[1])==null?void 0:a.tag),x0:(h=(l=t[0])==null?void 0:l.position)==null?void 0:h.x,y0:(m=(p=t[0])==null?void 0:p.position)==null?void 0:m.y,z0:(w=(y=t[0])==null?void 0:y.position)==null?void 0:w.z,x1:(N=(b=t[1])==null?void 0:b.position)==null?void 0:N.x,y1:(I=(O=t[1])==null?void 0:O.position)==null?void 0:I.y,z1:(J=(R=t[1])==null?void 0:R.position)==null?void 0:J.z,fftCount:0,fftTimes:[],ffts:[],slices:JSON.parse(JSON.stringify(i)),means:JSON.parse(JSON.stringify(i)),startTime:Date.now()},r,n);return Object.assign(o,e)}function Tp(t={channelDicts:[{ch:0,tag:"FP1",analyze:!1},{ch:1,tag:"FP2",analyze:!1}],taggedOnly:!0},e={},r={_id:""},n={structType:"struct",_id:""}){for(var i=[],o=1,s=0,a=0;a<t.channelDicts.length*(t.channelDicts.length+1)/2-t.channelDicts.length;a++){if(t.taggedOnly===!1||t.taggedOnly===!0&&t.channelDicts[s].tag!==null&&t.channelDicts[s+o].tag!==null&&t.channelDicts[s].tag!=="other"&&t.channelDicts[s+o].tag!=="other"&&t.channelDicts[s].analyze===!0&&t.channelDicts[s+o].analyze===!0){var l=xi(t.channelDicts[s].tag),h=xi(t.channelDicts[s+o].tag);i.push(Op({0:l,1:h},{},r,n))}++o+s===t.channelDicts.length&&(s++,o=1)}return i}function xp(t="",e={},r={_id:""},n={structType:"struct",_id:""}){let i={tag:t,position:{x:0,y:0,z:0},count:0,times:[],red:[],ir:[],ir2:[],ambient:[],ratio:[],temp:[],beat_detect:{beats:[],breaths:[],rir:[],rir2:[],drir_dt:[],localmins:[],localmaxs:[],val_dists:[],peak_dists:[],localmins2:[],localmaxs2:[],val_dists2:[],peak_dists2:[]},startTime:Date.now()},o=qt("fnirs",i,r,n);return t&&xc(i,o),Object.assign(o,e)}function R2(t="",e={},r={_id:""},n={structType:"struct",_id:""}){let i={tag:t,Ax:[],Ay:[],Az:[],Gx:[],Gy:[],Gz:[],startTime:Date.now()},o=qt("imu",i,r,n);return t&&xc(i,o),Object.assign(o,e)}function C2(t="",e={},r={_id:""},n={structType:"struct",_id:""}){let i=qt("eyetracker",{tag:t,count:0,times:[],x:[],y:[],smax:[],smay:[],startTime:Date.now()},r,n);return Object.assign(i,e)}function kp(t="",e={},r={_id:""},n={structType:"struct",_id:""}){let i=qt("ecg",{tag:t,count:0,times:[],raw:[],filtered:[],bpm:[],hrv:[],startTime:Date.now()},r,n);return Object.assign(i,e)}function F2(t="",e={},r={_id:""},n={structType:"struct",_id:""}){}function L2(t="",e={},r={_id:""},n={structType:"struct",_id:""}){let i=xp(t,r,n,e);return i.structType="ppg",i}function P2(t="",e={},r={_id:""},n={structType:"struct",_id:""}){let i=kp(t,r,n,e);return i.structType="hrv",i}function M2(t="",e={},r={_id:""},n={structType:"struct",_id:""}){let i=xi(t,r,n,e);return i.structType="emg",i}function j2(t="",e={},r={_id:""},n={structType:"struct",_id:""}){let i=qt("profile",{tag:t,name:"",username:"",firstName:"",lastName:"",email:"",sex:"",birthday:"",type:"",userRoles:[],id:""},r,n);return Object.assign(i,e)}function U2(t="",e={},r={_id:""},n={structType:"struct",_id:""}){let i=qt("authorization",{tag:t,authorizedId:"",authorizedName:"",authorizerId:"",authorizerName:"",authorizations:new Array,structs:new Array,excluded:new Array,groups:new Array,status:"PENDING",expires:!1,associatedAuthId:""},r,n);return Object.assign(i,e)}function B2(t="",e={},r={_id:""},n={structType:"struct",_id:""}){let i=qt("group",{tag:t,name:"",details:"",admins:new Array,peers:new Array,clients:new Array,users:new Array},r,n);return Object.assign(i,e)}function z2(t="",e={},r={_id:""},n={structType:"struct",_id:""}){let i=qt("dataInstance",{tag:t,title:"",author:"",expires:!1,type:"",data:new Array},r,n);return Object.assign(i,e)}function V2(t="",e={},r={_id:""},n={structType:"struct",_id:""}){let i=qt("event",{tag:t,event:"",author:"",startTime:"",endTime:"",grade:0,notes:"",attachments:new Array,users:new Array},r,n);return Object.assign(i,e)}function W2(t="",e={},r={_id:""},n={structType:"struct",_id:""}){let i=qt("chatroom",{tag:t,message:"",topic:"",author:"",attachments:new Array,comments:new Array,replies:new Array,users:new Array,audioChatActive:!1,videoChatActive:!1},r,n);return Object.assign(i,e)}function q2(t="",e={},r={_id:""},n={structType:"struct",_id:""}){let i=qt("comment",{tag:t,author:"",replyTo:"",message:"",rating:0,replies:new Array,users:new Array,attachments:new Array},r,n);return Object.assign(i,e)}function $2(t="",e={},r={_id:""},n={structType:"struct",_id:""}){let i=qt("notification",{tag:t,note:"",parentUserId:""},r,n);return Object.assign(i,e)}function H2(t="",e={},r={_id:""},n={structType:"struct",_id:""}){let i=qt("schedule",{tag:t,title:"",author:"",attachments:new Array,dates:new Array},r,n);return Object.assign(i,e)}function G2(t="",e={},r={_id:""},n={structType:"struct",_id:""}){let i=qt("date",{tag:t,timeSet:"",notes:"",recurs:"NEVER",attachments:new Array},r,n);return Object.assign(i,e)}function X5(t=[],e={scp:[.1,1],delta:[1,4],theta:[4,8],alpha1:[8,12],alpha2:[12,16],beta:[16,30],lowgamma:[30,45],highgamma:[45,100]}){let r={};return t.forEach((n,i)=>{for(let o in e)r[o]||(r[o]=[[],[]]),n>=e[o][0]&&n<=e[o][1]&&(r[o][0].push(n),r[o][1].push(i))}),r}function t6(t,e,r){let n=(e-t)/r,i=[],o=0;for(;o<e;)i.push(o),o+=n;return i}function hn(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function N2(t,e=!0){let r=(t=t.replace(/\/\*\*?/,"")).split("/");e&&(r=r.slice(0,r.length-1));let n=[t];return n.push(t+"/*"),n.push(t+"/**"),r.forEach((i,o)=>{let s=r.slice(0,o+1).join("/");s!=t&&(o===r.length-1&&n.push(s+"/*"),n.push(s+"/**"))}),n}var ks,Oc,Tc,Sp,bp,fl,Ep,Er,I2,hl,B5,z5,A2,D2,Ge,Ti,go,W5,mo,je,q5,$5,H5,G5,J5,Y5,K5,Z5,Q5,e6,J2,Y2,K2,Z2,r6,n6,X2,Wt,i6,Q2,Ip,eb=mt(()=>{ks=t=>(t?`${t}_`:"")+Math.floor(1e5*Math.random()),Oc=(t=Math,e=Date,r=16,n=i=>t.floor(i).toString(r))=>n(e.now()/1e3)+" ".repeat(r).replace(/./g,()=>n(t.random()*r));for(Tc=Math.floor(16777215*Math.random()),Sp=Qe.index=parseInt(16777215*Math.random(),10),bp=(typeof process=="undefined"||typeof process.pid!="number"?Math.floor(1e5*Math.random()):process.pid)%65535,fl=function(t){return!(t==null||!t.constructor||typeof t.constructor.isBuffer!="function"||!t.constructor.isBuffer(t))},Ep=[],Er=0;Er<256;Er++)Ep[Er]=(Er<=15?"0":"")+Er.toString(16);I2=new RegExp("^[0-9a-fA-F]{24}$"),hl=[];for(Er=0;Er<10;)hl[48+Er]=Er++;for(;Er<16;)hl[55+Er]=hl[87+Er]=Er++;B5=Qe;Qe.default=Qe,Qe.createFromTime=function(t){return t=parseInt(t,10)%4294967295,new Qe((e=8,((r=(r=t).toString(16)).length===e?r:"00000000".substring(r.length,e)+r)+"0000000000000000"));var e,r},Qe.createFromHexString=function(t){if(t===void 0||t!=null&&t.length!==24)throw new Error("Argument passed in must be a single String of 12 bytes or a string of 24 hex characters");for(var e="",r=0;r<24;)e+=String.fromCharCode(hl[t.charCodeAt(r++)]<<4|hl[t.charCodeAt(r++)]);return new Qe(e)},Qe.isValid=function(t){return t!=null&&(typeof t=="number"||(typeof t=="string"?t.length===12||t.length===24&&I2.test(t):t instanceof Qe||!!fl(t)||typeof t.toHexString=="function"&&(t.id instanceof _Buffer||typeof t.id=="string")&&(t.id.length===12||t.id.length===24&&I2.test(t.id))))},Qe.prototype={constructor:Qe,toHexString:function(){if(!this.id||!this.id.length)throw new Error("invalid ObjectId, ObjectId.id must be either a string or a Buffer, but is ["+JSON.stringify(this.id)+"]");if(this.id.length===24)return this.id;if(fl(this.id))return this.id.toString("hex");for(var t="",e=0;e<this.id.length;e++)t+=Ep[this.id.charCodeAt(e)];return t},equals:function(t){return t instanceof Qe?this.toString()===t.toString():typeof t=="string"&&Qe.isValid(t)&&t.length===12&&fl(this.id)?t===this.id.toString("binary"):typeof t=="string"&&Qe.isValid(t)&&t.length===24?t.toLowerCase()===this.toHexString():typeof t=="string"&&Qe.isValid(t)&&t.length===12?t===this.id:!(t==null||!(t instanceof Qe||t.toHexString))&&t.toHexString()===this.toHexString()},getTimestamp:function(){var t,e=new Date;return t=fl(this.id)?this.id[3]|this.id[2]<<8|this.id[1]<<16|this.id[0]<<24:this.id.charCodeAt(3)|this.id.charCodeAt(2)<<8|this.id.charCodeAt(1)<<16|this.id.charCodeAt(0)<<24,e.setTime(1e3*Math.floor(t)),e},generate:function(t){typeof t!="number"&&(t=~~(Date.now()/1e3)),t=parseInt(t,10)%4294967295;var e=Sp=(Sp+1)%16777215;return String.fromCharCode(t>>24&255,t>>16&255,t>>8&255,255&t,Tc>>16&255,Tc>>8&255,255&Tc,bp>>8&255,255&bp,e>>16&255,e>>8&255,255&e)}};z5=Symbol&&Symbol.for&&Symbol.for("nodejs.util.inspect.custom")||"inspect";Qe.prototype[z5]=function(){return"ObjectID("+this+")"},Qe.prototype.toJSON=Qe.prototype.toHexString,Qe.prototype.toString=Qe.prototype.toHexString;A2=Object.defineProperty,D2=(t,e)=>{for(var r in e)A2(t,r,{get:e[r],enumerable:!0})},Ge=(t,e,r)=>(((n,i,o)=>{i in n?A2(n,i,{enumerable:!0,configurable:!0,writable:!0,value:o}):n[i]=o})(t,typeof e!="symbol"?e+"":e,r),r),Ti={};D2(Ti,{AuthorizationStruct:()=>U2,ChatroomStruct:()=>W2,CoherenceMap:()=>Tp,CoherenceStruct:()=>Op,CommentStruct:()=>q2,DataStruct:()=>z2,DateStruct:()=>G2,ECGStruct:()=>kp,EDAStruct:()=>F2,EEGCoordinates:()=>V5,EEGStruct:()=>xi,EMGStruct:()=>M2,EventStruct:()=>V2,EyeTrackerStruct:()=>C2,FNIRSStruct:()=>xp,FrequencyBandsStruct:()=>kc,GroupStruct:()=>B2,HRVStruct:()=>P2,IMUStruct:()=>R2,NotificationStruct:()=>$2,PPGStruct:()=>L2,ProfileStruct:()=>j2,ScheduleStruct:()=>H2,Struct:()=>qt,eegCoordinates:()=>go,setCoordinate:()=>xc,structRegistry:()=>W5});go={FP1:[-21.2,66.9,12.1],FPZ:[1.4,65.1,11.3],FP2:[24.3,66.3,12.5],AF7:[-41.7,52.8,11.3],AF3:[-32.7,48.4,32.8],AFZ:[1.8,54.8,37.9],AF4:[35.1,50.1,31.1],AF8:[43.9,52.7,9.3],F5:[-51.4,26.7,24.7],F3:[-39.7,25.3,44.7],F1:[-22.1,26.8,54.9],FZ:[0,26.8,60.6],F2:[23.6,28.2,55.6],F4:[41.9,27.5,43.9],F6:[52.9,28.7,25.2],F7:[-52.1,28.6,3.8],F8:[53.2,28.4,3.1],FC5:[-59.1,3,26.1],FC3:[-45.5,2.4,51.3],FC1:[-24.7,.3,66.4],FCZ:[1,1,72.8],FC2:[26.1,3.2,66],FC4:[47.5,4.6,49.7],FC6:[60.5,4.9,25.5],FT9:[-53.8,-2.1,-29.1],FT7:[-59.2,3.4,-2.1],FT8:[60.2,4.7,-2.8],FT10:[55,-3.6,-31],T7:[-65.8,-17.8,-2.9],T5:[-61.5,-65.3,1.1],T3:[-70.2,-21.3,-10.7],T4:[71.9,-25.2,-8.2],T6:[59.3,-67.6,3.8],T8:[67.4,-18.5,-3.4],C5:[-63.6,-18.9,25.8],C3:[-49.1,-20.7,53.2],C1:[-25.1,-22.5,70.1],CZ:[.8,-21.9,77.4],C2:[26.7,-20.9,69.5],C4:[50.3,-18.8,53],C6:[65.2,-18,26.4],CP5:[-61.8,-46.2,22.5],CP3:[-46.9,-47.7,49.7],CP1:[-24,-49.1,66.1],CPZ:[.7,-47.9,72.6],CP2:[25.8,-47.1,66],CP4:[49.5,-45.5,50.7],CP6:[62.9,-44.6,24.4],TP9:[-73.6,-46.7,-4],TP7:[-63.6,-44.7,-4],TP8:[64.6,-45.4,-3.7],TP10:[74.6,-47.4,-3.7],P9:[-50.8,-51.3,-37.7],P7:[-55.9,-64.8,0],P5:[-52.7,-67.1,19.9],P3:[-41.4,-67.8,42.4],P1:[-21.6,-71.3,52.6],PZ:[.7,-69.3,56.9],P2:[24.4,-69.9,53.5],P4:[44.2,-65.8,42.7],P6:[54.4,-65.3,20.2],P8:[56.4,-64.4,.1],P10:[51,-53.9,-36.5],PO7:[-44,-81.7,1.6],PO3:[-33.3,-84.3,26.5],POZ:[0,-87.9,33.5],PO4:[35.2,-82.6,26.1],PO8:[43.3,-82,.7],O1:[-25.8,-93.3,7.7],OZ:[.3,-97.1,8.7],O2:[25,-95.2,6.2]};W5={Struct:qt,EEGStruct:xi,FNIRSStruct:xp,CoherenceStruct:Op,CoherenceMap:Tp,FrequencyBandsStruct:kc,IMUStruct:R2,EyeTrackerStruct:C2,ECGStruct:kp,EDAStruct:F2,PPGStruct:L2,HRVStruct:P2,EMGStruct:M2,ProfileStruct:j2,AuthorizationStruct:U2,GroupStruct:B2,DataStruct:z2,EventStruct:V2,ChatroomStruct:W2,CommentStruct:q2,NotificationStruct:$2,ScheduleStruct:H2,DateStruct:G2};D2({},{bandpassWindow:()=>t6,get40HzGamma:()=>Y5,getAlphaBetaRatio:()=>G5,getAlphaRatio:()=>$5,getAlphaThetaRatio:()=>J5,getCoherenceScore:()=>q5,getHEGRatioScore:()=>Z5,getLowGammaScore:()=>K5,getThetaBetaRatio:()=>H5,mapCoherenceData:()=>e6,mapFFTData:()=>Q5,splitFrequencyBands:()=>X5});mo=class{constructor(){}static genSineWave(t=20,e=1,r=1,n=512,i=0,o=1){for(var s=[],a=[],l=1/n,h=0;h<r;h+=l){var p=Math.sin(2*Math.PI*t*h)*e;p+=Math.sin(2*Math.PI*i*h)*o,s.push(p),a.push(h)}return[a,s]}static getSineAmplitude(t=20,e=1,r=0,n=0){return Math.sin(this.TWO_PI*t*r+n)*e}static mean(t){return t.reduce((e,r)=>r+e)/t.length}static mode(t){return t.sort((e,r)=>t.filter(n=>n===e).length-t.filter(n=>n===r).length).pop()}static std(t,e){let r=e;e||(r=this.mean(t));let n=0;for(let i=0;i<t.length;i++){let o=t[i]-r;n+=o*o}return Math.sqrt(n/t.length)}static relError(t=[],e=[],r=!0){if(t.length!==e.length)throw new Error("Input arrays of same length!");let n=t.length,i=[];for(let o=0;o<n;o++){let s=(t[o]-e[o])/t[o];r&&(s=Math.abs(s)),i.push(s)}return i}static informationEntropy(t=[]){let e=[],r=t.length;for(let n=0;n<r;n++){let i=t[n]*Math.log(t[n]);isNaN(i)&&(i=0),e.push(i)}return e}static zscore(t){let e=this.mean(t),r=this.std(t,e),n=[];for(let i=0;i<t.length;i++)n.push((t[i]-e)/r);return n}static variance(t){var e=this.mean(t);return t.reduce((r,n)=>r+Jg(n-e,2),0)/t.length}static dot(t,e){for(var r=0,n=0;n<t.length;n++)r+=t[n]*e[n];return r}static cross3D(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}static magnitude(t){var e=0;return t.forEach(r=>{e+=r*r}),Math.sqrt(e)}static distance(t,e){var r=0;return t.forEach((n,i)=>{r+=(e[i]-n)*(e[i]-n)}),Math.sqrt(r)}static normalize(t){var e;e=this.magnitude(t);var r=[];return t.forEach((n,i)=>{r.push(n*e)}),r}static quadraticFormula(t,e,r){let n=Math.sqrt(e*e-4*t*r);if(!isNaN(n))return["complex","complex"];let i=1/(2*t);if(n===0)return[e*i];let o=-e;return[(o+n)*i,(o-n)*i]}static newtonsMethod(t=o=>Math.pow(o,5)+o*o-o-.2,e=0,r=1,n=.01,i=10){let o=[];for(let s=0;s<i;s++){let a=Math.random()*(r-e),l=t(a),h=t(a+n),p=(h-l)/n,m=a+n;for(;Math.abs(p)>n;){let b=m+-l/N;l=h,h=t(b);let N=(h-l)/(b-m)}let y,w=o.find((b,N)=>{if(Math.abs(xn1-b)<n)return y=N,!0});w?o[y]=.5*(xn1+w):o.push(xn1)}return o}static makeVec(t,e){var r=[];return t.forEach((n,i)=>{r.push(e[i]-n)}),r}static transpose(t){return t[0].map((e,r)=>t.map(n=>n[r]))}static matmul(t,e){for(var r=t.length,n=t[0].length,i=(e.length,e[0].length),o=new Array(r),s=0;s<r;++s){o[s]=new Array(i);for(var a=0;a<i;++a){o[s][a]=0;for(var l=0;l<n;++l)o[s][a]+=t[s][l]*e[l][a]}}return o}static matscale(t,e){let r=[];for(var n=0;n<t.length;n++){r[n]=[];for(let i=0;i<t[0].length;i++)r[n][i]=t[n][i]*e}return r}static matadd(t,e){let r=[];for(let i=0;i<t.length;i++){r[i]=[];for(var n=0;n<t[0].length;n++)r[i][n]=t[i][n]+e[i][n]}return r}static matsub(t,e){let r=[];for(let i=0;i<t.length;i++){r[i]=[];for(var n=0;n<t[0].length;n++)r[i][n]=t[i][n]-e[i][n]}return r}static histogram(t=[],e=1,r){let n=[...t];n.sort(function(l,h){return l-h});let i=Math.min(...n);if(typeof r=="number"){let l=Math.max(...n);e=Math.abs((l-i)/(r-1))}let o=i,s=[],a=[];for(let l=0;l<n.length;l++){let h=e*o;if(n[l]>i+h){o++,h+=e;let p=i+h+.5*h;s.push(p),a.push(0)}a[a.length-1]++}return[s,a]}static normalDistribution(t=[],e=!0,r=1e-4){let n=this.mean(t),i=this.variance(t),o=t.length,s=[],a=1/(this.TWO_PI*i),l=1/i,h=0;for(let p=0;p<o;p++){let m=Math.exp(-.5*Math.pow((t[p]-n)*l,2))*a;m<r&&(m=0),s.push(m),h+=m}if(e){let p=1/h;s=s.map(m=>m*p)}return s}static expectedValue(t=[],e=this.normalDistribution(t)){return t.reduce((r,n,i)=>r+n*e[i])}static originMoment(t=[],e=this.normalDistribution(t),r=1){return t.reduce((n,i,o)=>n+Math.pow(i,r)*e[o])}static centralMoment(t=[],e=this.normalDistribution(t),r=1){let n=this.mean(t);return t.reduce((i,o,s)=>i+Math.pow(o-n,r)*e[s]/t.length)}static linearDiscriminantAnalysis(t=[],e=[]){let r=this.mean(t),n=this.mean(e),i=this.cov1d(t,e),o=this.normalDistribution(t),s=[];for(let a=0;a<t.length;a++)s.push(x[a]*i*n-.5*r*i*n+Math.log10(o[a]));return s}static conv1D(t=[],e=[1/3,1/3,1/3],r=Math.floor(.5*e.length)){let n=[],i=1/e.length;if(r>0){let a=new Array(r).fill(0);t=[...a,...t,...a]}let o=Math.floor(.5*e.length),s=t.length-e.length+o;for(let a=o;a<s;a++){let l=0;for(let h=0;h<e.length;h++)l+=t[a-o]*e[h];n.push(l*i)}return n}static conv2D(t=[[],[],[]],e=[[],[],[]],r=0){let n,i=new Array(t.length-Math.ceil(.5*e.length)).fill([]),o=mo.transpose(o);if(r>0){let N=new Array(r).fill(0);n=mo.transpose(t);for(let O=0;O<n.length;O++)n[O]=[...N,...n[O],...N];t=mo.transpose(n);for(let O=0;O<t.length;O++)t[O]=[...N,...t[O],...N]}let s,a=Math.floor(.5*e[0].length),l=Math.floor(.5*o[0].length),h=t[0].length-e[0].length+a,p=n[0].length-o[0].length+l,m=1/(e[0].length*o[0].length),y=h*p,w=a,b=l;for(;w<y;){let N=0;s=w%t[0].length,s===0&&b++;for(let O=0;O<e[0].length;O++){for(let I=0;I<o[0].length;O++)N+=t[b-l+I][s-a+O]*e[I][O];i[b].push(N*m)}w++}return i}static cov2d(t){var e=this.transpose(t),r=[],n=[],i=[];t.forEach((w,b)=>{n.push(this.mean(w))}),e.forEach((w,b)=>{i.push(this.mean(w))}),t.forEach((w,b)=>{r.push([]);for(var N=0;N<w.length;N++)r[b].push((t[b][N]-n[b])*(t[b][N]-i[N])/(w.length-1))});for(var o=this.transpose(r),s=r.length,a=r[0].length,l=(o.length,o[0].length),h=new Array(s),p=0;p<s;++p){h[p]=new Array(l);for(var m=0;m<l;++m){h[p][m]=0;for(var y=0;y<a;++y)h[p][m]+=r[p][y]*o[y][m]/(t[0].length-1)}}return h}static cov1d(t=[],e=[]){return this.cov2d([t,e])}static cov3d(t=[],e=[],r=[]){return[[this.cov1d(t,t),this.cov1d(t,e),this.cov1d(t,r)],[this.cov1d(e,t),this.cov1d(e,e),this.cov1d(e,r)],[this.cov1d(r,t),this.cov1d(r,e),this.cov1d(r,r)]]}static covNd(t=[]){let e=[];t.forEach((r,n)=>{e.push([]),t.forEach((i,o)=>{e[n].push(this.cov1d(r,i))})})}static eigens2x2(t=[[1,2],[3,4]]){let e=t[0][0]*t[1][1]-t[0][1]*t[1][0],r=.5*(t[0][0]+t[1][1]),n=Math.sqrt(r*r-e);return[r+n,r-n]}static eigenvectors2x2(t=[[1,2],[3,4]],e=[1,2]){let r=[-t[0][1],t[0][0]-e[0]];r[0]===0&&r[1]===0&&(r[0]=t[1][1]-e[0],r[1]=-t[1][0]);let n=[-t[0][1],t[0][0]-e[1]];return n[0]===0&&n[1]===0&&(n[0]=t[1][1]-e[1],n[1]=-t[1][0]),[r,n]}static fastpca2d(t,e){let r=this.cov1d(t,e),n=this.eigens2x2(r);n[1]>n[0]&&n.reverse();let i=this.eigenvectors2x2(r,n);return console.log(n,i),[n,i]}static crosscorrelation(t,e){var r=[...e,...Array(e.length).fill(0)],n=this.mean(t),i=this.mean(e),o=t.reduce((m,y)=>m+Math.pow(y-n,2));o=Math.sqrt(o);for(var s=e.reduce((m,y)=>m+Math.pow(y-n,2)),a=1/(o*(s=Math.sqrt(s))),l=new Array(t.length).fill(0),h=0;h<t.length;h++){var p=t.reduce((m,y,w)=>m+(y-n)*(r[h+w]-i));l[h]=p*a}return l}static autocorrelation(t){for(var e=[...t,...Array(t.length).fill(0)],r=this.mean(t),n=t.reduce((l,h)=>l+Math.pow(h-r,2)),i=1/((n=Math.sqrt(n))*n),o=new Array(t.length).fill(0),s=0;s<t.length;s++){var a=t.reduce((l,h,p)=>l+(h-r)*(e[s+p]-r));o[s]=a*i}return o}static correlograms(t=[[],[]]){var e=[];return t.forEach((r,n)=>{t.forEach((i,o)=>{o>=n&&e.push(mo.crosscorrelation(r,i))})}),e}static sma(t=[],e){for(var r=[],n=0;n<t.length;n++)if(n==0)r.push(t[0]);else if(n<e){var i=t.slice(0,n+1);r.push(i.reduce((o,s)=>s+o)/(n+1))}else i=t.slice(n-e,n),r.push(i.reduce((o,s)=>s+o)/e);return r}static sum(t=[]){return t.length>0?t.reduce((e,r)=>r+e):0}static reduceArrByFactor(t,e=2){return t.filter((r,n)=>n%e==0)}static makeArr(t,e,r){for(var n=[],i=(e-t)/(r-1),o=0;o<r;o++)n.push(t+i*o);return n}static interpolateArray(t,e,r=1){var n,i,o=new Array,s=new Number((t.length-1)/(e-1));o[0]=t[0];for(var a=1;a<e-1;a++){var l=a*s,h=new Number(Math.floor(l)).toFixed(),p=new Number(Math.ceil(l)).toFixed(),m=l-h;o[a]=(n=t[h],i=t[p],(n+(i-n)*m)*r)}return o[e-1]=t[t.length-1],o}static isExtrema(t,e="peak"){let r=[...t];if(r.length%2==0&&r.pop(),t.length>1){let n=!0;for(let i=0;i<r.length;i++){let o=r[i];if(e==="peak"){if(i<Math.floor(.5*r.length)&&o>=r[Math.floor(.5*r.length)]){n=!1;break}if(i>Math.floor(.5*r.length)&&o>=r[Math.floor(.5*r.length)]){n=!1;break}}else if(e==="valley"){if(i<Math.floor(.5*r.length)&&o<=r[Math.floor(.5*r.length)]){n=!1;break}if(i>Math.floor(.5*r.length)&&o<=r[Math.floor(.5*r.length)]){n=!1;break}}else{if(i<Math.floor(.5*r.length)&&o<=r[Math.floor(.5*r.length)]){n=!1;break}if(i>Math.floor(.5*r.length)&&o<=r[Math.floor(.5*r.length)]){n=!1;break}}}if(e!=="peak"&&e!=="valley"&&n===!1){n=!0;for(let i=0;i<r.length;i++){let o=r[i];if(i<Math.floor(.5*r.length)&&o>=r[Math.floor(.5*r.length)]){n=!1;break}if(i>Math.floor(.5*r.length)&&o>=r[Math.floor(.5*r.length)]){n=!1;break}}}return n}}static isCriticalPoint(t,e="peak"){let r=[...t];if(r.length%2==0&&r.pop(),t.length>1){let n=!0;for(let i=0;i<r.length;i++){let o=r[i];if(e==="peak"){if(i<.5*r.length&&o<=0){n=!1;break}if(i>.5*r.length&&o>0){n=!1;break}}else if(e==="valley"){if(i<.5*r.length&&o>=0){n=!1;break}if(i>.5*r.length&&o<0){n=!1;break}}else{if(i<.5*r.length&&o>=0){n=!1;break}if(i>.5*r.length&&o<0){n=!1;break}}}if(e!=="peak"&&e!=="valley"&&n===!1){n=!0;for(let i=0;i<r.length;i++){let o=r[i];if(i<.5*r.length&&o<=0){n=!1;break}if(i>.5*r.length&&o>0){n=!1;break}}}return n}}static getPeakThreshold(t,e,r){let n,i=t.filter((o,s)=>{if(e.indexOf(s)>-1)return!0});return n=r===0?this.mean(i):.5*(r+this.mean(i)),n}static column(t,e){let r=new Array(t.length).fill(0).map(()=>new Array(1).fill(0));for(let n=0;n<t.length;n++)r[n][0]=t[n][e];return r}static flatten_vector(t){let e=[];for(let r=0;r<t.length;r++)e[r]=t[r][0];return e}static squared_difference(t,e){let r=0;for(let n=0;n<t.length;n++)r+=Math.pow(t[n]-e[n],2);return r}static shift_deflate(t,e,r){let n=Math.sqrt(this.matmul(this.transpose(r),r)),i=this.matscale(r,1/n),o=this.matscale(this.matmul(i,this.transpose(i)),e);return this.matsub(t,o)}static eigenvalue_of_vector(t,e){return ev=this.matmul(this.matmul(this.transpose(e),t),e),ev}static power_iteration(t,e=1e-5,r=1e3){let n=t.length,i=new Array(n).fill(0).map(()=>new Array(1).fill(Math.sqrt(n))),o=this.eigenvalue_of_vector(t,i),s=1,a=0;for(;s>e&&a<r;){let l=JSON.parse(JSON.stringify(o)),h=this.matmul(t,i);i=this.normalize(h),o=this.eigenvalue_of_vector(t,i),s=Math.abs(o-l),a++}return[o,i]}static eigens(t,e=1e-4,r=1e3){let n=[],i=[];for(let o=0;o<t.length;o++){let s=this.power_iteration(t,e,r),a=s[0],l=s[1];n[o]=a,i[o]=this.flatten_vector(l),t=this.shift_deflate(t,a,l)}return[n,i]}static pca(t,e=1e-5){let r=t.length,n=new Array(r),i=new Array(r),o=this.transpose(t);for(n[0]=this.column(t,0);espilon>e;){i[0]=this.matmul(o,n[0]);let s=this.matmul(this.transpose(n[0]),n[0]);i[0]=this.matscale(i[0],1/s);let a=Math.sqrt(this.matmul(this.transpose(i[0]),i[0]));i[0]=this.matscale(i[0],1/a);let l=this.matmul(t,i[0]),h=this.matmul(this.transpose(i[0]),i[0]);l=this.matscale(l,1/h),this.squared_difference(n[0],l),n[0]=JSON.parse(JSON.stringify(l))}return this.matmul(this.transpose(n[0]),n[0])}static p300(t=[],e=[],r=[],n=256){let i=Math.floor(n/10),o=this.sma(e,i),s=this.peakDetect(o,"peak",i),a=this.mean(o),l=this.std(o,a),h=0,p=[];return s.length>0&&t.forEach((m,y)=>{for(;r[s[h]]<m+200&&(h++,s[h]););let w=0,b=[];for(;r[s[h+w]]<m+600&&(b.push(h+w),w++,s[h+w]););if(b.length>1){let N=[];b.forEach(R=>{N.push(o[s[R]])});let O=Math.max(...N),I=b[N.indexOf(O)];p.push({event_timestamp:m,event_index:y,peak_timestamp:r[[s[I]]],signal_index:[s[I]],signal_amplitude:e[[s[I]]],zscore:(o[s[I]]-a)/l})}else b.length===1&&p.push({event_timestamp:m,event_index:y,peak_timestamp:r[s[b[0]]],signal_index:s[b[0]],signal_amplitude:e[[s[b[0]]]],zscore:(o[s[b[0]]]-a)/l})}),p}},je=mo;Ge(je,"TWO_PI",2*Math.PI),Ge(je,"C",299792458),Ge(je,"G",66743e-15),Ge(je,"h",662607015e-42),Ge(je,"R",8314.32),Ge(je,"Ra",287),Ge(je,"H",69.3),Ge(je,"kbar",1054571817e-43),Ge(je,"kB",1380649e-29),Ge(je,"ke",89875517923e-1),Ge(je,"me",91093837015e-41),Ge(je,"mp",167262192369e-38),Ge(je,"mn",167492749804e-38),Ge(je,"P0",101325),Ge(je,"T0",288.15),Ge(je,"p0",1.225),Ge(je,"Na",60220978e16),Ge(je,"y",1.405),Ge(je,"M0",28.96643),Ge(je,"g0",9.80665),Ge(je,"Re",6378100),Ge(je,"B",1458e-9),Ge(je,"S",110.4),Ge(je,"Sigma",365e-12),Ge(je,"imgkernels",{edgeDetection:[[-1,-1,-1],[-1,8,-1],[-1,-1,-1]],boxBlur:[[1/9,1/9,1/9],[1/9,1/9,1/9],[1/9,1/9,1/9]],sobelLeft:[[1,0,-1],[2,0,-2],[1,0,-1]],sobelRight:[[-1,0,1],[-2,0,2],[-1,0,1]],sobelTop:[[1,2,1],[0,0,0],[-1,-2,-1]],sobelBottom:[[-1,2,1],[0,0,0],[1,2,1]],identity:[[0,0,0],[0,1,0],[0,0,0]],gaussian3x3:[[1,2,1],[2,4,2],[1,2,1]],guassian7x7:[[0,0,0,5,0,0,0],[0,5,18,32,18,5,0],[0,18,64,100,64,18,0],[5,32,100,100,100,32,5],[0,18,64,100,64,18,0],[0,5,18,32,18,5,0],[0,0,0,5,0,0,0]],emboss:[[-2,-1,0],[-1,1,1],[0,1,2]],sharpen:[[0,-1,0],[-1,5,-1],[0,-1,0]]}),Ge(je,"integral",(t=n=>n,e=[],r=.01)=>{let n=0;for(let i=e[0];i<e[1];i+=r)n+=t(i)*r;return n}),Ge(je,"dintegral",(t=(i,o)=>i+o,e=[[],[]],r=.01,n=r)=>{let i=0;for(let o=e[0][0]+r;o<e[0][1];o+=r)for(let s=e[1][0]+n;s<e[1][1];s+=n)i+=t(o,s)*r*n;return i}),Ge(je,"tintegral",(t=(o,s,a)=>o+s+a,e=[[],[],[]],r=.01,n=r,i=r)=>{let o=0;for(let s=e[0][0]+r;s<e[0][1];s+=r)for(let a=e[1][0]+n;a<e[1][1];a+=n)for(let l=e[2][0]+i;l<e[2][1];l+=i)o+=t(s,a,l)*r*n*i;return o}),Ge(je,"pintegral",(t=n=>n,e=[],r=.01)=>{let n,i,o=0;for(let s=e[0];s<e[1];s+=r)n=i,i=t(s),n&&(o+=mo.distance([0,n],[r,i]));return o}),Ge(je,"peakDetect",(t,e="peak",r=49)=>{let n=Math.floor(.5*r),i=[];for(let o=0;o<t.length-r;o++)mo.isExtrema(t.slice(o,o+r),e)&&i.push(o+n-1);return i});q5=(t,e="alpha1")=>{let r=[];return Array.isArray(t)||(t=[t]),t.forEach(n=>{if(n.fftCount>0){let i=n.fftCount,o=Math.min(20,i),s=n.means[e].slice(i-o);r.push(je.mean(s))}}),je.mean(r)},$5=t=>t.fftCount>0?t.means.alpha2[t.fftCount-1]/t.means.alpha1[t.fftCount-1]:0,H5=t=>t.fftCount>0?t.means.theta[t.fftCount-1]/t.means.beta[t.fftCount-1]:0,G5=t=>t.fftCount>0?.5*(t.means.alpha1[t.fftCount-1]+t.means.alpha2[t.fftCount-1])/t.means.beta[t.fftCount-1]:0,J5=t=>t.fftCount>0?.5*(t.means.alpha1[t.fftCount-1]+t.means.alpha2[t.fftCount-1])/t.means.theta[t.fftCount-1]:0,Y5=(t,e)=>{if(t.fftCount>0&&Array.isArray(e)){let r=t.slices.lowgamma[t.fftCount-1],n=[];return r.forEach((i,o)=>{e.lowgamma[0][o]>38&&e.lowgamma[0][o]<42&&n.push(i)}),Math.max(...n)}return 0},K5=t=>{if(t.fftCount>0){let e=t.fftCount,r=20;e<r&&(r=e);let n=t.means.lowgamma.slice(e-r);return t.means.lowgamma[e-1]-je.mean(n)}return 0},Z5=t=>{if(t.count>0){let e=t.count,r=40;e<r&&(r=e);let n=t.ratio.slice(e-r);return t.ratio[e-1]-je.mean(n)}return 0};Q5=(t,e,r,n)=>{let i=0;n.fftCount++,n.fftTimes.push(e),n.ffts.push(t);for(let o in r){let s=t.slice(i,i+r[o][1].length);n.slices[o].push(s),n.means[o].push(s.reduce((a,l)=>a+l)/s.length),i+=r[o][1].length}},e6=(t,e,r,n)=>{t.forEach((i,o)=>{n[o].fftCount++,n[o].fftTimes.push(e),n[o].ffts.push(data);let s=0;for(let a in r){let l=fft.slice(s,s+r[a][1].length);coord.slices[a].push(l),coord.means[a].push(l.reduce((h,p)=>h+p)/l.length),s+=r[a][1].length}})};J2=class{constructor(e=!1,r=!1){hn(this,"addFunc",(n=null,i=null,o=!0)=>{var s=null;return i!==null&&(n==null?this.listeners.forEach((a,l)=>{s=a.listener.addFunc(i),a.listener.running==0&&o==1&&a.listener.start()}):this.listeners.find((a,l)=>{a.key===n&&(s=a.listener.addFunc(i),a.listener.running==0&&o==1&&a.listener.start())})),s}),hn(this,"getFuncs",n=>n?this.listeners.find((i,o)=>{if(i.key===n)return!0}).onchangeFuncs:void 0),hn(this,"removeFuncs",(n=null,i=null,o=!1)=>{n==null?this.listeners.forEach((s,a)=>{s.listener.removeFuncs(i)}):this.listeners.find((s,a)=>{s.key===n&&(s.listener.removeFuncs(i),s.listener.onchangeFuncs.length!==0&&o!==!0||s.listener.stop())})}),this.debug=e,this.listeners=[],this.synchronous=r,this.syncInterval="FRAMERATE",this.syncAnim=void 0,r===!0&&this.startSync()}addListener(e=null,r,n,i,o,s=this.debug,a=!0){if(r!==void 0){var l=e;l==null&&(l=Math.floor(1e5*Math.random())),this.synchronous===!0&&(a=!1);var h={key:l,listener:new Y2(r,n,i,o,s,a)};this.listeners.push(h)}else console.error("You must assign an object")}getListener(e){return this.listeners.find((r,n)=>{if(r.key===e)return!0})}hasKey(e){var r=!1;return this.listeners.forEach((n,i)=>{if(n.key===e)return r=!0,!0}),r}getKeyIndices(e){var r=[];return this.listeners.find((n,i)=>{n.key===e&&r.push(i)}),r}onchange(e=null,r=null){e==null?this.listeners.forEach((n,i)=>{n.listener.onchange=r}):this.listeners.find((n,i)=>{n.name===e&&(n.listener.onchange=r)})}stop(e=null){this.synchronous&&this.stopSync(),e==null?this.listeners.forEach((r,n)=>{r.listener.stop()}):this.listeners.find((r,n)=>{r.name===e&&r.listener.stop()})}start(e=null){this.synchronous&&this.stopSync(),e==null?this.listeners.forEach((r,n)=>{r.listener.start()}):this.listeners.find((r,n)=>{r.name===e&&r.listener.start()})}startSync(){if(this.synchronous===!1){this.synchronous=!0,this.stop();let e=()=>{this.synchronous===!0&&(this.listeners.forEach(r=>{r.listener.check()}),this.syncInterval==="FRAMERATE"?this.syncAnim=requestAnimationFrame(e):typeof this.syncInterval=="number"&&setTimeout(e,this.syncInterval))};e()}}stopSync(){this.synchronous=!1,this.syncAnim&&cancelAnimationFrame(this.syncAnim)}remove(e=null){if(e==null)this.listeners.forEach(n=>{n.listener.stop()}),this.listeners.splice(0,this.listeners.length);else{var r=[];this.listeners.forEach((n,i)=>{n.key===e&&r.push(i)}),r.reverse().forEach(n=>{this.listeners[n].listener.stop(),this.listeners.splice(n,1)})}}},Y2=class{constructor(e,r="__ANY__",n=this.onchange,i="FRAMERATE",o=!1,s=!0){hn(this,"onchange",a=>{console.log(this.propName," changed from: ",this.propOld," to: ",this.object[this.propName])}),hn(this,"addFunc",(a=null)=>{let l=0;return a!==null&&(this.onchangeFuncs.push({idx:this.funcs,onchange:a}),l=this.funcs,this.funcs++),l}),hn(this,"onchangeMulti",a=>{[...this.onchangeFuncs].forEach((l,h)=>{this.debug===!0&&console.log(l.onchange),l.onchange(a)})}),hn(this,"setListenerRef",a=>{a==="__ANY__"||a==null?this.propOld=JSON.stringifyFast(this.object):Array.isArray(this.object[a])?this.propOld=JSON.stringifyFast(this.object[a].slice(this.object[a].length-20)):typeof this.object[a]=="object"?this.propOld=JSON.stringifyFast(this.object[a]):typeof this.object[a]=="function"?this.propOld=this.object[a].toString():this.propOld=this.object[a],this.debug===!0&&console.log("propname",a,", new assignment: ",this.propOld)}),hn(this,"check",()=>{let a=!1;if(this.propName==="__ANY__"||this.propName===null||this.propName===void 0)this.propOld!==JSON.stringifyFast(this.object)&&(this.debug===!0&&console.log("onchange: ",this.onchange),this.onchange(this.object),this.onchangeFuncs.length>0&&this.onchangeMulti(this.object),this.setListenerRef(this.propName),a=!0);else if(Array.isArray(this.object[this.propName]))this.propOld!==JSON.stringifyFast(this.object[this.propName].slice(this.object[this.propName].length-20))&&(this.debug===!0&&console.log("onchange: ",this.onchange),this.onchange(this.object[this.propName]),this.onchangeFuncs.length>0&&this.onchangeMulti(this.object[this.propName]),this.setListenerRef(this.propName),a=!0);else if(typeof this.object[this.propName]=="object"){let l=JSON.stringifyFast(this.object[this.propName]);this.propOld!==l&&(this.debug===!0&&console.log("onchange: ",this.onchange),this.onchange(this.object[this.propName]),this.onchangeFuncs.length>0&&this.onchangeMulti(this.object[this.propName]),this.setListenerRef(this.propName),a=!0)}else typeof this.object[this.propName]=="function"?this.propOld!==this.object[this.propName].toString()&&(this.debug===!0&&console.log("onchange: ",this.onchange),this.onchange(this.object[this.propName].toString()),this.onchangeFuncs.length>0&&this.onchangeMulti(this.object[this.propName].toString()),this.setListenerRef(this.propName),a=!0):this.object[this.propName]!==this.propOld&&(this.debug===!0&&console.log("onchange: ",this.onchange),this.onchange(this.object[this.propName]),this.onchangeFuncs.length>0&&this.onchangeMulti(this.object[this.propName]),this.setListenerRef(this.propName),a=!0);return this.running===!0&&(this.debug===!0&&console.log("checking",this.object,this.propName),this.interval==="FRAMERATE"?typeof window=="undefined"?setTimeout(()=>{this.check()},16):this.checker=requestAnimationFrame(this.check):setTimeout(()=>{this.check()},this.interval)),a}),this.debug=o,this.onchange=n,this.onchangeFuncs=[],this.object=e,this.propName=r,this.propOld=void 0,this.setListenerRef(r),this.running=s,this.funcs=0,this.interval,i<10?(this.interval=10,console.log("Min recommended interval set: 10ms")):this.interval=i,s===!0&&(typeof window=="undefined"?setTimeout(()=>{this.check()},60):this.checker=requestAnimationFrame(this.check))}removeFuncs(e=null){let r=0;e===null?this.onchangeFuncs=[]:this.onchangeFuncs.find((n,i)=>{if(n.idx===e)return r=i,!0})!==void 0&&this.onchangeFuncs.splice(r,1)}start(){this.running=!0,typeof window=="undefined"?setTimeout(()=>{this.check()},16):this.checker=requestAnimationFrame(this.check)}stop(){this.running=!1,cancelAnimationFrame(this.checker)}};JSON.stringifyFast===void 0&&(JSON.stringifyFast=function(){let t=new Map,e=[],r=["this"];function n(i,o){let s;if(o!=null)if(typeof o=="object"){let a=o.constructor.name;i&&a==="Object"&&function(h,p){var m=e.length-1;if(e[m]){var y=e[m];if(typeof y=="object")if(y[h]===p||m===0)r.push(h),e.push(p.pushed);else for(;m-->=0;){if(typeof(y=e[m])=="object"&&y[h]===p){m+=2,e.length=m,r.length=m,--m,e[m]=p,r[m]=h;break}m--}}}(i,o);let l=t.get(o);if(l)return"[Circular Reference]"+l;if(t.set(o,r.join(".")),a==="Array")s=o.length>20?o.slice(o.length-20):o;else if(a.includes("Set"))s=Array.from(o);else if(a!=="Object"&&a!=="Number"&&a!=="String"&&a!=="Boolean")s="instanceof_"+a;else if(a==="Object"){let h={};for(let p in o)if(o[p]==null)h[p]=o[p];else if(Array.isArray(o[p]))o[p].length>20?h[p]=o[p].slice(o[p].length-20):h[p]=o[p];else if(o[p].constructor.name==="Object"){h[p]={};for(let m in o[p])if(Array.isArray(o[p][m]))o[p][m].length>20?h[p][m]=o[p][m].slice(o[p][m].length-20):h[p][m]=o[p][m];else if(o[p][m]!=null){let y=o[p][m].constructor.name;y.includes("Set")?h[p][m]=Array.from(o[p][m]):h[p][m]=y!=="Number"&&y!=="String"&&y!=="Boolean"?"instanceof_"+y:o[p][m]}else h[p][m]=o[p][m]}else{let m=o[p].constructor.name;m.includes("Set")?h[p]=Array.from(o[p]):h[p]=m!=="Number"&&m!=="String"&&m!=="Boolean"?"instanceof_"+m:o[p]}s=h}else s=o}else s=o;return s}return function(i,o){e.push(i);let s=JSON.stringify(i,n,o);return t.clear(),e.length=0,r.length=1,s}}()),JSON.stringifyWithCircularRefs===void 0&&(JSON.stringifyWithCircularRefs=function(){let t=new Map,e=[],r=["this"];function n(i,o){if(o!=null&&typeof o=="object"){i&&function(a,l){var h=e.length-1,p=e[h];if(p[a]===l||h===0)r.push(a),e.push(l);else for(;h-->=0;)if((p=e[h])[a]===l){h+=2,e.length=h,r.length=h,--h,e[h]=l,r[h]=a;break}}(i,o);let s=t.get(o);if(s)return"[Circular Reference]"+s;t.set(o,r.join("."))}return o}return function(i,o){try{return e.push(i),JSON.stringify(i,n,o)}finally{t.clear(),e.length=0,r.length=1}}}());K2=class{constructor(e={},r="FRAMERATE",n=!0){hn(this,"setupSynchronousUpdates",()=>{if(!this.listener.hasKey("pushToState")){let i=()=>{if(Object.keys(this.pushToState).length>0){Object.assign(this.data,this.pushToState);for(let o of Object.getOwnPropertyNames(this.pushToState))delete this.pushToState[o]}};this.listener.addListener("pushToState",this.pushToState,"__ANY__",i,this.interval),this.addToState("pushRecord",this.pushRecord,o=>{let s=o.pushed.length;for(let a=0;a<s;a++){let l=o.pushed[a];this.pushCallbacks.state&&this.pushCallbacks.state.forEach(h=>{h.onchange(l)});for(let h in l)this.pushCallbacks[h]&&this.pushCallbacks[h].forEach(p=>{typeof p=="object"&&p.onchange(l[h])})}this.pushRecord.pushed.splice(0,s)})}}),hn(this,"addSecondaryKeyResponse",(i=null,o=null,s=!1,a=this.defaultStartListenerEventLoop)=>{if(o!=null){if(this.listener.hasKey(i))return this.listener.addFunc(i,o);if(i!=null&&i!=="state")return this.listener.addListener(i,this.data,i,()=>{},this.data.stateUpdateInterval,s,a),this.listener.addFunc(i,o);if(!this.listener.hasKey("state")){let l=()=>{this.prev=Object.assign({},this.data)};this.listener.addListener("state",this.data,"__ANY__",l,this.interval)}return this.listener.addFunc("state",o)}}),hn(this,"removeState",this.unsubscribeAll),this.data=e,this.interval=r,this.pushToState={},this.pushRecord={pushed:[]},this.pushCallbacks={},this.triggers={},this.prev={},this.listener=new J2,this.defaultStartListenerEventLoop=n}subscribe(e,r,n=this.defaultStartListenerEventLoop){return e&&e!=="state"?this.data[e]!==void 0?this.addSecondaryKeyResponse(e,r,void 0,n):void this.addToState(e,null,r,n):this.addSecondaryKeyResponse(e,r,void 0,n)}subscribeOnce(e,r=n=>{}){let n;n=this.subscribe(e,i=>{r(i),this.unsubscribe(e,n)})}unsubscribe(e,r=null){r!==null?this.removeSecondaryKeyResponse(e,r,!0):console.error("Specify a subcription function index")}unsubscribeAll(e){this.unsubscribeAllSequential(e),this.unsubscribeAllTriggers(e),this.clearAllKeyResponses(e),this.data[e]&&delete this.data[e],this.listener.hasKey("pushToState")&&this.setSequentialState({stateRemoved:e})}setInterval(e="FRAMERATE"){this.interval=e,this.listener.listeners.forEach((r,n)=>{r.interval=this.interval})}updateState(e,r){this.data[e]==null?this.addToState(e,r):this.data[e]=r}addToState(e,r,n=null,i=this.defaultStartListenerEventLoop,o=!1){if(!this.listener.hasKey("pushToState")&&this.defaultStartListenerEventLoop&&this.setupSynchronousUpdates(),this.data[e]=r,this.setSequentialState({stateAdded:e}),n!==null)return this.addSecondaryKeyResponse(e,n,o,i)}get(e){return this.data[e]}getState(){return JSON.parse(JSON.stringifyFast(this.data))}setState(e={},r=!1){if(!this.listener.hasKey("pushToState")&&this.defaultStartListenerEventLoop&&(this.setupSynchronousUpdates(),this.pushRecord.pushed.push(JSON.parse(JSON.stringifyWithCircularRefs(e)))),e.stateUpdateTimeStamp=Date.now(),r){for(let n in e)if(n in this.pushToState){if(Array.isArray(this.pushToState[n])&&Array.isArray(e[n]))e[n]=this.pushToState[n].push(...e[n]);else if(typeof this.pushToState[n]=="object"&&typeof e[n]=="object"){for(let i in e[n])if(this.pushToState[n][i]){if(Array.isArray(this.pushToState[n][i])&&Array.isArray(e[n][i]))e[n][i]=this.pushToState[n][i].push(...e[n][i]);else if(typeof this.pushToState[n][i]=="object"&&typeof e[n][i]=="object"){for(let o in e[n][i])if(this.pushToState[n][i][o])Array.isArray(this.pushToState[n][i][o])&&Array.isArray(e[n][i][o])&&(e[n][i][o]=this.pushToState[n][i][o].push(...e[n][i][o]));else if(typeof this.pushToState[n][i][o]=="object"&&typeof e[n][i][o]=="object")for(let s in e[n][i][o])this.pushToState[n][i][o][s]&&Array.isArray(this.pushToState[n][i][o][s])&&Array.isArray(e[n][i][o][s])&&(e[n][i][o][s]=this.pushToState[n][i][o][s].push(...e[n][i][o][s]))}}}}}if(Object.assign(this.pushToState,e),Object.keys(this.triggers).length>0){this.triggers.state&&this.triggers.state.forEach(n=>{n.onchange(this.data)});for(let n of Object.getOwnPropertyNames(this.triggers))n in this.pushToState&&(this.data[n]=this.pushToState[n],delete this.pushToState[n],this.triggers[n].forEach(i=>{i.onchange(this.data[n])}))}return this.pushToState}subscribeTrigger(e,r=n=>{}){if(e){this.triggers[e]||(this.triggers[e]=[]);let n=this.triggers[e].length;return this.triggers[e].push({idx:n,onchange:r}),this.triggers[e].length-1}}subscribeTriggerOnce(e,r=n=>{}){let n;n=this.subscribeTrigger(e,i=>{r(i),this.unsubscribeTrigger(e,n)})}unsubscribeTrigger(e,r=0){let n,i=this.triggers[e];i&&i.find(o=>{if(o.idx===r)return!0})&&i.splice(n,1)}unsubscribeAllTriggers(e){e&&this.triggers[e]&&delete this.triggers[e]}setSequentialState(e={}){this.listener.hasKey("pushToState")||this.setupSynchronousUpdates(),e.stateUpdateTimeStamp=Date.now(),this.pushRecord.pushed.push(JSON.parse(JSON.stringify(e)))}subscribeSequential(e,r){if(e&&(this.data[e]===void 0&&e!=="state"&&this.addToState(e,null,void 0),this.pushCallbacks[e]||(this.pushCallbacks[e]=[]),r)){let n=this.pushCallbacks[e].length;return this.pushCallbacks[e].push({idx:n,onchange:r}),this.pushCallbacks[e].length-1}}subscribeSequentialOnce(e,r=n=>{}){let n;n=this.subscribeSequential(e,i=>{r(i),this.unsubscribeSequential(e,n)})}unsubscribeSequential(e,r=0){e&&this.pushCallbacks[e]&&this.pushCallbacks[e].find((n,i)=>{if(n.idx===r)return this.pushCallbacks[e].splice(i,1),!0})}unsubscribeAllSequential(e){e&&this.pushCallbacks[e]&&this.pushCallbacks[e]&&delete this.pushCallbacks[e]}setPrimaryKeyResponse(e=null,r=null,n=!1,i=this.defaultStartListenerEventLoop){if(r!==null)if(this.listener.hasKey(e))this.listener.onchange(e,r);else{if(e==null||e==="state"){if(!this.listener.hasKey("state")){let o=()=>{this.prev=Object.assign({},this.data)};this.listener.addListener("state",this.data,"__ANY__",o,this.interval)}return this.listener.addFunc("state",r)}this.listener.addListener(e,this.data,e,r,this.data.stateUpdateInterval,n,i)}}removeSecondaryKeyResponse(e=null,r=null,n=!0){e!==null?this.listener.hasKey(e)?this.listener.removeFuncs(e,r,n):console.error("key does not exist"):console.error("provide key")}clearAllKeyResponses(e=null){e===null?this.listener.remove(null):this.listener.hasKey(e)&&this.listener.remove(e)}getKeySubCallbacks(e){return this.listener.getFuncs(e)}runSynchronousListeners(){this.defaultStartListenerEventLoop=!1,this.listener.startSync()}stop(e=null){this.listener.stop(e)}};JSON.stringifyFast===void 0&&(JSON.stringifyFast=function(){let t=new Map,e=[],r=["this"];function n(i,o){let s;if(o!=null)if(typeof o=="object"){let a=o.constructor.name;i&&a==="Object"&&function(h,p){var m=e.length-1;if(e[m]){var y=e[m];if(typeof y=="object")if(y[h]===p||m===0)r.push(h),e.push(p.pushed);else for(;m-->=0;){if(typeof(y=e[m])=="object"&&y[h]===p){m+=2,e.length=m,r.length=m,--m,e[m]=p,r[m]=h;break}m++}}}(i,o);let l=t.get(o);if(l)return"[Circular Reference]"+l;if(t.set(o,r.join(".")),a==="Array")s=o.length>20?o.slice(o.length-20):o;else if(a.includes("Set"))s=Array.from(o);else if(a!=="Object"&&a!=="Number"&&a!=="String"&&a!=="Boolean")s="instanceof_"+a;else if(a==="Object"){let h={};for(let p in o)if(o[p]==null)h[p]=o[p];else if(Array.isArray(o[p]))o[p].length>20?h[p]=o[p].slice(o[p].length-20):h[p]=o[p];else if(o[p].constructor.name==="Object"){h[p]={};for(let m in o[p])if(Array.isArray(o[p][m]))o[p][m].length>20?h[p][m]=o[p][m].slice(o[p][m].length-20):h[p][m]=o[p][m];else if(o[p][m]!=null){let y=o[p][m].constructor.name;y.includes("Set")?h[p][m]=Array.from(o[p][m]):h[p][m]=y!=="Number"&&y!=="String"&&y!=="Boolean"?"instanceof_"+y:o[p][m]}else h[p][m]=o[p][m]}else{let m=o[p].constructor.name;m.includes("Set")?h[p]=Array.from(o[p]):h[p]=m!=="Number"&&m!=="String"&&m!=="Boolean"?"instanceof_"+m:o[p]}s=h}else s=o}else s=o;return s}return function(i,o){e.push(i);let s=JSON.stringify(i,n,o);return t.clear(),e.length=0,r.length=1,s}}()),JSON.stringifyWithCircularRefs===void 0&&(JSON.stringifyWithCircularRefs=function(){let t=new Map,e=[],r=["this"];function n(i,o){if(o!=null&&typeof o=="object"){i&&function(a,l){var h=e.length-1,p=e[h];if(typeof p=="object")if(p[a]===l||h===0)r.push(a),e.push(l.pushed);else for(;h-->=0;){if(typeof(p=e[h])=="object"&&p[a]===l){h+=2,e.length=h,r.length=h,--h,e[h]=l,r[h]=a;break}h--}}(i,o);let s=t.get(o);if(s)return"[Circular Reference]"+s;t.set(o,r.join("."))}return o}return function(i,o){try{return e.push(i),JSON.stringify(i,n,o)}finally{t.clear(),e.length=0,r.length=1}}}());Z2=(t,e=!0)=>{t instanceof Object&&(t=Array.isArray(t)?[...t]:Object.assign({},t));for(let r in t)t[r]instanceof Function&&(t[r]=t[r].toString()),t[r]instanceof Object&&(t[r]=Z2(t[r],!1));return e?JSON.stringify(t):t},r6=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,n6=/([^\s,]+)/g;try{if(typeof process=="object"){let t=fp();typeof globalThis.fetch!="function"&&(globalThis.fetch=t)}}catch(t){}X2=class{constructor(e="https://localhost",r,n){let i,o;this.id=null,this.target=null,this.type=null,this.link=null,this.credentials={},this.connection=null,this.services={available:{},connecting:{},queue:{}},this.router=null,this.clients={},this.user=Oc(),this.status=!1,this.responses={},this.setCredentials=s=>{var a;s||(s={_id:Oc()}),this.credentials={_id:(a=s._id)!==null&&a!==void 0?a:Oc(),id:s.id||s._id}},this.check=()=>le(this,void 0,void 0,function*(){var s,a,l,h,p,m;this.type==="webrtc"&&(yield this._subscribe({protocol:"webrtc",force:!0}).then(N=>{this.status=!0}).catch(N=>console.log("Link doesn't have WebRTC enabled.",N)));let y=()=>le(this,void 0,void 0,function*(){return yield this._subscribe({protocol:"websocket",force:!0}).then(N=>(this.status=!0,N)),yield this.send("services")}),w=()=>le(this,void 0,void 0,function*(){return yield this.send("services")}),b;if(this.type==="websocket"?yield y().then(N=>(this.status=!0,N)).catch(N=>le(this,void 0,void 0,function*(){if(this.type==="websocket")return console.log("Falling back to http"),yield w()})):b=yield w().then(N=>(this.status=!0,N)).catch(N=>le(this,void 0,void 0,function*(){return console.log("Falling back to websockets"),yield y()})),b){console.log("Connection successful!");let N=b.message[0];for(let O in N){let I=N[O].replace(/Backend|Service/,"").toLowerCase();this.services.available[I]=O,((l=(a=(s=this.router)===null||s===void 0?void 0:s.SERVICES)===null||a===void 0?void 0:a[I])===null||l===void 0?void 0:l.status)instanceof Function&&this.router.SERVICES[I].status(O),((h=this.clients[I])===null||h===void 0?void 0:h.serviceType)==="subscription"&&((p=this.services.queue[I])===null||p===void 0||p.forEach(R=>R()),this.services.queue[I]=[])}(m=this.services.queue[void 0])===null||m===void 0||m.forEach(O=>O()),this.services.queue[void 0]=[]}else console.log("Connection failed!");return b==null?void 0:b.message}),this.send=(s,a={},l=()=>{})=>le(this,void 0,void 0,function*(){var h,p,m,y,w,b,N,O;if(typeof s=="string")a.route=s;else{let J=this.services[s.service];a.route=J?`${J}/${s.route}`:s.route}let I;a.suppress=!!this.connection;let R={suppress:a.suppress,id:(h=this.link.connection)===null||h===void 0?void 0:h.id};if(((p=this.connection)===null||p===void 0?void 0:p.protocol)==="websocket")a.id=(m=this.link.credentials)===null||m===void 0?void 0:m.id,I=yield this.link.connection.service.send(a,R);else if(((y=this==null?void 0:this.connection)===null||y===void 0?void 0:y.protocol)==="webrtc")a.id=((w=this.credentials)===null||w===void 0?void 0:w.id)||((b=this.link.credentials)===null||b===void 0?void 0:b.id),I=yield this.connection.service.send(a,R);else{a.id=(N=this.link.credentials)===null||N===void 0?void 0:N.id,a.method||(a.method=((O=a.message)===null||O===void 0?void 0:O.length)>0?"POST":"GET");let J={method:a.method.toUpperCase(),mode:"cors",headers:{"Content-Type":"application/json"}};J.method!="GET"&&(J.body=Z2(a)),I=yield fetch(function(q,G){let F=G instanceof URL?G:new URL(G);return q=F.pathname==="/"?q:F.pathname+q,new URL(q,F.href).href}(a.route,this.link.target),J).then(q=>le(this,void 0,void 0,function*(){let G=q.body.getReader(),F=q.headers.get("Content-Length"),z=0;if(globalThis.ReadableStream){let S=new ReadableStream({start(W){let te=()=>le(this,void 0,void 0,function*(){G.read().then(({value:X,done:ue})=>{ue?W.close():(z+=X.length,l(z/F,F),W.enqueue(X),te())})});te()}});return new Response(S,{headers:q.headers})}return q})),I=I&&(yield I.json().then(q=>{if(I.ok)return q;throw q.message}).catch(q=>le(this,void 0,void 0,function*(){throw"Invalid JSON"})))}return I&&!(I==null?void 0:I.route)&&(I.route=a.route,I.block=!0),I}),this._subscribe=(s={})=>le(this,void 0,void 0,function*(){let a=()=>new Promise(l=>le(this,void 0,void 0,function*(){var h;let p=(h=s.protocol)!==null&&h!==void 0?h:this.type;(p?[this.clients[p]]:Object.values(this.clients)).forEach(m=>le(this,void 0,void 0,function*(){var y;if(m&&s.force||(m==null?void 0:m.status)===!0&&(m==null?void 0:m.serviceType)==="subscription"){let w=`${(y=this.link.services.available[m==null?void 0:m.service])!==null&&y!==void 0?y:m.name.toLowerCase()}/subscribe`;if(m.setEndpoint(this.link),!this.connection){let b=this.type==="http"||this.type==="websocket"?new URL(w,this.target):this.target,N=yield m.add(this.credentials,b.href);this.router&&m.addResponse("router",O=>{let I=typeof O=="string"?JSON.parse(O):O;Object.values(this.responses).forEach(R=>{R(I)}),this.router&&this.router.handleLocalRoute(I)}),this.connection={service:m,id:N,protocol:m.name}}return this.type==="webrtc"&&(s.routes=[this.target]),yield this.link.send(w,Object.assign({route:s.route,message:s.message,protocol:s.protocol},{message:[s.routes,this.connection.id]})),void l(this.connection)}})),this.services.queue[p]||(this.services.queue[p]=[]),this.services.queue[p].push(()=>le(this,void 0,void 0,function*(){let m=yield a();l(m)}))}));return yield a()}),this.subscribe=s=>{if(s){let a=ks("response");return this.responses[a]=s,a}},this.unsubscribe=s=>{s?delete this.responses[s]:this.responses={}},typeof e=="object"?e instanceof URL?i=e:(i=e.target,o=e.type,this.link=e.link,this.setCredentials(e.credentials)):i=e,o||(o="http"),this.link||(this.link=this),o==="http"||o==="websocket"?(i=i instanceof URL?i:new URL(i),this.id=i.origin):this.id=i,this.target=i,this.type=o,this.router=n,r&&(this.clients=r)}},Wt=t=>typeof t=="string"&&t.length===24?B5(t):t,i6=["user","group","authorization","discussion","chatroom","comment","dataInstance","event","notification","schedule","date"],Q2=class extends class{constructor(e){var r;this.id=ks("service"),this.name="service",this.callbacks=new Map,this.status=!1,this.serviceType="default",this.routes=[],this.delegate=(r=globalThis==null?void 0:globalThis.document)===null||r===void 0?void 0:r.createDocumentFragment(),this.protocols={},this.services={},this.setEndpointRoute=n=>{this.route=n},this.notify=(n,i,o)=>le(this,void 0,void 0,function*(){let s=[];return yield Promise.all(Array.from(this.callbacks).map((a,l)=>le(this,void 0,void 0,function*(){let h=yield a[1](n,i,o);!h||h instanceof Error||s.push(h)}))),s==null?void 0:s[0]}),this.setEndpoint=n=>{this.endpoint=n},this.subscribe=n=>{if(n instanceof Function){let i=ks();return this.callbacks.set(i,n),i}},this.unsubscribe=n=>this.callbacks.delete(n),this.router=e}addEventListener(...e){var r;(r=this.delegate)===null||r===void 0||r.addEventListener.apply(this.delegate,e)}dispatchEvent(...e){var r;return(r=this.delegate)===null||r===void 0?void 0:r.dispatchEvent.apply(this.delegate,e)}removeEventListener(...e){var r;return(r=this.delegate)===null||r===void 0?void 0:r.removeEventListener.apply(this.delegate,e)}}{constructor(e,r={},n=!1){super(e),this.name="structs",this.collections={},this.debug=!1,this.wipeDB=()=>le(this,void 0,void 0,function*(){return yield Promise.all(Object.values(this.collections).map(i=>i.instance.deleteMany({}))),!0}),this.db=r==null?void 0:r.db,this.debug=n,this.mode=this.db&&r.mode?r.mode:"local",r.collections||(r.collections={}),i6.forEach(i=>{r.collections[i]||(r.collections[i]=this.db?{instance:this.db.collection(i)}:{},r.collections[i].reference={})}),this.collections=r.collections,this.routes=[{route:"getUser",post:(i,o,s)=>le(this,void 0,void 0,function*(){let a=i.USERS[s];if(this.debug&&console.log("getUser origin",s,o,"user found:",a),!a)return!1;let l;if(this.mode==="mongo")l=yield this.getMongoUser(a,o[0]);else{let h=this.getLocalData("user",{_id:o[0]});h?(yield this.checkAuthorization(a,h))?l={user:h,groups:this.getLocalData("group",{ownerId:o[0]}),authorizations:this.getLocalData("authorization",{ownerId:o[0]})}:l={user:{}}:l={user:{}}}return this.debug&&console.log("getUser:",a,o[0],l),l})},{route:"setUser",aliases:["addUser"],post:(i,o,s)=>le(this,void 0,void 0,function*(){let a=i.USERS[s];if(!a)return!1;let l;return this.mode!=="mongo"?((yield this.checkAuthorization(a,o[0],"WRITE"))&&this.setLocalData(o[0]),!0):(l=yield this.setMongoUser(a,o[0]),this.debug&&console.log("setUser",a,o[0],l),l)})},{route:"getUsersByIds",post:(i,o,s)=>le(this,void 0,void 0,function*(){let a=i.USERS[s];if(!a)return!1;let l;if(this.mode==="mongo")l=yield this.getMongoUsersByIds(a,o[0]);else if(l=[],Array.isArray(o[0])){let h=this.getLocalData("user",{_id:o[0]});h&&l.push(h)}return this.debug&&console.log("getUserByIds:",a,o[0],l),l})},{route:"getUsersByRoles",post:(i,o,s)=>le(this,void 0,void 0,function*(){let a=i.USERS[s];if(!a)return!1;let l;if(this.mode.includes("mongo"))l=yield this.getMongoUsersByRoles(a,o[0]);else{let h=this.getLocalData("user");l=[],h.forEach(p=>{var m;((m=p.userRoles)===null||m===void 0?void 0:m.includes(o[0]))&&l.push(p)})}return this.debug&&console.log("getUserByRoles",a,o[0],l),l})},{route:"deleteUser",aliases:["removeUser"],post:(i,o,s)=>le(this,void 0,void 0,function*(){let a=i.USERS[s];if(!a)return!1;let l;if(this.mode==="mongo")l=yield this.deleteMongoUser(a,o[0]);else{l=!1;let h=this.getLocalData(o[0]);h&&this.checkAuthorization(a,h,"WRITE")&&(l=this.deleteLocalData(h))}return this.debug&&console.log("deleteUser:",a,o[0],l),l})},{route:"setData",aliases:["setMongoData"],post:(i,o,s)=>le(this,void 0,void 0,function*(){let a=i.USERS[s];if(!a)return!1;let l;if(!this.mode.includes("mongo")){let h=[];return l=[],yield Promise.all(o.map(p=>le(this,void 0,void 0,function*(){let m=this.getLocalData(p);(yield this.checkAuthorization(a,m,"WRITE"))&&(this.setLocalData(m),l.push(m),m.structType!=="notification"&&h.push(m))}))),h.length>0&&this.checkToNotify(a,h,this.mode),this.debug&&console.log("setData:",a,o,l),!0}return l=yield this.setMongoData(a,o),this.debug&&console.log("setData:",a,o,l),l})},{route:"getData",aliases:["getMongoData","getUserData"],post:(i,o,s)=>le(this,void 0,void 0,function*(){let a=i.USERS[s];if(!a)return!1;let l;if(this.mode.includes("mongo"))l=yield this.getMongoData(a,o[0],o[1],o[2],o[4],o[5]);else{let h;l=[],o[0]&&(h=this.getLocalData(o[0])),h&&o[1]&&(h=h.filter(p=>{if(p.ownerId===o[1])return!0})),h&&(yield Promise.all(h.map(p=>le(this,void 0,void 0,function*(){let m=this.getLocalData(p._id);(yield this.checkAuthorization(a,m))&&l.push(m)}))))}return this.debug&&console.log("getData:",a,o,l),l})},{route:"getDataByIds",aliases:["getMongoDataByIds","getUserDataByIds"],post:(i,o,s)=>le(this,void 0,void 0,function*(){let a=i.USERS[s];if(!a)return!1;let l;if(this.mode.includes("mongo"))l=yield this.getMongoDataByIds(a,o[0],o[1],o[2]);else{let h;l=[],o[2]&&(h=this.getLocalData(o[2])),h&&o[1]&&(h=h.filter(p=>{if(p.ownerId===o[1])return!0})),h&&(yield Promise.all(h.map(p=>le(this,void 0,void 0,function*(){let m=this.getLocalData(p._id);(yield this.checkAuthorization(a,m))&&l.push(m)}))))}return this.debug&&console.log("getDataByIds:",a,o,l),l})},{route:"getAllData",post:(i,o,s)=>le(this,void 0,void 0,function*(){let a=i.USERS[s];if(!a)return!1;let l;if(this.mode.includes("mongo"))l=yield this.getAllUserMongoData(a,o[0],o[1]);else{let h=this.getLocalData(void 0,{ownerId:o[0]});l=[],yield Promise.all(h.map(p=>le(this,void 0,void 0,function*(){o[1]?o[1].indexOf(p.structType)<0&&(yield this.checkAuthorization(a,p))&&l.push(p):(yield this.checkAuthorization(a,p))&&l.push(p)})))}return this.debug&&console.log("getAllData:",a,o,l),l})},{route:"deleteData",post:(i,o,s)=>le(this,void 0,void 0,function*(){let a=i.USERS[s];if(!a)return!1;let l;return this.mode.includes("mongo")?l=yield this.deleteMongoData(a,o):(l=!1,yield Promise.all(o.map(h=>le(this,void 0,void 0,function*(){let p=this.getLocalData(h);(yield this.checkAuthorization(a,p,"WRITE"))&&this.deleteLocalData(p),l=!0})))),this.debug&&console.log("deleteData:",a,o,l),l})},{route:"getGroup",aliases:["getGroups"],post:(i,o,s)=>le(this,void 0,void 0,function*(){let a=i.USERS[s];if(!a)return!1;let l;if(this.mode.includes("mongo"))l=yield this.getMongoGroups(a,o[0],o[1]);else if(typeof o[1]=="string")l=this.getLocalData("group",{_id:o[1]});else{l=[];let h=this.getLocalData("group");o[0]?h.forEach(p=>{p.users.includes(o[0])&&l.push(p)}):h.forEach(p=>{p.users.includes(a._id)&&l.push(p)})}return this.debug&&console.log("getGroups:",a,o,l),l})},{route:"setGroup",post:(i,o,s)=>le(this,void 0,void 0,function*(){let a=i.USERS[s];if(!a)return!1;let l=yield this.setGroup(a,o[0],this.mode);this.debug&&console.log("setGroup:",a,o,l)})},{route:"deleteGroup",post:(i,o,s)=>le(this,void 0,void 0,function*(){let a=i.USERS[s];if(!a)return!1;let l;if(this.mode.includes("mongo"))l=yield this.deleteMongoGroup(a,o[0]);else{let h=this.getLocalData("group",o[0]),p=!1;h&&(p=yield this.checkAuthorization(a,h,"WRITE")),p&&(l=!0)}return this.debug&&console.log("deleteGroup:",a,o,l),l})},{route:"setAuth",post:(i,o,s)=>le(this,void 0,void 0,function*(){let a=i.USERS[s];if(!a)return!1;let l=yield this.setAuthorization(a,o[0],this.mode);return this.debug&&console.log("deleteGroup:",a,o,l),l})},{route:"getAuths",post:(i,o,s)=>le(this,void 0,void 0,function*(){let a=i.USERS[s];if(!a)return!1;let l;if(this.mode.includes("mongo"))l=yield this.getMongoAuthorizations(a,o[0],o[1]);else if(o[1]){let h=this.getLocalData("authorization",{_id:o[1]});h&&(l=[h])}else l=this.getLocalData("authorization",{ownerId:o[0]});return this.debug&&console.log("deleteGroup:",a,o,l),l})},{route:"deleteAuth",post:(i,o,s)=>le(this,void 0,void 0,function*(){let a=i.USERS[s];if(!a)return!1;let l;if(this.mode.includes("mongo"))l=yield this.deleteMongoAuthorization(a,o[0]);else{l=!0;let h=this.getLocalData("authorization",{_id:o[0]});h&&this.checkAuthorization(a,h,"WRITE")&&(l=this.deleteLocalData(h))}return this.debug&&console.log("deleteGroup:",a,o,l),l})}]}notificationStruct(e={}){let r="notification";return{structType:r,timestamp:Date.now(),id:ks(r),note:"",ownerId:"",parentUserId:"",parent:{structType:e==null?void 0:e.structType,_id:e==null?void 0:e._id}}}checkToNotify(e,r=[],n=this.mode){return le(this,void 0,void 0,function*(){if(typeof e=="string")for(let s in this.router.USERS){let a=this.router.USERS[s];a._id===e&&(e=a)}if(typeof e=="string"||e==null)return!1;let i={},o=[];if(r.forEach(s=>le(this,void 0,void 0,function*(){if((e==null?void 0:e._id)!==s.ownerId){let a=this.notificationStruct(s);a.id="notification_"+s._id,a.ownerId=s.ownerId,a.note=s.structType,a.parentUserId=s.ownerId,o.push(a),i[s.ownerId]=s.ownerId}if(s.users)s.users.forEach(a=>{if(a!==e._id){let l=this.notificationStruct(s);l.id="notification_"+s._id,l.ownerId=a,l.note=s.structType,l.parentUserId=s.ownerId,o.push(l),i[a]=a}});else{let a=[];if(n==="mongo"){let l=this.collections.authorizations.instance.find({$or:[{authorizedId:e._id},{authorizerId:e._id}]});(yield l.count())>0&&(yield l.forEach(h=>a.push(h)))}else a=this.getLocalData("authorization",{authorizedId:e._id}),a.push(...this.getLocalData("authorization",{authorizerId:e._id}));a.length>0&&a.forEach(l=>{if(s.authorizerId===s.ownerId&&!i[s.authorizedId]&&l.status==="OKAY"&&l.authorizations.indexOf("peer")>-1){let h=this.notificationStruct(s);h.ownerId=l.authorizedId,h.id="notification_"+s._id,h.note=s.structType,h.parentUserId=s.ownerId,o.push(h),i[h.ownerId]=h.ownerId}})}})),o.length>0){n==="mongo"?yield this.setMongoData(e,o):this.setLocalData(o);for(let s in i)this.router.sendMsg(s,"notifications",!0);return!0}return!1})}setMongoData(e,r=[]){return le(this,void 0,void 0,function*(){let n=!1;if(r.length>0){let i=!0,o="";if(yield Promise.all(r.map(s=>le(this,void 0,void 0,function*(){if(((e==null?void 0:e._id)!==s.ownerId||e._id===s.ownerId&&e.userRoles.includes("admin_control"))&&o!==s.ownerId&&(i=yield this.checkAuthorization(e,s,"WRITE"),o=s.ownerId),i){let a=JSON.parse(JSON.stringify(s));a._id&&delete a._id,s.id?s.id.includes("defaultId")?(yield this.db.collection(s.structType).insertOne(a),n=!0):yield this.db.collection(s.structType).updateOne({id:s.id},{$set:a},{upsert:!0}):s._id&&(s._id.includes("defaultId")?(yield this.db.collection(s.structType).insertOne(a),n=!0):yield this.db.collection(s.structType).updateOne({_id:Wt(s._id)},{$set:a},{upsert:!1}))}}))),n===!0){let s=[];return yield Promise.all(r.map((a,l)=>le(this,void 0,void 0,function*(){let h=JSON.parse(JSON.stringify(a));if(h._id&&delete h._id,a.structType!=="comment"){let p;a.structType!=="notification"&&(p=yield this.db.collection(h.structType).findOne(h)),p&&(p._id=p._id.toString(),s.push(p))}else if(a.structType==="comment"){let p=a,m=JSON.parse(JSON.stringify(p));m._id&&delete m._id;let y=yield this.db.collection("comment").findOne(m),w=p.replyTo,b=r.find(N=>{if(N._id===w)return!0});if(b){let N,O=JSON.parse(JSON.stringify(b));if(O._id&&delete O._id,yield Promise.all(["discussion","chatroom","comment"].map(I=>le(this,void 0,void 0,function*(){let R=yield this.db.collection(I).findOne({_id:Wt(w)});R&&(N=R)}))),N){let I,R,J=p.parent._id;if(J!==w?(I=r.find(G=>{if(G._id===J)return!0}),I&&(delete I._id,yield Promise.all(["discussion","chatroom"].map(G=>le(this,void 0,void 0,function*(){let F=yield this.db.collection(G).findOne(I);F&&(R=F)}))))):R=N,N){let G=N.replies.indexOf(p._id);G>-1&&(N.replies[G]=y._id.toString(),y.replyTo=N._id.toString())}if(R){let G=R.comments.indexOf(p._id);G>-1&&(R.comments[G]=y._id.toString(),y.parent._id=R._id.toString())}let q=[y,N];R._id.toString()!==N._id.toString()&&q.push(R),yield Promise.all(q.map(G=>le(this,void 0,void 0,function*(){let F=JSON.parse(JSON.stringify(G));delete F._id,yield this.db.collection(G.structType).updateOne({_id:Wt(G._id)},{$set:F},{upsert:!1})}))),[...s].reverse().forEach((G,F)=>{q.find(z=>{if(G._id.toString()===z._id.toString())return!0})&&s.splice(s.length-F-1,1)}),s.push(...q)}}else y&&s.push(y)}}))),this.checkToNotify(e,s),s}{let s=[];return r.forEach(a=>{a.structType!=="notification"&&s.push(a)}),this.checkToNotify(e,s),!0}}return!1})}setMongoUser(e,r){return le(this,void 0,void 0,function*(){if(r._id){if((e._id!==r.ownerId||e._id===r.ownerId&&e.userRoles.includes("admin_control"))&&!(yield this.checkAuthorization(e,r,"WRITE")))return!1;let n=JSON.parse(JSON.stringify(r));n._id&&delete n._id,this.router.DEBUG&&console.log("RETURNS PROFILE",r);let i=Wt(r._id),o=i!==r._id?{_id:i}:{id:r.id};return yield this.collections.users.instance.updateOne(o,{$set:n},{upsert:!0}),e=yield this.collections.users.instance.findOne(o),this.checkToNotify(e,[r]),e}return!1})}setGroup(e,r={},n=this.mode){return le(this,void 0,void 0,function*(){if(r._id){let i;if(i=n==="mongo"?yield this.collections.groups.instance.findOne({name:r.name}):this.getLocalData("group",{_id:r._id}),i&&(i.ownerId!==r.ownerId||r.admins.indexOf(e._id)<0)||e._id!==r.ownerId&&!(yield this.checkAuthorization(e,r,"WRITE")))return!1;let o=[];r.users.forEach(y=>{o.push({email:y},{id:y},{username:y})});let s=[],a=[];if(n==="mongo"){let y=this.collections.users.instance.find({$or:o});(yield y.count())>0&&(yield y.forEach(w=>{s.push(w),a.push(w._id)}))}else o.forEach(y=>{let w=this.getLocalData("user",y);w.length>0&&(s.push(w[0]),a.push(w[0]._id))});r.users=a;let l=[],h=[],p=[];s.forEach(y=>{r.admins.find((w,b)=>{if(w===y._id||w===y.email||w===y.username||y._id===r.ownerId)return l.indexOf(y._id<0)&&l.push(y._id),!0}),r.peers.find((w,b)=>{if(w===y._id||w===y.email||w===y.username)return h.indexOf(y._id<0)&&h.push(y._id),!0}),r.clients.find((w,b)=>{if(w===y._id||w===y.email||w===y.username)return p.indexOf(y._id<0)&&p.push(y._id),!0})}),r.admins=l,r.peers=h,r.clients=p;let m=JSON.parse(JSON.stringify(r));return m._id&&delete m._id,n==="mongo"?r._id.includes("defaultId")?yield this.db.collection(r.structType).insertOne(m):yield this.collections.groups.instance.updateOne({_id:Wt(r._id)},{$set:m},{upsert:!0}):this.setLocalData(r),this.checkToNotify(e,[r],this.mode),r}return!1})}getMongoUser(e,r="",n=!1){return le(this,void 0,void 0,function*(){return new Promise(i=>le(this,void 0,void 0,function*(){let o=[{email:r},{id:r},{username:r}];try{o.push({_id:Wt(r)})}catch(a){}let s=yield this.collections.users.instance.findOne({$or:o});if(s&&s!=null)if(!s._id&&s._id?s._id=s._id.toString():!s._id&&s._id&&(s._id=s._id),s.ownerId||(s.ownerId=s._id),s&&n===!1){(e._id!==s._id||e._id===s._id&&e.userRoles.includes("admin_control"))&&((yield this.checkAuthorization(e,s))||i(void 0));let a=[],l=this.collections.authorizations.instance.find({ownerId:s._id});(yield l.count())>0&&(yield l.forEach(m=>a.push(m)));let h=this.collections.groups.instance.find({users:{$all:[s._id]}}),p=[];(yield h.count())>0&&(yield h.forEach(m=>p.push(m))),s.authorizations=a,s.groups=p,i(s)}else i(s);else i({})}))})}getMongoUsersByIds(e={},r=[]){return le(this,void 0,void 0,function*(){let n=[];r.forEach(o=>{try{n.push({_id:Wt(o)})}catch(s){}});let i=[];if(n.length>0){let o=this.collections.users.instance.find({$or:n});(yield o.count())>0&&(yield o.forEach(s=>{i.push(s)}))}return i})}getMongoUsersByRoles(e={},r=[]){return le(this,void 0,void 0,function*(){let n=this.collections.users.instance.find({userRoles:{$all:r}}),i=[];return(yield n.count())>0&&(yield n.forEach(o=>{i.push(o)})),i})}getMongoDataByIds(e,r,n,i){return le(this,void 0,void 0,function*(){if(r.length>0){let o=[];r.forEach(a=>{let l={_id:a};n&&(l.ownerId=n),o.push(l)});let s=[];if(i){let a=yield this.db.collection(i).find({$or:o});if((yield a.count())>0){let l=!0,h="";yield a.forEach(p=>le(this,void 0,void 0,function*(){(e._id!==p.ownerId||e._id===p.ownerId&&e.userRoles.includes("admincontrol"))&&h!==p.ownerId&&(l=yield this.checkAuthorization(e,p),h=p.ownerId),l&&s.push(p)}))}}else yield Promise.all(Object.keys(this.collections).map(a=>le(this,void 0,void 0,function*(){let l=yield this.db.collection(a).find({$or:o});if((yield l.count())>0){let h=!0,p="";yield l.forEach(m=>le(this,void 0,void 0,function*(){(e._id!==m.ownerId||e._id===m.ownerId&&e.userRoles.includes("admincontrol"))&&p!==m.ownerId&&(h=yield this.checkAuthorization(e,m),p=m.ownerId),h&&s.push(m)}))}})));return s}})}getMongoData(e,r,n,i={},o=0,s=0){return le(this,void 0,void 0,function*(){n||(n=i==null?void 0:i.ownerId),i._id&&(i._id=Wt(i._id));let a=[],l=!0,h="";if(!(r||n||i))return[];if(!r&&n&&Object.keys(i).length===0)return yield this.getAllUserMongoData(e,n);if(!i&&n){let p=this.db.collection(r).find({ownerId:n}).sort({$natural:-1}).skip(s);o>0&&p.limit(o),(yield p.count())>0&&(yield p.forEach(m=>le(this,void 0,void 0,function*(){(e._id!==m.ownerId||e._id===m.ownerId&&e.userRoles.includes("admincontrol"))&&h!==m.ownerId&&(l=yield this.checkAuthorization(e,m),h=m.ownerId),l===!0&&a.push(m)})))}else if(Object.keys(i).length>0&&n){let p=yield this.db.collection(r).findOne(Object.assign({ownerId:n},i));p&&a.push(p)}else Object.keys(i).length>0&&!n&&(yield Promise.all(Object.keys(this.collections).map(p=>le(this,void 0,void 0,function*(){let m=yield this.db.collection(p).findOne(i);if(m)return(e._id!==m.ownerId||e._id===m.ownerId&&e.userRoles.includes("admincontrol"))&&h!==m.ownerId&&(l=yield this.checkAuthorization(e,m),h=m.ownerId),void a.push(m)}))));return l?a:[]})}getAllUserMongoData(e,r,n=[]){return le(this,void 0,void 0,function*(){let i=[],o=!0,s="";return yield Promise.all(Object.keys(this.collections).map((a,l)=>le(this,void 0,void 0,function*(){if(o&&n.indexOf(a)<0){let h=this.db.collection(a).find({ownerId:r}),p=yield h.count();for(let m=0;m<p;m++){let y=yield h.next();(e._id!==r||e._id===r&&e.userRoles.includes("admincontrol"))&&s!==r&&(o=yield this.checkAuthorization(e,y),s=r),o&&i.push(y)}}}))),o?i:[]})}getMongoDataByRefs(e,r=[]){return le(this,void 0,void 0,function*(){let n=[];if(n.length>0){let i="";r.forEach(o=>le(this,void 0,void 0,function*(){if(o.structType&&o._id){let s=yield this.db.collection(o.structType).findOne({_id:Wt(o._id)});s&&((e._id!==s.ownerId||e._id===s.ownerId&&e.userRoles.includes("admincontrol"))&&i!==s.ownerId&&(yield this.checkAuthorization(e,s),i=s.ownerId),n.push(s))}}))}return n})}getMongoAuthorizations(e,r=e._id,n=""){return le(this,void 0,void 0,function*(){let i=[];if(n.length===0){let o=this.collections.authorizations.instance.find({ownerId:r});(yield o.count)>0&&(yield o.forEach(s=>{i.push(s)}))}else i.push(yield this.collections.authorizations.instance.findOne({_id:Wt(n),ownerId:r}));if(!(e._id!==i[0].ownerId&&!(yield this.checkAuthorization(e,i[0]))))return i})}getMongoGroups(e,r=e._id,n=""){return le(this,void 0,void 0,function*(){let i=[];if(n.length===0){let o=this.collections.groups.instance.find({users:{$all:[r]}});(yield o.count)>0&&(yield o.forEach(s=>{i.push(s)}))}else try{i.push(yield this.collections.groups.instance.findOne({_id:Wt(n),users:{$all:[r]}}))}catch(o){}return i})}deleteMongoData(e,r=[]){return le(this,void 0,void 0,function*(){let n=[];yield Promise.all(r.map(o=>le(this,void 0,void 0,function*(){try{let s=Wt(o._id),a=yield this.db.collection(o.structType).findOne({_id:s});if(a){n.push(a);let l=yield this.collections.notifications.instance.find({parent:{structType:o.structType,id:o._id}}),h=yield l.count();for(let p=0;p<h;p++){let m=yield l.next();m&&n.push(m)}}}catch(s){}})));let i="";return yield Promise.all(n.map((o,s)=>le(this,void 0,void 0,function*(){var a;let l=!0;(o.ownerId!==e._id||e._id===o.ownerId&&((a=e.userRoles)===null||a===void 0?void 0:a.includes("admincontrol")))&&o.ownerId!==i&&(i=o.ownerId,l=yield this.checkAuthorization(e,o,"WRITE")),l&&(yield this.db.collection(o.structType).deleteOne({_id:Wt(o._id)}),o.users&&o.users.forEach(h=>{h!==e._id&&h!==o.ownerId&&this.router.sendMsg(h,"deleted",o._id)}),o.ownerId!==e._id&&this.router.sendMsg(o.ownerId,"deleted",o._id))}))),!0})}deleteMongoUser(e,r){return le(this,void 0,void 0,function*(){if(e._id!==r||e._id===r&&e.userRoles.includes("admincontrol")){let n=yield this.collections.users.instance.findOne({id:r});if(!(yield this.checkAuthorization(e,n,"WRITE")))return!1}return yield this.collections.users.instance.deleteOne({id:r}),e._id!==r&&this.router.sendMsg(r,"deleted",r),!0})}deleteMongoGroup(e,r){return le(this,void 0,void 0,function*(){let n=yield this.collections.groups.instance.findOne({_id:Wt(r)});return n?(e._id!==n.ownerId||e._id===n.ownerId&&e.userRoles.includes("admincontrol"))&&!(yield this.checkAuthorization(e,n,"WRITE"))?!1:(n.users&&n.users.forEach(i=>{this.router.sendMsg(n.authorizerId,"deleted",n._id)}),yield this.collections.groups.instance.deleteOne({_id:Wt(r)}),!0):!1})}deleteMongoAuthorization(e,r){return le(this,void 0,void 0,function*(){let n=yield this.collections.authorizations.instance.findOne({_id:Wt(r)});return n?(e._id!==n.ownerId||e._id===n.ownerId&&e.userRoles.includes("admincontrol"))&&!(yield this.checkAuthorization(e,n,"WRITE"))?!1:(n.associatedAuthId&&(this.router.DEBUG&&console.log(n),yield this.collections.authorizations.instance.deleteOne({_id:Wt(n.associatedAuthId)}),n.authorizerId!==e._id?this.router.sendMsg(n.authorizerId,"deleted",n._id):n.authorizedId!==e._id&&this.router.sendMsg(n.authorizedId,"deleted",n._id)),yield this.collections.authorizations.instance.deleteOne({_id:Wt(r)}),!0):!1})}setAuthorization(e,r,n=this.mode){return le(this,void 0,void 0,function*(){let i,o;if(n==="mongo"?(i=yield this.getMongoUser(e,r.authorizedId,!0),o=yield this.getMongoUser(e,r.authorizerId,!0)):(i=this.getLocalData("user",{_id:r.authorizedId}),o=this.getLocalData("user",{_id:r.authorizedId})),!i||!o||(r.authorizedId!==i._id&&(r.authorizedId=i._id),r.authorizerId!==o._id&&(r.authorizerId=o._id),r.authorizedName||(i.username?r.authorizedName=i.username:i.email&&(r.authorizedName=i.email)),r.authorizerName||(i.username?r.authorizerName=i.username:i.email&&(r.authorizerName=i.email)),(e._id!==r.ownerId||e._id===r.ownerId&&e.userRoles.includes("admincontrol"))&&e._id!==r.authorizedId&&e._id!==r.authorizerId&&!(yield this.checkAuthorization(e,r,"WRITE"))))return!1;let s,a=[];if(n==="mongo"){let h=this.collections.authorizations.instance.find({$and:[{authorizedId:r.authorizedId},{authorizerId:r.authorizerId}]});(yield h.count())>0&&(yield h.forEach(p=>a.push(p)))}else{let h=this.getLocalData("authorization",{authorizedId:r.authorizedId});Array.isArray(h)&&h.forEach(p=>{p.authorizerId===r.authorizerId&&a.push(p)})}Array.isArray(a)&&a.forEach(h=>le(this,void 0,void 0,function*(){if(h.ownerId!==e._id){r.authorizerId===e._id?(h.authorizations=r.authorizations,h.structIds=r.structIds,h.excluded=r.excluded,h.expires=r.expires,h.status="OKAY",r.status="OKAY"):(r.authorizations=h.authorizations,r.structIds=h.structIds,r.excluded=h.excluded,r.expires=h.expires,h.status="OKAY",r.status="OKAY"),r.associatedAuthId=h._id.toString(),h.associatedAuthId=r._id.toString(),s=h;let p=JSON.parse(JSON.stringify(h));this.mode.includes("mongo")?(delete p._id,yield this.collections.authorizations.instance.updateOne({$and:[{authorizedId:r.authorizedId},{authorizerId:r.authorizerId},{ownerId:h.ownerId}]},{$set:p},{upsert:!0})):this.setLocalData(p)}}));let l=JSON.parse(JSON.stringify(r));if(n==="mongo"?(delete l._id,yield this.collections.authorizations.instance.updateOne({$and:[{authorizedId:r.authorizedId},{authorizerId:r.authorizerId},{ownerId:r.ownerId}]},{$set:l},{upsert:!0})):this.setLocalData(l),r._id.includes("defaultId")&&n==="mongo"){let h=yield this.collections.authorizations.instance.findOne(l);if(h&&(r._id=h._id.toString(),s)){let p=yield this.collections.authorizations.instance.findOne({$and:[{authorizedId:s.authorizedId},{authorizerId:s.authorizerId},{ownerId:s.ownerId}]});p&&(p.associatedAuthId=r._id,delete p._id,yield this.collections.authorizations.instance.updateOne({$and:[{authorizedId:p.authorizedId},{authorizerId:p.authorizerId},{ownerId:p.ownerId}]},{$set:p},{upsert:!0}),this.checkToNotify(e,[p]))}}return r})}checkAuthorization(e,r,n="READ",i=this.mode){var o,s,a;return le(this,void 0,void 0,function*(){if(!e||!r)return!1;if(typeof e=="object"){if(r.ownerId===e._id&&!((o=e.userRoles)===null||o===void 0?void 0:o.includes("admin_control")))return!0}else if(typeof e=="string"){if(r.ownerId===e)return!0;e={_id:e}}let l,h;if(i==="mongo"?(l=yield this.collections.authorizations.instance.findOne({$or:[{authorizedId:e._id,authorizerId:r.ownerId,ownerId:e._id},{authorizedId:r.ownerId,authorizerId:e._id,ownerId:e._id}]}),h=yield this.collections.authorizations.instance.findOne({$or:[{authorizedId:e._id,authorizerId:r.ownerId,ownerId:r.ownerId},{authorizedId:r.ownerId,authorizerId:e._id,ownerId:r.ownerId}]})):(l=this.getLocalData("authorization",{ownerId:e._id}).find(m=>{if(m.authorizedId===e._id&&m.authorizerId===r.ownerId)return!0}),h=this.getLocalData("authorization",{ownerId:r.ownerId}).find(m=>{if(m.authorizedId===e._id&&m.authorizerId===r.ownerId)return!0})),!l||!h)return!1;let p=!1;return l.status==="OKAY"&&h.status==="OKAY"&&(r.structType==="group"?p=l.authorizations.indexOf(r.name+"_admin")>-1&&h.authorizations.indexOf(r.name+"_admin")>-1:l.authorizations.indexOf("provider")>-1&&h.authorizations.indexOf("provider")>-1||l.authorizations.indexOf("peer")>-1&&h.authorizations.indexOf("peer")>-1||l.authorizations.indexOf("control")>-1&&h.authorizations.indexOf("control")>-1||((s=l.structIds)===null||s===void 0?void 0:s.indexOf(r._id))>-1&&((a=h.structIds)===null||a===void 0?void 0:a.indexOf(r._id))>-1?p=!0:l.excluded.indexOf(r.structType)>-1&&r.ownerId===e._id&&n==="WRITE"&&(p=!1)),p})}overwriteLocalData(e){if(Array.isArray(e))e.forEach(r=>{let n=this.getLocalData(r.structType,{ownerId:r.ownerId,_id:r._id});n&&(n==null?void 0:n.length)!==0?Object.assign(n,r):this.setLocalData(r)});else{let r=this.getLocalData(e.structType,{ownerId:e.ownerId,_id:e._id});r&&(r==null?void 0:r.length)!==0?Object.assign(r,e):this.setLocalData(e)}}setLocalData(e){let r=n=>{let i=n.structType,o=this.collections[i].reference;o||(o={},this.collections[i].reference=o),o[n._id]=n};Array.isArray(e)?e.forEach(n=>{r(n)}):r(e)}getLocalData(e,r){let n,i,o;if(typeof r=="object"?(n=r.ownerId,i=Object.keys(r).filter(l=>l!="ownerId")[0],o=r[i]):o=r,!(e||n||i||o))return[];let s=[];if(!e&&(n||i))return Object.values(this.collections).forEach(a=>{if(a=a.reference,i!=="_id"&&i!=="id"||!o)Object.values(a).forEach(l=>{i&&o?l[i]===o&&l.ownerId===n&&s.push(l):l.ownerId===n&&s.push(l)});else{let l=a[o];l&&s.push(l)}}),s;{let a=this.collections[e].reference;if(!a)return s;if(!i&&!n)return Object.values(a).forEach(l=>{s.push(l)}),s;if((i==="_id"||i==="id")&&o)return a[o];Object.keys(a).forEach(l=>{let h=a[l];i&&o&&!n?h[i]===o&&s.push(h):n&&!i?h.ownerId===n&&s.push(h):n&&i&&o&&h.ownerId===n&&h[i]&&h[i]===o&&s.push(h)})}return s}deleteLocalData(e){if(!e)throw new Error("Struct not supplied");return!(!e.structType||!e._id)&&(this.collections[e.structType]&&delete this.collections[e.structType].reference[e._id],!0)}},Ip=class extends class{constructor(e={debug:!1}){this.id=ks(),this.USERS={},this.CONNECTIONS=new Map,this.SUBSCRIPTIONS=[],this.ENDPOINTS={},this.SERVICES={},this.ROUTES={},this.INTERVAL=10,this.DEFAULTROUTES=[{route:"ping",post:()=>"pong"},{route:"services/**",get:{object:this.SERVICES,transform:(r,...n)=>{let i={};return(n.length>0?[n[0]]:Object.keys(r)).forEach(o=>{let s=r[o];(s==null?void 0:s.serviceType)==="default"&&(i[o]=s.name)}),n.forEach((o,s)=>i=i[o]),i}}},{route:"/",aliases:["routes/**"],get:{object:this.ROUTES,transform:(r,...n)=>{let i={};return(n.length>0?[n[0]]:Object.keys(r)).forEach(o=>{o&&(i[o]={route:r[o].route.split("/").filter(s=>!s.match(/\*\*?/)).join("/"),args:r[o].args,wildcard:o.includes("*")})}),n.forEach((o,s)=>i=i[o]),i}}},{route:"sendMessage",aliases:["message","sendMsg"],post:(r,n)=>r.sendMsg(n[0],n[1],n[2])},{route:"setUserServerDetails",post:(r,n,i)=>{let o=r.USERS[i];if(!o)return!1;n[0]&&(o.username=n[0]),n[1]&&(o.password=n[1]),n[2]&&(o.props=n[2]),n[3]&&(o._id=n[3],o.id=n[3])}},{route:"setProps",post:(r,n,i)=>{let o=r.USERS[i];if(!o)return!1;if(typeof n=="object"&&!Array.isArray(n))return Object.assign(o.props,n),!0;if(Array.isArray(n)&&typeof n[1]=="object"){let s=r.USERS[n[0]];return s&&Object.assign(s.props,n[1]),!0}return!1}},{route:"getProps",post:(r,n,i)=>{let o=r.USERS[i];if(!o)return!1;if(!n[0])return o.props;{let s=r.USERS[n[0]];if(s)return s.props}}},{route:"blockUser",post:(r,n,i)=>{let o=r.USERS[i];return!!o&&this.blockUser(o,n[0])}},{route:"users/**",get:{object:this.USERS,transform:(r,...n)=>{let i={};return(n.length>0?[n[0]]:Object.keys(r)).forEach(o=>{let s=r[o];i[o]={_id:s._id,username:s.username,origin:s.origin,props:s.props,updatedPropNames:s.updatedPropNames,lastUpdate:s.lastUpdate,lastTransmit:s.lastTransmit,latency:s.latency}}),n.forEach((o,s)=>i=i[o]),i}}},{route:"getUser",post:(r,n,i)=>{let o=r.USERS[i];if(!o)return!1;if(!n[0])return{_id:o._id,username:o.username,origin:o.origin,props:o.props,updatedPropNames:o.updatedPropNames,lastUpdate:o.lastUpdate,lastTransmit:o.lastTransmit,latency:o.latency};{let s=this.USERS[n[0]];if(s)return{_id:s._id,username:s.username,origin:s.origin,props:s.props,updatedPropNames:s.updatedPropNames,lastUpdate:s.lastUpdate,lastTransmit:s.lastTransmit,latency:s.latency}}}},{route:"login",aliases:["addUser","startSession"],post:(r,n,i)=>le(this,void 0,void 0,function*(){let o=yield r.addUser(...n);return{message:!!o,id:o.id}})},{route:"logout",aliases:["removeUser","endSession"],post:(r,n,i)=>{let o=r.USERS[i];if(!o)return!1;n[0]?r.removeUser(...n):r.removeUser(o)}}],this.protocols={},this.connect=(r,n)=>{let i=new X2(r,this.SERVICES,this);return this.ENDPOINTS[i.id]=i,i.check().then(o=>{o&&(n&&n(i),this.login(i))}),i},this.disconnect=r=>le(this,void 0,void 0,function*(){this.logout(this.ENDPOINTS[r]),delete this.ENDPOINTS[r]}),this._loadBackend=(r,n=r.name)=>{var i;this.SERVICES[n]=r,this.SERVICES[n].status=!0,(i=r.routes)===null||i===void 0||i.forEach(o=>this.addRoute(Object.assign({service:n},o))),r.subscribe&&r.subscribe((o,s,a)=>le(this,void 0,void 0,function*(){let l=yield this.handleMessage(o,s);if(a==null?void 0:a.includes("worker")){if(l===null||!r[a])return l;r[a].postMessage({route:"worker/workerPost",message:l,origin:r.id,callbackId:o.callbackId})}return l})),(r==null?void 0:r.serviceType)==="subscription"&&this.SUBSCRIPTIONS.push(r.updateSubscribers)},this._loadService=(r,n=r==null?void 0:r.name)=>le(this,void 0,void 0,function*(){return this._loadBackend(r,n),yield this._loadClient(r,n,!0)}),this._loadClient=(r,n,i=!1)=>new Promise(o=>{let s=r.name;if(r.subscribe&&r.subscribe((a,l)=>le(this,void 0,void 0,function*(){var h;let p=this.SERVICES[s],m=p.status===!0,y;return l==="local"?y=yield this.handleLocalRoute(a):m&&(y=yield this.send({route:`${p.route}/${a.route}`,endpoint:r==null?void 0:r.endpoint},...(h=a.message)!==null&&h!==void 0?h:[])),y})),i)o(r);else{this.SERVICES[s]=r;let a=l=>{this.SERVICES[s].status=!0,r.setEndpointRoute instanceof Function&&r.setEndpointRoute(l),r.routes.forEach(h=>{this.ROUTES[`${l}/${h.route}`]=h}),o(r)};this.SERVICES[s].status===!0?a(this.SERVICES[s]):this.SERVICES[s].status=a}}),this.get=(r,...n)=>this._send(r,"GET",...n),this.delete=(r,...n)=>this._send(r,"DELETE",...n),this.post=(r,...n)=>this._send(r,"POST",...n),this.send=this.post,this._send=(r,n,...i)=>le(this,void 0,void 0,function*(){let o,s;if(o=typeof r=="string"||(r==null?void 0:r.endpoint)==null?Object.values(this.ENDPOINTS)[0]:r.endpoint,o)return s=yield o.send(r,{message:i,method:n}),s&&this.handleLocalRoute(s,o),s==null?void 0:s.message}),this.handleLocalRoute=(r,n,i)=>le(this,void 0,void 0,function*(){var o,s,a;if(n&&i&&!r.suppress&&n.connection&&((a=(s=(o=n.connection)===null||o===void 0?void 0:o.service)===null||s===void 0?void 0:s.responses)===null||a===void 0||a.forEach(l=>l(Object.assign({route:i},r)))),!r.block){let l=this.ROUTES[r==null?void 0:r.route];if((l==null?void 0:l.post)instanceof Function)return l.post(this,r.message,r.id)}}),this.subscribe=(r,n={})=>le(this,void 0,void 0,function*(){if(Object.keys(this.ENDPOINTS).length>0||(n==null?void 0:n.endpoint))return n.endpoint||(n.endpoint=Object.values(this.ENDPOINTS)[0]),yield n.endpoint._subscribe(n).then(i=>n.endpoint.subscribe(r));throw"Remote is not specified"}),this.handleMessage=(r,n)=>le(this,void 0,void 0,function*(){var i;let o={};if(Array.isArray(r))o.route=r[0],o.message=r.slice(1),o.callbackId=void 0;else if(typeof r=="string"){let s=r.split(" ");o.route=s[0],o.message=s.slice(1),o.callbackId=void 0}else typeof r=="object"&&Object.assign(o,r);if(typeof o=="object"&&!Array.isArray(o)&&o.route!=null){let s=this.USERS[o==null?void 0:o.id];console.log("runRoute",o.route);let a=yield this.runRoute(o.route,o.method,o.message,(i=s==null?void 0:s.id)!==null&&i!==void 0?i:o.id,o.callbackId);return a&&o.suppress&&(a.suppress=o.suppress),a}return null}),e.interval&&(this.INTERVAL=e.interval),this.STATE=new K2({},this.INTERVAL,void 0),this.DEBUG=e==null?void 0:e.debug,"onbeforeunload"in globalThis&&(globalThis.onbeforeunload=()=>{Object.values(this.ENDPOINTS).forEach(r=>{r.type!="webrtc"&&this.logout(r)})}),this.load({routes:this.DEFAULTROUTES}),this.DEBUG&&this.runCallback("routes",[!0]),(e==null?void 0:e.endpoints)&&e.endpoints.forEach(r=>this.connect(r))}login(e,r){return le(this,void 0,void 0,function*(){yield this.logout(e);let n=Object.values(e?{endpoint:e}:this.ENDPOINTS);return(yield Promise.all(n.map(o=>le(this,void 0,void 0,function*(){let s=yield this.send({route:"login",endpoint:o},r);return o.setCredentials(s),s})))).reduce((o,s)=>o*s[0],!0)===1})}logout(e){return le(this,void 0,void 0,function*(){return(yield Promise.all(Object.values(e?{endpoint:e}:this.ENDPOINTS).map(r=>le(this,void 0,void 0,function*(){return yield this.send({route:"logout",endpoint:r},r.credentials)})))).reduce((r,n)=>r*n[0],!0)===1})}load(e,r=e.name){return le(this,void 0,void 0,function*(){let n=e.constructor.type==="client",i=!e.constructor.type||e.constructor.type==="service",o=e.constructor.type==="backend";return i&&(yield this._loadService(e,r)),o&&(yield this._loadBackend(e,r)),n&&(yield this._loadClient(e)),e})}format(e,r={}){return e!==void 0&&(e&&typeof e=="object"&&("message"in e||"route"in e)||(e={message:e}),Array.isArray(e.message)||(e.message=[e.message]),r.service&&(e==null?void 0:e.route)&&(e.route=`${r.service}/${e.route}`),r.headers&&(e.headers=r.headers)),(e==null?void 0:e.route)&&(e.route=e.route.replace(/\/\*\*?/,"")),e}runRoute(e,r,n=[],i,o){return le(this,void 0,void 0,function*(){try{return e==null?void 0:(!r&&Array.isArray(n)&&(r=n.length>0?"POST":"GET"),this.DEBUG&&console.log("route",e),yield this.runCallback(e,n,i,r).then(s=>{if(this.DEBUG&&console.log("Result:",s),s!==void 0&&((s=this.format(s)).callbackId=o,this.ROUTES[s.route]&&(s.block=!0),s.message!=="DONOTSEND"))return s}).catch(console.error))}catch(s){return new Error("Route failed...")}})}addUser(e){if(e&&(e.id||e._id)){e._id||(e._id=Oc()),e.id||(e.id=e._id);let r=this.USERS[e._id],n=r!=null?r:{id:e.id,_id:e._id,username:e.id,origin:e.id,props:{},updatedPropNames:[],sessions:[],blocked:[],lastUpdate:Date.now(),lastTransmit:0,latency:0,routes:new Map};Object.assign(n,e),this.DEBUG&&console.log("Adding User, Id:",e._id),this.USERS[e.id]=n;for(let i in this.SERVICES){let o=this.SERVICES[i];o.status===!0&&N2(o.name+"/users").forEach(s=>{this.ROUTES[s]&&this.runRoute(s,"POST",[n],e._id)})}return n}return!1}removeUser(e){let r=typeof e=="string"?this.USERS[e]:e;return!!r&&(Object.values(this.SERVICES).forEach(n=>{if(n.status===!0){let i=n.name+"/users";this.ROUTES[i]&&this.runRoute(i,"DELETE",[r],r.id)}}),delete r.id,!0)}blockUser(e,r=""){return!(!this.USERS[r]||e.blocked.includes(r)||e.id===r)&&(e.blocked.push(r),!0)}sendMsg(e="",r="",n){let i=n?Object.assign(n,{message:r}):{message:r};if(typeof e=="string"){let o=this.USERS[e];o&&o.send(i)}else if(typeof e=="object")return e.send(i),!0;return!1}addRoute(e){let r=[(e=Object.assign({},e)).route,...e.aliases?e.aliases:[]];return delete e.aliases,r.forEach(n=>{var i,o;if(!n||!e.post&&!e.get)return!1;n=e.route=(e.service?`${e.service}/`:"")+n,this.removeRoute(n),n[0]==="/"&&(n=n.slice(1)),e.args=function(s){if(s instanceof Function){var a=s.toString().replace(r6,""),l=a.slice(a.indexOf("(")+1,a.indexOf(")")).match(n6);return l===null&&(l=[]),l}}(e.post),this.ROUTES[n]=Object.assign(e,{route:n}),e.get&&(this.STATE.setState({[n]:(o=(i=e.get)===null||i===void 0?void 0:i.object)!==null&&o!==void 0?o:e.get}),this.STATE.subscribe(n,s=>{var a;let l=((a=e.get)===null||a===void 0?void 0:a.transform)?e.get.transform(s):s;this.SUBSCRIPTIONS.forEach(h=>h(this,{route:n,message:l}))}))}),!0}removeRoute(e){return delete this.ROUTES[e]}runCallback(e,r=[],n,i=r.length>0?"POST":"GET"){return new Promise(o=>le(this,void 0,void 0,function*(){let s=N2(e),a={route:e,block:!0,message:{html:`<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Error</title>
</head>
<body>
<pre>404 Not Found</pre>
</body>
</html>`},headers:{"Content-Type":"text/html"}};Promise.all(s.map(l=>le(this,void 0,void 0,function*(){var h;let p=this.ROUTES[l];if(p){this.DEBUG&&console.log("routeInfo",p);try{let m;if((p==null?void 0:p.delete)&&i.toUpperCase()==="DELETE")m=yield p.delete(this,r,n);else if(i.toUpperCase()!=="GET"&&(p==null?void 0:p.post))m=(p==null?void 0:p.post)?yield p==null?void 0:p.post(this,r,n):a;else{let y=this.STATE.data[p.route];if(y){let w=e.replace(p.route.split("/").filter(b=>b!="*"&&b!="**").join("/"),"").split("/").filter(b=>!!b);m={message:((h=p.get)===null||h===void 0?void 0:h.transform)?yield p.get.transform(y,...w):y}}else m=a}o(this.format(m,p))}catch(m){console.log("Callback Failed: ",m)}}}))).then(l=>o(a))}))}checkRoutes(e){var r,n;return le(this,void 0,void 0,function*(){if(!e.data)return;let i=(n=(r=this.ROUTES[e.data.foo])!==null&&r!==void 0?r:this.ROUTES[e.data.route])!==null&&n!==void 0?n:this.ROUTES[e.data.functionName];return i||(i=this.ROUTES[e.data.foo]),!!i&&(e.data.message?yield i.post(this,e.data.message,e.data.origin):void 0)})}}{constructor(e={},r){super(r),this.tablet=new class{constructor(n={},i=!1,o){this.DS=Ti,this.collections=new Map,this.data={byTime:{},notes:{},events:{},sleep:{},food:{},hr:{},ppg:{},hrv:{},ecg:{},emg:{},eeg:{},fnirs:{}},this.rolloverLimit=5e4,this.dataSorts=new Map,this.watches={},this.onCollectionSet=(s,a)=>{},this.ontrigger=s=>{},this.threaded=i,o?this.workers=o:typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&(this.threaded=!0),Object.assign(this.data,n),this.dataSorts=new Map,this.watches={},this.setSort("event",s=>(this.data.events[s.timestamp]?this.data.events[s.timestamp].push(s):this.data.events[s.timestamp]=[s],s.event==="sleep"&&(this.data.sleep[s.timestamp]?this.data.sleep[s.timestamp].push(s):this.data.sleep[s.timestamp]=[s]),s)),this.setSort(["notes","note","link"],s=>(this.data.notes[s.timestamp]?this.data.notes[s.timestamp].push(s):this.data.notes[s.timestamp]=[s],this.data.byTime[s.timestamp]?this.data.byTime[s.timestamp].push(s):this.data.byTime[s.timestamp]=[s],s)),this.id=this.randomId("dataTablet")}randomId(n=""){return`${n+Math.floor(Math.random()+Math.random()*Math.random()*1e16)}`}setLocalData(n){let i=o=>{let s=o.structType,a=this.collections.get(s);a||(a=new Map,this.collections.set(s,a)),a.set(o._id,o),this.onCollectionSet(s,a)};Array.isArray(n)?n.forEach(o=>{i(o)}):i(n)}getLocalData(n,i){let o="",s="",a="";if(typeof i=="object"?(o=i.ownerId,s=Object.keys(i).filter(h=>h!="ownerId")[0],a=i[s]):a=i,!(n||o||s||a))return[];let l=[];if(!n&&(o||s))return this.collections.forEach(h=>{if(s!=="_id"&&s!=="id"||!a)h.forEach(p=>{s&&a?p[s]===a&&p.ownerId===o&&l.push(p):p.ownerId===o&&l.push(p)});else{let p=h.get(a);p&&l.push(p)}}),l;{let h=this.collections.get(n);if(!h)return l;if(!s&&!o)return h.forEach(p=>{l.push(p)}),l;if((s==="_id"||s==="id")&&a)return h.get(a);h.forEach((p,m)=>{s&&a&&!o?p[s]===a&&l.push(p):o&&!s?p.ownerId===o&&l.push(p):o&&s&&a&&p.ownerId===o&&p[s]&&p[s]===a&&l.push(p)})}return l}runSort(n,i={},o=[],s=this){let a;if(this.threaded===!1){let l=this.getSort(n);if(!l)return!1;a=l(i,o,s)}else if(this.threaded===!0)return this.workers.runWorkerFunction("runSort",[n,i,o],this.workerId,this.id);return a}setSort(n,i=(o,s=[],a=this)=>{}){if(this.threaded===!1)Array.isArray(n)?n.forEach(o=>{this.dataSorts.set(o,i)}):this.dataSorts.set(n,i);else if(this.threaded===!0)return this.workers.runWorkerFunction("setSort",[n,i.toString()],this.workerId,this.id)}getSort(n){return this.threaded===!1?this.dataSorts.get(n):this.threaded===!0?this.workers.runWorkerFunction("getSort",[n],this.workerId,this.id):void 0}checkWatches(n={}){for(let i in this.watches)this.watches[i].ondata(n,this.watches[i].accum,this.watches[i]),this.watches[i].triggered&&(this.ontrigger(this.watches[i].accum),this.watches[i].triggered=!1)}setWatch(n,i=(s,a,l)=>{},o=s=>{}){this.watches[n]={triggered:!1,accum:this.DS.Struct("alert"),ondata:i,ontrigger:o}}getWatch(n){return this.watches[n]}sortStructsIntoTable(){return re(this,arguments,function*(n=[]){n.sort(function(o,s){return o.timestamp-s.timestamp});let i=[];for(let o=0;o<n.length;o++){let s=n[o];if(!s.timestamp)continue;let a=s.timestamp;if(this.data.byTime[a]?this.data.byTime[a].push(s):this.data.byTime[a]=[s],s.structType==="dataInstance"&&s.data)s.data.forEach(l=>re(this,null,function*(){var h;if(typeof l=="object"&&!Array.isArray(l)){let p=l.dataType;if(l.ownerId=s.ownerId,l.timestamp||(l.timestamp=a),p){let m=this.runSort(p,l,i,this);m?((h=m.constructor)==null?void 0:h.name)!=="Promise"&&(this.checkWatches(m),this.onUpdate(a,m),i.push(m)):(this.data[p]||(this.data[p]={}),l.timestamp=a,this.data[p][a]?this.data[p][a].push(l):this.data[p][a]=[l],this.data.byTime[a]?this.data.byTime[a].push(l):this.data.byTime[a]=[l],this.checkWatches(l),this.onUpdate(a,l),i.push(l))}}}));else{let l=this.runSort(s.structType,s,i,this);if(l)this.checkWatches(l),this.onUpdate(a,l),i.push(l);else{let h=s.structType;this.data[h]||(this.data[h]={}),this.data[h][a]?this.data[h][a].push(s):this.data[h][a]=[s],this.checkWatches(s),this.onUpdate(a,s),i.push(s)}}}for(let o in this.data)this.data[o]=this.sortObjectByPropName(this.data[o]);this.onSorted(i)})}onUpdate(n,i,o=this.data){}onSorted(n=[]){}getDataByTimestamp(n,i){if(this.threaded===!0)return this.workers.runWorkerFunction("getDataByTimestamp",[n,i],this.workerId,this.id);let o=this.data.byTime[n];return i&&o&&(o=o.filter(s=>!i||i===s.ownerId)),o}getDataByTimeRange(n,i,o,s){if(this.threaded===!0)return this.workers.runWorkerFunction("getDataByTimeRange",[n,i,o,s],this.workerId,this.id);let a={};if(o){for(let l in this.data[o]){let h=parseInt(l);h>n&&h<i&&(a[l]=[...this.data[o][l]])}o==="sleep"&&(a=this.filterSleepResults(a))}else for(let l in this.data.byTime){let h=parseInt(l);h>n&&h<i&&(a[l]=[...this.data.byTime[l]])}if(s&&a)for(let l in a){let h=[];a[l]=a[l],a[l].forEach((p,m)=>{p.ownerId!==s&&h.push(m)}),h.reverse().forEach(p=>{a[l].splice(p,1)}),a[l].length===0&&delete a[l]}return a}getDataByType(n,i,o){if(!this.data[n])return;let s=jl({},this.data[n]);if(i&&(s=[...s[i]]),o&&s)for(let a in s){let l=[];s[a]=[...s[a]],s[a].forEach((h,p)=>{h.ownerId!==o&&l.push(p)}),l.reverse().forEach(h=>{s[a].splice(h,1)}),s[a].length===0&&delete s[a]}return n==="sleep"&&(s=this.filterSleepResults(s)),s}filterSleepResults(n={}){let i=[];for(let o in n)n[o]=[...n[o]],i.push(...n[o].filter(s=>s.structType==="event"));return i.forEach(o=>{let s;for(let a in n)n[a].forEach((l,h)=>!!(l.structType==="fitbitsleep"&&o.startTime&&o.endTime&&Math.abs(l.startTime-o.startTime)<432e5&&Math.abs(l.endTime-o.endTime)<432e5&&o.endTime-o.startTime>72e5)&&(s=h,!0)),s&&n[a].splice(s,1)}),n}sortObjectByPropName(n){return Object.keys(n).sort().reduce((i,o)=>(i[o]=n[o],i),{})}checkRollover(n,i=this.rolloverLimit){if(!n)return!1;let o=this.collections.get(n);return!!o&&(o.forEach(s=>{for(let a in s)Array.isArray(s[a])?s[a].length>i&&(s[a].slice(s[a].length-i),a==="ffts"?s.fftCount=s[a].length:a==="times"&&(s.count=s[a].length)):typeof s[a]=="object"&&this.checkRollover(s[a])}),!0)}},this.collections=this.tablet.collections,this.id=ks(),this.baseServerCallback=n=>{let i=n;if(typeof n=="object"&&(n==null?void 0:n.structType)&&(i=[n]),Array.isArray(n)){let o=i.filter(s=>{if(s.structType!=="notification")return!0});this.tablet&&this.tablet.sortStructsIntoTable(o),i.forEach(s=>{var a;s.structType&&s.structType!=="USER"||(s.email?s.structType="user":s.structType="uncategorized"),s.structType==="user"||s.structType==="authorization"||s.structType==="group"?(s.structType==="user"&&(s._id=s.id),this.setLocalData(s)):s.structType==="notification"?(this.getLocalData("notification",{ownerId:s.ownerId,_id:s.parent._id})?this.setLocalData(s):this.getLocalData(s.structType,{_id:s.parent._id})||this.overwriteLocalData(s),s.ownerId!==((a=this.currentUser)===null||a===void 0?void 0:a._id)||s.parent.structType!=="user"&&s.parent.structType!=="dataInstance"&&s.parent.structType!=="schedule"&&s.parent.structType!=="authorization"||this.resolveNotifications([s],!0)):this.overwriteLocalData(s)})}(n==null?void 0:n.message)==="notifications"&&this.checkForNotifications(),(n==null?void 0:n.message)==="deleted"&&this.deleteLocalData(n.id),this.onResult(n)},this.resolveNotifications=(n=[],i=!0,o=this.currentUser)=>le(this,void 0,void 0,function*(){if(!o||n.length===0)return;let s=[],a=[],l=[];return n.length===0&&(n=this.getLocalData("notification",{ownerId:o._id})),n.forEach(h=>{h.parent.structType,l.push(h.parent.structType),s.push(h.parent._id),a.push(h._id),this.deleteLocalData(h)}),this.deleteData(a),!(i&&(l.reverse().forEach((h,p)=>{h==="user"&&(this.getUser(a[p]),s.splice(s.length-p-1,1))}),s.length>0))||(yield this.getDataByIds(s,o._id,"notification"))}),this.getLocalUserPeerIds=(n=this.currentUser)=>{if(!n)return[];let i=[];return this.getLocalData("authorization",n._id).forEach(o=>{o.authorizations.indexOf("peer")>-1&&o.authorizerId===n._id&&i.push(o.authorizedId)}),i},this.authorizeUser=(n,i="",o="",s="",a="",l=[],h=[],p=[],m=[],y=!1)=>le(this,void 0,void 0,function*(){if(!n)return;let w=this.createStruct("authorization",void 0,n,void 0);return w.authorizedId=s,w.authorizedName=a,w.authorizerId=i,w.authorizerName=o,w.authorizations=l,w.structs=h,w.excluded=p,w.groups=m,w.expires=y,w.status="PENDING",w.associatedAuthId="",w.ownerId=n._id,w=yield this.setAuthorization(w),w}),this.addGroup=(n,i="",o="",s=[],a=[],l=[],h=!0)=>le(this,void 0,void 0,function*(){if(!n)return;let p=this.createStruct("group",void 0,n);return p.name=i,p.details=o,p.admins=s,p.peers=a,p.clients=l,p.users=[...s,...a,...l],p.ownerId=n._id,h&&(p=yield this.setGroup(p)),p}),this.addData=(n,i="",o="",s="",a=[],l=!1,h=!0)=>le(this,void 0,void 0,function*(){if(!n)return;let p=this.createStruct("dataInstance",void 0,n);return p.author=i,p.title=o,p.type=s,p.data=a,p.expires=l,p.ownerId=n._id,h&&(p=yield this.updateServerData([p])[0]),p}),this.addEvent=(n,i="",o="",s="",a=0,l=0,h=0,p=[],m=[],y=!0)=>le(this,void 0,void 0,function*(){if(!n)return;m.length===0&&(m=this.getLocalUserPeerIds(n));let w=this.createStruct("event",void 0,n);return w.author=i,w.event=o,w.notes=s,w.startTime=a,w.endTime=l,w.grade=h,w.attachments=p,w.users=m,w.ownerId=n._id,y&&(w=yield this.updateServerData([w])[0]),w}),this.addDiscussion=(n,i="",o="",s="",a="",l=[],h=[],p=!0)=>le(this,void 0,void 0,function*(){if(!n)return;h.length===0&&(h=this.getLocalUserPeerIds(n));let m=this.createStruct("discussion",void 0,n);m.topic=o,m.category=s,m.message=a,m.attachments=l,m.authorId=i,m.users=h,m.comments=[],m.replies=[],m.ownerId=n._id;let y=[m];return p&&(m=yield this.updateServerData(y)[0]),m}),this.addChatroom=(n,i="",o="",s=[],a=[],l=!0)=>le(this,void 0,void 0,function*(){if(!n)return;a.length===0&&(a=this.getLocalUserPeerIds(n));let h=this.createStruct("chatroom",void 0,n);h.message=o,h.attachments=s,h.authorId=i,h.users=a,h.replies=[],h.comments=[],h.ownerId=n._id;let p=[h];return l&&(h=yield this.updateServerData(p)[0]),h}),this.addComment=(n,i,o,s="",a="",l=[],h=!0)=>le(this,void 0,void 0,function*(){if(!n)return;let p=this.createStruct("comment",void 0,n,i);p.authorId=s,p.replyTo=o==null?void 0:o._id,p.message=a,p.attachments=l,p.users=i==null?void 0:i.users,p.replies=[],p.ownerId=n._id,h?o==null||o.replies.push(p._id):o==null||o.replies.push(p),h?i==null||i.comments.push(p._id):i==null||i.comments.push(p);let m=[p,i];return o._id!==i._id&&m.push(o),h&&(p=yield this.updateServerData(m)[0]),p}),e instanceof Object&&Object.keys(e).length>0&&this.setupUser(e),this.load(new Q2(this))}setupUser(e,r=n=>{}){return le(this,void 0,void 0,function*(){if(!e)return console.error('must provide an info object! e.g. {_id:"abc123"}'),void r(void 0);let n=!1;e.id&&(e._id=e.id),console.log("Generating/Getting User: ",e._id);let i,o=yield this.getUser(e._id),s=!1;if(o==null?void 0:o._id){i=o.user;for(let a in e){let l=this.userStruct();if(i[a]&&a!=="_id")if(Array.isArray(e[a])){for(let h=0;h<i[a].length;h++)if(e[a].indexOf(i[a][h])<0){i[a]=e[a],n=!0;break}if(!n){for(let h=0;h<e[a].length;h++)if(i[a].indexOf(e[a][h])<0){i[a]=e[a],n=!0;break}}}else i[a]!==e[a]&&(i[a]=e[a],n=!0);else i[a]!==e[a]&&typeof l[a]=="string"&&a!=="_id"&&(i[a]=e[a],n=!0)}(o==null?void 0:o.authorizations)&&Array.isArray(o.authorizations)&&this.setLocalData(o.authorizations),(o==null?void 0:o.groups)&&Array.isArray(o.groups)&&this.setLocalData(o.groups)}else{i=this.userStruct(e,!0),s=!0,yield this.setUser(i);let a=this.getLocalData(void 0,{ownerId:i._id});(a==null?void 0:a.length)>0&&this.updateServerData(a,l=>{console.log("setData",l)}),this.setAuthorizationsByGroup(i)}if(s)this.currentUser=i,this.setLocalData(i);else{let a=yield this.getAllUserData(i._id,void 0);if(console.log("getServerData",a),a&&a.length!==0){this.setLocalData(a);let l=a.filter(y=>{if(y.structType==="notification"&&(this.getLocalData("authorization",y.parent._id)||y.parent.structType==="user"||y.parent.structType==="authorization"||!this.getLocalData(y.parent.structType,y.parent._id)))return!0}),h=a.filter(y=>{if(y.structType==="comment")return!0}),p=[];h.forEach(y=>{this.getLocalData("comment",{_id:y._id})||p.push(y._id)}),p.length>0&&this.deleteData(p),l.length>0&&(this.resolveNotifications(l,!1,void 0),n=!0);let m=a.filter(y=>{if(y.structType!=="notification")return!0});this.tablet&&this.tablet.sortStructsIntoTable(m)}this.setLocalData(i),console.log("currentUser",i),this.currentUser=i,console.log("collections",this.tablet.collections)}return r(this.currentUser),this.currentUser})}onResult(e){}randomId(e=""){return`${e+Math.floor(Math.random()+Math.random()*Math.random()*1e16)}`}addStruct(e="struct",r={},n,i,o=!0){return le(this,void 0,void 0,function*(){let s=Ti.Struct(e,r,n,i);return o&&(s=yield this.updateServerData([s])[0]),s})}ping(e=r=>{console.log(r)}){var r;return le(this,void 0,void 0,function*(){let n=(r=yield this.send("ping"))===null||r===void 0?void 0:r[0];return e(n),n})}sendMessage(e="",r="",n,i=o=>{console.log(o)}){var o;return le(this,void 0,void 0,function*(){let s=[e,r];n&&(s[2]=n);let a=(o=yield this.send("sendMessage",...s))===null||o===void 0?void 0:o[0];return i(a),a})}getUser(e="",r=this.baseServerCallback){var n;return le(this,void 0,void 0,function*(){let i=(n=yield this.send("structs/getUser",e))===null||n===void 0?void 0:n[0];return r(i),i})}getUsers(e=[],r=this.baseServerCallback){var n;return le(this,void 0,void 0,function*(){let i=(n=yield this.send("structs/getUsers",...e))===null||n===void 0?void 0:n[0];return r(i),i})}getUsersByRoles(e=[],r=this.baseServerCallback){var n;return le(this,void 0,void 0,function*(){let i=(n=yield this.send("structs/getUsersByRoles",e))===null||n===void 0?void 0:n[0];return r(i),i})}getAllUserData(e,r=[],n=this.baseServerCallback){var i;return le(this,void 0,void 0,function*(){let o=(i=yield this.send("structs/getAllData",e,r))===null||i===void 0?void 0:i[0];return n(o),o})}getData(e,r,n,i=0,o=0,s=this.baseServerCallback){var a;return le(this,void 0,void 0,function*(){let l=(a=yield this.send("structs/getData",e,r,n,i,o))===null||a===void 0?void 0:a[0];return s(l),l})}getDataByIds(e=[],r,n,i=this.baseServerCallback){var o;return le(this,void 0,void 0,function*(){let s=(o=yield this.send("structs/getDataByIdss",e,r,n))===null||o===void 0?void 0:o[0];return i(s),s})}getStructParentData(e,r=this.baseServerCallback){var n,i,o;return le(this,void 0,void 0,function*(){if(!e.parent)return;let s=[(n=e.parent)===null||n===void 0?void 0:n.structType,"_id",(i=e.parent)===null||i===void 0?void 0:i._id],a=(o=yield this.send("structs/getData",...s))===null||o===void 0?void 0:o[0];return r(a),a})}setUser(e={},r=this.baseServerCallback){var n;return le(this,void 0,void 0,function*(){let i=(n=yield this.send("structs/setUser",this.stripStruct(e)))===null||n===void 0?void 0:n[0];return r(i),i})}checkUserToken(e,r=this.currentUser,n=this.baseServerCallback){return le(this,void 0,void 0,function*(){if(!e)return!1;let i=!1;for(let o in e){let s=this.userStruct();if(r[o]&&o!=="_id")if(Array.isArray(e[o])){for(let a=0;a<r[o].length;a++)if(e[o].indexOf(r[o][a])<0){r[o]=e[o],i=!0;break}if(!i){for(let a=0;a<e[o].length;a++)if(r[o].indexOf(e[o][a])<0){r[o]=e[o],i=!0;break}}}else r[o]!==e[o]&&(r[o]=e[o],i=!0);else!r[o]&&s[o]&&(r[o]=e[o],i=!0)}return i&&(yield this.setUser(r,n))})}updateServerData(e=[],r=this.baseServerCallback){var n;return le(this,void 0,void 0,function*(){let i=new Array;e.forEach(s=>{i.push(this.stripStruct(s))});let o=(n=yield this.send("structs/setData",...i))===null||n===void 0?void 0:n[0];return r(o),o})}deleteData(e=[],r=this.baseServerCallback){var n;return le(this,void 0,void 0,function*(){let i=[];e.forEach(s=>{(s==null?void 0:s.structType)&&(s==null?void 0:s._id)&&(i.push({structType:s.structType,_id:s._id}),this.deleteLocalData(s))}),console.log("deleting",i);let o=(n=yield this.send("structs/deleteData",...i))===null||n===void 0?void 0:n[0];return r(o),o})}deleteUser(e,r=this.baseServerCallback){var n;return le(this,void 0,void 0,function*(){if(!e)return;let i=(n=yield this.send("structs/deleteUser",e))===null||n===void 0?void 0:n[0];return r(i),i})}setGroup(e={},r=this.baseServerCallback){var n;return le(this,void 0,void 0,function*(){let i=(n=yield this.send("structs/setGroup",this.stripStruct(e)))===null||n===void 0?void 0:n[0];return r(i),i})}getGroups(e=this.currentUser._id,r="",n=this.baseServerCallback){var i;return le(this,void 0,void 0,function*(){let o=(i=yield this.send("structs/getGroups",e,r))===null||i===void 0?void 0:i[0];return n(o),o})}deleteGroup(e,r=this.baseServerCallback){var n;return le(this,void 0,void 0,function*(){if(!e)return;this.deleteLocalData(e);let i=(n=yield this.send("structs/deleteGroup",e))===null||n===void 0?void 0:n[0];return r(i),i})}setAuthorization(e={},r=this.baseServerCallback){var n;return le(this,void 0,void 0,function*(){let i=(n=yield this.send("structs/setAuth",this.stripStruct(e)))===null||n===void 0?void 0:n[0];return r(i),i})}getAuthorizations(e,r,n){var i,o;return e===void 0&&(e=(i=this.currentUser)===null||i===void 0?void 0:i._id),r===void 0&&(r=""),n===void 0&&(n=this.baseServerCallback),le(this,void 0,void 0,function*(){if(e===void 0)return;let s=(o=yield this.send("structs/getAuths",e,r))===null||o===void 0?void 0:o[0];return n(s),s})}deleteAuthorization(e,r=this.baseServerCallback){var n;return le(this,void 0,void 0,function*(){if(!e)return;this.deleteLocalData(e);let i=(n=yield this.send("structs/deleteAuth",e))===null||n===void 0?void 0:n[0];return r(i),i})}checkForNotifications(e){var r;return e===void 0&&(e=(r=this.currentUser)===null||r===void 0?void 0:r._id),le(this,void 0,void 0,function*(){return yield this.getData("notification",e)})}setAuthorizationsByGroup(e=this.currentUser){return le(this,void 0,void 0,function*(){let r=this.getLocalData("authorization",{ownerId:e._id});e.userRoles.forEach(n=>{let i,o=n.split("_")[0];n.includes("client")?i=o+"_peer":n.includes("peer")?i=o+"_client":n.includes("admin")&&(i=o+"_owner"),i&&this.getUsersByRoles([i],s=>{s==null||s.forEach(a=>{let l=a.username;l||(l=a.email),l||(l=a.id);let h=e.username;h||(h=e.email),h||(h=e.id),l!==h&&(n.includes("client")?r.find(p=>{if(p.authorizerId===a.id&&p.authorizedId===e.id)return!0})||this.authorizeUser(Ti.ProfileStruct("user",e,e),a.id,l,e.id,h,["peer"],void 0,[n]):n.includes("peer")&&(r.find(p=>{if(p.authorizedId===a.id&&p.authorizerId===e.id)return!0})||this.authorizeUser(Ti.ProfileStruct("user",e,e),e.id,h,a.id,l,["peer"],void 0,[n])))})})})})}deleteRoom(e){var r;return le(this,void 0,void 0,function*(){if(!e)return!1;let n=[e];return(r=e.comments)===null||r===void 0||r.forEach(i=>{let o=this.getLocalData("comment",{_id:i});n.push(o)}),!!e&&(yield this.deleteData(n))})}deleteComment(e){var r,n,i;return le(this,void 0,void 0,function*(){let o=[e],s=(p=e)=>{(p==null?void 0:p.replies)&&p.replies.forEach(m=>{let y=this.getLocalData("comment",{_id:m});y&&(y.replies.length>0&&y.replies.forEach(w=>{s(w)}),o.push(y))})};s(e);let a=this.getLocalData((r=e.parent)===null||r===void 0?void 0:r.structType,{_id:(n=e.parent)===null||n===void 0?void 0:n._id}),l=[];a&&(l=[a],o.forEach(p=>{var m,y;let w=(m=a.replies)===null||m===void 0?void 0:m.indexOf(p._id);w>-1&&a.replies.splice(w,1);let b=(y=a.comments)===null||y===void 0?void 0:y.indexOf(p._id);b>-1&&a.comments.splice(b,1)}));let h=this.getLocalData("comment",{_id:e.replyTo});if((h==null?void 0:h._id)!==(a==null?void 0:a._id)){let p=(i=h.replies)===null||i===void 0?void 0:i.indexOf(a._id);p>-1&&h.replies.splice(p,1),l.push(h)}return l.length>0&&(yield this.updateServerData(l)),yield this.deleteData(o)})}getUserDataByAuthorization(e,r,n,i=0,o=0,s=this.baseServerCallback){return le(this,void 0,void 0,function*(){let a=e.authorizerId;return a?new Promise(l=>le(this,void 0,void 0,function*(){this.getUser(a,h=>le(this,void 0,void 0,function*(){r?yield this.getData(r,a,n,i,o,s):yield this.getAllUserData(a,["notification"],s),l(h),s(h)}))})):void 0})}getUserDataByAuthorizationGroup(e="",r,n,i=0,o=0,s=this.baseServerCallback){return le(this,void 0,void 0,function*(){let a=this.getLocalData("authorization"),l=[];return yield Promise.all(a.map(h=>le(this,void 0,void 0,function*(){var p;if((p=h.groups)===null||p===void 0?void 0:p.includes(e)){let m=h.authorizerId;if(m){let y,w=yield this.getUser(m,s);w&&l.push(w),y=r?yield this.getData(r,m,n,i,o,s):yield this.getAllUserData(m,["notification"],s),y&&l.push(y)}return!0}}))),l})}overwriteLocalData(e){if(Array.isArray(e))e.forEach(r=>{let n=this.getLocalData(r.structType,{ownerId:r.ownerId,_id:r._id});n&&(n==null?void 0:n.length)!==0?Object.assign(n,r):this.setLocalData(r)});else{let r=this.getLocalData(e.structType,{ownerId:e.ownerId,_id:e._id});r&&(r==null?void 0:r.length)!==0?Object.assign(r,e):this.setLocalData(e)}}setLocalData(e){this.tablet.setLocalData(e)}getLocalData(e,r){return this.tablet.getLocalData(e,r)}getLocalReplies(e){let r=[];return e.replies?e.replies.reduce((n,i)=>n*(typeof i=="object"?1:0),1)?e.replies:(r=this.getLocalData("comment",{replyTo:e._id}),r):r}hasLocalAuthorization(e,r=this.currentUser._id){return this.getLocalData("authorization",{ownerId:r}).find(i=>i.authorizedId===r&&i.authorizerId===e||i.authorizerId===r&&i.authorizedId===e||void 0)||!1}deleteLocalData(e){return Array.isArray(e)?e.forEach(r=>this.deleteStruct(r)):this.deleteStruct(e),!0}deleteStruct(e){if(typeof e=="string"&&(e=this.getLocalData(e)),!e)throw new Error("Struct not supplied");return!(!e.structType||!e._id)&&(this.tablet.collections.get(e.structType).delete(e._id),!0)}stripStruct(e={}){let r=Object.assign({},e);for(let n in r)r[n]!==void 0&&r[n].constructor.name!=="Map"||delete r[n];return r}createStruct(e,r,n=this.currentUser,i){return Ti.Struct(e,r,n,i)}userStruct(e={},r=!1){let n=Ti.ProfileStruct(void 0,e,e);e._id?n.id=e._id:e.id?n.id=e.id:n.id="user"+Math.floor(1e10*Math.random()),n._id=n.id,n.ownerId=n.id;for(let i in e)Object.keys(Ti.ProfileStruct()).indexOf(i)<0&&delete n[i];return r&&(this.currentUser=n),n}dataObject(e,r="any",n=Date.now()){return{type:r,data:e,timestamp:n}}}});function Ic(){return re(this,null,function*(){Ye.connect({target:Np.settings.dataserver,credentials:{},type:"websocket"}).subscribe(e=>{console.log("Indirect message from socket",e)}),yield Ye.send("routes").then(e=>console.log("Routes",e)).catch(console.error),console.log("setting up");let t=yield Ye.login(void 0,Is);return console.log("login res",t),Ye.setupUser(Is)})}function tb(){return dn=new Ip,dn.connect({target:Np.settings.dataserver,credentials:vo,type:"websocket"}).subscribe(t=>{console.log("Indirect message from socket",t)}),dn.send("routes").then(t=>console.log("Client 2 Routes",t)).catch(console.error),dn.setupUser(vo)}var Np,Is,vo,dn,Nc=mt(()=>{al();k2();Np=Ft(ys());eb();console.log(cl);Is=cl.ProfileStruct("test",{_id:"test375914777899895",email:"test@myalyce.com",username:"testuser",firstName:"Howard",lastName:"Dent",sex:"m",birthday:"09/10/1993"});vo=cl.ProfileStruct("test",{_id:"test375914777899896",email:"testpeer@myalyce.com",username:"testpeer",firstName:"The",lastName:"Batman",sex:"m",birthday:"01/19/1483"})});var nb=Te(Ap=>{Tw();var rb=Ft(ys());gp();Za();Nc();console.log("using data server URL: ",rb.settings.dataserver);Zr.subscribe("route",t=>{history.replaceState(void 0,t,location.origin+t)});var o6=!0;o6?Ic().then(t=>re(Ap,null,function*(){console.log(t),yield ms(t)})):ll().then(t=>re(Ap,null,function*(){let e=yield ul(t);yield ms(e)}))});var ct=Te((SD,Rc)=>{var ib,ob,sb,ab,lb,ub,cb,fb,hb,Ac,Dp,db,pb,yb,Ns,gb,mb,vb,wb,_b,Sb,bb,Eb,Dc;(function(t){var e=typeof global=="object"?global:typeof self=="object"?self:typeof this=="object"?this:{};typeof define=="function"&&define.amd?define("tslib",["exports"],function(n){t(r(e,r(n)))}):typeof Rc=="object"&&typeof Rc.exports=="object"?t(r(e,r(Rc.exports))):t(r(e));function r(n,i){return n!==e&&(typeof Object.create=="function"?Object.defineProperty(n,"__esModule",{value:!0}):n.__esModule=!0),function(o,s){return n[o]=i?i(o,s):s}}})(function(t){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])};ib=function(n,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");e(n,i);function o(){this.constructor=n}n.prototype=i===null?Object.create(i):(o.prototype=i.prototype,new o)},ob=Object.assign||function(n){for(var i,o=1,s=arguments.length;o<s;o++){i=arguments[o];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])}return n},sb=function(n,i){var o={};for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&i.indexOf(s)<0&&(o[s]=n[s]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(n);a<s.length;a++)i.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(n,s[a])&&(o[s[a]]=n[s[a]]);return o},ab=function(n,i,o,s){var a=arguments.length,l=a<3?i:s===null?s=Object.getOwnPropertyDescriptor(i,o):s,h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")l=Reflect.decorate(n,i,o,s);else for(var p=n.length-1;p>=0;p--)(h=n[p])&&(l=(a<3?h(l):a>3?h(i,o,l):h(i,o))||l);return a>3&&l&&Object.defineProperty(i,o,l),l},lb=function(n,i){return function(o,s){i(o,s,n)}},ub=function(n,i){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,i)},cb=function(n,i,o,s){function a(l){return l instanceof o?l:new o(function(h){h(l)})}return new(o||(o=Promise))(function(l,h){function p(w){try{y(s.next(w))}catch(b){h(b)}}function m(w){try{y(s.throw(w))}catch(b){h(b)}}function y(w){w.done?l(w.value):a(w.value).then(p,m)}y((s=s.apply(n,i||[])).next())})},fb=function(n,i){var o={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},s,a,l,h;return h={next:p(0),throw:p(1),return:p(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function p(y){return function(w){return m([y,w])}}function m(y){if(s)throw new TypeError("Generator is already executing.");for(;o;)try{if(s=1,a&&(l=y[0]&2?a.return:y[0]?a.throw||((l=a.return)&&l.call(a),0):a.next)&&!(l=l.call(a,y[1])).done)return l;switch(a=0,l&&(y=[y[0]&2,l.value]),y[0]){case 0:case 1:l=y;break;case 4:return o.label++,{value:y[1],done:!1};case 5:o.label++,a=y[1],y=[0];continue;case 7:y=o.ops.pop(),o.trys.pop();continue;default:if(l=o.trys,!(l=l.length>0&&l[l.length-1])&&(y[0]===6||y[0]===2)){o=0;continue}if(y[0]===3&&(!l||y[1]>l[0]&&y[1]<l[3])){o.label=y[1];break}if(y[0]===6&&o.label<l[1]){o.label=l[1],l=y;break}if(l&&o.label<l[2]){o.label=l[2],o.ops.push(y);break}l[2]&&o.ops.pop(),o.trys.pop();continue}y=i.call(n,o)}catch(w){y=[6,w],a=0}finally{s=l=0}if(y[0]&5)throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}},hb=function(n,i){for(var o in n)o!=="default"&&!Object.prototype.hasOwnProperty.call(i,o)&&Dc(i,n,o)},Dc=Object.create?function(n,i,o,s){s===void 0&&(s=o),Object.defineProperty(n,s,{enumerable:!0,get:function(){return i[o]}})}:function(n,i,o,s){s===void 0&&(s=o),n[s]=i[o]},Ac=function(n){var i=typeof Symbol=="function"&&Symbol.iterator,o=i&&n[i],s=0;if(o)return o.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&s>=n.length&&(n=void 0),{value:n&&n[s++],done:!n}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")},Dp=function(n,i){var o=typeof Symbol=="function"&&n[Symbol.iterator];if(!o)return n;var s=o.call(n),a,l=[],h;try{for(;(i===void 0||i-- >0)&&!(a=s.next()).done;)l.push(a.value)}catch(p){h={error:p}}finally{try{a&&!a.done&&(o=s.return)&&o.call(s)}finally{if(h)throw h.error}}return l},db=function(){for(var n=[],i=0;i<arguments.length;i++)n=n.concat(Dp(arguments[i]));return n},pb=function(){for(var n=0,i=0,o=arguments.length;i<o;i++)n+=arguments[i].length;for(var s=Array(n),a=0,i=0;i<o;i++)for(var l=arguments[i],h=0,p=l.length;h<p;h++,a++)s[a]=l[h];return s},yb=function(n,i,o){if(o||arguments.length===2)for(var s=0,a=i.length,l;s<a;s++)(l||!(s in i))&&(l||(l=Array.prototype.slice.call(i,0,s)),l[s]=i[s]);return n.concat(l||Array.prototype.slice.call(i))},Ns=function(n){return this instanceof Ns?(this.v=n,this):new Ns(n)},gb=function(n,i,o){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=o.apply(n,i||[]),a,l=[];return a={},h("next"),h("throw"),h("return"),a[Symbol.asyncIterator]=function(){return this},a;function h(N){s[N]&&(a[N]=function(O){return new Promise(function(I,R){l.push([N,O,I,R])>1||p(N,O)})})}function p(N,O){try{m(s[N](O))}catch(I){b(l[0][3],I)}}function m(N){N.value instanceof Ns?Promise.resolve(N.value.v).then(y,w):b(l[0][2],N)}function y(N){p("next",N)}function w(N){p("throw",N)}function b(N,O){N(O),l.shift(),l.length&&p(l[0][0],l[0][1])}},mb=function(n){var i,o;return i={},s("next"),s("throw",function(a){throw a}),s("return"),i[Symbol.iterator]=function(){return this},i;function s(a,l){i[a]=n[a]?function(h){return(o=!o)?{value:Ns(n[a](h)),done:a==="return"}:l?l(h):h}:l}},vb=function(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=n[Symbol.asyncIterator],o;return i?i.call(n):(n=typeof Ac=="function"?Ac(n):n[Symbol.iterator](),o={},s("next"),s("throw"),s("return"),o[Symbol.asyncIterator]=function(){return this},o);function s(l){o[l]=n[l]&&function(h){return new Promise(function(p,m){h=n[l](h),a(p,m,h.done,h.value)})}}function a(l,h,p,m){Promise.resolve(m).then(function(y){l({value:y,done:p})},h)}},wb=function(n,i){return Object.defineProperty?Object.defineProperty(n,"raw",{value:i}):n.raw=i,n};var r=Object.create?function(n,i){Object.defineProperty(n,"default",{enumerable:!0,value:i})}:function(n,i){n.default=i};_b=function(n){if(n&&n.__esModule)return n;var i={};if(n!=null)for(var o in n)o!=="default"&&Object.prototype.hasOwnProperty.call(n,o)&&Dc(i,n,o);return r(i,n),i},Sb=function(n){return n&&n.__esModule?n:{default:n}},bb=function(n,i,o,s){if(o==="a"&&!s)throw new TypeError("Private accessor was defined without a getter");if(typeof i=="function"?n!==i||!s:!i.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return o==="m"?s:o==="a"?s.call(n):s?s.value:i.get(n)},Eb=function(n,i,o,s,a){if(s==="m")throw new TypeError("Private method is not writable");if(s==="a"&&!a)throw new TypeError("Private accessor was defined without a setter");if(typeof i=="function"?n!==i||!a:!i.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return s==="a"?a.call(n,o):a?a.value=o:i.set(n,o),o},t("__extends",ib),t("__assign",ob),t("__rest",sb),t("__decorate",ab),t("__param",lb),t("__metadata",ub),t("__awaiter",cb),t("__generator",fb),t("__exportStar",hb),t("__createBinding",Dc),t("__values",Ac),t("__read",Dp),t("__spread",db),t("__spreadArrays",pb),t("__spreadArray",yb),t("__await",Ns),t("__asyncGenerator",gb),t("__asyncDelegator",mb),t("__asyncValues",vb),t("__makeTemplateObject",wb),t("__importStar",_b),t("__importDefault",Sb),t("__classPrivateFieldGet",bb),t("__classPrivateFieldSet",Eb)})});var Tb=Te(Ob=>{"use strict";Object.defineProperty(Ob,"__esModule",{value:!0})});var kb=Te(xb=>{"use strict";Object.defineProperty(xb,"__esModule",{value:!0})});var Rp=Te(Je=>{"use strict";Object.defineProperty(Je,"__esModule",{value:!0});Je.arrHas=Je.arrLast=Je.arrToBoolDict=Je.arrToIdxDict=Je.arrToDict=Je.arrRemoveValues=Je.arrReplace=Je.arrDeepFlatten=Je.arrFlatten=Je.arrDivide=Je.arrGetByIds=Je.arrRemoveById=Je.arrGen=void 0;var ki=ar(),s6=(t,e=void 0)=>t<1?[]:Array(t).fill(e);Je.arrGen=s6;function a6(t,e,r="id"){let n=Ib(t,r),i=ki.objRemoveKeys(n,e);return ki.objVals(i)}Je.arrRemoveById=a6;function l6(t,e,r="id"){let n=Nb(e);return t.filter(i=>n[i[r]])}Je.arrGetByIds=l6;function u6(t,e){let r=Math.ceil(t.length/e)||0,n=Je.arrGen(r).map(()=>[]);return t.forEach((i,o)=>n[Math.floor(o/e)].push(i)),n}Je.arrDivide=u6;function c6(t){return[].concat.apply([],t)}Je.arrFlatten=c6;var f6=t=>t.reduce((e,r)=>e.concat(ki.isType(r,"array")?Je.arrDeepFlatten(r):r),[]);Je.arrDeepFlatten=f6;function h6(t){let e=[...t];return{all:r=>{let n=[];return t.forEach((i,o)=>ki.equal(r,i)?n[o]=o:null),{with:i=>n.length?(n.forEach(o=>e[o]=i),e):t}},first:r=>{let n=t.findIndex(i=>ki.equal(r,i));return{with:i=>ki.nonValue(n)?t:(e[n]=i,e)}}}}Je.arrReplace=h6;function d6(t,e){let r=[...t];return e.forEach(n=>r=r.filter(i=>!ki.equal(i,n))),r}Je.arrRemoveValues=d6;function Ib(t,e){let r={};return t.forEach(n=>r[n[e]]=n),r}Je.arrToDict=Ib;function p6(t){let e={};return t.forEach((r,n)=>e[r]=n+""),e}Je.arrToIdxDict=p6;function Nb(t){let e={};return t.forEach(r=>e[r]=!0),e}Je.arrToBoolDict=Nb;var y6=t=>t[t.length-1];Je.arrLast=y6;function g6(t,e,r=!1){let n=r?i=>ki.equal(i,e):i=>i===e;return t.findIndex(n)!==-1}Je.arrHas=g6});var Ab=Te(Cc=>{"use strict";Object.defineProperty(Cc,"__esModule",{value:!0});Cc.clone=void 0;function Cp(t){let e,r,n,i,o,s,a;if(typeof t!="object"||t===null)return t;if(t instanceof Date)return new Date(t);if(r=Object.keys(t),n=r.length,Array.isArray(t)){for(s=new Array(n),i=0;i<n;i++)o=r[i],e=t[o],typeof e!="object"||e===null?s[o]=e:e instanceof Date?s[o]=new Date(e):s[o]=Cp(e);return s}for(a={},i=0;i<n;i++)o=r[i],e=t[o],Object.hasOwnProperty.call(t,o)!==!1&&(typeof e!="object"||e===null?a[o]=e:e instanceof Date?a[o]=new Date(e):a[o]=Cp(e));return a}Cc.clone=Cp});var Db=Te(Lc=>{"use strict";Object.defineProperty(Lc,"__esModule",{value:!0});Lc.equal=void 0;function Fc(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){if(t.constructor!==e.constructor)return!1;var r,n,i;if(Array.isArray(t)){if(r=t.length,r!==e.length)return!1;for(n=r;n--!==0;)if(!Fc(t[n],e[n]))return!1;return!0}if(t instanceof Map&&e instanceof Map){if(t.size!==e.size)return!1;for(n of t.entries())if(!e.has(n[0]))return!1;for(n of t.entries())if(!Fc(n[1],e.get(n[0])))return!1;return!0}if(t instanceof Set&&e instanceof Set){if(t.size!==e.size)return!1;for(n of t.entries())if(!e.has(n[0]))return!1;return!0}if(ArrayBuffer.isView(t)&&ArrayBuffer.isView(e)){if(r=t.length,r!=e.length)return!1;for(n=r;n--!==0;)if(t[n]!==e[n])return!1;return!0}if(t.constructor===RegExp)return t.source===e.source&&t.flags===e.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===e.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===e.toString();if(i=Object.keys(t),r=i.length,r!==Object.keys(e).length)return!1;for(n=r;n--!==0;)if(!Object.prototype.hasOwnProperty.call(e,i[n]))return!1;for(n=r;n--!==0;){var o=i[n];if(!(o==="_owner"&&t.$$typeof)&&!Fc(t[o],e[o]))return!1}return!0}return t!==t&&e!==e}Lc.equal=Fc});var Cb=Te(Et=>{"use strict";Object.defineProperty(Et,"__esModule",{value:!0});Et.promiseOut=Et.debounceTimeOut=Et.randomColorHex=Et.uuid=Et.assertType=Et.type=Et.cloneLog=Et.unsubAll=Et.wait=Et.interval=void 0;var $n=ar(),m6=(t,e,r)=>{if($n.isType(r,"number")&&r<1)throw Error(`argument "times" can't be less than 1`);let n=0,i=()=>clearInterval(o),o=setInterval(()=>{t(n,i),n++,r&&n>=r&&i()},e);return{stop:i}};Et.interval=m6;var v6=t=>new Promise(e=>setTimeout(()=>e(),t));Et.wait=v6;var Rb=(t,e="unsubscribe")=>$n.isType(t,"object")&&$n.hasKey(t,e)?t[e]():null;function w6(t,e="unsubscribe"){if($n.isType(t,"array"))t.forEach(r=>Rb(r,e));else if($n.isType(t,"object"))$n.objMap(t,({val:r})=>Rb(r,e));else throw Error('argument "objOrArr" must be of type "object" or "array"')}Et.unsubAll=w6;var _6=t=>console.log($n.clone(t));Et.cloneLog=_6;function S6(t){return typeof t=="object"?Array.isArray(t)?"array":t===null?"null":"object":t!==t?"NaN":typeof t}Et.type=S6;function b6(t,e){$n.isType(e,"array")||(e=[e]);for(let r of e)if($n.isType(t,r))return;throw Error(`value needs to be of type ${e.join(" || ")}`)}Et.assertType=b6;var E6=()=>{let t=new Date().getTime(),e=performance&&performance.now&&performance.now()*1e3||0;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,n=>{let i=Math.random()*16;return t>0?(i=(t+i)%16|0,t=Math.floor(t/16)):(i=(e+i)%16|0,e=Math.floor(e/16)),(n==="x"?i:i&3|8).toString(16)})};Et.uuid=E6;var O6=()=>"#"+((1<<24)*Math.random()|0).toString(16);Et.randomColorHex=O6;function T6(){let t=null;return(e,r)=>{t&&clearTimeout(t),e!=="cancel"&&(t=setTimeout(e,r||0))}}Et.debounceTimeOut=T6;function x6(){let t,e=new Promise(r=>t=r);return{resolve:t,promise:e}}Et.promiseOut=x6});var Fb=Te(Pc=>{"use strict";Object.defineProperty(Pc,"__esModule",{value:!0});Pc.iterate=void 0;var Fp=Rp();function k6(t,e,r){let n=(i,o=!1)=>{let s=[];for(let a=0;a<t;a++)if(!e)s.push(i({x:a}));else for(let l=0;l<e;l++)if(!r)s.push(i({x:a,y:l}));else for(let h=0;h<r;h++)s.push(i({x:a,y:l,z:h}));return o?r&&e?Fp.arrDivide(s,e*r).map(l=>Fp.arrDivide(l,r)):e?Fp.arrDivide(s,e):s:s};return{for:i=>{n(i)},map:i=>n(i),nestedMap:i=>n(i,!0)}}Pc.iterate=k6});var Pb=Te(Pr=>{"use strict";Object.defineProperty(Pr,"__esModule",{value:!0});Pr.newNumFromRange=Pr.numberWithCommas=Pr.decPlace=Pr.average=Pr.rand=void 0;var Lb=ar(),I6=(t,e)=>Math.floor(Math.random()*(e+1-t))+t;Pr.rand=I6;var N6=t=>t.reduce((e=0,r=0)=>e+r,0)/t.length;Pr.average=N6;var A6=(t,e)=>parseFloat(t.toFixed(e));Pr.decPlace=A6;var D6=t=>t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",");Pr.numberWithCommas=D6;function R6(t,e,r){let n,i=0,o=Lb.isType(t,"array")?Lb.arrToBoolDict(t):{[t]:!0};do if(n=Pr.rand(e,r),i++,i>1e6)throw console.error("Check for infinite loops"),new Error("Looped 1 million times");while(o[n]);return n}Pr.newNumFromRange=R6});var Mb=Te(dt=>{"use strict";Object.defineProperty(dt,"__esModule",{value:!0});dt.objPromiseAll=dt.objSortKeys=dt.objResolve=dt.objExtract=dt.objKeyVals=dt.objVals=dt.objKeys=dt.objRemoveKeys=dt.objFilter=dt.objMap=void 0;function C6(t,e){let r={};for(let n in t)r[n]=e({key:n,val:t[n]});return r}dt.objMap=C6;function F6(t,e){let r=Object.assign({},t);for(let n in t)e({key:n,val:t[n]})||delete r[n];return r}dt.objFilter=F6;function L6(t,e){let r=Object.assign({},t);return e.forEach(n=>delete r[n]),r}dt.objRemoveKeys=L6;function Mc(t){if(Object.keys)return Object.keys(t);let e=[];for(let r in t)e.push(r);return e}dt.objKeys=Mc;var P6=t=>Object.values?Object.values(t):Mc(t).map(e=>t[e]);dt.objVals=P6;var M6=t=>Mc(t).map(e=>({key:e,val:t[e]}));dt.objKeyVals=M6;function j6(t,e){let r={};return e.forEach(n=>r[n]=t[n]),r}dt.objExtract=j6;var U6=(t,e)=>e.split(".").reduce((r,n)=>r[n],t);dt.objResolve=U6;var B6=(t,e)=>{let r={};return Mc(t).sort(e).map(i=>r[i]=t[i]),r};dt.objSortKeys=B6;function z6(t){let e=dt.objKeyVals(t),r=e.length,n={},i=0;return new Promise(o=>e.forEach(({key:s,val:a})=>a.then(l=>{n[s]=l,i++,r===i&&o(n)})))}dt.objPromiseAll=z6});var jb=Te(Ii=>{"use strict";Object.defineProperty(Ii,"__esModule",{value:!0});Ii.minAppend=Ii.strRemove=Ii.strIncludes=void 0;var V6=(t,e)=>t.indexOf(e)!==-1;Ii.strIncludes=V6;var W6=(t,e)=>t.replace(new RegExp(e,"g"),"");Ii.strRemove=W6;var q6=(t,e,r="0")=>(r.repeat(e-1)+t).slice(-e);Ii.minAppend=q6});var Bb=Te(Ot=>{"use strict";Object.defineProperty(Ot,"__esModule",{value:!0});Ot.isValidEmail=Ot.nonValue=Ot.nullOrEmpty=Ot.isType=Ot.hasKeys=Ot.hasKey=Ot.equalAny=void 0;var $6=ar(),Ub=ar(),H6=(t,e)=>!!e.find(r=>$6.equal(t,r));Ot.equalAny=H6;var G6=(t,e)=>Ot.isType(t,"object")&&t.hasOwnProperty(e);Ot.hasKey=G6;function J6(t,e){if(!Ot.isType(t,"object"))return!1;for(let r of e)if(!t.hasOwnProperty(r))return!1;return!0}Ot.hasKeys=J6;var Y6=(t,e)=>Ub.type(t)===e;Ot.isType=Y6;function K6(t){return Ot.nonValue(t)?!0:Ot.isType(t,"string")||Ot.isType(t,"array")?!t.length:Ot.isType(t,"object")?!Ub.objVals(t).length:!1}Ot.nullOrEmpty=K6;var Z6=t=>t==null;Ot.nonValue=Z6;var X6=t=>/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(t);Ot.isValidEmail=X6});var zb=Te(_e=>{"use strict";Object.defineProperty(_e,"__esModule",{value:!0});_e.yearStartEnd=_e.monthStartEnd=_e.weekStartEnd=_e.getDayStartEnd=_e.wks=_e.weeks=_e.dys=_e.days=_e.hrs=_e.hours=_e.min=_e.minutes=_e.sec=_e.seconds=_e.msTimeObj=_e.msToTime=_e.msToWks=_e.msToDys=_e.msToHrs=_e.msToMin=_e.msToSec=_e.dateTimeToString=_e.weekTuple=_e.msTime=void 0;var jc=ar();_e.msTime={s:1e3,m:6e4,h:36e5,d:864e5,w:6048e5};_e.weekTuple=["sun","mon","tue","wed","thu","fri","sat"];function Q6(t=new Date){let e=("0"+t.getHours()).slice(-2),r=("0"+t.getMinutes()).slice(-2),n=("0"+t.getSeconds()).slice(-2),i=("00"+t.getMilliseconds()).slice(-3);return`${e}:${r}:${n}:${i}`}_e.dateTimeToString=Q6;var eI=t=>t/_e.msTime.s;_e.msToSec=eI;var tI=t=>t/_e.msTime.m;_e.msToMin=tI;var rI=t=>t/_e.msTime.h;_e.msToHrs=rI;var nI=t=>t/_e.msTime.d;_e.msToDys=nI;var iI=t=>t/_e.msTime.w;_e.msToWks=iI;function oI(t,e=!1){let r=t%1e3,n=Math.floor(t/1e3),i=Math.floor(n/60);n=n%60;let o=Math.floor(i/60);i=i%60;let s=Math.floor(o/24);o=o%24;let a=("00"+s).slice(-3),l=("0"+o).slice(-2),h=("0"+i).slice(-2),p=("0"+n).slice(-2),m=("00"+r).slice(-3);return e?{d:s,h:o,m:i,s:n,ms:r}:`${s?a+":":""}${l}:${h}:${p}:${m}`}_e.msToTime=oI;function sI(t,e=!1){let r=t%1e3,n=Math.floor(t/1e3),i=Math.floor(n/60);n=n%60;let o=Math.floor(i/60);i=i%60;let s=Math.floor(o/24);return o=o%24,e?{d:s,h:o,m:i,s:n,ms:r}:{d:("00"+s).slice(-3),h:("0"+o).slice(-2),m:("0"+i).slice(-2),s:("0"+n).slice(-2),ms:("00"+r).slice(-3)}}_e.msTimeObj=sI;var aI=t=>t*_e.msTime.s;_e.seconds=aI;_e.sec=_e.seconds;var lI=t=>t*_e.msTime.m;_e.minutes=lI;_e.min=_e.minutes;var uI=t=>t*_e.msTime.h;_e.hours=uI;_e.hrs=_e.hours;var cI=t=>t*_e.msTime.d;_e.days=cI;_e.dys=_e.days;var fI=t=>t*_e.msTime.w;_e.weeks=fI;_e.wks=_e.weeks;function hI(t,e="local"){jc.isType(t,"number")&&(t=new Date(t));let r=t.getFullYear(),n=t.getMonth(),i=t.getDate(),o=new Date(r,n,i),s=new Date(r,n,i,23,59,59,999);if(e==="unix"){let a=_e.min(o.getTimezoneOffset());o=new Date(o.getTime()+a),s=new Date(s.getTime()+a)}return{start:o,end:s}}_e.getDayStartEnd=hI;function dI(t,e="sun",r="local"){jc.isType(t,"number")&&(t=new Date(t));let i=t.getDay()*-1+(e==="mon"?1:0),o=6+i,s=new Date(t.getTime()+_e.days(i)),a=new Date(t.getTime()+_e.days(o)),l=new Date(s.getFullYear(),s.getMonth(),s.getDate()),h=new Date(a.getFullYear(),a.getMonth(),a.getDate(),23,59,59,999);if(r==="unix"){let p=_e.min(l.getTimezoneOffset());l=new Date(l.getTime()+p),h=new Date(h.getTime()+p)}return{start:l,end:h}}_e.weekStartEnd=dI;function pI(t,e="local"){jc.isType(t,"number")&&(t=new Date(t));let r=t.getFullYear(),n=t.getMonth(),i=new Date(r,n,1),o=new Date(r,n,0,23,59,59,999);if(e==="unix"){let s=_e.min(i.getTimezoneOffset());i=new Date(i.getTime()+s),o=new Date(o.getTime()+s)}return{start:i,end:o}}_e.monthStartEnd=pI;function yI(t,e="local"){jc.isType(t,"number")&&(t=new Date(t));let r=t.getFullYear(),n=new Date(r,0,1),i=new Date(r,12,0,23,59,59,999);if(e==="unix"){let o=_e.min(n.getTimezoneOffset());n=new Date(n.getTime()+o),i=new Date(i.getTime()+o)}return{start:n,end:i}}_e.yearStartEnd=yI});var ar=Te(tr=>{"use strict";var gI=tr&&tr.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),pn=tr&&tr.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&gI(e,t,r)};Object.defineProperty(tr,"__esModule",{value:!0});pn(kb(),tr);pn(Rp(),tr);pn(Ab(),tr);pn(Db(),tr);pn(Cb(),tr);pn(Fb(),tr);pn(Pb(),tr);pn(Mb(),tr);pn(jb(),tr);pn(Bb(),tr);pn(zb(),tr)});var $t=Te((LD,Uc)=>{(function(){"use strict";var t={}.hasOwnProperty;function e(){for(var r=[],n=0;n<arguments.length;n++){var i=arguments[n];if(!!i){var o=typeof i;if(o==="string"||o==="number")r.push(i);else if(Array.isArray(i)){if(i.length){var s=e.apply(null,i);s&&r.push(s)}}else if(o==="object")if(i.toString===Object.prototype.toString)for(var a in i)t.call(i,a)&&i[a]&&r.push(a);else r.push(i.toString())}}return r.join(" ")}typeof Uc<"u"&&Uc.exports?(e.default=e,Uc.exports=e):typeof define=="function"&&typeof define.amd=="object"&&define.amd?define("classnames",[],function(){return e}):window.classNames=e})()});var Vb=Te(Bc=>{"use strict";Object.defineProperty(Bc,"__esModule",{value:!0});Bc.chevronIcons=void 0;var mI=ct(),Tt=(0,mI.__importDefault)(Pe());Bc.chevronIcons={1:{viewBox:"0 0 16 16",path:Tt.default.createElement("path",{"fill-rule":"evenodd",d:"M1.553 6.776a.5.5 0 0 1 .67-.223L8 9.44l5.776-2.888a.5.5 0 1 1 .448.894l-6 3a.5.5 0 0 1-.448 0l-6-3a.5.5 0 0 1-.223-.67z"})},2:{viewBox:"0 0 16 16",path:Tt.default.createElement("path",{"fill-rule":"evenodd",d:"M3.646 4.146a.5.5 0 0 1 .708 0L8 7.793l3.646-3.647a.5.5 0 0 1 .708.708l-4 4a.5.5 0 0 1-.708 0l-4-4a.5.5 0 0 1 0-.708zM1 11.5a.5.5 0 0 1 .5-.5h13a.5.5 0 0 1 0 1h-13a.5.5 0 0 1-.5-.5z"})},3:{viewBox:"0 0 16 16",path:Tt.default.createElement(Tt.default.Fragment,null,Tt.default.createElement("path",{"fill-rule":"evenodd",d:"M1.646 6.646a.5.5 0 0 1 .708 0L8 12.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z"}),Tt.default.createElement("path",{"fill-rule":"evenodd",d:"M1.646 2.646a.5.5 0 0 1 .708 0L8 8.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z"}))},4:{viewBox:"0 0 16 16",path:Tt.default.createElement("path",{"fill-rule":"evenodd",d:"M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z"})},5:{viewBox:"0 0 24 24",path:Tt.default.createElement(Tt.default.Fragment,null,Tt.default.createElement("path",{d:"M12 2C6.486 2 2 6.486 2 12s4.486 10 10 10 10-4.486 10-10S17.514 2 12 2zm0 18c-4.411 0-8-3.589-8-8s3.589-8 8-8 8 3.589 8 8-3.589 8-8 8z"}),Tt.default.createElement("path",{d:"M12 13.586 7.707 9.293l-1.414 1.414L12 16.414l5.707-5.707-1.414-1.414z"}))},6:{viewBox:"0 0 24 24",path:Tt.default.createElement(Tt.default.Fragment,null,Tt.default.createElement("path",{d:"M5 21h14c1.103 0 2-.897 2-2V5c0-1.103-.897-2-2-2H5c-1.103 0-2 .897-2 2v14c0 1.103.897 2 2 2zM5 5h14l.001 14H5V5z"}),Tt.default.createElement("path",{d:"M12 13.586 7.707 9.293l-1.414 1.414L12 16.414l5.707-5.707-1.414-1.414z"}))},7:{viewBox:"0 0 24 24",path:Tt.default.createElement("path",{d:"M16.293 9.293 12 13.586 7.707 9.293l-1.414 1.414L12 16.414l5.707-5.707z"})},8:{viewBox:"0 0 24 24",path:Tt.default.createElement(Tt.default.Fragment,null,Tt.default.createElement("path",{d:"m12 15.586-4.293-4.293-1.414 1.414L12 18.414l5.707-5.707-1.414-1.414z"}),Tt.default.createElement("path",{d:"m17.707 7.707-1.414-1.414L12 10.586 7.707 6.293 6.293 7.707 12 13.414z"}))},9:{viewBox:"0 0 512 512",path:Tt.default.createElement("path",{d:"M504 256c0 137-111 248-248 248S8 393 8 256 119 8 256 8s248 111 248 248zM273 369.9l135.5-135.5c9.4-9.4 9.4-24.6 0-33.9l-17-17c-9.4-9.4-24.6-9.4-33.9 0L256 285.1 154.4 183.5c-9.4-9.4-24.6-9.4-33.9 0l-17 17c-9.4 9.4-9.4 24.6 0 33.9L239 369.9c9.4 9.4 24.6 9.4 34 0z"})},10:{viewBox:"0 0 24 24",path:Tt.default.createElement("path",{d:"M21.886 5.536A1.002 1.002 0 0 0 21 5H3a1.002 1.002 0 0 0-.822 1.569l9 13a.998.998 0 0 0 1.644 0l9-13a.998.998 0 0 0 .064-1.033zM12 17.243 4.908 7h14.184L12 17.243z"})}}});var Lp=Te(zc=>{"use strict";Object.defineProperty(zc,"__esModule",{value:!0});zc.Chevron=void 0;var qb=ct(),vI=(0,qb.__importDefault)(Pe()),wI=(0,qb.__importDefault)($t()),Wb=Vb(),_I={down:"rotate-0",up:"rotate-180",left:"rotate-90",right:"-rotate-90"},SI={xs:"h-3 w-3",sm:"h-6 w-6",md:"h-12 w-12",lg:"h-24 w-24",xl:"h-48 w-48",auto:"h-full w-full"},bI=function(t){var e=t.direction,r=t.icon,n=t.size,i=n===void 0?"auto":n,o=t.className,s=t.style;return vI.default.createElement("svg",{stroke:"currentColor",fill:"currentColor",strokeWidth:"0",className:(0,wI.default)("transform transition-transform duration-500 svg-fix",SI[i],_I[e],o),viewBox:Wb.chevronIcons[r].viewBox,style:s},Wb.chevronIcons[r].path)};zc.Chevron=bI});var Ni=Te(Or=>{"use strict";Object.defineProperty(Or,"__esModule",{value:!0});Or.customScrollBar=Or.loremIpsum=Or.TextInputBorderMap=Or.regexpUtil=Or.useRefDimensions=Or.clickOutListener=void 0;var Pp=Pe();function EI(t,e){(0,Pp.useEffect)(function(){return document.addEventListener("click",function(r){return t.current&&!t.current.contains(r.target)&&e()})},[t])}Or.clickOutListener=EI;var OI=function(t){var e,r,n=(0,Pp.useState)({width:0,height:0}),i=n[0],o=n[1];return(0,Pp.useEffect)(function(){if(t.current){var s=t.current.getBoundingClientRect(),a=s.width,l=s.height;o({width:a,height:l})}},[(e=t.current)===null||e===void 0?void 0:e.offsetHeight,(r=t.current)===null||r===void 0?void 0:r.offsetWidth]),i};Or.useRefDimensions=OI;Or.regexpUtil={name:/^[a-z ,.'-]+$/i,email:/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/};Or.TextInputBorderMap={default:"border-secondary-300 placeholder-secondary-300 focus:border-primary-400 focus:outline-none focus:ring-1 focus:ring-primary-200",success:"border-success-400 placeholder-success-300 focus:border-success-500 focus:outline-none focus:ring-1 focus:ring-success-200",warning:"border-warning-400 placeholder-warning-300 focus:border-warning-500 focus:outline-none focus:ring-1 focus:ring-warning-200",danger:"border-danger-400 placeholder-danger-300 focus:border-danger-500 focus:outline-none focus:ring-1 focus:ring-danger-200"};Or.loremIpsum="Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.";Or.customScrollBar="scrollbar-thin scrollbar-track-secondary-200 scrollbar-thumb-secondary-400 scrollbar"});var Hb=Te(qc=>{"use strict";Object.defineProperty(qc,"__esModule",{value:!0});qc.Accordion=void 0;var As=ct(),Vc=ar(),Wc=Pe(),yn=(0,As.__importDefault)(Pe()),$b=(0,As.__importDefault)($t()),TI=Lp(),xI=Ni(),kI={xs:"max-w-xs",sm:"max-w-sm",md:"max-w-md",lg:"max-w-lg",xl:"max-w-xl",auto:"w-full"},II={danger:"text-danger-700",info:"text-info-700",primary:"text-primary-700",secondary:"text-secondary-700",success:"text-success-700",warning:"text-warning-700"},NI={danger:"border-danger-600",info:"border-info-600",primary:"border-primary-600",secondary:"border-secondary-600",success:"border-success-600",warning:"border-warning-600"};function AI(t){var e=t.title,r=t.collapseOthers,n=r===void 0?!1:r,i=t.items,o=t.size,s=o===void 0?"auto":o,a=t.type,l=a===void 0?"secondary":a,h=t.className,p=t.style,m=t.contentMaxHeigh,y=(0,Wc.useState)(Date.now()),w=y[0],b=y[1],N=function(O){return b(O)};return yn.default.createElement("main",{className:(0,$b.default)(kI[s],h),style:p},yn.default.createElement("div",{className:"w-full my-1"},e&&yn.default.createElement("h2",{className:"text-xl font-semibold mb-2"},e),yn.default.createElement("ul",{className:"flex flex-col"},i.map(function(O,I){return yn.default.createElement(DI,(0,As.__assign)({},(0,As.__assign)((0,As.__assign)({},O),{collapseOthers:n,onOpen:N,openId:w,type:l,contentMaxHeigh:m}),{key:I}))}))))}qc.Accordion=AI;var DI=function(t){var e=t.title,r=t.content,n=t.onOpen,i=t.openId,o=t.collapseOthers,s=t.type,a=t.onClick,l=(0,As.__rest)(t,["title","content","onOpen","openId","collapseOthers","type","onClick"]),h=(0,Wc.useState)(i),p=h[0],m=h[1],y=(0,Wc.useState)(!1),w=y[0],b=y[1];(0,Wc.useEffect)(function(){i!==p&&(m(i),b(!1))},[i]);var N=function(I){if(!w){var R=Date.now();m(R),o&&n(R)}b(!w),a==null||a(I)},O=(0,Vc.isType)(l.isOpen,"boolean")?l.isOpen:w;return yn.default.createElement("li",{className:"bg-white my-2 shadow-lg"},yn.default.createElement("h2",{onClick:N,className:`\r
                flex flex-row justify-between items-center\r
                font-semibold p-3 cursor-pointer\r
            `},(0,Vc.isType)(r,"string")?yn.default.createElement("span",null,e):e,yn.default.createElement(TI.Chevron,{direction:O?"up":"down",icon:8,size:"sm",className:II[s]})),yn.default.createElement("div",{className:(0,$b.default)("border-l-2 overflow-hidden max-h-0 duration-700 transition-all",xI.customScrollBar,NI[s],O&&"max-h-96"),style:{maxHeight:!(0,Vc.nonValue)(l.contentMaxHeigh)&&O?l.contentMaxHeigh:void 0}},(0,Vc.isType)(r,"string")?yn.default.createElement("p",{className:"p-3 text-gray-900"},r):r))}});var Gb=Te($c=>{"use strict";Object.defineProperty($c,"__esModule",{value:!0});$c.AlertIcon=void 0;var RI=ct(),wo=(0,RI.__importDefault)(Pe()),CI={primary:wo.default.createElement("path",{d:"M16 8c0 3.866-3.582 7-8 7a9.06 9.06 0 0 1-2.347-.306c-.584.296-1.925.864-4.181 1.234-.2.032-.352-.176-.273-.362.354-.836.674-1.95.77-2.966C.744 11.37 0 9.76 0 8c0-3.866 3.582-7 8-7s8 3.134 8 7zM5 8a1 1 0 1 0-2 0 1 1 0 0 0 2 0zm4 0a1 1 0 1 0-2 0 1 1 0 0 0 2 0zm3 1a1 1 0 1 0 0-2 1 1 0 0 0 0 2z"}),danger:wo.default.createElement("path",{d:"M11.46.146A.5.5 0 0 0 11.107 0H4.893a.5.5 0 0 0-.353.146L.146 4.54A.5.5 0 0 0 0 4.893v6.214a.5.5 0 0 0 .146.353l4.394 4.394a.5.5 0 0 0 .353.146h6.214a.5.5 0 0 0 .353-.146l4.394-4.394a.5.5 0 0 0 .146-.353V4.893a.5.5 0 0 0-.146-.353L11.46.146zM8 4c.535 0 .954.462.9.995l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 4.995A.905.905 0 0 1 8 4zm.002 6a1 1 0 1 1 0 2 1 1 0 0 1 0-2z"}),info:wo.default.createElement("path",{d:"M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16zm.93-9.412-1 4.705c-.07.34.029.533.304.533.194 0 .487-.07.686-.246l-.088.416c-.287.346-.92.598-1.465.598-.703 0-1.002-.422-.808-1.319l.738-3.468c.064-.293.006-.399-.287-.47l-.451-.081.082-.381 2.29-.287zM8 5.5a1 1 0 1 1 0-2 1 1 0 0 1 0 2z"}),secondary:wo.default.createElement("path",{d:"M6 .278a.768.768 0 0 1 .08.858 7.208 7.208 0 0 0-.878 3.46c0 4.021 3.278 7.277 7.318 7.277.527 0 1.04-.055 1.533-.16a.787.787 0 0 1 .81.316.733.733 0 0 1-.031.893A8.349 8.349 0 0 1 8.344 16C3.734 16 0 12.286 0 7.71 0 4.266 2.114 1.312 5.124.06A.752.752 0 0 1 6 .278z"}),success:wo.default.createElement("path",{d:"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zm-3.97-3.03a.75.75 0 0 0-1.08.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-.01-1.05z"}),warning:wo.default.createElement("path",{d:"M8.982 1.566a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767L8.982 1.566zM8 5c.535 0 .954.462.9.995l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 5.995A.905.905 0 0 1 8 5zm.002 6a1 1 0 1 1 0 2 1 1 0 0 1 0-2z"})},FI=function(t){return wo.default.createElement("svg",{stroke:"currentColor",fill:"currentColor",strokeWidth:"0",viewBox:"0 0 16 16",height:"1em",width:"1em",xmlns:"http://www.w3.org/2000/svg",className:"flex-shrink-0 w-6 h-6"},CI[t.type])};$c.AlertIcon=FI});var Jb=Te(Hc=>{"use strict";Object.defineProperty(Hc,"__esModule",{value:!0});Hc.Alert=void 0;var jp=ct(),Mp=ar(),LI=(0,jp.__importDefault)($t()),Mr=(0,jp.__importStar)(Pe()),PI=Gb(),MI={primary:"text-primary-600",secondary:"text-secondary-600",info:"text-info-600",warning:"text-warning-600",danger:"text-danger-600",success:"text-success-600"},jI={primary:"text-primary-900",secondary:"text-secondary-900",info:"text-info-900",warning:"text-warning-900",danger:"text-danger-900",success:"text-success-900"},UI=function(t){(0,jp.__extends)(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.state={botW:100,isClosing:!1,isClosed:!1,isHover:!1,transitionDuration:void 0},r.closingDebounce=(0,Mp.debounceTimeOut)(),r.handleMouseHover=function(n){var i=r.props.timeoutMs,o=!(0,Mp.nonValue)(i);o&&!n?r.closingDebounce(r.startClosing,i):n&&r.closingDebounce("cancel"),r.setState(n?{isClosing:!1,botW:100,isHover:n}:{isHover:n,botW:o?0:100})},r.startClosing=function(){r.setState({isClosing:!0}),r.closingDebounce(r.close,700)},r.close=function(){r.props.onClose&&r.props.onClose(),r.setState({isClosed:!0})},r.componentWillUnmount=function(){return r.closingDebounce("cancel")},r.render=function(){var n=r.props,i=n.title,o=n.text,s=n.type,a=n.className,l=n.style,h=r.state,p=h.isHover,m=h.isClosing,y=h.botW,w=h.transitionDuration,b=h.isClosed,N=p?void 0:w,O=(0,LI.default)("bg-white border border-current border-b-0 rounded-lg flex flex-col overflow-hidden transition-opacity duration-700",{"opacity-0":m},MI[s],a);return b?null:Mr.default.createElement("div",{className:O,style:l,onMouseEnter:function(){return r.handleMouseHover(!0)},onMouseLeave:function(){return r.handleMouseHover(!1)}},Mr.default.createElement("div",{className:"p-1 flex w-full overflow-hidden mx-auto"},Mr.default.createElement("div",{className:"pt-2 ml-3"},Mr.default.createElement(PI.AlertIcon,{type:s})),Mr.default.createElement("div",{className:"w-full flex justify-between items-start px-0 py-2"},Mr.default.createElement("div",{className:"ml-3"},Mr.default.createElement("p",{className:"font-bold"},i),o&&Mr.default.createElement("p",{className:"mt-1 text-sm ".concat(jI[s])},o)),Mr.default.createElement("a",{className:"mr-1 cursor-pointer",onClick:r.close},Mr.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},Mr.default.createElement("path",{"stroke-linecap":"round","stroke-linejoin":"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"}))))),Mr.default.createElement("span",{className:"border-b-4 border-current transition-all ease-linear",style:{width:"".concat(y,"%"),transitionDuration:N}}))},r}return e.prototype.componentDidMount=function(){var r=this,n=this.props.timeoutMs;(0,Mp.nonValue)(n)||(this.setState({transitionDuration:"".concat(n,"ms")}),setTimeout(function(){return r.setState({botW:0})},0),this.closingDebounce(this.startClosing,n))},e}(Mr.Component);Hc.Alert=UI});var Jc=Te(Gc=>{"use strict";Object.defineProperty(Gc,"__esModule",{value:!0});Gc.Badge=void 0;var Kb=ct(),BI=ar(),zI=(0,Kb.__importDefault)($t()),Yb=(0,Kb.__importDefault)(Pe()),VI={xs:"h-2 min-w-2",sm:"h-3 min-w-3",md:"h-4 min-w-4",lg:"h-6 min-w-6",xl:"h-12 min-w-12"},WI={md:"text-xs",lg:"text-base",xl:"text-2xl"},qI=function(t){var e=t.size,r=t.badge,n=t.className;return r?Yb.default.createElement("div",{className:(0,zI.default)("bg-info-600 rounded-full absolute top-0 right-0 pl-1 pr-1 flex justify-center text-gray-100",VI[e],n)},(0,BI.isType)(r,"number")&&e!=="sm"&&e!=="xs"&&Yb.default.createElement("span",{className:"m-auto ".concat(WI[e])},r>999?"+999":r)):null};Gc.Badge=qI});var Zb=Te(Yc=>{"use strict";Object.defineProperty(Yc,"__esModule",{value:!0});Yc.spinnersSvg=void 0;Yc.spinnersSvg=['<svg stroke="currentColor" fill="none" stroke-width="0" viewBox="0 0 24 24" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path opacity="0.2" fill-rule="evenodd" clip-rule="evenodd" d="M12 19C15.866 19 19 15.866 19 12C19 8.13401 15.866 5 12 5C8.13401 5 5 8.13401 5 12C5 15.866 8.13401 19 12 19ZM12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z" fill="currentColor"/><path d="M2 12C2 6.47715 6.47715 2 12 2V5C8.13401 5 5 8.13401 5 12H2Z" fill="currentColor"/></svg>','<svg stroke="currentColor" fill="none" stroke-width="0" viewBox="0 0 24 24" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path opacity="0.2" fill-rule="evenodd" clip-rule="evenodd" d="M12 19C15.866 19 19 15.866 19 12C19 8.13401 15.866 5 12 5C8.13401 5 5 8.13401 5 12C5 15.866 8.13401 19 12 19ZM12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z" fill="currentColor"/><path d="M12 22C17.5228 22 22 17.5228 22 12H19C19 15.866 15.866 19 12 19V22Z" fill="currentColor"/><path d="M2 12C2 6.47715 6.47715 2 12 2V5C8.13401 5 5 8.13401 5 12H2Z" fill="currentColor"/></svg>','<svg stroke="currentColor" fill="none" stroke-width="0" viewBox="0 0 24 24" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M12 22C17.5228 22 22 17.5228 22 12H19C19 15.866 15.866 19 12 19V22Z" fill="currentColor"/><path d="M2 12C2 6.47715 6.47715 2 12 2V5C8.13401 5 5 8.13401 5 12H2Z" fill="currentColor"/></svg>','<svg stroke="currentColor" fill="none" stroke-width="0" viewBox="0 0 24 24" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M2 12C2 6.47715 6.47715 2 12 2V5C8.13401 5 5 8.13401 5 12H2Z" fill="currentColor"/></svg>','<svg stroke="currentColor" fill="currentColor" stroke-width="0" version="1.1" viewBox="0 0 16 16" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M16 6h-6l2.243-2.243c-1.133-1.133-2.64-1.757-4.243-1.757s-3.109 0.624-4.243 1.757c-1.133 1.133-1.757 2.64-1.757 4.243s0.624 3.109 1.757 4.243c1.133 1.133 2.64 1.757 4.243 1.757s3.109-0.624 4.243-1.757c0.095-0.095 0.185-0.192 0.273-0.292l1.505 1.317c-1.466 1.674-3.62 2.732-6.020 2.732-4.418 0-8-3.582-8-8s3.582-8 8-8c2.209 0 4.209 0.896 5.656 2.344l2.343-2.344v6z"/></svg>','<svg stroke="currentColor" fill="currentColor" stroke-width="0" version="1.1" viewBox="0 0 16 16" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M0.001 8.025l-0 0c0 0 0 0.001 0 0.003 0.002 0.061 0.009 0.12 0.021 0.177 0.003 0.027 0.007 0.057 0.011 0.090 0.003 0.029 0.007 0.061 0.011 0.095 0.006 0.040 0.012 0.083 0.019 0.128 0.013 0.090 0.028 0.189 0.045 0.296 0.021 0.101 0.044 0.21 0.068 0.326 0.011 0.058 0.028 0.117 0.044 0.178s0.032 0.123 0.049 0.188c0.009 0.032 0.016 0.065 0.027 0.097s0.021 0.065 0.031 0.098 0.043 0.134 0.065 0.203c0.006 0.017 0.011 0.035 0.017 0.052s0.013 0.034 0.019 0.052 0.026 0.070 0.039 0.105c0.027 0.070 0.053 0.142 0.081 0.215 0.031 0.071 0.062 0.144 0.094 0.218 0.016 0.037 0.032 0.074 0.048 0.111s0.035 0.073 0.053 0.111 0.073 0.148 0.11 0.224c0.039 0.075 0.081 0.149 0.123 0.224 0.021 0.037 0.042 0.075 0.063 0.113s0.045 0.074 0.068 0.112 0.093 0.149 0.14 0.224c0.198 0.295 0.417 0.587 0.66 0.864 0.245 0.275 0.511 0.535 0.792 0.775 0.284 0.236 0.582 0.452 0.886 0.642 0.306 0.188 0.619 0.349 0.928 0.487 0.078 0.032 0.156 0.063 0.232 0.095 0.038 0.015 0.076 0.032 0.115 0.046s0.077 0.027 0.115 0.041 0.151 0.054 0.226 0.078c0.075 0.022 0.15 0.044 0.224 0.066 0.037 0.011 0.073 0.022 0.109 0.031s0.073 0.018 0.109 0.027 0.143 0.035 0.213 0.052c0.070 0.014 0.139 0.027 0.207 0.040 0.034 0.006 0.067 0.013 0.101 0.019 0.017 0.003 0.033 0.006 0.049 0.009s0.033 0.005 0.049 0.007c0.066 0.009 0.13 0.018 0.192 0.027 0.031 0.004 0.062 0.009 0.093 0.013s0.061 0.006 0.091 0.009 0.118 0.010 0.174 0.015c0.056 0.005 0.111 0.011 0.164 0.012 0.004 0 0.007 0 0.011 0 0.010 0.544 0.453 0.982 1 0.982 0.008 0 0.017-0 0.025-0.001v0c0 0 0.001-0 0.004-0 0.061-0.002 0.12-0.009 0.177-0.021 0.027-0.003 0.057-0.007 0.090-0.011 0.029-0.003 0.061-0.007 0.095-0.011 0.040-0.006 0.083-0.012 0.128-0.019 0.090-0.013 0.189-0.028 0.296-0.045 0.101-0.021 0.21-0.044 0.326-0.068 0.058-0.011 0.117-0.028 0.178-0.044s0.123-0.033 0.188-0.049c0.032-0.009 0.065-0.016 0.097-0.027s0.065-0.021 0.098-0.031 0.134-0.043 0.203-0.065c0.017-0.006 0.035-0.011 0.052-0.017s0.034-0.013 0.052-0.019 0.070-0.026 0.105-0.039c0.070-0.027 0.142-0.053 0.215-0.081 0.071-0.031 0.144-0.062 0.218-0.094 0.037-0.016 0.074-0.032 0.111-0.048s0.073-0.035 0.111-0.053 0.148-0.073 0.224-0.11c0.075-0.039 0.149-0.081 0.224-0.123 0.037-0.021 0.075-0.042 0.113-0.063s0.074-0.045 0.112-0.068 0.149-0.093 0.224-0.14c0.295-0.197 0.587-0.417 0.864-0.66 0.275-0.245 0.535-0.511 0.775-0.792 0.236-0.284 0.452-0.582 0.642-0.886 0.188-0.306 0.349-0.619 0.487-0.928 0.032-0.078 0.063-0.156 0.095-0.232 0.015-0.038 0.032-0.076 0.046-0.115s0.027-0.077 0.040-0.115 0.054-0.151 0.078-0.226c0.022-0.075 0.044-0.15 0.066-0.224 0.011-0.037 0.022-0.073 0.031-0.109s0.018-0.073 0.027-0.109 0.035-0.143 0.052-0.213c0.014-0.070 0.027-0.139 0.040-0.207 0.006-0.034 0.013-0.067 0.019-0.101 0.003-0.017 0.006-0.033 0.009-0.049s0.005-0.033 0.007-0.050c0.009-0.065 0.018-0.13 0.027-0.192 0.004-0.031 0.009-0.062 0.013-0.093s0.006-0.061 0.009-0.091 0.010-0.118 0.015-0.174c0.005-0.056 0.011-0.111 0.012-0.165 0-0.008 0.001-0.016 0.001-0.025 0.55-0.002 0.996-0.449 0.996-1 0-0.008-0-0.017-0.001-0.025h0c0 0-0-0.001-0-0.003-0.002-0.061-0.009-0.12-0.021-0.177-0.003-0.027-0.007-0.057-0.011-0.090-0.003-0.029-0.007-0.061-0.011-0.095-0.006-0.040-0.012-0.083-0.019-0.128-0.013-0.090-0.028-0.189-0.045-0.296-0.021-0.101-0.044-0.21-0.068-0.326-0.011-0.058-0.028-0.117-0.044-0.178s-0.032-0.123-0.049-0.188c-0.009-0.032-0.016-0.065-0.027-0.097s-0.021-0.065-0.031-0.098-0.043-0.134-0.065-0.203c-0.005-0.017-0.011-0.035-0.017-0.052s-0.013-0.034-0.019-0.052-0.026-0.070-0.039-0.105c-0.027-0.070-0.053-0.142-0.081-0.215-0.031-0.071-0.062-0.144-0.094-0.218-0.016-0.037-0.032-0.074-0.048-0.111s-0.035-0.073-0.053-0.111-0.073-0.148-0.11-0.224c-0.039-0.075-0.081-0.149-0.123-0.224-0.021-0.037-0.042-0.075-0.063-0.113s-0.045-0.074-0.068-0.112-0.093-0.149-0.14-0.224c-0.197-0.295-0.417-0.587-0.66-0.864-0.245-0.275-0.511-0.535-0.792-0.775-0.284-0.236-0.582-0.452-0.886-0.642-0.306-0.188-0.619-0.349-0.928-0.487-0.078-0.032-0.156-0.063-0.232-0.095-0.038-0.015-0.076-0.032-0.115-0.046s-0.077-0.027-0.115-0.040-0.151-0.054-0.226-0.078c-0.075-0.022-0.15-0.044-0.224-0.066-0.037-0.010-0.073-0.022-0.109-0.031s-0.073-0.018-0.109-0.027-0.143-0.035-0.213-0.052c-0.070-0.014-0.139-0.027-0.207-0.040-0.034-0.006-0.067-0.013-0.101-0.019-0.017-0.003-0.033-0.006-0.049-0.009s-0.033-0.005-0.049-0.007c-0.066-0.009-0.13-0.018-0.192-0.027-0.031-0.004-0.062-0.009-0.093-0.013s-0.061-0.006-0.091-0.009-0.118-0.010-0.174-0.015c-0.056-0.005-0.111-0.011-0.164-0.012-0.013-0-0.026-0.001-0.039-0.001-0.010-0.543-0.454-0.981-0.999-0.981-0.008 0-0.017 0-0.025 0.001l-0-0c0 0-0.001 0-0.003 0-0.061 0.002-0.12 0.009-0.177 0.021-0.027 0.003-0.057 0.007-0.090 0.011-0.029 0.003-0.061 0.007-0.095 0.011-0.040 0.006-0.083 0.012-0.128 0.019-0.090 0.013-0.189 0.028-0.296 0.045-0.101 0.021-0.21 0.044-0.326 0.068-0.058 0.011-0.117 0.028-0.178 0.044s-0.123 0.033-0.188 0.049c-0.032 0.009-0.065 0.016-0.097 0.027s-0.065 0.021-0.098 0.031-0.134 0.043-0.203 0.065c-0.017 0.006-0.035 0.011-0.052 0.017s-0.034 0.013-0.052 0.019-0.070 0.026-0.105 0.039c-0.070 0.027-0.142 0.053-0.215 0.081-0.071 0.031-0.144 0.062-0.218 0.094-0.037 0.016-0.074 0.032-0.111 0.048s-0.073 0.035-0.111 0.053-0.148 0.073-0.224 0.11c-0.075 0.039-0.149 0.081-0.224 0.123-0.037 0.021-0.075 0.042-0.113 0.063s-0.074 0.045-0.112 0.068-0.149 0.093-0.224 0.14c-0.295 0.198-0.587 0.417-0.864 0.66-0.275 0.245-0.535 0.511-0.775 0.792-0.236 0.284-0.452 0.582-0.642 0.886-0.188 0.306-0.349 0.619-0.487 0.928-0.032 0.078-0.063 0.156-0.095 0.232-0.015 0.038-0.032 0.076-0.046 0.115s-0.027 0.077-0.040 0.115-0.054 0.151-0.078 0.226c-0.022 0.075-0.044 0.15-0.066 0.224-0.011 0.037-0.022 0.073-0.032 0.109s-0.018 0.073-0.027 0.109-0.035 0.143-0.052 0.213c-0.014 0.070-0.027 0.139-0.040 0.207-0.006 0.034-0.013 0.067-0.019 0.101-0.003 0.017-0.006 0.033-0.009 0.049s-0.005 0.033-0.007 0.050c-0.009 0.065-0.018 0.13-0.027 0.192-0.004 0.031-0.009 0.062-0.013 0.093s-0.006 0.061-0.009 0.091-0.010 0.118-0.015 0.174c-0.005 0.056-0.011 0.111-0.012 0.165-0 0.009-0.001 0.017-0.001 0.025-0.537 0.017-0.967 0.458-0.967 0.999 0 0.008 0 0.017 0.001 0.025zM1.149 7.011c0.001-0.003 0.001-0.006 0.002-0.009 0.010-0.051 0.026-0.102 0.040-0.155s0.030-0.107 0.045-0.163c0.008-0.028 0.015-0.056 0.024-0.084s0.019-0.057 0.028-0.086 0.038-0.116 0.058-0.176c0.005-0.015 0.010-0.030 0.015-0.045s0.012-0.030 0.017-0.045 0.023-0.060 0.035-0.091 0.048-0.123 0.073-0.186c0.028-0.062 0.056-0.125 0.084-0.189 0.014-0.032 0.028-0.064 0.043-0.096s0.032-0.064 0.048-0.096 0.065-0.128 0.098-0.194c0.034-0.065 0.073-0.128 0.109-0.194 0.018-0.032 0.037-0.065 0.056-0.098s0.040-0.064 0.061-0.096c0.041-0.064 0.082-0.129 0.124-0.194 0.176-0.255 0.369-0.506 0.583-0.744 0.217-0.236 0.451-0.459 0.697-0.665 0.25-0.202 0.511-0.385 0.776-0.547 0.268-0.159 0.541-0.294 0.808-0.41 0.068-0.027 0.135-0.053 0.202-0.079 0.033-0.013 0.066-0.027 0.099-0.038s0.067-0.022 0.1-0.033 0.131-0.045 0.196-0.065c0.065-0.018 0.13-0.036 0.194-0.054 0.032-0.009 0.063-0.019 0.095-0.026s0.063-0.014 0.094-0.021 0.123-0.028 0.184-0.042c0.061-0.011 0.12-0.021 0.179-0.032 0.029-0.005 0.058-0.010 0.087-0.015 0.014-0.003 0.029-0.005 0.043-0.008s0.029-0.003 0.043-0.005c0.056-0.007 0.112-0.014 0.166-0.020 0.027-0.003 0.053-0.007 0.080-0.010s0.053-0.004 0.078-0.006 0.102-0.007 0.15-0.011c0.049-0.003 0.095-0.008 0.142-0.008 0.091-0.002 0.177-0.004 0.256-0.006 0.073 0.003 0.14 0.005 0.2 0.007 0.030 0.001 0.058 0.002 0.085 0.002 0.033 0.002 0.064 0.004 0.093 0.006 0.033 0.002 0.063 0.004 0.091 0.006 0.051 0.008 0.103 0.012 0.156 0.012 0.007 0 0.015-0 0.022-0.001 0.002 0 0.004 0 0.004 0v-0c0.487-0.012 0.887-0.372 0.962-0.84 0.008 0.002 0.017 0.004 0.025 0.006 0.051 0.010 0.102 0.026 0.155 0.040s0.107 0.030 0.163 0.045c0.028 0.008 0.056 0.015 0.084 0.024s0.057 0.019 0.086 0.028 0.116 0.038 0.176 0.058c0.015 0.005 0.030 0.010 0.045 0.015s0.030 0.012 0.045 0.017 0.060 0.023 0.091 0.035 0.123 0.048 0.186 0.073c0.062 0.028 0.125 0.056 0.189 0.084 0.032 0.014 0.064 0.028 0.096 0.043s0.064 0.032 0.096 0.048 0.128 0.065 0.194 0.098c0.065 0.034 0.129 0.073 0.194 0.109 0.032 0.018 0.065 0.037 0.098 0.056s0.064 0.040 0.096 0.061 0.129 0.082 0.194 0.124c0.255 0.176 0.506 0.369 0.744 0.583 0.236 0.217 0.459 0.451 0.665 0.697 0.202 0.25 0.385 0.511 0.547 0.776 0.159 0.268 0.294 0.541 0.41 0.808 0.027 0.068 0.053 0.135 0.079 0.202 0.013 0.033 0.027 0.066 0.038 0.099s0.022 0.067 0.033 0.1 0.045 0.131 0.065 0.196c0.018 0.065 0.036 0.13 0.054 0.194 0.009 0.032 0.019 0.063 0.026 0.095s0.014 0.063 0.021 0.094 0.028 0.123 0.042 0.184c0.011 0.061 0.021 0.12 0.032 0.179 0.005 0.029 0.010 0.058 0.015 0.087 0.003 0.014 0.005 0.029 0.008 0.043s0.003 0.029 0.005 0.043c0.007 0.056 0.014 0.112 0.020 0.166 0.003 0.027 0.007 0.053 0.010 0.080s0.004 0.053 0.006 0.078 0.007 0.102 0.011 0.15c0.003 0.049 0.008 0.095 0.008 0.142 0.002 0.091 0.004 0.177 0.006 0.256-0.003 0.073-0.005 0.14-0.007 0.2-0.001 0.030-0.002 0.058-0.002 0.085-0.002 0.033-0.004 0.064-0.006 0.093-0.002 0.033-0.004 0.063-0.006 0.091-0.008 0.051-0.012 0.103-0.012 0.156 0 0.007 0 0.015 0.001 0.022-0 0.002-0 0.004-0 0.004h0c0.012 0.481 0.363 0.877 0.823 0.959-0.001 0.005-0.002 0.009-0.003 0.014-0.010 0.051-0.025 0.102-0.040 0.155s-0.030 0.107-0.045 0.163c-0.008 0.028-0.015 0.056-0.024 0.084s-0.019 0.057-0.028 0.086-0.039 0.116-0.058 0.176c-0.005 0.015-0.010 0.030-0.015 0.045s-0.012 0.030-0.017 0.045-0.023 0.060-0.035 0.091-0.048 0.123-0.073 0.186c-0.028 0.062-0.056 0.125-0.084 0.189-0.014 0.032-0.028 0.064-0.043 0.096s-0.032 0.064-0.048 0.096-0.065 0.128-0.098 0.194c-0.034 0.065-0.073 0.129-0.109 0.194-0.018 0.032-0.037 0.065-0.056 0.098s-0.040 0.064-0.061 0.096-0.082 0.129-0.124 0.194c-0.176 0.255-0.369 0.506-0.583 0.744-0.217 0.236-0.451 0.459-0.697 0.665-0.25 0.202-0.511 0.385-0.776 0.547-0.268 0.159-0.541 0.294-0.808 0.41-0.068 0.027-0.135 0.053-0.202 0.079-0.033 0.013-0.066 0.027-0.099 0.038s-0.067 0.022-0.1 0.033-0.131 0.045-0.196 0.065c-0.065 0.018-0.13 0.036-0.194 0.054-0.032 0.009-0.063 0.019-0.095 0.026s-0.063 0.014-0.094 0.021-0.123 0.028-0.184 0.042c-0.061 0.011-0.12 0.021-0.179 0.032-0.029 0.005-0.058 0.010-0.087 0.015-0.014 0.003-0.028 0.005-0.043 0.008s-0.029 0.003-0.043 0.005c-0.056 0.007-0.112 0.014-0.166 0.020-0.027 0.003-0.053 0.007-0.080 0.010s-0.053 0.004-0.078 0.006-0.102 0.007-0.15 0.011c-0.049 0.003-0.095 0.008-0.142 0.008-0.091 0.002-0.177 0.004-0.256 0.006-0.073-0.003-0.14-0.005-0.2-0.007-0.030-0.001-0.058-0.002-0.085-0.002-0.033-0.002-0.064-0.004-0.093-0.006-0.033-0.002-0.063-0.004-0.091-0.006-0.051-0.008-0.103-0.012-0.156-0.012-0.007 0-0.015 0-0.022 0.001-0.002-0-0.003-0-0.003-0v0c-0.484 0.012-0.883 0.369-0.961 0.834-0.050-0.010-0.101-0.025-0.153-0.039s-0.107-0.030-0.163-0.045c-0.028-0.008-0.056-0.015-0.084-0.024s-0.057-0.019-0.086-0.028-0.116-0.039-0.176-0.058c-0.015-0.005-0.030-0.010-0.045-0.015s-0.030-0.012-0.045-0.017-0.060-0.023-0.091-0.035-0.123-0.048-0.186-0.073c-0.062-0.028-0.125-0.056-0.189-0.084-0.032-0.014-0.064-0.028-0.096-0.043s-0.064-0.032-0.096-0.048-0.128-0.065-0.194-0.098c-0.065-0.034-0.129-0.073-0.194-0.109-0.032-0.018-0.065-0.037-0.098-0.056s-0.064-0.040-0.096-0.061c-0.064-0.041-0.129-0.082-0.194-0.124-0.255-0.175-0.506-0.369-0.744-0.583-0.236-0.217-0.459-0.451-0.665-0.697-0.202-0.25-0.385-0.511-0.547-0.776-0.159-0.268-0.294-0.541-0.41-0.808-0.027-0.068-0.053-0.135-0.079-0.202-0.013-0.033-0.027-0.066-0.038-0.099s-0.022-0.067-0.033-0.1-0.045-0.131-0.065-0.196c-0.018-0.065-0.036-0.13-0.054-0.194-0.009-0.032-0.019-0.063-0.026-0.095s-0.014-0.063-0.021-0.094-0.028-0.123-0.042-0.184c-0.011-0.061-0.021-0.12-0.032-0.179-0.005-0.029-0.010-0.058-0.015-0.087-0.003-0.014-0.005-0.028-0.008-0.043s-0.003-0.029-0.005-0.043c-0.007-0.056-0.014-0.112-0.020-0.166-0.003-0.027-0.007-0.053-0.010-0.080s-0.004-0.053-0.006-0.078-0.007-0.101-0.011-0.15c-0.003-0.049-0.008-0.095-0.008-0.142-0.002-0.091-0.004-0.177-0.006-0.256 0.003-0.073 0.005-0.14 0.007-0.2 0.001-0.030 0.002-0.058 0.002-0.085 0.002-0.033 0.004-0.064 0.006-0.093 0.002-0.033 0.004-0.063 0.006-0.091 0.008-0.051 0.012-0.103 0.012-0.156 0-0.007-0-0.015-0.001-0.022 0-0.002 0-0.003 0-0.003h-0c-0.012-0.49-0.377-0.893-0.851-0.964z"/></svg>','<svg stroke="currentColor" fill="currentColor" stroke-width="0" version="1.1" viewBox="0 0 16 16" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M8 0c-4.355 0-7.898 3.481-7.998 7.812 0.092-3.779 2.966-6.812 6.498-6.812 3.59 0 6.5 3.134 6.5 7 0 0.828 0.672 1.5 1.5 1.5s1.5-0.672 1.5-1.5c0-4.418-3.582-8-8-8zM8 16c4.355 0 7.898-3.481 7.998-7.812-0.092 3.779-2.966 6.812-6.498 6.812-3.59 0-6.5-3.134-6.5-7 0-0.828-0.672-1.5-1.5-1.5s-1.5 0.672-1.5 1.5c0 4.418 3.582 8 8 8z"/></svg>','<svg stroke="currentColor" fill="currentColor" stroke-width="0" version="1.1" viewBox="0 0 16 16" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M8 0c-4.418 0-8 3.582-8 8s3.582 8 8 8 8-3.582 8-8-3.582-8-8-8zM8 4c2.209 0 4 1.791 4 4s-1.791 4-4 4-4-1.791-4-4 1.791-4 4-4zM12.773 12.773c-1.275 1.275-2.97 1.977-4.773 1.977s-3.498-0.702-4.773-1.977-1.977-2.97-1.977-4.773c0-1.803 0.702-3.498 1.977-4.773l1.061 1.061c0 0 0 0 0 0-2.047 2.047-2.047 5.378 0 7.425 0.992 0.992 2.31 1.538 3.712 1.538s2.721-0.546 3.712-1.538c2.047-2.047 2.047-5.378 0-7.425l1.061-1.061c1.275 1.275 1.977 2.97 1.977 4.773s-0.702 3.498-1.977 4.773z"/></svg>','<svg stroke="currentColor" fill="currentColor" stroke-width="0" version="1.1" viewBox="0 0 16 16" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M3 8c0-0.19 0.011-0.378 0.032-0.563l-2.89-0.939c-0.092 0.487-0.141 0.989-0.141 1.502 0 2.3 0.971 4.374 2.526 5.833l1.786-2.458c-0.814-0.889-1.312-2.074-1.312-3.375zM13 8c0 1.301-0.497 2.486-1.312 3.375l1.786 2.458c1.555-1.459 2.526-3.533 2.526-5.833 0-0.513-0.049-1.015-0.141-1.502l-2.89 0.939c0.021 0.185 0.032 0.373 0.032 0.563zM9 3.1c1.436 0.292 2.649 1.199 3.351 2.435l2.89-0.939c-1.144-2.428-3.473-4.188-6.241-4.534v3.038zM3.649 5.535c0.702-1.236 1.914-2.143 3.351-2.435v-3.038c-2.769 0.345-5.097 2.105-6.241 4.534l2.89 0.939zM10.071 12.552c-0.631 0.288-1.332 0.448-2.071 0.448s-1.44-0.16-2.071-0.448l-1.786 2.458c1.144 0.631 2.458 0.99 3.857 0.99s2.713-0.359 3.857-0.99l-1.786-2.458z"/></svg>','<svg stroke="currentColor" fill="currentColor" stroke-width="0" version="1.1" viewBox="0 0 16 16" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M16 8c-0.020-1.045-0.247-2.086-0.665-3.038-0.417-0.953-1.023-1.817-1.766-2.53s-1.624-1.278-2.578-1.651c-0.953-0.374-1.978-0.552-2.991-0.531-1.013 0.020-2.021 0.24-2.943 0.646-0.923 0.405-1.758 0.992-2.449 1.712s-1.237 1.574-1.597 2.497c-0.361 0.923-0.533 1.914-0.512 2.895 0.020 0.981 0.234 1.955 0.627 2.847 0.392 0.892 0.961 1.7 1.658 2.368s1.523 1.195 2.416 1.543c0.892 0.348 1.851 0.514 2.799 0.493 0.949-0.020 1.89-0.227 2.751-0.608 0.862-0.379 1.642-0.929 2.287-1.604s1.154-1.472 1.488-2.335c0.204-0.523 0.342-1.069 0.415-1.622 0.019 0.001 0.039 0.002 0.059 0.002 0.552 0 1-0.448 1-1 0-0.028-0.001-0.056-0.004-0.083h0.004zM14.411 10.655c-0.367 0.831-0.898 1.584-1.55 2.206s-1.422 1.112-2.254 1.434c-0.832 0.323-1.723 0.476-2.608 0.454-0.884-0.020-1.759-0.215-2.56-0.57-0.801-0.354-1.526-0.867-2.125-1.495s-1.071-1.371-1.38-2.173c-0.31-0.801-0.457-1.66-0.435-2.512s0.208-1.694 0.551-2.464c0.342-0.77 0.836-1.468 1.441-2.044s1.321-1.029 2.092-1.326c0.771-0.298 1.596-0.438 2.416-0.416s1.629 0.202 2.368 0.532c0.74 0.329 1.41 0.805 1.963 1.387s0.988 1.27 1.272 2.011c0.285 0.74 0.418 1.532 0.397 2.32h0.004c-0.002 0.027-0.004 0.055-0.004 0.083 0 0.516 0.39 0.94 0.892 0.994-0.097 0.544-0.258 1.075-0.481 1.578z"/></svg>','<svg stroke="currentColor" fill="currentColor" stroke-width="0" version="1.1" viewBox="0 0 16 16" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M8 16c-2.137 0-4.146-0.832-5.657-2.343s-2.343-3.52-2.343-5.657c0-1.513 0.425-2.986 1.228-4.261 0.781-1.239 1.885-2.24 3.193-2.895l0.672 1.341c-1.063 0.533-1.961 1.347-2.596 2.354-0.652 1.034-0.997 2.231-0.997 3.461 0 3.584 2.916 6.5 6.5 6.5s6.5-2.916 6.5-6.5c0-1.23-0.345-2.426-0.997-3.461-0.635-1.008-1.533-1.822-2.596-2.354l0.672-1.341c1.308 0.655 2.412 1.656 3.193 2.895 0.803 1.274 1.228 2.748 1.228 4.261 0 2.137-0.832 4.146-2.343 5.657s-3.52 2.343-5.657 2.343z"/></svg>']});var Kc=Te(_o=>{"use strict";Object.defineProperty(_o,"__esModule",{value:!0});_o.Spinner=_o.spinnerSizeMap=void 0;var Xb=ct(),$I=(0,Xb.__importDefault)($t()),Up=(0,Xb.__importDefault)(Pe()),HI=Zb();_o.spinnerSizeMap={xs:"h-6 w-6",sm:"h-9 w-9",md:"h-16 w-16",lg:"h-32 w-32",xl:"h-64 w-64",auto:"h-full w-full"};var GI=function(t){var e=t.type,r=e===void 0?1:e,n=t.size,i=n===void 0?"auto":n,o=t.className;return Up.default.createElement("div",{className:(0,$I.default)("overflow-hidden",o,_o.spinnerSizeMap[i])},r==="pulse"?Up.default.createElement("div",{className:"bg-secondary-300 h-full w-full animate-pulse"}):Up.default.createElement("img",{src:"data:image/svg+xml;utf8,".concat(HI.spinnersSvg[r-1]),className:"animate-spin h-full w-full"}))};_o.Spinner=GI});var Zc=Te(So=>{"use strict";Object.defineProperty(So,"__esModule",{value:!0});So.AvatarInner=So.Avatar=void 0;var Bp=ct(),Qb=ar(),Tr=(0,Bp.__importStar)(Pe()),JI=Jc(),YI=(0,Bp.__importDefault)($t()),KI={xs:"h-6 w-6",sm:"h-9 w-9",md:"h-16 w-16",lg:"h-32 w-32",xl:"h-64 w-64",auto:"h-full w-full"},ZI=Kc(),XI=function(t){var e=t.dataState,r=t.imgSrc,n=t.backgroundColor,i=t.status,o=t.badge,s=t.size,a=t.onClick,l=t.className,h=function(){if(e==="loading"||e==="error")return e==="error"?"Couldn't Load User":e==="loading"?"Loading...":"";if((0,Qb.isType)(t.name,"string")||!t.name)return t.name||"";var p=t.name,m=p.first,y=p.last;return"".concat(m," ").concat(y)}();return Tr.default.createElement("div",{onClick:a,className:(0,YI.default)(`
            flex relative justify-center items-center
            m-1 mr-2 rounded-full text-white`,KI[s],!(n||e==="loading")&&"bg-secondary-500",e==="loading"&&" overflow-hidden",a&&"cursor-pointer",l),title:e==="error"?"Couldn't Load User":e==="loading"?"Loading...":h,style:{backgroundColor:n}},Tr.default.createElement(So.AvatarInner,(0,Bp.__assign)({},{dataState:e,imgSrc:r,badge:o,size:s,status:i,name:h})))};So.Avatar=XI;var QI={xs:"text-sm",sm:"text-xl",md:"text-4xl",lg:"text-7xl",xl:"text-9xl"},eN=function(t){if(t.dataState==="loading")return Tr.default.createElement(ZI.Spinner,{size:"auto",type:"pulse"});if(t.dataState==="error")return Tr.default.createElement("img",{src:"data:image/svg+xml;utf8,".concat(iN),className:"rounded-full h-full w-full"});var e=t.imgSrc,r=t.status,n=t.badge,i=t.size,o=t.name,s=o===void 0?"":o,a=(0,Tr.useState)(e?"loading":"error"),l=a[0],h=a[1],p=(0,Qb.isType)(s,"string")?s.substring(0,2):"".concat(s.first[0].toUpperCase()).concat(s.last[0].toUpperCase());return Tr.default.createElement(Tr.default.Fragment,null,Tr.default.createElement(JI.Badge,{size:i,badge:n}),l==="error"?Tr.default.createElement("span",{className:QI[i]},p):Tr.default.createElement("img",{className:"rounded-full h-full w-full",src:e,onLoad:function(){return h("success")},onError:function(){return h("error")}}),r&&Tr.default.createElement(nN,{size:i,status:r}))};So.AvatarInner=eN;var tN={xs:"h-2 w-2",sm:"h-3 w-3",md:"h-4 w-4",lg:"h-6 w-6",xl:"h-12 w-12"},rN={online:"bg-success-500",offline:"bg-danger-500",busy:"bg-warning-500",away:"bg-secondary-500"},nN=function(t){return Tr.default.createElement("span",{className:"flex absolute bottom-0 right-0"},t.status==="online"&&Tr.default.createElement("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-success-400 opacity-75"}),Tr.default.createElement("span",{className:"relative inline-flex rounded-full ".concat(rN[t.status]," ").concat(tN[t.size])}))},iN='<svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 16 16" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M4.54.146A.5.5 0 0 1 4.893 0h6.214a.5.5 0 0 1 .353.146l4.394 4.394a.5.5 0 0 1 .146.353v6.214a.5.5 0 0 1-.146.353l-4.394 4.394a.5.5 0 0 1-.353.146H4.893a.5.5 0 0 1-.353-.146L.146 11.46A.5.5 0 0 1 0 11.107V4.893a.5.5 0 0 1 .146-.353L4.54.146zM5.1 1 1 5.1v5.8L5.1 15h5.8l4.1-4.1V5.1L10.9 1H5.1z"/><path d="M5.255 5.786a.237.237 0 0 0 .241.247h.825c.138 0 .248-.113.266-.25.09-.656.54-1.134 1.342-1.134.686 0 1.314.343 1.314 1.168 0 .635-.374.927-.965 1.371-.673.489-1.206 1.06-1.168 1.987l.003.217a.25.25 0 0 0 .25.246h.811a.25.25 0 0 0 .25-.25v-.105c0-.718.273-.927 1.01-1.486.609-.463 1.244-.977 1.244-2.056 0-1.511-1.276-2.241-2.673-2.241-1.267 0-2.655.59-2.75 2.286zm1.557 5.763c0 .533.425.927 1.01.927.609 0 1.028-.394 1.028-.927 0-.552-.42-.94-1.029-.94-.584 0-1.009.388-1.009.94z"/></svg>'});var rE=Te(Xc=>{"use strict";Object.defineProperty(Xc,"__esModule",{value:!0});Xc.AvatarGroup=void 0;var Vp=ct(),zp=(0,Vp.__importDefault)($t()),dl=(0,Vp.__importDefault)(Pe()),eE=Zc(),tE={xs:"h-6 w-6",sm:"h-9 w-9",md:"h-16 w-16",lg:"h-32 w-32",xl:"h-64 w-64",auto:"h-full w-full"},oN=function(t){var e=t.maxShow,r=e===void 0?5:e,n=t.avatars,i=t.size,o=t.onClick;if(r<1)return console.error(`Property "maxShow" can't be less than 1`),null;var s=n.slice(0,r),a=n.length-s.length;return dl.default.createElement("div",{className:(0,zp.default)("flex flex-row-reverse justify-center mt-10",o&&"cursor-pointer",t.className),onClick:o},a>0&&dl.default.createElement("div",{className:(0,zp.default)(`
                flex flex-shrink-0 relative
                bg-secondary-500
                justify-center items-center m-1 mr-2 -ml-3 rounded-full border-r-2 text-xl text-white`,tE[i])},dl.default.createElement(eE.AvatarInner,{size:i,dataState:"done",name:"+".concat(a)})),s.map(function(l,h){var p=l.dataState,m=l.backgroundColor,y=l.imgSrc,w=l.name,b=l.status,N={dataState:p,name:w,imgSrc:y,status:b,size:i};return dl.default.createElement("div",{className:(0,zp.default)("flex flex-shrink-0 relative justify-center items-center m-1 mr-2 -ml-3 rounded-full border-r-2 border-white",!(l.backgroundColor||l.dataState==="loading")&&"bg-secondary-500",tE[i]),style:{backgroundColor:m},key:h},dl.default.createElement(eE.AvatarInner,(0,Vp.__assign)({},N)))}))};Xc.AvatarGroup=oN});var ef=Te(Qc=>{"use strict";Object.defineProperty(Qc,"__esModule",{value:!0});Qc.Backdrop=void 0;var qp=ct(),sN=(0,qp.__importDefault)($t()),Wp=(0,qp.__importStar)(Pe()),aN=function(t){var e=t.zIndex,r=t.onBackdropClick,n=t.maxOpacity,i=n===void 0?40:n,o=t.transition,s=o===void 0?!0:o,a=t.style,l=t.className,h=(0,Wp.useState)(!s),p=h[0],m=h[1];return(0,Wp.useEffect)(function(){return!p&&setTimeout(function(){return m(!0)},0)},[p]),Wp.default.createElement("div",{className:(0,sN.default)("fixed top-0 left-0 right-0 w-screen h-screen bg-black",s&&"transition-opacity duration-200",l),style:(0,qp.__assign)({zIndex:e,opacity:p?Number((i/100).toFixed(2)):0},a),onClick:r})};Qc.Backdrop=aN});var pl=Te(rf=>{"use strict";Object.defineProperty(rf,"__esModule",{value:!0});rf.Button=void 0;var tf=ct(),lN=(0,tf.__importDefault)($t()),$p=(0,tf.__importStar)(Pe()),uN=Jc(),cN={xs:"text-xs p-0.5 px-1",sm:"text-sm p-1 px-2",md:"text-base p-1.5 px-3",lg:"text-lg p-2 px-4",xl:"text-xl p-2.5 px-5",auto:"p-1.5 text-base h-full w-full"},fN={primary:"bg-primary-500",secondary:"bg-secondary-500",success:"bg-success-500",info:"bg-info-500",danger:"bg-danger-500",warning:"bg-warning-500"},hN={primary:"hover:bg-primary-600",secondary:"hover:bg-secondary-600",success:"hover:bg-success-600",info:"hover:bg-info-600",danger:"hover:bg-danger-700",warning:"hover:bg-warning-600"},dN={primary:"border-primary-500 text-primary-500",secondary:"border-secondary-500 text-secondary-500",success:"border-success-500 text-success-500",info:"border-info-500 text-info-500",danger:"border-danger-500 text-danger-500",warning:"border-warning-500 text-warning-500"},pN={xs:"xs",sm:"sm",md:"md",lg:"md",xl:"lg",auto:"md"},yN=function(t){var e=t.size,r=e===void 0?"md":e,n=t.type,i=n===void 0?"secondary":n,o=t.shape,s=o===void 0?"round":o,a=t.outline,l=a===void 0?!1:a,h=t.badge,p=t.className,m=t.disabled,y=t.children,w=t.htmlType,b=w===void 0?"button":w,N=(0,tf.__rest)(t,["size","type","shape","outline","badge","className","disabled","children","htmlType"]),O=(0,$p.useState)(!1),I=O[0],R=O[1];return $p.default.createElement("button",(0,tf.__assign)({type:b,className:(0,lN.default)("relative text-gray-100 font-normal border-2 transition-all",cN[r],l&&!I?dN[i]:fN[i]+" border-transparent",s==="flat"?"rounded-none":"rounded-lg",m&&"opacity-60",!m&&hN[i],p),onMouseEnter:function(){return R(!m)},onMouseLeave:function(){return R(!1)},disabled:m},N),h&&$p.default.createElement(uN.Badge,{size:pN[r],badge:h,className:r==="xs"||r==="sm"?"-top-1.5 -right-1.5":"-top-2 -right-3"}),y)};rf.Button=yN});var nE=Te(of=>{"use strict";Object.defineProperty(of,"__esModule",{value:!0});of.Dropdown=void 0;var nf=ct(),gN=ar(),yl=(0,nf.__importDefault)($t()),xr=(0,nf.__importStar)(Pe()),mN=Ni(),vN={xs:"w-30",sm:"w-44",md:"w-60",lg:"w-80",xl:"w-96",auto:"w-full"};function wN(t){var e=t.header,r=t.items,n=t.show,i=t.children,o=t.itemBorders,s=t.size,a=s===void 0?"md":s,l=t.className,h=t.align,p=h===void 0?"left":h,m=t.containerClassName,y=(0,xr.useState)(n||!1),w=y[0],b=y[1],N=function(){return setTimeout(function(){return b(!1)},0)},O=(0,xr.useRef)(null);(0,mN.clickOutListener)(O,N);var I=o?r.filter(function(J){return J.type!=="break"}):r,R={onClick:function(){return b(!w)},onBlur:N};return xr.default.createElement("div",(0,nf.__assign)({className:(0,yl.default)("relative",m)},n??R,{ref:O}),i,xr.default.createElement("div",{className:(0,yl.default)("animate-slide-down absolute bg-white text-sm list-none divide-gray-100 rounded-sm shadow-md border",!(n??w)&&"hidden",p==="right"&&"right-0 left-auto",vN[a],l)},e&&xr.default.createElement("div",{className:(0,yl.default)("cursor-default",o&&"border-b border-secondary-200")},(0,gN.isType)(e,"string")?xr.default.createElement("span",{className:"py-1.5 block text-center text-gray-500 text-base"},e):e),xr.default.createElement("ul",null,I.map(function(J,q,G){var F=G.length;return xr.default.createElement(_N,(0,nf.__assign)({},J,{border:o,isLast:q===F-1,key:q}))}))))}of.Dropdown=wN;var _N=function(t){var e=(0,yl.default)(!t.isLast&&t.border&&"border-b border-secondary-200");switch(t.type){case"action":return xr.default.createElement("li",{className:e},xr.default.createElement("a",{className:"hover:bg-gray-100 text-gray-700 cursor-pointer block px-4 py-1.5",onClick:t.onClick},t.title));case"break":return xr.default.createElement("hr",{className:"my-1 dark:border-gray-600"});case"section":return xr.default.createElement("li",{className:(0,yl.default)("text-gray-600 text-center block py-1 cursor-default",e)},xr.default.createElement("span",{className:"text-xs"},t.title));case"jsx":return xr.default.createElement("li",{className:e},t.element);default:throw console.error(t),new Error("This type of MenuItem is not implemented.")}}});var uy=Te(jr=>{"use strict";function SN(t){return t&&typeof t=="object"&&"default"in t?t:{default:t}}Object.defineProperty(jr,"__esModule",{value:!0});var Ce=SN(Pe()),ml=t=>t.type==="checkbox",Rs=t=>t instanceof Date,kr=t=>t==null,mE=t=>typeof t=="object",Ht=t=>!kr(t)&&!Array.isArray(t)&&mE(t)&&!Rs(t),vE=t=>Ht(t)&&t.target?ml(t.target)?t.target.checked:t.target.value:t,wE=(t,e)=>[...t].some(r=>(n=>n.substring(0,n.search(/.\d/))||n)(e)===r),vl=t=>t.filter(Boolean),at=t=>t===void 0,Oe=(t,e,r)=>{if(!e||!Ht(t))return r;let n=vl(e.split(/[,[\].]+?/)).reduce((i,o)=>kr(i)?i:i[o],t);return at(n)||n===t?at(t[e])?r:t[e]:n},_E="blur",bN="focusout",EN="change",ON="onBlur",SE="onChange",bE="onSubmit",TN="onTouched",wl="all",xN="max",kN="min",IN="maxLength",NN="minLength",iE="pattern",oE="required",AN="validate",hf=(t,e)=>{let r=Object.assign({},t);return delete r[e],r},EE=Ce.default.createContext(null),_l=()=>Ce.default.useContext(EE),OE=(t,e,r,n=!0)=>{let i={};for(let o in t)Object.defineProperty(i,o,{get:()=>{let s=o;return e[s]!==wl&&(e[s]=!n||wl),r&&(r[s]=!0),t[s]}});return i},Ur=t=>Ht(t)&&!Object.keys(t).length,TE=(t,e,r)=>{let n=hf(t,"name");return Ur(n)||Object.keys(n).length>=Object.keys(e).length||Object.keys(n).find(i=>e[i]===(!r||wl))},Br=t=>Array.isArray(t)?t:[t],xE=(t,e,r)=>r&&e?t===e:!t||!e||t===e||Br(t).some(n=>n&&(n.startsWith(e)||e.startsWith(n)));function lf(t){let e=Ce.default.useRef(t);e.current=t,Ce.default.useEffect(()=>{let r=!t.disabled&&e.current.subject.subscribe({next:e.current.callback});return()=>(n=>{n&&n.unsubscribe()})(r)},[t.disabled])}function kE(t){let e=_l(),{control:r=e.control,disabled:n,name:i,exact:o}=t||{},[s,a]=Ce.default.useState(r._formState),l=Ce.default.useRef({isDirty:!1,dirtyFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1}),h=Ce.default.useRef(i),p=Ce.default.useRef(!0);return h.current=i,lf({disabled:n,callback:Ce.default.useCallback(m=>p.current&&xE(h.current,m.name,o)&&TE(m,l.current)&&a(Object.assign(Object.assign({},r._formState),m)),[r,o]),subject:r._subjects.state}),Ce.default.useEffect(()=>()=>{p.current=!1},[]),OE(s,r._proxyFormState,l.current,!1)}var Rn=t=>typeof t=="string",IE=(t,e,r,n)=>{let i=Array.isArray(t);return Rn(t)?(n&&e.watch.add(t),Oe(r,t)):i?t.map(o=>(n&&e.watch.add(o),Oe(r,o))):(n&&(e.watchAll=!0),r)},df=t=>typeof t=="function",oy=t=>{for(let e in t)if(df(t[e]))return!0;return!1};function NE(t){let e=_l(),{control:r=e.control,name:n,defaultValue:i,disabled:o,exact:s}=t||{},a=Ce.default.useRef(n);a.current=n;let l=Ce.default.useCallback(m=>{if(xE(a.current,m.name,s)){let y=IE(a.current,r._names,m.values||r._formValues);p(at(a.current)||Ht(y)&&!oy(y)?Object.assign({},y):Array.isArray(y)?[...y]:at(y)?i:y)}},[r,s,i]);lf({disabled:o,subject:r._subjects.watch,callback:l});let[h,p]=Ce.default.useState(at(i)?r._getWatch(n):i);return Ce.default.useEffect(()=>{r._removeUnmounted()}),h}function sE(t){let e=_l(),{name:r,control:n=e.control,shouldUnregister:i}=t,o=wE(n._names.array,r),s=NE({control:n,name:r,defaultValue:Oe(n._formValues,r,Oe(n._defaultValues,r,t.defaultValue)),exact:!0}),a=kE({control:n,name:r}),l=Ce.default.useRef(n.register(r,Object.assign(Object.assign({},t.rules),{value:s})));return Ce.default.useEffect(()=>{let h=(p,m)=>{let y=Oe(n._fields,p);y&&(y._f.mount=m)};return h(r,!0),()=>{let p=n._options.shouldUnregister||i;(o?p&&!n._stateFlags.action:p)?n.unregister(r):h(r,!1)}},[r,n,o,i]),{field:{name:r,value:s,onChange:Ce.default.useCallback(h=>{l.current.onChange({target:{value:vE(h),name:r},type:EN})},[r]),onBlur:Ce.default.useCallback(()=>{l.current.onBlur({target:{value:Oe(n._formValues,r),name:r},type:_E})},[r,n]),ref:Ce.default.useCallback(h=>{let p=Oe(n._fields,r);h&&p&&h.focus&&(p._f.ref={focus:()=>h.focus(),setCustomValidity:m=>h.setCustomValidity(m),reportValidity:()=>h.reportValidity()})},[r,n._fields])},formState:a,fieldState:n.getFieldState(r,a)}}var AE=(t,e,r,n,i)=>e?Object.assign(Object.assign({},r[t]),{types:Object.assign(Object.assign({},r[t]&&r[t].types?r[t].types:{}),{[n]:i||!0})}):{},sy=t=>/^\w*$/.test(t),DE=t=>vl(t.replace(/["|']|\]/g,"").split(/\.|\[/));function pt(t,e,r){let n=-1,i=sy(e)?[e]:DE(e),o=i.length,s=o-1;for(;++n<o;){let a=i[n],l=r;if(n!==s){let h=t[a];l=Ht(h)||Array.isArray(h)?h:isNaN(+i[n+1])?{}:[]}t[a]=l,t=t[a]}return t}var uf=(t,e,r)=>{for(let n of r||Object.keys(t)){let i=Oe(t,n);if(i){let o=i._f,s=hf(i,"_f");if(o&&e(o.name)){if(o.ref.focus&&at(o.ref.focus()))break;if(o.refs){o.refs[0].focus();break}}else Ht(s)&&uf(s,e)}}},Ai=()=>{let t=typeof performance>"u"?Date.now():1e3*performance.now();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{let r=(16*Math.random()+t)%16|0;return(e=="x"?r:3&r|8).toString(16)})},Hp=(t,e,r={})=>r.shouldFocus||at(r.shouldFocus)?r.focusName||`${t}.${at(r.focusIndex)?e:r.focusIndex}.`:"",ny=(t,e,r)=>!r&&(e.watchAll||e.watch.has(t)||[...e.watch].some(n=>t.startsWith(n)&&/^\.\w+/.test(t.slice(n.length))));function Gp(t,e){return[...t,...Br(e)]}function Dn(t){let e,r=Array.isArray(t);if(t instanceof Date)e=new Date(t);else if(t instanceof Set)e=new Set(t);else{if(!r&&!Ht(t))return t;e=r?[]:{};for(let n in t){if(df(t[n])){e=t;break}e[n]=Dn(t[n])}}return e}var Jp=t=>Array.isArray(t)?t.map(()=>{}):void 0;function Yp(t,e,r){return[...t.slice(0,e),...Br(r),...t.slice(e)]}var Kp=(t,e,r)=>Array.isArray(t)?(at(t[r])&&(t[r]=void 0),t.splice(r,0,t.splice(e,1)[0]),t):[];function Zp(t,e){return[...Br(e),...Br(t)]}var Xp=(t,e)=>at(e)?[]:function(r,n){let i=0,o=[...r];for(let s of n)o.splice(s-i,1),i++;return vl(o).length?o:[]}(t,Br(e).sort((r,n)=>r-n)),Qp=(t,e,r)=>{t[e]=[t[r],t[r]=t[e]][0]},aE=(t,e,r)=>(t[e]=r,t);function ey(){let t=[];return{get observers(){return t},next:e=>{for(let r of t)r.next(e)},subscribe:e=>(t.push(e),{unsubscribe:()=>{t=t.filter(r=>r!==e)}}),unsubscribe:()=>{t=[]}}}var cf=t=>kr(t)||!mE(t);function Cs(t,e){if(cf(t)||cf(e))return t===e;if(Rs(t)&&Rs(e))return t.getTime()===e.getTime();let r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(let i of r){let o=t[i];if(!n.includes(i))return!1;if(i!=="ref"){let s=e[i];if(Rs(o)&&Rs(s)||Ht(o)&&Ht(s)||Array.isArray(o)&&Array.isArray(s)?!Cs(o,s):o!==s)return!1}}return!0}var lE=t=>({isOnSubmit:!t||t===bE,isOnBlur:t===ON,isOnChange:t===SE,isOnAll:t===wl,isOnTouch:t===TN}),Sl=t=>typeof t=="boolean",ay=t=>t.type==="file",iy=t=>t instanceof HTMLElement,RE=t=>t.type==="select-multiple",ly=t=>t.type==="radio",uE=typeof window<"u"&&window.HTMLElement!==void 0&&typeof document<"u",ty=t=>iy(t)&&t.isConnected;function fr(t,e){let r=sy(e)?[e]:DE(e),n=r.length==1?t:function(s,a){let l=a.slice(0,-1).length,h=0;for(;h<l;)s=at(s)?h++:s[a[h++]];return s}(t,r),i=r[r.length-1],o;n&&delete n[i];for(let s=0;s<r.slice(0,-1).length;s++){let a,l=-1,h=r.slice(0,-(s+1)),p=h.length-1;for(s>0&&(o=t);++l<h.length;){let m=h[l];a=a?a[m]:t[m],p===l&&(Ht(a)&&Ur(a)||Array.isArray(a)&&!a.filter(y=>Ht(y)&&!Ur(y)||Sl(y)||Array.isArray(y)&&y.length).length)&&(o?delete o[m]:delete t[m]),o=a}}return t}function sf(t,e={}){let r=Array.isArray(t);if(Ht(t)||r)for(let n in t)Array.isArray(t[n])||Ht(t[n])&&!oy(t[n])?(e[n]=Array.isArray(t[n])?[]:{},sf(t[n],e[n])):kr(t[n])||(e[n]=!0);return e}var cE=(t,e)=>function r(n,i,o){let s=Array.isArray(n);if(Ht(n)||s)for(let a in n)Array.isArray(n[a])||Ht(n[a])&&!oy(n[a])?at(i)||cf(o[a])?o[a]=Array.isArray(n[a])?sf(n[a],[]):Object.assign({},sf(n[a])):r(n[a],kr(i)?{}:i[a],o[a]):o[a]=!Cs(n[a],i[a]);return o}(t,e,sf(e)),fE={value:!1,isValid:!1},hE={value:!0,isValid:!0},CE=t=>{if(Array.isArray(t)){if(t.length>1){let e=t.filter(r=>r&&r.checked&&!r.disabled).map(r=>r.value);return{value:e,isValid:!!e.length}}return t[0].checked&&!t[0].disabled?t[0].attributes&&!at(t[0].attributes.value)?at(t[0].value)||t[0].value===""?hE:{value:t[0].value,isValid:!0}:hE:fE}return fE},FE=(t,{valueAsNumber:e,valueAsDate:r,setValueAs:n})=>at(t)?t:e?t===""?NaN:+t:r&&Rn(t)?new Date(t):n?n(t):t,dE={isValid:!1,value:null},LE=t=>Array.isArray(t)?t.reduce((e,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:e,dE):dE;function ry(t){let e=t.ref;if(!(t.refs?t.refs.every(r=>r.disabled):e.disabled))return ay(e)?e.files:ly(e)?LE(t.refs).value:RE(e)?[...e.selectedOptions].map(({value:r})=>r):ml(e)?CE(t.refs).value:FE(at(e.value)?t.ref.value:e.value,t)}var ff=t=>t instanceof RegExp,gl=t=>at(t)?void 0:ff(t)?t.source:Ht(t)?ff(t.value)?t.value.source:t.value:t;function pE(t,e,r){let n=Oe(t,r);if(n||sy(r))return{error:n,name:r};let i=r.split(".");for(;i.length;){let o=i.join("."),s=Oe(e,o),a=Oe(t,o);if(s&&!Array.isArray(s)&&r!==o)return{name:r};if(a&&a.type)return{name:o,error:a};i.pop()}return{name:r}}var af=t=>Rn(t)||Ce.default.isValidElement(t);function yE(t,e,r="validate"){if(af(t)||Array.isArray(t)&&t.every(af)||Sl(t)&&!t)return{type:r,message:af(t)?t:"",ref:e}}var Ds=t=>Ht(t)&&!ff(t)?t:{value:t,message:""},gE=async(t,e,r,n)=>{let{ref:i,refs:o,required:s,maxLength:a,minLength:l,min:h,max:p,pattern:m,validate:y,name:w,valueAsNumber:b,mount:N,disabled:O}=t._f;if(!N||O)return{};let I=o?o[0]:i,R=te=>{n&&I.reportValidity&&(I.setCustomValidity(Sl(te)?"":te||" "),I.reportValidity())},J={},q=ly(i),G=ml(i),F=q||G,z=(b||ay(i))&&!i.value||e===""||Array.isArray(e)&&!e.length,S=AE.bind(null,w,r,J),W=(te,X,ue,ae=IN,ge=NN)=>{let M=te?X:ue;J[w]=Object.assign({type:te?ae:ge,message:M,ref:i},S(te?ae:ge,M))};if(s&&(!F&&(z||kr(e))||Sl(e)&&!e||G&&!CE(o).isValid||q&&!LE(o).isValid)){let{value:te,message:X}=af(s)?{value:!!s,message:s}:Ds(s);if(te&&(J[w]=Object.assign({type:oE,message:X,ref:I},S(oE,X)),!r))return R(X),J}if(!(z||kr(h)&&kr(p))){let te,X,ue=Ds(p),ae=Ds(h);if(isNaN(e)){let ge=i.valueAsDate||new Date(e);Rn(ue.value)&&(te=ge>new Date(ue.value)),Rn(ae.value)&&(X=ge<new Date(ae.value))}else{let ge=i.valueAsNumber||+e;kr(ue.value)||(te=ge>ue.value),kr(ae.value)||(X=ge<ae.value)}if((te||X)&&(W(!!te,ue.message,ae.message,xN,kN),!r))return R(J[w].message),J}if((a||l)&&!z&&Rn(e)){let te=Ds(a),X=Ds(l),ue=!kr(te.value)&&e.length>te.value,ae=!kr(X.value)&&e.length<X.value;if((ue||ae)&&(W(ue,te.message,X.message),!r))return R(J[w].message),J}if(m&&!z&&Rn(e)){let{value:te,message:X}=Ds(m);if(ff(te)&&!e.match(te)&&(J[w]=Object.assign({type:iE,message:X,ref:i},S(iE,X)),!r))return R(X),J}if(y){if(df(y)){let te=yE(await y(e),I);if(te&&(J[w]=Object.assign(Object.assign({},te),S(AN,te.message)),!r))return R(te.message),J}else if(Ht(y)){let te={};for(let X in y){if(!Ur(te)&&!r)break;let ue=yE(await y[X](e),I,X);ue&&(te=Object.assign(Object.assign({},ue),S(X,ue.message)),R(ue.message),r&&(J[w]=te))}if(!Ur(te)&&(J[w]=Object.assign({ref:I},te),!r))return J}}return R(!0),J},DN={mode:bE,reValidateMode:SE,shouldFocusError:!0};function RN(t={}){let e,r=Object.assign(Object.assign({},DN),t),n={isDirty:!1,isValidating:!1,dirtyFields:{},isSubmitted:!1,submitCount:0,touchedFields:{},isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,errors:{}},i={},o=r.defaultValues||{},s=r.shouldUnregister?{}:Dn(o),a={action:!1,mount:!1,watch:!1},l={mount:new Set,unMount:new Set,array:new Set,watch:new Set},h=0,p={},m={isDirty:!1,dirtyFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},y={watch:ey(),array:ey(),state:ey()},w=lE(r.mode),b=lE(r.reValidateMode),N=r.criteriaMode===wl,O=async B=>{let V=!1;return m.isValid&&(V=r.resolver?Ur((await G()).errors):await F(i,!0),B||V===n.isValid||(n.isValid=V,y.state.next({isValid:V}))),V},I=(B,V)=>(pt(n.errors,B,V),y.state.next({errors:n.errors})),R=(B,V,Y,ce)=>{let oe=Oe(i,B);if(oe){let ne=Oe(s,B,at(Y)?Oe(o,B):Y);at(ne)||ce&&ce.defaultChecked||V?pt(s,B,V?ne:ry(oe._f)):W(B,ne),a.mount&&O()}},J=(B,V,Y,ce,oe)=>{let ne=!1,se={name:B},ye=Oe(n.touchedFields,B);if(m.isDirty){let Ee=n.isDirty;n.isDirty=se.isDirty=z(),ne=Ee!==se.isDirty}if(m.dirtyFields&&(!Y||ce)){let Ee=Oe(n.dirtyFields,B);Cs(Oe(o,B),V)?fr(n.dirtyFields,B):pt(n.dirtyFields,B,!0),se.dirtyFields=n.dirtyFields,ne=ne||Ee!==Oe(n.dirtyFields,B)}return Y&&!ye&&(pt(n.touchedFields,B,Y),se.touchedFields=n.touchedFields,ne=ne||m.touchedFields&&ye!==Y),ne&&oe&&y.state.next(se),ne?se:{}},q=async(B,V,Y,ce,oe)=>{let ne=Oe(n.errors,V),se=m.isValid&&n.isValid!==Y;var ye,Ee;if(t.delayError&&ce?(e=e||(ye=I,Ee=t.delayError,(...Ae)=>{clearTimeout(h),h=window.setTimeout(()=>ye(...Ae),Ee)}),e(V,ce)):(clearTimeout(h),ce?pt(n.errors,V,ce):fr(n.errors,V)),((ce?!Cs(ne,ce):ne)||!Ur(oe)||se)&&!B){let Ae=Object.assign(Object.assign(Object.assign({},oe),se?{isValid:Y}:{}),{errors:n.errors,name:V});n=Object.assign(Object.assign({},n),Ae),y.state.next(Ae)}p[V]--,m.isValidating&&!Object.values(p).some(Ae=>Ae)&&(y.state.next({isValidating:!1}),p={})},G=async B=>r.resolver?await r.resolver(Object.assign({},s),r.context,((V,Y,ce,oe)=>{let ne={};for(let se of V){let ye=Oe(Y,se);ye&&pt(ne,se,ye._f)}return{criteriaMode:ce,names:[...V],fields:ne,shouldUseNativeValidation:oe}})(B||l.mount,i,r.criteriaMode,r.shouldUseNativeValidation)):{},F=async(B,V,Y={valid:!0})=>{for(let ce in B){let oe=B[ce];if(oe){let ne=oe._f,se=hf(oe,"_f");if(ne){let ye=await gE(oe,Oe(s,ne.name),N,r.shouldUseNativeValidation);if(ye[ne.name]&&(Y.valid=!1,V))break;V||(ye[ne.name]?pt(n.errors,ne.name,ye[ne.name]):fr(n.errors,ne.name))}se&&await F(se,V,Y)}}return Y.valid},z=(B,V)=>(B&&V&&pt(s,B,V),!Cs(ge(),o)),S=(B,V,Y)=>{let ce=Object.assign({},a.mount?s:at(V)?o:Rn(B)?{[B]:V}:V);return IE(B,l,ce,Y)},W=(B,V,Y={})=>{let ce=Oe(i,B),oe=V;if(ce){let ne=ce._f;ne&&(!ne.disabled&&pt(s,B,FE(V,ne)),oe=uE&&iy(ne.ref)&&kr(V)?"":V,RE(ne.ref)?[...ne.ref.options].forEach(se=>se.selected=oe.includes(se.value)):ne.refs?ml(ne.ref)?ne.refs.length>1?ne.refs.forEach(se=>se.checked=Array.isArray(oe)?!!oe.find(ye=>ye===se.value):oe===se.value):ne.refs[0]&&(ne.refs[0].checked=!!oe):ne.refs.forEach(se=>se.checked=se.value===oe):ay(ne.ref)?ne.ref.value="":(ne.ref.value=oe,ne.ref.type||y.watch.next({name:B})))}(Y.shouldDirty||Y.shouldTouch)&&J(B,oe,Y.shouldTouch,Y.shouldDirty,!0),Y.shouldValidate&&ae(B)},te=(B,V,Y)=>{for(let ce in V){let oe=V[ce],ne=`${B}.${ce}`,se=Oe(i,ne);!l.array.has(B)&&cf(oe)&&(!se||se._f)||Rs(oe)?W(ne,oe,Y):te(ne,oe,Y)}},X=(B,V,Y={})=>{let ce=Oe(i,B),oe=l.array.has(B),ne=Dn(V);pt(s,B,ne),oe?(y.array.next({name:B,values:s}),(m.isDirty||m.dirtyFields)&&Y.shouldDirty&&(n.dirtyFields=cE(o,s),y.state.next({name:B,dirtyFields:n.dirtyFields,isDirty:z(B,ne)}))):!ce||ce._f||kr(ne)?W(B,ne,Y):te(B,ne,Y),ny(B,l)&&y.state.next({}),y.watch.next({name:B})},ue=async B=>{let V=B.target,Y=V.name,ce=Oe(i,Y);if(ce){let ne,se,ye=V.type?ry(ce._f):vE(B),Ee=B.type===_E||B.type===bN,Ae=!((oe=ce._f).mount&&(oe.required||oe.min||oe.max||oe.maxLength||oe.minLength||oe.pattern||oe.validate)||r.resolver||Oe(n.errors,Y)||ce._f.deps)||((H,Z,K,Se,L)=>!L.isOnAll&&(!K&&L.isOnTouch?!(Z||H):(K?Se.isOnBlur:L.isOnBlur)?!H:!(K?Se.isOnChange:L.isOnChange)||H))(Ee,Oe(n.touchedFields,Y),n.isSubmitted,b,w),T=ny(Y,l,Ee);pt(s,Y,ye),Ee?ce._f.onBlur&&ce._f.onBlur(B):ce._f.onChange&&ce._f.onChange(B);let D=J(Y,ye,Ee,!1),j=!Ur(D)||T;if(!Ee&&y.watch.next({name:Y,type:B.type}),Ae)return j&&y.state.next(Object.assign({name:Y},T?{}:D));if(!Ee&&T&&y.state.next({}),p[Y]=(p[Y],1),y.state.next({isValidating:!0}),r.resolver){let{errors:H}=await G([Y]),Z=pE(n.errors,i,Y),K=pE(H,i,Z.name||Y);ne=K.error,Y=K.name,se=Ur(H)}else ne=(await gE(ce,Oe(s,Y),N,r.shouldUseNativeValidation))[Y],se=await O(!0);ce._f.deps&&ae(ce._f.deps),q(!1,Y,se,ne,D)}var oe},ae=async(B,V={})=>{let Y,ce,oe=Br(B);if(y.state.next({isValidating:!0}),r.resolver){let ne=await(async se=>{let{errors:ye}=await G();if(se)for(let Ee of se){let Ae=Oe(ye,Ee);Ae?pt(n.errors,Ee,Ae):fr(n.errors,Ee)}else n.errors=ye;return ye})(at(B)?B:oe);Y=Ur(ne),ce=B?!oe.some(se=>Oe(ne,se)):Y}else B?(ce=(await Promise.all(oe.map(async ne=>{let se=Oe(i,ne);return await F(se&&se._f?{[ne]:se}:se)}))).every(Boolean),(ce||n.isValid)&&O()):ce=Y=await F(i);return y.state.next(Object.assign(Object.assign(Object.assign({},!Rn(B)||m.isValid&&Y!==n.isValid?{}:{name:B}),r.resolver?{isValid:Y}:{}),{errors:n.errors,isValidating:!1})),V.shouldFocus&&!ce&&uf(i,ne=>Oe(n.errors,ne),B?oe:l.mount),ce},ge=B=>{let V=Object.assign(Object.assign({},o),a.mount?s:{});return at(B)?V:Rn(B)?Oe(V,B):B.map(Y=>Oe(V,Y))},M=(B,V)=>({invalid:!!Oe((V||n).errors,B),isDirty:!!Oe((V||n).dirtyFields,B),isTouched:!!Oe((V||n).touchedFields,B),error:Oe((V||n).errors,B)}),C=(B,V={})=>{for(let Y of B?Br(B):l.mount)l.mount.delete(Y),l.array.delete(Y),Oe(i,Y)&&(V.keepValue||(fr(i,Y),fr(s,Y)),!V.keepError&&fr(n.errors,Y),!V.keepDirty&&fr(n.dirtyFields,Y),!V.keepTouched&&fr(n.touchedFields,Y),!r.shouldUnregister&&!V.keepDefaultValue&&fr(o,Y));y.watch.next({}),y.state.next(Object.assign(Object.assign({},n),V.keepDirty?{isDirty:z()}:{})),!V.keepIsValid&&O()},ie=(B,V={})=>{let Y=Oe(i,B),ce=Sl(V.disabled);return pt(i,B,{_f:Object.assign(Object.assign(Object.assign({},Y&&Y._f?Y._f:{ref:{name:B}}),{name:B,mount:!0}),V)}),l.mount.add(B),Y?ce&&pt(s,B,V.disabled?void 0:Oe(s,B,ry(Y._f))):R(B,!0,V.value),Object.assign(Object.assign(Object.assign({},ce?{disabled:V.disabled}:{}),r.shouldUseNativeValidation?{required:!!V.required,min:gl(V.min),max:gl(V.max),minLength:gl(V.minLength),maxLength:gl(V.maxLength),pattern:gl(V.pattern)}:{}),{name:B,onChange:ue,onBlur:ue,ref:oe=>{if(oe){ie(B,V),Y=Oe(i,B);let ne=at(oe.value)&&oe.querySelectorAll&&oe.querySelectorAll("input,select,textarea")[0]||oe,se=(Ee=>ly(Ee)||ml(Ee))(ne),ye=Y._f.refs||[];if(se?ye.find(Ee=>Ee===ne):ne===Y._f.ref)return;pt(i,B,{_f:Object.assign(Object.assign({},Y._f),se?{refs:ye.concat(ne).filter(ty),ref:{type:ne.type,name:B}}:{ref:ne})}),R(B,!1,void 0,ne)}else Y=Oe(i,B,{}),Y._f&&(Y._f.mount=!1),(r.shouldUnregister||V.shouldUnregister)&&(!wE(l.array,B)||!a.action)&&l.unMount.add(B)}})};return{control:{register:ie,unregister:C,getFieldState:M,_executeSchema:G,_getWatch:S,_getDirty:z,_updateValid:O,_removeUnmounted:()=>{for(let B of l.unMount){let V=Oe(i,B);V&&(V._f.refs?V._f.refs.every(Y=>!ty(Y)):!ty(V._f.ref))&&C(B)}l.unMount=new Set},_updateFieldArray:(B,V=[],Y,ce,oe=!0,ne=!0)=>{if(ce&&Y){if(a.action=!0,ne&&Array.isArray(Oe(i,B))){let se=Y(Oe(i,B),ce.argA,ce.argB);oe&&pt(i,B,se)}if(m.errors&&ne&&Array.isArray(Oe(n.errors,B))){let se=Y(Oe(n.errors,B),ce.argA,ce.argB);oe&&pt(n.errors,B,se),((ye,Ee)=>{!vl(Oe(ye,Ee)).length&&fr(ye,Ee)})(n.errors,B)}if(m.touchedFields&&Array.isArray(Oe(n.touchedFields,B))){let se=Y(Oe(n.touchedFields,B),ce.argA,ce.argB);oe&&pt(n.touchedFields,B,se)}m.dirtyFields&&(n.dirtyFields=cE(o,s)),y.state.next({isDirty:z(B,V),dirtyFields:n.dirtyFields,errors:n.errors,isValid:n.isValid})}else pt(s,B,V)},_getFieldArray:B=>vl(Oe(a.mount?s:o,B,t.shouldUnregister?Oe(o,B,[]):[])),_subjects:y,_proxyFormState:m,get _fields(){return i},get _formValues(){return s},get _stateFlags(){return a},set _stateFlags(B){a=B},get _defaultValues(){return o},get _names(){return l},set _names(B){l=B},get _formState(){return n},set _formState(B){n=B},get _options(){return r},set _options(B){r=Object.assign(Object.assign({},r),B)}},trigger:ae,register:ie,handleSubmit:(B,V)=>async Y=>{Y&&(Y.preventDefault&&Y.preventDefault(),Y.persist&&Y.persist());let ce=!0,oe=Dn(s);y.state.next({isSubmitting:!0});try{if(r.resolver){let{errors:ne,values:se}=await G();n.errors=ne,oe=se}else await F(i);Ur(n.errors)&&Object.keys(n.errors).every(ne=>Oe(oe,ne))?(y.state.next({errors:{},isSubmitting:!0}),await B(oe,Y)):(V&&await V(Object.assign({},n.errors),Y),r.shouldFocusError&&uf(i,ne=>Oe(n.errors,ne),l.mount))}catch(ne){throw ce=!1,ne}finally{n.isSubmitted=!0,y.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Ur(n.errors)&&ce,submitCount:n.submitCount+1,errors:n.errors})}},watch:(B,V)=>df(B)?y.watch.subscribe({next:Y=>B(S(void 0,V),Y)}):S(B,V,!0),setValue:X,getValues:ge,reset:(B,V={})=>{let Y=B||o,ce=Dn(Y),oe=B&&!Ur(B)?ce:o;if(V.keepDefaultValues||(o=Y),!V.keepValues){if(uE&&at(B))for(let ne of l.mount){let se=Oe(i,ne);if(se&&se._f){let ye=Array.isArray(se._f.refs)?se._f.refs[0]:se._f.ref;try{iy(ye)&&ye.closest("form").reset();break}catch{}}}s=t.shouldUnregister?V.keepDefaultValues?Dn(o):{}:ce,i={},y.array.next({values:oe}),y.watch.next({values:oe})}l={mount:new Set,unMount:new Set,array:new Set,watch:new Set,watchAll:!1,focus:""},a.mount=!m.isValid||!!V.keepIsValid,a.watch=!!t.shouldUnregister,y.state.next({submitCount:V.keepSubmitCount?n.submitCount:0,isDirty:V.keepDirty?n.isDirty:!!V.keepDefaultValues&&!Cs(B,o),isSubmitted:!!V.keepIsSubmitted&&n.isSubmitted,dirtyFields:V.keepDirty?n.dirtyFields:V.keepDefaultValues&&B?Object.entries(B).reduce((ne,[se,ye])=>Object.assign(Object.assign({},ne),{[se]:ye!==Oe(o,se)}),{}):{},touchedFields:V.keepTouched?n.touchedFields:{},errors:V.keepErrors?n.errors:{},isSubmitting:!1,isSubmitSuccessful:!1})},resetField:(B,V={})=>{Oe(i,B)&&(at(V.defaultValue)?X(B,Oe(o,B)):(X(B,V.defaultValue),pt(o,B,V.defaultValue)),V.keepTouched||fr(n.touchedFields,B),V.keepDirty||(fr(n.dirtyFields,B),n.isDirty=V.defaultValue?z(B,Oe(o,B)):z()),V.keepError||(fr(n.errors,B),m.isValid&&O()),y.state.next(Object.assign({},n)))},clearErrors:B=>{B?Br(B).forEach(V=>fr(n.errors,V)):n.errors={},y.state.next({errors:n.errors})},unregister:C,setError:(B,V,Y)=>{let ce=(Oe(i,B,{_f:{}})._f||{}).ref;pt(n.errors,B,Object.assign(Object.assign({},V),{ref:ce})),y.state.next({name:B,errors:n.errors,isValid:!1}),Y&&Y.shouldFocus&&ce&&ce.focus&&ce.focus()},setFocus:(B,V={})=>{let Y=Oe(i,B)._f,ce=Y.refs?Y.refs[0]:Y.ref;V.shouldSelect?ce.select():ce.focus()},getFieldState:M}}jr.Controller=t=>t.render(sE(t)),jr.FormProvider=t=>Ce.default.createElement(EE.Provider,{value:hf(t,"children")},t.children),jr.appendErrors=AE,jr.get=Oe,jr.set=pt,jr.useController=sE,jr.useFieldArray=function(t){let e=_l(),{control:r=e.control,name:n,keyName:i="id",shouldUnregister:o}=t,[s,a]=Ce.default.useState(r._getFieldArray(n)),l=Ce.default.useRef(r._getFieldArray(n).map(Ai)),h=Ce.default.useRef(s),p=Ce.default.useRef(n),m=Ce.default.useRef(!1);p.current=n,h.current=s,r._names.array.add(n),lf({callback:Ce.default.useCallback(({values:w,name:b})=>{if(b===p.current||!b){let N=Oe(w,p.current,[]);a(N),l.current=N.map(Ai)}},[]),subject:r._subjects.array});let y=Ce.default.useCallback(w=>{m.current=!0,r._updateFieldArray(n,w)},[r,n]);return Ce.default.useEffect(()=>{r._stateFlags.action=!1,ny(n,r._names)&&r._subjects.state.next({}),m.current&&r._executeSchema([n]).then(w=>{let b=Oe(w.errors,n);b&&b.type&&!Oe(r._formState.errors,n)&&(pt(r._formState.errors,n,b),r._subjects.state.next({errors:r._formState.errors}))}),r._subjects.watch.next({name:n,values:r._formValues}),r._names.focus&&uf(r._fields,w=>w.startsWith(r._names.focus)),r._names.focus="",r._proxyFormState.isValid&&r._updateValid()},[s,n,r]),Ce.default.useEffect(()=>(!Oe(r._formValues,n)&&r._updateFieldArray(n),()=>{(r._options.shouldUnregister||o)&&r.unregister(n)}),[n,r,i,o]),{swap:Ce.default.useCallback((w,b)=>{let N=r._getFieldArray(n);Qp(N,w,b),Qp(l.current,w,b),y(N),a(N),r._updateFieldArray(n,N,Qp,{argA:w,argB:b},!1)},[y,n,r]),move:Ce.default.useCallback((w,b)=>{let N=r._getFieldArray(n);Kp(N,w,b),Kp(l.current,w,b),y(N),a(N),r._updateFieldArray(n,N,Kp,{argA:w,argB:b},!1)},[y,n,r]),prepend:Ce.default.useCallback((w,b)=>{let N=Br(Dn(w)),O=Zp(r._getFieldArray(n),N);r._names.focus=Hp(n,0,b),l.current=Zp(l.current,N.map(Ai)),y(O),a(O),r._updateFieldArray(n,O,Zp,{argA:Jp(w)})},[y,n,r]),append:Ce.default.useCallback((w,b)=>{let N=Br(Dn(w)),O=Gp(r._getFieldArray(n),N);r._names.focus=Hp(n,O.length-1,b),l.current=Gp(l.current,N.map(Ai)),y(O),a(O),r._updateFieldArray(n,O,Gp,{argA:Jp(w)})},[y,n,r]),remove:Ce.default.useCallback(w=>{let b=Xp(r._getFieldArray(n),w);l.current=Xp(l.current,w),y(b),a(b),r._updateFieldArray(n,b,Xp,{argA:w})},[y,n,r]),insert:Ce.default.useCallback((w,b,N)=>{let O=Br(Dn(b)),I=Yp(r._getFieldArray(n),w,O);r._names.focus=Hp(n,w,N),l.current=Yp(l.current,w,O.map(Ai)),y(I),a(I),r._updateFieldArray(n,I,Yp,{argA:w,argB:Jp(b)})},[y,n,r]),update:Ce.default.useCallback((w,b)=>{let N=aE(r._getFieldArray(n),w,b);l.current=[...N].map((O,I)=>O&&I!==w?l.current[I]:Ai()),y(N),a([...N]),r._updateFieldArray(n,N,aE,{argA:w,argB:b},!0,!1)},[y,n,r]),replace:Ce.default.useCallback(w=>{let b=Br(Dn(w));l.current=b.map(Ai),y([...b]),a([...b]),r._updateFieldArray(n,[...b],N=>N,{},!0,!1)},[y,n,r]),fields:Ce.default.useMemo(()=>s.map((w,b)=>Object.assign(Object.assign({},w),{[i]:l.current[b]||Ai()})),[s,i])}},jr.useForm=function(t={}){let e=Ce.default.useRef(),[r,n]=Ce.default.useState({isDirty:!1,isValidating:!1,dirtyFields:{},isSubmitted:!1,submitCount:0,touchedFields:{},isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,errors:{}});e.current?e.current.control._options=t:e.current=Object.assign(Object.assign({},RN(t)),{formState:r});let i=e.current.control,o=Ce.default.useCallback(s=>{TE(s,i._proxyFormState,!0)&&(i._formState=Object.assign(Object.assign({},i._formState),s),n(Object.assign({},i._formState)))},[i]);return lf({subject:i._subjects.state,callback:o}),Ce.default.useEffect(()=>{i._stateFlags.mount||(i._proxyFormState.isValid&&i._updateValid(),i._stateFlags.mount=!0),i._stateFlags.watch&&(i._stateFlags.watch=!1,i._subjects.state.next({})),i._removeUnmounted()}),e.current.formState=OE(r,i._proxyFormState),e.current},jr.useFormContext=_l,jr.useFormState=kE,jr.useWatch=NE});var gf=Te(yf=>{"use strict";Object.defineProperty(yf,"__esModule",{value:!0});yf.TextInput=void 0;var bl=ct(),Fs=(0,bl.__importDefault)(Pe()),pf=(0,bl.__importDefault)($t()),CN=pl(),FN=Ni(),LN=function(t){var e=t.validation,r=e===void 0?"default":e,n=t.className,i=t.label,o=t.labelType,s=o===void 0?"default":o,a=t.inputClassName,l=t.button,h=t.register,p=(0,bl.__rest)(t,["validation","className","label","labelType","inputClassName","button","register"]),m=i&&s,y=Fs.default.createElement("input",(0,bl.__assign)({alt:i},p,{className:(0,pf.default)("px-3 py-1.5 outline-0 border w-full",FN.TextInputBorderMap[r],p.disabled&&"bg-secondary-200",m!=="addon"&&"rounded-l-sm",!l&&"rounded-r",i||l?a:n)},h));return i||l?Fs.default.createElement("div",{className:(0,pf.default)("flex",m==="default"?"flex-col":"flex-row",n)},i&&Fs.default.createElement("div",{className:(0,pf.default)("flex",m==="default"&&"pb-2",m==="row:1/3"&&"w-1/3",m==="row:1/4"&&"w-1/4",m==="row:2/5"&&"w-2/5",m==="addon"&&"border border-secondary-400 rounded-l-sm py-0.5 px-3 bg-secondary-200 text-secondary-500")},Fs.default.createElement("span",{className:(0,pf.default)(m!=="default"&&"m-auto")},i)),l?Fs.default.createElement("div",{className:"flex flex-row w-full"},y,Fs.default.createElement(CN.Button,(0,bl.__assign)({shape:"flat",className:"rounded-r-sm"},l),l.label)):y):y};yf.TextInput=LN});var UE=Te(mf=>{"use strict";Object.defineProperty(mf,"__esModule",{value:!0});mf.Login=void 0;var cy=ct(),PE=(0,cy.__importDefault)($t()),Dt=(0,cy.__importDefault)(Pe()),PN=uy(),ME=gf(),MN=Ni(),jE=pl(),jN=Kc();function UN(t){var e=t.onLoginClick,r=t.companyName,n=t.onSignUpClick,i=t.isLoading,o=t.useRegularLogin,s=t.thirdPartyLogins,a=t.className,l=t.style,h=(0,PN.useForm)(),p=h.register,m=h.handleSubmit,y=h.formState,w=h.reset,b=h.setValue,N=y.errors,O=y.submitCount,I=function(F){w(),b("email",F.email),b("password",F.password),e==null||e(F)},R="rounded-md text-sm font-medium",J="py-2.5 pl-3 text-base font-semibold "+(i?"bg-gray-200":"bg-gray-50"),q=O>0&&N.email,G=O>0&&N.password;return Dt.default.createElement("form",{className:(0,PE.default)("bg-white rounded max-w-lg w-full p-10",a),style:l,onSubmit:m(I)},Dt.default.createElement("p",{tabIndex:0,className:"focus:outline-none text-2xl font-extrabold leading-6 text-gray-800"},"Login to ",r||"your account"),n&&Dt.default.createElement("p",{tabIndex:0,className:"focus:outline-none text-sm mt-4 font-medium leading-none text-gray-500"},"Dont have account?",Dt.default.createElement("a",{onClick:i?void 0:n,className:(0,PE.default)(`
                    hover:text-gray-500 focus:text-gray-500 focus:outline-none
                    focus:underline hover:underline text-sm font-medium leading-none
                    text-gray-800`,i?"cursor-not-allowed":"cursor-pointer")}," Sign up here")),Dt.default.createElement("div",{className:"mt-4"}),s==null?void 0:s.map(function(F,z){return Dt.default.createElement(BN,(0,cy.__assign)({},F,{disabled:i,key:z}))}),s&&o&&Dt.default.createElement("div",{className:"w-full flex items-center justify-between py-5"},Dt.default.createElement("hr",{className:"w-full bg-gray-400"}),Dt.default.createElement("p",{className:"text-base font-medium leading-4 px-2.5 text-gray-400"},"OR"),Dt.default.createElement("hr",{className:"w-full bg-gray-400"})),o&&Dt.default.createElement(Dt.default.Fragment,null,Dt.default.createElement(ME.TextInput,{label:"Email",className:R,inputClassName:J,disabled:i,validation:q?"danger":"default",register:p("email",{required:!0,pattern:MN.regexpUtil.email})}),Dt.default.createElement("div",{className:"font-medium tracking-wide text-danger-500 text-sm mt-1 ml-1"},"\u200D",q?"Please enter a valid email":""),Dt.default.createElement(ME.TextInput,{label:"Password",type:"password",className:R,inputClassName:J,disabled:i,validation:q?"danger":"default",register:p("password",{required:!0})}),Dt.default.createElement("div",{className:"font-medium tracking-wide text-danger-500 text-sm mt-1 ml-1"},"\u200D",G?"Please enter your password":""),Dt.default.createElement("div",{className:"mt-6"},Dt.default.createElement(jE.Button,{size:"auto",type:"primary",className:"font-bold leading-none border rounded h-12 text-lg",disabled:i,htmlType:"submit"},i?Dt.default.createElement(jN.Spinner,{size:"xs",className:"m-auto"}):"Log In"))))}mf.Login=UN;var BN=function(t){var e=t.disabled,r=t.name,n=t.logo,i=t.onClick;return Dt.default.createElement(jE.Button,{size:"auto",outline:!0,type:"secondary",disabled:e,onClick:i,className:"py-2.5 px-3 rounded-md flex items-center mt-3.5"},n,Dt.default.createElement("p",{className:"text-base font-medium ml-4"},"Login With ",r))}});var BE=Te(wf=>{"use strict";Object.defineProperty(wf,"__esModule",{value:!0});wf.Modal=void 0;var vf=ct(),zN=ar(),VN=(0,vf.__importDefault)($t()),gn=(0,vf.__importDefault)(Pe()),WN=ef();function qN(t){var e=t.zIndex,r=e===void 0?1004:e,n=t.className,i=t.style,o=t.header,s=t.onClose,a=t.onBackdropClick,l=t.children;return gn.default.createElement(gn.default.Fragment,null,gn.default.createElement(WN.Backdrop,(0,vf.__assign)({},{zIndex:r-1,onBackdropClick:a,transition:!1})),gn.default.createElement("div",{className:(0,VN.default)("fixed left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2","border border-secondary-300 shadow-lg bg-white w-11/12 md:max-w-md mx-auto rounded overflow-y-auto",n),style:(0,vf.__assign)({zIndex:r},i)},gn.default.createElement("div",{className:"relative"},gn.default.createElement("div",{className:"cursor-pointer absolute top-3.5 right-3.5",onClick:s},gn.default.createElement("svg",{className:"fill-current text-black",xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",viewBox:"0 0 18 18"},gn.default.createElement("path",{d:"M14.53 4.53l-1.06-1.06L9 7.94 4.53 3.47 3.47 4.53 7.94 9l-4.47 4.47 1.06 1.06L9 10.06l4.47 4.47 1.06-1.06L10.06 9z"}))),gn.default.createElement("div",{className:"py-4 px-6"},o&&gn.default.createElement("div",{className:"pb-3"},(0,zN.isType)(o,"string")?gn.default.createElement("p",{className:"text-2xl font-bold"},o):o),l))))}wf.Modal=qN});var zE=Te(_f=>{"use strict";Object.defineProperty(_f,"__esModule",{value:!0});_f.SquareGrid=void 0;var fy=ct(),mn=(0,fy.__importStar)(Pe()),$N=ar(),HN=function(t){(0,fy.__extends)(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.state={sizeBy:"vw"},r.componentDidMount=function(){var n=function(){var i=window.innerHeight>window.innerWidth?"vw":"vh";i!==r.state.sizeBy&&r.setState({sizeBy:i})};n(),r.resizeRef=YN(n)},r.componentWillUnmount=function(){var n;return(n=r.resizeRef)===null||n===void 0?void 0:n.stop()},r.render=function(){var n=r.props,i=r.state,o="85"+i.sizeBy;return mn.default.createElement("div",{className:"border flex flex-col",style:{height:o,width:o}},mn.default.createElement(GN,{items:n.items}))},r}return e}(mn.Component);_f.SquareGrid=HN;function GN(t){var e=(0,mn.useState)("0"),r=e[0],n=e[1],i=(0,mn.useState)([]),o=i[0],s=i[1];return(0,mn.useEffect)(function(){var a=t.items.length,l=Math.ceil(Math.sqrt(a)),h=(0,$N.arrDivide)(t.items,a/l);s(h),n((100/h.length).toFixed(5)+"%")},[t.items]),mn.default.createElement(mn.default.Fragment,null,o.map(function(a,l){return mn.default.createElement("div",{className:"flex flex-row",style:{height:r},key:l},a.map(function(h,p){return mn.default.createElement(JN,(0,fy.__assign)({},{children:h,size:r},{key:p}))}))}))}function JN(t){var e=t.children,r=t.size;return mn.default.createElement("div",{style:{width:r},className:"h-full m-auto"},e)}function YN(t){return addEventListener("resize",t),{stop:function(){return removeEventListener("resize",t)}}}});var VE=Te(Sf=>{"use strict";Object.defineProperty(Sf,"__esModule",{value:!0});Sf.Radio=void 0;var dy=ct(),hy=(0,dy.__importDefault)(Pe()),KN=function(t){var e=t.label,r=t.disabled,n=(0,dy.__rest)(t,["label","disabled"]);return hy.default.createElement("label",{className:"inline-flex items-center"},hy.default.createElement("input",(0,dy.__assign)({type:"radio",name:"vehicle",className:"h-5 w-5 text-red-600",disabled:r},n)),e&&hy.default.createElement("span",{className:"ml-2 text-gray-700"},e))};Sf.Radio=KN});var WE=Te(Tf=>{"use strict";Object.defineProperty(Tf,"__esModule",{value:!0});Tf.TextArea=void 0;var Of=ct(),bf=(0,Of.__importDefault)(Pe()),ZN=Ni(),Ef=(0,Of.__importDefault)($t());function XN(t){var e=t.validation,r=e===void 0?"default":e,n=t.className,i=t.label,o=t.labelType,s=o===void 0?"default":o,a=t.inputClassName,l=t.register,h=(0,Of.__rest)(t,["validation","className","label","labelType","inputClassName","register"]),p=i&&s,m=bf.default.createElement("textarea",(0,Of.__assign)({alt:i},h,{className:(0,Ef.default)("px-3 py-1.5 outline-0 border w-full rounded-r-sm",ZN.TextInputBorderMap[r],h.disabled&&"bg-secondary-200",p!=="addon"&&"rounded-l-sm",i?a:n)}));return i?bf.default.createElement("div",{className:(0,Ef.default)("flex",p==="default"?"flex-col":"flex-row",n)},i&&bf.default.createElement("div",{className:(0,Ef.default)("flex",p==="default"&&"pb-2",p==="row:1/3"&&"w-1/3",p==="row:1/4"&&"w-1/4",p==="row:2/5"&&"w-2/5",p==="addon"&&"border border-secondary-400 rounded-l-sm py-0.5 px-3 bg-secondary-200 text-secondary-500")},bf.default.createElement("span",{className:(0,Ef.default)(p!=="default"&&"m-auto")},i)),m):m}Tf.TextArea=XN});var qE=Te(xf=>{"use strict";Object.defineProperty(xf,"__esModule",{value:!0});xf.Toggle=void 0;var py=ct(),Di=(0,py.__importStar)(Pe()),QN=function(t){var e=t.onChange,r=t.label,n=(0,py.__rest)(t,["onChange","label"]),i=(0,Di.useState)(!1),o=i[0],s=i[1];return Di.default.createElement("div",{className:"flex flex-col"},Di.default.createElement("label",{className:"mt-3 inline-flex items-center cursor-pointer"},Di.default.createElement("span",{className:"relative"},Di.default.createElement("span",{className:"block w-10 h-6 rounded-full shadow-inner ".concat(o?"bg-primary-300":"bg-secondary-200")}),Di.default.createElement("span",{className:"absolute block w-4 h-4 mt-1 ml-1 rounded-full shadow inset-y-0 left-0 focus-within:shadow-outline transition-transform duration-300 ease-in-out ".concat(o?"transform translate-x-full bg-secondary-300":"bg-secondary-400")},Di.default.createElement("input",(0,py.__assign)({},n,{type:"checkbox",className:"absolute opacity-0 w-0 h-0",onChange:function(a){s(a.target.checked),e(a.target.checked)}})))),r&&Di.default.createElement("span",{className:"ml-3 text-sm"},r)))};xf.Toggle=QN});var JE=Te(kf=>{"use strict";Object.defineProperty(kf,"__esModule",{value:!0});kf.NavDrawer=void 0;var vn=ct(),et=(0,vn.__importStar)(Pe()),bo=(0,vn.__importDefault)($t()),HE=ar(),eA=Zc(),tA=ef(),rA=Ni(),nA=function(t){var e=t.brand,r=t.fixed,n=r===void 0?!1:r,i=t.zIndex,o=i===void 0?1002:i,s=t.user,a=t.onBrandClick,l=t.onAvatarClick,h=t.onBackdropClick,p=t.menuItems,m=t.isOpen,y=t.className,w=t.style;return et.default.createElement(et.default.Fragment,null,n&&m&&et.default.createElement(tA.Backdrop,(0,vn.__assign)({},{onBackdropClick:h,zIndex:o-1})),et.default.createElement("div",{className:(0,bo.default)(`
        flex flex-col bg-white
        dark:bg-gray-800 dark:border-gray-600
        shadow text-secondary-600 w-64
        transition-all duration-500`,n&&"h-screen fixed top-0 "+(n==="left"?"left-0":"right-0"),n&&[!m&&n==="left"&&"-translate-x-full",!m&&n==="right"&&"translate-x-full"],rA.customScrollBar,y),style:(0,vn.__assign)({zIndex:o},w)},e&&et.default.createElement("div",{className:(0,bo.default)("border-b border-secondary-200 px-2 py-1.5",a&&"cursor-pointer"),onClick:a},(0,HE.isType)(e,"string")?et.default.createElement("h2",{className:(0,bo.default)("text-3xl font-semibold text-gray-800 dark:text-white")},e):e),s&&et.default.createElement("div",{className:(0,bo.default)("flex items-center border-b border-secondary-200 pl-1.5 py-2",l&&"cursor-pointer"),onClick:l},et.default.createElement(eA.Avatar,(0,vn.__assign)({dataState:"done",size:"sm"},s)),et.default.createElement("h4",{className:"ml-1 font-medium text-gray-600 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200"},s.name)),et.default.createElement("div",{className:"flex flex-col justify-between flex-1"},et.default.createElement("nav",{className:"px-1.5"},p.map(function(b,N){return et.default.createElement(GE,(0,vn.__assign)({},b,{key:N}))})))))};kf.NavDrawer=nA;var $E=function(t){var e=t.children,r=t.isActive,n=t.getHeight,i=(0,vn.__rest)(t,["children","isActive","getHeight"]);return et.default.createElement("div",(0,vn.__assign)({className:(0,bo.default)(`
        flex items-center
        my-1 px-4 py-2 rounded-md
        text-gray-600 dark:text-gray-400
    `,i.onClick&&"cursor-pointer",r?"bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-200":"hover:bg-gray-200 dark:hover:bg-gray-700 hover:text-gray-700 dark:hover:text-gray-200")},i),e)},GE=function(t){switch(t.type){case"action":{var e=t.isActive,r=t.icon,n=t.title,i=t.onClick;return(0,HE.isType)(n,"string")?et.default.createElement($E,(0,vn.__assign)({},{isActive:e,onClick:i}),r&&r,et.default.createElement("span",{className:"mx-4 font-medium"},n)):n}case"break":return et.default.createElement("hr",{className:"my-1 dark:border-gray-600"});case"section":return et.default.createElement("div",{className:`\r
                overflow-hidden my-1 py-2\r
                text-gray-600 dark:text-gray-400\r
            `},et.default.createElement("span",{className:"px-3 font-medium"},t.title));case"sub-menu":{var r=t.icon,n=t.title,o=t.subMenu,s=(0,et.useState)(!1),a=s[0],l=s[1];return et.default.createElement(et.default.Fragment,null,et.default.createElement($E,(0,vn.__assign)({},{isActive:a,onClick:function(){return l(!a)}}),r&&r,et.default.createElement("span",{className:"mx-4 font-medium"},n),et.default.createElement("svg",{className:(0,bo.default)("svg-fix transition-transform ml-auto mr-1.5",a&&"-rotate-90"),stroke:"currentColor",fill:"currentColor",strokeWidth:"0",viewBox:"0 0 16 16",height:"1em",width:"1em",xmlns:"http://www.w3.org/2000/svg"},et.default.createElement("path",{"fill-rule":"evenodd",d:"M11.354 1.646a.5.5 0 0 1 0 .708L5.707 8l5.647 5.646a.5.5 0 0 1-.708.708l-6-6a.5.5 0 0 1 0-.708l6-6a.5.5 0 0 1 .708 0z"}))),et.default.createElement("div",{className:(0,bo.default)("overflow-hidden transition-all duration-700",a?"max-h-screen":"max-h-0")},o.map(function(m,y){return et.default.createElement(GE,(0,vn.__assign)({},m,{key:y}))})))}default:throw console.error(t),new Error("This type of MenuItem is not implemented.")}}});var KE=Te(Nf=>{"use strict";Object.defineProperty(Nf,"__esModule",{value:!0});Nf.TopBar=void 0;var If=ct(),iA=ar(),oA=(0,If.__importDefault)($t()),Gt=(0,If.__importStar)(Pe()),sA=Gt.default.createElement("path",{d:"M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM142.4 642.1L298.7 519a8.84 8.84 0 0 0 0-13.9L142.4 381.9c-5.8-4.6-14.4-.5-14.4 6.9v246.3a8.9 8.9 0 0 0 14.4 7z"}),aA=Gt.default.createElement("path",{d:"M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"});function lA(t){var e=t.fixed,r=t.onMenuExpand,n=t.leftNavItems,i=t.centerContent,o=t.rightNavItems,s=t.zIndex,a=s===void 0?1e3:s,l=t.className,h=t.style,p=t.addSpacer,m=p===void 0?!1:p,y=t.menuIsExpanded,w=(0,Gt.useState)(0),b=w[0],N=w[1],O=(0,Gt.useRef)(null),I=(0,Gt.useRef)(new ResizeObserver(function(z){return N(z[0].borderBoxSize[0].blockSize)}));(0,Gt.useEffect)(function(){return O.current&&I.current.observe(O.current),function(){return I.current.disconnect()}},[O,I]);var R=(0,Gt.useState)(!1),J=R[0],q=R[1],G=function(z){return z&&z.map(function(S,W){var te=S.children,X=S.onClick;return Gt.default.createElement(YE,(0,If.__assign)({},{children:te,onClick:X},{key:W}))})},F=(0,iA.isType)(y,"boolean")?!y:!J;return Gt.default.createElement(Gt.default.Fragment,null,m&&e&&Gt.default.createElement("div",{style:{height:b},className:"w-full"}),Gt.default.createElement("nav",{ref:O,className:(0,oA.default)("bg-white shadow dark:bg-gray-800 flex justify-between p-2 border",e&&"fixed top-0 left-0 right-0",l),style:(0,If.__assign)({zIndex:a},h)},Gt.default.createElement("ul",{className:"flex flex-row"},r&&Gt.default.createElement(YE,{onClick:function(){q(!F),r(!F)}},Gt.default.createElement("svg",{stroke:"currentColor",fill:"currentColor",strokeWidth:"0",viewBox:"0 0 1024 1024",height:"1em",width:"1em",xmlns:"http://www.w3.org/2000/svg",className:"svg-fix"},F?aA:sA)),G(n)),i,Gt.default.createElement("ul",{className:"flex flex-row"},G(o))))}Nf.TopBar=lA;var YE=function(t){return Gt.default.createElement("li",{className:"p-4 text-neutral-500 hover:text-neutral-800 min-w-2"},Gt.default.createElement("span",{className:"cursor-pointer",onClick:t.onClick},t.children))}});var ZE=Te(Ri=>{"use strict";Object.defineProperty(Ri,"__esModule",{value:!0});Ri.grTo=Ri.grFrom=Ri.gradients=void 0;Ri.gradients={1:"bg-gradient-to-t",2:"bg-gradient-to-tr",3:"bg-gradient-to-r",4:"bg-gradient-to-br",5:"bg-gradient-to-b",6:"bg-gradient-to-bl",7:"bg-gradient-to-l",8:"bg-gradient-to-tl"};Ri.grFrom={slate:"from-slate-400",gray:"from-gray-400",red:"from-red-400",pink:"from-pink-400",purple:"from-purple-400",indigo:"from-indigo-400",blue:"from-blue-400",cyan:"from-cyan-400",teal:"from-teal-400",green:"from-green-400",lime:"from-lime-400",yellow:"from-yellow-400",amber:"from-amber-400",orange:"from-orange-400",brown:"from-brown-400",grey:"from-grey-400",emerald:"from-emerald-400",rose:"from-rose-400"};Ri.grTo={slate:"to-slate-900",gray:"to-gray-900",red:"to-red-900",pink:"to-pink-900",purple:"to-purple-900",indigo:"to-indigo-900",blue:"to-blue-900",cyan:"to-cyan-900",teal:"to-teal-900",green:"to-green-900",lime:"to-lime-900",yellow:"to-yellow-900",amber:"to-amber-900",orange:"to-orange-900",brown:"to-brown-900",grey:"to-grey-900",emerald:"to-emerald-900",rose:"to-rose-900"}});var tO=Te(Af=>{"use strict";Object.defineProperty(Af,"__esModule",{value:!0});Af.LoginPage=void 0;var gy=ct(),XE=(0,gy.__importDefault)($t()),yt=(0,gy.__importDefault)(Pe()),uA=uy(),cA=Df(),eO=pl(),QE=gf(),fA=Ni(),yy=ZE();function hA(t){var e=t.thirdPartyLogins,r=t.useRegularLogin,n=t.brand,i=t.companyName,o=t.bgGradientFrom,s=t.bgGradientTo,a=t.onLoginClick,l=t.isLoading,h=t.gradient,p=t.onSignUpClick,m=t.className,y=t.style,w=(0,uA.useForm)(),b=w.register,N=w.handleSubmit,O=w.formState,I=w.reset,R=w.setValue,J=O.errors,q=O.submitCount,G=function(X){I(),R("email",X.email),R("password",X.password),a==null||a(X)},F="rounded-md text-sm font-medium",z="py-2.5 pl-3 text-base font-semibold "+(l?"bg-gray-200":"bg-gray-50"),S=o&&s&&h,W=q>0&&J.email,te=q>0&&J.password;return yt.default.createElement("div",{className:(0,XE.default)("h-full w-full py-14 px-4",S&&yy.gradients[h],S&&yy.grFrom[o],S&&yy.grTo[s],m),style:y},yt.default.createElement("div",{className:"flex flex-col items-center justify-center"},n,yt.default.createElement("form",{className:"bg-white shadow-lg rounded lg:w-2/3 md:w-3/4 max-w-lg w-full p-10 border border-secondary-200",onSubmit:N(G)},yt.default.createElement("p",{tabIndex:0,className:"focus:outline-none text-2xl font-extrabold leading-6 text-gray-800"},"Login to ",i||"your account"),p&&yt.default.createElement("p",{tabIndex:0,className:"focus:outline-none text-sm mt-4 font-medium leading-none text-gray-500"},"Dont have account?",yt.default.createElement("a",{onClick:l?void 0:p,className:(0,XE.default)(`
                            hover:text-gray-500 focus:text-gray-500 focus:outline-none
                            focus:underline hover:underline text-sm font-medium leading-none
                            text-gray-800`,l?"cursor-not-allowed":"cursor-pointer")}," Sign up here")),yt.default.createElement("div",{className:"mt-4"}),e==null?void 0:e.map(function(X,ue){return yt.default.createElement(dA,(0,gy.__assign)({},X,{disabled:l,key:ue}))}),e&&r&&yt.default.createElement("div",{className:"w-full flex items-center justify-between py-5"},yt.default.createElement("hr",{className:"w-full bg-gray-400"}),yt.default.createElement("p",{className:"text-base font-medium leading-4 px-2.5 text-gray-400"},"OR"),yt.default.createElement("hr",{className:"w-full bg-gray-400"})),r&&yt.default.createElement(yt.default.Fragment,null,yt.default.createElement(QE.TextInput,{label:"Email",className:F,inputClassName:z,disabled:l,validation:W?"danger":"default",register:b("email",{required:!0,pattern:fA.regexpUtil.email})}),yt.default.createElement("div",{className:"font-medium tracking-wide text-danger-500 text-sm mt-1 ml-1"},"\u200D",W?"Please enter a valid email":""),yt.default.createElement(QE.TextInput,{label:"Password",type:"password",className:F,inputClassName:z,disabled:l,validation:W?"danger":"default",register:b("password",{required:!0})}),yt.default.createElement("div",{className:"font-medium tracking-wide text-danger-500 text-sm mt-1 ml-1"},"\u200D",te?"Please enter your password":""),yt.default.createElement("div",{className:"mt-6"},yt.default.createElement(eO.Button,{size:"auto",type:"primary",className:"font-bold leading-none border rounded h-12 text-lg",disabled:l,htmlType:"submit"},l?yt.default.createElement(cA.Spinner,{size:"xs",className:"m-auto"}):"Log In"))))))}Af.LoginPage=hA;var dA=function(t){var e=t.disabled,r=t.name,n=t.logo;return yt.default.createElement(eO.Button,{size:"auto",outline:!0,type:"secondary",disabled:e,className:"py-2.5 px-3 rounded-md flex items-center mt-3.5"},n,yt.default.createElement("p",{className:"text-base font-medium ml-4"},"Login With ",r))}});var Df=Te(gt=>{"use strict";Object.defineProperty(gt,"__esModule",{value:!0});var Rt=ct();(0,Rt.__exportStar)(Tb(),gt);(0,Rt.__exportStar)(Hb(),gt);(0,Rt.__exportStar)(Jb(),gt);(0,Rt.__exportStar)(Zc(),gt);(0,Rt.__exportStar)(rE(),gt);(0,Rt.__exportStar)(ef(),gt);(0,Rt.__exportStar)(Jc(),gt);(0,Rt.__exportStar)(pl(),gt);(0,Rt.__exportStar)(Lp(),gt);(0,Rt.__exportStar)(nE(),gt);(0,Rt.__exportStar)(UE(),gt);(0,Rt.__exportStar)(BE(),gt);(0,Rt.__exportStar)(Kc(),gt);(0,Rt.__exportStar)(zE(),gt);(0,Rt.__exportStar)(VE(),gt);(0,Rt.__exportStar)(WE(),gt);(0,Rt.__exportStar)(gf(),gt);(0,Rt.__exportStar)(qE(),gt);(0,Rt.__exportStar)(JE(),gt);(0,Rt.__exportStar)(KE(),gt);(0,Rt.__exportStar)(tO(),gt)});var Ey=Ft(Pe()),aO=Ft(fw());var an=Ft(Pe());function ps(){return ps=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},ps.apply(this,arguments)}var yi;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(yi||(yi={}));var hw=function(t){return t};var dw="beforeunload";var cT="popstate";function gw(t){t===void 0&&(t={});var e=t,r=e.window,n=r===void 0?document.defaultView:r,i=n.history;function o(){var z=n.location,S=z.pathname,W=z.search,te=z.hash,X=i.state||{};return[X.idx,hw({pathname:S,search:W,hash:te,state:X.usr||null,key:X.key||"default"})]}var s=null;function a(){if(s)w.call(s),s=null;else{var z=yi.Pop,S=o(),W=S[0],te=S[1];if(w.length){if(W!=null){var X=p-W;X&&(s={action:z,location:te,retry:function(){G(X*-1)}},G(X))}}else R(z)}}n.addEventListener(cT,a);var l=yi.Pop,h=o(),p=h[0],m=h[1],y=yw(),w=yw();p==null&&(p=0,i.replaceState(ps({},i.state,{idx:p}),""));function b(z){return typeof z=="string"?z:mw(z)}function N(z,S){return S===void 0&&(S=null),hw(ps({pathname:m.pathname,hash:"",search:""},typeof z=="string"?m0(z):z,{state:S,key:fT()}))}function O(z,S){return[{usr:z.state,key:z.key,idx:S},b(z)]}function I(z,S,W){return!w.length||(w.call({action:z,location:S,retry:W}),!1)}function R(z){l=z;var S=o();p=S[0],m=S[1],y.call({action:l,location:m})}function J(z,S){var W=yi.Push,te=N(z,S);function X(){J(z,S)}if(I(W,te,X)){var ue=O(te,p+1),ae=ue[0],ge=ue[1];try{i.pushState(ae,"",ge)}catch{n.location.assign(ge)}R(W)}}function q(z,S){var W=yi.Replace,te=N(z,S);function X(){q(z,S)}if(I(W,te,X)){var ue=O(te,p),ae=ue[0],ge=ue[1];i.replaceState(ae,"",ge),R(W)}}function G(z){i.go(z)}var F={get action(){return l},get location(){return m},createHref:b,push:J,replace:q,go:G,back:function(){G(-1)},forward:function(){G(1)},listen:function(S){return y.push(S)},block:function(S){var W=w.push(S);return w.length===1&&n.addEventListener(dw,pw),function(){W(),w.length||n.removeEventListener(dw,pw)}}};return F}function pw(t){t.preventDefault(),t.returnValue=""}function yw(){var t=[];return{get length(){return t.length},push:function(r){return t.push(r),function(){t=t.filter(function(n){return n!==r})}},call:function(r){t.forEach(function(n){return n&&n(r)})}}}function fT(){return Math.random().toString(36).substr(2,8)}function mw(t){var e=t.pathname,r=e===void 0?"/":e,n=t.search,i=n===void 0?"":n,o=t.hash,s=o===void 0?"":o;return i&&i!=="?"&&(r+=i.charAt(0)==="?"?i:"?"+i),s&&s!=="#"&&(r+=s.charAt(0)==="#"?s:"#"+s),r}function m0(t){var e={};if(t){var r=t.indexOf("#");r>=0&&(e.hash=t.substr(r),t=t.substr(0,r));var n=t.indexOf("?");n>=0&&(e.search=t.substr(n),t=t.substr(0,n)),t&&(e.pathname=t)}return e}var jt=Ft(Pe());function hT(t,e){if(!t)throw new Error(e)}var dT=(0,jt.createContext)(null),vw=(0,jt.createContext)(null);function ww(t){let{basename:e="/",children:r=null,location:n,navigationType:i=yi.Pop,navigator:o,static:s=!1}=t;pT()&&hT(!1);let a=gT(e),l=(0,jt.useMemo)(()=>({basename:a,navigator:o,static:s}),[a,o,s]);typeof n=="string"&&(n=m0(n));let{pathname:h="/",search:p="",hash:m="",state:y=null,key:w="default"}=n,b=(0,jt.useMemo)(()=>{let N=yT(h,a);return N==null?null:{pathname:N,search:p,hash:m,state:y,key:w}},[a,h,p,m,y,w]);return b==null?null:(0,jt.createElement)(dT.Provider,{value:l},(0,jt.createElement)(vw.Provider,{children:r,value:{location:b,navigationType:i}}))}function pT(){return(0,jt.useContext)(vw)!=null}function yT(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let r=t.charAt(e.length);return r&&r!=="/"?null:t.slice(e.length)||"/"}var gT=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/");function _w(t){let{basename:e,children:r,window:n}=t,i=(0,an.useRef)();i.current==null&&(i.current=gw({window:n}));let o=i.current,[s,a]=(0,an.useState)({action:o.action,location:o.location});return(0,an.useLayoutEffect)(()=>o.listen(a),[o]),(0,an.createElement)(ww,{basename:e,children:r,location:s.location,navigationType:s.action,navigator:o})}var FR=Ft(nb());var hr=Ft(Pe()),Rf=Ft(Df());var rO=Ft(Pe());Za();var Eo=class extends rO.Component{constructor(e={state:Zr}){super(e);this.statemgr=Zr;this.UPDATED=[];e.state&&(this.statemgr=e.state);let r=this.setState.bind(this);this.setState=n=>{this.UPDATED=Object.keys(n),r(n),typeof n=="object"&&Zr.setState(n)},setTimeout(()=>{let n={};for(let i in this.state)this.statemgr.subscribeTrigger(i,o=>{if(typeof this=="undefined")this.statemgr.unsubscribeTrigger(i);else{let a=this.UPDATED.indexOf(i);a>-1?this.UPDATED.splice(a,1):r({[i]:o})}});Object.keys(n).length>0&&r(n)},.001)}};var Oo=Ft(Pe()),my=class extends Oo.Component{render(){return Oo.default.createElement("div",null,Oo.default.createElement("div",{style:{height:200,border:"1px solid black",borderRadius:5}},"User Card + Summary"),Oo.default.createElement("div",{style:{height:300,border:"1px solid black",borderRadius:5}},"Timeline"),Oo.default.createElement("div",{style:{height:300,border:"1px solid black",borderRadius:5}},"Scrollview of selected details/summaries"))}};var xt=Ft(Pe());function nO(t=""){return`${t+Math.floor(Math.random()+Math.random()*Math.random()*1e16)}`}al();var vy=class extends Eo{constructor(){super(...arguments);this.id=nO("permissions");this.onclicked=()=>{let e=document.getElementById(this.id+"userid").value,r=document.getElementById(this.id+"name").value,n=document.getElementById(this.id+"perms"),i=n.options[n.selectedIndex].value,o=document.getElementById(this.id+"peers"),s=o.options[o.selectedIndex].value;s==="granting"?Ye.authorizeUser(Ye.currentUser,Ye.currentUser._id,"me",e,r,[n]):s==="asking"&&Ye.authorizeUser(Ye.currentUser,e,r,Ye.currentUser._id,"me",[i])}}componentDidMount(){return re(this,null,function*(){let e=yield Ye.getAuthorizations(),r=document.getElementById(this.id+"auths");e&&e.forEach(n=>{r==null||r.insertAdjacentHTML("beforeend",`
                    <tr>
                        <td>Permissions: ${n.authorizations.join(",")}</td>
                        <td>Authorized: ${n.authorizedName}</td>
                        <td>Authorizer: ${n.authorizerName}</td>
                        <td>Status: ${n.status}</td>
                    </tr>`)})})}render(){return xt.default.createElement("div",null,xt.default.createElement("div",{style:{height:400,border:"1px solid black",borderRadius:5}},"Groups and Authorizations",xt.default.createElement("br",null),"User Id or Email",xt.default.createElement("br",null),xt.default.createElement("input",{id:this.id+"userid",type:"text",placeholder:"example@example.com"}),"Name",xt.default.createElement("br",null),xt.default.createElement("input",{id:this.id+"name",type:"text",placeholder:"example@example.com"}),xt.default.createElement("br",null),"Permssions:",xt.default.createElement("br",null),xt.default.createElement("select",{id:this.id+"perms"},xt.default.createElement("option",{value:"peer",selected:!0},"Peer (read/write/chat)"),xt.default.createElement("option",{value:"control"},"Admin (hand over control)")),xt.default.createElement("br",null),"Asking or Granting?",xt.default.createElement("br",null),xt.default.createElement("select",{id:this.id+"peers"},xt.default.createElement("option",{value:"asking",selected:!0},"Asking (get access)"),xt.default.createElement("option",{value:"granting"},"Granting (give access)")),xt.default.createElement("br",null),xt.default.createElement("button",{id:this.id+"submit"},"Submit")),xt.default.createElement("div",{onClick:this.onclicked,style:{height:600,border:"1px solid black",borderRadius:5}},"Summaries of Connected Peers",xt.default.createElement("table",{id:this.id+"auths"})))}};var Ls=Ft(Pe()),wy=class extends Ls.Component{render(){return Ls.default.createElement("div",null,Ls.default.createElement("div",null,"Profile Deets + Editing"),Ls.default.createElement("div",null,"More fine grained permissions and opt-in stuff"))}};var sO=Ft(Df());gp();Za();var _y=Ft(Pe());Nc();al();Nc();function iO(){return re(this,null,function*(){let t=yield pA(),e=yield yA(t.user,t.peer),r=yield(t.user,t.peer,Ye,void 0),n=yield gA(t.user,t.peer),i=yield mA(),o=yield vA(t.peer,n.chatroom,n.comment),s=yield wA(),a=yield _A(e.userauth),l=yield SA(t.user,t.peer),h=yield bA(),p={users:t,auths:e,data:r,chatroomres:n,pnotes:i,replied:o,unotes:s,rejected:a,group:l,gauths:h};return console.log("results",p),p})}function pA(){return re(this,null,function*(){let t=yield Ic(),e=yield tb();return console.log("user",t,"peer",e),{user:t,peer:e}})}function yA(){return re(this,arguments,function*(t=Is,e=vo){let r=yield Ye.authorizeUser(t,t._id,void 0,e._id,void 0,["peer"]),n=yield dn.authorizeUser(e,t._id,void 0,e._id,void 0,["peer"]);return console.log("user-owned auth:",r,`
peer-owned auth:`,n),console.log("auths",r,n),{userauth:r,peerauth:n}})}function gA(){return re(this,arguments,function*(t=Is,e=vo){let r=Ye.getLocalData("chatroom"),n;r&&(r.length>0?n=r[0]:n=yield Ye.addChatroom(t,t._id,"this is the first comment",void 0,[e._id],!0));let i=yield Ye.addComment(t,n,n,t._id,"don't go there girlfrienddd"),o=yield Ye.addComment(t,n,i,t._id,"update: you did");return console.log("chatroom and comments",n,i,i),{chatroom:n,comment:i,comment2:o}})}function mA(){return re(this,null,function*(){if(yield dn.checkForNotifications())return yield dn.resolveNotifications()})}function vA(){return re(this,arguments,function*(t=vo,e,r){let n=yield Ye.addComment(t,e,r,t._id,"oh I went there");return console.log("new comment",n),n})}function wA(){return re(this,null,function*(){if(yield Ye.checkForNotifications())return yield dn.resolveNotifications()})}function _A(t){return re(this,null,function*(){if(t)return yield Ye.deleteAuthorization(t._id)})}function SA(){return re(this,arguments,function*(t=Is,e=vo){let r=yield dn.addGroup(e,"testgroup"+Math.floor(Math.random()*1e8),"this is a test",[e._id],[e._id],[t],!0);return console.log("new group",r),r})}function bA(){return re(this,null,function*(){yield Ye.setAuthorizationsByGroup(),yield dn.setAuthorizationsByGroup()})}var Sy=class extends Eo{componentDidMount(){return re(this,null,function*(){let e=yield iO();console.log(e)})}render(){return _y.default.createElement("div",null,_y.default.createElement("div",null,"DEV TEST (see console -- Press F12)"))}};var EA=()=>hr.default.createElement("img",{src:"src/assets/myalyce.png",width:"100px",alt:"MyAlyce"}),oO=!0,by=class extends Eo{constructor(){super(...arguments);this.state={isLoggedIn:!1,navOpen:!1,route:"/"}}onLoginClick(e){ll(e.email,e.password).then(r=>re(this,null,function*(){let n=yield ul(r);n&&(yield ms(n))}))}onGoogleLoginClick(){ll("google").then(e=>re(this,null,function*(){let r=yield ul(e);r&&(yield ms(r))}))}setNavOpen(e){this.setState({navOpen:e})}render(){return console.log(this.state.route),hr.default.createElement("div",null,!this.state.isLoggedIn&&!oO&&hr.default.createElement(sO.Login,{useRegularLogin:!0,onLoginClick:this.onLoginClick,thirdPartyLogins:[{name:"google",logo:hr.default.createElement("img",{src:"src/assets/google.png",width:"50px"}),onClick:this.onGoogleLoginClick}]}),(this.state.isLoggedIn||oO)&&hr.default.createElement("div",null,hr.default.createElement(Rf.NavDrawer,{fixed:"left",zIndex:102,isOpen:this.state.navOpen,brand:EA(),onBackdropClick:()=>this.setState({navOpen:!1}),menuItems:[{type:"action",icon:"D",onClick:()=>this.setState({route:"/dashboard",navOpen:!1}),title:"Dashboard"},{type:"action",icon:"P",onClick:()=>this.setState({route:"/peers",navOpen:!1}),title:"Peers & Groups"},{type:"action",icon:"S",onClick:()=>this.setState({route:"/settings",navOpen:!1}),title:"Profile Settings"},{type:"action",icon:"D",onClick:()=>this.setState({route:"/dev",navOpen:!1}),title:"DEV MODE"}]}),hr.default.createElement("div",{id:"view"},hr.default.createElement(Rf.TopBar,{zIndex:0,onMenuExpand:()=>{let e=!this.state.navOpen;this.setState({navOpen:e})}}),hr.default.createElement("div",{id:"viewcontent"},hr.default.createElement("div",{id:"route"},(this.state.route.includes("dashboard")||this.state.route==="/"||this.state.route==="")&&hr.default.createElement(my,null),this.state.route.includes("peers")&&hr.default.createElement(vy,null),this.state.route.includes("settings")&&hr.default.createElement(wy,null),this.state.route.includes("dev")&&hr.default.createElement(Sy,null))))))}};var OA=!0;OA&&document.head.insertAdjacentHTML("beforeend",'<link rel="stylesheet" href="dist/app.css" type="text/css" />');aO.default.render(Ey.default.createElement(_w,null,Ey.default.createElement(by,null)),document.getElementById("react"));})();
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/
/*!
  Copyright (c) 2018 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
/**
 * React Router DOM v6.2.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */
/**
 * React Router v6.2.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */
/** @license React v0.20.2
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
/** @license React v17.0.2
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
/** @license React v17.0.2
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
//# sourceMappingURL=app.js.map
